{"version":3,"file":"VideoCard-CHiZdE46.js","sources":["../../src/components/OwnedBadge.tsx","../../src/components/VideoCard.tsx"],"sourcesContent":["import React from 'react';\n\ninterface OwnedBadgeProps {\n  owned: boolean;\n  compact?: boolean;\n}\n\nexport function OwnedBadge({ owned, compact = false }: OwnedBadgeProps) {\n  if (!owned) return null;\n\n  if (compact) {\n    return (\n      <div\n        style={{\n          display: 'inline-flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          width: 24,\n          height: 24,\n          background: 'rgba(16, 185, 129, 0.2)',\n          border: '1px solid #10b981',\n          borderRadius: '50%',\n          fontSize: 12,\n        }}\n        title=\"You own this\"\n      >\n        ✓\n      </div>\n    );\n  }\n\n  return (\n    <div\n      style={{\n        display: 'inline-flex',\n        alignItems: 'center',\n        gap: 4,\n        background: 'rgba(16, 185, 129, 0.15)',\n        border: '1px solid #10b981',\n        borderRadius: 6,\n        padding: '4px 8px',\n        fontSize: 11,\n        fontWeight: 700,\n        color: '#10b981',\n        textTransform: 'uppercase',\n        letterSpacing: '0.5px',\n      }}\n    >\n      <svg\n        width=\"12\"\n        height=\"12\"\n        viewBox=\"0 0 12 12\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      >\n        <polyline points=\"2,6 5,9 10,3\" />\n      </svg>\n      Owned\n    </div>\n  );\n}\n","import React, { memo } from 'react';\nimport { Link } from 'react-router-dom';\nimport { ThumbsUp, Star, Eye } from 'lucide-react';\nimport { OwnedBadge } from './OwnedBadge';\n\ntype Props = {\n  id: number;\n  title: string;\n  author?: string;\n  likeCount?: number;\n  viewCount?: number;\n  averageRating?: number | null;\n  ratingCount?: number;\n  timeText?: string;\n  thumbnailUrl: string;\n  teaser_link?: string;\n  price?: number;\n  editions?: number;\n  owned?: boolean;\n  collaborators?: string[]; // Array of collaborator usernames\n  isCollaborative?: boolean; // Flag for collaborative content\n  chapterCount?: number; // For aggregated books\n  linkTo?: string; // Custom link path (for book projects linking to first chapter)\n};\n\n// Format like count (1.2K, 1.5M, etc.)\nfunction formatCount(count: number): string {\n  if (count >= 1000000) {\n    return `${(count / 1000000).toFixed(1)}M`;\n  } else if (count >= 1000) {\n    return `${(count / 1000).toFixed(1)}K`;\n  }\n  return `${count}`;\n}\n\nfunction VideoCardComponent({ id, title, author = 'Creator', likeCount = 0, viewCount = 0, averageRating, ratingCount = 0, timeText = '2 days ago', thumbnailUrl, teaser_link, price, editions, owned = false, collaborators, isCollaborative = false, chapterCount, linkTo }: Props) {\n  const priceNum = typeof price === 'string' ? parseFloat(price) : price;\n  const editionsNum = typeof editions === 'string' ? parseInt(editions) : editions;\n  const editionsText = editionsNum && editionsNum > 0 ? `${editionsNum} edition${editionsNum > 1 ? 's' : ''} available` : 'Sold out';\n  const priceText = priceNum && priceNum > 0 ? `$${priceNum.toFixed(2)}` : 'Free';\n\n  // Format view count with popularity indicator\n  const viewsText = formatCount(viewCount);\n  const isPopular = viewCount >= 100; // Threshold for \"popular\" styling\n  const isVeryPopular = viewCount >= 1000; // Threshold for \"very popular\" styling\n\n  // Content link - use custom linkTo if provided (for book projects)\n  const contentLink = linkTo || `/content/${id}`;\n\n  // Format rating text\n  const ratingText = averageRating != null && ratingCount > 0\n    ? `${Number(averageRating).toFixed(1)} (${formatCount(ratingCount)})`\n    : '--';\n\n  // Format likes text\n  const likesText = formatCount(likeCount);\n\n  // Extract username from author display (remove \"Creator #X\" format if present, or extract username)\n  const authorUsername = author?.startsWith('Creator #') ? null : author;\n\n  // Build clickable author component\n  const renderAuthorDisplay = () => {\n    if (isCollaborative && collaborators && collaborators.length > 0) {\n      if (collaborators.length === 1) {\n        return (\n          <>\n            By{' '}\n            <Link\n              to={`/profile/${collaborators[0]}`}\n              style={{ color: '#60a5fa', textDecoration: 'none' }}\n              onClick={(e) => e.stopPropagation()}\n            >\n              @{collaborators[0]}\n            </Link>\n          </>\n        );\n      } else if (collaborators.length === 2) {\n        return (\n          <>\n            By{' '}\n            <Link\n              to={`/profile/${collaborators[0]}`}\n              style={{ color: '#60a5fa', textDecoration: 'none' }}\n              onClick={(e) => e.stopPropagation()}\n            >\n              @{collaborators[0]}\n            </Link>\n            {' & '}\n            <Link\n              to={`/profile/${collaborators[1]}`}\n              style={{ color: '#60a5fa', textDecoration: 'none' }}\n              onClick={(e) => e.stopPropagation()}\n            >\n              @{collaborators[1]}\n            </Link>\n          </>\n        );\n      } else {\n        return (\n          <>\n            By{' '}\n            <Link\n              to={`/profile/${collaborators[0]}`}\n              style={{ color: '#60a5fa', textDecoration: 'none' }}\n              onClick={(e) => e.stopPropagation()}\n            >\n              @{collaborators[0]}\n            </Link>\n            {` & ${collaborators.length - 1} others`}\n          </>\n        );\n      }\n    }\n\n    // Non-collaborative content - single author\n    if (authorUsername) {\n      return (\n        <Link\n          to={`/profile/${authorUsername}`}\n          style={{ color: '#60a5fa', textDecoration: 'none' }}\n          onClick={(e) => e.stopPropagation()}\n        >\n          {author}\n        </Link>\n      );\n    }\n\n    return author;\n  };\n\n  return (\n    <div className=\"yt-card\">\n      <Link to={contentLink} className=\"yt-thumb\" aria-label={title}>\n        <img src={thumbnailUrl} alt={title} onError={(e: React.SyntheticEvent<HTMLImageElement>) => {\n          e.currentTarget.src = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"960\" height=\"540\"%3E%3Crect fill=\"%23111827\" width=\"960\" height=\"540\"/%3E%3Ctext fill=\"%2394a3b8\" font-family=\"sans-serif\" font-size=\"24\" x=\"50%25\" y=\"50%25\" text-anchor=\"middle\" dominant-baseline=\"middle\"%3EPreview%3C/text%3E%3C/svg%3E';\n        }} />\n        {/* Owned badge - top left */}\n        {owned && (\n          <div style={{\n            position: 'absolute',\n            top: 8,\n            left: 8,\n          }}>\n            <OwnedBadge owned={owned} />\n          </div>\n        )}\n        {/* Chapter count badge for aggregated books - bottom left */}\n        {chapterCount && chapterCount > 1 && (\n          <div style={{\n            position: 'absolute',\n            bottom: 8,\n            left: 8,\n            background: 'rgba(0,0,0,0.85)',\n            backdropFilter: 'blur(4px)',\n            padding: '3px 8px',\n            borderRadius: 4,\n            fontSize: 11,\n            fontWeight: 600,\n            color: '#60a5fa',\n          }}>\n            {chapterCount} chapters\n          </div>\n        )}\n        {/* Price badge - top right */}\n        {priceNum !== undefined && !isNaN(priceNum) && (\n          <div style={{\n            position: 'absolute',\n            top: 8,\n            right: 8,\n            background: 'rgba(0,0,0,0.8)',\n            backdropFilter: 'blur(4px)',\n            padding: '4px 8px',\n            borderRadius: 4,\n            fontSize: 12,\n            fontWeight: 700,\n            color: priceNum > 0 ? '#10b981' : '#94a3b8',\n          }}>\n            {priceText}\n          </div>\n        )}\n      </Link>\n      <div className=\"yt-info\">\n        <div className=\"yt-title\" title={title} style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n          <span style={{ overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', flex: 1 }}>{title}</span>\n          {viewCount > 0 && (\n            <span style={{\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: 3,\n              fontSize: 11,\n              fontWeight: isVeryPopular ? 700 : isPopular ? 600 : 500,\n              color: isVeryPopular ? '#f59e0b' : isPopular ? '#10b981' : '#94a3b8',\n              background: isVeryPopular ? 'rgba(245, 158, 11, 0.15)' : isPopular ? 'rgba(16, 185, 129, 0.1)' : 'transparent',\n              padding: isPopular ? '2px 6px' : '0',\n              borderRadius: 4,\n              flexShrink: 0,\n            }}>\n              <Eye size={12} />\n              {viewsText}\n            </span>\n          )}\n        </div>\n        <div className=\"yt-meta\">\n          {renderAuthorDisplay()} • <Star size={12} style={{ display: 'inline', verticalAlign: 'middle', marginRight: 2 }} />{ratingText} • <ThumbsUp size={12} style={{ display: 'inline', verticalAlign: 'middle', marginRight: 2 }} />{likesText} • {timeText}\n        </div>\n        {editionsNum !== undefined && !isNaN(editionsNum) && (\n          <div style={{\n            fontSize: 11,\n            color: editionsNum > 0 ? '#10b981' : '#ef4444',\n            fontWeight: 600,\n            marginTop: 4,\n          }}>\n            {editionsText}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport const VideoCard = memo(VideoCardComponent);\n"],"names":["OwnedBadge","owned","compact","jsx","style","display","alignItems","justifyContent","width","height","background","border","borderRadius","fontSize","title","children","jsxs","gap","padding","fontWeight","color","textTransform","letterSpacing","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","formatCount","count","toFixed","VideoCard","memo","id","author","likeCount","viewCount","averageRating","ratingCount","timeText","thumbnailUrl","teaser_link","price","editions","collaborators","isCollaborative","chapterCount","linkTo","priceNum","parseFloat","editionsNum","parseInt","editionsText","priceText","viewsText","isPopular","isVeryPopular","contentLink","ratingText","Number","likesText","authorUsername","startsWith","className","Link","to","src","alt","onError","e","currentTarget","position","top","left","bottom","backdropFilter","isNaN","right","overflow","textOverflow","whiteSpace","flex","flexShrink","Eye","size","length","Fragment","textDecoration","onClick","stopPropagation","Star","verticalAlign","marginRight","ThumbsUp","marginTop"],"mappings":"oNAOO,SAASA,GAAWC,MAAEA,EAAAC,QAAOA,GAAU,IAC5C,OAAKD,EAEDC,EAEAC,EAAAA,IAAC,MAAA,CACCC,MAAO,CACLC,QAAS,cACTC,WAAY,SACZC,eAAgB,SAChBC,MAAO,GACPC,OAAQ,GACRC,WAAY,0BACZC,OAAQ,oBACRC,aAAc,MACdC,SAAU,IAEZC,MAAM,eACPC,SAAA,MAOHC,EAAAA,KAAC,MAAA,CACCZ,MAAO,CACLC,QAAS,cACTC,WAAY,SACZW,IAAK,EACLP,WAAY,2BACZC,OAAQ,oBACRC,aAAc,EACdM,QAAS,UACTL,SAAU,GACVM,WAAY,IACZC,MAAO,UACPC,cAAe,YACfC,cAAe,SAGjBP,SAAA,CAAAZ,EAAAA,IAAC,MAAA,CACCK,MAAM,KACNC,OAAO,KACPc,QAAQ,YACRC,KAAK,OACLC,OAAO,eACPC,YAAY,IACZC,cAAc,QACdC,eAAe,QAEfb,SAAAZ,EAAAA,IAAC,WAAA,CAAS0B,OAAO,mBACb,WAnDS,IAuDrB,CCrCA,SAASC,EAAYC,GACnB,OAAIA,GAAS,IACJ,IAAIA,EAAQ,KAASC,QAAQ,MAC3BD,GAAS,IACX,IAAIA,EAAQ,KAAMC,QAAQ,MAE5B,GAAGD,GACZ,CA2LO,MAAME,EAAYC,EAAAA,KAzLzB,UAA4BC,GAAEA,EAAArB,MAAIA,EAAAsB,OAAOA,EAAS,UAAAC,UAAWA,EAAY,EAAAC,UAAGA,EAAY,EAAAC,cAAGA,EAAAC,YAAeA,EAAc,EAAAC,SAAGA,EAAW,aAAAC,aAAcA,EAAAC,YAAcA,EAAAC,MAAaA,EAAAC,SAAOA,EAAA5C,MAAUA,GAAQ,EAAA6C,cAAOA,EAAAC,gBAAeA,GAAkB,EAAAC,aAAOA,EAAAC,OAAcA,IACnQ,MAAMC,EAA4B,iBAAVN,EAAqBO,WAAWP,GAASA,EAC3DQ,EAAkC,iBAAbP,EAAwBQ,SAASR,GAAYA,EAClES,EAAeF,GAAeA,EAAc,EAAI,GAAGA,YAAsBA,EAAc,EAAI,IAAM,eAAiB,WAClHG,EAAYL,GAAYA,EAAW,EAAI,IAAIA,EAASlB,QAAQ,KAAO,OAGnEwB,EAAY1B,EAAYQ,GACxBmB,EAAYnB,GAAa,IACzBoB,EAAgBpB,GAAa,IAG7BqB,EAAcV,GAAU,YAAYd,IAGpCyB,EAA8B,MAAjBrB,GAAyBC,EAAc,EACtD,GAAGqB,OAAOtB,GAAeP,QAAQ,OAAOF,EAAYU,MACpD,KAGEsB,EAAYhC,EAAYO,GAGxB0B,GAAiB,MAAA3B,OAAA,EAAAA,EAAQ4B,WAAW,cAAe,KAAO5B,EAwEhE,SACEpB,KAAC,MAAA,CAAIiD,UAAU,UACblD,SAAA,CAAAC,OAACkD,GAAKC,GAAIR,EAAaM,UAAU,WAAW,aAAYnD,EACtDC,SAAA,CAAAZ,MAAC,OAAIiE,IAAK1B,EAAc2B,IAAKvD,EAAOwD,QAAUC,IAC5CA,EAAEC,cAAcJ,IAAM,sTAGvBnE,GACCE,EAAAA,IAAC,MAAA,CAAIC,MAAO,CACVqE,SAAU,WACVC,IAAK,EACLC,KAAM,GAEN5D,SAAAZ,EAAAA,IAACH,EAAA,CAAWC,YAIf+C,GAAgBA,EAAe,KAC9BhC,KAAC,OAAIZ,MAAO,CACVqE,SAAU,WACVG,OAAQ,EACRD,KAAM,EACNjE,WAAY,mBACZmE,eAAgB,YAChB3D,QAAS,UACTN,aAAc,EACdC,SAAU,GACVM,WAAY,IACZC,MAAO,WAENL,SAAA,CAAAiC,EAAa,oBAIJ,IAAbE,IAA2B4B,MAAM5B,IAChC/C,MAAC,OAAIC,MAAO,CACVqE,SAAU,WACVC,IAAK,EACLK,MAAO,EACPrE,WAAY,kBACZmE,eAAgB,YAChB3D,QAAS,UACTN,aAAc,EACdC,SAAU,GACVM,WAAY,IACZC,MAAO8B,EAAW,EAAI,UAAY,WAEjCnC,SAAAwC,SAIPvC,KAAC,MAAA,CAAIiD,UAAU,UACblD,SAAA,GAAAC,KAAC,MAAA,CAAIiD,UAAU,WAAWnD,QAAcV,MAAO,CAAEC,QAAS,OAAQC,WAAY,SAAUW,IAAK,GAC3FF,SAAA,GAAAZ,IAAC,OAAA,CAAKC,MAAO,CAAE4E,SAAU,SAAUC,aAAc,WAAYC,WAAY,SAAUC,KAAM,GAAMpE,SAAAD,IAC9FwB,EAAY,GACXtB,EAAAA,KAAC,OAAA,CAAKZ,MAAO,CACXC,QAAS,cACTC,WAAY,SACZW,IAAK,EACLJ,SAAU,GACVM,WAAYuC,EAAgB,IAAMD,EAAY,IAAM,IACpDrC,MAAOsC,EAAgB,UAAYD,EAAY,UAAY,UAC3D/C,WAAYgD,EAAgB,2BAA6BD,EAAY,0BAA4B,cACjGvC,QAASuC,EAAY,UAAY,IACjC7C,aAAc,EACdwE,WAAY,GAEZrE,SAAA,GAAAZ,IAACkF,EAAA,CAAIC,KAAM,KACV9B,UAIPxC,KAAC,MAAA,CAAIiD,UAAU,UACZlD,SAAA,CA7IHgC,GAAmBD,GAAiBA,EAAcyC,OAAS,EAChC,IAAzBzC,EAAcyC,OAEdvE,EAAAA,KAAAwE,WAAA,CAAEzE,SAAA,CAAA,KACG,IACHC,EAAAA,KAACkD,EAAA,CACCC,GAAI,YAAYrB,EAAc,KAC9B1C,MAAO,CAAEgB,MAAO,UAAWqE,eAAgB,QAC3CC,QAAUnB,GAAMA,EAAEoB,kBACnB5E,SAAA,CAAA,IACG+B,EAAc,SAIY,IAAzBA,EAAcyC,OAErBvE,EAAAA,KAAAwE,WAAA,CAAEzE,SAAA,CAAA,KACG,IACHC,EAAAA,KAACkD,EAAA,CACCC,GAAI,YAAYrB,EAAc,KAC9B1C,MAAO,CAAEgB,MAAO,UAAWqE,eAAgB,QAC3CC,QAAUnB,GAAMA,EAAEoB,kBACnB5E,SAAA,CAAA,IACG+B,EAAc,MAEjB,MACD9B,EAAAA,KAACkD,EAAA,CACCC,GAAI,YAAYrB,EAAc,KAC9B1C,MAAO,CAAEgB,MAAO,UAAWqE,eAAgB,QAC3CC,QAAUnB,GAAMA,EAAEoB,kBACnB5E,SAAA,CAAA,IACG+B,EAAc,SAMpB9B,EAAAA,KAAAwE,WAAA,CAAEzE,SAAA,CAAA,KACG,IACHC,EAAAA,KAACkD,EAAA,CACCC,GAAI,YAAYrB,EAAc,KAC9B1C,MAAO,CAAEgB,MAAO,UAAWqE,eAAgB,QAC3CC,QAAUnB,GAAMA,EAAEoB,kBACnB5E,SAAA,CAAA,IACG+B,EAAc,MAEjB,MAAMA,EAAcyC,OAAS,cAOlCxB,EAEA5D,EAAAA,IAAC+D,EAAA,CACCC,GAAI,YAAYJ,IAChB3D,MAAO,CAAEgB,MAAO,UAAWqE,eAAgB,QAC3CC,QAAUnB,GAAMA,EAAEoB,kBAEjB5E,SAAAqB,IAKAA,EA4EsB,MAAGjC,EAAAA,IAACyF,EAAA,CAAKN,KAAM,GAAIlF,MAAO,CAAEC,QAAS,SAAUwF,cAAe,SAAUC,YAAa,KAAQlC,EAAW,MAAGzD,EAAAA,IAAC4F,EAAA,CAAST,KAAM,GAAIlF,MAAO,CAAEC,QAAS,SAAUwF,cAAe,SAAUC,YAAa,KAAQhC,EAAU,MAAIrB,UAE/N,IAAhBW,IAA8B0B,MAAM1B,IACnCjD,MAAC,OAAIC,MAAO,CACVS,SAAU,GACVO,MAAOgC,EAAc,EAAI,UAAY,UACrCjC,WAAY,IACZ6E,UAAW,GAEVjF,SAAAuC,SAMb"}