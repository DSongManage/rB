import{j as e}from"./web3auth-BGmWjNJV.js";import{r as t,a as r}from"./router-CzH47hF_.js";import{c as s,i,j as o,A as a,B as n}from"./index-CVNR3edP.js";import{A as l}from"./arrow-left-bzgrYBXB.js";import{T as d}from"./trash-2-_0Svll8u.js";import{S as c}from"./sparkles-DL6_tAyn.js";import{C as p}from"./circle-alert-C1aEAjs-.js";import{H as x}from"./heart-y-30XILt.js";import"./vendor-Cfs_Iq82.js";
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=s("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);function u(){const{cart:s,loading:u,error:h,removeFromCart:m,clearCart:y,checkout:f,refreshCart:b}=i(),[v,j]=t.useState(!1),[C,w]=t.useState(null),k=r();if(u)return e.jsxs("div",{className:"rb-cart-page rb-cart-page--loading",style:{padding:"60px 20px",textAlign:"center",color:"var(--text-muted, #94a3b8)"},children:[e.jsx(o,{size:48,style:{opacity:.5,marginBottom:"16px"}}),e.jsx("div",{children:"Loading cart..."})]});if(!s||0===s.item_count)return e.jsxs("div",{className:"rb-cart-page rb-cart-page--empty",style:{padding:"60px 20px",textAlign:"center",maxWidth:"500px",margin:"0 auto"},children:[e.jsx(o,{size:64,style:{opacity:.3,marginBottom:"24px"}}),e.jsx("h1",{style:{fontSize:"24px",fontWeight:700,marginBottom:"12px"},children:"Your Cart is Empty"}),e.jsx("p",{style:{color:"var(--text-muted, #94a3b8)",marginBottom:"32px"},children:"Browse chapters and add them to your cart to purchase multiple items at once and save on fees."}),e.jsxs("button",{onClick:()=>k("/"),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"14px 28px",backgroundColor:"var(--accent, #3b82f6)",color:"white",border:"none",borderRadius:"10px",fontSize:"16px",fontWeight:600,cursor:"pointer"},children:[e.jsx(l,{size:18}),"Browse Marketplace"]})]});const S=parseFloat(s.savings_vs_individual||"0")>0;return e.jsxs("div",{className:"rb-cart-page",style:{maxWidth:"900px",margin:"0 auto",padding:"40px 20px"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:700,marginBottom:"8px"},children:"Shopping Cart"}),e.jsxs("p",{style:{color:"var(--text-muted, #94a3b8)"},children:[s.item_count," ",1===s.item_count?"item":"items"," in your cart"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 340px",gap:"32px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[s.items.map(t=>{let r=null;return t.cover_url&&(r=t.cover_url.startsWith("http")?t.cover_url:`${a}${t.cover_url}`),e.jsxs("div",{style:{display:"flex",gap:"16px",padding:"16px",backgroundColor:"var(--bg-secondary, #1e293b)",borderRadius:"12px",border:"1px solid var(--border, #334155)",opacity:C===t.id?.5:1,transition:"opacity 0.2s ease"},children:[e.jsx("div",{style:{width:"80px",height:"100px",flexShrink:0,borderRadius:"8px",overflow:"hidden",backgroundColor:"var(--bg-tertiary, #0f172a)",display:"flex",alignItems:"center",justifyContent:"center"},children:r?e.jsx("img",{src:r,alt:t.title,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(n,{size:32,style:{color:"var(--text-muted, #64748b)",opacity:.5}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.title}),t.book_title&&e.jsxs("p",{style:{fontSize:"13px",color:"var(--text-muted, #94a3b8)",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[t.book_title," â€¢ Chapter ",t.chapter_order]}),e.jsxs("p",{style:{fontSize:"13px",color:"var(--text-muted, #64748b)"},children:["By @",t.creator_username]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"space-between",flexShrink:0},children:[e.jsxs("span",{style:{fontSize:"18px",fontWeight:600,color:"var(--accent, #3b82f6)"},children:["$",t.unit_price]}),e.jsx("button",{onClick:()=>async function(e){w(e),await m(e),w(null)}(t.id),disabled:C===t.id,style:{padding:"8px",backgroundColor:"transparent",color:"var(--text-error, #ef4444)",border:"1px solid var(--text-error, #ef4444)",borderRadius:"8px",cursor:"pointer",opacity:C===t.id?.5:1},title:"Remove from cart",children:e.jsx(d,{size:16})})]})]},t.id)}),e.jsx("button",{onClick:async function(){window.confirm("Remove all items from your cart?")&&await y()},style:{alignSelf:"flex-start",padding:"8px 16px",backgroundColor:"transparent",color:"var(--text-muted, #94a3b8)",border:"1px solid var(--border, #334155)",borderRadius:"6px",fontSize:"13px",cursor:"pointer",marginTop:"8px"},children:"Clear Cart"})]}),e.jsxs("div",{style:{padding:"24px",backgroundColor:"var(--bg-secondary, #1e293b)",borderRadius:"16px",border:"1px solid var(--border, #334155)",height:"fit-content",position:"sticky",top:"100px"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"20px"},children:"Order Summary"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{style:{color:"var(--text-muted, #94a3b8)"},children:["Subtotal (",s.item_count," items)"]}),e.jsxs("span",{children:["$",s.subtotal]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted, #94a3b8)"},children:"Credit Card Fee"}),e.jsxs("span",{children:["$",s.credit_card_fee]})]}),S&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",backgroundColor:"var(--bg-success, #052e16)",borderRadius:"8px",border:"1px solid var(--border-success, #16a34a)"},children:[e.jsxs("span",{style:{color:"var(--text-success, #4ade80)",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(c,{size:14}),"Cart Savings"]}),e.jsxs("span",{style:{color:"var(--text-success, #4ade80)",fontWeight:600},children:["-$",s.savings_vs_individual]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"16px",borderTop:"1px solid var(--border, #334155)",fontSize:"20px",fontWeight:700},children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{style:{color:"var(--accent, #3b82f6)"},children:["$",s.total]})]})]}),h&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px",padding:"12px",backgroundColor:"var(--bg-error, #450a0a)",border:"1px solid var(--border-error, #ef4444)",borderRadius:"8px",color:"var(--text-error, #fca5a5)",fontSize:"14px"},children:[e.jsx(p,{size:16}),h]}),e.jsxs("button",{onClick:async function(){j(!0);const e=await f();e&&(window.location.href=e),j(!1)},disabled:v,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"16px 24px",backgroundColor:v?"var(--bg-disabled, #475569)":"#f59e0b",color:v?"#94a3b8":"#000",border:"none",borderRadius:"10px",fontSize:"16px",fontWeight:600,cursor:v?"not-allowed":"pointer",transition:"background-color 0.2s ease"},children:[e.jsx(g,{size:20}),v?"Processing...":`Checkout - $${s.total}`]}),e.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"var(--bg-tertiary, #0f172a)",borderRadius:"10px",fontSize:"13px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(x,{size:16,style:{color:"var(--text-success, #10b981)"}}),e.jsx("span",{style:{fontWeight:600,color:"var(--text-success, #10b981)"},children:"Supporting Creators"})]}),e.jsx("p",{style:{color:"var(--text-muted, #94a3b8)",lineHeight:"1.5"},children:"Creators receive 90% of each item's price. By using cart checkout, you save on credit card fees while supporting the creators you love."})]}),e.jsxs("div",{style:{marginTop:"12px",padding:"10px 12px",backgroundColor:"var(--bg-warning, #422006)",borderRadius:"8px",fontSize:"12px",color:"var(--text-warning, #fcd34d)"},children:[e.jsx("strong",{children:"Test Mode:"})," Use card 4242 4242 4242 4242"]})]})]})]})}export{u as default};
//# sourceMappingURL=CartPage-DkrdPFAq.js.map
