{"version":3,"file":"HomePage-BKkSo8zQ.js","sources":["../../src/components/BookCard.tsx","../../src/pages/HomePage.tsx"],"sourcesContent":["import React, { memo, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Eye, ChevronUp, ChevronDown, Star, ThumbsUp, BookOpen } from 'lucide-react';\n\ntype BookChapter = {\n  id: number;\n  title: string;\n  order: number;\n  content_id: number;\n  price_usd: number;\n  view_count: number;\n};\n\ntype Props = {\n  id: number;\n  title: string;\n  coverImageUrl: string;\n  author: string;\n  chapters: BookChapter[];\n  publishedChapters: number;\n  totalViews: number;\n  totalLikes: number;\n  totalPrice: number;\n  averageRating: number | null;\n  ratingCount: number;\n  timeText: string;\n};\n\n// Format count (1.2K, 1.5M, etc.)\nfunction formatCount(count: number): string {\n  if (count >= 1000000) {\n    return `${(count / 1000000).toFixed(1)}M`;\n  } else if (count >= 1000) {\n    return `${(count / 1000).toFixed(1)}K`;\n  }\n  return `${count}`;\n}\n\nfunction BookCardComponent({\n  id,\n  title,\n  coverImageUrl,\n  author,\n  chapters,\n  publishedChapters,\n  totalViews,\n  totalLikes,\n  totalPrice,\n  averageRating,\n  ratingCount,\n  timeText,\n}: Props) {\n  const [expanded, setExpanded] = useState(false);\n  const navigate = useNavigate();\n\n  const firstChapter = chapters.find(ch => ch.content_id);\n  const hasMultipleChapters = publishedChapters > 1;\n\n  // Popularity indicators\n  const isPopular = totalViews >= 100;\n  const isVeryPopular = totalViews >= 1000;\n\n  // Format rating\n  const ratingText = averageRating != null && ratingCount > 0\n    ? `${Number(averageRating).toFixed(1)} (${formatCount(ratingCount)})`\n    : '--';\n\n  const handleViewChapter = (contentId: number) => {\n    navigate(`/content/${contentId}`);\n  };\n\n  const handleCoverClick = () => {\n    if (hasMultipleChapters) {\n      // Toggle chapters dropdown for multi-chapter books\n      setExpanded(!expanded);\n    } else if (firstChapter) {\n      // Navigate directly for single-chapter books\n      navigate(`/content/${firstChapter.content_id}`);\n    }\n  };\n\n  return (\n    <div\n      className=\"yt-card\"\n      style={{\n        background: '#0f172a',\n        border: '1px solid #1e293b',\n        borderRadius: 16,\n        overflow: 'hidden',\n        transition: 'all 0.2s',\n      }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.transform = 'translateY(-4px)';\n        e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.25)';\n        e.currentTarget.style.borderColor = '#334155';\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.transform = 'translateY(0)';\n        e.currentTarget.style.boxShadow = 'none';\n        e.currentTarget.style.borderColor = '#1e293b';\n      }}\n    >\n      {/* Cover Image */}\n      <div\n        onClick={handleCoverClick}\n        style={{\n          width: '100%',\n          paddingTop: '56.25%', // 16:9 ratio\n          background: coverImageUrl\n            ? `url(${coverImageUrl})`\n            : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          position: 'relative',\n          cursor: 'pointer',\n        }}\n      >\n        {!coverImageUrl && (\n          <div style={{\n            position: 'absolute',\n            inset: 0,\n            display: 'grid',\n            placeItems: 'center',\n            color: 'rgba(255,255,255,0.3)',\n          }}>\n            <BookOpen size={48} />\n          </div>\n        )}\n\n        {/* Chapter count badge - only show for multiple chapters */}\n        {hasMultipleChapters && (\n          <div style={{\n            position: 'absolute',\n            top: 8,\n            right: 8,\n            background: 'rgba(0,0,0,0.85)',\n            backdropFilter: 'blur(4px)',\n            padding: '4px 10px',\n            borderRadius: 12,\n            fontSize: 12,\n            fontWeight: 600,\n            color: '#f8fafc',\n          }}>\n            {publishedChapters} chapters\n          </div>\n        )}\n\n        {/* Price badge */}\n        {totalPrice > 0 && (\n          <div style={{\n            position: 'absolute',\n            top: hasMultipleChapters ? 40 : 8,\n            right: 8,\n            background: 'rgba(0,0,0,0.8)',\n            backdropFilter: 'blur(4px)',\n            padding: '4px 8px',\n            borderRadius: 4,\n            fontSize: 12,\n            fontWeight: 700,\n            color: '#10b981',\n          }}>\n            ${totalPrice.toFixed(2)}\n          </div>\n        )}\n      </div>\n\n      {/* Card Content */}\n      <div style={{ padding: 16 }}>\n        {/* Title with views */}\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: 8,\n          marginBottom: 8,\n        }}>\n          <div style={{\n            fontSize: 15,\n            fontWeight: 600,\n            color: '#f8fafc',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n            whiteSpace: 'nowrap',\n            flex: 1,\n          }}>\n            {title}\n          </div>\n          {totalViews > 0 && (\n            <span style={{\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: 3,\n              fontSize: 11,\n              fontWeight: isVeryPopular ? 700 : isPopular ? 600 : 500,\n              color: isVeryPopular ? '#f59e0b' : isPopular ? '#10b981' : '#94a3b8',\n              background: isVeryPopular ? 'rgba(245, 158, 11, 0.15)' : isPopular ? 'rgba(16, 185, 129, 0.1)' : 'transparent',\n              padding: isPopular ? '2px 6px' : '0',\n              borderRadius: 4,\n              flexShrink: 0,\n            }}>\n              <Eye size={12} />\n              {formatCount(totalViews)}\n            </span>\n          )}\n        </div>\n\n        {/* Author and meta */}\n        <div style={{\n          fontSize: 13,\n          color: '#94a3b8',\n          marginBottom: 12,\n          display: 'flex',\n          alignItems: 'center',\n          gap: 6,\n          flexWrap: 'wrap',\n        }}>\n          <Link\n            to={`/profile/${author}`}\n            style={{ color: '#60a5fa', textDecoration: 'none' }}\n            onClick={(e) => e.stopPropagation()}\n          >\n            {author}\n          </Link>\n          <span>•</span>\n          <span style={{ display: 'inline-flex', alignItems: 'center', gap: 2 }}>\n            <Star size={12} /> {ratingText}\n          </span>\n          <span>•</span>\n          <span style={{ display: 'inline-flex', alignItems: 'center', gap: 2 }}>\n            <ThumbsUp size={12} /> {formatCount(totalLikes)}\n          </span>\n          <span>•</span>\n          <span>{timeText}</span>\n        </div>\n\n        {/* Expandable chapter list - only for multi-chapter books */}\n        {hasMultipleChapters && (\n          <>\n            <button\n              onClick={() => setExpanded(!expanded)}\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: 'none',\n                borderRadius: 8,\n                padding: '8px 12px',\n                color: '#94a3b8',\n                fontSize: 13,\n                fontWeight: 500,\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n              }}\n            >\n              <span>Chapters</span>\n              {expanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\n            </button>\n\n            {expanded && (\n              <div style={{\n                background: '#0d1117',\n                borderRadius: 8,\n                padding: 8,\n                marginTop: 8,\n                maxHeight: 200,\n                overflowY: 'auto',\n              }}>\n                {chapters.map((chapter, index) => (\n                  <div\n                    key={chapter.id}\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between',\n                      padding: '8px 10px',\n                      borderRadius: 6,\n                      background: index % 2 === 0 ? 'transparent' : 'rgba(255,255,255,0.02)',\n                    }}\n                  >\n                    <div style={{ flex: 1, minWidth: 0 }}>\n                      <div style={{\n                        fontSize: 13,\n                        color: '#e2e8f0',\n                        fontWeight: 500,\n                        whiteSpace: 'nowrap',\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                      }}>\n                        Ch {chapter.order + 1}: {chapter.title}\n                      </div>\n                      <div style={{ fontSize: 11, color: '#64748b' }}>\n                        ${chapter.price_usd.toFixed(2)} • {chapter.view_count} views\n                      </div>\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleViewChapter(chapter.content_id);\n                      }}\n                      style={{\n                    background: 'transparent',\n                    border: '1px solid #334155',\n                    borderRadius: 6,\n                    padding: '4px 10px',\n                    color: '#94a3b8',\n                    fontSize: 11,\n                    fontWeight: 500,\n                    cursor: 'pointer',\n                    marginLeft: 8,\n                    flexShrink: 0,\n                  }}\n                >\n                    View\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport const BookCard = memo(BookCardComponent);\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { API_URL } from '../config';\nimport { VideoCard } from '../components/VideoCard';\nimport { BookCard } from '../components/BookCard';\n\ntype Collaborator = {\n  username: string;\n  role: string;\n  revenue_percentage: number;\n};\n\ntype Item = {\n  id: number;\n  title: string;\n  teaser_link?: string;\n  creator?: number;\n  creator_username?: string;\n  created_at?: string;\n  content_type?: string;\n  price_usd?: number;\n  editions?: number;\n  owned?: boolean;\n  is_collaborative?: boolean;\n  collaborators?: Collaborator[];\n  like_count?: number;\n  view_count?: number;\n  average_rating?: number | null;\n  rating_count?: number;\n};\n\n// Book project from aggregated endpoint\ntype BookChapter = {\n  id: number;\n  title: string;\n  order: number;\n  content_id: number;\n  price_usd: number;\n  view_count: number;\n};\n\ntype BookProject = {\n  id: number;\n  title: string;\n  cover_image_url: string | null;\n  creator_username: string;\n  published_chapters: number;\n  chapters: BookChapter[];\n  total_views: number;\n  total_price: number;\n  total_likes: number;\n  average_rating: number | null;\n  rating_count: number;\n  first_chapter_content_id: number | null;\n  created_at: string;\n  content_type: 'book';\n};\n\n// Genre filter config - maps display name to content_type value\nconst GENRE_FILTERS = [\n  { label: 'All', value: 'all' },\n  { label: 'Books', value: 'book' },\n  { label: 'Art', value: 'art' },\n  { label: 'Film', value: 'film' },\n  { label: 'Music', value: 'music' },\n];\n\n\nexport default function HomePage() {\n  const [items, setItems] = useState<Item[]>([]);\n  const [bookProjects, setBookProjects] = useState<BookProject[]>([]);\n  const [selectedFilter, setSelectedFilter] = useState('all');\n\n  useEffect(()=>{\n    const abortController = new AbortController();\n\n    // Fetch regular content (art, film, music - excludes books which are shown aggregated)\n    const contentPromise = fetch(`${API_URL}/api/content/`, {\n      credentials: 'include',\n      signal: abortController.signal,\n    })\n      .then(r=>r.json())\n      .then(data => {\n        // Handle paginated response from DRF\n        if (data && Array.isArray(data.results)) {\n          // Filter out book content - we'll show aggregated books instead\n          return data.results.filter((item: Item) => item.content_type !== 'book');\n        } else if (Array.isArray(data)) {\n          return data.filter((item: Item) => item.content_type !== 'book');\n        }\n        return [];\n      });\n\n    // Fetch aggregated book projects\n    const booksPromise = fetch(`${API_URL}/api/book-projects/public/`, {\n      credentials: 'include',\n      signal: abortController.signal,\n    })\n      .then(r=>r.json())\n      .then(data => Array.isArray(data) ? data : []);\n\n    // Wait for both requests\n    Promise.all([contentPromise, booksPromise])\n      .then(([contentItems, books]) => {\n        setItems(contentItems);\n        setBookProjects(books);\n      })\n      .catch((err)=>{\n        if (err.name !== 'AbortError') {\n          setItems([]);\n          setBookProjects([]);\n        }\n      });\n\n    return () => abortController.abort();\n  },[]);\n\n  // Format time ago\n  const getTimeAgo = (dateString?: string) => {\n    if (!dateString) return 'Recently';\n    const date = new Date(dateString);\n    const now = new Date();\n    const seconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n\n    if (seconds < 60) return 'Just now';\n    if (seconds < 3600) return `${Math.floor(seconds / 60)} minutes ago`;\n    if (seconds < 86400) return `${Math.floor(seconds / 3600)} hours ago`;\n    if (seconds < 604800) return `${Math.floor(seconds / 86400)} days ago`;\n    return `${Math.floor(seconds / 604800)} weeks ago`;\n  };\n\n  // Create unified list with sorting info\n  type DisplayItem = {\n    type: 'content' | 'book';\n    sortKey: number; // timestamp for sorting\n    data: Item | BookProject;\n  };\n\n  const allItems: DisplayItem[] = useMemo(() => {\n    const result: DisplayItem[] = [];\n\n    // Add regular content items\n    items.forEach(it => {\n      result.push({\n        type: 'content',\n        sortKey: it.created_at ? new Date(it.created_at).getTime() : 0,\n        data: it,\n      });\n    });\n\n    // Add book projects\n    bookProjects.forEach(book => {\n      result.push({\n        type: 'book',\n        sortKey: book.created_at ? new Date(book.created_at).getTime() : 0,\n        data: book,\n      });\n    });\n\n    // Sort by most recent first\n    result.sort((a, b) => b.sortKey - a.sortKey);\n\n    return result;\n  }, [items, bookProjects]);\n\n  // Apply filter\n  const filtered = useMemo(()=>{\n    if (selectedFilter === 'all') return allItems;\n\n    return allItems.filter(item => {\n      if (item.type === 'book') {\n        return selectedFilter === 'book';\n      } else {\n        return (item.data as Item).content_type === selectedFilter;\n      }\n    });\n  },[allItems, selectedFilter]);\n\n  return (\n    <div>\n      <div className=\"chips\">\n        {GENRE_FILTERS.map(f=> (\n          <button\n            key={f.value}\n            className={`chip ${selectedFilter===f.value?'active':''}`}\n            onClick={()=>setSelectedFilter(f.value)}\n          >\n            {f.label}\n          </button>\n        ))}\n      </div>\n      <div className=\"page\" style={{padding:0, background:'transparent', border:'none', boxShadow:'none'}}>\n        <div className=\"yt-grid\">\n          {filtered.map((item) => {\n            if (item.type === 'book') {\n              const book = item.data as BookProject;\n              return (\n                <BookCard\n                  key={`book-${book.id}`}\n                  id={book.id}\n                  title={book.title}\n                  coverImageUrl={book.cover_image_url || ''}\n                  author={book.creator_username}\n                  chapters={book.chapters}\n                  publishedChapters={book.published_chapters}\n                  totalViews={book.total_views}\n                  totalLikes={book.total_likes}\n                  totalPrice={book.total_price}\n                  averageRating={book.average_rating}\n                  ratingCount={book.rating_count}\n                  timeText={getTimeAgo(book.created_at)}\n                />\n              );\n            } else {\n              const it = item.data as Item;\n              return (\n                <VideoCard\n                  key={`content-${it.id}`}\n                  id={it.id}\n                  title={it.title}\n                  author={it.creator_username || `Creator #${it.creator ?? 0}`}\n                  likeCount={it.like_count}\n                  viewCount={it.view_count}\n                  averageRating={it.average_rating}\n                  ratingCount={it.rating_count}\n                  timeText={getTimeAgo(it.created_at)}\n                  thumbnailUrl={it.teaser_link || ''}\n                  price={it.price_usd}\n                  editions={it.editions}\n                  owned={it.owned}\n                  isCollaborative={it.is_collaborative}\n                  collaborators={it.collaborators?.map(c => c.username)}\n                />\n              );\n            }\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["formatCount","count","toFixed","BookCard","memo","id","title","coverImageUrl","author","chapters","publishedChapters","totalViews","totalLikes","totalPrice","averageRating","ratingCount","timeText","expanded","setExpanded","useState","navigate","useNavigate","firstChapter","find","ch","content_id","hasMultipleChapters","isPopular","isVeryPopular","ratingText","Number","jsxs","className","style","background","border","borderRadius","overflow","transition","onMouseEnter","e","currentTarget","transform","boxShadow","borderColor","onMouseLeave","children","onClick","width","paddingTop","backgroundSize","backgroundPosition","position","cursor","jsx","inset","display","placeItems","color","BookOpen","size","top","right","backdropFilter","padding","fontSize","fontWeight","alignItems","gap","marginBottom","textOverflow","whiteSpace","flex","flexShrink","Eye","flexWrap","Link","to","textDecoration","stopPropagation","Star","ThumbsUp","Fragment","justifyContent","ChevronUp","ChevronDown","marginTop","maxHeight","overflowY","map","chapter","index","minWidth","order","price_usd","view_count","contentId","marginLeft","GENRE_FILTERS","label","value","HomePage","items","setItems","bookProjects","setBookProjects","selectedFilter","setSelectedFilter","useEffect","abortController","AbortController","contentPromise","fetch","API_URL","credentials","signal","then","r","json","data","Array","isArray","results","filter","item","content_type","booksPromise","Promise","all","contentItems","books","catch","err","name","abort","getTimeAgo","dateString","date","Date","now","seconds","Math","floor","getTime","allItems","useMemo","result","forEach","it","push","type","sortKey","created_at","book","sort","a","b","filtered","f","cover_image_url","creator_username","published_chapters","total_views","total_likes","total_price","average_rating","rating_count","VideoCard","creator","likeCount","like_count","viewCount","thumbnailUrl","teaser_link","price","editions","owned","isCollaborative","is_collaborative","collaborators","_a","c","username"],"mappings":"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"}