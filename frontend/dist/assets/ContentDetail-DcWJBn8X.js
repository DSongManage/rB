import{j as e}from"./web3auth-BkZxjmxM.js";import{r as t,L as i,g as n,a as r,u as o}from"./router-cVcvJ1e3.js";import{A as s,P as a}from"./PreviewModal-C-ZYWLot.js";import{C as l}from"./CopyrightNotice-tW_2nr_l.js";import{S as d,C as c,a as u,h as g,s as p,t as f,A as h,v as x,q as m,d as b}from"./index-Clb-55uW.js";import{R as y,S as v}from"./RatingForm-GjruxzBJ.js";import{d as j,e as S,h as w}from"./socialApi-BnIHOsdv.js";import{S as k}from"./sparkles-Gnm5Uy7V.js";import{A as _}from"./arrow-left-Cx3lpWdl.js";import{C as z}from"./circle-alert-qhyYh1Bv.js";import"./vendor-Cfs_Iq82.js";import"./ComicPageRenderer-Efk6rsAs.js";import"./thumbs-up-BVuG1z4M.js";import"./pen-BozBOA3z.js";import"./trash-2-CuRyvxhn.js";import"./send-CugJyVuD.js";import"./message-circle-B4RTv4xN.js";import"./shield-BwXZwLwT.js";function R({rating:t}){return e.jsx("div",{style:{padding:"16px 0",borderBottom:"1px solid var(--dropdown-hover)"},children:e.jsxs("div",{style:{display:"flex",gap:12},children:[t.user_avatar?e.jsx("img",{src:t.user_avatar,alt:t.username,style:{width:40,height:40,borderRadius:"50%",objectFit:"cover",flexShrink:0}}):e.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:16,fontWeight:600,flexShrink:0},children:t.username.charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:4,flexWrap:"wrap"},children:[e.jsxs(i,{to:`/profile/${t.username}`,style:{fontWeight:600,color:"var(--text)",textDecoration:"none",fontSize:14},children:["@",t.username]}),e.jsx(v,{rating:t.rating,size:"sm",readonly:!0}),e.jsx("span",{style:{fontSize:12,color:"var(--text-muted)"},children:(e=>{const t=new Date,i=new Date(e),n=Math.floor((t.getTime()-i.getTime())/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<2592e3?`${Math.floor(n/86400)}d ago`:i.toLocaleDateString()})(t.created_at)})]}),t.review_text&&e.jsx("p",{style:{color:"var(--text-dim)",fontSize:14,lineHeight:1.6,margin:0},children:t.review_text})]})]})})}function C({contentId:i,initialAverageRating:n,initialRatingCount:r=0,isAuthenticated:o=!0,onAuthRequired:s,autoOpen:a=!1}){const[l,g]=t.useState(!1),[p,f]=t.useState(!1),{ratings:h,myRating:x,isLoading:m,isSubmitting:b,error:_,averageRating:z,totalCount:C,submitMyRating:I}=function(e,i={}){const[n,r]=t.useState([]),[o,s]=t.useState(null),[a,l]=t.useState(!1),[d,c]=t.useState(!1),[u,g]=t.useState(null),[p,f]=t.useState(1),[h,x]=t.useState(!1),[m,b]=t.useState(i.initialRatingCount??0),[y,v]=t.useState(i.initialAverageRating??null),k=t.useRef(!1),_=t.useRef(!1),z=t.useRef(!1),R=t.useCallback(async(t,i=!1)=>{if(!k.current){k.current=!0,l(!0),g(null);try{const n=await j(e,t);r(e=>{const t=i?[...e,...n.results]:n.results;if(t.length>0){const e=t.reduce((e,t)=>e+t.rating,0)/t.length;v(Math.round(10*e)/10)}return t}),x(null!==n.next),b(n.count),f(t)}catch(n){const e=n instanceof Error?n.message:"Failed to load ratings";e.includes("throttle")||g(e)}finally{l(!1),k.current=!1}}},[e]),C=t.useCallback(async()=>{if(!_.current){_.current=!0;try{const t=await S(e);s(t)}catch(t){}finally{_.current=!1}}},[e]),I=t.useCallback(async()=>{await Promise.all([R(1,!1),C()])},[R,C]),B=t.useCallback(async()=>{a||!h||k.current||await R(p+1,!0)},[R,a,h,p]),W=t.useCallback(async(t,i)=>{c(!0),g(null);try{const n=await w(e,t,i);s(n),r(e=>e.findIndex(e=>e.id===n.id)>=0?e.map(e=>e.id===n.id?n:e):[n,...e])}catch(n){throw g(n instanceof Error?n.message:"Failed to submit rating"),n}finally{c(!1)}},[e]);return t.useEffect(()=>{z.current||(z.current=!0,R(1,!1),C())},[e]),t.useEffect(()=>()=>{z.current=!1},[e]),t.useEffect(()=>{void 0!==i.initialAverageRating&&null===y&&v(i.initialAverageRating),void 0!==i.initialRatingCount&&0===m&&b(i.initialRatingCount)},[i.initialAverageRating,i.initialRatingCount]),{ratings:n,myRating:o,isLoading:a,isSubmitting:d,error:u,hasMore:h,totalCount:m,averageRating:y,loadMore:B,refresh:I,submitMyRating:W}}(i,{initialAverageRating:n,initialRatingCount:r});t.useEffect(()=>{a&&!x&&o&&!m&&g(!0)},[a,x,o,m]);const B=p?h:h.slice(0,3);return e.jsxs("div",{style:{background:"var(--dropdown-bg)",borderRadius:16,border:"1px solid var(--dropdown-hover)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid var(--dropdown-hover)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx(d,{size:20,fill:"#fbbf24",color:"#fbbf24"}),e.jsx("h3",{style:{margin:0,fontSize:18,fontWeight:700,color:"var(--text)"},children:"Ratings & Reviews"})]}),null!==z&&z>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,background:"rgba(251, 191, 36, 0.1)",padding:"8px 14px",borderRadius:10,border:"1px solid rgba(251, 191, 36, 0.2)"},children:[e.jsx(d,{size:18,fill:"#fbbf24",color:"#fbbf24"}),e.jsx("span",{style:{fontSize:18,fontWeight:700,color:"#fbbf24"},children:z.toFixed(1)}),e.jsxs("span",{style:{color:"var(--text-muted)",fontSize:13},children:["(",C,")"]})]})]}),e.jsxs("div",{style:{padding:"20px 24px"},children:[o&&!x&&e.jsx("div",{style:{marginBottom:24},children:l?e.jsxs("div",{style:{background:"var(--dropdown-hover)",borderRadius:12,padding:20},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(k,{size:18,color:"#fbbf24"}),e.jsx("h4",{style:{margin:0,fontSize:16,fontWeight:600,color:"var(--text)"},children:"Write a Review"})]}),e.jsx("button",{onClick:()=>g(!1),style:{background:"transparent",border:"none",color:"var(--text-muted)",fontSize:13,cursor:"pointer"},children:"Cancel"})]}),e.jsx(y,{onSubmit:async(e,t)=>{o?(await I(e,t),g(!1)):null==s||s()},isSubmitting:b})]}):e.jsxs("button",{onClick:()=>g(!0),style:{width:"100%",padding:"14px 20px",background:"transparent",border:"2px dashed var(--border)",borderRadius:12,color:"var(--text-muted)",fontSize:14,fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#8b5cf6",e.currentTarget.style.color="#a78bfa"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--border)",e.currentTarget.style.color="var(--text-muted)"},children:[e.jsx(d,{size:18}),"Rate this comic"]})}),x&&e.jsxs("div",{style:{marginBottom:24,background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:12,padding:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:x.review_text?8:0},children:[e.jsx("span",{style:{fontSize:13,color:"#a78bfa",fontWeight:500},children:"Your rating:"}),e.jsx(v,{rating:x.rating,size:"sm",readonly:!0})]}),x.review_text&&e.jsx("p",{style:{margin:0,fontSize:14,color:"#c4b5fd",lineHeight:1.5},children:x.review_text})]}),_&&e.jsx("p",{style:{fontSize:13,color:"#ef4444",marginBottom:16,padding:"10px 14px",background:"rgba(239, 68, 68, 0.1)",borderRadius:8},children:_}),m&&0===h.length?e.jsx("div",{style:{textAlign:"center",padding:"32px 0",color:"var(--text-muted)",fontSize:14},children:"Loading ratings..."}):0===h.length?e.jsx("div",{style:{textAlign:"center",padding:"32px 0",color:"var(--text-muted)",fontSize:14},children:"No ratings yet. Be the first to rate!"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:B.map((t,i)=>e.jsx("div",{style:{borderBottom:i===B.length-1?"none":void 0},children:e.jsx(R,{rating:t})},t.id))}),h.length>3&&e.jsx("button",{onClick:()=>f(!p),style:{width:"100%",marginTop:16,padding:"12px",background:"transparent",border:"none",color:"#8b5cf6",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:p?e.jsxs(e.Fragment,{children:["Show Less ",e.jsx(c,{size:18})]}):e.jsxs(e.Fragment,{children:["Show All (",h.length,") ",e.jsx(u,{size:18})]})})]})]})]})}function I(){var d,y,v,j,S,w;const{id:k}=n(),R=r(),I=o(),{isMobile:B,isPhone:W}=g(),{displayBalance:T,syncStatus:A,isBalanceSufficient:F}=p(),[$,L]=t.useState(null),[M,P]=t.useState(!1),[D,E]=t.useState(!1),[O,H]=t.useState(!1),[U,N]=t.useState([]),[Y,q]=t.useState(new Set),V=t.useRef(null),{addToCart:Q,isInCart:X}=f(),Z="true"===new URLSearchParams(I.search).get("completed");t.useEffect(()=>{if(!k)return;const e=new AbortController;return Promise.all([fetch(`${h}/api/content/${k}/preview/`,{credentials:"include",signal:e.signal}).then(e=>e.ok?e.json():null),fetch(`${h}/api/auth/status/`,{credentials:"include",signal:e.signal}).then(e=>e.ok?e.json():null)]).then(([e,t])=>{L(e),E(!!(null==t?void 0:t.username))}).catch(e=>{e.name}),fetch(`${h}/api/content/${k}/view/`,{method:"POST",credentials:"include"}).catch(()=>{}),()=>e.abort()},[k]),t.useEffect(()=>{Z&&$&&setTimeout(()=>{var e;null==(e=V.current)||e.scrollIntoView({behavior:"smooth",block:"center"})},500)},[Z,$]),t.useEffect(()=>{$&&"comic"===$.content_type&&$.source_project_id&&(fetch(`${h}/api/comic-issues/?project=${$.source_project_id}`,{credentials:"include"}).then(e=>e.ok?e.json():[]).then(e=>{const t=e.filter(e=>e.is_published);N(t)}).catch(()=>{}),D&&fetch(`${h}/api/purchases/owned-issues/?content_id=${k}`,{credentials:"include"}).then(e=>e.ok?e.json():{owned_issue_ids:[]}).then(e=>q(new Set(e.owned_issue_ids||[]))).catch(()=>{}))},[$,D,k]);const G=()=>{P(!0)};if(!k)return null;if(!$)return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:400,color:"#94a3b8",fontSize:16},children:"Loading..."});const J="book"===(null==$?void 0:$.content_type)?`${h}/api/content/${k}/teaser/`:null==$?void 0:$.teaser_link,K=(null==(d=null==$?void 0:$.collaborators)?void 0:d.map(e=>({username:e.username,role:e.role,revenuePercentage:e.revenue_percentage})))||[],ee="string"==typeof(null==$?void 0:$.price_usd)?parseFloat($.price_usd):null==$?void 0:$.price_usd,te=ee&&ee>0?`$${ee.toFixed(2)}`:"Free",ie=null==$?void 0:$.editions,ne=ie&&ie>0?`${ie} edition${ie>1?"s":""} available`:"Sold out";return e.jsxs("div",{style:{maxWidth:900,margin:"0 auto",padding:B?"16px 12px":"24px 16px"},children:[e.jsxs("button",{onClick:()=>R(-1),style:{display:"flex",alignItems:"center",gap:8,background:"transparent",border:"none",color:"#94a3b8",cursor:"pointer",marginBottom:B?16:20,padding:0,fontSize:14},children:[e.jsx(_,{size:18}),"Back"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:W?"1fr":"300px 1fr",gap:B?16:24,marginBottom:B?24:32},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("div",{style:{width:"100%",aspectRatio:"3/4",borderRadius:12,overflow:"hidden",background:"#1e293b",cursor:"pointer",position:"relative"},onClick:G,children:[(null==$?void 0:$.teaser_link)?e.jsx("img",{src:$.teaser_link,alt:$.title,style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{e.currentTarget.style.display="none"}}):e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff",fontSize:48,fontWeight:700},children:(null==(y=null==$?void 0:$.title)?void 0:y.charAt(0))||"?"}),e.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s"},onMouseEnter:e=>e.currentTarget.style.opacity="1",onMouseLeave:e=>e.currentTarget.style.opacity="0",children:e.jsx("div",{style:{background:"rgba(255,255,255,0.9)",borderRadius:"50%",width:64,height:64,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(x,{size:32,fill:"#1e293b",color:"#1e293b"})})})]}),e.jsxs("button",{onClick:G,style:{width:"100%",marginTop:12,padding:"12px 20px",background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",color:"#fff",border:"none",borderRadius:8,fontWeight:600,fontSize:14,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx(x,{size:18}),"View Preview"]}),D&&ie>0&&ee>0&&e.jsx("div",{style:{marginTop:12,width:"100%"},children:e.jsx(s,{contentId:parseInt(k),price:ee.toFixed(2),alreadyOwned:null==(v=null==$?void 0:$.preview)?void 0:v.owned})})]}),e.jsxs("div",{children:[e.jsx("h1",{style:{color:"#f1f5f9",fontSize:28,fontWeight:700,margin:0,marginBottom:16},children:null==$?void 0:$.title}),(null==$?void 0:$.creator_username)&&e.jsxs(i,{to:`/profile/${$.creator_username}`,style:{display:"flex",alignItems:"center",gap:12,marginBottom:16,textDecoration:"none"},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:"50%",overflow:"hidden",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:$.creator_avatar?e.jsx("img",{src:$.creator_avatar,alt:$.creator_username,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(m,{size:24,color:"#fff"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{color:"#60a5fa",fontSize:15,fontWeight:600},children:["@",$.creator_username]}),$.created_at&&e.jsxs("div",{style:{color:"#64748b",fontSize:12},children:["Published ",(oe=$.created_at,new Date(oe).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))]})]})]}),(null==$?void 0:$.is_collaborative)&&K.length>0&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("button",{onClick:()=>H(!O),style:{display:"flex",alignItems:"center",gap:8,background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:"8px 12px",color:"#94a3b8",fontSize:13,cursor:"pointer",width:"fit-content"},children:[e.jsxs("span",{children:["By"," ",e.jsxs("span",{style:{color:"#60a5fa"},children:["@",null==(j=K[0])?void 0:j.username]}),K.length>1&&e.jsxs("span",{children:[" & ",K.length-1," other",K.length>2?"s":""]})]}),K.length>1&&(O?e.jsx(c,{size:16}):e.jsx(u,{size:16}))]}),O&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginTop:8,paddingLeft:8},children:K.map(t=>e.jsxs(i,{to:`/profile/${t.username}`,style:{background:"#0f172a",border:"1px solid #334155",borderRadius:6,padding:"6px 12px",fontSize:12,color:"#60a5fa",textDecoration:"none"},children:["@",t.username,e.jsxs("span",{style:{color:"#64748b",marginLeft:4},children:["(",t.role,")"]}),e.jsxs("span",{style:{color:"#10b981",marginLeft:4},children:[t.revenuePercentage,"%"]})]},t.username))})]}),e.jsxs("div",{style:{display:"flex",gap:16,marginBottom:20},children:[e.jsxs("div",{style:{background:ee>0?"rgba(16,185,129,0.15)":"rgba(148,163,184,0.15)",border:ee>0?"1px solid rgba(16,185,129,0.3)":"1px solid rgba(148,163,184,0.3)",padding:"8px 16px",borderRadius:8},children:[e.jsx("div",{style:{color:"#64748b",fontSize:11,textTransform:"uppercase",marginBottom:2},children:"Price"}),e.jsx("div",{style:{color:ee>0?"#10b981":"#94a3b8",fontSize:18,fontWeight:700},children:te})]}),e.jsxs("div",{style:{background:ie>0?"rgba(59,130,246,0.15)":"rgba(239,68,68,0.15)",border:ie>0?"1px solid rgba(59,130,246,0.3)":"1px solid rgba(239,68,68,0.3)",padding:"8px 16px",borderRadius:8},children:[e.jsx("div",{style:{color:"#64748b",fontSize:11,textTransform:"uppercase",marginBottom:2},children:"Availability"}),e.jsx("div",{style:{color:ie>0?"#60a5fa":"#ef4444",fontSize:14,fontWeight:600},children:ne})]})]}),D&&ee>0&&"no_wallet"!==A&&!F(ee)&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16,fontSize:13,color:"#f87171"},children:[e.jsx(z,{size:16}),e.jsxs("span",{children:["Your balance (",T||"$0.00",") is insufficient."," ",e.jsx(i,{to:"/wallet-info",style:{color:"#60a5fa",fontWeight:500},children:"Add funds"})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:16},children:[e.jsx("div",{style:{display:"inline-block",background:"rgba(139,92,246,0.15)",border:"1px solid rgba(139,92,246,0.3)",color:"#a78bfa",padding:"4px 12px",borderRadius:6,fontSize:12,fontWeight:600,textTransform:"capitalize"},children:null==$?void 0:$.content_type}),(null==$?void 0:$.genre)&&"other"!==$.genre&&e.jsx("div",{style:{display:"inline-block",background:"rgba(59,130,246,0.15)",border:"1px solid rgba(59,130,246,0.3)",color:"#60a5fa",padding:"4px 12px",borderRadius:6,fontSize:12,fontWeight:600},children:(re=$.genre,{fantasy:"Fantasy",scifi:"Sci-Fi",nonfiction:"Non-Fiction",drama:"Drama",comedy:"Comedy",other:"Other"}[re]||re)})]}),"comic"===(null==$?void 0:$.content_type)&&U.length>0&&D&&e.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.06)",border:"1px solid rgba(139, 92, 246, 0.15)",borderRadius:10,padding:16,marginBottom:16},children:[e.jsx("div",{style:{fontSize:12,fontWeight:600,color:"#a78bfa",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:12},children:"Issues"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:U.map(t=>{const i=Y.has(t.id);return X(t.id,"comic_issue"),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:i?"rgba(16, 185, 129, 0.08)":"#0f172a",border:i?"1px solid rgba(16, 185, 129, 0.2)":"1px solid #1e293b",borderRadius:8},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:14,fontWeight:500,color:"#e2e8f0"},children:[e.jsxs("span",{style:{color:"#64748b",marginRight:6},children:["#",t.issue_number]}),t.title]}),e.jsxs("div",{style:{fontSize:12,color:"#64748b",marginTop:2},children:[t.page_count," pages"]})]}),e.jsx("div",{children:i?e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,background:"rgba(16, 185, 129, 0.15)",color:"#10b981",padding:"6px 12px",borderRadius:6,fontSize:13,fontWeight:600},children:[e.jsx(b,{size:14})," Owned"]}):e.jsx(s,{comicIssueId:t.id,price:parseFloat(t.price).toFixed(2),compact:!0})})]},t.id)})}),U.length>1&&!(null==(S=null==$?void 0:$.preview)?void 0:S.owned)&&e.jsx("div",{style:{marginTop:12,textAlign:"center"},children:e.jsx(s,{contentId:parseInt(k),price:ee.toFixed(2),alreadyOwned:null==(w=null==$?void 0:$.preview)?void 0:w.owned})})]}),"book"===(null==$?void 0:$.content_type)&&(null==$?void 0:$.description)&&e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.06)",border:"1px solid rgba(59, 130, 246, 0.15)",borderRadius:10,padding:16,marginBottom:16},children:[e.jsx("div",{style:{fontSize:12,fontWeight:600,color:"#60a5fa",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:8},children:"Synopsis"}),e.jsx("p",{style:{color:"#e2e8f0",fontSize:14,lineHeight:1.7,margin:0},children:$.description})]}),(null==$?void 0:$.series_info)&&e.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.06)",border:"1px solid rgba(139, 92, 246, 0.15)",borderRadius:10,padding:16,marginBottom:16},children:[e.jsx("div",{style:{fontSize:12,fontWeight:600,color:"#a78bfa",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:8},children:"Part of Series"}),e.jsx("div",{style:{color:"#e2e8f0",fontSize:15,fontWeight:600},children:$.series_info.title}),$.series_info.book_count>1&&e.jsxs("div",{style:{color:"#94a3b8",fontSize:12,marginTop:4},children:[$.series_info.book_count," books in this series"]})]}),(null==$?void 0:$.authors_note)&&e.jsxs("div",{style:{paddingLeft:16,marginBottom:20,borderLeft:"3px solid #475569"},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:6},children:"From the Author"}),e.jsxs("p",{style:{color:"#cbd5e1",fontSize:14,lineHeight:1.6,margin:0,fontStyle:"italic"},children:['"',$.authors_note,'"']})]}),e.jsx(l,{authorName:(null==$?void 0:$.copyright_holder)||(null==$?void 0:$.creator_username)||"Unknown",year:(null==$?void 0:$.copyright_year)||(new Date).getFullYear()})]})]}),e.jsx(a,{open:M,onClose:()=>{P(!1)},teaserUrl:J,contentType:null==$?void 0:$.content_type,contentId:parseInt(k),price:null==$?void 0:$.price_usd,editions:null==$?void 0:$.editions,isCollaborative:null==$?void 0:$.is_collaborative,collaborators:K,creatorUsername:null==$?void 0:$.creator_username,creatorAvatar:null==$?void 0:$.creator_avatar,title:null==$?void 0:$.title,likeCount:(null==$?void 0:$.like_count)||0,userHasLiked:(null==$?void 0:$.user_has_liked)||!1,commentCount:(null==$?void 0:$.comment_count)||0}),e.jsx("div",{ref:V,children:e.jsx(C,{contentId:parseInt(k),isAuthenticated:D,onAuthRequired:()=>{R("/auth")},autoOpen:Z})})]});var re,oe}export{I as default};
