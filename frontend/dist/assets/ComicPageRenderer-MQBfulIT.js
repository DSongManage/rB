import{j as e}from"./web3auth-BHLxKbts.js";import{r as t}from"./router-zDWjfnwa.js";function r({bubble:t}){return e.jsx("div",{style:{position:"absolute",left:`${t.x_percent}%`,top:`${t.y_percent}%`,width:`${t.width_percent}%`,height:`${t.height_percent}%`,zIndex:t.z_index,backgroundColor:t.background_color||"#ffffff",border:`${t.border_width}px solid ${t.border_color||"#000000"}`,borderRadius:(()=>{switch(t.bubble_type){case"oval":case"thought":default:return"50%";case"shout":case"burst":return"8px";case"narrative":case"caption":return"4px";case"whisper":return"40%";case"radio":return"12px"}})(),display:"flex",alignItems:"center",justifyContent:"center",padding:"8%",boxSizing:"border-box",overflow:"hidden",...(()=>{const e={};switch(t.bubble_type){case"thought":e.boxShadow="4px 4px 0 rgba(0,0,0,0.1)";break;case"shout":e.fontWeight="bold";break;case"whisper":e.opacity=.9,e.fontStyle="italic";break;case"narrative":case"caption":e.fontStyle="italic";break;case"radio":e.border=`2px dashed ${t.border_color}`}return e})()},children:e.jsx("span",{style:{fontFamily:t.font_family||"Comic Sans MS, cursive, sans-serif",fontSize:`${t.font_size||14}px`,color:t.font_color||"#000000",fontWeight:t.font_weight||"normal",fontStyle:t.font_style||"normal",textAlign:t.text_align||"center",lineHeight:1.3,wordWrap:"break-word",overflowWrap:"break-word",width:"100%"},children:t.text})})}function o({panel:t}){return e.jsx("div",{style:{position:"absolute",left:`${t.x_percent}%`,top:`${t.y_percent}%`,width:`${t.width_percent}%`,height:`${t.height_percent}%`,zIndex:t.z_index,transform:(()=>{const e=[];return t.rotation&&e.push(`rotate(${t.rotation}deg)`),t.skew_x&&e.push(`skewX(${t.skew_x}deg)`),t.skew_y&&e.push(`skewY(${t.skew_y}deg)`),e.length>0?e.join(" "):"none"})(),transformOrigin:"center center"},children:e.jsxs("div",{style:{width:"100%",height:"100%",border:"none"!==t.border_style?`${t.border_width||2}px ${(()=>{switch(t.border_style){case"jagged":case"wavy":return"solid";case"none":return"none";default:return t.border_style||"solid"}})()} ${t.border_color||"#000000"}`:"none",borderRadius:t.border_radius||0,backgroundColor:t.background_color||"#ffffff",position:"relative",overflow:"hidden",boxSizing:"border-box"},children:[t.artwork&&e.jsx("img",{src:t.artwork,alt:"",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:t.artwork_fit||"cover"},draggable:!1}),t.speech_bubbles&&[...t.speech_bubbles].sort((e,t)=>e.z_index-t.z_index).map(t=>e.jsx(r,{bubble:t},t.id))]})})}function n({page:r,zoom:n,fitToContainer:i=!1}){const a=t.useRef(null),[s,d]=t.useState({width:0,height:0}),c=r.canvas_width/r.canvas_height;t.useEffect(()=>{if(!i||!a.current)return;const e=new ResizeObserver(e=>{const t=e[0];t&&d({width:t.contentRect.width,height:t.contentRect.height})});return e.observe(a.current),()=>e.disconnect()},[i]);let h=n<=1?`calc(100% * ${n})`:100*n+"%",l="auto",b=!0;if(i&&s.width>0&&s.height>0){c>s.width/s.height?(h=s.width,l=s.width/c):(l=s.height,h=s.height*c),b=!1}return e.jsx("div",{ref:a,style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:i?"hidden":n>1?"auto":"hidden"},children:e.jsx("div",{style:{width:h,height:i?l:"auto",maxWidth:i?"none":n<=1?"100%":"none",aspectRatio:b?`${c}`:void 0,maxHeight:i?"none":n<=1?"100%":"none",position:"relative",backgroundColor:r.background_color||"#ffffff",backgroundImage:r.background_image?`url(${r.background_image})`:void 0,backgroundSize:"cover",backgroundPosition:"center",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",transition:i?"none":"width 0.2s ease, max-width 0.2s ease"},children:r.panels&&[...r.panels].sort((e,t)=>e.z_index-t.z_index).map(t=>e.jsx(o,{panel:t},t.id))})})}export{n as C};
//# sourceMappingURL=ComicPageRenderer-MQBfulIT.js.map
