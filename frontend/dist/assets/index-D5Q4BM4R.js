const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-DV6U6yEG.js","assets/web3auth-C90gi1IA.js","assets/router-zDWjfnwa.js","assets/vendor-Cfs_Iq82.js","assets/VideoCard-DGFIZTsY.js","assets/star-DvDidPcJ.js","assets/eye-ClDnt4G5.js","assets/thumbs-up-DpSQEXqu.js","assets/SearchPage-CtoLONpI.js","assets/StudioPage-OeNVU3y8.js","assets/video-UxBvyrNT.js","assets/CollaborativeComicEditor-Ch5F9ZVJ.js","assets/loader-circle-DIMCIBmA.js","assets/trash-2-C6hdATr7.js","assets/regionCalculator-D3m0QDUE.js","assets/grid-3x3-jiZ3KHhW.js","assets/settings-DHlVsea_.js","assets/triangle-alert-DViL-lz3.js","assets/check-BJU9ZRN1.js","assets/plus-DKMBac84.js","assets/type-DpehoAha.js","assets/message-circle-yS8bEL0J.js","assets/CollaborativeComicEditor-CkbfgUCq.css","assets/file-text-Cf-BnyQu.js","assets/PreviewModal-BRe_UEJf.js","assets/socialApi-IVjjKfSe.js","assets/pen-Byj89hpw.js","assets/send-BUW62BWp.js","assets/circle-alert-DJOXlRIH.js","assets/ComicPageRenderer-DXyGNhLX.js","assets/copy-BsLmRgqn.js","assets/twitter-fjvQsPz8.js","assets/external-link-DcS_VnNQ.js","assets/loader-BzbGj8dz.js","assets/arrow-left-BWz9aOxQ.js","assets/shield-CDOWu5lP.js","assets/StudioPage-KxyYeuh_.css","assets/DashboardPage-D_g7882m.js","assets/ProfilePageRedesigned-BaZve7lL.js","assets/bridgeApi-BgTGQQWu.js","assets/user-check-4-KJJTBE.js","assets/arrow-right-Dcl5Yagu.js","assets/map-pin-RgDo2J4J.js","assets/palette-CbZ2tL6C.js","assets/AuthPage-CWfUVQDU.js","assets/WalletInfoPage-DsnL0qpj.js","assets/BetaLanding-1QAeS5Iw.js","assets/sparkles-CyI7bm90.js","assets/heart-CqEt0qxO.js","assets/BetaLanding-BhmzUrnj.css","assets/CollaboratorsPage-BMf1q0gc.js","assets/InviteModal-DgpEakKg.js","assets/PublicProfilePage-CSw9u01K.js","assets/RatingForm-BhfPoOPT.js","assets/user-plus-Dwx0buKu.js","assets/book-DkjZ3qoU.js","assets/ContentDetail-JxjGDXwh.js","assets/PurchaseSuccessPage-Jd-zYs57.js","assets/ReaderPage-m5Sd9KOq.js","assets/CollaborationDashboard-CMAP-kf3.js","assets/CollaborativeProjectPage-CWbcN8Sq.js","assets/circle-check-DDdKmxla.js","assets/NotificationsPage-jyt8danj.js","assets/FollowingFeedPage-C9DsG6y2.js","assets/CartPage-Du05oupB.js","assets/credit-card-DprNcvXK.js","assets/CartSuccessPage-BssMS43m.js","assets/PayoutSettingsPage-vXy_NZ2p.js","assets/TermsOfServicePage-BPQEl7Mb.js","assets/LegalPageLayout-bRnuMuxR.js","assets/PrivacyPolicyPage-DYbSNybw.js","assets/ContentPolicyPage-C71nebxT.js","assets/DMCAPolicyPage-D51BGBkv.js","assets/CreatorAgreementPage-BsaCitG0.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,i)=>((t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i)(t,"symbol"!=typeof n?n+"":n,i);import{B as n,p as i,e as a,j as o,_ as r,R as s}from"./web3auth-C90gi1IA.js";import{r as l,L as c,u as d,N as p,a as u,R as h,b as g,c as f,B as x}from"./router-zDWjfnwa.js";import"./vendor-Cfs_Iq82.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const y="undefined"!=typeof globalThis?globalThis:window;if(y.global||(y.global=y),y.Buffer||(y.Buffer=n),y.process||(y.process=i),y.process&&!y.process.on){const e=new a.EventEmitter;y.process.on=e.on.bind(e),y.process.once=e.once.bind(e),y.process.off=e.off.bind(e),y.process.emit=e.emit.bind(e),y.process.removeListener=e.removeListener.bind(e),y.process.removeAllListeners=e.removeAllListeners.bind(e),y.process.listeners=e.listeners.bind(e)}y.process.env||(y.process.env={});const m="https://api.renaissblock.com";const b={async getLibrary(){const e=await fetch(`${m}/api/library/`,{method:"GET",credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch library: ${e.statusText}`);return e.json()},async getFullContent(e){const t=await fetch(`${m}/api/content/${e}/full/`,{method:"GET",credentials:"include"});if(!t.ok){if(403===t.status)throw new Error("You do not own this content");throw new Error(`Failed to fetch content: ${t.statusText}`)}return t.json()},async updateProgress(e,t,n=""){const i=await async function(){try{const e=await fetch(`${m}/api/auth/csrf/`,{credentials:"include"}),t=await e.json();return(null==t?void 0:t.csrfToken)||""}catch(e){return""}}(),a=await fetch(`${m}/api/reading-progress/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":i,"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({content_id:e,progress_percentage:t,last_position:n})});if(!a.ok)throw new Error(`Failed to update progress: ${a.statusText}`);return a.json()},async getProgress(e){const t=await fetch(`${m}/api/reading-progress/${e}/`,{method:"GET",credentials:"include"});if(!t.ok)throw new Error(`Failed to fetch progress: ${t.statusText}`);return t.json()},async getAllProgress(){const e=await fetch(`${m}/api/reading-progress/`,{method:"GET",credentials:"include"});if(!e.ok)throw new Error(`Failed to fetch all progress: ${e.statusText}`);return e.json()},async getComicReaderData(e){const t=await fetch(`${m}/api/content/${e}/comic-reader-data/`,{method:"GET",credentials:"include"});if(!t.ok){if(403===t.status)throw new Error("You do not own this content");if(404===t.status)throw new Error("Comic data not found");throw new Error(`Failed to fetch comic data: ${t.statusText}`)}return t.json()},async getComicPreviewData(e){const t=await fetch(`${m}/api/content/${e}/comic-preview/`,{method:"GET",credentials:"include"});if(!t.ok){if(404===t.status)throw new Error("Comic data not found");throw new Error(`Failed to fetch comic preview: ${t.statusText}`)}return t.json()}};const j=l.memo(function({item:e,onClick:t}){const n=Math.round(e.progress),i=function(e){if(!e)return null;const t=new Date(e),n=(new Date).getTime()-t.getTime(),i=Math.floor(n/1e3),a=Math.floor(i/60),o=Math.floor(a/60),r=Math.floor(o/24);return i<60?"Just now":a<60?`${a}m ago`:o<24?`${o}h ago`:1===r?"Yesterday":r<7?`${r}d ago`:r<30?`${Math.floor(r/7)}w ago`:`${Math.floor(r/30)}mo ago`}(e.last_read_at);return o.jsxs(c,{to:`/reader/${e.id}`,className:"library-item-card",onClick:t,style:{display:"flex",gap:12,padding:12,background:"#0b1220",border:"1px solid #2a3444",borderRadius:8,textDecoration:"none",color:"inherit",transition:"all 0.2s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.background="#111827",e.currentTarget.style.borderColor="#374151"},onMouseLeave:e=>{e.currentTarget.style.background="#0b1220",e.currentTarget.style.borderColor="#2a3444"},children:[o.jsxs("div",{style:{position:"relative",width:80,height:80,flexShrink:0,borderRadius:6,overflow:"hidden",background:"#0e1320"},children:[o.jsx("img",{src:e.thumbnail||'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="80" height="80"%3E%3Crect fill="%23111827" width="80" height="80"/%3E%3Ctext fill="%2394a3b8" font-family="sans-serif" font-size="12" x="50%25" y="50%25" text-anchor="middle" dominant-baseline="middle"%3E%F0%9F%93%96%3C/text%3E%3C/svg%3E',alt:e.title,style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{e.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="80" height="80"%3E%3Crect fill="%23111827" width="80" height="80"/%3E%3Ctext fill="%2394a3b8" font-family="sans-serif" font-size="12" x="50%25" y="50%25" text-anchor="middle" dominant-baseline="middle"%3E%F0%9F%93%96%3C/text%3E%3C/svg%3E'}}),o.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:4,background:"rgba(0,0,0,0.5)"},children:o.jsx("div",{style:{height:"100%",width:`${e.progress}%`,background:100===n?"#10b981":"#f59e0b",transition:"width 0.3s ease"}})})]}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:0},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,fontSize:14,color:"#e5e7eb",marginBottom:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title}),o.jsx("div",{style:{fontSize:12,color:"#94a3b8"},children:e.creator})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("span",{style:{fontSize:11,color:100===n?"#10b981":n>0?"#f59e0b":"#64748b",fontWeight:600},children:100===n?"Finished":n>0?`${n}% complete`:"Not started"}),i&&n>0&&o.jsxs("span",{style:{fontSize:10,color:"#64748b"},children:["Â· ",i]})]})]})]})}),v=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},w=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),k=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var S={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=l.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:r,...s},c)=>l.createElement("svg",{ref:c,...S,width:t,height:t,stroke:e,strokeWidth:i?24*Number(n)/Number(t):n,className:w("lucide",a),...!o&&!k(s)&&{"aria-hidden":"true"},...s},[...r.map(([e,t])=>l.createElement(e,t)),...Array.isArray(o)?o:[o]])),T=(e,t)=>{const n=l.forwardRef(({className:n,...i},a)=>{return l.createElement(C,{ref:a,iconNode:t,className:w(`lucide-${o=v(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...i});var o});return n.displayName=v(e),n},R=T("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),_=T("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),E=T("book-marked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),$=T("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),z=T("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),P=T("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),X=T("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),L=T("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),W=T("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),M=T("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),I=T("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),q=T("file-pen",[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]]),O=T("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),A=T("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),F=T("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),N=T("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),D=T("mail-open",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]),B=T("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),H=T("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),J=T("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),V=T("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),G=T("party-popper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),U=T("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Y=T("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Z=T("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),K=T("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Q=T("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ee=()=>{const[e,t]=l.useState({user:null,loading:!0,isAuthenticated:!1}),n=l.useCallback(async()=>{try{const e=await fetch(`${m}/api/auth/status/`,{credentials:"include"});if(!e.ok)return void t({user:null,loading:!1,isAuthenticated:!1});const n=await e.json();(null==n?void 0:n.authenticated)&&(null==n?void 0:n.user)?t({user:n.user,loading:!1,isAuthenticated:!0}):t({user:null,loading:!1,isAuthenticated:!1})}catch(e){t({user:null,loading:!1,isAuthenticated:!1})}},[]),i=l.useCallback(async()=>{try{const e=await fetch(`${m}/api/auth/csrf/`,{credentials:"include"}),n=await e.json(),i=(null==n?void 0:n.csrfToken)||"";await fetch(`${m}/api/auth/logout/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":i,"X-Requested-With":"XMLHttpRequest"}}),t({user:null,loading:!1,isAuthenticated:!1})}catch(e){}},[]),a=l.useCallback(()=>{t(e=>({...e,loading:!0})),n()},[n]);return l.useEffect(()=>{n()},[n]),{user:e.user,loading:e.loading,isAuthenticated:e.isAuthenticated,logout:i,refreshAuth:a}};
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function te({isExpanded:e,onExpandedChange:t}){const[n,i]=l.useState(null),[a,r]=l.useState(!0),[s,d]=l.useState(null),[p,u]=l.useState("books"),[h,g]=l.useState(()=>localStorage.getItem("library-sort")||"recent"),[f,x]=l.useState(""),{isAuthenticated:y}=ee();l.useEffect(()=>{y?m():(i(null),r(!1),d(null))},[y]);const m=async()=>{try{r(!0),d(null);const e=await b.getLibrary();i(e)}catch(e){d(e instanceof Error?e.message:"Failed to load library")}finally{r(!1)}};if(!y)return null;if(!e)return o.jsxs("div",{style:{position:"fixed",left:0,top:72,bottom:0,width:48,background:"#0b1220",borderRight:"1px solid #2a3444",display:"flex",flexDirection:"column",alignItems:"center",padding:"12px 0",zIndex:40},children:[o.jsx("button",{onClick:()=>t(!0),style:{background:"transparent",border:"none",color:"#94a3b8",cursor:"pointer",padding:8,borderRadius:8,transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#111827",e.currentTarget.style.color="#e5e7eb"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#94a3b8"},"aria-label":"Expand library",children:o.jsx(X,{size:20})}),o.jsx("div",{style:{writingMode:"vertical-rl",fontSize:12,fontWeight:600,color:"#94a3b8",marginTop:16},children:"LIBRARY"})]});const v=n?Object.values(n).reduce((e,t)=>e+t.length,0):0,w=(null==n?void 0:n[p])?(k=n[p],[...k].sort((e,t)=>{switch(h){case"progress":return t.progress-e.progress;case"az":return e.title.localeCompare(t.title);default:return e.last_read_at&&t.last_read_at?new Date(t.last_read_at).getTime()-new Date(e.last_read_at).getTime():e.last_read_at?-1:t.last_read_at?1:new Date(t.purchased_at).getTime()-new Date(e.purchased_at).getTime()}})).filter(e=>""===f||e.title.toLowerCase().includes(f.toLowerCase())):[];var k;const S=n?Object.values(n).flat().filter(e=>e.progress>0&&e.progress<100).sort((e,t)=>e.last_read_at&&t.last_read_at?new Date(t.last_read_at).getTime()-new Date(e.last_read_at).getTime():e.last_read_at?-1:t.last_read_at?1:t.progress-e.progress).slice(0,3):[];return o.jsxs("div",{style:{position:"fixed",left:0,top:72,bottom:0,width:320,background:"#0b1220",borderRight:"1px solid #2a3444",display:"flex",flexDirection:"column",zIndex:40,transition:"width 0.3s ease"},children:[o.jsxs("div",{style:{padding:16,borderBottom:"1px solid #2a3444",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#e5e7eb"},children:"My Library"}),o.jsxs("div",{style:{fontSize:12,color:"#94a3b8",marginTop:2},children:[v," ",1===v?"item":"items"]})]}),o.jsx("button",{onClick:()=>t(!1),style:{background:"transparent",border:"none",color:"#94a3b8",cursor:"pointer",padding:8,borderRadius:8,transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#111827",e.currentTarget.style.color="#e5e7eb"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#94a3b8"},"aria-label":"Collapse library",children:o.jsx(P,{size:20})})]}),o.jsx("div",{style:{padding:"8px 16px",borderBottom:"1px solid #2a3444"},children:o.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[o.jsx(U,{size:14,style:{position:"absolute",left:10,color:"#64748b"}}),o.jsx("input",{type:"text",placeholder:"Search library...",value:f,onChange:e=>x(e.target.value),style:{width:"100%",background:"#111827",border:"1px solid #2a3444",borderRadius:8,padding:"8px 32px 8px 32px",fontSize:13,color:"#e5e7eb",outline:"none"}}),f&&o.jsx("button",{onClick:()=>x(""),style:{position:"absolute",right:8,background:"transparent",border:"none",color:"#64748b",cursor:"pointer",padding:2,display:"flex",alignItems:"center"},children:o.jsx(Q,{size:14})})]})}),S.length>0&&o.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #2a3444"},children:[o.jsxs("div",{style:{fontSize:12,fontWeight:600,color:"#f59e0b",marginBottom:10,display:"flex",alignItems:"center",gap:6},children:[o.jsx($,{size:14}),"Continue Reading"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:S.map(e=>o.jsx(j,{item:e},`continue-${e.id}`))})]}),o.jsxs("div",{className:"library-tabs-scroll",style:{display:"flex",gap:4,padding:"12px 16px",borderBottom:"1px solid #2a3444",overflowX:"auto"},children:[["books","art","comics"].map(e=>{var t;const i=(null==(t=null==n?void 0:n[e])?void 0:t.length)||0,a=p===e,r="books"===e?$:"art"===e?A:E;return o.jsxs("button",{onClick:()=>u(e),style:{display:"flex",alignItems:"center",gap:6,background:a?"#f59e0b":"#111827",border:"1px solid",borderColor:a?"#f59e0b":"#2a3444",color:a?"#111827":"#cbd5e1",padding:"6px 12px",borderRadius:18,fontSize:12,fontWeight:600,cursor:"pointer",whiteSpace:"nowrap",transition:"all 0.2s ease"},onMouseEnter:e=>{a||(e.currentTarget.style.background="#1f2937",e.currentTarget.style.borderColor="#374151")},onMouseLeave:e=>{a||(e.currentTarget.style.background="#111827",e.currentTarget.style.borderColor="#2a3444")},children:[o.jsx(r,{size:14}),e.charAt(0).toUpperCase()+e.slice(1)," (",i,")"]},e)}),["film","music"].map(e=>o.jsxs("button",{disabled:!0,style:{background:"#111827",border:"1px solid #2a3444",color:"#64748b",padding:"6px 12px",borderRadius:18,fontSize:12,fontWeight:600,cursor:"not-allowed",whiteSpace:"nowrap",opacity:.5,display:"flex",alignItems:"center",gap:4},children:[e.charAt(0).toUpperCase()+e.slice(1),o.jsx("span",{style:{fontSize:8,background:"#f59e0b",color:"#000",padding:"1px 3px",borderRadius:2,fontWeight:700},children:"SOON"})]},e))]}),o.jsxs("div",{style:{padding:"8px 16px",borderBottom:"1px solid #2a3444",display:"flex",alignItems:"center",gap:8},children:[o.jsx(R,{size:14,style:{color:"#64748b"}}),o.jsxs("select",{value:h,onChange:e=>{return t=e.target.value,g(t),void localStorage.setItem("library-sort",t);var t},style:{background:"#111827",border:"1px solid #2a3444",borderRadius:6,padding:"4px 8px",fontSize:12,color:"#cbd5e1",cursor:"pointer",flex:1},children:[o.jsx("option",{value:"recent",children:"Recent"}),o.jsx("option",{value:"progress",children:"Progress"}),o.jsx("option",{value:"az",children:"A-Z"})]})]}),o.jsxs("div",{className:"library-sidebar-content",style:{flex:1,overflowY:"auto",padding:16},children:[a&&o.jsx("div",{style:{textAlign:"center",padding:32,color:"#94a3b8",fontSize:14},children:"Loading library..."}),s&&o.jsxs("div",{style:{background:"#ef444420",border:"1px solid #ef4444",borderRadius:8,padding:16,color:"#fca5a5",fontSize:14},children:[s,o.jsx("button",{onClick:m,style:{marginTop:8,background:"#ef4444",color:"#fff",padding:"6px 12px",fontSize:12},children:"Retry"})]}),!a&&!s&&0===w.length&&o.jsx("div",{style:{textAlign:"center",padding:32,color:"#94a3b8",fontSize:14},children:f?`No results for "${f}"`:`No ${p} in your library yet.`}),!a&&!s&&w.length>0&&o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:w.map(e=>o.jsx(j,{item:e},e.id))})]}),o.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid #2a3444",flexShrink:0},children:[o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px 12px",marginBottom:8},children:[o.jsx(c,{to:"/legal/terms",style:ne,children:"Terms"}),o.jsx(c,{to:"/legal/privacy",style:ne,children:"Privacy"}),o.jsx(c,{to:"/legal/content-policy",style:ne,children:"Content Policy"}),o.jsx(c,{to:"/legal/dmca",style:ne,children:"DMCA"})]}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px 12px",marginBottom:10},children:[o.jsx("a",{href:"mailto:support@renaissblock.com",style:ne,children:"Contact"}),o.jsx("a",{href:"mailto:dmca@renaissblock.com",style:ne,children:"Report Copyright"})]}),o.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:["Â© ",(new Date).getFullYear()," renaissBlock"]})]})]})}const ne={fontSize:11,color:"#64748b",textDecoration:"none",transition:"color 0.2s"};const ie=l.memo(function({item:e}){const t=Math.round(e.progress),n=function(e){if(!e)return null;const t=new Date(e),n=(new Date).getTime()-t.getTime(),i=Math.floor(n/1e3),a=Math.floor(i/60),o=Math.floor(a/60),r=Math.floor(o/24);return i<60?"Just now":a<60?`${a}m ago`:o<24?`${o}h ago`:1===r?"Yesterday":r<7?`${r}d ago`:r<30?`${Math.floor(r/7)}w ago`:`${Math.floor(r/30)}mo ago`}(e.last_read_at),i='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200"%3E%3Crect fill="%23111827" width="200" height="200"/%3E%3Ctext fill="%2394a3b8" font-family="sans-serif" font-size="48" x="50%25" y="50%25" text-anchor="middle" dominant-baseline="middle"%3E%F0%9F%93%96%3C/text%3E%3C/svg%3E';return o.jsxs(c,{to:`/reader/${e.id}`,style:{display:"flex",flexDirection:"column",background:"#0b1220",border:"1px solid #2a3444",borderRadius:12,overflow:"hidden",textDecoration:"none",color:"inherit",transition:"transform 0.2s ease, box-shadow 0.2s ease"},children:[o.jsxs("div",{style:{position:"relative",aspectRatio:"1",background:"#0e1320"},children:[o.jsx("img",{src:e.thumbnail||i,alt:e.title,style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{e.currentTarget.src=i}}),o.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:4,background:"rgba(0,0,0,0.6)"},children:o.jsx("div",{style:{height:"100%",width:`${e.progress}%`,background:100===t?"#10b981":"#f59e0b",transition:"width 0.3s ease"}})})]}),o.jsxs("div",{style:{padding:10},children:[o.jsx("div",{style:{fontWeight:600,fontSize:13,color:"#e5e7eb",marginBottom:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title}),o.jsx("div",{style:{fontSize:11,color:"#94a3b8",marginBottom:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.creator}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[o.jsx("span",{style:{fontSize:11,color:100===t?"#10b981":t>0?"#f59e0b":"#64748b",fontWeight:500},children:100===t?"Finished":t>0?`${t}%`:"Not started"}),n&&t>0&&o.jsxs("span",{style:{fontSize:10,color:"#64748b"},children:["Â· ",n]})]})]})]})}),ae={books:$,art:A,comics:E,film:O,music:V};function oe(){const[e,t]=l.useState(null),[n,i]=l.useState(!0),[a,r]=l.useState(null),[s,c]=l.useState("books"),[d,p]=l.useState(()=>localStorage.getItem("library-sort")||"recent"),[u,h]=l.useState(""),[g,f]=l.useState(()=>"true"===localStorage.getItem("mobile-library-collapsed")),{isAuthenticated:x}=ee();l.useEffect(()=>{x?y():(t(null),i(!1),r(null))},[x]);const y=async()=>{try{i(!0),r(null);const e=await b.getLibrary();t(e)}catch(e){r(e instanceof Error?e.message:"Failed to load library")}finally{i(!1)}};if(!x)return null;const m=e?Object.values(e).reduce((e,t)=>e+t.length,0):0,j=(null==e?void 0:e[s])?(v=e[s],[...v].sort((e,t)=>{switch(d){case"progress":return t.progress-e.progress;case"az":return e.title.localeCompare(t.title);default:return e.last_read_at&&t.last_read_at?new Date(t.last_read_at).getTime()-new Date(e.last_read_at).getTime():e.last_read_at?-1:t.last_read_at?1:new Date(t.purchased_at).getTime()-new Date(e.purchased_at).getTime()}})).filter(e=>""===u||e.title.toLowerCase().includes(u.toLowerCase())):[];var v;const w=e?Object.values(e).flat().filter(e=>e.progress>0&&e.progress<100).sort((e,t)=>e.last_read_at&&t.last_read_at?new Date(t.last_read_at).getTime()-new Date(e.last_read_at).getTime():e.last_read_at?-1:t.last_read_at?1:t.progress-e.progress).slice(0,3):[];return n||a||0!==m?o.jsxs("div",{style:{background:"#0a0f1a",padding:g?"12px 16px":"20px 16px",marginBottom:16,transition:"padding 0.2s ease"},children:[o.jsxs("button",{onClick:()=>{const e=!g;f(e),localStorage.setItem("mobile-library-collapsed",String(e))},style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",background:"transparent",border:"none",padding:0,cursor:"pointer",marginBottom:g?0:16},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[o.jsx(F,{size:20,style:{color:"#f59e0b"}}),o.jsxs("div",{style:{textAlign:"left"},children:[o.jsx("h2",{style:{fontSize:16,fontWeight:700,color:"#e5e7eb",margin:0},children:"My Library"}),g&&o.jsxs("div",{style:{fontSize:12,color:"#94a3b8",marginTop:2},children:[m," ",1===m?"item":"items"," â€¢ Tap to expand"]})]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,color:"#94a3b8"},children:[!g&&o.jsxs("span",{style:{fontSize:12},children:[m," ",1===m?"item":"items"]}),g?o.jsx(z,{size:20}):o.jsx(L,{size:20})]})]}),!g&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{marginBottom:16},children:o.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[o.jsx(U,{size:16,style:{position:"absolute",left:12,color:"#64748b"}}),o.jsx("input",{type:"text",placeholder:"Search library...",value:u,onChange:e=>h(e.target.value),style:{width:"100%",background:"#111827",border:"1px solid #2a3444",borderRadius:10,padding:"10px 36px 10px 40px",fontSize:14,color:"#e5e7eb",outline:"none"}}),u&&o.jsx("button",{onClick:()=>h(""),style:{position:"absolute",right:10,background:"transparent",border:"none",color:"#64748b",cursor:"pointer",padding:4,display:"flex",alignItems:"center"},children:o.jsx(Q,{size:16})})]})}),w.length>0&&o.jsxs("div",{style:{marginBottom:16},children:[o.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#f59e0b",marginBottom:10,display:"flex",alignItems:"center",gap:6},children:[o.jsx($,{size:16}),"Continue Reading"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:w.map(e=>o.jsx(ie,{item:e},`continue-${e.id}`))})]}),o.jsxs("div",{style:{display:"flex",gap:8,overflowX:"auto",WebkitOverflowScrolling:"touch",paddingBottom:8,marginBottom:16,scrollbarWidth:"none",msOverflowStyle:"none"},children:[["books","art","comics"].map(t=>{var n;const i=(null==(n=null==e?void 0:e[t])?void 0:n.length)||0,a=s===t,r=ae[t];return o.jsxs("button",{onClick:()=>c(t),style:{display:"flex",alignItems:"center",gap:6,background:a?"#f59e0b":"#111827",border:"1px solid",borderColor:a?"#f59e0b":"#2a3444",color:a?"#111827":"#cbd5e1",padding:"10px 16px",borderRadius:20,fontSize:13,fontWeight:600,cursor:"pointer",whiteSpace:"nowrap",flexShrink:0,transition:"all 0.2s ease"},children:[o.jsx(r,{size:16}),t.charAt(0).toUpperCase()+t.slice(1),o.jsx("span",{style:{background:a?"rgba(0,0,0,0.2)":"#2a3444",padding:"2px 8px",borderRadius:10,fontSize:11},children:i})]},t)}),["film","music"].map(e=>{const t=ae[e];return o.jsxs("button",{disabled:!0,style:{display:"flex",alignItems:"center",gap:6,background:"#111827",border:"1px solid #2a3444",color:"#64748b",padding:"10px 16px",borderRadius:20,fontSize:13,fontWeight:600,cursor:"not-allowed",whiteSpace:"nowrap",flexShrink:0,opacity:.6},children:[o.jsx(t,{size:16}),e.charAt(0).toUpperCase()+e.slice(1),o.jsx("span",{style:{background:"#2a3444",padding:"2px 6px",borderRadius:10,fontSize:10},children:"Soon"})]},e)})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[o.jsx(R,{size:14,style:{color:"#64748b"}}),o.jsxs("select",{value:d,onChange:e=>{return t=e.target.value,p(t),void localStorage.setItem("library-sort",t);var t},style:{background:"#111827",border:"1px solid #2a3444",borderRadius:8,padding:"6px 10px",fontSize:13,color:"#cbd5e1",cursor:"pointer"},children:[o.jsx("option",{value:"recent",children:"Recent"}),o.jsx("option",{value:"progress",children:"Progress"}),o.jsx("option",{value:"az",children:"A-Z"})]})]}),n&&o.jsx("div",{style:{textAlign:"center",padding:32,color:"#94a3b8",fontSize:14},children:"Loading library..."}),a&&o.jsxs("div",{style:{background:"#ef444420",border:"1px solid #ef4444",borderRadius:12,padding:16,color:"#fca5a5",fontSize:14},children:[a,o.jsx("button",{onClick:y,style:{marginTop:8,display:"block",background:"#ef4444",color:"#fff",border:"none",padding:"8px 16px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer"},children:"Retry"})]}),!n&&!a&&0===j.length&&o.jsx("div",{style:{textAlign:"center",padding:32,color:"#94a3b8",fontSize:14},children:u?`No results for "${u}"`:`No ${s} in your library yet.`}),!n&&!a&&j.length>0&&o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:j.map(e=>o.jsx(ie,{item:e},e.id))})]})]}):null}function re(){const e="undefined"!=typeof window?window.innerWidth:1024;return{isMobile:e<=768,isPhone:e<=480,isTablet:e>480&&e<=768,isDesktop:e>768,screenWidth:e}}function se(){const[e,t]=l.useState(re);return l.useEffect(()=>{const e=()=>t(re());return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}function le({children:e}){const[t,n]=l.useState(null),i=d();l.useEffect(()=>{a()},[]);const a=async()=>{try{const e=await fetch(`${m}/api/auth/status/`,{credentials:"include"}),t=await e.json();n(!!(null==t?void 0:t.authenticated))}catch{n(!1)}};return null===t?o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"60vh",color:"#94a3b8",fontSize:16},children:"Checking authentication..."}):t?o.jsx(o.Fragment,{children:e}):o.jsx(p,{to:"/auth",state:{from:i},replace:!0})}class ce extends l.Component{constructor(e){super(e),t(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})}),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?this.props.fallback?this.props.fallback:o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",padding:"40px",textAlign:"center",color:"var(--text, #e5e7eb)"},children:[o.jsx("h2",{style:{marginBottom:"16px",color:"var(--text, #e5e7eb)"},children:"Something went wrong"}),o.jsx("p",{style:{marginBottom:"24px",color:"var(--text-muted, #94a3b8)"},children:"An error occurred while loading this section."}),o.jsx("button",{onClick:this.handleRetry,style:{padding:"10px 24px",background:"var(--accent, #f59e0b)",color:"#111",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:"Try Again"})]}):this.props.children}}const de={notifications:[],unreadCount:0,lastChecked:null,isPolling:!1,lastError:null,knownNotificationIds:new Set,initialLoadComplete:!1},pe={POLLING_INTERVAL:3e4,MAX_RETRIES:3,RETRY_DELAY:5e3};async function ue(){try{const e=await fetch(`${m}/api/auth/csrf/`,{credentials:"include"}),t=await e.json();return(null==t?void 0:t.csrfToken)||""}catch(e){return""}}async function he(e,t={}){const n=e.startsWith("/")?`${m}${e}`:e,i=await fetch(n,{credentials:"include",headers:{"Content-Type":"application/json",...t.headers},...t});if(!i.ok){const e=await i.json().catch(()=>({}));throw new Error((null==e?void 0:e.error)||`API request failed: ${i.status}`)}return i.json()}async function ge(){try{const e=await he("/api/notifications/");return de.notifications=e,de.unreadCount=e.filter(e=>!e.read).length,de.lastChecked=new Date,de.lastError=null,e.forEach(e=>de.knownNotificationIds.add(e.id)),ve.emit("notifications:updated",{notifications:e,unreadCount:de.unreadCount}),e}catch(e){throw de.lastError=e,e}}let fe=null,xe=0,ye=null;async function me(){if(de.isPolling)try{const e=new Set(de.knownNotificationIds);if(await ge(),de.initialLoadComplete){const t=de.notifications.filter(t=>!e.has(t.id)&&!t.read);t.length>0&&ve.emit("notifications:new",{notifications:t,count:t.length})}else de.initialLoadComplete=!0;xe=0}catch(e){xe++,xe>=pe.MAX_RETRIES?(je(),ve.emit("notifications:polling-error",{error:e,retryCount:xe})):(ye&&clearTimeout(ye),ye=setTimeout(()=>{me()},pe.RETRY_DELAY))}}function be(){de.isPolling||(de.isPolling=!0,xe=0,me(),fe=setInterval(me,pe.POLLING_INTERVAL),ve.emit("notifications:polling-started",{}))}function je(){de.isPolling&&(de.isPolling=!1,fe&&(clearInterval(fe),fe=null),ye&&(clearTimeout(ye),ye=null),ve.emit("notifications:polling-stopped",{}))}const ve=new class{constructor(){t(this,"listeners",new Map)}on(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),()=>this.off(e,t)}off(e,t){const n=this.listeners.get(e);n&&n.delete(t)}emit(e,t){const n=this.listeners.get(e);n&&n.forEach(e=>{try{e(t)}catch(n){}})}clear(){this.listeners.clear()}};function we(e){const t=new Date(e),n=new Date,i=Math.floor((n.getTime()-t.getTime())/1e3);return i<60?"just now":i<3600?`${Math.floor(i/60)}m ago`:i<86400?`${Math.floor(i/3600)}h ago`:i<604800?`${Math.floor(i/86400)}d ago`:t.toLocaleDateString()}function ke(e){return{invitation:"ðŸ“¬",invitation_response:"âœ‰ï¸",comment:"ðŸ’¬",approval:"âœ…",section_update:"ðŸ“",revenue_proposal:"ðŸ’°",mint_ready:"ðŸŽ‰"}[e]||"ðŸ””"}function Se(e){return{invitation:"#3b82f6",invitation_response:"#8b5cf6",comment:"#06b6d4",approval:"#10b981",section_update:"#f59e0b",revenue_proposal:"#eab308",mint_ready:"#ec4899"}[e]||"#6b7280"}const Ce={getNotifications:ge,getUnreadNotifications:async function(){return(await ge()).filter(e=>!e.read)},getUnreadCount:async function(){try{const e=(await ge()).filter(e=>!e.read).length;return de.unreadCount=e,ve.emit("notifications:unread-count",{count:e}),e}catch(e){return de.unreadCount}},markNotificationRead:async function(e){try{const t=await ue();await he(`/api/notifications/${e}/mark-read/`,{method:"POST",headers:{"X-CSRFToken":t}});const n=de.notifications.find(t=>t.id===e);n&&!n.read&&(n.read=!0,de.unreadCount=Math.max(0,de.unreadCount-1),ve.emit("notifications:updated",{notifications:de.notifications,unreadCount:de.unreadCount}),ve.emit("notifications:unread-count",{count:de.unreadCount}))}catch(t){throw t}},markAllNotificationsRead:async function(){try{const e=await ue();await he("/api/notifications/mark-all-read/",{method:"POST",headers:{"X-CSRFToken":e}}),de.notifications.forEach(e=>e.read=!0),de.unreadCount=0,ve.emit("notifications:updated",{notifications:de.notifications,unreadCount:0}),ve.emit("notifications:unread-count",{count:0})}catch(e){throw e}},deleteNotification:async function(e){const t=()=>{const t=de.notifications.findIndex(t=>t.id===e);if(-1!==t){const n=!de.notifications[t].read;de.notifications.splice(t,1),n&&(de.unreadCount=Math.max(0,de.unreadCount-1)),de.knownNotificationIds.delete(e),ve.emit("notifications:updated",{notifications:de.notifications,unreadCount:de.unreadCount}),ve.emit("notifications:unread-count",{count:de.unreadCount})}};try{const n=await ue(),i=`${m}/api/notifications/${e}/`,a=await fetch(i,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":n}});if(404===a.status)return void t();if(!a.ok)throw new Error(`Failed to delete notification: ${a.status}`);t()}catch(n){throw t(),n}},getNotificationStats:async function(){const e=await ge(),t={total:e.length,unread:e.filter(e=>!e.read).length,by_type:{invitation:0,invitation_response:0,comment:0,approval:0,section_update:0,revenue_proposal:0,mint_ready:0}};return e.forEach(e=>{t.by_type[e.type]=(t.by_type[e.type]||0)+1}),t},startPolling:be,stopPolling:je,isPolling:function(){return de.isPolling},setPollingInterval:function(e){pe.POLLING_INTERVAL=e,de.isPolling&&(je(),be())},getState:function(){return{...de}},getCachedNotifications:function(){return[...de.notifications]},getCachedUnreadCount:function(){return de.unreadCount},reset:function(){je(),de.notifications=[],de.unreadCount=0,de.lastChecked=null,de.lastError=null,de.knownNotificationIds.clear(),de.initialLoadComplete=!1,ve.clear()},events:ve,getTimeAgo:we,getNotificationIcon:ke,getNotificationColor:Se};function Te(e={}){const{autoStart:t=!1,onNewNotification:n}=e,[i,a]=l.useState([]),[o,r]=l.useState(0),[s,c]=l.useState(!1),[d,p]=l.useState(!1),[u,h]=l.useState(null),g=l.useCallback(async()=>{c(!0),h(null);try{const e=await Ce.getNotifications();a(e),r(e.filter(e=>!e.read).length)}catch(e){h(e)}finally{c(!1)}},[]),f=l.useCallback(async e=>{try{await Ce.markNotificationRead(e)}catch(t){throw h(t),t}},[]),x=l.useCallback(async()=>{try{await Ce.markAllNotificationsRead()}catch(e){throw h(e),e}},[]),y=l.useCallback(async e=>{try{await Ce.deleteNotification(e)}catch(t){}},[]),m=l.useCallback(()=>{Ce.startPolling(),p(!0)},[]),b=l.useCallback(()=>{Ce.stopPolling(),p(!1)},[]),j=l.useCallback(async()=>{try{return await Ce.getNotificationStats()}catch(e){throw h(e),e}},[]);return l.useEffect(()=>{const e=ve.on("notifications:updated",({notifications:e,unreadCount:t})=>{a(e),r(t)}),t=ve.on("notifications:unread-count",({count:e})=>{r(e)}),i=ve.on("notifications:new",({notifications:e})=>{n&&n(e)}),o=ve.on("notifications:polling-started",()=>{p(!0)}),s=ve.on("notifications:polling-stopped",()=>{p(!1)}),l=ve.on("notifications:polling-error",({error:e})=>{h(e),p(!1)});return()=>{e(),t(),i(),o(),s(),l()}},[n]),l.useEffect(()=>(t&&(m(),g()),()=>{t&&b()}),[t,m,b,g]),{notifications:i,unreadCount:o,isLoading:s,isPolling:d,error:u,refresh:g,markAsRead:f,markAllAsRead:x,deleteNotification:y,startPolling:m,stopPolling:b,getStats:j}}const Re=l.memo(function({notification:e,onClick:t,onDelete:n,onViewInvite:i}){const a=function(e){const t={size:20};switch(e){case"invitation":return o.jsx(B,{...t});case"invitation_response":return o.jsx(D,{...t});case"comment":return o.jsx(J,{...t});case"approval":return o.jsx(W,{...t});case"section_update":return o.jsx(q,{...t});case"revenue_proposal":return o.jsx(I,{...t});case"mint_ready":return o.jsx(G,{...t});default:return o.jsx(_,{...t})}}(e.type),r=Se(e.type),s=we(e.created_at),l="invitation"===e.type;return o.jsxs("div",{onClick:t,role:"button",tabIndex:0,"aria-label":`${e.read?"Read":"Unread"} notification: ${e.title}`,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())},style:{padding:"12px 20px",cursor:"pointer",background:e.read?"transparent":"#0b1220",borderLeft:`3px solid ${e.read?"transparent":r}`,transition:"all 0.2s",position:"relative"},onMouseEnter:e=>{e.currentTarget.style.background="#1e293b"},onMouseLeave:t=>{t.currentTarget.style.background=e.read?"transparent":"#0b1220"},children:[o.jsxs("div",{style:{display:"flex",gap:12},children:[o.jsx("div",{style:{width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center",background:`${r}20`,borderRadius:8,flexShrink:0,color:r},"aria-hidden":"true",children:a}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:13,fontWeight:600,color:"#e5e7eb",marginBottom:4,lineHeight:1.4},children:e.title}),o.jsx("div",{style:{fontSize:12,color:"#94a3b8",marginBottom:6,lineHeight:1.5},children:e.message}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:11,color:"#64748b"},children:[o.jsxs("span",{children:["@",e.from_user.username]}),o.jsx("span",{children:"â€¢"}),o.jsx("span",{children:s})]}),l&&i&&o.jsx("button",{onClick:t=>{t.stopPropagation(),i(e)},style:{marginTop:10,background:"#f59e0b",color:"#000",border:"none",padding:"8px 16px",borderRadius:6,fontSize:12,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",gap:6,transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="#fbbf24"},onMouseLeave:e=>{e.currentTarget.style.background="#f59e0b"},children:"View Invite â†’"})]}),o.jsx("button",{onClick:n,"aria-label":"Delete notification",style:{background:"transparent",border:"none",color:"#64748b",cursor:"pointer",padding:4,borderRadius:4,fontSize:18,width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,opacity:.6,transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="#1e293b",e.currentTarget.style.color="#ef4444",e.currentTarget.style.opacity="1"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#64748b",e.currentTarget.style.opacity="0.6"},children:"Ã—"})]}),!e.read&&o.jsx("div",{"aria-label":"Unread",style:{position:"absolute",top:18,right:20,width:8,height:8,background:r,borderRadius:"50%",boxShadow:`0 0 8px ${r}`}})]})});async function _e(){try{const e=await fetch(`${m}/api/auth/csrf/`,{credentials:"include"}),t=await e.json();return(null==t?void 0:t.csrfToken)||""}catch(e){return""}}async function Ee(e){if(!e.ok){let t=`Request failed: ${e.statusText}`;try{const n=await e.json();n.error?t=n.error:n.detail&&(t=n.detail)}catch{}throw new Error(t)}return e.json()}const $e={async createCollaborativeProject(e){const t=await _e();return Ee(await fetch(`${m}/api/collaborative-projects/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":t,"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)}))},getCollaborativeProjects:async()=>Ee(await fetch(`${m}/api/collaborative-projects/`,{method:"GET",credentials:"include"})),getCollaborativeProject:async e=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/`,{method:"GET",credentials:"include"})),getPendingInvites:async()=>Ee(await fetch(`${m}/api/collaborative-projects/pending_invites/`,{method:"GET",credentials:"include"})),updateCollaborativeProject:async(e,t)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),async deleteCollaborativeProject(e){const t=await fetch(`${m}/api/collaborative-projects/${e}/`,{method:"DELETE",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`Failed to delete project: ${t.statusText}`)},inviteCollaborator:async(e,t)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/invite_collaborator/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),acceptInvitation:async e=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/accept_invitation/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}})),declineInvitation:async e=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/decline_invitation/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}})),counterProposeInvite:async(e,t)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/counter_propose/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),respondToCounterProposal:async(e,t)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/respond-to-counter-proposal/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),proposeRevenueSplit:async(e,t)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/propose_revenue_split/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({splits:t})})),approveCurrentVersion:async e=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/approve_version/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}})),async getApprovalStatus(e){const t=await this.getCollaborativeProject(e),n=t.collaborators.filter(e=>!("accepted"!==e.status||e.approved_current_version&&e.approved_revenue_split)).map(e=>e.username);return{is_fully_approved:t.is_fully_approved,pending_approvals:n}},getProjectPreview:async e=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/preview/`,{method:"GET",credentials:"include"})),async createProjectSection(e){const t=new FormData;t.append("project",e.project.toString()),t.append("section_type",e.section_type),t.append("title",e.title),e.content_html&&t.append("content_html",e.content_html),e.media_file&&t.append("media_file",e.media_file),void 0!==e.order&&t.append("order",e.order.toString());return Ee(await fetch(`${m}/api/project-sections/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:t}))},async updateProjectSection(e,t){const n=new FormData;t.section_type&&n.append("section_type",t.section_type),t.title&&n.append("title",t.title),void 0!==t.content_html&&n.append("content_html",t.content_html),t.media_file&&n.append("media_file",t.media_file),void 0!==t.order&&n.append("order",t.order.toString());return Ee(await fetch(`${m}/api/project-sections/${e}/`,{method:"PATCH",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:n}))},async deleteProjectSection(e){const t=await fetch(`${m}/api/project-sections/${e}/`,{method:"DELETE",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`Failed to delete section: ${t.statusText}`)},getProjectSections:async e=>Ee(await fetch(`${m}/api/project-sections/?project=${e}`,{method:"GET",credentials:"include"})),async addComment(e){if(e.attachments&&e.attachments.length>0){const t=new FormData;t.append("project",e.project.toString()),t.append("content",e.content),e.section&&t.append("section",e.section.toString()),e.parent_comment&&t.append("parent_comment",e.parent_comment.toString()),e.mentions&&t.append("mentions",JSON.stringify(e.mentions)),e.attachments.forEach((e,n)=>{t.append(`attachment_${n}`,e)});return Ee(await fetch(`${m}/api/project-comments/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:t}))}return Ee(await fetch(`${m}/api/project-comments/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)}))},async getComments(e,t){let n=`${m}/api/project-comments/?project=${e}`;t&&(n+=`&section=${t}`);return Ee(await fetch(n,{method:"GET",credentials:"include"}))},resolveComment:async e=>Ee(await fetch(`${m}/api/project-comments/${e}/resolve/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}})),unresolveComment:async e=>Ee(await fetch(`${m}/api/project-comments/${e}/unresolve/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}})),updateComment:async(e,t)=>Ee(await fetch(`${m}/api/project-comments/${e}/`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({content:t})})),async deleteComment(e){const t=await fetch(`${m}/api/project-comments/${e}/`,{method:"DELETE",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`Failed to delete comment: ${t.statusText}`)},addReaction:async(e,t)=>Ee(await fetch(`${m}/api/project-comments/${e}/add-reaction/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({emoji:t})})),async removeReaction(e,t){const n=await fetch(`${m}/api/project-comments/${e}/remove-reaction/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({reaction_id:t})});if(!n.ok)throw new Error(`Failed to remove reaction: ${n.statusText}`)},getCommentThread:async e=>Ee(await fetch(`${m}/api/project-comments/${e}/thread/`,{method:"GET",credentials:"include"})),async getCommentsBySection(e,t=!1){let n=`${m}/api/project-comments/by-section/?project=${e}`;t&&(n+="&include_resolved=true");return Ee(await fetch(n,{method:"GET",credentials:"include"}))},async getUnresolvedCommentCount(e){return(await this.getComments(e)).filter(e=>!e.resolved).length},requestApproval:async(e,t)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/request_approval/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),approveProject:async(e,t)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/approve_project/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),setPrice:async(e,t)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/set_price/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({price_usd:t})})),updateCustomization:async(e,t)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/update_customization/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),mintProject:async(e,t=!1)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/mint/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({force_mint:t})})),getMintingStatus:async e=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/minting-status/`,{method:"GET",credentials:"include"})),cancelApproval:async e=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/cancel_approval/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}})),getProposals:async e=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/proposals/`,{method:"GET",credentials:"include"})),createProposal:async(e,t)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/proposals/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),castVote:async(e,t,n)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/proposals/${t}/vote/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(n)})),cancelProposal:async(e,t)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/proposals/${t}/cancel/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}})),rateCollaborator:async(e,t,n)=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/rate_collaborator/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({rated_user_id:t,...n})})),getUserRatings:async e=>Ee(await fetch(`${m}/api/users/${e}/ratings/`,{method:"GET",credentials:"include"})),getComicPages:async e=>Ee(await fetch(`${m}/api/comic-pages/?project=${e}`,{method:"GET",credentials:"include"})),getComicPage:async e=>Ee(await fetch(`${m}/api/comic-pages/${e}/`,{method:"GET",credentials:"include"})),createComicPage:async e=>Ee(await fetch(`${m}/api/comic-pages/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)})),updateComicPage:async(e,t)=>Ee(await fetch(`${m}/api/comic-pages/${e}/`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),async deleteComicPage(e){const t=await fetch(`${m}/api/comic-pages/${e}/`,{method:"DELETE",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`Failed to delete page: ${t.statusText}`)},reorderComicPage:async(e,t)=>Ee(await fetch(`${m}/api/comic-pages/${e}/reorder/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({new_position:t})})),getComicPanels:async e=>Ee(await fetch(`${m}/api/comic-panels/?page=${e}`,{method:"GET",credentials:"include"})),createComicPanel:async e=>Ee(await fetch(`${m}/api/comic-panels/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)})),updateComicPanel:async(e,t)=>Ee(await fetch(`${m}/api/comic-panels/${e}/`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),async deleteComicPanel(e){const t=await fetch(`${m}/api/comic-panels/${e}/`,{method:"DELETE",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`Failed to delete panel: ${t.statusText}`)},async uploadPanelArtwork(e,t){const n=new FormData;n.append("artwork",t);return Ee(await fetch(`${m}/api/comic-panels/${e}/upload_artwork/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:n}))},batchUpdatePanelPositions:async e=>Ee(await fetch(`${m}/api/comic-panels/batch_update_positions/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({panels:e})})),getSpeechBubbles:async e=>Ee(await fetch(`${m}/api/speech-bubbles/?panel=${e}`,{method:"GET",credentials:"include"})),createSpeechBubble:async e=>Ee(await fetch(`${m}/api/speech-bubbles/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)})),updateSpeechBubble:async(e,t)=>Ee(await fetch(`${m}/api/speech-bubbles/${e}/`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),async deleteSpeechBubble(e){const t=await fetch(`${m}/api/speech-bubbles/${e}/`,{method:"DELETE",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`Failed to delete bubble: ${t.statusText}`)},batchCreateSpeechBubbles:async e=>Ee(await fetch(`${m}/api/speech-bubbles/batch_create/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({bubbles:e})})),batchUpdateBubblePositions:async e=>Ee(await fetch(`${m}/api/speech-bubbles/batch_update_positions/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({bubbles:e})})),getDividerLines:async e=>Ee(await fetch(`${m}/api/divider-lines/?page=${e}`,{method:"GET",credentials:"include"})),createDividerLine:async e=>Ee(await fetch(`${m}/api/divider-lines/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)})),updateDividerLine:async(e,t)=>Ee(await fetch(`${m}/api/divider-lines/${e}/`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),async deleteDividerLine(e){const t=await fetch(`${m}/api/divider-lines/${e}/`,{method:"DELETE",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`Failed to delete divider line: ${t.statusText}`)},batchCreateDividerLines:async(e,t,n=!1)=>Ee(await fetch(`${m}/api/divider-lines/batch_create/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({page:e,lines:t,clear_existing:n})})),batchUpdateDividerLines:async e=>Ee(await fetch(`${m}/api/divider-lines/batch_update/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({lines:e})})),getComicSeries:async()=>Ee(await fetch(`${m}/api/comic-series/`,{method:"GET",credentials:"include"})),getComicSeriesDetail:async e=>Ee(await fetch(`${m}/api/comic-series/${e}/`,{method:"GET",credentials:"include"})),createComicSeries:async e=>Ee(await fetch(`${m}/api/comic-series/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)})),updateComicSeries:async(e,t)=>Ee(await fetch(`${m}/api/comic-series/${e}/`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),async deleteComicSeries(e){const t=await fetch(`${m}/api/comic-series/${e}/`,{method:"DELETE",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`Failed to delete series: ${t.statusText}`)},publishComicSeries:async e=>Ee(await fetch(`${m}/api/comic-series/${e}/publish/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}})),async getComicIssues(e){let t=`${m}/api/comic-issues/`;if(e){const n=new URLSearchParams;e.series&&n.append("series",e.series.toString()),e.project&&n.append("project",e.project.toString()),n.toString()&&(t+=`?${n.toString()}`)}return Ee(await fetch(t,{method:"GET",credentials:"include"}))},getComicIssueDetail:async e=>Ee(await fetch(`${m}/api/comic-issues/${e}/`,{method:"GET",credentials:"include"})),createComicIssue:async e=>Ee(await fetch(`${m}/api/comic-issues/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(e)})),updateComicIssue:async(e,t)=>Ee(await fetch(`${m}/api/comic-issues/${e}/`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)})),async deleteComicIssue(e){const t=await fetch(`${m}/api/comic-issues/${e}/`,{method:"DELETE",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`Failed to delete issue: ${t.statusText}`)},prepareComicIssue:async e=>Ee(await fetch(`${m}/api/comic-issues/${e}/prepare/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}})),publishComicIssue:async e=>Ee(await fetch(`${m}/api/comic-issues/${e}/publish/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}})),getComicIssuePages:async e=>Ee(await fetch(`${m}/api/comic-pages/?issue=${e}`,{method:"GET",credentials:"include"})),getArtworkLibrary:async e=>Ee(await fetch(`${m}/api/collaborative-projects/${e}/artwork-library/`,{method:"GET",credentials:"include"})),async uploadArtworkToLibrary(e,t,n){const i=new FormData;i.append("file",t),n&&i.append("title",n);return Ee(await fetch(`${m}/api/collaborative-projects/${e}/artwork-library/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:i}))},async deleteArtworkFromLibrary(e){const t=await fetch(`${m}/api/artwork-library/${e}/`,{method:"DELETE",credentials:"include",headers:{"X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error(`Failed to delete artwork: ${t.statusText}`)},applyArtworkToPanel:async(e,t)=>Ee(await fetch(`${m}/api/artwork-library/${e}/apply-to-panel/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":await _e(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)}))};function ze({open:e,onClose:t,projectId:n,notificationMessage:i}){const a=u(),[r,s]=l.useState(!0),[c,d]=l.useState(null),[p,h]=l.useState(null),[g,f]=l.useState("view"),[x,y]=l.useState(50),[m,b]=l.useState(""),[j,v]=l.useState(!1),[w,k]=l.useState(""),[S,C]=l.useState("");if(l.useEffect(()=>{if(!e||!n)return;(async()=>{s(!0),k("");try{const e=await $e.getCollaborativeProject(n);d(e);const t=e.collaborators.find(e=>"invited"===e.status);t&&(h(t),y(t.revenue_percentage))}catch(e){k(e.message||"Failed to load project details")}finally{s(!1)}})()},[e,n]),l.useEffect(()=>{e||(f("view"),b(""),k(""),C(""))},[e]),!e)return null;const T=async()=>{v(!0),k("");try{await $e.declineInvitation(n),C("Invite declined."),setTimeout(()=>{t()},1500)}catch(e){k(e.message||"Failed to decline invitation")}finally{v(!1)}},R=null==c?void 0:c.collaborators.find(e=>e.user===c.created_by),_=p?100-p.revenue_percentage:0,E=p&&null!==p.proposed_percentage&&void 0!==p.proposed_percentage&&Math.abs(Number(p.proposed_percentage)-Number(p.revenue_percentage))>.001;return o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",display:"grid",placeItems:"center",zIndex:1e3,padding:20},onClick:e=>{e.target!==e.currentTarget||j||t()},children:o.jsxs("div",{style:{background:"#0f172a",border:"1px solid #334155",borderRadius:16,width:"100%",maxWidth:600,maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0,0,0,0.5)"},children:[o.jsxs("div",{style:{padding:24,borderBottom:"1px solid #334155",background:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[o.jsx("span",{style:{fontSize:24},children:"ðŸ¤"}),o.jsx("h2",{style:{margin:0,color:"#f8fafc",fontSize:20,fontWeight:600},children:"Collaboration Invite"})]}),R&&o.jsxs("p",{style:{margin:0,color:"#94a3b8",fontSize:14},children:["from ",o.jsxs("span",{style:{color:"#f59e0b"},children:["@",R.username]})]})]}),o.jsx("button",{onClick:t,disabled:j,style:{background:"transparent",border:"none",color:"#94a3b8",fontSize:24,cursor:j?"not-allowed":"pointer",padding:4},children:"Ã—"})]}),o.jsx("div",{style:{padding:24},children:r?o.jsx("div",{style:{textAlign:"center",padding:40,color:"#94a3b8"},children:"Loading project details..."}):w&&!c?o.jsx("div",{style:{textAlign:"center",padding:40,color:"#ef4444"},children:w}):c&&p?"view"===g?o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:24},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[o.jsx("span",{style:{background:"#f59e0b20",color:"#f59e0b",padding:"4px 12px",borderRadius:6,fontSize:12,fontWeight:600},children:{book:"Book",music:"Music",video:"Video",art:"Art"}[c.content_type]||c.content_type}),o.jsx("span",{style:{color:"#64748b",fontSize:13},children:"draft"===c.status?"Draft":"Active"})]}),o.jsx("h3",{style:{margin:0,color:"#f8fafc",fontSize:24,fontWeight:700},children:c.title}),c.description&&o.jsx("p",{style:{margin:"8px 0 0",color:"#94a3b8",fontSize:14,lineHeight:1.6},children:c.description})]}),o.jsxs("div",{style:{background:"#1e293b",borderRadius:12,padding:16,marginBottom:20},children:[o.jsx("div",{style:{color:"#94a3b8",fontSize:12,fontWeight:600,marginBottom:8,textTransform:"uppercase"},children:"Your Role"}),o.jsx("div",{style:{color:"#f8fafc",fontSize:18,fontWeight:600},children:p.role||"Collaborator"})]}),p.contract_tasks&&p.contract_tasks.length>0&&o.jsxs("div",{style:{background:"#1e293b",borderRadius:12,padding:16,marginBottom:20},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[o.jsx("span",{style:{fontSize:18},children:"ðŸ“‹"}),o.jsxs("span",{style:{color:"#94a3b8",fontSize:12,fontWeight:600,textTransform:"uppercase"},children:["Your Contract Tasks (",p.contract_tasks.length,")"]})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:p.contract_tasks.map((e,t)=>o.jsxs("div",{style:{background:"#0f172a",borderRadius:8,padding:14,borderLeft:"3px solid #f59e0b"},children:[o.jsx("div",{style:{color:"#f8fafc",fontSize:14,fontWeight:600},children:e.title}),e.description&&o.jsx("div",{style:{color:"#94a3b8",fontSize:13,marginTop:6,lineHeight:1.5},children:e.description}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginTop:10,color:"#f59e0b",fontSize:12,fontWeight:500},children:[o.jsx("span",{children:"â°"}),o.jsxs("span",{children:["Due: ",new Date(e.deadline).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})]})]})]},e.id||t))}),o.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(245, 158, 11, 0.1)",borderRadius:8,display:"flex",alignItems:"flex-start",gap:10},children:[o.jsx("span",{style:{fontSize:16},children:"âš ï¸"}),o.jsxs("div",{style:{color:"#f59e0b",fontSize:12,lineHeight:1.5},children:[o.jsx("strong",{children:"Contract Terms:"})," By accepting, you commit to completing these tasks by their deadlines. Tasks become binding and can only be changed via mutual agreement. Missing deadlines may affect the collaboration."]})]})]}),i&&o.jsxs("div",{style:{background:"#1e293b",borderRadius:12,padding:16,marginBottom:20,borderLeft:"3px solid #3b82f6"},children:[o.jsxs("div",{style:{color:"#94a3b8",fontSize:12,fontWeight:600,marginBottom:8,textTransform:"uppercase"},children:["Message from @",null==R?void 0:R.username]}),o.jsx("div",{style:{color:"#cbd5e1",fontSize:14,lineHeight:1.6,whiteSpace:"pre-wrap"},children:i})]}),o.jsxs("div",{style:{background:"#1e293b",borderRadius:12,padding:16,marginBottom:20},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[o.jsx("span",{style:{fontSize:18},children:"ðŸ’°"}),o.jsx("span",{style:{color:"#94a3b8",fontSize:12,fontWeight:600,textTransform:"uppercase"},children:"Revenue Split"})]}),o.jsxs("div",{style:{display:"flex",gap:4,marginBottom:8},children:[o.jsxs("div",{style:{flex:p.revenue_percentage,background:"#f59e0b",height:40,borderRadius:"8px 0 0 8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#000",fontWeight:700,fontSize:14,minWidth:60},children:["You: ",p.revenue_percentage,"%"]}),o.jsxs("div",{style:{flex:_,background:"#334155",height:40,borderRadius:"0 8px 8px 0",display:"flex",alignItems:"center",justifyContent:"center",color:"#cbd5e1",fontWeight:600,fontSize:14,minWidth:60},children:["Others: ",_,"%"]})]})]}),o.jsxs("div",{style:{background:"#1e293b",borderRadius:12,padding:16,marginBottom:20},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[o.jsx("span",{style:{fontSize:18},children:"âœï¸"}),o.jsx("span",{style:{color:"#94a3b8",fontSize:12,fontWeight:600,textTransform:"uppercase"},children:"Your Permissions"})]}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[{key:"can_edit_text",label:"Text",value:p.can_edit_text},{key:"can_edit_images",label:"Images",value:p.can_edit_images},{key:"can_edit_audio",label:"Audio",value:p.can_edit_audio},{key:"can_edit_video",label:"Video",value:p.can_edit_video}].map(e=>o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",borderRadius:6,background:e.value?"#10b98120":"#64748b20",color:e.value?"#10b981":"#64748b",fontSize:13,fontWeight:500},children:[e.value?"âœ“":"âœ—"," ",e.label]},e.key))})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #7c3aed20 0%, #3b82f620 100%)",border:"1px solid #7c3aed40",borderRadius:12,padding:16,marginBottom:24},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[o.jsx("span",{style:{fontSize:18},children:"â›“ï¸"}),o.jsx("span",{style:{color:"#a78bfa",fontSize:13,fontWeight:600},children:"On-Chain Agreement"})]}),o.jsx("p",{style:{margin:0,color:"#c4b5fd",fontSize:13,lineHeight:1.6},children:"By accepting, you agree to the revenue split above. When this project is minted as an NFT, the split will be enforced via smart contract. USDC payments will be distributed automatically."})]}),w&&o.jsx("div",{style:{background:"#ef444420",border:"1px solid #ef4444",color:"#fca5a5",padding:12,borderRadius:8,fontSize:13,marginBottom:16},children:w}),S&&o.jsx("div",{style:{background:"#10b98120",border:"1px solid #10b981",color:"#6ee7b7",padding:12,borderRadius:8,fontSize:13,marginBottom:16},children:S}),E?o.jsxs("div",{style:{background:"linear-gradient(135deg, #f59e0b10 0%, #fbbf2410 100%)",border:"1px solid #f59e0b40",borderRadius:12,padding:20,textAlign:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:10,marginBottom:12},children:[o.jsx(M,{size:22,style:{color:"#f59e0b"}}),o.jsx("span",{style:{color:"#f59e0b",fontSize:16,fontWeight:600},children:"Counter-Proposal Pending"})]}),o.jsxs("p",{style:{margin:0,color:"#fbbf24",fontSize:14,lineHeight:1.6},children:["You proposed ",o.jsxs("strong",{children:[null==p?void 0:p.proposed_percentage,"%"]})," revenue split (original offer: ",null==p?void 0:p.revenue_percentage,"%)."]}),o.jsxs("p",{style:{margin:"8px 0 0",color:"#94a3b8",fontSize:13},children:["Waiting for @",null==R?void 0:R.username," to respond to your counter-proposal."]}),o.jsx("button",{onClick:T,disabled:j,style:{marginTop:16,padding:"10px 24px",borderRadius:8,border:"1px solid #ef4444",background:"transparent",color:"#ef4444",fontSize:13,fontWeight:600,cursor:j?"not-allowed":"pointer",opacity:j?.6:1},children:"Withdraw & Decline"})]}):o.jsxs("div",{style:{display:"flex",gap:12},children:[o.jsx("button",{onClick:T,disabled:j,style:{flex:1,padding:"14px 20px",borderRadius:10,border:"1px solid #ef4444",background:"transparent",color:"#ef4444",fontSize:14,fontWeight:600,cursor:j?"not-allowed":"pointer",opacity:j?.6:1},children:"Decline"}),o.jsx("button",{onClick:()=>f("counter-propose"),disabled:j,style:{flex:1,padding:"14px 20px",borderRadius:10,border:"1px solid #3b82f6",background:"transparent",color:"#3b82f6",fontSize:14,fontWeight:600,cursor:j?"not-allowed":"pointer",opacity:j?.6:1},children:"Counter-Propose"}),o.jsx("button",{onClick:async()=>{v(!0),k("");try{await $e.acceptInvitation(n),C("Invite accepted! Redirecting to project..."),setTimeout(()=>{t(),a(`/collaborations/${n}`)},1500)}catch(e){k(e.message||"Failed to accept invitation")}finally{v(!1)}},disabled:j,style:{flex:1.5,padding:"14px 20px",borderRadius:10,border:"none",background:"#10b981",color:"#fff",fontSize:14,fontWeight:700,cursor:j?"not-allowed":"pointer",opacity:j?.6:1,display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:j?"Processing...":"âœ“ Accept Invite"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>f("view"),style:{background:"transparent",border:"none",color:"#94a3b8",fontSize:14,cursor:"pointer",padding:0,marginBottom:16,display:"flex",alignItems:"center",gap:8},children:"â† Back to invite"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:24},children:[o.jsx("span",{style:{fontSize:24},children:"ðŸ’¬"}),o.jsx("h3",{style:{margin:0,color:"#f8fafc",fontSize:20,fontWeight:600},children:"Propose Different Terms"})]}),o.jsxs("div",{style:{marginBottom:24},children:[o.jsxs("label",{style:{display:"block",color:"#94a3b8",fontSize:13,fontWeight:600,marginBottom:12},children:["Suggested Revenue Split: ",x,"% for you"]}),o.jsx("input",{type:"range",min:5,max:95,step:5,value:x,onChange:e=>y(parseInt(e.target.value)),style:{width:"100%",marginBottom:8}}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:"#64748b"},children:[o.jsxs("span",{children:["Current offer: ",p.revenue_percentage,"%"]}),o.jsxs("span",{children:["Proposing: ",x,"%"]})]}),x!==p.revenue_percentage&&o.jsxs("div",{style:{marginTop:12,padding:12,background:"#1e293b",borderRadius:8,fontSize:13},children:[o.jsx("span",{style:{color:"#94a3b8"},children:"Change: "}),o.jsxs("span",{style:{color:x>p.revenue_percentage?"#10b981":"#ef4444",fontWeight:600},children:[p.revenue_percentage,"% â†’ ",x,"% (",x>p.revenue_percentage?"+":"",x-p.revenue_percentage,"%)"]})]})]}),o.jsxs("div",{style:{marginBottom:24},children:[o.jsxs("label",{style:{display:"block",color:"#94a3b8",fontSize:13,fontWeight:600,marginBottom:8},children:["Message to @",null==R?void 0:R.username]}),o.jsx("textarea",{value:m,onChange:e=>b(e.target.value),placeholder:"Explain why you'd like a different split...",style:{width:"100%",minHeight:120,background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:12,color:"#f8fafc",fontSize:14,resize:"vertical"}}),o.jsxs("div",{style:{fontSize:11,color:"#64748b",marginTop:4},children:[m.length,"/500 characters"]})]}),w&&o.jsx("div",{style:{background:"#ef444420",border:"1px solid #ef4444",color:"#fca5a5",padding:12,borderRadius:8,fontSize:13,marginBottom:16},children:w}),S&&o.jsx("div",{style:{background:"#10b98120",border:"1px solid #10b981",color:"#6ee7b7",padding:12,borderRadius:8,fontSize:13,marginBottom:16},children:S}),o.jsxs("div",{style:{display:"flex",gap:12},children:[o.jsx("button",{onClick:()=>f("view"),disabled:j,style:{flex:1,padding:"14px 20px",borderRadius:10,border:"1px solid #334155",background:"transparent",color:"#cbd5e1",fontSize:14,fontWeight:600,cursor:j?"not-allowed":"pointer"},children:"Cancel"}),o.jsx("button",{onClick:async()=>{if(m.trim()){v(!0),k("");try{await $e.counterProposeInvite(n,{proposed_percentage:x,message:m}),C("Counter-proposal sent! Waiting for response..."),setTimeout(()=>{t()},2e3)}catch(e){k(e.message||"Failed to send counter-proposal")}finally{v(!1)}}else k("Please add a message explaining your counter-proposal")},disabled:j||!m.trim()||m.length>500,style:{flex:2,padding:"14px 20px",borderRadius:10,border:"none",background:"#3b82f6",color:"#fff",fontSize:14,fontWeight:700,cursor:j||!m.trim()||m.length>500?"not-allowed":"pointer",opacity:j||!m.trim()||m.length>500?.6:1},children:j?"Sending...":"Send Counter-Offer"})]})]}):o.jsx("div",{style:{textAlign:"center",padding:40,color:"#94a3b8"},children:"No invite found for this project."})})]})})}function Pe({isOpen:e,onClose:t,anchorEl:n}){const i=u(),a=l.useRef(null),[r,s]=l.useState(!1),[c,d]=l.useState(null),{notifications:p,unreadCount:h,isLoading:g,markAsRead:f,markAllAsRead:x,deleteNotification:y,refresh:m}=Te(),b=p.slice(0,10),j=async e=>{e.read||await f(e.id),d(e),s(!0)};l.useEffect(()=>{if(!e)return;const i=e=>{a.current&&!a.current.contains(e.target)&&n&&!n.contains(e.target)&&t()},o=setTimeout(()=>{document.addEventListener("mousedown",i)},100);return()=>{clearTimeout(o),document.removeEventListener("mousedown",i)}},[e,t,n]),l.useEffect(()=>{if(!e)return;const n=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e,t]),l.useEffect(()=>{e&&m()},[e,m]);return e?o.jsxs("div",{ref:a,role:"dialog","aria-label":"Notifications","aria-modal":"false",style:{position:"absolute",top:"100%",right:0,marginTop:8,width:"min(420px, calc(100vw - 32px))",maxHeight:600,background:"#0f172a",border:"1px solid #1f2937",borderRadius:12,boxShadow:"0 10px 40px rgba(0, 0, 0, 0.5)",zIndex:3e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #1f2937",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[o.jsx("h3",{style:{fontSize:16,fontWeight:700,color:"#e5e7eb",margin:0},children:"Notifications"}),h>0&&o.jsx("div",{"aria-label":`${h} unread`,style:{background:"#ef4444",color:"#fff",fontSize:11,fontWeight:700,padding:"2px 8px",borderRadius:10,minWidth:20,textAlign:"center"},children:h})]}),b.length>0&&h>0&&o.jsx("button",{onClick:async()=>{try{await x()}catch(e){}},"aria-label":"Mark all as read",style:{background:"transparent",color:"#3b82f6",border:"none",fontSize:12,fontWeight:600,cursor:"pointer",padding:"4px 8px",borderRadius:4,transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="#1e293b"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:"Mark All Read"})]}),o.jsx("div",{style:{flex:1,overflowY:"auto",maxHeight:500},children:g&&0===b.length?o.jsx("div",{style:{padding:40,textAlign:"center",color:"#94a3b8",fontSize:14},children:"Loading notifications..."}):0===b.length?o.jsxs("div",{style:{padding:40,textAlign:"center",color:"#94a3b8"},children:[o.jsx("div",{style:{fontSize:48,marginBottom:12},"aria-hidden":"true",children:"ðŸ””"}),o.jsx("div",{style:{fontSize:14,fontWeight:600,marginBottom:4},children:"No notifications yet"}),o.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"We'll notify you when there's activity on your collaborations"})]}):o.jsx("div",{style:{padding:"8px 0"},children:b.map(e=>o.jsx(Re,{notification:e,onClick:()=>(async e=>{e.read||await f(e.id),e.action_url?(i(e.action_url),t()):e.project_id&&(i(`/collaborations/${e.project_id}`),t())})(e),onDelete:t=>(async(e,t)=>{e.stopPropagation();try{await y(t)}catch(n){}})(t,e.id),onViewInvite:j},e.id))})}),b.length>0&&o.jsx("div",{style:{padding:"12px 20px",borderTop:"1px solid #1f2937",display:"flex",gap:8},children:o.jsxs("button",{onClick:()=>{i("/notifications"),t()},"aria-label":"View all notifications",style:{background:"transparent",color:"#3b82f6",border:"none",fontSize:13,fontWeight:600,cursor:"pointer",padding:"6px 12px",borderRadius:6,flex:1,transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="#1e293b"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:["View All (",p.length,")"]})}),c&&c.project_id&&o.jsx(ze,{open:r,onClose:()=>{s(!1),d(null),m()},projectId:c.project_id,notificationMessage:c.message})]}):null}function Xe(){const[e,t]=l.useState(!1),[n,i]=l.useState(!1),a=l.useRef(null),{unreadCount:r}=function(e=!1){const[t,n]=l.useState(0),i=l.useCallback(async()=>{try{const e=await Ce.getUnreadCount();n(e)}catch(e){}},[]);return l.useEffect(()=>{const t=ve.on("notifications:unread-count",({count:e})=>{n(e)});return e&&i(),()=>{t()}},[e,i]),{unreadCount:t,refresh:i}}(),{isMobile:s}=se(),c=u();l.useEffect(()=>{const e=ve.on("notifications:new",()=>{i(!0),setTimeout(()=>i(!1),1e3)});return()=>e()},[]);return o.jsxs("div",{style:{position:"relative"},children:[o.jsxs("button",{ref:a,onClick:()=>{s?c("/notifications"):t(!e)},"aria-label":"Notifications"+(r>0?` (${r} unread)`:""),"aria-expanded":e,"aria-haspopup":"true",className:"rb-nav-link",title:"Notifications",children:[o.jsxs("span",{style:{position:"relative",display:"flex",alignItems:"center"},children:[o.jsx(_,{size:20,style:{animation:n?"ring 1s ease-in-out":"none",transformOrigin:"top center"}}),r>0&&o.jsx("span",{style:{position:"absolute",top:-6,right:-8,background:"#ef4444",color:"#fff",fontSize:10,fontWeight:700,padding:"2px 5px",borderRadius:10,minWidth:16,textAlign:"center",boxShadow:"0 0 8px rgba(239, 68, 68, 0.5)"},"aria-label":`${r} unread notifications`,children:r})]}),o.jsx("span",{children:"Alerts"})]}),o.jsx(Pe,{isOpen:e,onClose:()=>t(!1),anchorEl:a.current}),o.jsx("style",{children:"\n        @keyframes ring {\n          0%, 100% { transform: rotate(0deg); }\n          10%, 30%, 50%, 70% { transform: rotate(15deg); }\n          20%, 40%, 60%, 80% { transform: rotate(-15deg); }\n          90% { transform: rotate(5deg); }\n        }\n      "})]})}function Le({notification:e,onDismiss:t,autoDismissMs:n=5e3}){const i=u(),[a,r]=l.useState(!1),s=ke(e.type),c=Se(e.type);l.useEffect(()=>{const e=setTimeout(()=>{d()},n);return()=>clearTimeout(e)},[n]);const d=()=>{r(!0),setTimeout(()=>{t()},300)};return o.jsxs("div",{role:"alert","aria-live":"polite","aria-atomic":"true",style:{width:380,background:"#1e293b",border:`1px solid ${c}40`,borderLeft:`4px solid ${c}`,borderRadius:8,boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)",overflow:"hidden",marginBottom:12,animation:a?"slideOut 0.3s ease-out forwards":"slideIn 0.3s ease-out"},children:[o.jsx("div",{style:{height:3,background:`linear-gradient(90deg, ${c} 0%, transparent 100%)`,animation:`progress ${n}ms linear forwards`}}),o.jsxs("div",{style:{padding:"16px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12,marginBottom:12},children:[o.jsx("div",{style:{fontSize:24,width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center",background:`${c}20`,borderRadius:8,flexShrink:0},"aria-hidden":"true",children:s}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#e5e7eb",marginBottom:4,lineHeight:1.3},children:e.title}),o.jsx("div",{style:{fontSize:13,color:"#94a3b8",lineHeight:1.4},children:e.message})]}),o.jsx("button",{onClick:d,"aria-label":"Dismiss notification",style:{background:"transparent",border:"none",color:"#64748b",cursor:"pointer",padding:4,fontSize:20,lineHeight:1,transition:"color 0.2s"},onMouseEnter:e=>{e.currentTarget.style.color="#e5e7eb"},onMouseLeave:e=>{e.currentTarget.style.color="#64748b"},children:"Ã—"})]}),o.jsxs("div",{style:{display:"flex",gap:8},children:[(e.action_url||e.project_id)&&o.jsx("button",{onClick:()=>{e.action_url?i(e.action_url):e.project_id&&i(`/collaborations/${e.project_id}`),d()},style:{background:c,color:"#fff",border:"none",borderRadius:6,padding:"6px 16px",fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.opacity="1",e.currentTarget.style.transform="translateY(0)"},children:"View"}),o.jsx("button",{onClick:d,style:{background:"transparent",color:"#94a3b8",border:"1px solid #334155",borderRadius:6,padding:"6px 16px",fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="#334155",e.currentTarget.style.color="#e5e7eb"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#94a3b8"},children:"Dismiss"})]})]}),o.jsx("style",{children:"\n        @keyframes slideIn {\n          from {\n            transform: translateX(400px);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n\n        @keyframes slideOut {\n          from {\n            transform: translateX(0);\n            opacity: 1;\n          }\n          to {\n            transform: translateX(400px);\n            opacity: 0;\n          }\n        }\n\n        @keyframes progress {\n          from {\n            transform: scaleX(1);\n          }\n          to {\n            transform: scaleX(0);\n          }\n        }\n      "})]})}function We(){const[e,t]=l.useState([]);l.useEffect(()=>{const e=ve.on("notifications:new",({notifications:e})=>{t(t=>[...t,...e])});return()=>e()},[]);return 0===e.length?null:o.jsx("div",{"aria-live":"polite","aria-atomic":"false",style:{position:"fixed",top:80,right:20,zIndex:9999,display:"flex",flexDirection:"column",alignItems:"flex-end",pointerEvents:"none"},children:o.jsx("div",{style:{pointerEvents:"auto"},children:e.map(e=>o.jsx(Le,{notification:e,onDismiss:()=>{return n=e.id,void t(e=>e.filter(e=>e.id!==n));var n}},e.id))})})}function Me({isOpen:e,onClose:t}){const[n,i]=l.useState(""),[a,r]=l.useState(""),[s,c]=l.useState(!1),[d,p]=l.useState(!1),[u,h]=l.useState("");if(!e)return null;return o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},onClick:t,children:o.jsx("div",{style:{background:"#1a1f2e",border:"1px solid #2a3444",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"100%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},onClick:e=>e.stopPropagation(),children:d?o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"âœ“"}),o.jsx("h2",{style:{fontSize:"24px",fontWeight:700,color:"#10b981",margin:"0 0 8px 0"},children:"Thank You!"}),o.jsx("p",{style:{fontSize:"14px",color:"#94a3b8",margin:0},children:"Your feedback helps us improve renaissBlock"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[o.jsx("h2",{style:{fontSize:"24px",fontWeight:700,color:"#e5e7eb",margin:0},children:"Beta Feedback"}),o.jsx("button",{onClick:t,style:{background:"transparent",border:"none",color:"#94a3b8",fontSize:"24px",cursor:"pointer",padding:"0",lineHeight:1},children:"Ã—"})]}),o.jsx("p",{style:{fontSize:"14px",color:"#94a3b8",margin:0},children:"Help us improve by sharing your thoughts, bugs, or feature requests"})]}),o.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c(!0),h("");try{(await fetch(`${m}/api/feedback/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({feedback:n,email:a||"anonymous"})})).ok?(p(!0),i(""),r(""),setTimeout(()=>{t(),p(!1)},2e3)):h("Failed to submit feedback. Please try again.")}catch(o){h("Network error. Please try again later.")}finally{c(!1)}},style:{display:"grid",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"13px",color:"#cbd5e1",marginBottom:"8px",fontWeight:600},children:"Your Feedback *"}),o.jsx("textarea",{value:n,onChange:e=>i(e.target.value),placeholder:"Tell us what you think! Include bugs, feature requests, or general feedback...",required:!0,rows:6,style:{width:"100%",padding:"12px",background:"#0f1419",border:"1px solid #2a3444",borderRadius:"8px",color:"#e5e7eb",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"13px",color:"#cbd5e1",marginBottom:"8px",fontWeight:600},children:"Email (optional)"}),o.jsx("input",{type:"email",value:a,onChange:e=>r(e.target.value),placeholder:"your@email.com (if you'd like a response)",style:{width:"100%",padding:"12px",background:"#0f1419",border:"1px solid #2a3444",borderRadius:"8px",color:"#e5e7eb",fontSize:"14px"}})]}),u&&o.jsx("div",{style:{padding:"12px",background:"#fee2e2",color:"#dc2626",borderRadius:"8px",fontSize:"14px"},children:u}),o.jsx("button",{type:"submit",disabled:s||!n.trim(),style:{background:s?"#94a3b8":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#000",border:"none",padding:"14px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:700,cursor:s?"not-allowed":"pointer",width:"100%"},children:s?"Submitting...":"Submit Feedback"})]})]})})})}function Ie({variant:e="header",showTestMode:t=!0}){return"header"===e?o.jsx("span",{style:{display:"inline-flex",alignItems:"center",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",padding:"2px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:700,color:"#000",letterSpacing:"0.3px"},children:"Beta"}):"inline"===e?o.jsx("span",{style:{display:"inline-block",background:"#f59e0b",color:"#000",padding:"2px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:700,letterSpacing:"0.5px",marginLeft:"8px"},children:"BETA"}):"full"===e?o.jsxs("div",{style:{background:"linear-gradient(135deg, #f59e0b15 0%, #d9770615 100%)",border:"1px solid #f59e0b40",borderRadius:"12px",padding:"16px 20px",display:"flex",alignItems:"center",gap:"16px"},children:[o.jsx("div",{style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:700,color:"#000",letterSpacing:"0.5px",whiteSpace:"nowrap"},children:"BETA"}),o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#e5e7eb",marginBottom:"4px"},children:"You're in the Beta!"}),o.jsxs("div",{style:{fontSize:"13px",color:"#94a3b8",lineHeight:1.4},children:["Help us improve by"," ",o.jsx("a",{href:"mailto:feedback@renaissblock.com",style:{color:"#f59e0b",textDecoration:"none",fontWeight:600},children:"sharing feedback"}),". All transactions are in test mode."]})]})]}):null}function qe(){const[e,t]=l.useState(!1);return o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>t(!0),style:{position:"fixed",bottom:20,right:20,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#000",border:"none",padding:"12px 20px",borderRadius:"30px",fontSize:"14px",fontWeight:700,cursor:"pointer",zIndex:1e3,boxShadow:"0 4px 12px rgba(245, 158, 11, 0.4)",display:"flex",alignItems:"center",gap:"8px",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 6px 16px rgba(245, 158, 11, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245, 158, 11, 0.4)"},title:"Send feedback about the beta",children:[o.jsx(J,{size:18}),"Feedback"]}),o.jsx(Me,{isOpen:e,onClose:()=>t(!1)})]})}function Oe({onClose:e}){return o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},onClick:e,children:o.jsxs("div",{style:{background:"#1a1f2e",border:"1px solid #2a3444",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"100%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},onClick:e=>e.stopPropagation(),children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[o.jsx("div",{style:{display:"inline-block",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",padding:"12px 24px",borderRadius:"12px",fontSize:"18px",fontWeight:700,color:"#000",letterSpacing:"1px",marginBottom:"16px"},children:"BETA TESTER"}),o.jsx("h2",{style:{fontSize:"24px",fontWeight:700,color:"#e5e7eb",margin:"0 0 8px 0"},children:"Welcome to renaissBlock Beta!"}),o.jsx("p",{style:{fontSize:"14px",color:"#94a3b8",margin:0},children:"You're one of the first creators to experience the future"})]}),o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#f59e0b",marginBottom:"8px"},children:"ðŸ§ª Test Mode Active"}),o.jsxs("ul",{style:{fontSize:"13px",color:"#cbd5e1",margin:"0",paddingLeft:"20px",lineHeight:1.6},children:[o.jsx("li",{children:"No real money charged (use test card: 4242 4242 4242 4242)"}),o.jsx("li",{children:"Blockchain features use Solana devnet (fake SOL)"}),o.jsx("li",{children:"Some features still being polished"})]})]}),o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#f59e0b",marginBottom:"8px"},children:"ðŸ’¡ What to Try"}),o.jsxs("ul",{style:{fontSize:"13px",color:"#cbd5e1",margin:"0",paddingLeft:"20px",lineHeight:1.6},children:[o.jsx("li",{children:"Create and publish your first content"}),o.jsx("li",{children:"Collaborate with other beta testers"}),o.jsx("li",{children:"Test the purchase and reading experience"})]})]}),o.jsxs("div",{style:{background:"#f59e0b20",border:"1px solid #f59e0b40",borderRadius:"8px",padding:"12px",marginTop:"16px"},children:[o.jsx("div",{style:{fontSize:"13px",color:"#fbbf24",fontWeight:600,marginBottom:"4px"},children:"ðŸŽ Beta Perks"}),o.jsx("p",{style:{fontSize:"12px",color:"#cbd5e1",margin:0,lineHeight:1.5},children:"As a beta tester, you'll get early access to new features and special recognition when we launch!"})]})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("button",{onClick:e,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#000",border:"none",padding:"12px 32px",borderRadius:"8px",fontSize:"14px",fontWeight:700,cursor:"pointer",width:"100%",marginBottom:"12px"},children:"Let's Go! ðŸš€"}),o.jsxs("div",{style:{fontSize:"12px",color:"#64748b"},children:["Questions?"," ",o.jsx("a",{href:"mailto:feedback@renaissblock.com",style:{color:"#f59e0b",textDecoration:"none",fontWeight:600},children:"feedback@renaissblock.com"})]})]})]})})}function Ae(){const{isAuthenticated:e,user:t}=ee(),[n,i]=l.useState(!1);l.useEffect(()=>{if(!e||!t)return;const n=localStorage.getItem("beta_welcome_seen"),a=localStorage.getItem("beta_welcome_user_id");n&&a===String(t.id)||setTimeout(()=>{i(!0)},1e3)},[e,t]);return o.jsx(o.Fragment,{children:n&&o.jsx(Oe,{onClose:()=>{t&&(localStorage.setItem("beta_welcome_seen","true"),localStorage.setItem("beta_welcome_user_id",String(t.id))),i(!1)}})})}function Fe(){const e=(new Date).getFullYear();return o.jsx("footer",{style:{marginTop:"auto",padding:"24px 20px",borderTop:"1px solid var(--border, #334155)",background:"var(--bg-secondary, #1e293b)"},children:o.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"flex-start",gap:32},children:[o.jsxs("div",{style:{minWidth:200},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[o.jsx("img",{src:"/rb-logo.png",alt:"renaissBlock",style:{height:28,width:"auto",borderRadius:4}}),o.jsx("span",{style:{fontSize:16,fontWeight:700,color:"var(--text, #e5e7eb)"},children:"renaissBlock"})]}),o.jsx("div",{style:{fontSize:13,color:"var(--text-muted, #94a3b8)"},children:"A platform for serious creators."})]}),o.jsxs("div",{style:{minWidth:150},children:[o.jsx("div",{style:{fontSize:13,fontWeight:600,color:"var(--text, #e5e7eb)",marginBottom:12,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Legal"}),o.jsxs("nav",{style:{display:"flex",flexDirection:"column",gap:8},children:[o.jsx(c,{to:"/legal/terms",style:Ne,children:"Terms of Service"}),o.jsx(c,{to:"/legal/privacy",style:Ne,children:"Privacy Policy"}),o.jsx(c,{to:"/legal/content-policy",style:Ne,children:"Content Policy"}),o.jsx(c,{to:"/legal/dmca",style:Ne,children:"DMCA / Copyright"}),o.jsx(c,{to:"/legal/creator-agreement",style:Ne,children:"Creator Agreement"})]})]}),o.jsxs("div",{style:{minWidth:150},children:[o.jsx("div",{style:{fontSize:13,fontWeight:600,color:"var(--text, #e5e7eb)",marginBottom:12,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Support"}),o.jsxs("nav",{style:{display:"flex",flexDirection:"column",gap:8},children:[o.jsx("a",{href:"mailto:support@renaissblock.com",style:Ne,children:"Contact Us"}),o.jsx("a",{href:"mailto:dmca@renaissblock.com",style:Ne,children:"Report Copyright"}),o.jsx("a",{href:"mailto:reports@renaissblock.com",style:Ne,children:"Report Content"})]})]}),o.jsx("div",{style:{width:"100%",paddingTop:16,borderTop:"1px solid var(--border, #334155)",marginTop:8},children:o.jsxs("div",{style:{fontSize:12,color:"var(--text-muted, #94a3b8)",textAlign:"center"},children:["Â© ",e," renaissBlock. All rights reserved."]})})]})})}const Ne={fontSize:13,color:"var(--text-muted, #94a3b8)",textDecoration:"none",transition:"color 0.2s"},De="rb_cookie_consent";function Be(){const[e,t]=l.useState(!1),[n,i]=l.useState(!1),[a,r]=l.useState({necessary:!0,analytics:!1,marketing:!1});l.useEffect(()=>{if(!localStorage.getItem(De)){const e=setTimeout(()=>t(!0),1e3);return()=>clearTimeout(e)}},[]);const s=e=>{localStorage.setItem(De,JSON.stringify({...e,timestamp:(new Date).toISOString()})),t(!1)},d=()=>{s({necessary:!0,analytics:!1,marketing:!1})};return e?o.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,zIndex:9999,background:"var(--bg, #0f172a)",borderTop:"1px solid var(--border, #334155)",padding:"16px 20px",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)"},children:o.jsx("div",{style:{maxWidth:1200,margin:"0 auto"},children:n?o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[o.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:600,color:"var(--text, #e5e7eb)"},children:"Cookie Preferences"}),o.jsx("button",{onClick:()=>i(!1),style:{background:"none",border:"none",padding:4,cursor:"pointer",color:"var(--text-muted, #94a3b8)"},children:o.jsx(Q,{size:18})})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12,marginBottom:16},children:[o.jsxs("label",{style:{display:"flex",gap:12,alignItems:"flex-start",padding:12,background:"var(--bg-secondary, #1e293b)",borderRadius:6},children:[o.jsx("input",{type:"checkbox",checked:!0,disabled:!0,style:{marginTop:3}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:500,color:"var(--text, #e5e7eb)",marginBottom:2},children:"Necessary Cookies"}),o.jsx("div",{style:{fontSize:13,color:"var(--text-muted, #94a3b8)"},children:"Required for the website to function. Cannot be disabled."})]})]}),o.jsxs("label",{style:{display:"flex",gap:12,alignItems:"flex-start",padding:12,background:"var(--bg-secondary, #1e293b)",borderRadius:6,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:a.analytics,onChange:e=>r(t=>({...t,analytics:e.target.checked})),style:{marginTop:3}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:500,color:"var(--text, #e5e7eb)",marginBottom:2},children:"Analytics Cookies"}),o.jsx("div",{style:{fontSize:13,color:"var(--text-muted, #94a3b8)"},children:"Help us understand how you use the site to improve it."})]})]}),o.jsxs("label",{style:{display:"flex",gap:12,alignItems:"flex-start",padding:12,background:"var(--bg-secondary, #1e293b)",borderRadius:6,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:a.marketing,onChange:e=>r(t=>({...t,marketing:e.target.checked})),style:{marginTop:3}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:500,color:"var(--text, #e5e7eb)",marginBottom:2},children:"Marketing Cookies"}),o.jsx("div",{style:{fontSize:13,color:"var(--text-muted, #94a3b8)"},children:"Used to show you relevant content and ads."})]})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[o.jsx("button",{onClick:d,style:{padding:"8px 16px",borderRadius:6,border:"1px solid var(--border, #334155)",background:"transparent",color:"var(--text, #e5e7eb)",fontSize:13,cursor:"pointer"},children:"Reject All"}),o.jsx("button",{onClick:()=>{s(a)},style:{padding:"8px 16px",borderRadius:6,border:"none",background:"var(--accent, #f59e0b)",color:"#000",fontSize:13,fontWeight:600,cursor:"pointer"},children:"Save Preferences"})]})]}):o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:16,justifyContent:"space-between"},children:[o.jsx("div",{style:{flex:"1 1 400px"},children:o.jsxs("p",{style:{margin:0,fontSize:14,color:"var(--text, #e5e7eb)"},children:["We use cookies to improve your experience."," ",o.jsx(c,{to:"/legal/privacy",style:{color:"var(--accent, #f59e0b)"},children:"Learn more in our Privacy Policy"})]})}),o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>i(!0),style:{padding:"8px 16px",borderRadius:6,border:"1px solid var(--border, #334155)",background:"transparent",color:"var(--text, #e5e7eb)",fontSize:13,cursor:"pointer"},children:"Customize"}),o.jsx("button",{onClick:d,style:{padding:"8px 16px",borderRadius:6,border:"1px solid var(--border, #334155)",background:"transparent",color:"var(--text, #e5e7eb)",fontSize:13,cursor:"pointer"},children:"Reject Non-Essential"}),o.jsx("button",{onClick:()=>{s({necessary:!0,analytics:!0,marketing:!0})},style:{padding:"8px 16px",borderRadius:6,border:"none",background:"var(--accent, #f59e0b)",color:"#000",fontSize:13,fontWeight:600,cursor:"pointer"},children:"Accept All"})]})]})})}):null}const He=l.createContext(void 0);function Je({children:e}){const[t,n]=l.useState(null),[i,a]=l.useState(!0),[r,s]=l.useState(null),c=async()=>{try{const e=await fetch(`${m}/api/auth/csrf/`,{credentials:"include"}),t=await e.json();return(null==t?void 0:t.csrfToken)||""}catch{return""}},d=l.useCallback(async()=>{try{const e=await fetch(`${m}/api/cart/`,{credentials:"include"});if(e.ok){const t=await e.json();n(t),s(null)}else 403===e.status&&n(null)}catch(e){}finally{a(!1)}},[]);l.useEffect(()=>{d()},[d]);return o.jsx(He.Provider,{value:{cart:t,loading:i,error:r,addToCart:async(e,t)=>{s(null);try{const n=await c(),i=await fetch(`${m}/api/cart/add/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":n},credentials:"include",body:JSON.stringify({chapter_id:e,content_id:t})}),a=await i.json();return i.ok?(await d(),!0):(s(a.error||"Failed to add to cart"),!1)}catch(n){return s("Failed to add to cart"),!1}},removeFromCart:async e=>{s(null);try{const t=await c();return!!(await fetch(`${m}/api/cart/remove/${e}/`,{method:"DELETE",headers:{"X-CSRFToken":t},credentials:"include"})).ok&&(await d(),!0)}catch(t){return!1}},clearCart:async()=>{s(null);try{const e=await c();await fetch(`${m}/api/cart/clear/`,{method:"POST",headers:{"X-CSRFToken":e},credentials:"include"}),await d()}catch(e){}},checkout:async()=>{s(null);try{const e=await c(),t=await fetch(`${m}/api/cart/checkout/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},credentials:"include"}),n=await t.json();return t.ok?n.checkout_url:(s(n.error||"Checkout failed"),null)}catch(e){return s("Checkout failed"),null}},refreshCart:d,isInCart:(e,n)=>!!t&&t.items.some(t=>t.item_id===e&&t.type===n)},children:e})}function Ve(){const e=l.useContext(He);if(!e)throw new Error("useCart must be used within CartProvider");return e}function Ge({className:e=""}){const{cart:t,loading:n}=Ve(),i=(null==t?void 0:t.item_count)||0;return o.jsxs(c,{to:"/cart",className:`rb-nav-link rb-cart-icon ${e}`,title:i>0?`Cart (${i} items)`:"Cart",style:{position:"relative",display:"flex",alignItems:"center",color:"var(--text, #e2e8f0)",textDecoration:"none"},children:[o.jsxs("span",{style:{position:"relative",display:"flex",alignItems:"center"},children:[o.jsx(Y,{size:20}),!n&&i>0&&o.jsx("span",{style:{position:"absolute",top:"-6px",right:"-8px",backgroundColor:"var(--accent, #3b82f6)",color:"white",fontSize:"10px",fontWeight:600,minWidth:"16px",height:"16px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 3px"},children:i>99?"99+":i})]}),o.jsx("span",{children:"Cart"})]})}const Ue="rb_recent_searches";function Ye({onSearch:e}){const[t,n]=l.useState(""),[i,a]=l.useState([]),[r,s]=l.useState([]),[c,d]=l.useState(!1),[p,h]=l.useState(-1),[g,f]=l.useState(!1),x=l.useRef(null),y=l.useRef(null),b=u();l.useEffect(()=>{try{const e=localStorage.getItem(Ue);e&&s(JSON.parse(e))}catch{}},[]);l.useEffect(()=>{if(t.length<2)return void a([]);const e=setTimeout(()=>{f(!0),fetch(`${m}/api/search/?q=${encodeURIComponent(t)}`,{credentials:"include"}).then(e=>e.json()).then(e=>{Array.isArray(e)&&a(e.slice(0,6))}).catch(()=>a([])).finally(()=>f(!1))},200);return()=>clearTimeout(e)},[t]),l.useEffect(()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const j=t=>{t.trim()&&((e=>{if(!e.trim())return;const t=[e,...r.filter(t=>t!==e)].slice(0,5);s(t);try{localStorage.setItem(Ue,JSON.stringify(t))}catch{}})(t.trim()),d(!1),n(t),e?e(t):b(`/search?q=${encodeURIComponent(t.trim())}`))};l.useEffect(()=>{h(-1)},[i,r]);const v=c&&(t.length>=2?i.length>0:r.length>0);return o.jsxs("div",{ref:y,className:"search-autocomplete",style:{position:"relative",width:"100%"},children:[o.jsxs("form",{onSubmit:e=>{e.preventDefault(),j(t)},className:"rb-search",children:[o.jsx("input",{ref:x,type:"text",value:t,onChange:e=>n(e.target.value),onFocus:()=>d(!0),onKeyDown:e=>{var n,a;const o=(t.length>=2?i:r).length;switch(e.key){case"ArrowDown":e.preventDefault(),h(e=>e<o-1?e+1:e);break;case"ArrowUp":e.preventDefault(),h(e=>e>0?e-1:-1);break;case"Enter":if(e.preventDefault(),p>=0&&p<o){const e=t.length>=2?null==(n=i[p])?void 0:n.title:r[p];e&&j(e)}else j(t);break;case"Escape":d(!1),null==(a=x.current)||a.blur()}},placeholder:"Search",autoComplete:"off"}),o.jsx("button",{type:"submit",children:o.jsx(U,{size:18})})]}),v&&o.jsx("div",{className:"search-dropdown",style:{position:"absolute",top:"100%",left:0,right:0,marginTop:4,background:"#1e293b",borderRadius:8,boxShadow:"0 4px 20px rgba(0,0,0,0.4)",zIndex:1e3,overflow:"hidden",border:"1px solid #334155"},children:t.length>=2?o.jsx(o.Fragment,{children:i.map((e,t)=>o.jsxs("div",{onClick:()=>j(e.title),style:{display:"flex",alignItems:"center",gap:12,padding:"10px 16px",cursor:"pointer",background:p===t?"#334155":"transparent"},onMouseEnter:()=>h(t),children:[o.jsx(U,{size:16,style:{color:"#64748b",flexShrink:0}}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{color:"#f1f5f9",fontSize:14,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.title}),e.creator_username&&o.jsxs("div",{style:{color:"#64748b",fontSize:12},children:["by ",e.creator_username]})]}),e.content_type&&o.jsx("span",{style:{fontSize:10,padding:"2px 6px",background:"#334155",borderRadius:4,color:"#94a3b8",textTransform:"capitalize"},children:e.content_type})]},e.id))}):o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{padding:"8px 16px",fontSize:12,color:"#64748b",borderBottom:"1px solid #334155"},children:"Recent searches"}),r.map((e,t)=>o.jsxs("div",{onClick:()=>j(e),style:{display:"flex",alignItems:"center",gap:12,padding:"10px 16px",cursor:"pointer",background:p===t?"#334155":"transparent"},onMouseEnter:()=>h(t),children:[o.jsx(M,{size:16,style:{color:"#64748b",flexShrink:0}}),o.jsx("span",{style:{flex:1,color:"#f1f5f9",fontSize:14},children:e}),o.jsx("button",{onClick:t=>((e,t)=>{t.stopPropagation();const n=r.filter(t=>t!==e);s(n);try{localStorage.setItem(Ue,JSON.stringify(n))}catch{}})(e,t),style:{background:"none",border:"none",padding:4,cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center"},children:o.jsx(Q,{size:14})})]},e))]})})]})}const Ze=l.lazy(()=>r(()=>import("./HomePage-DV6U6yEG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Ke=l.lazy(()=>r(()=>import("./SearchPage-CtoLONpI.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]))),Qe=l.lazy(()=>r(()=>import("./StudioPage-OeNVU3y8.js"),__vite__mapDeps([9,1,2,3,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,7,26,27,28,29,30,6,31,32,33,34,35,36]))),et=l.lazy(()=>r(()=>import("./DashboardPage-D_g7882m.js"),__vite__mapDeps([37,1,2,3]))),tt=l.lazy(()=>r(()=>import("./ProfilePageRedesigned-BaZve7lL.js"),__vite__mapDeps([38,1,2,3,24,14,25,7,26,13,27,18,28,29,21,39,33,40,30,32,16,17,6,41,42,19,23,43,12]))),nt=l.lazy(()=>r(()=>import("./AuthPage-CWfUVQDU.js"),__vite__mapDeps([44,1,2,3]))),it=l.lazy(()=>r(()=>import("./WalletInfoPage-DsnL0qpj.js"),__vite__mapDeps([45,1,2,3]))),at=l.lazy(()=>r(()=>import("./BetaLanding-1QAeS5Iw.js"),__vite__mapDeps([46,1,2,3,47,41,26,48,49]))),ot=l.lazy(()=>r(()=>import("./CollaboratorsPage-BMf1q0gc.js"),__vite__mapDeps([50,1,2,3,51,18,19,43,20,42,10,23,6,26,5]))),rt=l.lazy(()=>r(()=>import("./PublicProfilePage-CSw9u01K.js"),__vite__mapDeps([52,1,2,3,51,18,19,43,20,42,10,23,6,26,53,5,27,25,47,12,40,54,32,31,55]))),st=l.lazy(()=>r(()=>import("./ContentDetail-JxjGDXwh.js"),__vite__mapDeps([56,1,2,3,24,14,25,7,26,13,27,18,28,29,21,53,5,47,34]))),lt=l.lazy(()=>r(()=>import("./PurchaseSuccessPage-Jd-zYs57.js"),__vite__mapDeps([57,1,2,3]))),ct=l.lazy(()=>r(()=>import("./ReaderPage-m5Sd9KOq.js"),__vite__mapDeps([58,1,2,3,14,34,16,20,19,29,15])).then(e=>({default:e.ReaderPage}))),dt=l.lazy(()=>r(()=>import("./CollaborationDashboard-CMAP-kf3.js"),__vite__mapDeps([59,1,2,3]))),pt=l.lazy(()=>r(()=>import("./CollaborativeProjectPage-CWbcN8Sq.js"),__vite__mapDeps([60,1,2,3,23,11,12,13,14,15,16,17,18,19,20,21,22,61,27,47,54,6,10,28,43]))),ut=l.lazy(()=>r(()=>import("./NotificationsPage-jyt8danj.js"),__vite__mapDeps([62,1,2,3,34,13]))),ht=l.lazy(()=>r(()=>import("./FollowingFeedPage-C9DsG6y2.js"),__vite__mapDeps([63,1,2,3,25,6,48,43,55]))),gt=l.lazy(()=>r(()=>import("./CartPage-Du05oupB.js"),__vite__mapDeps([64,1,2,3,34,13,47,28,65,48]))),ft=l.lazy(()=>r(()=>import("./CartSuccessPage-BssMS43m.js"),__vite__mapDeps([66,1,2,3,12,41]))),xt=l.lazy(()=>r(()=>import("./PayoutSettingsPage-vXy_NZ2p.js"),__vite__mapDeps([67,1,2,3,39,28,17,32,5,13,33,27,34,35,61,19,65]))),yt=l.lazy(()=>r(()=>import("./TermsOfServicePage-BPQEl7Mb.js"),__vite__mapDeps([68,1,2,3,69]))),mt=l.lazy(()=>r(()=>import("./PrivacyPolicyPage-DYbSNybw.js"),__vite__mapDeps([70,1,2,3,69]))),bt=l.lazy(()=>r(()=>import("./ContentPolicyPage-C71nebxT.js"),__vite__mapDeps([71,1,2,3,69]))),jt=l.lazy(()=>r(()=>import("./DMCAPolicyPage-D51BGBkv.js"),__vite__mapDeps([72,1,2,3,69]))),vt=l.lazy(()=>r(()=>import("./CreatorAgreementPage-BsaCitG0.js"),__vite__mapDeps([73,1,2,3,69]))),wt=()=>o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"200px",color:"var(--text-muted, #94a3b8)"},children:"Loading..."});function kt(){const[e,t]=l.useState(!1),[n,i]=l.useState(""),[a,r]=l.useState(null),[s,p]=l.useState(!1),h=u(),g=d();l.useEffect(()=>{p(!1)},[g.pathname]);const x=f.useCallback(()=>{fetch(`${m}/api/auth/status/`,{credentials:"include"}).then(e=>e.json()).then(e=>{var n;const a=!!(null==e?void 0:e.authenticated);t(a),a&&(null==(n=null==e?void 0:e.user)?void 0:n.username)?(i(e.user.username),r(e.user.avatar_url||null)):(i(""),r(null)),a?Ce.isPolling()||Ce.startPolling():(Ce.isPolling()&&Ce.stopPolling(),Ce.reset())}).catch(()=>{t(!1),i(""),r(null),Ce.stopPolling(),Ce.reset()})},[]);l.useEffect(()=>{x();const e=setInterval(x,1e4);return()=>{clearInterval(e),Ce.stopPolling()}},[g.pathname,x]),l.useEffect(()=>{"/"===g.pathname&&x()},[g.pathname,x]);return o.jsxs("nav",{className:"rb-header",children:[o.jsxs("div",{className:"rb-header-left",children:[o.jsx(c,{to:"/",className:"rb-logo-link",children:o.jsx("img",{src:"/rb-logo.png",alt:"renaissBlock",className:"rb-logo-img"})}),o.jsx(Ie,{variant:"header",showTestMode:!0})]}),o.jsx("div",{className:"rb-header-center",children:o.jsx(Ye,{})}),o.jsx("button",{className:"rb-mobile-menu-toggle",onClick:()=>p(!s),"aria-label":"Toggle menu",children:s?o.jsx(Q,{size:24}):o.jsx(H,{size:24})}),o.jsxs("div",{className:"rb-header-right rb-nav "+(s?"rb-nav-mobile-open":""),children:[e&&o.jsxs(o.Fragment,{children:[o.jsx(Ge,{}),o.jsx(Xe,{}),o.jsxs(c,{to:"/collaborators",className:"rb-nav-link",title:"Find Collaborators",children:[o.jsx(K,{size:20}),o.jsx("span",{children:"Creators"})]}),o.jsxs(c,{to:"/profile",className:"rb-nav-link rb-profile-link",title:"Profile",children:[a?o.jsx("img",{src:a,alt:n,style:{width:28,height:28,borderRadius:"50%",objectFit:"cover",border:"2px solid var(--accent)"}}):o.jsx(Z,{size:20}),o.jsxs("span",{children:["@",n||"Profile"]})]}),o.jsxs("button",{onClick:async()=>{try{const e=await fetch(`${m}/api/auth/csrf/`,{credentials:"include"}).then(e=>e.json()).then(e=>(null==e?void 0:e.csrfToken)||"");await fetch(`${m}/api/auth/logout/`,{method:"POST",credentials:"include",headers:{"X-CSRFToken":e,"X-Requested-With":"XMLHttpRequest"}})}catch{}Ce.stopPolling(),Ce.reset(),t(!1),h("/"),setTimeout(()=>x(),100)},className:"rb-nav-link rb-logout-btn",title:"Logout",children:[o.jsx(N,{size:20}),o.jsx("span",{children:"Logout"})]})]}),!e&&o.jsxs("button",{onClick:()=>{h("/auth")},className:"rb-nav-link rb-signin-btn",children:[o.jsx(Z,{size:20}),o.jsx("span",{children:"Sign in"})]})]})]})}function St(){const e=d(),{isAuthenticated:t,loading:n}=ee(),{isMobile:i}=se(),[a,r]=l.useState(!0),s=!i&&t&&[/^\/$/,/^\/search/].some(t=>t.test(e.pathname)),c=i&&t&&"/"===e.pathname,u=/^\/reader/.test(e.pathname),f=!s,x=["/auth","/terms","/wallet-info","/beta","/profile/","/legal"].some(t=>e.pathname.startsWith(t));if(n)return o.jsx("div",{className:"rb-app",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"var(--bg)",color:"var(--text)"},children:o.jsx("div",{style:{textAlign:"center"},children:o.jsx("div",{style:{fontSize:"18px",marginBottom:"8px"},children:"Loading..."})})});if(!t&&!x)return o.jsxs("div",{className:"rb-app",children:[o.jsx(at,{}),o.jsx(We,{})]});return"/beta"===e.pathname?o.jsxs("div",{className:"rb-app",children:[o.jsx(at,{}),o.jsx(We,{})]}):u?o.jsx("div",{className:"rb-app",children:o.jsx(ce,{children:o.jsx(l.Suspense,{fallback:o.jsx(wt,{}),children:o.jsx(h,{children:o.jsx(g,{path:"/reader/:contentId",element:o.jsx(ct,{})})})})})}):o.jsx(Je,{children:o.jsxs("div",{className:"rb-app",children:[o.jsx(kt,{}),s&&o.jsx(te,{isExpanded:a,onExpandedChange:r}),o.jsxs("main",{className:"rb-main",style:{display:"grid",gridTemplateColumns:"1fr",gap:16,...s?{marginLeft:a?320:48,marginRight:0,width:a?"calc(100% - 320px)":"calc(100% - 48px)"}:{},transition:"margin-left 0.3s ease, width 0.3s ease"},children:[!1,o.jsxs("div",{style:{width:"100%",minWidth:0},children:[c&&o.jsx(oe,{}),o.jsx(ce,{children:o.jsx(l.Suspense,{fallback:o.jsx(wt,{}),children:o.jsxs(h,{children:[o.jsx(g,{path:"/",element:o.jsx(Ze,{})}),o.jsx(g,{path:"/beta",element:o.jsx(at,{})}),o.jsx(g,{path:"/login",element:o.jsx(p,{to:"/auth",replace:!0})}),o.jsx(g,{path:"/signup",element:o.jsx(p,{to:"/auth",replace:!0})}),o.jsx(g,{path:"/search",element:o.jsx(Ke,{})}),o.jsx(g,{path:"/studio",element:o.jsx(Qe,{})}),o.jsx(g,{path:"/dashboard",element:o.jsx(et,{})}),o.jsx(g,{path:"/profile",element:o.jsx(tt,{})}),o.jsx(g,{path:"/profile/:username",element:o.jsx(rt,{})}),o.jsx(g,{path:"/collaborators",element:o.jsx(ot,{})}),o.jsx(g,{path:"/auth",element:o.jsx(nt,{})}),o.jsx(g,{path:"/wallet-info",element:o.jsx(it,{})}),o.jsx(g,{path:"/terms",element:o.jsx(yt,{})}),o.jsx(g,{path:"/legal/terms",element:o.jsx(yt,{})}),o.jsx(g,{path:"/legal/privacy",element:o.jsx(mt,{})}),o.jsx(g,{path:"/legal/content-policy",element:o.jsx(bt,{})}),o.jsx(g,{path:"/legal/dmca",element:o.jsx(jt,{})}),o.jsx(g,{path:"/legal/creator-agreement",element:o.jsx(vt,{})}),o.jsx(g,{path:"/content/:id",element:o.jsx(st,{})}),o.jsx(g,{path:"/purchase/success",element:o.jsx(lt,{})}),o.jsx(g,{path:"/cart",element:o.jsx(le,{children:o.jsx(gt,{})})}),o.jsx(g,{path:"/cart/success",element:o.jsx(le,{children:o.jsx(ft,{})})}),o.jsx(g,{path:"/collaborations",element:o.jsx(le,{children:o.jsx(dt,{})})}),o.jsx(g,{path:"/collaborations/:projectId",element:o.jsx(le,{children:o.jsx(pt,{})})}),o.jsx(g,{path:"/notifications",element:o.jsx(le,{children:o.jsx(ut,{})})}),o.jsx(g,{path:"/feed",element:o.jsx(le,{children:o.jsx(ht,{})})}),o.jsx(g,{path:"/payout-settings",element:o.jsx(le,{children:o.jsx(xt,{})})})]})})})]})]}),f&&o.jsx(Fe,{}),o.jsx(We,{}),o.jsx(Be,{}),o.jsx(qe,{}),o.jsx(Ae,{})]})})}window.Buffer||(window.Buffer=n),window.process||(window.process=i);s.createRoot(document.getElementById("root")).render(o.jsx(f.StrictMode,{children:o.jsx(x,{children:o.jsx(St,{})})}));export{m as A,$ as B,L as C,I as D,O as F,A as I,H as M,Re as N,G as P,U as S,K as U,Q as X,z as a,W as b,T as c,$e as d,M as e,ze as f,V as g,ee as h,P as i,X as j,J as k,Z as l,Ve as m,Y as n,b as o,_ as p,q,Te as r,se as u};
//# sourceMappingURL=index-D5Q4BM4R.js.map
