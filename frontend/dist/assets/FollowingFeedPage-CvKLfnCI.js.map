{"version":3,"file":"FollowingFeedPage-CvKLfnCI.js","sources":["../../src/pages/FollowingFeedPage.tsx"],"sourcesContent":["/**\n * Following Feed Page\n *\n * Shows latest content from creators the user follows.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Eye, Heart, Clock, Book, Music, Film, Palette, Users } from 'lucide-react';\nimport { getFollowingFeed, FeedItem, PaginatedResponse } from '../services/socialApi';\n\nconst contentTypeIcons: Record<string, React.ReactNode> = {\n  book: <Book size={32} color=\"#94a3b8\" />,\n  music: <Music size={32} color=\"#94a3b8\" />,\n  video: <Film size={32} color=\"#94a3b8\" />,\n  art: <Palette size={32} color=\"#94a3b8\" />,\n};\n\nfunction getGradient(title: string): string {\n  const gradients = [\n    'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n    'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n    'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\n    'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',\n    'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',\n  ];\n  const index = title.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0) % gradients.length;\n  return gradients[index];\n}\n\nfunction formatTimeAgo(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const seconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n\n  if (seconds < 60) return 'just now';\n  if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;\n  if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;\n  if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;\n  return date.toLocaleDateString();\n}\n\nexport default function FollowingFeedPage() {\n  const navigate = useNavigate();\n  const [feed, setFeed] = useState<FeedItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [hasMore, setHasMore] = useState(false);\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n\n  useEffect(() => {\n    const fetchFeed = async () => {\n      try {\n        setLoading(true);\n        const response = await getFollowingFeed(1);\n        setFeed(response.results);\n        setHasMore(response.next !== null);\n        setPage(1);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to load feed');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchFeed();\n  }, []);\n\n  const loadMore = async () => {\n    if (loadingMore || !hasMore) return;\n\n    try {\n      setLoadingMore(true);\n      const nextPage = page + 1;\n      const response = await getFollowingFeed(nextPage);\n      setFeed(prev => [...prev, ...response.results]);\n      setHasMore(response.next !== null);\n      setPage(nextPage);\n    } catch (err) {\n      console.error('Failed to load more:', err);\n    } finally {\n      setLoadingMore(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        background: '#0f172a',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: '#94a3b8',\n      }}>\n        Loading feed...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        background: '#0f172a',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: '#ef4444',\n      }}>\n        {error}\n      </div>\n    );\n  }\n\n  return (\n    <div style={{\n      minHeight: '100vh',\n      background: '#0f172a',\n      padding: '24px 16px',\n    }}>\n      <div style={{ maxWidth: 800, margin: '0 auto' }}>\n        {/* Header */}\n        <div style={{ marginBottom: 32 }}>\n          <h1 style={{\n            color: '#f8fafc',\n            fontSize: 28,\n            fontWeight: 700,\n            marginBottom: 8,\n          }}>\n            Following Feed\n          </h1>\n          <p style={{ color: '#94a3b8', fontSize: 15 }}>\n            Latest drops from creators you follow\n          </p>\n        </div>\n\n        {/* Empty State */}\n        {feed.length === 0 && (\n          <div style={{\n            textAlign: 'center',\n            padding: '60px 20px',\n            background: '#1e293b',\n            borderRadius: 16,\n          }}>\n            <Users size={48} color=\"#64748b\" style={{ marginBottom: 16 }} />\n            <h2 style={{ color: '#f8fafc', fontSize: 20, fontWeight: 600, marginBottom: 8 }}>\n              No content yet\n            </h2>\n            <p style={{ color: '#94a3b8', marginBottom: 24 }}>\n              Follow some creators to see their latest drops here\n            </p>\n            <button\n              onClick={() => navigate('/search')}\n              style={{\n                background: '#f59e0b',\n                color: '#111',\n                border: 'none',\n                padding: '12px 24px',\n                borderRadius: 8,\n                fontWeight: 600,\n                cursor: 'pointer',\n              }}\n            >\n              Discover Creators\n            </button>\n          </div>\n        )}\n\n        {/* Feed Items */}\n        <div style={{ display: 'flex', flexDirection: 'column', gap: 16 }}>\n          {feed.map(item => (\n            <Link\n              key={item.id}\n              to={`/content/${item.id}`}\n              style={{\n                display: 'flex',\n                background: '#1e293b',\n                borderRadius: 12,\n                overflow: 'hidden',\n                textDecoration: 'none',\n                transition: 'transform 0.2s ease, box-shadow 0.2s ease',\n              }}\n              onMouseEnter={e => {\n                e.currentTarget.style.transform = 'translateY(-2px)';\n                e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.2)';\n              }}\n              onMouseLeave={e => {\n                e.currentTarget.style.transform = 'translateY(0)';\n                e.currentTarget.style.boxShadow = 'none';\n              }}\n            >\n              {/* Cover Image */}\n              <div style={{\n                width: 160,\n                minHeight: 120,\n                background: item.cover_image\n                  ? `url(${item.cover_image}) center/cover`\n                  : getGradient(item.title),\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                flexShrink: 0,\n              }}>\n                {!item.cover_image && contentTypeIcons[item.content_type]}\n              </div>\n\n              {/* Content */}\n              <div style={{ flex: 1, padding: 16, minWidth: 0 }}>\n                {/* Creator */}\n                <div style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 8,\n                  marginBottom: 8,\n                }}>\n                  {item.creator.avatar ? (\n                    <img\n                      src={item.creator.avatar}\n                      alt={item.creator.display_name}\n                      style={{\n                        width: 24,\n                        height: 24,\n                        borderRadius: '50%',\n                        objectFit: 'cover',\n                      }}\n                    />\n                  ) : (\n                    <div style={{\n                      width: 24,\n                      height: 24,\n                      borderRadius: '50%',\n                      background: '#334155',\n                    }} />\n                  )}\n                  <span style={{ color: '#94a3b8', fontSize: 13 }}>\n                    {item.creator.display_name}\n                  </span>\n                  <span style={{ color: '#64748b', fontSize: 12 }}>\n                    @{item.creator.username}\n                  </span>\n                </div>\n\n                {/* Title */}\n                <h3 style={{\n                  color: '#f8fafc',\n                  fontSize: 16,\n                  fontWeight: 600,\n                  marginBottom: 8,\n                  overflow: 'hidden',\n                  textOverflow: 'ellipsis',\n                  whiteSpace: 'nowrap',\n                }}>\n                  {item.title}\n                </h3>\n\n                {/* Meta */}\n                <div style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 16,\n                  fontSize: 13,\n                  color: '#64748b',\n                }}>\n                  <span style={{\n                    background: 'rgba(59,130,246,0.15)',\n                    color: '#60a5fa',\n                    padding: '2px 8px',\n                    borderRadius: 4,\n                    fontSize: 11,\n                  }}>\n                    {item.content_type}\n                  </span>\n                  <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n                    <Eye size={14} /> {item.view_count}\n                  </span>\n                  <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n                    <Heart size={14} /> {item.like_count}\n                  </span>\n                  <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n                    <Clock size={14} /> {formatTimeAgo(item.created_at)}\n                  </span>\n                </div>\n\n                {/* Price */}\n                <div style={{\n                  marginTop: 12,\n                  color: '#10b981',\n                  fontSize: 15,\n                  fontWeight: 600,\n                }}>\n                  ${parseFloat(item.price_usd).toFixed(2)}\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n\n        {/* Load More */}\n        {hasMore && (\n          <div style={{ textAlign: 'center', marginTop: 32 }}>\n            <button\n              onClick={loadMore}\n              disabled={loadingMore}\n              style={{\n                background: '#334155',\n                color: '#f8fafc',\n                border: 'none',\n                padding: '12px 32px',\n                borderRadius: 8,\n                fontWeight: 600,\n                cursor: loadingMore ? 'not-allowed' : 'pointer',\n                opacity: loadingMore ? 0.7 : 1,\n              }}\n            >\n              {loadingMore ? 'Loading...' : 'Load More'}\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["contentTypeIcons","book","jsx","Book","size","color","music","Music","video","Film","art","Palette","getGradient","title","gradients","split","reduce","acc","char","charCodeAt","length","formatTimeAgo","dateString","date","Date","now","seconds","Math","floor","getTime","toLocaleDateString","FollowingFeedPage","navigate","useNavigate","feed","setFeed","useState","loading","setLoading","error","setError","hasMore","setHasMore","page","setPage","loadingMore","setLoadingMore","useEffect","async","response","getFollowingFeed","results","next","err","Error","message","fetchFeed","style","minHeight","background","display","alignItems","justifyContent","children","padding","maxWidth","margin","jsxs","marginBottom","fontSize","fontWeight","textAlign","borderRadius","Users","onClick","border","cursor","flexDirection","gap","map","item","Link","to","id","overflow","textDecoration","transition","onMouseEnter","e","currentTarget","transform","boxShadow","onMouseLeave","width","cover_image","flexShrink","content_type","flex","minWidth","creator","avatar","src","alt","display_name","height","objectFit","username","textOverflow","whiteSpace","Eye","view_count","Heart","like_count","Clock","created_at","marginTop","parseFloat","price_usd","toFixed","nextPage","prev","disabled","opacity"],"mappings":"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"}