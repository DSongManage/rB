import{j as e}from"./web3auth-BkZxjmxM.js";import{u as t,f as a,r as l}from"./router-cVcvJ1e3.js";import{V as o}from"./VideoCard-DCMZm_kR.js";import{A as n}from"./index-Clb-55uW.js";import"./vendor-Cfs_Iq82.js";import"./eye-Btrj3ogq.js";import"./thumbs-up-BVuG1z4M.js";const r=[{label:"All",value:"all"},{label:"Books",value:"book"},{label:"Art",value:"art"},{label:"Film",value:"film",comingSoon:!0},{label:"Music",value:"music",comingSoon:!0}],i=[{label:"All Genres",value:"all"},{label:"Fantasy",value:"fantasy"},{label:"Sci-Fi",value:"scifi"},{label:"Non-Fiction",value:"nonfiction"},{label:"Drama",value:"drama"},{label:"Comedy",value:"comedy"},{label:"Other",value:"other"}];function s(){t();const[s,c]=a(),u=s.get("q")||"",[d,m]=l.useState(s.get("type")||"all"),[g,h]=l.useState(s.get("genre")||"all"),[f,p]=l.useState([]),[v,b]=l.useState(!1),y=(e,t)=>{const a=new URLSearchParams(s);"all"!==e?a.set("type",e):a.delete("type"),"all"!==t?a.set("genre",t):a.delete("genre"),c(a)},j=l.useCallback(()=>{b(!0);const e=new URLSearchParams;u&&e.set("q",u),"all"!==d&&e.set("type",d),"all"!==g&&e.set("genre",g),fetch(`${n}/api/search/?${e.toString()}`,{credentials:"include"}).then(e=>e.json()).then(e=>{Array.isArray(e)?p(e):p([])}).catch(()=>p([])).finally(()=>b(!1))},[u,d,g]);l.useEffect(()=>{j()},[j]),l.useEffect(()=>{m(s.get("type")||"all"),h(s.get("genre")||"all")},[s]);const x=e=>{if(!e)return"Recently";const t=new Date(e),a=new Date,l=Math.floor((a.getTime()-t.getTime())/1e3);if(l<60)return"Just now";if(l<3600){const e=Math.floor(l/60);return`${e} minute${1!==e?"s":""} ago`}if(l<86400){const e=Math.floor(l/3600);return`${e} hour${1!==e?"s":""} ago`}if(l<604800){const e=Math.floor(l/86400);return`${e} day${1!==e?"s":""} ago`}const o=Math.floor(l/604800);return`${o} week${1!==o?"s":""} ago`};return e.jsxs("div",{className:"page",style:{background:"transparent",border:"none",boxShadow:"none"},children:[u&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("h2",{style:{margin:0,fontSize:20,color:"#f1f5f9"},children:['Results for "',u,'"']}),e.jsxs("p",{style:{margin:"4px 0 0",fontSize:14,color:"#94a3b8"},children:[f.length," result",1!==f.length?"s":""," found"]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{className:"chips",style:{marginBottom:8},children:r.map(t=>e.jsxs("button",{className:`chip ${d===t.value?"active":""} ${t.comingSoon?"disabled":""}`,onClick:()=>{return!t.comingSoon&&(e=t.value,m(e),void y(e,g));var e},disabled:t.comingSoon,style:{opacity:t.comingSoon?.5:1,cursor:t.comingSoon?"not-allowed":"pointer",position:"relative"},children:[t.label,t.comingSoon&&e.jsx("span",{style:{fontSize:9,background:"#f59e0b",color:"#000",padding:"1px 4px",borderRadius:3,marginLeft:4,fontWeight:700},children:"SOON"})]},t.value))}),e.jsx("div",{className:"chips",children:i.map(t=>e.jsx("button",{className:"chip "+(g===t.value?"active":""),onClick:()=>{return e=t.value,h(e),void y(d,e);var e},children:t.label},t.value))})]}),v?e.jsx("div",{style:{textAlign:"center",padding:40,color:"#94a3b8"},children:"Searching..."}):0===f.length?e.jsx("div",{style:{textAlign:"center",padding:40,color:"#94a3b8"},children:u?`No results found for "${u}"`:"Browse comics using the filters above"}):e.jsx("div",{className:"yt-grid",children:f.map(t=>e.jsx(o,{id:t.id,title:t.title,author:t.creator_username||`Creator #${t.creator??0}`,likeCount:t.like_count,averageRating:t.average_rating,ratingCount:t.rating_count,timeText:x(t.created_at),thumbnailUrl:t.teaser_link||"",teaser_link:t.teaser_link,price:t.price_usd,editions:t.editions,owned:t.owned},t.id))})]})}export{s as default};
