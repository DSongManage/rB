import{j as e}from"./web3auth-BGmWjNJV.js";import{r as t,L as n}from"./router-CzH47hF_.js";import{s as o}from"./sanitize-MG3ZWMPS.js";import{c as r,d as i,A as a,X as s}from"./index-DX1oHBoR.js";import{i as l,t as d,j as c,k as u,l as p,m as f,n as g}from"./socialApi-ByOvUP37.js";import{T as x}from"./thumbs-up-Ve-PnbcQ.js";import{P as h}from"./pen-YQYh-kWg.js";import{T as y}from"./trash-2-D0eswuAL.js";import{C as b,a as m}from"./chevron-up-DPnPcKza.js";import{S as j}from"./send-BHxfISzc.js";
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=r("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),k=r("reply",[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]]),w=r("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function S({contentId:n,initialLiked:o=!1,initialCount:r=0,size:i="md",showCount:a=!0,className:s="",onAuthRequired:c,isAuthenticated:u=!0}){const{liked:p,likeCount:f,isLoading:g,toggle:h}=function(e,n={}){const[o,r]=t.useState(n.initialLiked??!1),[i,a]=t.useState(n.initialCount??0),[s,c]=t.useState(!1),[u,p]=t.useState(null),f=t.useRef(!1),g=t.useRef(0),x=t.useCallback(async()=>{try{const t=await l(e);r(t.liked),a(t.like_count),p(null)}catch(t){}},[e]),h=t.useCallback(async()=>{if(f.current)return;const t=Date.now();if(t-g.current<500)return;g.current=t,f.current=!0;const n=o,s=i;r(!o),a(o?i-1:i+1),p(null),c(!0);try{const t=await d(e);r(t.liked),a(t.like_count)}catch(l){r(n),a(s);const e=l instanceof Error?l.message:"Failed to toggle like";e.includes("throttle")||p(e)}finally{c(!1),f.current=!1}},[e,o,i]);return t.useEffect(()=>{void 0!==n.initialLiked&&r(n.initialLiked),void 0!==n.initialCount&&a(n.initialCount)},[n.initialLiked,n.initialCount]),{liked:o,likeCount:i,isLoading:s,error:u,toggle:h,refresh:x}}(n,{initialLiked:o,initialCount:r}),y={sm:{icon:18,padding:"6px 10px",fontSize:12},md:{icon:22,padding:"8px 14px",fontSize:14},lg:{icon:26,padding:"10px 18px",fontSize:16}}[i];return e.jsxs("button",{onClick:async e=>{e.preventDefault(),e.stopPropagation(),u?await h():null==c||c()},disabled:g,className:s,style:{display:"inline-flex",alignItems:"center",gap:8,padding:y.padding,background:p?"rgba(59, 130, 246, 0.15)":"rgba(255, 255, 255, 0.05)",border:"1px solid "+(p?"rgba(59, 130, 246, 0.3)":"rgba(255, 255, 255, 0.1)"),borderRadius:10,cursor:g?"not-allowed":"pointer",opacity:g?.6:1,transition:"all 0.2s ease"},onMouseEnter:e=>{g||(e.currentTarget.style.background=p?"rgba(59, 130, 246, 0.25)":"rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform="scale(1.05)")},onMouseLeave:e=>{e.currentTarget.style.background=p?"rgba(59, 130, 246, 0.15)":"rgba(255, 255, 255, 0.05)",e.currentTarget.style.transform="scale(1)"},"aria-label":p?"Unlike":"Like",children:[e.jsx(x,{size:y.icon,fill:p?"#3b82f6":"transparent",color:p?"#3b82f6":"#94a3b8",style:{transition:"all 0.2s ease"}}),a&&e.jsx("span",{style:{fontSize:y.fontSize,fontWeight:600,color:p?"#3b82f6":"#cbd5e1"},children:f>0?f.toLocaleString():"Like"})]})}function C({comment:o,onReply:r,onEdit:i,onDelete:a,onLoadReplies:s,isAuthenticated:l=!1,currentUsername:d,depth:c=0,maxDepth:u=3}){const[p,f]=t.useState(!1),[g,x]=t.useState(!1),[v,w]=t.useState(""),[S,z]=t.useState(o.text),[R,L]=t.useState(!1),[T,I]=t.useState(!1),[E,W]=t.useState([]),[A,_]=t.useState(!1),D=async()=>{if(!T&&o.replies_count>0){_(!0);try{const e=await s(o.id);W(e)}finally{_(!1)}}I(!T)},M=l&&c<u,P=Math.min(20*c,60),$={display:"inline-flex",alignItems:"center",gap:4,background:"transparent",border:"none",padding:"4px 8px",borderRadius:6,fontSize:12,color:"#64748b",cursor:"pointer",transition:"all 0.15s ease"};return e.jsxs("div",{style:{marginLeft:`${P}px`},children:[e.jsx("div",{style:{padding:"12px 0"},children:e.jsxs("div",{style:{display:"flex",gap:12},children:[o.author_avatar?e.jsx("img",{src:o.author_avatar,alt:o.author_username,style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",flexShrink:0}}):e.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:14,fontWeight:600,flexShrink:0},children:o.author_username.charAt(0).toUpperCase()}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap",marginBottom:4},children:[e.jsxs(n,{to:`/profile/${o.author_username}`,style:{fontWeight:600,color:"#f1f5f9",textDecoration:"none",fontSize:13},children:["@",o.author_username]}),e.jsx("span",{style:{fontSize:11,color:"#64748b"},children:(e=>{const t=new Date,n=new Date(e),o=Math.floor((t.getTime()-n.getTime())/1e3);return o<60?"just now":o<3600?`${Math.floor(o/60)}m ago`:o<86400?`${Math.floor(o/3600)}h ago`:o<2592e3?`${Math.floor(o/86400)}d ago`:n.toLocaleDateString()})(o.created_at)}),o.edited&&e.jsx("span",{style:{fontSize:11,color:"#475569"},children:"(edited)"})]}),g?e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),S.trim()){L(!0);try{await i(o.id,S),x(!1)}finally{L(!1)}}},style:{marginTop:8},children:[e.jsx("textarea",{value:S,onChange:e=>z(e.target.value),rows:2,disabled:R,style:{width:"100%",padding:"10px 12px",background:"#0f172a",border:"1px solid #334155",borderRadius:8,color:"#f1f5f9",fontSize:13,resize:"none",outline:"none"}}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsx("button",{type:"submit",disabled:R||!S.trim(),style:{padding:"6px 12px",background:"#8b5cf6",border:"none",borderRadius:6,color:"#fff",fontSize:12,fontWeight:500,cursor:"pointer",opacity:R||!S.trim()?.5:1},children:R?"Saving...":"Save"}),e.jsx("button",{type:"button",onClick:()=>{x(!1),z(o.text)},style:{padding:"6px 12px",background:"#334155",border:"none",borderRadius:6,color:"#94a3b8",fontSize:12,fontWeight:500,cursor:"pointer"},children:"Cancel"})]})]}):e.jsx("p",{style:{color:"#cbd5e1",fontSize:14,lineHeight:1.6,margin:0,whiteSpace:"pre-wrap"},children:o.text}),!g&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:8},children:[M&&e.jsxs("button",{onClick:()=>f(!p),style:$,onMouseEnter:e=>e.currentTarget.style.color="#a78bfa",onMouseLeave:e=>e.currentTarget.style.color="#64748b",children:[e.jsx(k,{size:14}),"Reply"]}),o.can_edit&&e.jsxs("button",{onClick:()=>x(!0),style:$,onMouseEnter:e=>e.currentTarget.style.color="#a78bfa",onMouseLeave:e=>e.currentTarget.style.color="#64748b",children:[e.jsx(h,{size:14}),"Edit"]}),o.can_delete&&e.jsxs("button",{onClick:async()=>{confirm("Are you sure you want to delete this comment?")&&await a(o.id)},style:$,onMouseEnter:e=>e.currentTarget.style.color="#ef4444",onMouseLeave:e=>e.currentTarget.style.color="#64748b",children:[e.jsx(y,{size:14}),"Delete"]}),o.replies_count>0&&e.jsx("button",{onClick:D,style:{...$,color:"#8b5cf6"},children:T?e.jsxs(e.Fragment,{children:[e.jsx(b,{size:14}),"Hide replies"]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{size:14}),A?"Loading...":`${o.replies_count} replies`]})})]}),p&&e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),v.trim()){L(!0);try{await r(v,o.id),w(""),f(!1),await D()}finally{L(!1)}}},style:{marginTop:12},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"flex-end"},children:[e.jsx("textarea",{value:v,onChange:e=>w(e.target.value),placeholder:`Reply to @${o.author_username}...`,rows:2,disabled:R,style:{flex:1,padding:"10px 12px",background:"#0f172a",border:"1px solid #334155",borderRadius:8,color:"#f1f5f9",fontSize:13,resize:"none",outline:"none"}}),e.jsx("button",{type:"submit",disabled:R||!v.trim(),style:{padding:"10px 14px",background:v.trim()?"#8b5cf6":"#334155",border:"none",borderRadius:8,color:v.trim()?"#fff":"#64748b",cursor:R||!v.trim()?"not-allowed":"pointer"},children:e.jsx(j,{size:16})})]}),e.jsx("button",{type:"button",onClick:()=>{f(!1),w("")},style:{background:"transparent",border:"none",color:"#64748b",fontSize:12,cursor:"pointer",marginTop:6},children:"Cancel"})]})]})]})}),T&&E.length>0&&e.jsx("div",{style:{borderLeft:"2px solid #1e293b",marginLeft:18},children:E.map(t=>e.jsx(C,{comment:t,onReply:r,onEdit:i,onDelete:a,onLoadReplies:s,isAuthenticated:l,currentUsername:d,depth:c+1,maxDepth:u},t.id))})]})}function z({contentId:n,isAuthenticated:o=!1,currentUsername:r,onAuthRequired:a}){const[s,l]=t.useState(""),[d,x]=t.useState(!1),{comments:h,isLoading:y,error:b,hasMore:m,totalCount:v,loadMore:k,addComment:w,editComment:S,removeComment:z,loadReplies:R}=function(e){const[n,o]=t.useState([]),[r,i]=t.useState(!1),[a,s]=t.useState(null),[l,d]=t.useState(1),[x,h]=t.useState(!1),[y,b]=t.useState(0),m=t.useRef(!1),j=t.useRef(!1),v=t.useCallback(async(t,n=!1)=>{if(!m.current){m.current=!0,i(!0),s(null);try{const r=await c(e,t,!0);o(e=>n?[...e,...r.results]:r.results),h(null!==r.next),b(r.count),d(t)}catch(r){const e=r instanceof Error?r.message:"Failed to load comments";e.includes("throttle")||s(e)}finally{i(!1),m.current=!1}}},[e]),k=t.useCallback(async()=>{await v(1,!1)},[v]),w=t.useCallback(async()=>{r||!x||m.current||await v(l+1,!0)},[v,r,x,l]),S=t.useCallback(async(t,n)=>{const r=await u(e,t,n);return n?o(e=>e.map(e=>e.id===n?{...e,replies_count:e.replies_count+1}:e)):(o(e=>[r,...e]),b(e=>e+1)),r},[e]),C=t.useCallback(async(e,t)=>{const n=await p(e,t);o(t=>t.map(t=>t.id===e?n:t))},[]),z=t.useCallback(async e=>{await f(e),o(t=>t.filter(t=>t.id!==e)),b(e=>e-1)},[]),R=t.useCallback(async e=>await g(e),[]);return t.useEffect(()=>{j.current||(j.current=!0,v(1,!1))},[e]),t.useEffect(()=>()=>{j.current=!1},[e]),{comments:n,isLoading:r,error:a,hasMore:x,totalCount:y,loadMore:w,refresh:k,addComment:S,editComment:C,removeComment:z,loadReplies:R}}(n),L=async(e,t)=>{await w(e,t)};return e.jsxs("div",{style:{background:"#0f172a",borderRadius:16,border:"1px solid #1e293b",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #1e293b",display:"flex",alignItems:"center",gap:10},children:[e.jsx(i,{size:20,color:"#8b5cf6"}),e.jsx("h3",{style:{margin:0,fontSize:18,fontWeight:700,color:"#f1f5f9"},children:"Comments"}),v>0&&e.jsx("span",{style:{background:"#1e293b",color:"#94a3b8",padding:"4px 10px",borderRadius:12,fontSize:13,fontWeight:500},children:v})]}),e.jsxs("div",{style:{padding:"20px 24px"},children:[e.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),o){if(s.trim()){x(!0);try{await w(s),l("")}finally{x(!1)}}}else null==a||a()},style:{marginBottom:24},children:e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"flex-start"},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:o?"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)":"#334155",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:16,fontWeight:600,flexShrink:0},children:r?r.charAt(0).toUpperCase():"?"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("textarea",{value:s,onChange:e=>l(e.target.value),placeholder:o?"Share your thoughts...":"Sign in to leave a comment",rows:3,disabled:!o||d,onClick:()=>{o||null==a||a()},style:{width:"100%",padding:"12px 14px",background:"#1e293b",border:"1px solid #334155",borderRadius:12,color:"#f1f5f9",fontSize:14,resize:"none",outline:"none",transition:"border-color 0.2s",cursor:o?"text":"pointer"},onFocus:e=>{o&&(e.target.style.borderColor="#8b5cf6")},onBlur:e=>e.target.style.borderColor="#334155"}),o&&e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:e.jsxs("button",{type:"submit",disabled:d||!s.trim(),style:{display:"flex",alignItems:"center",gap:8,padding:"10px 20px",background:s.trim()?"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)":"#334155",border:"none",borderRadius:10,color:s.trim()?"#fff":"#64748b",fontSize:14,fontWeight:600,cursor:d||!s.trim()?"not-allowed":"pointer",opacity:d?.7:1,transition:"all 0.2s ease"},children:[e.jsx(j,{size:16}),d?"Posting...":"Post Comment"]})})]})]})}),b&&e.jsx("p",{style:{fontSize:13,color:"#ef4444",marginBottom:16,padding:"10px 14px",background:"rgba(239, 68, 68, 0.1)",borderRadius:8},children:b}),y&&0===h.length?e.jsx("div",{style:{textAlign:"center",padding:"32px 0",color:"#64748b",fontSize:14},children:"Loading comments..."}):0===h.length?e.jsx("div",{style:{textAlign:"center",padding:"32px 0",color:"#64748b",fontSize:14},children:"No comments yet. Be the first to comment!"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:h.map(t=>e.jsx("div",{style:{borderBottom:"1px solid #1e293b"},children:e.jsx(C,{comment:t,onReply:L,onEdit:S,onDelete:z,onLoadReplies:R,isAuthenticated:o,currentUsername:r})},t.id))}),m&&e.jsx("button",{onClick:k,disabled:y,style:{width:"100%",marginTop:16,padding:"12px",background:"transparent",border:"1px solid #334155",borderRadius:10,color:"#8b5cf6",fontSize:14,fontWeight:600,cursor:y?"not-allowed":"pointer",opacity:y?.6:1,transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(139, 92, 246, 0.1)",e.currentTarget.style.borderColor="#8b5cf6"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="#334155"},children:y?"Loading...":"Load More Comments"})]})]})]})}function R({open:r,onClose:i,teaserUrl:l,contentType:d,contentId:c,price:u,editions:p,isCollaborative:f=!1,collaborators:g=[],creatorUsername:x,creatorAvatar:h,title:y,likeCount:b=0,userHasLiked:m=!1,commentCount:j=0}){const k=d||"book",[C,R]=t.useState(""),[L,T]=t.useState(!0),[I,E]=t.useState(!1),[W,A]=t.useState(!1),[_,D]=t.useState(!1),[M,P]=t.useState();t.useEffect(()=>{r&&fetch(`${a}/api/auth/status/`,{credentials:"include"}).then(e=>e.ok?e.json():null).then(e=>{D(!!(null==e?void 0:e.username)),P(null==e?void 0:e.username)}).catch(()=>{})},[r]),t.useEffect(()=>{const e=e=>{"Escape"===e.key&&r&&i()};return r&&(window.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[r,i]),t.useEffect(()=>{let e=!0;return r&&"book"===k&&l?(T(!0),fetch(l,{credentials:"include"}).then(e=>e.ok?e.text():"").then(t=>{e&&(R(String(t||"")),T(!1))}).catch(()=>{e&&(R("<p>Preview unavailable</p>"),T(!1))})):T(!1),()=>{e=!1}},[r,k,l]);const $=t.useMemo(()=>o(C),[C]),B=void 0!==p&&p>0,F=u&&u>0?`$${u.toFixed(2)}`:"Free";return r?e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.9)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:20},onClick:e=>{e.target===e.currentTarget&&i()},children:e.jsxs("div",{style:{display:"flex",gap:0,maxWidth:1200,width:"100%",height:"90vh",maxHeight:800},children:[e.jsxs("div",{style:{flex:1,background:"#0f172a",borderRadius:"16px 0 0 16px",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:"1px solid #1e293b",background:"#0b1220"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{color:"#f1f5f9",fontWeight:600,fontSize:16},children:y||"Preview"}),void 0!==p&&e.jsx("span",{style:{background:p>0?"rgba(16, 185, 129, 0.15)":"rgba(239, 68, 68, 0.15)",color:p>0?"#10b981":"#ef4444",padding:"4px 10px",borderRadius:6,fontSize:12,fontWeight:600},children:p>0?`${p} available`:"Sold out"})]}),e.jsx("button",{onClick:i,style:{background:"transparent",border:"none",color:"#94a3b8",cursor:"pointer",padding:8,borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(s,{size:24})})]}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:16},children:["book"===k&&e.jsx("div",{style:{width:"100%",height:"100%",overflow:"auto",padding:16,background:"#0b1220",borderRadius:8,position:"relative"},children:L?e.jsx("div",{style:{color:"#94a3b8",textAlign:"center",padding:40},children:"Loading preview..."}):$?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"content-display",dangerouslySetInnerHTML:{__html:$}}),e.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",display:"flex",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"center",gap:"60px 80px",padding:40,overflow:"hidden"},children:Array.from({length:30}).map((t,n)=>e.jsx("div",{style:{color:"rgba(148, 163, 184, 0.08)",fontSize:16,fontWeight:600,transform:"rotate(-25deg)",whiteSpace:"nowrap",userSelect:"none",letterSpacing:2},children:"renaissBlock"},n))})]}):e.jsx("div",{style:{color:"#94a3b8",textAlign:"center",padding:40},children:"No preview available"})}),"art"===k&&e.jsxs("div",{style:{display:"grid",placeItems:"center",height:"100%",position:"relative"},children:[e.jsx("img",{src:l,alt:"preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",borderRadius:8}}),e.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",display:"flex",flexWrap:"wrap",alignContent:"center",justifyContent:"center",gap:"40px 60px",overflow:"hidden"},children:Array.from({length:40}).map((t,n)=>e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.2)",fontSize:14,fontWeight:700,transform:"rotate(-30deg)",whiteSpace:"nowrap",userSelect:"none",letterSpacing:3,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"renaissBlock"},n))})]}),"film"===k&&e.jsx("video",{src:l,controls:!0,style:{width:"100%",height:"100%",borderRadius:8}}),"music"===k&&e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:e.jsx("audio",{src:l,controls:!0,style:{width:"100%",maxWidth:500}})})]}),c&&B&&e.jsx("div",{style:{padding:"16px 20px",borderTop:"1px solid #1e293b",background:"#0b1220",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("button",{onClick:async()=>{if(c){E(!0);try{const e=function(){const e=document.cookie.match(/csrftoken=([^;]+)/);return e?e[1]:""}(),t=await fetch(`${a}/api/checkout/session/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},credentials:"include",body:JSON.stringify({content_id:c})}),n=await t.json();if(!t.ok)return void("NOT_MINTED"===(null==n?void 0:n.code)?alert("Content not available for purchase"):"SOLD_OUT"===(null==n?void 0:n.code)?alert("This content is sold out"):"ALREADY_OWNED"===(null==n?void 0:n.code)?alert("You already own this content"):"NO_BUYER_WALLET"===(null==n?void 0:n.code)?alert("Please set up your wallet in your profile before purchasing"):"NO_CREATOR_WALLET"===(null==n?void 0:n.code)?alert("Creator wallet not configured. Please contact support."):"STRIPE_ERROR"===(null==n?void 0:n.code)?alert("Payment system error. Please try again."):alert((null==n?void 0:n.error)||"Checkout failed"));(null==n?void 0:n.checkout_url)?window.location.href=n.checkout_url:alert("No checkout URL received")}catch{alert("Failed to initiate checkout. Please try again.")}finally{E(!1)}}},disabled:I,style:{background:I?"#475569":"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",borderRadius:10,padding:"14px 40px",cursor:I?"not-allowed":"pointer",fontSize:16,fontWeight:700,transition:"all 0.2s"},children:I?"Processing...":`Buy Now ${F}`})})]}),e.jsxs("div",{style:{width:W?380:72,background:"#0b1220",borderRadius:"0 16px 16px 0",borderLeft:"1px solid #1e293b",display:"flex",flexDirection:"column",transition:"width 0.3s ease",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0",gap:8,borderBottom:W?"1px solid #1e293b":"none"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[c&&e.jsx(S,{contentId:c,initialCount:b,initialLiked:m,isAuthenticated:_,onAuthRequired:()=>window.location.href="/auth",size:"lg",showCount:!1}),e.jsx("span",{style:{fontSize:12,color:"#94a3b8",fontWeight:500},children:b>0?b.toLocaleString():"Like"})]}),e.jsxs("button",{onClick:()=>A(!W),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,background:W?"rgba(139, 92, 246, 0.15)":"transparent",border:"none",padding:"12px 16px",borderRadius:12,cursor:"pointer",transition:"all 0.2s"},children:[e.jsx(v,{size:28,color:W?"#a78bfa":"#94a3b8",fill:W?"#a78bfa":"transparent"}),e.jsx("span",{style:{fontSize:12,color:W?"#a78bfa":"#94a3b8",fontWeight:500},children:j>0?j.toLocaleString():"Comments"})]}),e.jsxs("button",{onClick:async()=>{const e=`${window.location.origin}/content/${c}`;if(navigator.share)try{await navigator.share({title:y||"Check this out",url:e})}catch{}else await navigator.clipboard.writeText(e),alert("Link copied to clipboard!")},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,background:"transparent",border:"none",padding:"12px 16px",borderRadius:12,cursor:"pointer"},children:[e.jsx(w,{size:28,color:"#94a3b8"}),e.jsx("span",{style:{fontSize:12,color:"#94a3b8",fontWeight:500},children:"Share"})]})]}),(x||f&&g.length>0)&&e.jsxs("div",{style:{padding:"16px 12px",borderBottom:W?"1px solid #1e293b":"none"},children:[x&&e.jsxs(n,{to:`/profile/${x}`,onClick:e=>e.stopPropagation(),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8,textDecoration:"none",marginBottom:f?12:0},children:[e.jsx("div",{style:{width:44,height:44,borderRadius:"50%",background:h?`url(${h}) center/cover`:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:18,fontWeight:600},children:!h&&x.charAt(0).toUpperCase()}),e.jsxs("span",{style:{fontSize:12,color:"#60a5fa",fontWeight:600,textAlign:"center",wordBreak:"break-word"},children:["@",x]})]}),f&&g.length>0&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:10,color:"#64748b",textTransform:"uppercase",fontWeight:600},children:"Collaborators"}),g.slice(0,3).map(t=>e.jsxs(n,{to:`/profile/${t.username}`,onClick:e=>e.stopPropagation(),style:{fontSize:11,color:"#60a5fa",textDecoration:"none"},children:["@",t.username]},t.username)),g.length>3&&e.jsxs("span",{style:{fontSize:11,color:"#64748b"},children:["+",g.length-3," more"]})]})]}),W&&c&&e.jsx("div",{style:{flex:1,overflow:"auto",padding:16},children:e.jsx(z,{contentId:c,isAuthenticated:_,currentUsername:M,onAuthRequired:()=>window.location.href="/auth"})})]})]})}):null}export{R as P};
//# sourceMappingURL=PreviewModal-BWcwOJuo.js.map
