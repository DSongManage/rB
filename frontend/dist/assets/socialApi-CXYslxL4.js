import{A as t}from"./index-kwDhYR8e.js";let e=null,n=0;const a=3e5;function i(){const t=document.cookie.match(/csrftoken=([^;]+)/);return t?t[1]:""}async function c(){return{"Content-Type":"application/json","X-CSRFToken":await async function(){const c=Date.now();if(e&&c<n)return e;const r=i();if(r&&64===r.length)return e=r,n=c+a,r;try{const i=await fetch(`${t}/api/auth/csrf/`,{credentials:"include"});if(i.ok){const t=await i.json(),r=(null==t?void 0:t.csrfToken)||"";if(r)return e=r,n=c+a,r}}catch(s){}return i()}(),"X-Requested-With":"XMLHttpRequest"}}async function r(t){if(!t.ok){const e=await t.json().catch(()=>({error:"Request failed"}));throw new Error(e.error||e.detail||"Request failed")}return t.json()}async function s(e){const n=await c();return r(await fetch(`${t}/api/content/${e}/like/`,{method:"POST",headers:n,credentials:"include"}))}async function o(e){const n=await c();return r(await fetch(`${t}/api/content/${e}/like/`,{method:"GET",headers:n,credentials:"include"}))}async function u(e,n=1,a=!0){const i=new URLSearchParams({content:e.toString(),page:n.toString(),top_level:a.toString()});return r(await fetch(`${t}/api/content-comments/?${i}`,{credentials:"include"}))}async function d(e){return r(await fetch(`${t}/api/content-comments/${e}/replies/`,{credentials:"include"}))}async function l(e,n,a){const i=await c();return r(await fetch(`${t}/api/content-comments/`,{method:"POST",headers:i,credentials:"include",body:JSON.stringify({content:e,text:n,parent_comment:a||null})}))}async function f(e,n){const a=await c();return r(await fetch(`${t}/api/content-comments/${e}/`,{method:"PATCH",headers:a,credentials:"include",body:JSON.stringify({text:n})}))}async function w(e){const n=await c(),a=await fetch(`${t}/api/content-comments/${e}/`,{method:"DELETE",headers:n,credentials:"include"});if(!a.ok){const t=await a.json().catch(()=>({error:"Request failed"}));throw new Error(t.error||t.detail||"Request failed")}}async function h(e,n=1){const a=new URLSearchParams({content:e.toString(),page:n.toString()});return r(await fetch(`${t}/api/content-ratings/?${a}`,{credentials:"include"}))}async function $(e){const n=await c(),a=await fetch(`${t}/api/content-ratings/mine/?content=${e}`,{headers:n,credentials:"include"});if(!a.ok){if(404===a.status)return null;const t=await a.json().catch(()=>({error:"Request failed"}));throw new Error(t.error||t.detail||"Request failed")}return await a.json()||null}async function p(e,n,a){const i=await c();return r(await fetch(`${t}/api/content-ratings/`,{method:"POST",headers:i,credentials:"include",body:JSON.stringify({content:e,rating:n,review_text:a||""})}))}async function m(e,n=1){const a=new URLSearchParams({creator:e,page:n.toString()});return r(await fetch(`${t}/api/creator-reviews/?${a}`,{credentials:"include"}))}async function y(e){const n=await c();return r(await fetch(`${t}/api/creator-reviews/can-review/${e}/`,{headers:n,credentials:"include"}))}async function g(e,n,a){const i=await c();return r(await fetch(`${t}/api/creator-reviews/`,{method:"POST",headers:i,credentials:"include",body:JSON.stringify({creator:e,rating:n,review_text:a||""})}))}async function S(e,n){const a=await c();return r(await fetch(`${t}/api/creator-reviews/${e}/respond/`,{method:"POST",headers:a,credentials:"include",body:JSON.stringify({response_text:n})}))}async function R(e){const n=await c();return r(await fetch(`${t}/api/users/${e}/follow/`,{method:"POST",headers:n,credentials:"include"}))}async function T(e){const n=await c();return r(await fetch(`${t}/api/users/${e}/follow/`,{method:"DELETE",headers:n,credentials:"include"}))}async function P(e){const n=await c();return r(await fetch(`${t}/api/users/${e}/follow/`,{method:"GET",headers:n,credentials:"include"}))}async function k(e,n=1){const a=new URLSearchParams({page:n.toString()});return r(await fetch(`${t}/api/users/${e}/following/?${a}`,{credentials:"include"}))}async function E(e=1){const n=await c(),a=new URLSearchParams({page:e.toString()});return r(await fetch(`${t}/api/feed/following/?${a}`,{headers:n,credentials:"include"}))}export{m as a,P as b,y as c,h as d,$ as e,R as f,k as g,p as h,o as i,u as j,l as k,f as l,w as m,d as n,E as o,S as r,g as s,s as t,T as u};
