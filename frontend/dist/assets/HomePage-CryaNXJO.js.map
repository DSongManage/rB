{"version":3,"file":"HomePage-CryaNXJO.js","sources":["../../src/components/BookCard.tsx","../../src/components/FilterDropdown.tsx","../../src/pages/HomePage.tsx"],"sourcesContent":["import React, { memo, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Eye, ChevronUp, ChevronDown, ThumbsUp, BookOpen } from 'lucide-react';\nimport { StarRatingDisplay } from './StarRatingDisplay';\n\ntype BookChapter = {\n  id: number;\n  title: string;\n  order: number;\n  content_id: number;\n  price_usd: number;\n  view_count: number;\n};\n\ntype Props = {\n  id: number;\n  title: string;\n  coverImageUrl: string;\n  author: string;\n  chapters: BookChapter[];\n  publishedChapters: number;\n  totalViews: number;\n  totalLikes: number;\n  totalPrice: number;\n  averageRating: number | null;\n  ratingCount: number;\n  timeText: string;\n};\n\n// Format count (1.2K, 1.5M, etc.)\nfunction formatCount(count: number): string {\n  if (count >= 1000000) {\n    return `${(count / 1000000).toFixed(1)}M`;\n  } else if (count >= 1000) {\n    return `${(count / 1000).toFixed(1)}K`;\n  }\n  return `${count}`;\n}\n\nfunction BookCardComponent({\n  id,\n  title,\n  coverImageUrl,\n  author,\n  chapters,\n  publishedChapters,\n  totalViews,\n  totalLikes,\n  totalPrice,\n  averageRating,\n  ratingCount,\n  timeText,\n}: Props) {\n  const [expanded, setExpanded] = useState(false);\n  const navigate = useNavigate();\n\n  const firstChapter = chapters.find(ch => ch.content_id);\n  const hasMultipleChapters = publishedChapters > 1;\n\n  // Popularity indicators\n  const isPopular = totalViews >= 100;\n  const isVeryPopular = totalViews >= 1000;\n\n  // Format rating\n  const ratingText = averageRating != null && ratingCount > 0\n    ? `${Number(averageRating).toFixed(1)} (${formatCount(ratingCount)})`\n    : '--';\n\n  const handleViewChapter = (contentId: number) => {\n    navigate(`/content/${contentId}`);\n  };\n\n  const handleCoverClick = () => {\n    if (hasMultipleChapters) {\n      // Toggle chapters dropdown for multi-chapter books\n      setExpanded(!expanded);\n    } else if (firstChapter) {\n      // Navigate directly for single-chapter books\n      navigate(`/content/${firstChapter.content_id}`);\n    }\n  };\n\n  return (\n    <div\n      className=\"yt-card\"\n      style={{\n        background: '#0f172a',\n        border: '1px solid #1e293b',\n        borderRadius: 16,\n        overflow: 'hidden',\n        transition: 'all 0.2s',\n      }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.transform = 'translateY(-4px)';\n        e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.25)';\n        e.currentTarget.style.borderColor = '#334155';\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.transform = 'translateY(0)';\n        e.currentTarget.style.boxShadow = 'none';\n        e.currentTarget.style.borderColor = '#1e293b';\n      }}\n    >\n      {/* Cover Image */}\n      <div\n        onClick={handleCoverClick}\n        style={{\n          width: '100%',\n          paddingTop: '56.25%', // 16:9 ratio\n          background: coverImageUrl\n            ? `url(${coverImageUrl})`\n            : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          position: 'relative',\n          cursor: 'pointer',\n        }}\n      >\n        {!coverImageUrl && (\n          <div style={{\n            position: 'absolute',\n            inset: 0,\n            display: 'grid',\n            placeItems: 'center',\n            color: 'rgba(255,255,255,0.3)',\n          }}>\n            <BookOpen size={48} />\n          </div>\n        )}\n\n        {/* Chapter count badge - only show for multiple chapters */}\n        {hasMultipleChapters && (\n          <div style={{\n            position: 'absolute',\n            top: 8,\n            right: 8,\n            background: 'rgba(0,0,0,0.85)',\n            backdropFilter: 'blur(4px)',\n            padding: '4px 10px',\n            borderRadius: 12,\n            fontSize: 12,\n            fontWeight: 600,\n            color: '#f8fafc',\n          }}>\n            {publishedChapters} chapters\n          </div>\n        )}\n\n        {/* Price badge */}\n        {totalPrice > 0 && (\n          <div style={{\n            position: 'absolute',\n            top: hasMultipleChapters ? 40 : 8,\n            right: 8,\n            background: 'rgba(0,0,0,0.8)',\n            backdropFilter: 'blur(4px)',\n            padding: '4px 8px',\n            borderRadius: 4,\n            fontSize: 12,\n            fontWeight: 700,\n            color: '#10b981',\n          }}>\n            ${totalPrice.toFixed(2)}\n          </div>\n        )}\n      </div>\n\n      {/* Card Content */}\n      <div style={{ padding: 16 }}>\n        {/* Title with views */}\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: 8,\n          marginBottom: 8,\n        }}>\n          <div style={{\n            fontSize: 15,\n            fontWeight: 600,\n            color: '#f8fafc',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n            whiteSpace: 'nowrap',\n            flex: 1,\n          }}>\n            {title}\n          </div>\n          {totalViews > 0 && (\n            <span style={{\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: 3,\n              fontSize: 11,\n              fontWeight: isVeryPopular ? 700 : isPopular ? 600 : 500,\n              color: isVeryPopular ? '#f59e0b' : isPopular ? '#10b981' : '#94a3b8',\n              background: isVeryPopular ? 'rgba(245, 158, 11, 0.15)' : isPopular ? 'rgba(16, 185, 129, 0.1)' : 'transparent',\n              padding: isPopular ? '2px 6px' : '0',\n              borderRadius: 4,\n              flexShrink: 0,\n            }}>\n              <Eye size={12} />\n              {formatCount(totalViews)}\n            </span>\n          )}\n        </div>\n\n        {/* Author and meta */}\n        <div style={{\n          fontSize: 13,\n          color: '#94a3b8',\n          marginBottom: 12,\n          display: 'flex',\n          alignItems: 'center',\n          gap: 6,\n          flexWrap: 'wrap',\n        }}>\n          <Link\n            to={`/profile/${author}`}\n            style={{ color: '#60a5fa', textDecoration: 'none' }}\n            onClick={(e) => e.stopPropagation()}\n          >\n            {author}\n          </Link>\n          <span>•</span>\n          <StarRatingDisplay rating={averageRating} count={ratingCount} size={11} />\n          <span>•</span>\n          <span style={{ display: 'inline-flex', alignItems: 'center', gap: 2 }}>\n            <ThumbsUp size={12} /> {formatCount(totalLikes)}\n          </span>\n          <span>•</span>\n          <span>{timeText}</span>\n        </div>\n\n        {/* Expandable chapter list - only for multi-chapter books */}\n        {hasMultipleChapters && (\n          <>\n            <button\n              onClick={() => setExpanded(!expanded)}\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: 'none',\n                borderRadius: 8,\n                padding: '8px 12px',\n                color: '#94a3b8',\n                fontSize: 13,\n                fontWeight: 500,\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n              }}\n            >\n              <span>Chapters</span>\n              {expanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\n            </button>\n\n            {expanded && (\n              <div style={{\n                background: '#0d1117',\n                borderRadius: 8,\n                padding: 8,\n                marginTop: 8,\n                maxHeight: 200,\n                overflowY: 'auto',\n              }}>\n                {chapters.map((chapter, index) => (\n                  <div\n                    key={chapter.id}\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between',\n                      padding: '8px 10px',\n                      borderRadius: 6,\n                      background: index % 2 === 0 ? 'transparent' : 'rgba(255,255,255,0.02)',\n                    }}\n                  >\n                    <div style={{ flex: 1, minWidth: 0 }}>\n                      <div style={{\n                        fontSize: 13,\n                        color: '#e2e8f0',\n                        fontWeight: 500,\n                        whiteSpace: 'nowrap',\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                      }}>\n                        Ch {chapter.order + 1}: {chapter.title}\n                      </div>\n                      <div style={{ fontSize: 11, color: '#64748b' }}>\n                        ${chapter.price_usd.toFixed(2)} • {chapter.view_count} views\n                      </div>\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleViewChapter(chapter.content_id);\n                      }}\n                      style={{\n                    background: 'transparent',\n                    border: '1px solid #334155',\n                    borderRadius: 6,\n                    padding: '4px 10px',\n                    color: '#94a3b8',\n                    fontSize: 11,\n                    fontWeight: 500,\n                    cursor: 'pointer',\n                    marginLeft: 8,\n                    flexShrink: 0,\n                  }}\n                >\n                    View\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport const BookCard = memo(BookCardComponent);\n","import React, { useState, useRef, useEffect } from 'react';\nimport { ChevronDown } from 'lucide-react';\n\ninterface FilterOption {\n  label: string;\n  value: string;\n}\n\ninterface Props {\n  label: string;\n  value: string;\n  options: FilterOption[];\n  onChange: (value: string) => void;\n}\n\nexport function FilterDropdown({ label, value, options, onChange }: Props) {\n  const [open, setOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const selectedLabel = options.find(o => o.value === value)?.label || value;\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setOpen(false);\n      }\n    }\n\n    if (open) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [open]);\n\n  return (\n    <div className=\"filter-dropdown\" ref={dropdownRef}>\n      <button onClick={() => setOpen(!open)} type=\"button\">\n        {label}: {selectedLabel}\n        <ChevronDown\n          size={14}\n          style={{\n            transition: 'transform 0.2s',\n            transform: open ? 'rotate(180deg)' : 'rotate(0deg)',\n          }}\n        />\n      </button>\n      {open && (\n        <div className=\"dropdown-menu\">\n          {options.map(opt => (\n            <button\n              key={opt.value}\n              type=\"button\"\n              className={opt.value === value ? 'active' : ''}\n              onClick={() => {\n                onChange(opt.value);\n                setOpen(false);\n              }}\n            >\n              {opt.label}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { API_URL } from '../config';\nimport { VideoCard } from '../components/VideoCard';\nimport { BookCard } from '../components/BookCard';\nimport { FilterDropdown } from '../components/FilterDropdown';\n\ntype Collaborator = {\n  username: string;\n  role: string;\n  revenue_percentage: number;\n};\n\ntype Item = {\n  id: number;\n  title: string;\n  teaser_link?: string;\n  creator?: number;\n  creator_username?: string;\n  created_at?: string;\n  content_type?: string;\n  price_usd?: number;\n  editions?: number;\n  owned?: boolean;\n  is_collaborative?: boolean;\n  collaborators?: Collaborator[];\n  like_count?: number;\n  view_count?: number;\n  average_rating?: number | null;\n  rating_count?: number;\n};\n\n// Book project from aggregated endpoint\ntype BookChapter = {\n  id: number;\n  title: string;\n  order: number;\n  content_id: number;\n  price_usd: number;\n  view_count: number;\n};\n\ntype BookProject = {\n  id: number;\n  title: string;\n  cover_image_url: string | null;\n  creator_username: string;\n  published_chapters: number;\n  chapters: BookChapter[];\n  total_views: number;\n  total_price: number;\n  total_likes: number;\n  average_rating: number | null;\n  rating_count: number;\n  first_chapter_content_id: number | null;\n  created_at: string;\n  content_type: 'book';\n};\n\n// Content type filter config\nconst TYPE_FILTERS = [\n  { label: 'All', value: 'all' },\n  { label: 'Books', value: 'book' },\n  { label: 'Comics', value: 'comic' },\n  { label: 'Art', value: 'art' },\n  { label: 'Film', value: 'film', comingSoon: true },\n  { label: 'Music', value: 'music', comingSoon: true },\n];\n\n// Genre filter config - for content genre (fantasy, scifi, etc.)\nconst GENRE_FILTERS = [\n  { label: 'All Genres', value: 'all' },\n  { label: 'Fantasy', value: 'fantasy' },\n  { label: 'Sci-Fi', value: 'scifi' },\n  { label: 'Drama', value: 'drama' },\n  { label: 'Comedy', value: 'comedy' },\n  { label: 'Nonfiction', value: 'nonfiction' },\n];\n\n// Sort options for content ordering\nconst SORT_OPTIONS = [\n  { label: 'Newest', value: 'newest' },\n  { label: 'Most Popular', value: 'popular' },\n  { label: 'Highest Rated', value: 'rated' },\n  { label: 'Best Sellers', value: 'bestsellers' },\n];\n\n\nexport default function HomePage() {\n  const [items, setItems] = useState<Item[]>([]);\n  const [bookProjects, setBookProjects] = useState<BookProject[]>([]);\n  const [selectedType, setSelectedType] = useState('all');\n  const [selectedGenre, setSelectedGenre] = useState('all');\n  const [selectedSort, setSelectedSort] = useState('newest');\n\n  useEffect(()=>{\n    const abortController = new AbortController();\n\n    // Build query params\n    const genreParam = selectedGenre !== 'all' ? `&genre=${selectedGenre}` : '';\n\n    // Fetch regular content (art, film, music - excludes books which are shown aggregated)\n    const contentPromise = fetch(`${API_URL}/api/content/?sort=${selectedSort}${genreParam}`, {\n      credentials: 'include',\n      signal: abortController.signal,\n    })\n      .then(r=>r.json())\n      .then(data => {\n        // Handle paginated response from DRF\n        if (data && Array.isArray(data.results)) {\n          // Filter out book content - we'll show aggregated books instead\n          return data.results.filter((item: Item) => item.content_type !== 'book');\n        } else if (Array.isArray(data)) {\n          return data.filter((item: Item) => item.content_type !== 'book');\n        }\n        return [];\n      });\n\n    // Fetch aggregated book projects\n    const booksPromise = fetch(`${API_URL}/api/book-projects/public/?sort=${selectedSort}${genreParam}`, {\n      credentials: 'include',\n      signal: abortController.signal,\n    })\n      .then(r=>r.json())\n      .then(data => Array.isArray(data) ? data : []);\n\n    // Wait for both requests\n    Promise.all([contentPromise, booksPromise])\n      .then(([contentItems, books]) => {\n        setItems(contentItems);\n        setBookProjects(books);\n      })\n      .catch((err)=>{\n        if (err.name !== 'AbortError') {\n          setItems([]);\n          setBookProjects([]);\n        }\n      });\n\n    return () => abortController.abort();\n  },[selectedSort, selectedGenre]);\n\n  // Format time ago\n  const getTimeAgo = (dateString?: string) => {\n    if (!dateString) return 'Recently';\n    const date = new Date(dateString);\n    const now = new Date();\n    const seconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n\n    if (seconds < 60) return 'Just now';\n    if (seconds < 3600) return `${Math.floor(seconds / 60)} minutes ago`;\n    if (seconds < 86400) return `${Math.floor(seconds / 3600)} hours ago`;\n    if (seconds < 604800) return `${Math.floor(seconds / 86400)} days ago`;\n    return `${Math.floor(seconds / 604800)} weeks ago`;\n  };\n\n  // Create unified list with sorting info\n  type DisplayItem = {\n    type: 'content' | 'book';\n    data: Item | BookProject;\n  };\n\n  const allItems: DisplayItem[] = useMemo(() => {\n    // Get sort value based on selected sort option\n    const getSortValue = (item: DisplayItem): number => {\n      if (item.type === 'book') {\n        const book = item.data as BookProject;\n        switch (selectedSort) {\n          case 'popular':\n            return book.total_views || 0;\n          case 'rated':\n            // Sort by rating first, then by count for tiebreaker\n            return (book.average_rating || 0) * 10000 + (book.rating_count || 0);\n          case 'bestsellers':\n            // Books don't have purchase_count on frontend, use views as proxy\n            return book.total_views || 0;\n          case 'newest':\n          default:\n            return book.created_at ? new Date(book.created_at).getTime() : 0;\n        }\n      } else {\n        const content = item.data as Item;\n        switch (selectedSort) {\n          case 'popular':\n            return content.view_count || 0;\n          case 'rated':\n            // Sort by rating first, then by count for tiebreaker\n            return (content.average_rating || 0) * 10000 + (content.rating_count || 0);\n          case 'bestsellers':\n            // Content doesn't have purchase_count on frontend, use views as proxy\n            return content.view_count || 0;\n          case 'newest':\n          default:\n            return content.created_at ? new Date(content.created_at).getTime() : 0;\n        }\n      }\n    };\n\n    const result: DisplayItem[] = [];\n\n    // Add regular content items\n    items.forEach(it => {\n      result.push({\n        type: 'content',\n        data: it,\n      });\n    });\n\n    // Add book projects\n    bookProjects.forEach(book => {\n      result.push({\n        type: 'book',\n        data: book,\n      });\n    });\n\n    // Sort based on selected sort option (descending)\n    result.sort((a, b) => getSortValue(b) - getSortValue(a));\n\n    return result;\n  }, [items, bookProjects, selectedSort]);\n\n  // Apply filter\n  const filtered = useMemo(()=>{\n    if (selectedType === 'all') return allItems;\n\n    return allItems.filter(item => {\n      if (item.type === 'book') {\n        return selectedType === 'book';\n      } else {\n        return (item.data as Item).content_type === selectedType;\n      }\n    });\n  },[allItems, selectedType]);\n\n  return (\n    <div>\n      {/* Filter Bar - single row with tabs + dropdowns */}\n      <div className=\"filter-bar\">\n        {/* Primary content type tabs */}\n        <div className=\"filter-tabs\">\n          {TYPE_FILTERS.map(f => (\n            <button\n              key={f.value}\n              className={`filter-tab ${selectedType === f.value ? 'active' : ''}`}\n              onClick={() => !f.comingSoon && setSelectedType(f.value)}\n              disabled={f.comingSoon}\n            >\n              {f.label}\n              {f.comingSoon && (\n                <span className=\"coming-soon-badge\">Soon</span>\n              )}\n            </button>\n          ))}\n        </div>\n\n        {/* Spacer */}\n        <div style={{ flex: 1 }} />\n\n        {/* Dropdown filters */}\n        <FilterDropdown\n          label=\"Genre\"\n          value={selectedGenre}\n          options={GENRE_FILTERS}\n          onChange={setSelectedGenre}\n        />\n        <FilterDropdown\n          label=\"Sort\"\n          value={selectedSort}\n          options={SORT_OPTIONS}\n          onChange={setSelectedSort}\n        />\n      </div>\n\n      <div className=\"page\" style={{padding:0, background:'transparent', border:'none', boxShadow:'none'}}>\n        <div className=\"yt-grid\">\n          {filtered.map((item) => {\n            if (item.type === 'book') {\n              const book = item.data as BookProject;\n              return (\n                <BookCard\n                  key={`book-${book.id}`}\n                  id={book.id}\n                  title={book.title}\n                  coverImageUrl={book.cover_image_url || ''}\n                  author={book.creator_username}\n                  chapters={book.chapters}\n                  publishedChapters={book.published_chapters}\n                  totalViews={book.total_views}\n                  totalLikes={book.total_likes}\n                  totalPrice={book.total_price}\n                  averageRating={book.average_rating}\n                  ratingCount={book.rating_count}\n                  timeText={getTimeAgo(book.created_at)}\n                />\n              );\n            } else {\n              const it = item.data as Item;\n              return (\n                <VideoCard\n                  key={`content-${it.id}`}\n                  id={it.id}\n                  title={it.title}\n                  author={it.creator_username || `Creator #${it.creator ?? 0}`}\n                  likeCount={it.like_count}\n                  viewCount={it.view_count}\n                  averageRating={it.average_rating}\n                  ratingCount={it.rating_count}\n                  timeText={getTimeAgo(it.created_at)}\n                  thumbnailUrl={it.teaser_link || ''}\n                  price={it.price_usd}\n                  editions={it.editions}\n                  owned={it.owned}\n                  isCollaborative={it.is_collaborative}\n                  collaborators={it.collaborators?.map(c => c.username)}\n                />\n              );\n            }\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["formatCount","count","toFixed","BookCard","memo","id","title","coverImageUrl","author","chapters","publishedChapters","totalViews","totalLikes","totalPrice","averageRating","ratingCount","timeText","expanded","setExpanded","useState","navigate","useNavigate","firstChapter","find","ch","content_id","hasMultipleChapters","isPopular","isVeryPopular","Number","jsxs","className","style","background","border","borderRadius","overflow","transition","onMouseEnter","e","currentTarget","transform","boxShadow","borderColor","onMouseLeave","children","onClick","width","paddingTop","backgroundSize","backgroundPosition","position","cursor","jsx","inset","display","placeItems","color","BookOpen","size","top","right","backdropFilter","padding","fontSize","fontWeight","alignItems","gap","marginBottom","textOverflow","whiteSpace","flex","flexShrink","Eye","flexWrap","Link","to","textDecoration","stopPropagation","StarRatingDisplay","rating","ThumbsUp","Fragment","justifyContent","ChevronUp","ChevronDown","marginTop","maxHeight","overflowY","map","chapter","index","minWidth","order","price_usd","view_count","contentId","marginLeft","FilterDropdown","label","value","options","onChange","open","setOpen","dropdownRef","useRef","selectedLabel","_a","o","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","ref","type","opt","TYPE_FILTERS","comingSoon","GENRE_FILTERS","SORT_OPTIONS","HomePage","items","setItems","bookProjects","setBookProjects","selectedType","setSelectedType","selectedGenre","setSelectedGenre","selectedSort","setSelectedSort","abortController","AbortController","genreParam","contentPromise","fetch","API_URL","credentials","signal","then","r","json","data","Array","isArray","results","filter","item","content_type","booksPromise","Promise","all","contentItems","books","catch","err","name","abort","getTimeAgo","dateString","date","Date","now","seconds","Math","floor","getTime","allItems","useMemo","getSortValue","book","total_views","average_rating","rating_count","created_at","content","result","forEach","it","push","sort","a","b","filtered","f","disabled","cover_image_url","creator_username","published_chapters","total_likes","total_price","VideoCard","creator","likeCount","like_count","viewCount","thumbnailUrl","teaser_link","price","editions","owned","isCollaborative","is_collaborative","collaborators","c","username"],"mappings":"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"}