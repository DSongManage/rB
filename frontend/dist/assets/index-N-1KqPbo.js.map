{"version":3,"mappings":"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","names":["g","globalThis","window","global","Buffer","process","on","emitter","EventEmitter","bind","once","off","emit","removeListener","removeAllListeners","listeners","env","API_URL","libraryApi","getLibrary","response","fetch","API_BASE","method","credentials","ok","Error","statusText","json","getFullContent","contentId","status","updateProgress","progressPercentage","lastPosition","csrfToken","async","data","error","getFreshCsrfToken","headers","body","JSON","stringify","content_id","progress_percentage","last_position","getProgress","getAllProgress","LibraryItemCard","memo","item","onClick","Math","round","progress","jsxs","Link","to","id","className","style","display","gap","padding","background","border","borderRadius","textDecoration","color","transition","cursor","onMouseEnter","e","currentTarget","borderColor","onMouseLeave","children","position","width","height","flexShrink","overflow","jsx","src","thumbnail","alt","title","objectFit","onError","bottom","left","right","flex","flexDirection","justifyContent","minWidth","fontWeight","fontSize","marginBottom","textOverflow","whiteSpace","creator","toPascalCase","string","camelCase","replace","match","p1","p2","toUpperCase","toLowerCase","toCamelCase","charAt","slice","mergeClasses","classes","filter","index","array","Boolean","trim","indexOf","join","hasA11yProp","props","prop","startsWith","defaultAttributes","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Icon","forwardRef","size","absoluteStrokeWidth","iconNode","rest","ref","createElement","Number","map","tag","attrs","Array","isArray","createLucideIcon","iconName","Component","displayName","Bell","d","key","BookOpen","ChevronLeft","ChevronRight","CircleCheckBig","CircleQuestionMark","cx","cy","r","Clock","DollarSign","x1","x2","y1","y2","FilePen","Film","x","y","rx","Image","ry","LogOut","MailOpen","Mail","Menu","MessageSquare","Music","PartyPopper","Play","RotateCcw","Search","ShoppingCart","User","Users","X","useAuth","authState","setAuthState","useState","user","loading","isAuthenticated","checkAuth","useCallback","authenticated","logout","csrfResponse","csrfData","refreshAuth","prev","useEffect","LibrarySidebar","library","setLibrary","setLoading","setError","isExpanded","setIsExpanded","selectedTab","setSelectedTab","loadLibrary","err","message","top","borderRight","alignItems","zIndex","writingMode","marginTop","totalItems","Object","values","reduce","sum","items","length","currentItems","borderBottom","overflowX","tab","count","_a","isActive","disabled","opacity","overflowY","textAlign","borderTop","flexWrap","footerLinkStyle","href","Date","getFullYear","MobileLibraryCard","placeholderSvg","aspectRatio","TAB_ICONS","books","art","film","music","MobileLibrary","margin","WebkitOverflowScrolling","paddingBottom","scrollbarWidth","msOverflowStyle","gridTemplateColumns","getState","innerWidth","isMobile","isPhone","isTablet","isDesktop","screenWidth","useMobile","state","setState","handleResize","addEventListener","removeEventListener","ProtectedRoute","setIsAuthenticated","location","useLocation","Navigate","from","ErrorBoundary","constructor","super","__publicField","this","hasError","getDerivedStateFromError","componentDidCatch","errorInfo","render","fallback","minHeight","handleRetry","notifications","unreadCount","lastChecked","isPolling","lastError","knownNotificationIds","Set","initialLoadComplete","CONFIG","POLLING_INTERVAL","MAX_RETRIES","RETRY_DELAY","getCsrfToken","apiRequest","url","options","fullUrl","errorData","catch","getNotifications","n","read","forEach","add","events","pollingInterval","retryCount","retryTimeout","pollNotifications","previouslyKnownIds","newNotifications","has","stopPolling","setTimeout","startPolling","setInterval","clearInterval","clearTimeout","Map","event","handler","set","get","handlers","delete","clear","getTimeAgo","dateString","date","now","seconds","floor","getTime","toLocaleDateString","getNotificationIcon","type","invitation","invitation_response","comment","approval","section_update","revenue_proposal","mint_ready","getNotificationColor","notificationService","getUnreadNotifications","getUnreadCount","markNotificationRead","notificationId","notification","find","max","markAllNotificationsRead","deleteNotification","removeFromLocalState","findIndex","wasUnread","splice","getNotificationStats","stats","total","unread","by_type","setPollingInterval","intervalMs","getCachedNotifications","getCachedUnreadCount","reset","useNotifications","autoStart","onNewNotification","setNotifications","setUnreadCount","isLoading","setIsLoading","setIsPolling","refresh","markAsRead","markAllAsRead","deleteNotificationCallback","startPollingCallback","stopPollingCallback","getStats","unsubUpdated","unsubUnreadCount","unsubNew","newNotifs","unsubPollingStarted","unsubPollingStopped","unsubPollingError","NotificationItem","onDelete","onViewInvite","icon","iconProps","CheckCircle","FileEdit","getNotificationLucideIcon","timeAgo","created_at","isInvitation","role","tabIndex","onKeyDown","preventDefault","borderLeft","lineHeight","from_user","username","stopPropagation","boxShadow","handleResponse","errorMessage","detail","collaborationApi","createCollaborativeProject","deleteCollaborativeProject","projectId","splits","getApprovalStatus","project","getCollaborativeProject","pendingApprovals","collaborators","c","approved_current_version","approved_revenue_split","is_fully_approved","pending_approvals","createProjectSection","formData","FormData","append","toString","section_type","content_html","media_file","order","updateProjectSection","deleteProjectSection","addComment","attachments","content","section","parent_comment","mentions","file","getComments","sectionId","commentId","deleteComment","emoji","removeReaction","reactionId","reaction_id","getCommentsBySection","includeResolved","getUnresolvedCommentCount","resolved","priceUsd","price_usd","settings","forceMint","force_mint","proposalId","ratedUserId","rated_user_id","userId","InviteResponseModal","open","onClose","notificationMessage","navigate","useNavigate","setProject","myRole","setMyRole","mode","setMode","proposedPercentage","setProposedPercentage","counterMessage","setCounterMessage","submitting","setSubmitting","success","setSuccess","invitedRole","revenue_percentage","loadProject","created_by","othersPercentage","placeItems","target","maxWidth","maxHeight","Fragment","book","video","content_type","description","textTransform","contract_tasks","task","deadline","weekday","month","day","year","label","value","can_edit_text","can_edit_images","can_edit_audio","can_edit_video","perm","declineInvitation","acceptInvitation","min","step","onChange","parseInt","placeholder","resize","counterProposeInvite","proposed_percentage","NotificationDropdown","isOpen","anchorEl","panelRef","useRef","inviteModalOpen","setInviteModalOpen","selectedInvite","setSelectedInvite","recentNotifications","handleViewInvite","handleClickOutside","current","contains","timer","document","handleEscape","action_url","project_id","handleNotificationClick","handleDelete","NotificationBell","setIsOpen","isAnimating","setIsAnimating","bellRef","useUnreadCount","unsubscribe","animation","transformOrigin","NotificationToast","onDismiss","autoDismissMs","isExiting","setIsExiting","handleDismiss","transform","NotificationToastContainer","toasts","setToasts","pointerEvents","FeedbackModal","feedback","setFeedback","email","setEmail","submitted","setSubmitted","onSubmit","required","rows","fontFamily","BetaBadge","variant","showTestMode","letterSpacing","marginLeft","TestModeBanner","showFeedback","setShowFeedback","BetaWelcomeModal","paddingLeft","TourContext","createContext","STORAGE_KEYS","CONSUMER_TOURS","CREATOR_TOURS","TourProvider","activeTour","stepIndex","isRunning","completedTours","toursEnabled","storedUserId","localStorage","getItem","currentUserId","String","removeItem","setItem","storedTours","parse","saveCompletedTours","tours","startTour","tourName","endTour","newCompletedTours","includes","skipTour","nextStep","prevStep","goToStep","resetTour","t","resetAllTours","hasCompletedTour","isConsumerTour","isCreatorTour","setToursEnabled","enabled","Provider","useTour","context","useContext","BetaOnboarding","showWelcome","setShowWelcome","hasSeenWelcome","lastSeenUserId","Footer","currentYear","linkStyle","paddingTop","COOKIE_CONSENT_KEY","CookieBanner","isVisible","setIsVisible","showCustomize","setShowCustomize","preferences","setPreferences","necessary","analytics","marketing","saveConsent","prefs","timestamp","toISOString","handleRejectNonEssential","checked","CartContext","CartProvider","cart","setCart","getCSRFToken","res","refreshCart","addToCart","chapterId","chapter_id","removeFromCart","itemId","clearCart","checkout","checkout_url","isInCart","some","item_id","useCart","isOfType","isFunction","isRegex","prototype","call","isObject","isUndefined","isNull","equal","equalArray","entries","equalMap","equalSet","ArrayBuffer","isView","byteLength","view1","DataView","buffer","view2","getUint8","equalArrayBuffer","source","flags","valueOf","leftKeys","keys","rightKeys","hasOwnProperty","$$typeof","isNaN","objectTypes","primitiveTypes","getObjectType","objectTypeName","test","name","isObjectOfType","DOM_PROPERTIES_TO_CHECK","is","plainFunction","tagType","arrayOf","predicate","function","every","asyncGeneratorFunction","asyncFunction","bigint","boolean","defined","undefined","domElement","object","plainObject","nodeType","nodeName","property","empty","generator","iterable","next","throw","generatorFunction","instanceOf","instance","class_","getPrototypeOf","nullOrUndefined","Symbol","iterator","nan","null","number","numericString","oneOf","primitive","promise","propertyOf","regexp","symbol","weakMap","weakSet","src_default","compareNumbers","previousData","actual","previous","nested","changed","compareValues","primary","secondary","isEqualPredicate","hasExtraKeys","isSameType","hasValue","hasEntry","checkEquality","getIterables","TypeError","arguments_","canHaveLength","input","includesOrEqualsTo","previousValue","split","acc","treeChanges","is2","added","hasActual","hasPrevious","leftComparator","rightComparator","equal2","changedFrom","decreased","emptied","filled","increased","removed","E_NOSCROLL","E_CANCELLED","ms","make","el","opts","cb","noop","start","ease","inOutSine","duration","cancelled","requestAnimationFrame","animate","time","eased","cos","PI","scroll","root","factory","isScrolling","node","getComputedStyle","getPropertyValue","HTMLElement","SVGElement","parentNode","scrollingElement","documentElement","exports","module","Scrollparent","reduceJsxToString","innerText","hasProps","default","reactInnertext","ReactPropTypesSecret_1","ReactPropTypesSecret","require$$0","emptyFunction","emptyFunctionWithReset","resetWarningCache","factoryWithThrowingShims","shim","propName","componentName","propFullName","secret","getShim","isRequired","ReactPropTypes","bool","func","any","element","elementType","objectOf","oneOfType","shape","exact","checkPropTypes","PropTypes","propTypesModule","isBrowser","navigator","timeoutDuration","longerTimeoutBrowsers","i","userAgent","debounce","Promise","fn","called","resolve","then","scheduled","functionToCheck","getStyleComputedProperty","css","ownerDocument","defaultView","getParentNode","host","getScrollParent","_getStyleComputedProp","getReferenceNode","reference","referenceNode","isIE11","MSInputMethodContext","documentMode","isIE10","isIE","version","getOffsetParent","noOffsetParent","offsetParent","nextElementSibling","getRoot","findCommonOffsetParent","element1","element2","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","end","range","createRange","setStart","setEnd","commonAncestorContainer","firstElementChild","element1root","getScroll","upperSide","arguments","html","getBordersSize","styles","axis","sideA","sideB","parseFloat","getSize","computedStyle","getWindowSizes","createClass","defineProperties","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","obj","_extends","assign","getClientRect","offsets","getBoundingClientRect","rect","scrollTop","scrollLeft","result","sizes","clientWidth","clientHeight","horizScrollbar","offsetWidth","vertScrollbar","offsetHeight","getOffsetRectRelativeToArbitraryNode","parent","fixedPosition","isHTML","childrenRect","parentRect","scrollParent","borderTopWidth","borderLeftWidth","subtract","modifier","includeScroll","isFixed","getFixedPositionOffsetParent","parentElement","getBoundaries","popper","boundariesElement","boundaries","excludeScroll","relativeOffset","innerHeight","getViewportOffsetRectRelativeToArtbitraryNode","boundariesNode","_getWindowSizes","isPaddingNumber","computeAutoPlacement","placement","refRect","rects","sortedAreas","area","_ref","sort","a","b","filteredAreas","_ref2","computedPlacement","variation","getReferenceOffsets","getOuterSizes","marginRight","getOppositePlacement","hash","matched","getPopperOffsets","referenceOffsets","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","arr","check","runModifiers","modifiers","ends","cur","update","isDestroyed","arrowStyles","attributes","flipped","positionFixed","flip","originalPlacement","isCreated","onUpdate","onCreate","isModifierEnabled","modifierName","getSupportedPropertyName","prefixes","upperProp","prefix","toCheck","destroy","removeAttribute","willChange","disableEventListeners","removeOnDestroy","removeChild","getWindow","attachToScrollParents","callback","scrollParents","isBody","passive","push","setupEventListeners","updateBound","scrollElement","eventsEnabled","enableEventListeners","scheduleUpdate","cancelAnimationFrame","isNumeric","isFinite","setStyles","unit","isFirefox","isModifierRequired","requestingName","requestedName","requesting","placements","validPlacements","clockwise","counter","concat","reverse","BEHAVIORS","parseOffset","offset","basePlacement","useHeight","fragments","frag","divider","search","splitRegex","ops","op","mergeWithPrevious","str","toValue","index2","Defaults","shift","shiftvariation","_data$offsets","isVertical","side","shiftOffsets","preventOverflow","transformProp","popperStyles","priority","escapeWithReference","keepTogether","opSide","arrow","_data$offsets$arrow","arrowElement","querySelector","len","sideCapitalized","altSide","arrowElementSize","center","popperMarginSide","popperBorderSide","sideValue","placementOpposite","flipOrder","behavior","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariationByRef","flipVariations","flippedVariationByContent","flipVariationsByContent","flippedVariation","getOppositeVariation","inner","subtractLength","hide","bound","computeStyle","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","shouldRound","noRound","v","referenceWidth","popperWidth","isVariation","horizontalToInteger","verticalToInteger","getRoundedOffsets","devicePixelRatio","prefixedProperty","invertTop","invertLeft","applyStyle","setAttribute","onLoad","modifierOptions","Popper","_this","classCallCheck","jquery","Utils","PopperUtils","__values","o","s","m","done","e_1","e_2","_b","_c","_d","e_1_1","return","_e","_f","e_2_1","e_3","e_3_1","_i","ownKeys","getOwnPropertySymbols","getOwnPropertyDescriptor","apply","_objectSpread2","_defineProperty","getOwnPropertyDescriptors","_classCallCheck","_createClass","_toPropertyKey","_defineProperties","_inherits","subClass","superClass","create","_setPrototypeOf","_getPrototypeOf","setPrototypeOf","__proto__","p","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_assertThisInitialized","self","ReferenceError","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","NewTarget","_possibleConstructorReturn","arg","hint","prim","toPrimitive","_toPrimitive","DEFAULTS","isRequiredIf","typeValidator","condition","guardAgainstInvalidArgTypes","_len","_key","propIsRequired","propExists","missingPropError","STATUS","INIT","IDLE","OPENING","OPEN","CLOSING","isReact16","ReactDOM","createPortal","canUseDOM","log","_ref$warn","warn","_ref$debug","debug","logFn","console","ReactFloaterPortal","React","_super","appendNode","renderPortal","unmountComponentAtNode","_this$props","appendChild","_this$props2","setRef","unstable_renderSubtreeIntoContainer","_this$props3","hasChildren","renderReact16","FloaterArrow","points","setArrowRef","_styles$arrow","spread","parentStyle","_excluded$1","FloaterCloseBtn","handleClick","preserveAspectRatio","FloaterContainer","footer","positionWrapper","showCloseButton","output","isValidElement","close","container","propTypes","Floater","disableAnimation","component","hideArrow","floater","floaterCentered","floaterClosing","floaterOpening","floaterWithAnimation","floaterWithComponent","closeFn","setFloaterRef","cloneElement","ReactFloaterWrapper","handleMouseEnter","handleMouseLeave","setChildRef","setWrapperRef","Children","refProp","only","defaultOptions","_excluded","POSITIONING_PROPS","ReactFloater","arrowRef","childRef","floaterRef","wrapperRef","wrapperPopper","newStatus","_this$state","toggle","eventDelayTimeout","eventDelay","_this$state2","currentPlacement","needsUpdate","wrapperOptions","statusWrapper","_isMounted","hasMounted","_this$props5","hasTarget","isControlled","initPopper","prevProps","prevState","forceStatus","_this$props6","autoOpen","_treeChanges","changedTo","changeWrapperPosition","_nextCB","capture","handleTransitionEnd","rebuildPopper","_this2","_this$props7","disableFlip","getPopper","flipBehavior","_this$options","offsetOptions","_this2$floaterRef","isConnected","wrapperOffset","_this3","floaterRefInterval","_this3$floaterRef","nextStatus","ReactFloaterDebug","_this$props8","disableHoverToClick","deepmerge","wrapperStyles","_this4","_this$state3","nextStyles","wrapper","wrapperPosition","visibility","backgroundColor","paddingRight","outline","WebkitAppearance","getStyles","targetStyles","_this$state4","_this$props9","wrapperInPortal","wrapperAsChildren","__defProp","__defNormalProp","ACTIONS","EVENTS","LIFECYCLE","READY","BEACON","TOOLTIP","COMPLETE","ERROR","WAITING","RUNNING","PAUSED","SKIPPED","FINISHED","getDocumentHeight","median","heights","scrollHeight","middle","getElement","skipFix","forListener","scrollDocument","isSameNode","hasCustomScrollParent","hasPosition","getScrollTo","offsetTop","hasCustomOffsetParent","getBrowser","browser","opera","InstallTrigger","chrome","getReactNodeText","defaultValue","steps","text","hexToRGB","hex","properHex","_m","exec","hideBeacon","disableBeacon","isLegacy","omit","replaceLocaleContent","replacer","child","defaultFloaterProps","defaultLocale","back","last","nextLabelWithProgress","skip","defaultStep","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrollParentFix","disableScrolling","hideBackButton","hideCloseButton","hideFooter","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","defaultProps","continuous","getHelpers","run","scrollOffset","scrollDuration","scrollToFirstStep","arrowColor","beaconSize","overlayColor","primaryColor","spotlightShadow","textColor","buttonBase","spotlight","getTourProps","pick","getMergedStep","currentStep","mergedStep","deepmerge2","all","isMergeableObject","mergedStyles","floaterProps","mergedFloaterProps","hideBeacon2","overlay","defaultStyles","beacon","beaconInner","beaconOuter","boxSizing","tooltip","tooltipContainer","tooltipTitle","tooltipContent","tooltipFooter","tooltipFooterSpacer","buttonNext","buttonBack","buttonClose","buttonSkip","mixBlendMode","overlayLegacy","overlayLegacyCenter","spotlightLegacy","floaterStyles","scrollParent2","placementBeacon","validateStep","validateSteps","defaultState","action","controlled","lifecycle","origin","validKeys","Store","listener","beaconPopper","tooltipPopper","getNextState","nextIndex","getSteps","restart","is3","advance","setSteps","store","force","newIndex","hasUpdatedState","oldState","nextState","initial","go","info","Spotlight_default","React.createElement","JoyrideOverlay","React2.Component","mouseOverSpotlight","showSpotlight","hiddenLifecycles","spotlightStyles","offsetY","clientY","pageY","offsetX","clientX","pageX","inSpotlight","updateState","scrollTimeout","resizeTimeout","forceUpdate","componentDidMount","componentDidUpdate","previousProps","handleScroll","handleMouseMove","componentWillUnmount","overlayStyles","baseStyles","elementRect","isFixedTarget","hasScrollParent","parentTop","getElementPosition","previousState","onClickOverlay","hideSpotlight","spotlight2","React2.createElement","safariOverlay","JoyridePortal","React3.Component","renderReact15","ReactDOM.unmountComponentAtNode","ReactDOM.unstable_renderSubtreeIntoContainer","ReactDOM.createPortal","Scope","canHaveFocus","getAttribute","querySelectorAll","canBeTabbed","code","interceptTab","elements","findValidTabElements","shiftKey","activeElement","focus","noSize","innerHTML","isHidden","handleKeyDown","checkFocus","selector","setFocus","JoyrideBeacon","React4.Component","beaconComponent","head","getElementsByTagName","nonce","createTextNode","shouldFocus","is4","getElementById","isLastStep","onClickOrHover","sharedProps","setBeaconRef","BeaconComponent","React4.createElement","CloseButton_default","React5","Container_default","backProps","closeProps","primaryProps","skipProps","tooltipProps","React6.createElement","JoyrideTooltip","React7.Component","helpers","setTooltipRef","backText","closeText","lastText","nextText","skipText","primaryText","labelWithProgress","handleClickBack","handleClickClose","handleClickPrimary","handleClickSkip","tooltipComponent","cleanStep","renderProps","getElementsProps","TooltipComponent","React7.createElement","JoyrideStep","React8.Component","setPopper","React8.createElement","shouldScroll","shouldScroll2","treeChanges2","skipBeacon","hasStoreChanged","isInitial","isAfterAction","hasRenderedTarget","isElementVisible","scope","removeScope","cleanupPoppers","is5","renderTooltip","handleClickHoverBeacon","Joyride","React9.Component","is6","addListener","syncState","handleKeyboard","previousStepIndex","previousSteps","stop","changedProps","treeChanges3","stepsChanged","isEqual","stepIndexChanged","nextAction","callbackData","previousStep","scrollToStep","shouldScrollToStep","isFirstStep","previousLifecycle","hasCustomScroll","scrollY","reject","limit","scrollTo","React9.createElement","handleClickOverlay","components_default","welcomeTourSteps","welcomeTourStepsMobile","purchaseTourSteps","libraryTourSteps","creatorIntroTourSteps","studioTourSteps","dashboardTourSteps","collaborationTourSteps","tourDisplayNames","welcome","purchase","studio","dashboard","collaboration","tourStyles","TourTooltip","isFirst","isLast","TourRenderer","useMemo","getTourSteps","handleCallback","TourMenu","handleStartTour","HelpCircle","inset","tour","TourButton","isCompleted","CartIcon","itemCount","item_count","RECENT_SEARCHES_KEY","SearchAutocomplete","onSearch","query","setQuery","suggestions","setSuggestions","recentSearches","setRecentSearches","selectedIndex","setSelectedIndex","inputRef","containerRef","stored","encodeURIComponent","finally","handleSearch","searchQuery","updated","saveRecentSearch","showDropdown","onFocus","selected","blur","autoComplete","creator_username","removeRecentSearch","HomePage","lazy","__vitePreload","import","__VITE_PRELOAD__","SearchPage","StudioPage","DashboardPage","ProfilePage","AuthPage","WalletInfoPage","BetaLanding","CollaboratorsPage","PublicProfilePage","ContentDetail","PurchaseSuccessPage","ReaderPage","CollaborationDashboard","CollaborativeProjectPage","NotificationsPage","FollowingFeedPage","CartPage","CartSuccessPage","TermsOfServicePage","PrivacyPolicyPage","ContentPolicyPage","DMCAPolicyPage","CreatorAgreementPage","PageLoader","Header","isAuthed","setIsAuthed","setUsername","avatarUrl","setAvatarUrl","mobileMenuOpen","setMobileMenuOpen","authed","avatar_url","interval","pathname","j","App","showLibrarySidebar","showMobileLibrary","isReaderPage","showFooter","isPublicRoute","route","Suspense","Routes","Route","path","createRoot","StrictMode","BrowserRouter"],"ignoreList":[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72],"sources":["../../src/polyfills.ts","../../src/config.ts","../../src/services/libraryApi.ts","../../src/components/LibraryItemCard.tsx","../../node_modules/lucide-react/dist/esm/shared/src/utils.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/Icon.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/bell.js","../../node_modules/lucide-react/dist/esm/icons/book-open.js","../../node_modules/lucide-react/dist/esm/icons/chevron-left.js","../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../node_modules/lucide-react/dist/esm/icons/circle-check-big.js","../../node_modules/lucide-react/dist/esm/icons/circle-question-mark.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/dollar-sign.js","../../node_modules/lucide-react/dist/esm/icons/file-pen.js","../../node_modules/lucide-react/dist/esm/icons/film.js","../../node_modules/lucide-react/dist/esm/icons/image.js","../../node_modules/lucide-react/dist/esm/icons/log-out.js","../../node_modules/lucide-react/dist/esm/icons/mail-open.js","../../node_modules/lucide-react/dist/esm/icons/mail.js","../../node_modules/lucide-react/dist/esm/icons/menu.js","../../node_modules/lucide-react/dist/esm/icons/message-square.js","../../node_modules/lucide-react/dist/esm/icons/music.js","../../node_modules/lucide-react/dist/esm/icons/party-popper.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/rotate-ccw.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/shopping-cart.js","../../node_modules/lucide-react/dist/esm/icons/user.js","../../node_modules/lucide-react/dist/esm/icons/users.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../src/hooks/useAuth.ts","../../src/components/LibrarySidebar.tsx","../../src/components/MobileLibraryCard.tsx","../../src/components/MobileLibrary.tsx","../../src/hooks/useMobile.ts","../../src/components/ProtectedRoute.tsx","../../src/components/ErrorBoundary.tsx","../../src/services/notificationService.ts","../../src/hooks/useNotifications.ts","../../src/components/notifications/NotificationItem.tsx","../../src/services/collaborationApi.ts","../../src/components/collaboration/InviteResponseModal.tsx","../../src/components/notifications/NotificationDropdown.tsx","../../src/components/notifications/NotificationBell.tsx","../../src/components/notifications/NotificationToast.tsx","../../src/components/notifications/NotificationToastContainer.tsx","../../src/components/FeedbackModal.tsx","../../src/components/BetaBadge.tsx","../../src/contexts/TourContext.tsx","../../src/components/BetaOnboarding.tsx","../../src/components/legal/Footer.tsx","../../src/components/legal/CookieBanner.tsx","../../src/contexts/CartContext.tsx","../../node_modules/@gilbarbara/deep-equal/dist/index.mjs","../../node_modules/is-lite/dist/index.mjs","../../node_modules/tree-changes/dist/index.mjs","../../node_modules/scroll/index.js","../../node_modules/scrollparent/scrollparent.js","../../node_modules/react-innertext/index.js","../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../node_modules/prop-types/factoryWithThrowingShims.js","../../node_modules/prop-types/index.js","../../node_modules/popper.js/dist/esm/popper.js","../../node_modules/react-floater/node_modules/is-lite/esm/index.js","../../node_modules/react-floater/node_modules/@gilbarbara/deep-equal/esm/helpers.js","../../node_modules/react-floater/node_modules/@gilbarbara/deep-equal/esm/index.js","../../node_modules/react-floater/node_modules/tree-changes/esm/helpers.js","../../node_modules/react-floater/es/index.js","../../node_modules/react-floater/node_modules/tree-changes/esm/index.js","../../node_modules/react-joyride/dist/index.mjs","../../src/components/Tour/tourSteps.ts","../../src/components/Tour/tourStyles.ts","../../src/components/Tour/TourProvider.tsx","../../src/components/Tour/TourMenu.tsx","../../src/components/CartIcon.tsx","../../src/components/SearchAutocomplete.tsx","../../src/App.tsx","../../src/index.tsx"],"sourcesContent":["// Global polyfills for browser runtime (Vite)\nimport { Buffer } from 'buffer';\nimport process from 'process';\nimport { EventEmitter } from 'events';\n\nconst g: any = (typeof globalThis !== 'undefined' ? globalThis : window) as any;\n\n// Polyfill global\nif (!g.global) g.global = g;\n\n// Polyfill Buffer\nif (!g.Buffer) g.Buffer = Buffer;\n\n// Polyfill process with EventEmitter methods\nif (!g.process) {\n  g.process = process;\n}\n\n// Ensure process has EventEmitter methods (for end-of-stream)\nif (g.process && !g.process.on) {\n  const emitter = new EventEmitter();\n  g.process.on = emitter.on.bind(emitter);\n  g.process.once = emitter.once.bind(emitter);\n  g.process.off = emitter.off.bind(emitter);\n  g.process.emit = emitter.emit.bind(emitter);\n  g.process.removeListener = emitter.removeListener.bind(emitter);\n  g.process.removeAllListeners = emitter.removeAllListeners.bind(emitter);\n  g.process.listeners = emitter.listeners.bind(emitter);\n}\n\nif (!g.process.env) g.process.env = {};\n","// API Configuration\n// In development, use empty string to leverage Vite's proxy (same-origin requests)\n// This ensures cookies work correctly regardless of localhost vs 127.0.0.1\n// In production, use the full API URL from environment\nconst isDev = import.meta.env.DEV;\nexport const API_URL = isDev ? '' : (import.meta.env.VITE_API_URL || '');\n\nexport const appConfig = {\n  showTeasers: import.meta.env.VITE_SHOW_TEASERS !== 'false',\n};\n","/**\n * Library API Service\n *\n * Provides functions for accessing user's library and reading progress.\n */\n\nimport { API_URL as API_BASE } from '../config';\n\nexport interface LibraryItem {\n  id: number;\n  title: string;\n  creator: string;\n  thumbnail: string;\n  content_type: string;\n  purchased_at: string;\n  progress: number;\n}\n\nexport interface Library {\n  books: LibraryItem[];\n  art: LibraryItem[];\n  film: LibraryItem[];\n  music: LibraryItem[];\n}\n\nexport interface FullContent {\n  id: number;\n  title: string;\n  content_html: string;\n  creator: string;\n  content_type: string;\n  owned: boolean;\n  teaser_link?: string | null;\n}\n\nexport interface ReadingProgress {\n  id?: number;\n  user?: number;\n  content: number;\n  progress_percentage: number;\n  last_position: string;\n  last_read_at?: string;\n  created_at?: string;\n}\n\n/**\n * Get fresh CSRF token from API\n * This is more reliable than reading from cookies\n */\nasync function getFreshCsrfToken(): Promise<string> {\n  try {\n    const response = await fetch(`${API_BASE}/api/auth/csrf/`, {\n      credentials: 'include',\n    });\n    const data = await response.json();\n    return data?.csrfToken || '';\n  } catch (error) {\n    console.error('Failed to fetch CSRF token:', error);\n    return '';\n  }\n}\n\nexport const libraryApi = {\n  /**\n   * Get user's library grouped by content type\n   */\n  async getLibrary(): Promise<Library> {\n    const response = await fetch(`${API_BASE}/api/library/`, {\n      method: 'GET',\n      credentials: 'include',\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch library: ${response.statusText}`);\n    }\n\n    return response.json();\n  },\n\n  /**\n   * Get full content for owned items\n   */\n  async getFullContent(contentId: number): Promise<FullContent> {\n    const response = await fetch(`${API_BASE}/api/content/${contentId}/full/`, {\n      method: 'GET',\n      credentials: 'include',\n    });\n\n    if (!response.ok) {\n      if (response.status === 403) {\n        throw new Error('You do not own this content');\n      }\n      throw new Error(`Failed to fetch content: ${response.statusText}`);\n    }\n\n    return response.json();\n  },\n\n  /**\n   * Update reading progress for content\n   */\n  async updateProgress(\n    contentId: number,\n    progressPercentage: number,\n    lastPosition: string = ''\n  ): Promise<ReadingProgress> {\n    const csrfToken = await getFreshCsrfToken();\n    const response = await fetch(`${API_BASE}/api/reading-progress/`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': csrfToken,\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      body: JSON.stringify({\n        content_id: contentId,\n        progress_percentage: progressPercentage,\n        last_position: lastPosition,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to update progress: ${response.statusText}`);\n    }\n\n    return response.json();\n  },\n\n  /**\n   * Get reading progress for specific content\n   */\n  async getProgress(contentId: number): Promise<ReadingProgress> {\n    const response = await fetch(`${API_BASE}/api/reading-progress/${contentId}/`, {\n      method: 'GET',\n      credentials: 'include',\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch progress: ${response.statusText}`);\n    }\n\n    return response.json();\n  },\n\n  /**\n   * Get all reading progress for user\n   */\n  async getAllProgress(): Promise<ReadingProgress[]> {\n    const response = await fetch(`${API_BASE}/api/reading-progress/`, {\n      method: 'GET',\n      credentials: 'include',\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch all progress: ${response.statusText}`);\n    }\n\n    return response.json();\n  },\n};\n","import React, { memo } from 'react';\nimport { Link } from 'react-router-dom';\nimport type { LibraryItem } from '../services/libraryApi';\n\ninterface LibraryItemCardProps {\n  item: LibraryItem;\n  onClick?: () => void;\n}\n\nfunction LibraryItemCardComponent({ item, onClick }: LibraryItemCardProps) {\n  const progressPercentage = Math.round(item.progress);\n\n  return (\n    <Link\n      to={`/reader/${item.id}`}\n      className=\"library-item-card\"\n      onClick={onClick}\n      style={{\n        display: 'flex',\n        gap: 12,\n        padding: 12,\n        background: '#0b1220',\n        border: '1px solid #2a3444',\n        borderRadius: 8,\n        textDecoration: 'none',\n        color: 'inherit',\n        transition: 'all 0.2s ease',\n        cursor: 'pointer',\n      }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.background = '#111827';\n        e.currentTarget.style.borderColor = '#374151';\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.background = '#0b1220';\n        e.currentTarget.style.borderColor = '#2a3444';\n      }}\n    >\n      {/* Thumbnail */}\n      <div\n        style={{\n          position: 'relative',\n          width: 80,\n          height: 80,\n          flexShrink: 0,\n          borderRadius: 6,\n          overflow: 'hidden',\n          background: '#0e1320',\n        }}\n      >\n        <img\n          src={item.thumbnail || 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"80\" height=\"80\"%3E%3Crect fill=\"%23111827\" width=\"80\" height=\"80\"/%3E%3Ctext fill=\"%2394a3b8\" font-family=\"sans-serif\" font-size=\"12\" x=\"50%25\" y=\"50%25\" text-anchor=\"middle\" dominant-baseline=\"middle\"%3E%F0%9F%93%96%3C/text%3E%3C/svg%3E'}\n          alt={item.title}\n          style={{\n            width: '100%',\n            height: '100%',\n            objectFit: 'cover',\n          }}\n          onError={(e: React.SyntheticEvent<HTMLImageElement>) => {\n            e.currentTarget.src = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"80\" height=\"80\"%3E%3Crect fill=\"%23111827\" width=\"80\" height=\"80\"/%3E%3Ctext fill=\"%2394a3b8\" font-family=\"sans-serif\" font-size=\"12\" x=\"50%25\" y=\"50%25\" text-anchor=\"middle\" dominant-baseline=\"middle\"%3E%F0%9F%93%96%3C/text%3E%3C/svg%3E';\n          }}\n        />\n        {/* Progress overlay */}\n        {item.progress > 0 && (\n          <div\n            style={{\n              position: 'absolute',\n              bottom: 0,\n              left: 0,\n              right: 0,\n              height: 4,\n              background: 'rgba(0,0,0,0.5)',\n            }}\n          >\n            <div\n              style={{\n                height: '100%',\n                width: `${item.progress}%`,\n                background: '#f59e0b',\n                transition: 'width 0.3s ease',\n              }}\n            />\n          </div>\n        )}\n      </div>\n\n      {/* Content info */}\n      <div\n        style={{\n          flex: 1,\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'space-between',\n          minWidth: 0,\n        }}\n      >\n        <div>\n          <div\n            style={{\n              fontWeight: 600,\n              fontSize: 14,\n              color: '#e5e7eb',\n              marginBottom: 4,\n              overflow: 'hidden',\n              textOverflow: 'ellipsis',\n              whiteSpace: 'nowrap',\n            }}\n          >\n            {item.title}\n          </div>\n          <div\n            style={{\n              fontSize: 12,\n              color: '#94a3b8',\n            }}\n          >\n            {item.creator}\n          </div>\n        </div>\n        <div\n          style={{\n            fontSize: 11,\n            color: '#10b981',\n            fontWeight: 600,\n          }}\n        >\n          {progressPercentage > 0 ? `${progressPercentage}% complete` : 'Not started'}\n        </div>\n      </div>\n    </Link>\n  );\n}\n\nexport const LibraryItemCard = memo(LibraryItemCardComponent);\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n};\n\nexport { hasA11yProp, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses, hasA11yProp } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => createElement(\n    \"svg\",\n    {\n      ref,\n      ...defaultAttributes,\n      width: size,\n      height: size,\n      stroke: color,\n      strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n      className: mergeClasses(\"lucide\", className),\n      ...!children && !hasA11yProp(rest) && { \"aria-hidden\": \"true\" },\n      ...rest\n    },\n    [\n      ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n      ...Array.isArray(children) ? children : [children]\n    ]\n  )\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className\n      ),\n      ...props\n    })\n  );\n  Component.displayName = toPascalCase(iconName);\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10.268 21a2 2 0 0 0 3.464 0\", key: \"vwvbt9\" }],\n  [\n    \"path\",\n    {\n      d: \"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326\",\n      key: \"11g9vi\"\n    }\n  ]\n];\nconst Bell = createLucideIcon(\"bell\", __iconNode);\n\nexport { __iconNode, Bell as default };\n//# sourceMappingURL=bell.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 7v14\", key: \"1akyts\" }],\n  [\n    \"path\",\n    {\n      d: \"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z\",\n      key: \"ruj8y\"\n    }\n  ]\n];\nconst BookOpen = createLucideIcon(\"book-open\", __iconNode);\n\nexport { __iconNode, BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]];\nconst ChevronLeft = createLucideIcon(\"chevron-left\", __iconNode);\n\nexport { __iconNode, ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]];\nconst ChevronRight = createLucideIcon(\"chevron-right\", __iconNode);\n\nexport { __iconNode, ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21.801 10A10 10 0 1 1 17 3.335\", key: \"yps3ct\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n];\nconst CircleCheckBig = createLucideIcon(\"circle-check-big\", __iconNode);\n\nexport { __iconNode, CircleCheckBig as default };\n//# sourceMappingURL=circle-check-big.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n];\nconst CircleQuestionMark = createLucideIcon(\"circle-question-mark\", __iconNode);\n\nexport { __iconNode, CircleQuestionMark as default };\n//# sourceMappingURL=circle-question-mark.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 6v6l4 2\", key: \"mmk7yg\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n];\nconst Clock = createLucideIcon(\"clock\", __iconNode);\n\nexport { __iconNode, Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"22\", key: \"7eqyqh\" }],\n  [\"path\", { d: \"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\", key: \"1b0p4s\" }]\n];\nconst DollarSign = createLucideIcon(\"dollar-sign\", __iconNode);\n\nexport { __iconNode, DollarSign as default };\n//# sourceMappingURL=dollar-sign.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34\",\n      key: \"o6klzx\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }],\n  [\n    \"path\",\n    {\n      d: \"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z\",\n      key: \"zhnas1\"\n    }\n  ]\n];\nconst FilePen = createLucideIcon(\"file-pen\", __iconNode);\n\nexport { __iconNode, FilePen as default };\n//# sourceMappingURL=file-pen.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M7 3v18\", key: \"bbkbws\" }],\n  [\"path\", { d: \"M3 7.5h4\", key: \"zfgn84\" }],\n  [\"path\", { d: \"M3 12h18\", key: \"1i2n21\" }],\n  [\"path\", { d: \"M3 16.5h4\", key: \"1230mu\" }],\n  [\"path\", { d: \"M17 3v18\", key: \"in4fa5\" }],\n  [\"path\", { d: \"M17 7.5h4\", key: \"myr1c1\" }],\n  [\"path\", { d: \"M17 16.5h4\", key: \"go4c1d\" }]\n];\nconst Film = createLucideIcon(\"film\", __iconNode);\n\nexport { __iconNode, Film as default };\n//# sourceMappingURL=film.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", ry: \"2\", key: \"1m3agn\" }],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n];\nconst Image = createLucideIcon(\"image\", __iconNode);\n\nexport { __iconNode, Image as default };\n//# sourceMappingURL=image.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m16 17 5-5-5-5\", key: \"1bji2h\" }],\n  [\"path\", { d: \"M21 12H9\", key: \"dn1m92\" }],\n  [\"path\", { d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\", key: \"1uf3rs\" }]\n];\nconst LogOut = createLucideIcon(\"log-out\", __iconNode);\n\nexport { __iconNode, LogOut as default };\n//# sourceMappingURL=log-out.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z\",\n      key: \"1jhwl8\"\n    }\n  ],\n  [\"path\", { d: \"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10\", key: \"1qfld7\" }]\n];\nconst MailOpen = createLucideIcon(\"mail-open\", __iconNode);\n\nexport { __iconNode, MailOpen as default };\n//# sourceMappingURL=mail-open.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7\", key: \"132q7q\" }],\n  [\"rect\", { x: \"2\", y: \"4\", width: \"20\", height: \"16\", rx: \"2\", key: \"izxlao\" }]\n];\nconst Mail = createLucideIcon(\"mail\", __iconNode);\n\nexport { __iconNode, Mail as default };\n//# sourceMappingURL=mail.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M4 5h16\", key: \"1tepv9\" }],\n  [\"path\", { d: \"M4 12h16\", key: \"1lakjw\" }],\n  [\"path\", { d: \"M4 19h16\", key: \"1djgab\" }]\n];\nconst Menu = createLucideIcon(\"menu\", __iconNode);\n\nexport { __iconNode, Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z\",\n      key: \"18887p\"\n    }\n  ]\n];\nconst MessageSquare = createLucideIcon(\"message-square\", __iconNode);\n\nexport { __iconNode, MessageSquare as default };\n//# sourceMappingURL=message-square.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M9 18V5l12-2v13\", key: \"1jmyc2\" }],\n  [\"circle\", { cx: \"6\", cy: \"18\", r: \"3\", key: \"fqmcym\" }],\n  [\"circle\", { cx: \"18\", cy: \"16\", r: \"3\", key: \"1hluhg\" }]\n];\nconst Music = createLucideIcon(\"music\", __iconNode);\n\nexport { __iconNode, Music as default };\n//# sourceMappingURL=music.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5.8 11.3 2 22l10.7-3.79\", key: \"gwxi1d\" }],\n  [\"path\", { d: \"M4 3h.01\", key: \"1vcuye\" }],\n  [\"path\", { d: \"M22 8h.01\", key: \"1mrtc2\" }],\n  [\"path\", { d: \"M15 2h.01\", key: \"1cjtqr\" }],\n  [\"path\", { d: \"M22 20h.01\", key: \"1mrys2\" }],\n  [\n    \"path\",\n    {\n      d: \"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10\",\n      key: \"hbicv8\"\n    }\n  ],\n  [\n    \"path\",\n    { d: \"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17\", key: \"1i94pl\" }\n  ],\n  [\"path\", { d: \"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7\", key: \"1cofks\" }],\n  [\n    \"path\",\n    {\n      d: \"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z\",\n      key: \"4kbmks\"\n    }\n  ]\n];\nconst PartyPopper = createLucideIcon(\"party-popper\", __iconNode);\n\nexport { __iconNode, PartyPopper as default };\n//# sourceMappingURL=party-popper.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z\",\n      key: \"10ikf1\"\n    }\n  ]\n];\nconst Play = createLucideIcon(\"play\", __iconNode);\n\nexport { __iconNode, Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n];\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", __iconNode);\n\nexport { __iconNode, RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m21 21-4.34-4.34\", key: \"14j7rj\" }],\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }]\n];\nconst Search = createLucideIcon(\"search\", __iconNode);\n\nexport { __iconNode, Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"8\", cy: \"21\", r: \"1\", key: \"jimo8o\" }],\n  [\"circle\", { cx: \"19\", cy: \"21\", r: \"1\", key: \"13723u\" }],\n  [\n    \"path\",\n    {\n      d: \"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12\",\n      key: \"9zh506\"\n    }\n  ]\n];\nconst ShoppingCart = createLucideIcon(\"shopping-cart\", __iconNode);\n\nexport { __iconNode, ShoppingCart as default };\n//# sourceMappingURL=shopping-cart.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n];\nconst User = createLucideIcon(\"user\", __iconNode);\n\nexport { __iconNode, User as default };\n//# sourceMappingURL=user.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"path\", { d: \"M16 3.128a4 4 0 0 1 0 7.744\", key: \"16gr8j\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }]\n];\nconst Users = createLucideIcon(\"users\", __iconNode);\n\nexport { __iconNode, Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n];\nconst X = createLucideIcon(\"x\", __iconNode);\n\nexport { __iconNode, X as default };\n//# sourceMappingURL=x.js.map\n","import { useState, useEffect, useCallback } from 'react';\nimport { API_URL } from '../config';\n\n/**\n * Authentication hook\n *\n * Provides authentication state and methods for the entire app.\n * Checks auth status on mount and provides loading state.\n */\n\ninterface User {\n  id: number;\n  username: string;\n  email?: string;\n  display_name?: string;\n  avatar?: string;\n}\n\ninterface AuthState {\n  user: User | null;\n  loading: boolean;\n  isAuthenticated: boolean;\n}\n\nexport const useAuth = () => {\n  const [authState, setAuthState] = useState<AuthState>({\n    user: null,\n    loading: true,\n    isAuthenticated: false,\n  });\n\n  const checkAuth = useCallback(async () => {\n    try {\n      const response = await fetch(`${API_URL}/api/auth/status/`, {\n        credentials: 'include',\n      });\n\n      if (!response.ok) {\n        setAuthState({\n          user: null,\n          loading: false,\n          isAuthenticated: false,\n        });\n        return;\n      }\n\n      const data = await response.json();\n\n      if (data?.authenticated && data?.user) {\n        setAuthState({\n          user: data.user,\n          loading: false,\n          isAuthenticated: true,\n        });\n      } else {\n        setAuthState({\n          user: null,\n          loading: false,\n          isAuthenticated: false,\n        });\n      }\n    } catch (error) {\n      console.error('[useAuth] Auth check failed:', error);\n      setAuthState({\n        user: null,\n        loading: false,\n        isAuthenticated: false,\n      });\n    }\n  }, []);\n\n  const logout = useCallback(async () => {\n    try {\n      // Get CSRF token\n      const csrfResponse = await fetch(`${API_URL}/api/auth/csrf/`, {\n        credentials: 'include',\n      });\n      const csrfData = await csrfResponse.json();\n      const csrfToken = csrfData?.csrfToken || '';\n\n      // Logout\n      await fetch(`${API_URL}/api/auth/logout/`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'X-CSRFToken': csrfToken,\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n      });\n\n      // Update state\n      setAuthState({\n        user: null,\n        loading: false,\n        isAuthenticated: false,\n      });\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  }, []);\n\n  const refreshAuth = useCallback(() => {\n    setAuthState(prev => ({ ...prev, loading: true }));\n    checkAuth();\n  }, [checkAuth]);\n\n  useEffect(() => {\n    checkAuth();\n  }, [checkAuth]);\n\n  return {\n    user: authState.user,\n    loading: authState.loading,\n    isAuthenticated: authState.isAuthenticated,\n    logout,\n    refreshAuth,\n  };\n};\n\nexport default useAuth;\n","import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { libraryApi, type Library } from '../services/libraryApi';\nimport { LibraryItemCard } from './LibraryItemCard';\nimport { ChevronRight, ChevronLeft } from 'lucide-react';\nimport { useAuth } from '../hooks/useAuth';\n\nexport function LibrarySidebar() {\n  const [library, setLibrary] = useState<Library | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [selectedTab, setSelectedTab] = useState<keyof Library>('books');\n  const { isAuthenticated } = useAuth();\n\n  useEffect(() => {\n    // Only load library if user is authenticated\n    if (isAuthenticated) {\n      loadLibrary();\n    } else {\n      // Reset state if user is not authenticated\n      setLibrary(null);\n      setLoading(false);\n      setError(null);\n    }\n  }, [isAuthenticated]);\n\n  const loadLibrary = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await libraryApi.getLibrary();\n      setLibrary(data);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load library');\n      console.error('Library load error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Don't render anything if not authenticated\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  if (!isExpanded) {\n    return (\n      <div\n        style={{\n          position: 'fixed',\n          left: 0,\n          top: 72,\n          bottom: 0,\n          width: 48,\n          background: '#0b1220',\n          borderRight: '1px solid #2a3444',\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          padding: '12px 0',\n          zIndex: 40,\n        }}\n      >\n        <button\n          onClick={() => setIsExpanded(true)}\n          style={{\n            background: 'transparent',\n            border: 'none',\n            color: '#94a3b8',\n            cursor: 'pointer',\n            padding: 8,\n            borderRadius: 8,\n            transition: 'all 0.2s ease',\n          }}\n          onMouseEnter={(e) => {\n            e.currentTarget.style.background = '#111827';\n            e.currentTarget.style.color = '#e5e7eb';\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.background = 'transparent';\n            e.currentTarget.style.color = '#94a3b8';\n          }}\n          aria-label=\"Expand library\"\n        >\n          <ChevronRight size={20} />\n        </button>\n        <div\n          style={{\n            writingMode: 'vertical-rl',\n            fontSize: 12,\n            fontWeight: 600,\n            color: '#94a3b8',\n            marginTop: 16,\n          }}\n        >\n          LIBRARY\n        </div>\n      </div>\n    );\n  }\n\n  const totalItems = library\n    ? Object.values(library).reduce((sum, items) => sum + items.length, 0)\n    : 0;\n\n  const currentItems = library?.[selectedTab] || [];\n\n  return (\n    <div\n      data-tour=\"library-sidebar\"\n      style={{\n        position: 'fixed',\n        left: 0,\n        top: 72,\n        bottom: 0,\n        width: 320,\n        background: '#0b1220',\n        borderRight: '1px solid #2a3444',\n        display: 'flex',\n        flexDirection: 'column',\n        zIndex: 40,\n        transition: 'width 0.3s ease',\n      }}\n    >\n      {/* Header */}\n      <div\n        style={{\n          padding: 16,\n          borderBottom: '1px solid #2a3444',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n        }}\n      >\n        <div>\n          <div\n            style={{\n              fontSize: 16,\n              fontWeight: 700,\n              color: '#e5e7eb',\n            }}\n          >\n            My Library\n          </div>\n          <div\n            style={{\n              fontSize: 12,\n              color: '#94a3b8',\n              marginTop: 2,\n            }}\n          >\n            {totalItems} {totalItems === 1 ? 'item' : 'items'}\n          </div>\n        </div>\n        <button\n          onClick={() => setIsExpanded(false)}\n          style={{\n            background: 'transparent',\n            border: 'none',\n            color: '#94a3b8',\n            cursor: 'pointer',\n            padding: 8,\n            borderRadius: 8,\n            transition: 'all 0.2s ease',\n          }}\n          onMouseEnter={(e) => {\n            e.currentTarget.style.background = '#111827';\n            e.currentTarget.style.color = '#e5e7eb';\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.background = 'transparent';\n            e.currentTarget.style.color = '#94a3b8';\n          }}\n          aria-label=\"Collapse library\"\n        >\n          <ChevronLeft size={20} />\n        </button>\n      </div>\n\n      {/* Tabs */}\n      <div\n        data-tour=\"library-tabs\"\n        style={{\n          display: 'flex',\n          gap: 4,\n          padding: '12px 16px',\n          borderBottom: '1px solid #2a3444',\n          overflowX: 'auto',\n        }}\n      >\n        {(['books', 'art'] as const).map((tab) => {\n          const count = library?.[tab]?.length || 0;\n          const isActive = selectedTab === tab;\n          return (\n            <button\n              key={tab}\n              onClick={() => setSelectedTab(tab)}\n              style={{\n                background: isActive ? '#f59e0b' : '#111827',\n                border: '1px solid',\n                borderColor: isActive ? '#f59e0b' : '#2a3444',\n                color: isActive ? '#111827' : '#cbd5e1',\n                padding: '6px 12px',\n                borderRadius: 18,\n                fontSize: 12,\n                fontWeight: 600,\n                cursor: 'pointer',\n                whiteSpace: 'nowrap',\n                transition: 'all 0.2s ease',\n              }}\n              onMouseEnter={(e) => {\n                if (!isActive) {\n                  e.currentTarget.style.background = '#1f2937';\n                  e.currentTarget.style.borderColor = '#374151';\n                }\n              }}\n              onMouseLeave={(e) => {\n                if (!isActive) {\n                  e.currentTarget.style.background = '#111827';\n                  e.currentTarget.style.borderColor = '#2a3444';\n                }\n              }}\n            >\n              {tab.charAt(0).toUpperCase() + tab.slice(1)} ({count})\n            </button>\n          );\n        })}\n        {/* Coming Soon tabs */}\n        {(['film', 'music'] as const).map((tab) => (\n          <button\n            key={tab}\n            disabled\n            style={{\n              background: '#111827',\n              border: '1px solid #2a3444',\n              color: '#64748b',\n              padding: '6px 12px',\n              borderRadius: 18,\n              fontSize: 12,\n              fontWeight: 600,\n              cursor: 'not-allowed',\n              whiteSpace: 'nowrap',\n              opacity: 0.5,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 4,\n            }}\n          >\n            {tab.charAt(0).toUpperCase() + tab.slice(1)}\n            <span style={{\n              fontSize: 8,\n              background: '#f59e0b',\n              color: '#000',\n              padding: '1px 3px',\n              borderRadius: 2,\n              fontWeight: 700,\n            }}>\n              SOON\n            </span>\n          </button>\n        ))}\n      </div>\n\n      {/* Content */}\n      <div\n        style={{\n          flex: 1,\n          overflowY: 'auto',\n          padding: 16,\n        }}\n      >\n        {loading && (\n          <div\n            style={{\n              textAlign: 'center',\n              padding: 32,\n              color: '#94a3b8',\n              fontSize: 14,\n            }}\n          >\n            Loading library...\n          </div>\n        )}\n\n        {error && (\n          <div\n            style={{\n              background: '#ef444420',\n              border: '1px solid #ef4444',\n              borderRadius: 8,\n              padding: 16,\n              color: '#fca5a5',\n              fontSize: 14,\n            }}\n          >\n            {error}\n            <button\n              onClick={loadLibrary}\n              style={{\n                marginTop: 8,\n                background: '#ef4444',\n                color: '#fff',\n                padding: '6px 12px',\n                fontSize: 12,\n              }}\n            >\n              Retry\n            </button>\n          </div>\n        )}\n\n        {!loading && !error && currentItems.length === 0 && (\n          <div\n            style={{\n              textAlign: 'center',\n              padding: 32,\n              color: '#94a3b8',\n              fontSize: 14,\n            }}\n          >\n            No {selectedTab} in your library yet.\n          </div>\n        )}\n\n        {!loading && !error && currentItems.length > 0 && (\n          <div style={{ display: 'flex', flexDirection: 'column', gap: 12 }}>\n            {currentItems.map((item, index) => (\n              <div key={item.id} data-tour={index === 0 ? 'library-item' : undefined}>\n                <LibraryItemCard item={item} />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Footer Links - YouTube style */}\n      <div\n        style={{\n          padding: '12px 16px',\n          borderTop: '1px solid #2a3444',\n          flexShrink: 0,\n        }}\n      >\n        {/* Legal Links Row */}\n        <div\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            gap: '6px 12px',\n            marginBottom: 8,\n          }}\n        >\n          <Link to=\"/legal/terms\" style={footerLinkStyle}>Terms</Link>\n          <Link to=\"/legal/privacy\" style={footerLinkStyle}>Privacy</Link>\n          <Link to=\"/legal/content-policy\" style={footerLinkStyle}>Content Policy</Link>\n          <Link to=\"/legal/dmca\" style={footerLinkStyle}>DMCA</Link>\n        </div>\n        {/* Support Links Row */}\n        <div\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            gap: '6px 12px',\n            marginBottom: 10,\n          }}\n        >\n          <a href=\"mailto:support@renaissblock.com\" style={footerLinkStyle}>Contact</a>\n          <a href=\"mailto:dmca@renaissblock.com\" style={footerLinkStyle}>Report Copyright</a>\n        </div>\n        {/* Copyright */}\n        <div\n          style={{\n            fontSize: 11,\n            color: '#64748b',\n          }}\n        >\n           {new Date().getFullYear()} renaissBlock\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst footerLinkStyle: React.CSSProperties = {\n  fontSize: 11,\n  color: '#64748b',\n  textDecoration: 'none',\n  transition: 'color 0.2s',\n};\n// Add hover effect via onMouseEnter/Leave in the JSX or use CSS classes\n","import React, { memo } from 'react';\nimport { Link } from 'react-router-dom';\nimport type { LibraryItem } from '../services/libraryApi';\n\ninterface MobileLibraryCardProps {\n  item: LibraryItem;\n}\n\nfunction MobileLibraryCardComponent({ item }: MobileLibraryCardProps) {\n  const progressPercentage = Math.round(item.progress);\n  const placeholderSvg = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\"%3E%3Crect fill=\"%23111827\" width=\"200\" height=\"200\"/%3E%3Ctext fill=\"%2394a3b8\" font-family=\"sans-serif\" font-size=\"48\" x=\"50%25\" y=\"50%25\" text-anchor=\"middle\" dominant-baseline=\"middle\"%3E%F0%9F%93%96%3C/text%3E%3C/svg%3E';\n\n  return (\n    <Link\n      to={`/reader/${item.id}`}\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        background: '#0b1220',\n        border: '1px solid #2a3444',\n        borderRadius: 12,\n        overflow: 'hidden',\n        textDecoration: 'none',\n        color: 'inherit',\n        transition: 'transform 0.2s ease, box-shadow 0.2s ease',\n      }}\n    >\n      {/* Square thumbnail with progress overlay */}\n      <div\n        style={{\n          position: 'relative',\n          aspectRatio: '1',\n          background: '#0e1320',\n        }}\n      >\n        <img\n          src={item.thumbnail || placeholderSvg}\n          alt={item.title}\n          style={{\n            width: '100%',\n            height: '100%',\n            objectFit: 'cover',\n          }}\n          onError={(e: React.SyntheticEvent<HTMLImageElement>) => {\n            e.currentTarget.src = placeholderSvg;\n          }}\n        />\n        {/* Progress bar at bottom of thumbnail */}\n        {item.progress > 0 && (\n          <div\n            style={{\n              position: 'absolute',\n              bottom: 0,\n              left: 0,\n              right: 0,\n              height: 4,\n              background: 'rgba(0,0,0,0.6)',\n            }}\n          >\n            <div\n              style={{\n                height: '100%',\n                width: `${item.progress}%`,\n                background: '#f59e0b',\n                transition: 'width 0.3s ease',\n              }}\n            />\n          </div>\n        )}\n      </div>\n\n      {/* Title and progress info */}\n      <div style={{ padding: 10 }}>\n        <div\n          style={{\n            fontWeight: 600,\n            fontSize: 13,\n            color: '#e5e7eb',\n            marginBottom: 4,\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n            whiteSpace: 'nowrap',\n          }}\n        >\n          {item.title}\n        </div>\n        <div\n          style={{\n            fontSize: 11,\n            color: '#94a3b8',\n            marginBottom: 4,\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n            whiteSpace: 'nowrap',\n          }}\n        >\n          {item.creator}\n        </div>\n        <div\n          style={{\n            fontSize: 11,\n            color: progressPercentage > 0 ? '#10b981' : '#64748b',\n            fontWeight: 500,\n          }}\n        >\n          {progressPercentage > 0 ? `${progressPercentage}%` : 'New'}\n        </div>\n      </div>\n    </Link>\n  );\n}\n\nexport const MobileLibraryCard = memo(MobileLibraryCardComponent);\n","import React, { useState, useEffect } from 'react';\nimport { libraryApi, type Library } from '../services/libraryApi';\nimport { MobileLibraryCard } from './MobileLibraryCard';\nimport { BookOpen, Image, Film, Music } from 'lucide-react';\nimport { useAuth } from '../hooks/useAuth';\n\nconst TAB_ICONS = {\n  books: BookOpen,\n  art: Image,\n  film: Film,\n  music: Music,\n};\n\nexport function MobileLibrary() {\n  const [library, setLibrary] = useState<Library | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedTab, setSelectedTab] = useState<keyof Library>('books');\n  const { isAuthenticated } = useAuth();\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadLibrary();\n    } else {\n      setLibrary(null);\n      setLoading(false);\n      setError(null);\n    }\n  }, [isAuthenticated]);\n\n  const loadLibrary = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await libraryApi.getLibrary();\n      setLibrary(data);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load library');\n      console.error('Library load error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  const totalItems = library\n    ? Object.values(library).reduce((sum, items) => sum + items.length, 0)\n    : 0;\n\n  const currentItems = library?.[selectedTab] || [];\n\n  // If library is empty, don't show the section\n  if (!loading && !error && totalItems === 0) {\n    return null;\n  }\n\n  return (\n    <div\n      style={{\n        background: '#0a0f1a',\n        padding: '20px 16px',\n        marginBottom: 16,\n      }}\n    >\n      {/* Header */}\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: 16,\n        }}\n      >\n        <div>\n          <h2\n            style={{\n              fontSize: 18,\n              fontWeight: 700,\n              color: '#e5e7eb',\n              margin: 0,\n            }}\n          >\n            My Library\n          </h2>\n          <div\n            style={{\n              fontSize: 13,\n              color: '#94a3b8',\n              marginTop: 2,\n            }}\n          >\n            {totalItems} {totalItems === 1 ? 'item' : 'items'}\n          </div>\n        </div>\n      </div>\n\n      {/* Horizontal scrollable tabs */}\n      <div\n        style={{\n          display: 'flex',\n          gap: 8,\n          overflowX: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          paddingBottom: 8,\n          marginBottom: 16,\n          scrollbarWidth: 'none',\n          msOverflowStyle: 'none',\n        }}\n      >\n        {(['books', 'art', 'film', 'music'] as const).map((tab) => {\n          const count = library?.[tab]?.length || 0;\n          const isActive = selectedTab === tab;\n          const Icon = TAB_ICONS[tab];\n\n          return (\n            <button\n              key={tab}\n              onClick={() => setSelectedTab(tab)}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 6,\n                background: isActive ? '#f59e0b' : '#111827',\n                border: '1px solid',\n                borderColor: isActive ? '#f59e0b' : '#2a3444',\n                color: isActive ? '#111827' : '#cbd5e1',\n                padding: '10px 16px',\n                borderRadius: 20,\n                fontSize: 13,\n                fontWeight: 600,\n                cursor: 'pointer',\n                whiteSpace: 'nowrap',\n                flexShrink: 0,\n                transition: 'all 0.2s ease',\n              }}\n            >\n              <Icon size={16} />\n              {tab.charAt(0).toUpperCase() + tab.slice(1)}\n              <span\n                style={{\n                  background: isActive ? 'rgba(0,0,0,0.2)' : '#2a3444',\n                  padding: '2px 8px',\n                  borderRadius: 10,\n                  fontSize: 11,\n                }}\n              >\n                {count}\n              </span>\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Content */}\n      {loading && (\n        <div\n          style={{\n            textAlign: 'center',\n            padding: 32,\n            color: '#94a3b8',\n            fontSize: 14,\n          }}\n        >\n          Loading library...\n        </div>\n      )}\n\n      {error && (\n        <div\n          style={{\n            background: '#ef444420',\n            border: '1px solid #ef4444',\n            borderRadius: 12,\n            padding: 16,\n            color: '#fca5a5',\n            fontSize: 14,\n          }}\n        >\n          {error}\n          <button\n            onClick={loadLibrary}\n            style={{\n              marginTop: 8,\n              display: 'block',\n              background: '#ef4444',\n              color: '#fff',\n              border: 'none',\n              padding: '8px 16px',\n              borderRadius: 8,\n              fontSize: 13,\n              fontWeight: 600,\n              cursor: 'pointer',\n            }}\n          >\n            Retry\n          </button>\n        </div>\n      )}\n\n      {!loading && !error && currentItems.length === 0 && (\n        <div\n          style={{\n            textAlign: 'center',\n            padding: 32,\n            color: '#94a3b8',\n            fontSize: 14,\n          }}\n        >\n          No {selectedTab} in your library yet.\n        </div>\n      )}\n\n      {!loading && !error && currentItems.length > 0 && (\n        <div\n          style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(2, 1fr)',\n            gap: 12,\n          }}\n        >\n          {currentItems.map((item) => (\n            <MobileLibraryCard key={item.id} item={item} />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\n\nexport interface MobileState {\n  isMobile: boolean;      // <= 768px\n  isPhone: boolean;       // <= 480px\n  isTablet: boolean;      // 481px - 768px\n  isDesktop: boolean;     // > 768px\n  screenWidth: number;\n}\n\nfunction getState(): MobileState {\n  const width = typeof window !== 'undefined' ? window.innerWidth : 1024;\n  return {\n    isMobile: width <= 768,\n    isPhone: width <= 480,\n    isTablet: width > 480 && width <= 768,\n    isDesktop: width > 768,\n    screenWidth: width,\n  };\n}\n\nexport function useMobile(): MobileState {\n  const [state, setState] = useState<MobileState>(getState);\n\n  useEffect(() => {\n    const handleResize = () => setState(getState());\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return state;\n}\n","import React, { useEffect, useState } from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { API_URL } from '../config';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport default function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean | null>(null);\n  const location = useLocation();\n\n  useEffect(() => {\n    checkAuth();\n  }, []);\n\n  const checkAuth = async () => {\n    try {\n      const response = await fetch(`${API_URL}/api/auth/status/`, { credentials: 'include' });\n      const data = await response.json();\n      setIsAuthenticated(!!data?.authenticated);\n    } catch {\n      setIsAuthenticated(false);\n    }\n  };\n\n  // Loading state\n  if (isAuthenticated === null) {\n    return (\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '60vh',\n        color: '#94a3b8',\n        fontSize: 16,\n      }}>\n        Checking authentication...\n      </div>\n    );\n  }\n\n  // Not authenticated - redirect to auth page\n  if (!isAuthenticated) {\n    return <Navigate to=\"/auth\" state={{ from: location }} replace />;\n  }\n\n  // Authenticated - render children\n  return <>{children}</>;\n}\n","import React, { Component, ErrorInfo, ReactNode } from 'react';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n}\n\n/**\n * Error Boundary component to catch and handle React errors gracefully.\n * Prevents the entire app from crashing when a component throws an error.\n */\nclass ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n  }\n\n  handleRetry = (): void => {\n    this.setState({ hasError: false, error: null });\n  };\n\n  render(): ReactNode {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      return (\n        <div style={{\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          minHeight: '200px',\n          padding: '40px',\n          textAlign: 'center',\n          color: 'var(--text, #e5e7eb)',\n        }}>\n          <h2 style={{ marginBottom: '16px', color: 'var(--text, #e5e7eb)' }}>\n            Something went wrong\n          </h2>\n          <p style={{ marginBottom: '24px', color: 'var(--text-muted, #94a3b8)' }}>\n            An error occurred while loading this section.\n          </p>\n          <button\n            onClick={this.handleRetry}\n            style={{\n              padding: '10px 24px',\n              background: 'var(--accent, #f59e0b)',\n              color: '#111',\n              border: 'none',\n              borderRadius: '8px',\n              cursor: 'pointer',\n              fontWeight: 600,\n            }}\n          >\n            Try Again\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","/**\n * Real-time Notification Service\n * Handles collaboration notifications, activity tracking, and real-time updates\n */\n\nimport { API_URL } from '../config';\n\n// ============================================================================\n// TypeScript Interfaces\n// ============================================================================\n\nexport type NotificationType =\n  | 'invitation'\n  | 'invitation_response'\n  | 'comment'\n  | 'approval'\n  | 'section_update'\n  | 'revenue_proposal'\n  | 'mint_ready';\n\nexport interface NotificationUser {\n  id: number;\n  username: string;\n  avatar?: string;\n}\n\nexport interface Notification {\n  id: number;\n  type: NotificationType;\n  title: string;\n  message: string;\n  project_id?: number;\n  from_user: NotificationUser;\n  created_at: string;\n  read: boolean;\n  action_url?: string;\n}\n\nexport interface NotificationStats {\n  total: number;\n  unread: number;\n  by_type: Record<NotificationType, number>;\n}\n\n// ============================================================================\n// Event System for Real-time Updates\n// ============================================================================\n\ntype NotificationEventHandler = (data: any) => void;\n\nclass NotificationEventEmitter {\n  private listeners: Map<string, Set<NotificationEventHandler>> = new Map();\n\n  on(event: string, handler: NotificationEventHandler): () => void {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, new Set());\n    }\n    this.listeners.get(event)!.add(handler);\n\n    // Return unsubscribe function\n    return () => this.off(event, handler);\n  }\n\n  off(event: string, handler: NotificationEventHandler): void {\n    const handlers = this.listeners.get(event);\n    if (handlers) {\n      handlers.delete(handler);\n    }\n  }\n\n  emit(event: string, data: any): void {\n    const handlers = this.listeners.get(event);\n    if (handlers) {\n      handlers.forEach(handler => {\n        try {\n          handler(data);\n        } catch (error) {\n          console.error(`Error in notification event handler for ${event}:`, error);\n        }\n      });\n    }\n  }\n\n  clear(): void {\n    this.listeners.clear();\n  }\n}\n\n// ============================================================================\n// Local State Management\n// ============================================================================\n\ninterface NotificationState {\n  notifications: Notification[];\n  unreadCount: number;\n  lastChecked: Date | null;\n  isPolling: boolean;\n  lastError: Error | null;\n  knownNotificationIds: Set<number>; // Track IDs of notifications we've seen\n  initialLoadComplete: boolean; // Prevent toast spam on first load\n}\n\nconst state: NotificationState = {\n  notifications: [],\n  unreadCount: 0,\n  lastChecked: null,\n  isPolling: false,\n  lastError: null,\n  knownNotificationIds: new Set(),\n  initialLoadComplete: false,\n};\n\n// ============================================================================\n// Configuration\n// ============================================================================\n\nconst CONFIG = {\n  POLLING_INTERVAL: 30000, // 30 seconds\n  MAX_RETRIES: 3,\n  RETRY_DELAY: 5000, // 5 seconds\n  REQUEST_TIMEOUT: 10000, // 10 seconds\n};\n\n// ============================================================================\n// API Helper Functions\n// ============================================================================\n\nasync function getCsrfToken(): Promise<string> {\n  try {\n    const response = await fetch(`${API_URL}/api/auth/csrf/`, { credentials: 'include' });\n    const data = await response.json();\n    return data?.csrfToken || '';\n  } catch (error) {\n    console.error('Failed to get CSRF token:', error);\n    return '';\n  }\n}\n\nasync function apiRequest<T>(\n  url: string,\n  options: RequestInit = {}\n): Promise<T> {\n  // Prepend API_URL if url is relative (starts with /)\n  const fullUrl = url.startsWith('/') ? `${API_URL}${url}` : url;\n\n  const response = await fetch(fullUrl, {\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers,\n    },\n    ...options,\n  });\n\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData?.error || `API request failed: ${response.status}`);\n  }\n\n  return response.json();\n}\n\n// ============================================================================\n// Core API Functions\n// ============================================================================\n\n/**\n * Fetch all notifications for the current user\n */\nexport async function getNotifications(): Promise<Notification[]> {\n  try {\n    const notifications = await apiRequest<Notification[]>('/api/notifications/');\n    state.notifications = notifications;\n    state.unreadCount = notifications.filter(n => !n.read).length;\n    state.lastChecked = new Date();\n    state.lastError = null;\n\n    // Track known notification IDs (for detecting truly new notifications)\n    notifications.forEach(n => state.knownNotificationIds.add(n.id));\n\n    events.emit('notifications:updated', { notifications, unreadCount: state.unreadCount });\n\n    return notifications;\n  } catch (error) {\n    state.lastError = error as Error;\n    console.error('Failed to fetch notifications:', error);\n    throw error;\n  }\n}\n\n/**\n * Get only unread notifications\n */\nexport async function getUnreadNotifications(): Promise<Notification[]> {\n  const allNotifications = await getNotifications();\n  return allNotifications.filter(n => !n.read);\n}\n\n/**\n * Get unread notification count\n */\nexport async function getUnreadCount(): Promise<number> {\n  try {\n    const notifications = await getNotifications();\n    const count = notifications.filter(n => !n.read).length;\n    state.unreadCount = count;\n\n    events.emit('notifications:unread-count', { count });\n\n    return count;\n  } catch (error) {\n    console.error('Failed to get unread count:', error);\n    return state.unreadCount; // Return cached count on error\n  }\n}\n\n/**\n * Mark a single notification as read\n */\nexport async function markNotificationRead(notificationId: number): Promise<void> {\n  try {\n    const csrfToken = await getCsrfToken();\n\n    await apiRequest(`/api/notifications/${notificationId}/mark-read/`, {\n      method: 'POST',\n      headers: {\n        'X-CSRFToken': csrfToken,\n      },\n    });\n\n    // Update local state\n    const notification = state.notifications.find(n => n.id === notificationId);\n    if (notification && !notification.read) {\n      notification.read = true;\n      state.unreadCount = Math.max(0, state.unreadCount - 1);\n\n      events.emit('notifications:updated', {\n        notifications: state.notifications,\n        unreadCount: state.unreadCount\n      });\n      events.emit('notifications:unread-count', { count: state.unreadCount });\n    }\n  } catch (error) {\n    console.error('Failed to mark notification as read:', error);\n    throw error;\n  }\n}\n\n/**\n * Mark all notifications as read\n */\nexport async function markAllNotificationsRead(): Promise<void> {\n  try {\n    const csrfToken = await getCsrfToken();\n\n    await apiRequest('/api/notifications/mark-all-read/', {\n      method: 'POST',\n      headers: {\n        'X-CSRFToken': csrfToken,\n      },\n    });\n\n    // Update local state\n    state.notifications.forEach(n => n.read = true);\n    state.unreadCount = 0;\n\n    events.emit('notifications:updated', {\n      notifications: state.notifications,\n      unreadCount: 0\n    });\n    events.emit('notifications:unread-count', { count: 0 });\n  } catch (error) {\n    console.error('Failed to mark all notifications as read:', error);\n    throw error;\n  }\n}\n\n/**\n * Delete a notification\n */\nexport async function deleteNotification(notificationId: number): Promise<void> {\n  // Helper to update local state after delete\n  const removeFromLocalState = () => {\n    const index = state.notifications.findIndex(n => n.id === notificationId);\n    if (index !== -1) {\n      const wasUnread = !state.notifications[index].read;\n      state.notifications.splice(index, 1);\n\n      if (wasUnread) {\n        state.unreadCount = Math.max(0, state.unreadCount - 1);\n      }\n\n      // Also remove from known IDs\n      state.knownNotificationIds.delete(notificationId);\n\n      events.emit('notifications:updated', {\n        notifications: state.notifications,\n        unreadCount: state.unreadCount\n      });\n      events.emit('notifications:unread-count', { count: state.unreadCount });\n    }\n  };\n\n  try {\n    const csrfToken = await getCsrfToken();\n\n    const fullUrl = `${API_URL}/api/notifications/${notificationId}/`;\n    const response = await fetch(fullUrl, {\n      method: 'DELETE',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': csrfToken,\n      },\n    });\n\n    // Handle 404 gracefully - notification doesn't exist or already deleted\n    // Still remove from local state since it's effectively \"gone\"\n    if (response.status === 404) {\n      console.warn(`Notification ${notificationId} not found on server, removing from local state`);\n      removeFromLocalState();\n      return;\n    }\n\n    if (!response.ok) {\n      throw new Error(`Failed to delete notification: ${response.status}`);\n    }\n\n    // Successfully deleted - update local state\n    removeFromLocalState();\n  } catch (error) {\n    console.error('Failed to delete notification:', error);\n    // On network error, still try to remove from local state for better UX\n    removeFromLocalState();\n    throw error;\n  }\n}\n\n/**\n * Get notification statistics\n */\nexport async function getNotificationStats(): Promise<NotificationStats> {\n  const notifications = await getNotifications();\n\n  const stats: NotificationStats = {\n    total: notifications.length,\n    unread: notifications.filter(n => !n.read).length,\n    by_type: {\n      invitation: 0,\n      invitation_response: 0,\n      comment: 0,\n      approval: 0,\n      section_update: 0,\n      revenue_proposal: 0,\n      mint_ready: 0,\n    },\n  };\n\n  notifications.forEach(n => {\n    stats.by_type[n.type] = (stats.by_type[n.type] || 0) + 1;\n  });\n\n  return stats;\n}\n\n// ============================================================================\n// Real-time Polling System\n// ============================================================================\n\nlet pollingInterval: NodeJS.Timeout | null = null;\nlet retryCount = 0;\nlet retryTimeout: NodeJS.Timeout | null = null;\n\n/**\n * Poll for new notifications\n */\nasync function pollNotifications(): Promise<void> {\n  if (!state.isPolling) return;\n\n  try {\n    // Store IDs of previously known notifications before fetching\n    const previouslyKnownIds = new Set(state.knownNotificationIds);\n\n    await getNotifications();\n\n    // Only emit 'notifications:new' after initial load is complete\n    // This prevents a flood of toasts when the page first loads\n    if (state.initialLoadComplete) {\n      // Find truly NEW notifications (IDs we haven't seen before)\n      const newNotifications = state.notifications.filter(\n        n => !previouslyKnownIds.has(n.id) && !n.read\n      );\n\n      if (newNotifications.length > 0) {\n        events.emit('notifications:new', {\n          notifications: newNotifications,\n          count: newNotifications.length\n        });\n      }\n    } else {\n      // Mark initial load as complete after first successful fetch\n      state.initialLoadComplete = true;\n    }\n\n    // Reset retry count on success\n    retryCount = 0;\n  } catch (error) {\n    console.error('Polling error:', error);\n    retryCount++;\n\n    if (retryCount >= CONFIG.MAX_RETRIES) {\n      console.error('Max retries reached, stopping polling');\n      stopPolling();\n      events.emit('notifications:polling-error', { error, retryCount });\n    } else {\n      // Schedule retry\n      if (retryTimeout) clearTimeout(retryTimeout);\n      retryTimeout = setTimeout(() => {\n        pollNotifications();\n      }, CONFIG.RETRY_DELAY);\n    }\n  }\n}\n\n/**\n * Start polling for notifications\n */\nexport function startPolling(): void {\n  if (state.isPolling) {\n    console.warn('Notification polling already started');\n    return;\n  }\n\n  console.log('Starting notification polling...');\n  state.isPolling = true;\n  retryCount = 0;\n\n  // Initial fetch\n  pollNotifications();\n\n  // Set up polling interval\n  pollingInterval = setInterval(pollNotifications, CONFIG.POLLING_INTERVAL);\n\n  events.emit('notifications:polling-started', {});\n}\n\n/**\n * Stop polling for notifications\n */\nexport function stopPolling(): void {\n  if (!state.isPolling) {\n    return;\n  }\n\n  console.log('Stopping notification polling...');\n  state.isPolling = false;\n\n  if (pollingInterval) {\n    clearInterval(pollingInterval);\n    pollingInterval = null;\n  }\n\n  if (retryTimeout) {\n    clearTimeout(retryTimeout);\n    retryTimeout = null;\n  }\n\n  events.emit('notifications:polling-stopped', {});\n}\n\n/**\n * Check if polling is active\n */\nexport function isPolling(): boolean {\n  return state.isPolling;\n}\n\n/**\n * Update polling interval\n */\nexport function setPollingInterval(intervalMs: number): void {\n  CONFIG.POLLING_INTERVAL = intervalMs;\n\n  if (state.isPolling) {\n    stopPolling();\n    startPolling();\n  }\n}\n\n// ============================================================================\n// Event System Export\n// ============================================================================\n\nexport const events = new NotificationEventEmitter();\n\n/**\n * Available events:\n * - 'notifications:updated' - Fired when notifications list is updated\n * - 'notifications:unread-count' - Fired when unread count changes\n * - 'notifications:new' - Fired when new notifications are received\n * - 'notifications:polling-started' - Fired when polling starts\n * - 'notifications:polling-stopped' - Fired when polling stops\n * - 'notifications:polling-error' - Fired when polling encounters errors\n */\n\n// ============================================================================\n// State Access Functions\n// ============================================================================\n\n/**\n * Get current notification state\n */\nexport function getState(): Readonly<NotificationState> {\n  return { ...state };\n}\n\n/**\n * Get cached notifications (without API call)\n */\nexport function getCachedNotifications(): Notification[] {\n  return [...state.notifications];\n}\n\n/**\n * Get cached unread count (without API call)\n */\nexport function getCachedUnreadCount(): number {\n  return state.unreadCount;\n}\n\n/**\n * Clear local state and stop polling\n */\nexport function reset(): void {\n  stopPolling();\n  state.notifications = [];\n  state.unreadCount = 0;\n  state.lastChecked = null;\n  state.lastError = null;\n  state.knownNotificationIds.clear();\n  state.initialLoadComplete = false;\n  events.clear();\n}\n\n// ============================================================================\n// Utility Functions\n// ============================================================================\n\n/**\n * Get human-readable time ago string\n */\nexport function getTimeAgo(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const seconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n\n  if (seconds < 60) return 'just now';\n  if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;\n  if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;\n  if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;\n  return date.toLocaleDateString();\n}\n\n/**\n * Get notification icon based on type\n */\nexport function getNotificationIcon(type: NotificationType): string {\n  const icons: Record<NotificationType, string> = {\n    invitation: '',\n    invitation_response: '',\n    comment: '',\n    approval: '',\n    section_update: '',\n    revenue_proposal: '',\n    mint_ready: '',\n  };\n  return icons[type] || '';\n}\n\n/**\n * Get notification color based on type\n */\nexport function getNotificationColor(type: NotificationType): string {\n  const colors: Record<NotificationType, string> = {\n    invitation: '#3b82f6', // blue\n    invitation_response: '#8b5cf6', // purple\n    comment: '#06b6d4', // cyan\n    approval: '#10b981', // green\n    section_update: '#f59e0b', // amber\n    revenue_proposal: '#eab308', // yellow\n    mint_ready: '#ec4899', // pink\n  };\n  return colors[type] || '#6b7280';\n}\n\n// ============================================================================\n// Export Default Service\n// ============================================================================\n\nexport default {\n  // API Functions\n  getNotifications,\n  getUnreadNotifications,\n  getUnreadCount,\n  markNotificationRead,\n  markAllNotificationsRead,\n  deleteNotification,\n  getNotificationStats,\n\n  // Polling Functions\n  startPolling,\n  stopPolling,\n  isPolling,\n  setPollingInterval,\n\n  // State Functions\n  getState,\n  getCachedNotifications,\n  getCachedUnreadCount,\n  reset,\n\n  // Event System\n  events,\n\n  // Utilities\n  getTimeAgo,\n  getNotificationIcon,\n  getNotificationColor,\n};\n","/**\n * React Hook for Notification System\n * Provides easy integration with notificationService in React components\n */\n\nimport { useEffect, useState, useCallback } from 'react';\nimport notificationService, {\n  Notification,\n  NotificationStats,\n  events,\n} from '../services/notificationService';\n\ninterface UseNotificationsOptions {\n  autoStart?: boolean; // Auto-start polling when hook mounts\n  onNewNotification?: (notifications: Notification[]) => void; // Callback for new notifications\n}\n\ninterface UseNotificationsReturn {\n  notifications: Notification[];\n  unreadCount: number;\n  isLoading: boolean;\n  isPolling: boolean;\n  error: Error | null;\n\n  // Actions\n  refresh: () => Promise<void>;\n  markAsRead: (notificationId: number) => Promise<void>;\n  markAllAsRead: () => Promise<void>;\n  deleteNotification: (notificationId: number) => Promise<void>;\n  startPolling: () => void;\n  stopPolling: () => void;\n  getStats: () => Promise<NotificationStats>;\n}\n\n/**\n * Custom hook for managing notifications\n */\nexport function useNotifications(\n  options: UseNotificationsOptions = {}\n): UseNotificationsReturn {\n  const { autoStart = false, onNewNotification } = options;\n\n  // State\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [unreadCount, setUnreadCount] = useState<number>(0);\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [isPolling, setIsPolling] = useState<boolean>(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  // Refresh notifications\n  const refresh = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const data = await notificationService.getNotifications();\n      setNotifications(data);\n      setUnreadCount(data.filter(n => !n.read).length);\n    } catch (err) {\n      setError(err as Error);\n      console.error('Failed to refresh notifications:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Mark notification as read\n  const markAsRead = useCallback(async (notificationId: number) => {\n    try {\n      await notificationService.markNotificationRead(notificationId);\n      // State will be updated via event listener\n    } catch (err) {\n      setError(err as Error);\n      console.error('Failed to mark notification as read:', err);\n      throw err;\n    }\n  }, []);\n\n  // Mark all notifications as read\n  const markAllAsRead = useCallback(async () => {\n    try {\n      await notificationService.markAllNotificationsRead();\n      // State will be updated via event listener\n    } catch (err) {\n      setError(err as Error);\n      console.error('Failed to mark all notifications as read:', err);\n      throw err;\n    }\n  }, []);\n\n  // Delete notification\n  const deleteNotificationCallback = useCallback(async (notificationId: number) => {\n    try {\n      await notificationService.deleteNotification(notificationId);\n      // State will be updated via event listener\n    } catch (err) {\n      // Don't throw - the service handles 404 gracefully and updates local state\n      // Other errors are logged but we don't want to block the UI\n      console.error('Failed to delete notification:', err);\n    }\n  }, []);\n\n  // Start polling\n  const startPollingCallback = useCallback(() => {\n    notificationService.startPolling();\n    setIsPolling(true);\n  }, []);\n\n  // Stop polling\n  const stopPollingCallback = useCallback(() => {\n    notificationService.stopPolling();\n    setIsPolling(false);\n  }, []);\n\n  // Get statistics\n  const getStats = useCallback(async () => {\n    try {\n      return await notificationService.getNotificationStats();\n    } catch (err) {\n      setError(err as Error);\n      console.error('Failed to get notification stats:', err);\n      throw err;\n    }\n  }, []);\n\n  // Subscribe to notification events\n  useEffect(() => {\n    // Handle notifications updated\n    const unsubUpdated = events.on('notifications:updated', ({ notifications, unreadCount }) => {\n      setNotifications(notifications);\n      setUnreadCount(unreadCount);\n    });\n\n    // Handle unread count changes\n    const unsubUnreadCount = events.on('notifications:unread-count', ({ count }) => {\n      setUnreadCount(count);\n    });\n\n    // Handle new notifications\n    const unsubNew = events.on('notifications:new', ({ notifications: newNotifs }) => {\n      if (onNewNotification) {\n        onNewNotification(newNotifs);\n      }\n    });\n\n    // Handle polling state changes\n    const unsubPollingStarted = events.on('notifications:polling-started', () => {\n      setIsPolling(true);\n    });\n\n    const unsubPollingStopped = events.on('notifications:polling-stopped', () => {\n      setIsPolling(false);\n    });\n\n    // Handle polling errors\n    const unsubPollingError = events.on('notifications:polling-error', ({ error }) => {\n      setError(error);\n      setIsPolling(false);\n    });\n\n    // Cleanup subscriptions\n    return () => {\n      unsubUpdated();\n      unsubUnreadCount();\n      unsubNew();\n      unsubPollingStarted();\n      unsubPollingStopped();\n      unsubPollingError();\n    };\n  }, [onNewNotification]);\n\n  // Auto-start polling if enabled\n  useEffect(() => {\n    if (autoStart) {\n      startPollingCallback();\n      refresh();\n    }\n\n    return () => {\n      if (autoStart) {\n        stopPollingCallback();\n      }\n    };\n  }, [autoStart, startPollingCallback, stopPollingCallback, refresh]);\n\n  return {\n    notifications,\n    unreadCount,\n    isLoading,\n    isPolling,\n    error,\n\n    refresh,\n    markAsRead,\n    markAllAsRead,\n    deleteNotification: deleteNotificationCallback,\n    startPolling: startPollingCallback,\n    stopPolling: stopPollingCallback,\n    getStats,\n  };\n}\n\n/**\n * Simple hook to just get unread count\n */\nexport function useUnreadCount(autoStart = false): {\n  unreadCount: number;\n  refresh: () => Promise<void>;\n} {\n  const [unreadCount, setUnreadCount] = useState<number>(0);\n\n  const refresh = useCallback(async () => {\n    try {\n      const count = await notificationService.getUnreadCount();\n      setUnreadCount(count);\n    } catch (err) {\n      console.error('Failed to get unread count:', err);\n    }\n  }, []);\n\n  useEffect(() => {\n    const unsubUnreadCount = events.on('notifications:unread-count', ({ count }) => {\n      setUnreadCount(count);\n    });\n\n    if (autoStart) {\n      refresh();\n    }\n\n    return () => {\n      unsubUnreadCount();\n    };\n  }, [autoStart, refresh]);\n\n  return { unreadCount, refresh };\n}\n\nexport default useNotifications;\n","/**\n * NotificationItem Component\n * Reusable component for individual notifications\n */\n\nimport React, { memo } from 'react';\nimport {\n  Mail,\n  MailOpen,\n  MessageSquare,\n  CheckCircle,\n  FileEdit,\n  DollarSign,\n  PartyPopper,\n  Bell,\n} from 'lucide-react';\nimport {\n  Notification,\n  NotificationType,\n  getTimeAgo,\n  getNotificationColor,\n} from '../../services/notificationService';\n\n// Get Lucide icon component based on notification type\nfunction getNotificationLucideIcon(type: NotificationType): React.ReactNode {\n  const iconProps = { size: 20 };\n\n  switch (type) {\n    case 'invitation':\n      return <Mail {...iconProps} />;\n    case 'invitation_response':\n      return <MailOpen {...iconProps} />;\n    case 'comment':\n      return <MessageSquare {...iconProps} />;\n    case 'approval':\n      return <CheckCircle {...iconProps} />;\n    case 'section_update':\n      return <FileEdit {...iconProps} />;\n    case 'revenue_proposal':\n      return <DollarSign {...iconProps} />;\n    case 'mint_ready':\n      return <PartyPopper {...iconProps} />;\n    default:\n      return <Bell {...iconProps} />;\n  }\n}\n\ninterface NotificationItemProps {\n  notification: Notification;\n  onClick: () => void;\n  onDelete: (e: React.MouseEvent) => void;\n  onViewInvite?: (notification: Notification) => void;\n}\n\nfunction NotificationItemComponent({ notification, onClick, onDelete, onViewInvite }: NotificationItemProps) {\n  const icon = getNotificationLucideIcon(notification.type);\n  const color = getNotificationColor(notification.type);\n  const timeAgo = getTimeAgo(notification.created_at);\n  const isInvitation = notification.type === 'invitation';\n\n  return (\n    <div\n      onClick={onClick}\n      role=\"button\"\n      tabIndex={0}\n      aria-label={`${notification.read ? 'Read' : 'Unread'} notification: ${notification.title}`}\n      onKeyDown={(e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          onClick();\n        }\n      }}\n      style={{\n        padding: '12px 20px',\n        cursor: 'pointer',\n        background: notification.read ? 'transparent' : '#0b1220',\n        borderLeft: `3px solid ${notification.read ? 'transparent' : color}`,\n        transition: 'all 0.2s',\n        position: 'relative',\n      }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.background = '#1e293b';\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.background = notification.read ? 'transparent' : '#0b1220';\n      }}\n    >\n      <div style={{ display: 'flex', gap: 12 }}>\n        {/* Icon */}\n        <div\n          style={{\n            width: 40,\n            height: 40,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            background: `${color}20`,\n            borderRadius: 8,\n            flexShrink: 0,\n            color: color,\n          }}\n          aria-hidden=\"true\"\n        >\n          {icon}\n        </div>\n\n        {/* Content */}\n        <div style={{ flex: 1, minWidth: 0 }}>\n          <div\n            style={{\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#e5e7eb',\n              marginBottom: 4,\n              lineHeight: 1.4,\n            }}\n          >\n            {notification.title}\n          </div>\n          <div\n            style={{\n              fontSize: 12,\n              color: '#94a3b8',\n              marginBottom: 6,\n              lineHeight: 1.5,\n            }}\n          >\n            {notification.message}\n          </div>\n          <div\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8,\n              fontSize: 11,\n              color: '#64748b',\n            }}\n          >\n            <span>@{notification.from_user.username}</span>\n            <span></span>\n            <span>{timeAgo}</span>\n          </div>\n\n          {/* View Invite button for invitation notifications */}\n          {isInvitation && onViewInvite && (\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                onViewInvite(notification);\n              }}\n              style={{\n                marginTop: 10,\n                background: '#f59e0b',\n                color: '#000',\n                border: 'none',\n                padding: '8px 16px',\n                borderRadius: 6,\n                fontSize: 12,\n                fontWeight: 700,\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                gap: 6,\n                transition: 'all 0.2s',\n              }}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.background = '#fbbf24';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.background = '#f59e0b';\n              }}\n            >\n              View Invite \n            </button>\n          )}\n        </div>\n\n        {/* Delete button */}\n        <button\n          onClick={onDelete}\n          aria-label=\"Delete notification\"\n          style={{\n            background: 'transparent',\n            border: 'none',\n            color: '#64748b',\n            cursor: 'pointer',\n            padding: 4,\n            borderRadius: 4,\n            fontSize: 18,\n            width: 28,\n            height: 28,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            flexShrink: 0,\n            opacity: 0.6,\n            transition: 'all 0.2s',\n          }}\n          onMouseEnter={(e) => {\n            e.currentTarget.style.background = '#1e293b';\n            e.currentTarget.style.color = '#ef4444';\n            e.currentTarget.style.opacity = '1';\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.background = 'transparent';\n            e.currentTarget.style.color = '#64748b';\n            e.currentTarget.style.opacity = '0.6';\n          }}\n        >\n          \n        </button>\n      </div>\n\n      {/* Unread indicator */}\n      {!notification.read && (\n        <div\n          aria-label=\"Unread\"\n          style={{\n            position: 'absolute',\n            top: 18,\n            right: 20,\n            width: 8,\n            height: 8,\n            background: color,\n            borderRadius: '50%',\n            boxShadow: `0 0 8px ${color}`,\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport const NotificationItem = memo(NotificationItemComponent);\n\nexport default NotificationItem;\n","/**\n * Collaboration API Service\n *\n * Provides functions for managing collaborative projects, invitations,\n * sections, and communication between collaborators.\n */\n\nimport { API_URL as API_BASE } from '../config';\n\n// ===== TypeScript Interfaces =====\n\nexport interface CopyrightPreview {\n  copyright_line: string;\n  blockchain_message: string;\n  full_text: string;\n}\n\nexport interface CollaborativeProject {\n  id: number;\n  title: string;\n  content_type: 'book' | 'music' | 'video' | 'art';\n  description: string;\n  status: 'draft' | 'active' | 'ready_for_mint' | 'minted' | 'cancelled';\n  milestones: Milestone[];\n  price_usd: number;\n  editions: number;\n  teaser_percent: number;\n  watermark_preview: boolean;\n  authors_note?: string;\n  estimated_earnings?: { [userId: number]: number };\n  copyright_preview?: CopyrightPreview;\n  created_by: number;\n  created_by_username: string;\n  created_at: string;\n  updated_at: string;\n  collaborators: CollaboratorRole[];\n  sections: ProjectSection[];\n  recent_comments: ProjectComment[];\n  is_fully_approved: boolean;\n  total_collaborators: number;\n  progress_percentage: number;\n}\n\nexport interface CollaborativeProjectListItem {\n  id: number;\n  title: string;\n  content_type: string;\n  status: string;\n  created_by: number;\n  created_by_username: string;\n  total_collaborators: number;\n  created_at: string;\n  price_usd: number;\n}\n\n// Contract task interface for task-based collaboration\nexport interface ContractTask {\n  id: number;\n  title: string;\n  description: string;\n  deadline: string;\n  status: 'pending' | 'in_progress' | 'complete' | 'signed_off' | 'cancelled';\n  order: number;\n  marked_complete_at?: string;\n  marked_complete_by?: number;\n  marked_complete_by_username?: string;\n  completion_notes?: string;\n  signed_off_at?: string;\n  signed_off_by?: number;\n  signed_off_by_username?: string;\n  signoff_notes?: string;\n  rejection_notes?: string;\n  rejected_at?: string;\n  is_overdue: boolean;\n  days_until_deadline?: number;\n  created_at: string;\n  updated_at: string;\n}\n\n// Role definition for standard roles\nexport interface RoleDefinition {\n  id: number;\n  name: string;\n  category: 'creator' | 'contributor' | 'reviewer' | 'technical' | 'management';\n  description: string;\n  applicable_to_book: boolean;\n  applicable_to_art: boolean;\n  applicable_to_music: boolean;\n  applicable_to_video: boolean;\n  default_permissions: {\n    create: string[];\n    edit: { scope: string; types: string[] };\n    review: string[];\n  };\n  ui_components: string[];\n  icon: string;\n  color: string;\n  is_active: boolean;\n}\n\nexport interface CollaboratorRole {\n  id: number;\n  user: number;\n  username: string;\n  display_name: string;\n  avatar_url?: string;\n  role: string;\n  revenue_percentage: number;\n  status: 'invited' | 'accepted' | 'declined' | 'exited';\n  invited_at: string;\n  accepted_at?: string;\n  // Legacy permission flags (still supported)\n  can_edit_text: boolean;\n  can_edit_images: boolean;\n  can_edit_audio: boolean;\n  can_edit_video: boolean;\n  can_edit: string[];\n  // New role-based permission fields\n  role_definition_id?: number;\n  role_definition_details?: RoleDefinition;\n  permissions?: {\n    create?: string[];\n    edit?: { scope: string; types: string[] };\n    review?: string[];\n  };\n  effective_role_name?: string;\n  effective_permissions?: {\n    create: string[];\n    edit: { scope: string; types: string[] };\n    review: string[];\n  };\n  ui_components?: string[];\n  // Approval tracking\n  approved_current_version: boolean;\n  approved_revenue_split: boolean;\n  // Counter-proposal fields\n  proposed_percentage?: number;\n  counter_message?: string;\n  // Deadline and accountability fields\n  delivery_deadline?: string;\n  deadline_extended_at?: string;\n  deadline_extension_reason?: string;\n  sections_due?: number[];\n  // Multi-party governance fields\n  is_lead: boolean;\n  can_invite_others: boolean;\n  voting_weight: number;\n  // Contract task fields\n  contract_tasks: ContractTask[];\n  tasks_total: number;\n  tasks_signed_off: number;\n  all_tasks_complete: boolean;\n  has_active_breach: boolean;\n  cancellation_eligible: boolean;\n  contract_version: number;\n  contract_locked_at?: string;\n}\n\nexport interface ProjectSection {\n  id: number;\n  section_type: 'text' | 'image' | 'audio' | 'video';\n  title: string;\n  content_html?: string;\n  synopsis?: string;\n  media_file?: string;\n  owner: number;\n  owner_username: string;\n  order: number;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface CommentReaction {\n  id: number;\n  user_id: number;\n  username: string;\n  emoji: string;\n}\n\nexport interface ProjectComment {\n  id: number;\n  author: number;\n  author_username: string;\n  author_avatar: string;\n  content: string;\n  parent_comment?: number;\n  section?: number;\n  section_title?: string;\n  resolved: boolean;\n  resolved_by?: number;\n  resolved_by_username?: string;\n  resolved_at?: string;\n  created_at: string;\n  updated_at?: string;\n  edited: boolean;\n  edit_history?: Array<{\n    content: string;\n    edited_at: string;\n  }>;\n  replies_count: number;\n  replies?: ProjectComment[];\n  reactions?: CommentReaction[];\n  attachments?: Array<{\n    id: number;\n    filename: string;\n    file_url: string;\n    file_size: number;\n  }>;\n  mentions?: number[]; // User IDs mentioned in the comment\n}\n\nexport interface Milestone {\n  id?: string;\n  title: string;\n  description?: string;\n  due_date?: string;\n  completed: boolean;\n}\n\nexport interface RevenueSplit {\n  user_id: number;\n  percentage: number;\n}\n\nexport interface InviteCollaboratorData {\n  user_id: number;\n  role: string;\n  revenue_percentage: number;\n  can_edit_text?: boolean;\n  can_edit_images?: boolean;\n  can_edit_audio?: boolean;\n  can_edit_video?: boolean;\n}\n\nexport interface CreateProjectData {\n  title: string;\n  content_type: 'book' | 'music' | 'video' | 'art';\n  description?: string;\n  milestones?: Milestone[];\n}\n\nexport interface CreateSectionData {\n  project: number;\n  section_type: 'text' | 'image' | 'audio' | 'video';\n  title: string;\n  content_html?: string;\n  media_file?: File;\n  order?: number;\n}\n\nexport interface CreateCommentData {\n  project: number;\n  content: string;\n  section?: number;\n  parent_comment?: number;\n  mentions?: number[];\n  attachments?: File[];\n}\n\n// ===== Helper Functions =====\n\n/**\n * Get fresh CSRF token from API\n * This is more reliable than reading from cookies\n */\nasync function getFreshCsrfToken(): Promise<string> {\n  try {\n    const response = await fetch(`${API_BASE}/api/auth/csrf/`, {\n      credentials: 'include',\n    });\n    const data = await response.json();\n    return data?.csrfToken || '';\n  } catch (error) {\n    console.error('Failed to fetch CSRF token:', error);\n    return '';\n  }\n}\n\n/**\n * Handle API errors with detailed messages\n */\nasync function handleResponse<T>(response: Response): Promise<T> {\n  if (!response.ok) {\n    let errorMessage = `Request failed: ${response.statusText}`;\n    try {\n      const errorData = await response.json();\n      if (errorData.error) {\n        errorMessage = errorData.error;\n      } else if (errorData.detail) {\n        errorMessage = errorData.detail;\n      }\n    } catch {\n      // Response body not JSON, use status text\n    }\n    throw new Error(errorMessage);\n  }\n  return response.json();\n}\n\n// ===== API Functions =====\n\nexport const collaborationApi = {\n  // ===== Project Management =====\n\n  /**\n   * Create a new collaborative project\n   */\n  async createCollaborativeProject(data: CreateProjectData): Promise<CollaborativeProject> {\n    const csrfToken = await getFreshCsrfToken();\n    const response = await fetch(`${API_BASE}/api/collaborative-projects/`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': csrfToken,\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      body: JSON.stringify(data),\n    });\n\n    return handleResponse<CollaborativeProject>(response);\n  },\n\n  /**\n   * Get all collaborative projects for current user\n   */\n  async getCollaborativeProjects(): Promise<CollaborativeProjectListItem[]> {\n    const response = await fetch(`${API_BASE}/api/collaborative-projects/`, {\n      method: 'GET',\n      credentials: 'include',\n    });\n\n    return handleResponse<CollaborativeProjectListItem[]>(response);\n  },\n\n  /**\n   * Get single project with full details\n   */\n  async getCollaborativeProject(id: number): Promise<CollaborativeProject> {\n    const response = await fetch(`${API_BASE}/api/collaborative-projects/${id}/`, {\n      method: 'GET',\n      credentials: 'include',\n    });\n\n    return handleResponse<CollaborativeProject>(response);\n  },\n\n  /**\n   * Get all pending collaboration invites for the current user\n   * Returns projects where user has status='invited'\n   */\n  async getPendingInvites(): Promise<{ project: CollaborativeProject; invite: CollaboratorRole }[]> {\n    const response = await fetch(`${API_BASE}/api/collaborative-projects/pending_invites/`, {\n      method: 'GET',\n      credentials: 'include',\n    });\n\n    return handleResponse<{ project: CollaborativeProject; invite: CollaboratorRole }[]>(response);\n  },\n\n  /**\n   * Update collaborative project\n   */\n  async updateCollaborativeProject(\n    id: number,\n    data: Partial<CreateProjectData>\n  ): Promise<CollaborativeProject> {\n    const response = await fetch(`${API_BASE}/api/collaborative-projects/${id}/`, {\n      method: 'PATCH',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      body: JSON.stringify(data),\n    });\n\n    return handleResponse<CollaborativeProject>(response);\n  },\n\n  /**\n   * Delete collaborative project\n   */\n  async deleteCollaborativeProject(id: number): Promise<void> {\n    const response = await fetch(`${API_BASE}/api/collaborative-projects/${id}/`, {\n      method: 'DELETE',\n      credentials: 'include',\n      headers: {\n        'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to delete project: ${response.statusText}`);\n    }\n  },\n\n  // ===== Collaboration Actions =====\n\n  /**\n   * Invite a collaborator to the project\n   */\n  async inviteCollaborator(\n    projectId: number,\n    data: InviteCollaboratorData\n  ): Promise<CollaboratorRole> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/invite_collaborator/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify(data),\n      }\n    );\n\n    return handleResponse<CollaboratorRole>(response);\n  },\n\n  /**\n   * Accept invitation to collaborate\n   */\n  async acceptInvitation(projectId: number): Promise<CollaboratorRole> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/accept_invitation/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n      }\n    );\n\n    return handleResponse<CollaboratorRole>(response);\n  },\n\n  /**\n   * Decline invitation to collaborate\n   */\n  async declineInvitation(projectId: number): Promise<{ message: string }> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/decline_invitation/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n      }\n    );\n\n    return handleResponse<{ message: string }>(response);\n  },\n\n  /**\n   * Submit counter-proposal for collaboration invitation\n   */\n  async counterProposeInvite(\n    projectId: number,\n    data: { proposed_percentage: number; message: string }\n  ): Promise<{ message: string; invitation: CollaboratorRole }> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/counter_propose/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify(data),\n      }\n    );\n\n    return handleResponse<{ message: string; invitation: CollaboratorRole }>(response);\n  },\n\n  /**\n   * Propose new revenue split percentages\n   */\n  async proposeRevenueSplit(\n    projectId: number,\n    splits: RevenueSplit[]\n  ): Promise<CollaborativeProject> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/propose_revenue_split/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify({ splits }),\n      }\n    );\n\n    return handleResponse<CollaborativeProject>(response);\n  },\n\n  // ===== Approval System =====\n\n  /**\n   * Approve current version for minting\n   */\n  async approveCurrentVersion(projectId: number): Promise<CollaborativeProject> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/approve_version/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n      }\n    );\n\n    return handleResponse<CollaborativeProject>(response);\n  },\n\n  /**\n   * Get approval status for a project\n   */\n  async getApprovalStatus(projectId: number): Promise<{\n    is_fully_approved: boolean;\n    pending_approvals: string[];\n  }> {\n    const project = await this.getCollaborativeProject(projectId);\n\n    const pendingApprovals = project.collaborators\n      .filter(\n        (c) =>\n          c.status === 'accepted' &&\n          (!c.approved_current_version || !c.approved_revenue_split)\n      )\n      .map((c) => c.username);\n\n    return {\n      is_fully_approved: project.is_fully_approved,\n      pending_approvals: pendingApprovals,\n    };\n  },\n\n  /**\n   * Get project preview (combined sections)\n   */\n  async getProjectPreview(projectId: number): Promise<{\n    title: string;\n    content_type: string;\n    sections: any[];\n  }> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/preview/`,\n      {\n        method: 'GET',\n        credentials: 'include',\n      }\n    );\n\n    return handleResponse(response);\n  },\n\n  // ===== Section Management =====\n\n  /**\n   * Create a new project section\n   */\n  async createProjectSection(data: CreateSectionData): Promise<ProjectSection> {\n    const formData = new FormData();\n    formData.append('project', data.project.toString());\n    formData.append('section_type', data.section_type);\n    formData.append('title', data.title);\n    if (data.content_html) {\n      formData.append('content_html', data.content_html);\n    }\n    if (data.media_file) {\n      formData.append('media_file', data.media_file);\n    }\n    if (data.order !== undefined) {\n      formData.append('order', data.order.toString());\n    }\n\n    const response = await fetch(`${API_BASE}/api/project-sections/`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      body: formData,\n    });\n\n    return handleResponse<ProjectSection>(response);\n  },\n\n  /**\n   * Update project section\n   */\n  async updateProjectSection(\n    id: number,\n    data: Partial<CreateSectionData>\n  ): Promise<ProjectSection> {\n    const formData = new FormData();\n    if (data.section_type) {\n      formData.append('section_type', data.section_type);\n    }\n    if (data.title) {\n      formData.append('title', data.title);\n    }\n    if (data.content_html !== undefined) {\n      formData.append('content_html', data.content_html);\n    }\n    if (data.media_file) {\n      formData.append('media_file', data.media_file);\n    }\n    if (data.order !== undefined) {\n      formData.append('order', data.order.toString());\n    }\n\n    const response = await fetch(`${API_BASE}/api/project-sections/${id}/`, {\n      method: 'PATCH',\n      credentials: 'include',\n      headers: {\n        'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      body: formData,\n    });\n\n    return handleResponse<ProjectSection>(response);\n  },\n\n  /**\n   * Delete project section\n   */\n  async deleteProjectSection(id: number): Promise<void> {\n    const response = await fetch(`${API_BASE}/api/project-sections/${id}/`, {\n      method: 'DELETE',\n      credentials: 'include',\n      headers: {\n        'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to delete section: ${response.statusText}`);\n    }\n  },\n\n  /**\n   * Get all sections for a project\n   */\n  async getProjectSections(projectId: number): Promise<ProjectSection[]> {\n    const response = await fetch(\n      `${API_BASE}/api/project-sections/?project=${projectId}`,\n      {\n        method: 'GET',\n        credentials: 'include',\n      }\n    );\n\n    return handleResponse<ProjectSection[]>(response);\n  },\n\n  // ===== Communication =====\n\n  /**\n   * Add a comment to project or section\n   */\n  async addComment(data: CreateCommentData): Promise<ProjectComment> {\n    // Use FormData if there are attachments\n    if (data.attachments && data.attachments.length > 0) {\n      const formData = new FormData();\n      formData.append('project', data.project.toString());\n      formData.append('content', data.content);\n      if (data.section) formData.append('section', data.section.toString());\n      if (data.parent_comment) formData.append('parent_comment', data.parent_comment.toString());\n      if (data.mentions) formData.append('mentions', JSON.stringify(data.mentions));\n\n      data.attachments.forEach((file, index) => {\n        formData.append(`attachment_${index}`, file);\n      });\n\n      const response = await fetch(`${API_BASE}/api/project-comments/`, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: formData,\n      });\n\n      return handleResponse<ProjectComment>(response);\n    }\n\n    // Regular JSON request without attachments\n    const response = await fetch(`${API_BASE}/api/project-comments/`, {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      body: JSON.stringify(data),\n    });\n\n    return handleResponse<ProjectComment>(response);\n  },\n\n  /**\n   * Get comments for a project or section\n   */\n  async getComments(projectId: number, sectionId?: number): Promise<ProjectComment[]> {\n    let url = `${API_BASE}/api/project-comments/?project=${projectId}`;\n    if (sectionId) {\n      url += `&section=${sectionId}`;\n    }\n\n    const response = await fetch(url, {\n      method: 'GET',\n      credentials: 'include',\n    });\n\n    return handleResponse<ProjectComment[]>(response);\n  },\n\n  /**\n   * Resolve a comment\n   */\n  async resolveComment(commentId: number): Promise<ProjectComment> {\n    const response = await fetch(\n      `${API_BASE}/api/project-comments/${commentId}/resolve/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n      }\n    );\n\n    return handleResponse<ProjectComment>(response);\n  },\n\n  /**\n   * Unresolve a comment\n   */\n  async unresolveComment(commentId: number): Promise<ProjectComment> {\n    const response = await fetch(\n      `${API_BASE}/api/project-comments/${commentId}/unresolve/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n      }\n    );\n\n    return handleResponse<ProjectComment>(response);\n  },\n\n  /**\n   * Update a comment\n   */\n  async updateComment(commentId: number, content: string): Promise<ProjectComment> {\n    const response = await fetch(`${API_BASE}/api/project-comments/${commentId}/`, {\n      method: 'PATCH',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      body: JSON.stringify({ content }),\n    });\n\n    return handleResponse<ProjectComment>(response);\n  },\n\n  /**\n   * Delete a comment\n   */\n  async deleteComment(commentId: number): Promise<void> {\n    const response = await fetch(`${API_BASE}/api/project-comments/${commentId}/`, {\n      method: 'DELETE',\n      credentials: 'include',\n      headers: {\n        'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to delete comment: ${response.statusText}`);\n    }\n  },\n\n  /**\n   * Add reaction to a comment\n   */\n  async addReaction(commentId: number, emoji: string): Promise<CommentReaction> {\n    const response = await fetch(\n      `${API_BASE}/api/project-comments/${commentId}/add-reaction/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify({ emoji }),\n      }\n    );\n\n    return handleResponse<CommentReaction>(response);\n  },\n\n  /**\n   * Remove reaction from a comment\n   */\n  async removeReaction(commentId: number, reactionId: number): Promise<void> {\n    const response = await fetch(\n      `${API_BASE}/api/project-comments/${commentId}/remove-reaction/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify({ reaction_id: reactionId }),\n      }\n    );\n\n    if (!response.ok) {\n      throw new Error(`Failed to remove reaction: ${response.statusText}`);\n    }\n  },\n\n  /**\n   * Get comment thread (with replies)\n   */\n  async getCommentThread(commentId: number): Promise<ProjectComment> {\n    const response = await fetch(\n      `${API_BASE}/api/project-comments/${commentId}/thread/`,\n      {\n        method: 'GET',\n        credentials: 'include',\n      }\n    );\n\n    return handleResponse<ProjectComment>(response);\n  },\n\n  /**\n   * Get comments by section\n   */\n  async getCommentsBySection(\n    projectId: number,\n    includeResolved: boolean = false\n  ): Promise<{ [sectionId: string]: ProjectComment[] }> {\n    let url = `${API_BASE}/api/project-comments/by-section/?project=${projectId}`;\n    if (includeResolved) {\n      url += '&include_resolved=true';\n    }\n\n    const response = await fetch(url, {\n      method: 'GET',\n      credentials: 'include',\n    });\n\n    return handleResponse<{ [sectionId: string]: ProjectComment[] }>(response);\n  },\n\n  /**\n   * Get unresolved comment count\n   */\n  async getUnresolvedCommentCount(projectId: number): Promise<number> {\n    const comments = await this.getComments(projectId);\n    return comments.filter(c => !c.resolved).length;\n  },\n\n  // ===== Minting Workflow =====\n\n  /**\n   * Request approval from specific collaborators\n   */\n  async requestApproval(\n    projectId: number,\n    data: {\n      collaborator_ids: number[];\n      message?: string;\n      deadline_days?: number;\n    }\n  ): Promise<{ message: string; notifications_sent: number }> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/request_approval/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify(data),\n      }\n    );\n\n    return handleResponse<{ message: string; notifications_sent: number }>(response);\n  },\n\n  /**\n   * Approve project (both content and revenue split)\n   */\n  async approveProject(\n    projectId: number,\n    data: {\n      approve_content: boolean;\n      approve_revenue: boolean;\n      feedback?: string;\n    }\n  ): Promise<CollaborativeProject> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/approve_project/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify(data),\n      }\n    );\n\n    return handleResponse<CollaborativeProject>(response);\n  },\n\n  /**\n   * Set the NFT price for a project (project owner only)\n   */\n  async setPrice(\n    projectId: number,\n    priceUsd: number\n  ): Promise<CollaborativeProject> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/set_price/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify({ price_usd: priceUsd }),\n      }\n    );\n\n    return handleResponse<CollaborativeProject>(response);\n  },\n\n  /**\n   * Update customization settings (price, editions, teaser)\n   * Only project owner can update these settings.\n   * Updating these settings resets revenue split approvals.\n   */\n  async updateCustomization(\n    projectId: number,\n    settings: {\n      price_usd?: number;\n      editions?: number;\n      teaser_percent?: number;\n      watermark_preview?: boolean;\n      authors_note?: string;\n    }\n  ): Promise<CollaborativeProject> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/update_customization/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify(settings),\n      }\n    );\n\n    return handleResponse<CollaborativeProject>(response);\n  },\n\n  /**\n   * Mint project as NFT\n   */\n  async mintProject(\n    projectId: number,\n    forceMint: boolean = false\n  ): Promise<{\n    success: boolean;\n    nft_id: string;\n    token_id: string;\n    contract_address: string;\n    ipfs_hash: string;\n    transaction_hash: string;\n  }> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/mint/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify({ force_mint: forceMint }),\n      }\n    );\n\n    return handleResponse<{\n      success: boolean;\n      nft_id: string;\n      token_id: string;\n      contract_address: string;\n      ipfs_hash: string;\n      transaction_hash: string;\n    }>(response);\n  },\n\n  /**\n   * Get minting status for a project\n   */\n  async getMintingStatus(projectId: number): Promise<{\n    status: 'not_started' | 'validating' | 'uploading' | 'creating_contract' | 'minting' | 'completed' | 'error';\n    stage: string;\n    progress: number;\n    error?: string;\n    nft_data?: {\n      id: string;\n      token_id: string;\n      contract_address: string;\n      ipfs_hash: string;\n    };\n  }> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/minting-status/`,\n      {\n        method: 'GET',\n        credentials: 'include',\n      }\n    );\n\n    return handleResponse(response);\n  },\n\n  /**\n   * Cancel approval (reset approval status)\n   */\n  async cancelApproval(projectId: number): Promise<CollaborativeProject> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/cancel_approval/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'X-CSRFToken': await getFreshCsrfToken(),\n        'X-Requested-With': 'XMLHttpRequest',\n        },\n      }\n    );\n\n    return handleResponse<CollaborativeProject>(response);\n  },\n\n  // ===== Proposals & Voting =====\n\n  /**\n   * Get all proposals for a project\n   */\n  async getProposals(projectId: number): Promise<Proposal[]> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/proposals/`,\n      {\n        method: 'GET',\n        credentials: 'include',\n      }\n    );\n\n    return handleResponse<Proposal[]>(response);\n  },\n\n  /**\n   * Create a new proposal\n   */\n  async createProposal(\n    projectId: number,\n    data: CreateProposalData\n  ): Promise<Proposal> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/proposals/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify(data),\n      }\n    );\n\n    return handleResponse<Proposal>(response);\n  },\n\n  /**\n   * Cast a vote on a proposal\n   */\n  async castVote(\n    projectId: number,\n    proposalId: number,\n    data: { vote: 'approve' | 'reject' | 'abstain'; comment?: string }\n  ): Promise<ProposalVote> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/proposals/${proposalId}/vote/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify(data),\n      }\n    );\n\n    return handleResponse<ProposalVote>(response);\n  },\n\n  /**\n   * Cancel a proposal (only proposer or owner can cancel)\n   */\n  async cancelProposal(projectId: number, proposalId: number): Promise<{ message: string }> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/proposals/${proposalId}/cancel/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'X-CSRFToken': await getFreshCsrfToken(),\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n      }\n    );\n\n    return handleResponse<{ message: string }>(response);\n  },\n\n  // ===== Collaborator Ratings =====\n\n  /**\n   * Submit a rating for a collaborator\n   */\n  async rateCollaborator(\n    projectId: number,\n    ratedUserId: number,\n    data: CollaboratorRatingData\n  ): Promise<CollaboratorRating> {\n    const response = await fetch(\n      `${API_BASE}/api/collaborative-projects/${projectId}/rate_collaborator/`,\n      {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': await getFreshCsrfToken(),\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: JSON.stringify({ rated_user_id: ratedUserId, ...data }),\n      }\n    );\n\n    return handleResponse<CollaboratorRating>(response);\n  },\n\n  /**\n   * Get ratings for a user\n   */\n  async getUserRatings(userId: number): Promise<{\n    ratings: CollaboratorRating[];\n    average_scores: {\n      quality: number;\n      deadline: number;\n      communication: number;\n      would_collab_again: number;\n      overall: number;\n    };\n    total_projects: number;\n  }> {\n    const response = await fetch(\n      `${API_BASE}/api/users/${userId}/ratings/`,\n      {\n        method: 'GET',\n        credentials: 'include',\n      }\n    );\n\n    return handleResponse(response);\n  },\n};\n\n// ===== Additional TypeScript Interfaces =====\n\nexport interface Proposal {\n  id: number;\n  proposal_type: string;\n  title: string;\n  description: string;\n  proposal_data: Record<string, any>;\n  status: 'pending' | 'approved' | 'rejected' | 'expired' | 'cancelled';\n  voting_threshold: 'majority' | 'unanimous' | 'owner_decides';\n  proposer_id: number;\n  proposer_username: string;\n  expires_at?: string;\n  resolved_at?: string;\n  created_at: string;\n  votes: ProposalVote[];\n  vote_counts: {\n    approve: number;\n    reject: number;\n    abstain: number;\n    total: number;\n  };\n  total_voters: number;\n}\n\nexport interface ProposalVote {\n  id: number;\n  voter_id: number;\n  voter_username: string;\n  vote: 'approve' | 'reject' | 'abstain';\n  comment?: string;\n  voted_at: string;\n}\n\nexport interface CreateProposalData {\n  proposal_type: string;\n  title: string;\n  description?: string;\n  proposal_data: Record<string, any>;\n  voting_threshold?: 'majority' | 'unanimous' | 'owner_decides';\n  expires_in_days?: number;\n}\n\nexport interface CollaboratorRating {\n  id: number;\n  project_id: number;\n  project_title: string;\n  rater_id: number;\n  rater_username: string;\n  rated_user_id: number;\n  rated_user_username: string;\n  quality_score: number;\n  deadline_score: number;\n  communication_score: number;\n  would_collab_again: number;\n  average_score: number;\n  private_note?: string;\n  public_feedback?: string;\n  created_at: string;\n}\n\nexport interface CollaboratorRatingData {\n  quality_score: number;\n  deadline_score: number;\n  communication_score: number;\n  would_collab_again: number;\n  private_note?: string;\n  public_feedback?: string;\n}\n","/**\n * InviteResponseModal Component\n *\n * Displays collaboration invite details and allows the recipient to\n * Accept, Decline, or Counter-Propose.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  collaborationApi,\n  CollaborativeProject,\n  CollaboratorRole\n} from '../../services/collaborationApi';\n\ninterface InviteResponseModalProps {\n  open: boolean;\n  onClose: () => void;\n  projectId: number;\n  notificationMessage?: string;\n}\n\ntype ModalMode = 'view' | 'counter-propose';\n\nexport function InviteResponseModal({\n  open,\n  onClose,\n  projectId,\n  notificationMessage\n}: InviteResponseModalProps) {\n  const navigate = useNavigate();\n\n  // State\n  const [loading, setLoading] = useState(true);\n  const [project, setProject] = useState<CollaborativeProject | null>(null);\n  const [myRole, setMyRole] = useState<CollaboratorRole | null>(null);\n  const [mode, setMode] = useState<ModalMode>('view');\n  const [proposedPercentage, setProposedPercentage] = useState(50);\n  const [counterMessage, setCounterMessage] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Load project details\n  useEffect(() => {\n    if (!open || !projectId) return;\n\n    const loadProject = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const data = await collaborationApi.getCollaborativeProject(projectId);\n        setProject(data);\n\n        // Find current user's role (the one with status='invited')\n        const invitedRole = data.collaborators.find(\n          (c: CollaboratorRole) => c.status === 'invited'\n        );\n        if (invitedRole) {\n          setMyRole(invitedRole);\n          setProposedPercentage(invitedRole.revenue_percentage);\n        }\n      } catch (err: any) {\n        setError(err.message || 'Failed to load project details');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadProject();\n  }, [open, projectId]);\n\n  // Reset state when closed\n  useEffect(() => {\n    if (!open) {\n      setMode('view');\n      setCounterMessage('');\n      setError('');\n      setSuccess('');\n    }\n  }, [open]);\n\n  if (!open) return null;\n\n  const handleAccept = async () => {\n    setSubmitting(true);\n    setError('');\n    try {\n      await collaborationApi.acceptInvitation(projectId);\n      setSuccess('Invite accepted! Redirecting to project...');\n      setTimeout(() => {\n        onClose();\n        navigate(`/collaborations/${projectId}`);\n      }, 1500);\n    } catch (err: any) {\n      setError(err.message || 'Failed to accept invitation');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleDecline = async () => {\n    setSubmitting(true);\n    setError('');\n    try {\n      await collaborationApi.declineInvitation(projectId);\n      setSuccess('Invite declined.');\n      setTimeout(() => {\n        onClose();\n      }, 1500);\n    } catch (err: any) {\n      setError(err.message || 'Failed to decline invitation');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleCounterPropose = async () => {\n    if (!counterMessage.trim()) {\n      setError('Please add a message explaining your counter-proposal');\n      return;\n    }\n\n    setSubmitting(true);\n    setError('');\n    try {\n      await collaborationApi.counterProposeInvite(projectId, {\n        proposed_percentage: proposedPercentage,\n        message: counterMessage,\n      });\n\n      setSuccess('Counter-proposal sent! Waiting for response...');\n      setTimeout(() => {\n        onClose();\n      }, 2000);\n    } catch (err: any) {\n      setError(err.message || 'Failed to send counter-proposal');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Get project creator info\n  const creator = project?.collaborators.find(\n    (c: CollaboratorRole) => c.user === project.created_by\n  );\n\n  // Calculate others' share\n  const othersPercentage = myRole ? 100 - myRole.revenue_percentage : 0;\n\n  const contentTypeLabels: Record<string, string> = {\n    book: 'Book',\n    music: 'Music',\n    video: 'Video',\n    art: 'Art',\n  };\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: 'rgba(0,0,0,0.9)',\n        display: 'grid',\n        placeItems: 'center',\n        zIndex: 1000,\n        padding: 20,\n      }}\n      onClick={(e) => {\n        if (e.target === e.currentTarget && !submitting) onClose();\n      }}\n    >\n      <div\n        style={{\n          background: '#0f172a',\n          border: '1px solid #334155',\n          borderRadius: 16,\n          width: '100%',\n          maxWidth: 600,\n          maxHeight: '90vh',\n          overflow: 'auto',\n          boxShadow: '0 20px 25px -5px rgba(0,0,0,0.5)',\n        }}\n      >\n        {/* Header */}\n        <div\n          style={{\n            padding: 24,\n            borderBottom: '1px solid #334155',\n            background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'flex-start',\n          }}\n        >\n          <div>\n            <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 8 }}>\n              <span style={{ fontSize: 24 }}></span>\n              <h2 style={{ margin: 0, color: '#f8fafc', fontSize: 20, fontWeight: 600 }}>\n                Collaboration Invite\n              </h2>\n            </div>\n            {creator && (\n              <p style={{ margin: 0, color: '#94a3b8', fontSize: 14 }}>\n                from <span style={{ color: '#f59e0b' }}>@{creator.username}</span>\n              </p>\n            )}\n          </div>\n          <button\n            onClick={onClose}\n            disabled={submitting}\n            style={{\n              background: 'transparent',\n              border: 'none',\n              color: '#94a3b8',\n              fontSize: 24,\n              cursor: submitting ? 'not-allowed' : 'pointer',\n              padding: 4,\n            }}\n          >\n            \n          </button>\n        </div>\n\n        {/* Content */}\n        <div style={{ padding: 24 }}>\n          {loading ? (\n            <div style={{ textAlign: 'center', padding: 40, color: '#94a3b8' }}>\n              Loading project details...\n            </div>\n          ) : error && !project ? (\n            <div style={{ textAlign: 'center', padding: 40, color: '#ef4444' }}>\n              {error}\n            </div>\n          ) : project && myRole ? (\n            mode === 'view' ? (\n              <>\n                {/* Project Info */}\n                <div style={{ marginBottom: 24 }}>\n                  <div\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: 12,\n                      marginBottom: 12,\n                    }}\n                  >\n                    <span\n                      style={{\n                        background: '#f59e0b20',\n                        color: '#f59e0b',\n                        padding: '4px 12px',\n                        borderRadius: 6,\n                        fontSize: 12,\n                        fontWeight: 600,\n                      }}\n                    >\n                      {contentTypeLabels[project.content_type] || project.content_type}\n                    </span>\n                    <span style={{ color: '#64748b', fontSize: 13 }}>\n                      {project.status === 'draft' ? 'Draft' : 'Active'}\n                    </span>\n                  </div>\n                  <h3 style={{ margin: 0, color: '#f8fafc', fontSize: 24, fontWeight: 700 }}>\n                    {project.title}\n                  </h3>\n                  {project.description && (\n                    <p style={{ margin: '8px 0 0', color: '#94a3b8', fontSize: 14, lineHeight: 1.6 }}>\n                      {project.description}\n                    </p>\n                  )}\n                </div>\n\n                {/* Your Role */}\n                <div\n                  style={{\n                    background: '#1e293b',\n                    borderRadius: 12,\n                    padding: 16,\n                    marginBottom: 20,\n                  }}\n                >\n                  <div style={{ color: '#94a3b8', fontSize: 12, fontWeight: 600, marginBottom: 8, textTransform: 'uppercase' }}>\n                    Your Role\n                  </div>\n                  <div style={{ color: '#f8fafc', fontSize: 18, fontWeight: 600 }}>\n                    {myRole.role || 'Collaborator'}\n                  </div>\n                </div>\n\n                {/* Contract Tasks */}\n                {myRole.contract_tasks && myRole.contract_tasks.length > 0 && (\n                  <div\n                    style={{\n                      background: '#1e293b',\n                      borderRadius: 12,\n                      padding: 16,\n                      marginBottom: 20,\n                    }}\n                  >\n                    <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 12 }}>\n                      <span style={{ fontSize: 18 }}></span>\n                      <span style={{ color: '#94a3b8', fontSize: 12, fontWeight: 600, textTransform: 'uppercase' }}>\n                        Your Contract Tasks ({myRole.contract_tasks.length})\n                      </span>\n                    </div>\n\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: 10 }}>\n                      {myRole.contract_tasks.map((task: any, index: number) => (\n                        <div\n                          key={task.id || index}\n                          style={{\n                            background: '#0f172a',\n                            borderRadius: 8,\n                            padding: 14,\n                            borderLeft: '3px solid #f59e0b',\n                          }}\n                        >\n                          <div style={{ color: '#f8fafc', fontSize: 14, fontWeight: 600 }}>\n                            {task.title}\n                          </div>\n                          {task.description && (\n                            <div style={{ color: '#94a3b8', fontSize: 13, marginTop: 6, lineHeight: 1.5 }}>\n                              {task.description}\n                            </div>\n                          )}\n                          <div\n                            style={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 6,\n                              marginTop: 10,\n                              color: '#f59e0b',\n                              fontSize: 12,\n                              fontWeight: 500,\n                            }}\n                          >\n                            <span></span>\n                            <span>\n                              Due: {new Date(task.deadline).toLocaleDateString('en-US', {\n                                weekday: 'short',\n                                month: 'short',\n                                day: 'numeric',\n                                year: 'numeric',\n                              })}\n                            </span>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n\n                    <div\n                      style={{\n                        marginTop: 16,\n                        padding: 12,\n                        background: 'rgba(245, 158, 11, 0.1)',\n                        borderRadius: 8,\n                        display: 'flex',\n                        alignItems: 'flex-start',\n                        gap: 10,\n                      }}\n                    >\n                      <span style={{ fontSize: 16 }}></span>\n                      <div style={{ color: '#f59e0b', fontSize: 12, lineHeight: 1.5 }}>\n                        <strong>Contract Terms:</strong> By accepting, you commit to completing these tasks\n                        by their deadlines. Tasks become binding and can only be changed via mutual agreement.\n                        Missing deadlines may affect the collaboration.\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Pitch Message */}\n                {notificationMessage && (\n                  <div\n                    style={{\n                      background: '#1e293b',\n                      borderRadius: 12,\n                      padding: 16,\n                      marginBottom: 20,\n                      borderLeft: '3px solid #3b82f6',\n                    }}\n                  >\n                    <div style={{ color: '#94a3b8', fontSize: 12, fontWeight: 600, marginBottom: 8, textTransform: 'uppercase' }}>\n                      Message from @{creator?.username}\n                    </div>\n                    <div style={{ color: '#cbd5e1', fontSize: 14, lineHeight: 1.6, whiteSpace: 'pre-wrap' }}>\n                      {notificationMessage}\n                    </div>\n                  </div>\n                )}\n\n                {/* Revenue Split */}\n                <div\n                  style={{\n                    background: '#1e293b',\n                    borderRadius: 12,\n                    padding: 16,\n                    marginBottom: 20,\n                  }}\n                >\n                  <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 12 }}>\n                    <span style={{ fontSize: 18 }}></span>\n                    <span style={{ color: '#94a3b8', fontSize: 12, fontWeight: 600, textTransform: 'uppercase' }}>\n                      Revenue Split\n                    </span>\n                  </div>\n\n                  {/* Split bar */}\n                  <div style={{ display: 'flex', gap: 4, marginBottom: 8 }}>\n                    <div\n                      style={{\n                        flex: myRole.revenue_percentage,\n                        background: '#f59e0b',\n                        height: 40,\n                        borderRadius: '8px 0 0 8px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        color: '#000',\n                        fontWeight: 700,\n                        fontSize: 14,\n                        minWidth: 60,\n                      }}\n                    >\n                      You: {myRole.revenue_percentage}%\n                    </div>\n                    <div\n                      style={{\n                        flex: othersPercentage,\n                        background: '#334155',\n                        height: 40,\n                        borderRadius: '0 8px 8px 0',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        color: '#cbd5e1',\n                        fontWeight: 600,\n                        fontSize: 14,\n                        minWidth: 60,\n                      }}\n                    >\n                      Others: {othersPercentage}%\n                    </div>\n                  </div>\n                </div>\n\n                {/* Permissions */}\n                <div\n                  style={{\n                    background: '#1e293b',\n                    borderRadius: 12,\n                    padding: 16,\n                    marginBottom: 20,\n                  }}\n                >\n                  <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 12 }}>\n                    <span style={{ fontSize: 18 }}></span>\n                    <span style={{ color: '#94a3b8', fontSize: 12, fontWeight: 600, textTransform: 'uppercase' }}>\n                      Your Permissions\n                    </span>\n                  </div>\n                  <div style={{ display: 'flex', flexWrap: 'wrap', gap: 8 }}>\n                    {[\n                      { key: 'can_edit_text', label: 'Text', value: myRole.can_edit_text },\n                      { key: 'can_edit_images', label: 'Images', value: myRole.can_edit_images },\n                      { key: 'can_edit_audio', label: 'Audio', value: myRole.can_edit_audio },\n                      { key: 'can_edit_video', label: 'Video', value: myRole.can_edit_video },\n                    ].map((perm) => (\n                      <span\n                        key={perm.key}\n                        style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: 6,\n                          padding: '6px 12px',\n                          borderRadius: 6,\n                          background: perm.value ? '#10b98120' : '#64748b20',\n                          color: perm.value ? '#10b981' : '#64748b',\n                          fontSize: 13,\n                          fontWeight: 500,\n                        }}\n                      >\n                        {perm.value ? '' : ''} {perm.label}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n\n                {/* On-Chain Notice */}\n                <div\n                  style={{\n                    background: 'linear-gradient(135deg, #7c3aed20 0%, #3b82f620 100%)',\n                    border: '1px solid #7c3aed40',\n                    borderRadius: 12,\n                    padding: 16,\n                    marginBottom: 24,\n                  }}\n                >\n                  <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 8 }}>\n                    <span style={{ fontSize: 18 }}></span>\n                    <span style={{ color: '#a78bfa', fontSize: 13, fontWeight: 600 }}>\n                      On-Chain Agreement\n                    </span>\n                  </div>\n                  <p style={{ margin: 0, color: '#c4b5fd', fontSize: 13, lineHeight: 1.6 }}>\n                    By accepting, you agree to the revenue split above. When this project is minted as an NFT,\n                    the split will be enforced via smart contract. USDC payments will be distributed automatically.\n                  </p>\n                </div>\n\n                {/* Error/Success Messages */}\n                {error && (\n                  <div\n                    style={{\n                      background: '#ef444420',\n                      border: '1px solid #ef4444',\n                      color: '#fca5a5',\n                      padding: 12,\n                      borderRadius: 8,\n                      fontSize: 13,\n                      marginBottom: 16,\n                    }}\n                  >\n                    {error}\n                  </div>\n                )}\n                {success && (\n                  <div\n                    style={{\n                      background: '#10b98120',\n                      border: '1px solid #10b981',\n                      color: '#6ee7b7',\n                      padding: 12,\n                      borderRadius: 8,\n                      fontSize: 13,\n                      marginBottom: 16,\n                    }}\n                  >\n                    {success}\n                  </div>\n                )}\n\n                {/* Action Buttons */}\n                <div style={{ display: 'flex', gap: 12 }}>\n                  <button\n                    onClick={handleDecline}\n                    disabled={submitting}\n                    style={{\n                      flex: 1,\n                      padding: '14px 20px',\n                      borderRadius: 10,\n                      border: '1px solid #ef4444',\n                      background: 'transparent',\n                      color: '#ef4444',\n                      fontSize: 14,\n                      fontWeight: 600,\n                      cursor: submitting ? 'not-allowed' : 'pointer',\n                      opacity: submitting ? 0.6 : 1,\n                    }}\n                  >\n                    Decline\n                  </button>\n                  <button\n                    onClick={() => setMode('counter-propose')}\n                    disabled={submitting}\n                    style={{\n                      flex: 1,\n                      padding: '14px 20px',\n                      borderRadius: 10,\n                      border: '1px solid #3b82f6',\n                      background: 'transparent',\n                      color: '#3b82f6',\n                      fontSize: 14,\n                      fontWeight: 600,\n                      cursor: submitting ? 'not-allowed' : 'pointer',\n                      opacity: submitting ? 0.6 : 1,\n                    }}\n                  >\n                    Counter-Propose\n                  </button>\n                  <button\n                    onClick={handleAccept}\n                    disabled={submitting}\n                    style={{\n                      flex: 1.5,\n                      padding: '14px 20px',\n                      borderRadius: 10,\n                      border: 'none',\n                      background: '#10b981',\n                      color: '#fff',\n                      fontSize: 14,\n                      fontWeight: 700,\n                      cursor: submitting ? 'not-allowed' : 'pointer',\n                      opacity: submitting ? 0.6 : 1,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      gap: 8,\n                    }}\n                  >\n                    {submitting ? 'Processing...' : ' Accept Invite'}\n                  </button>\n                </div>\n              </>\n            ) : (\n              /* Counter-Propose Mode */\n              <>\n                <button\n                  onClick={() => setMode('view')}\n                  style={{\n                    background: 'transparent',\n                    border: 'none',\n                    color: '#94a3b8',\n                    fontSize: 14,\n                    cursor: 'pointer',\n                    padding: 0,\n                    marginBottom: 16,\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 8,\n                  }}\n                >\n                   Back to invite\n                </button>\n\n                <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 24 }}>\n                  <span style={{ fontSize: 24 }}></span>\n                  <h3 style={{ margin: 0, color: '#f8fafc', fontSize: 20, fontWeight: 600 }}>\n                    Propose Different Terms\n                  </h3>\n                </div>\n\n                {/* Proposed Split */}\n                <div style={{ marginBottom: 24 }}>\n                  <label\n                    style={{\n                      display: 'block',\n                      color: '#94a3b8',\n                      fontSize: 13,\n                      fontWeight: 600,\n                      marginBottom: 12,\n                    }}\n                  >\n                    Suggested Revenue Split: {proposedPercentage}% for you\n                  </label>\n                  <input\n                    type=\"range\"\n                    min={5}\n                    max={95}\n                    step={5}\n                    value={proposedPercentage}\n                    onChange={(e) => setProposedPercentage(parseInt(e.target.value))}\n                    style={{ width: '100%', marginBottom: 8 }}\n                  />\n                  <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: 12, color: '#64748b' }}>\n                    <span>Current offer: {myRole.revenue_percentage}%</span>\n                    <span>Proposing: {proposedPercentage}%</span>\n                  </div>\n\n                  {/* Visual diff */}\n                  {proposedPercentage !== myRole.revenue_percentage && (\n                    <div\n                      style={{\n                        marginTop: 12,\n                        padding: 12,\n                        background: '#1e293b',\n                        borderRadius: 8,\n                        fontSize: 13,\n                      }}\n                    >\n                      <span style={{ color: '#94a3b8' }}>Change: </span>\n                      <span\n                        style={{\n                          color: proposedPercentage > myRole.revenue_percentage ? '#10b981' : '#ef4444',\n                          fontWeight: 600,\n                        }}\n                      >\n                        {myRole.revenue_percentage}%  {proposedPercentage}%\n                        ({proposedPercentage > myRole.revenue_percentage ? '+' : ''}\n                        {proposedPercentage - myRole.revenue_percentage}%)\n                      </span>\n                    </div>\n                  )}\n                </div>\n\n                {/* Message */}\n                <div style={{ marginBottom: 24 }}>\n                  <label\n                    style={{\n                      display: 'block',\n                      color: '#94a3b8',\n                      fontSize: 13,\n                      fontWeight: 600,\n                      marginBottom: 8,\n                    }}\n                  >\n                    Message to @{creator?.username}\n                  </label>\n                  <textarea\n                    value={counterMessage}\n                    onChange={(e) => setCounterMessage(e.target.value)}\n                    placeholder=\"Explain why you'd like a different split...\"\n                    style={{\n                      width: '100%',\n                      minHeight: 120,\n                      background: '#1e293b',\n                      border: '1px solid #334155',\n                      borderRadius: 8,\n                      padding: 12,\n                      color: '#f8fafc',\n                      fontSize: 14,\n                      resize: 'vertical',\n                    }}\n                  />\n                  <div style={{ fontSize: 11, color: '#64748b', marginTop: 4 }}>\n                    {counterMessage.length}/500 characters\n                  </div>\n                </div>\n\n                {/* Error/Success */}\n                {error && (\n                  <div\n                    style={{\n                      background: '#ef444420',\n                      border: '1px solid #ef4444',\n                      color: '#fca5a5',\n                      padding: 12,\n                      borderRadius: 8,\n                      fontSize: 13,\n                      marginBottom: 16,\n                    }}\n                  >\n                    {error}\n                  </div>\n                )}\n                {success && (\n                  <div\n                    style={{\n                      background: '#10b98120',\n                      border: '1px solid #10b981',\n                      color: '#6ee7b7',\n                      padding: 12,\n                      borderRadius: 8,\n                      fontSize: 13,\n                      marginBottom: 16,\n                    }}\n                  >\n                    {success}\n                  </div>\n                )}\n\n                {/* Actions */}\n                <div style={{ display: 'flex', gap: 12 }}>\n                  <button\n                    onClick={() => setMode('view')}\n                    disabled={submitting}\n                    style={{\n                      flex: 1,\n                      padding: '14px 20px',\n                      borderRadius: 10,\n                      border: '1px solid #334155',\n                      background: 'transparent',\n                      color: '#cbd5e1',\n                      fontSize: 14,\n                      fontWeight: 600,\n                      cursor: submitting ? 'not-allowed' : 'pointer',\n                    }}\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={handleCounterPropose}\n                    disabled={submitting || !counterMessage.trim() || counterMessage.length > 500}\n                    style={{\n                      flex: 2,\n                      padding: '14px 20px',\n                      borderRadius: 10,\n                      border: 'none',\n                      background: '#3b82f6',\n                      color: '#fff',\n                      fontSize: 14,\n                      fontWeight: 700,\n                      cursor:\n                        submitting || !counterMessage.trim() || counterMessage.length > 500\n                          ? 'not-allowed'\n                          : 'pointer',\n                      opacity:\n                        submitting || !counterMessage.trim() || counterMessage.length > 500\n                          ? 0.6\n                          : 1,\n                    }}\n                  >\n                    {submitting ? 'Sending...' : 'Send Counter-Offer'}\n                  </button>\n                </div>\n              </>\n            )\n          ) : (\n            <div style={{ textAlign: 'center', padding: 40, color: '#94a3b8' }}>\n              No invite found for this project.\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default InviteResponseModal;\n","/**\n * NotificationDropdown Component\n * Dropdown panel showing recent notifications (last 10)\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useNotifications } from '../../hooks/useNotifications';\nimport { Notification } from '../../services/notificationService';\nimport NotificationItem from './NotificationItem';\nimport { InviteResponseModal } from '../collaboration/InviteResponseModal';\n\ninterface NotificationDropdownProps {\n  isOpen: boolean;\n  onClose: () => void;\n  anchorEl?: HTMLElement | null;\n}\n\nexport function NotificationDropdown({ isOpen, onClose, anchorEl }: NotificationDropdownProps) {\n  const navigate = useNavigate();\n  const panelRef = useRef<HTMLDivElement>(null);\n\n  // State for invite modal\n  const [inviteModalOpen, setInviteModalOpen] = useState(false);\n  const [selectedInvite, setSelectedInvite] = useState<Notification | null>(null);\n\n  const {\n    notifications,\n    unreadCount,\n    isLoading,\n    markAsRead,\n    markAllAsRead,\n    deleteNotification,\n    refresh,\n  } = useNotifications();\n\n  // Get last 10 notifications\n  const recentNotifications = notifications.slice(0, 10);\n\n  // Handle viewing an invite\n  const handleViewInvite = async (notification: Notification) => {\n    // Mark as read\n    if (!notification.read) {\n      await markAsRead(notification.id);\n    }\n    setSelectedInvite(notification);\n    setInviteModalOpen(true);\n  };\n\n  // Close invite modal\n  const handleCloseInviteModal = () => {\n    setInviteModalOpen(false);\n    setSelectedInvite(null);\n    refresh(); // Refresh notifications after modal closes\n  };\n\n  // Close panel when clicking outside\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        panelRef.current &&\n        !panelRef.current.contains(event.target as Node) &&\n        anchorEl &&\n        !anchorEl.contains(event.target as Node)\n      ) {\n        onClose();\n      }\n    };\n\n    const timer = setTimeout(() => {\n      document.addEventListener('mousedown', handleClickOutside);\n    }, 100);\n\n    return () => {\n      clearTimeout(timer);\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen, onClose, anchorEl]);\n\n  // Close on escape key\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const handleEscape = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [isOpen, onClose]);\n\n  // Refresh notifications when panel opens\n  useEffect(() => {\n    if (isOpen) {\n      refresh();\n    }\n  }, [isOpen, refresh]);\n\n  const handleNotificationClick = async (notification: any) => {\n    // Mark as read\n    if (!notification.read) {\n      await markAsRead(notification.id);\n    }\n\n    // Navigate to action URL if provided\n    if (notification.action_url) {\n      navigate(notification.action_url);\n      onClose();\n    } else if (notification.project_id) {\n      navigate(`/collaborations/${notification.project_id}`);\n      onClose();\n    }\n  };\n\n  const handleMarkAllRead = async () => {\n    try {\n      await markAllAsRead();\n    } catch (error) {\n      console.error('Failed to mark all as read:', error);\n    }\n  };\n\n  const handleDelete = async (e: React.MouseEvent, notificationId: number) => {\n    e.stopPropagation();\n    try {\n      await deleteNotification(notificationId);\n    } catch (error) {\n      console.error('Failed to delete notification:', error);\n    }\n  };\n\n  const handleViewAll = () => {\n    navigate('/notifications');\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      ref={panelRef}\n      role=\"dialog\"\n      aria-label=\"Notifications\"\n      aria-modal=\"false\"\n      style={{\n        position: 'absolute',\n        top: '100%',\n        right: 0,\n        marginTop: 8,\n        width: 420,\n        maxHeight: 600,\n        background: '#0f172a',\n        border: '1px solid #1f2937',\n        borderRadius: 12,\n        boxShadow: '0 10px 40px rgba(0, 0, 0, 0.5)',\n        zIndex: 3000,\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Header */}\n      <div\n        style={{\n          padding: '16px 20px',\n          borderBottom: '1px solid #1f2937',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}\n      >\n        <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n          <h3 style={{ fontSize: 16, fontWeight: 700, color: '#e5e7eb', margin: 0 }}>\n            Notifications\n          </h3>\n          {unreadCount > 0 && (\n            <div\n              aria-label={`${unreadCount} unread`}\n              style={{\n                background: '#ef4444',\n                color: '#fff',\n                fontSize: 11,\n                fontWeight: 700,\n                padding: '2px 8px',\n                borderRadius: 10,\n                minWidth: 20,\n                textAlign: 'center',\n              }}\n            >\n              {unreadCount}\n            </div>\n          )}\n        </div>\n\n        {recentNotifications.length > 0 && unreadCount > 0 && (\n          <button\n            onClick={handleMarkAllRead}\n            aria-label=\"Mark all as read\"\n            style={{\n              background: 'transparent',\n              color: '#3b82f6',\n              border: 'none',\n              fontSize: 12,\n              fontWeight: 600,\n              cursor: 'pointer',\n              padding: '4px 8px',\n              borderRadius: 4,\n              transition: 'all 0.2s',\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.background = '#1e293b';\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.background = 'transparent';\n            }}\n          >\n            Mark All Read\n          </button>\n        )}\n      </div>\n\n      {/* Content */}\n      <div\n        style={{\n          flex: 1,\n          overflowY: 'auto',\n          maxHeight: 500,\n        }}\n      >\n        {isLoading && recentNotifications.length === 0 ? (\n          <div\n            style={{\n              padding: 40,\n              textAlign: 'center',\n              color: '#94a3b8',\n              fontSize: 14,\n            }}\n          >\n            Loading notifications...\n          </div>\n        ) : recentNotifications.length === 0 ? (\n          <div\n            style={{\n              padding: 40,\n              textAlign: 'center',\n              color: '#94a3b8',\n            }}\n          >\n            <div style={{ fontSize: 48, marginBottom: 12 }} aria-hidden=\"true\">\n              \n            </div>\n            <div style={{ fontSize: 14, fontWeight: 600, marginBottom: 4 }}>\n              No notifications yet\n            </div>\n            <div style={{ fontSize: 12, color: '#64748b' }}>\n              We'll notify you when there's activity on your collaborations\n            </div>\n          </div>\n        ) : (\n          <div style={{ padding: '8px 0' }}>\n            {recentNotifications.map((notification) => (\n              <NotificationItem\n                key={notification.id}\n                notification={notification}\n                onClick={() => handleNotificationClick(notification)}\n                onDelete={(e) => handleDelete(e, notification.id)}\n                onViewInvite={handleViewInvite}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Footer */}\n      {recentNotifications.length > 0 && (\n        <div\n          style={{\n            padding: '12px 20px',\n            borderTop: '1px solid #1f2937',\n            display: 'flex',\n            gap: 8,\n          }}\n        >\n          {notifications.length > 10 && (\n            <button\n              onClick={handleViewAll}\n              aria-label=\"View all notifications\"\n              style={{\n                background: 'transparent',\n                color: '#3b82f6',\n                border: 'none',\n                fontSize: 13,\n                fontWeight: 600,\n                cursor: 'pointer',\n                padding: '6px 12px',\n                borderRadius: 6,\n                flex: 1,\n                transition: 'all 0.2s',\n              }}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.background = '#1e293b';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.background = 'transparent';\n              }}\n            >\n              View All\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Invite Response Modal */}\n      {selectedInvite && selectedInvite.project_id && (\n        <InviteResponseModal\n          open={inviteModalOpen}\n          onClose={handleCloseInviteModal}\n          projectId={selectedInvite.project_id}\n          notificationMessage={selectedInvite.message}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default NotificationDropdown;\n","/**\n * NotificationBell Component\n * Bell icon with unread count badge for navbar\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Bell } from 'lucide-react';\nimport { useUnreadCount } from '../../hooks/useNotifications';\nimport { events } from '../../services/notificationService';\nimport NotificationDropdown from './NotificationDropdown';\n\nexport function NotificationBell() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const bellRef = useRef<HTMLButtonElement>(null);\n  const { unreadCount } = useUnreadCount();\n\n  // Animate bell when new notifications arrive\n  useEffect(() => {\n    const unsubscribe = events.on('notifications:new', () => {\n      setIsAnimating(true);\n      setTimeout(() => setIsAnimating(false), 1000);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const toggleDropdown = () => {\n    setIsOpen(!isOpen);\n  };\n\n  return (\n    <div style={{ position: 'relative' }}>\n      <button\n        ref={bellRef}\n        onClick={toggleDropdown}\n        aria-label={`Notifications${unreadCount > 0 ? ` (${unreadCount} unread)` : ''}`}\n        aria-expanded={isOpen}\n        aria-haspopup=\"true\"\n        className=\"rb-nav-link\"\n        style={{\n          position: 'relative',\n        }}\n        title=\"Notifications\"\n      >\n        <Bell\n          size={20}\n          style={{\n            animation: isAnimating ? 'ring 1s ease-in-out' : 'none',\n            transformOrigin: 'top center',\n          }}\n        />\n        {unreadCount > 0 && (\n          <span\n            style={{\n              position: 'absolute',\n              top: 4,\n              right: 4,\n              background: '#ef4444',\n              color: '#fff',\n              fontSize: 10,\n              fontWeight: 700,\n              padding: '2px 6px',\n              borderRadius: 10,\n              minWidth: 18,\n              textAlign: 'center',\n              boxShadow: '0 0 8px rgba(239, 68, 68, 0.5)',\n            }}\n            aria-label={`${unreadCount} unread notifications`}\n          >\n            {unreadCount}\n          </span>\n        )}\n      </button>\n\n      <NotificationDropdown\n        isOpen={isOpen}\n        onClose={() => setIsOpen(false)}\n        anchorEl={bellRef.current}\n      />\n\n      {/* Keyframes for bell animation */}\n      <style>{`\n        @keyframes ring {\n          0%, 100% { transform: rotate(0deg); }\n          10%, 30%, 50%, 70% { transform: rotate(15deg); }\n          20%, 40%, 60%, 80% { transform: rotate(-15deg); }\n          90% { transform: rotate(5deg); }\n        }\n      `}</style>\n    </div>\n  );\n}\n\nexport default NotificationBell;\n","/**\n * NotificationToast Component\n * Toast notification with auto-dismiss and action buttons\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Notification,\n  getNotificationIcon,\n  getNotificationColor,\n} from '../../services/notificationService';\n\ninterface NotificationToastProps {\n  notification: Notification;\n  onDismiss: () => void;\n  autoDismissMs?: number;\n}\n\nexport function NotificationToast({\n  notification,\n  onDismiss,\n  autoDismissMs = 5000,\n}: NotificationToastProps) {\n  const navigate = useNavigate();\n  const [isExiting, setIsExiting] = useState(false);\n  const icon = getNotificationIcon(notification.type);\n  const color = getNotificationColor(notification.type);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      handleDismiss();\n    }, autoDismissMs);\n\n    return () => clearTimeout(timer);\n  }, [autoDismissMs]);\n\n  const handleDismiss = () => {\n    setIsExiting(true);\n    setTimeout(() => {\n      onDismiss();\n    }, 300); // Match animation duration\n  };\n\n  const handleView = () => {\n    if (notification.action_url) {\n      navigate(notification.action_url);\n    } else if (notification.project_id) {\n      navigate(`/collaborations/${notification.project_id}`);\n    }\n    handleDismiss();\n  };\n\n  return (\n    <div\n      role=\"alert\"\n      aria-live=\"polite\"\n      aria-atomic=\"true\"\n      style={{\n        width: 380,\n        background: '#1e293b',\n        border: `1px solid ${color}40`,\n        borderLeft: `4px solid ${color}`,\n        borderRadius: 8,\n        boxShadow: '0 10px 40px rgba(0, 0, 0, 0.3)',\n        overflow: 'hidden',\n        marginBottom: 12,\n        animation: isExiting\n          ? 'slideOut 0.3s ease-out forwards'\n          : 'slideIn 0.3s ease-out',\n      }}\n    >\n      {/* Progress bar */}\n      <div\n        style={{\n          height: 3,\n          background: `linear-gradient(90deg, ${color} 0%, transparent 100%)`,\n          animation: `progress ${autoDismissMs}ms linear forwards`,\n        }}\n      />\n\n      <div style={{ padding: '16px' }}>\n        {/* Header */}\n        <div style={{ display: 'flex', alignItems: 'flex-start', gap: 12, marginBottom: 12 }}>\n          <div\n            style={{\n              fontSize: 24,\n              width: 40,\n              height: 40,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              background: `${color}20`,\n              borderRadius: 8,\n              flexShrink: 0,\n            }}\n            aria-hidden=\"true\"\n          >\n            {icon}\n          </div>\n\n          <div style={{ flex: 1, minWidth: 0 }}>\n            <div\n              style={{\n                fontSize: 14,\n                fontWeight: 700,\n                color: '#e5e7eb',\n                marginBottom: 4,\n                lineHeight: 1.3,\n              }}\n            >\n              {notification.title}\n            </div>\n            <div\n              style={{\n                fontSize: 13,\n                color: '#94a3b8',\n                lineHeight: 1.4,\n              }}\n            >\n              {notification.message}\n            </div>\n          </div>\n\n          <button\n            onClick={handleDismiss}\n            aria-label=\"Dismiss notification\"\n            style={{\n              background: 'transparent',\n              border: 'none',\n              color: '#64748b',\n              cursor: 'pointer',\n              padding: 4,\n              fontSize: 20,\n              lineHeight: 1,\n              transition: 'color 0.2s',\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.color = '#e5e7eb';\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.color = '#64748b';\n            }}\n          >\n            \n          </button>\n        </div>\n\n        {/* Actions */}\n        <div style={{ display: 'flex', gap: 8 }}>\n          {(notification.action_url || notification.project_id) && (\n            <button\n              onClick={handleView}\n              style={{\n                background: color,\n                color: '#fff',\n                border: 'none',\n                borderRadius: 6,\n                padding: '6px 16px',\n                fontSize: 13,\n                fontWeight: 600,\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n              }}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.opacity = '0.9';\n                e.currentTarget.style.transform = 'translateY(-1px)';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.opacity = '1';\n                e.currentTarget.style.transform = 'translateY(0)';\n              }}\n            >\n              View\n            </button>\n          )}\n          <button\n            onClick={handleDismiss}\n            style={{\n              background: 'transparent',\n              color: '#94a3b8',\n              border: '1px solid #334155',\n              borderRadius: 6,\n              padding: '6px 16px',\n              fontSize: 13,\n              fontWeight: 600,\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.background = '#334155';\n              e.currentTarget.style.color = '#e5e7eb';\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.background = 'transparent';\n              e.currentTarget.style.color = '#94a3b8';\n            }}\n          >\n            Dismiss\n          </button>\n        </div>\n      </div>\n\n      {/* Animations */}\n      <style>{`\n        @keyframes slideIn {\n          from {\n            transform: translateX(400px);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n\n        @keyframes slideOut {\n          from {\n            transform: translateX(0);\n            opacity: 1;\n          }\n          to {\n            transform: translateX(400px);\n            opacity: 0;\n          }\n        }\n\n        @keyframes progress {\n          from {\n            transform: scaleX(1);\n          }\n          to {\n            transform: scaleX(0);\n          }\n        }\n      `}</style>\n    </div>\n  );\n}\n\nexport default NotificationToast;\n","/**\n * NotificationToastContainer Component\n * Manages and displays multiple toast notifications in a stack\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { events, Notification } from '../../services/notificationService';\nimport NotificationToast from './NotificationToast';\n\nexport function NotificationToastContainer() {\n  const [toasts, setToasts] = useState<Notification[]>([]);\n\n  useEffect(() => {\n    // Subscribe to new notifications event\n    const unsubscribe = events.on('notifications:new', ({ notifications }) => {\n      // Add new notifications to toast queue\n      setToasts((prev) => [...prev, ...notifications]);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const handleDismiss = (notificationId: number) => {\n    setToasts((prev) => prev.filter((n) => n.id !== notificationId));\n  };\n\n  if (toasts.length === 0) return null;\n\n  return (\n    <div\n      aria-live=\"polite\"\n      aria-atomic=\"false\"\n      style={{\n        position: 'fixed',\n        top: 80,\n        right: 20,\n        zIndex: 9999,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'flex-end',\n        pointerEvents: 'none',\n      }}\n    >\n      <div style={{ pointerEvents: 'auto' }}>\n        {toasts.map((notification) => (\n          <NotificationToast\n            key={notification.id}\n            notification={notification}\n            onDismiss={() => handleDismiss(notification.id)}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default NotificationToastContainer;\n","import React, { useState } from 'react';\nimport { API_URL } from '../config';\n\ninterface FeedbackModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function FeedbackModal({ isOpen, onClose }: FeedbackModalProps) {\n  const [feedback, setFeedback] = useState('');\n  const [email, setEmail] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState('');\n\n  if (!isOpen) return null;\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setSubmitting(true);\n    setError('');\n\n    try {\n      // Send feedback to backend\n      const response = await fetch(`${API_URL}/api/feedback/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          feedback: feedback,\n          email: email || 'anonymous',\n        }),\n      });\n\n      if (response.ok) {\n        setSubmitted(true);\n        setFeedback('');\n        setEmail('');\n        setTimeout(() => {\n          onClose();\n          setSubmitted(false);\n        }, 2000);\n      } else {\n        setError('Failed to submit feedback. Please try again.');\n      }\n    } catch (err) {\n      console.error('Feedback error:', err);\n      setError('Network error. Please try again later.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: 'rgba(0, 0, 0, 0.8)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 9999,\n        padding: '20px',\n      }}\n      onClick={onClose}\n    >\n      <div\n        style={{\n          background: '#1a1f2e',\n          border: '1px solid #2a3444',\n          borderRadius: '16px',\n          padding: '32px',\n          maxWidth: '500px',\n          width: '100%',\n          boxShadow: '0 20px 60px rgba(0, 0, 0, 0.5)',\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {submitted ? (\n          <div style={{ textAlign: 'center' }}>\n            <div style={{ fontSize: '48px', marginBottom: '16px' }}></div>\n            <h2 style={{ fontSize: '24px', fontWeight: 700, color: '#10b981', margin: '0 0 8px 0' }}>\n              Thank You!\n            </h2>\n            <p style={{ fontSize: '14px', color: '#94a3b8', margin: 0 }}>\n              Your feedback helps us improve renaissBlock\n            </p>\n          </div>\n        ) : (\n          <>\n            {/* Header */}\n            <div style={{ marginBottom: '24px' }}>\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '8px' }}>\n                <h2 style={{ fontSize: '24px', fontWeight: 700, color: '#e5e7eb', margin: 0 }}>\n                  Beta Feedback\n                </h2>\n                <button\n                  onClick={onClose}\n                  style={{\n                    background: 'transparent',\n                    border: 'none',\n                    color: '#94a3b8',\n                    fontSize: '24px',\n                    cursor: 'pointer',\n                    padding: '0',\n                    lineHeight: 1,\n                  }}\n                >\n                  \n                </button>\n              </div>\n              <p style={{ fontSize: '14px', color: '#94a3b8', margin: 0 }}>\n                Help us improve by sharing your thoughts, bugs, or feature requests\n              </p>\n            </div>\n\n            {/* Form */}\n            <form onSubmit={handleSubmit} style={{ display: 'grid', gap: '16px' }}>\n              <div>\n                <label style={{ display: 'block', fontSize: '13px', color: '#cbd5e1', marginBottom: '8px', fontWeight: 600 }}>\n                  Your Feedback *\n                </label>\n                <textarea\n                  value={feedback}\n                  onChange={(e) => setFeedback(e.target.value)}\n                  placeholder=\"Tell us what you think! Include bugs, feature requests, or general feedback...\"\n                  required\n                  rows={6}\n                  style={{\n                    width: '100%',\n                    padding: '12px',\n                    background: '#0f1419',\n                    border: '1px solid #2a3444',\n                    borderRadius: '8px',\n                    color: '#e5e7eb',\n                    fontSize: '14px',\n                    fontFamily: 'inherit',\n                    resize: 'vertical',\n                  }}\n                />\n              </div>\n\n              <div>\n                <label style={{ display: 'block', fontSize: '13px', color: '#cbd5e1', marginBottom: '8px', fontWeight: 600 }}>\n                  Email (optional)\n                </label>\n                <input\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  placeholder=\"your@email.com (if you'd like a response)\"\n                  style={{\n                    width: '100%',\n                    padding: '12px',\n                    background: '#0f1419',\n                    border: '1px solid #2a3444',\n                    borderRadius: '8px',\n                    color: '#e5e7eb',\n                    fontSize: '14px',\n                  }}\n                />\n              </div>\n\n              {error && (\n                <div style={{\n                  padding: '12px',\n                  background: '#fee2e2',\n                  color: '#dc2626',\n                  borderRadius: '8px',\n                  fontSize: '14px',\n                }}>\n                  {error}\n                </div>\n              )}\n\n              <button\n                type=\"submit\"\n                disabled={submitting || !feedback.trim()}\n                style={{\n                  background: submitting ? '#94a3b8' : 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                  color: '#000',\n                  border: 'none',\n                  padding: '14px 24px',\n                  borderRadius: '8px',\n                  fontSize: '16px',\n                  fontWeight: 700,\n                  cursor: submitting ? 'not-allowed' : 'pointer',\n                  width: '100%',\n                }}\n              >\n                {submitting ? 'Submitting...' : 'Submit Feedback'}\n              </button>\n            </form>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default FeedbackModal;\n","import React, { useState } from 'react';\nimport FeedbackModal from './FeedbackModal';\nimport { MessageSquare } from 'lucide-react';\n\ninterface BetaBadgeProps {\n  variant?: 'header' | 'inline' | 'full';\n  showTestMode?: boolean;\n}\n\nexport function BetaBadge({ variant = 'header', showTestMode = true }: BetaBadgeProps) {\n  if (variant === 'header') {\n    return (\n      <div\n        style={{\n          display: 'inline-flex',\n          alignItems: 'center',\n          gap: '8px',\n          background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n          padding: '4px 12px',\n          borderRadius: '6px',\n          fontSize: '12px',\n          fontWeight: 700,\n          color: '#000',\n          letterSpacing: '0.5px',\n          boxShadow: '0 2px 8px rgba(245, 158, 11, 0.3)',\n        }}\n      >\n        <span>BETA</span>\n        {showTestMode && (\n          <span\n            style={{\n              background: 'rgba(0, 0, 0, 0.2)',\n              padding: '2px 6px',\n              borderRadius: '4px',\n              fontSize: '10px',\n            }}\n          >\n            TEST MODE\n          </span>\n        )}\n      </div>\n    );\n  }\n\n  if (variant === 'inline') {\n    return (\n      <span\n        style={{\n          display: 'inline-block',\n          background: '#f59e0b',\n          color: '#000',\n          padding: '2px 8px',\n          borderRadius: '4px',\n          fontSize: '11px',\n          fontWeight: 700,\n          letterSpacing: '0.5px',\n          marginLeft: '8px',\n        }}\n      >\n        BETA\n      </span>\n    );\n  }\n\n  if (variant === 'full') {\n    return (\n      <div\n        style={{\n          background: 'linear-gradient(135deg, #f59e0b15 0%, #d9770615 100%)',\n          border: '1px solid #f59e0b40',\n          borderRadius: '12px',\n          padding: '16px 20px',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '16px',\n        }}\n      >\n        <div\n          style={{\n            background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n            padding: '8px 16px',\n            borderRadius: '8px',\n            fontSize: '14px',\n            fontWeight: 700,\n            color: '#000',\n            letterSpacing: '0.5px',\n            whiteSpace: 'nowrap',\n          }}\n        >\n          BETA\n        </div>\n        <div style={{ flex: 1 }}>\n          <div style={{ fontSize: '14px', fontWeight: 600, color: '#e5e7eb', marginBottom: '4px' }}>\n            You're in the Beta!\n          </div>\n          <div style={{ fontSize: '13px', color: '#94a3b8', lineHeight: 1.4 }}>\n            Help us improve by{' '}\n            <a\n              href=\"mailto:feedback@renaissblock.com\"\n              style={{\n                color: '#f59e0b',\n                textDecoration: 'none',\n                fontWeight: 600,\n              }}\n            >\n              sharing feedback\n            </a>\n            . All transactions are in test mode.\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n}\n\nexport function TestModeBanner() {\n  const [showFeedback, setShowFeedback] = useState(false);\n\n  return (\n    <>\n      <button\n        onClick={() => setShowFeedback(true)}\n        style={{\n          position: 'fixed',\n          bottom: 20,\n          right: 20,\n          background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n          color: '#000',\n          border: 'none',\n          padding: '12px 20px',\n          borderRadius: '30px',\n          fontSize: '14px',\n          fontWeight: 700,\n          cursor: 'pointer',\n          zIndex: 1000,\n          boxShadow: '0 4px 12px rgba(245, 158, 11, 0.4)',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '8px',\n          transition: 'transform 0.2s, box-shadow 0.2s',\n        }}\n        onMouseEnter={(e) => {\n          e.currentTarget.style.transform = 'scale(1.05)';\n          e.currentTarget.style.boxShadow = '0 6px 16px rgba(245, 158, 11, 0.5)';\n        }}\n        onMouseLeave={(e) => {\n          e.currentTarget.style.transform = 'scale(1)';\n          e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.4)';\n        }}\n        title=\"Send feedback about the beta\"\n      >\n        <MessageSquare size={18} />\n        Feedback\n      </button>\n      <FeedbackModal isOpen={showFeedback} onClose={() => setShowFeedback(false)} />\n    </>\n  );\n}\n\nexport function BetaWelcomeModal({ onClose }: { onClose: () => void }) {\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: 'rgba(0, 0, 0, 0.8)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 9999,\n        padding: '20px',\n      }}\n      onClick={onClose}\n    >\n      <div\n        style={{\n          background: '#1a1f2e',\n          border: '1px solid #2a3444',\n          borderRadius: '16px',\n          padding: '32px',\n          maxWidth: '500px',\n          width: '100%',\n          boxShadow: '0 20px 60px rgba(0, 0, 0, 0.5)',\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div style={{ textAlign: 'center', marginBottom: '24px' }}>\n          <div\n            style={{\n              display: 'inline-block',\n              background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n              padding: '12px 24px',\n              borderRadius: '12px',\n              fontSize: '18px',\n              fontWeight: 700,\n              color: '#000',\n              letterSpacing: '1px',\n              marginBottom: '16px',\n            }}\n          >\n            BETA TESTER\n          </div>\n          <h2 style={{ fontSize: '24px', fontWeight: 700, color: '#e5e7eb', margin: '0 0 8px 0' }}>\n            Welcome to renaissBlock Beta!\n          </h2>\n          <p style={{ fontSize: '14px', color: '#94a3b8', margin: 0 }}>\n            You're one of the first creators to experience the future\n          </p>\n        </div>\n\n        {/* Content */}\n        <div style={{ marginBottom: '24px' }}>\n          <div style={{ marginBottom: '16px' }}>\n            <div style={{ fontSize: '14px', fontWeight: 600, color: '#f59e0b', marginBottom: '8px' }}>\n               Test Mode Active\n            </div>\n            <ul style={{ fontSize: '13px', color: '#cbd5e1', margin: '0', paddingLeft: '20px', lineHeight: 1.6 }}>\n              <li>No real money charged (use test card: 4242 4242 4242 4242)</li>\n              <li>Blockchain features use Solana devnet (fake SOL)</li>\n              <li>Some features still being polished</li>\n            </ul>\n          </div>\n\n          <div style={{ marginBottom: '16px' }}>\n            <div style={{ fontSize: '14px', fontWeight: 600, color: '#f59e0b', marginBottom: '8px' }}>\n               What to Try\n            </div>\n            <ul style={{ fontSize: '13px', color: '#cbd5e1', margin: '0', paddingLeft: '20px', lineHeight: 1.6 }}>\n              <li>Create and publish your first content</li>\n              <li>Collaborate with other beta testers</li>\n              <li>Test the purchase and reading experience</li>\n            </ul>\n          </div>\n\n          <div\n            style={{\n              background: '#f59e0b20',\n              border: '1px solid #f59e0b40',\n              borderRadius: '8px',\n              padding: '12px',\n              marginTop: '16px',\n            }}\n          >\n            <div style={{ fontSize: '13px', color: '#fbbf24', fontWeight: 600, marginBottom: '4px' }}>\n               Beta Perks\n            </div>\n            <p style={{ fontSize: '12px', color: '#cbd5e1', margin: 0, lineHeight: 1.5 }}>\n              As a beta tester, you'll get early access to new features and special recognition when we launch!\n            </p>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div style={{ textAlign: 'center' }}>\n          <button\n            onClick={onClose}\n            style={{\n              background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n              color: '#000',\n              border: 'none',\n              padding: '12px 32px',\n              borderRadius: '8px',\n              fontSize: '14px',\n              fontWeight: 700,\n              cursor: 'pointer',\n              width: '100%',\n              marginBottom: '12px',\n            }}\n          >\n            Let's Go! \n          </button>\n          <div style={{ fontSize: '12px', color: '#64748b' }}>\n            Questions?{' '}\n            <a\n              href=\"mailto:feedback@renaissblock.com\"\n              style={{ color: '#f59e0b', textDecoration: 'none', fontWeight: 600 }}\n            >\n              feedback@renaissblock.com\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Tour Context - User walkthrough/onboarding tour management\n *\n * Manages tour state for both consumer and creator tracks.\n * Persists completion status in localStorage.\n */\n\nimport React, { createContext, useContext, useState, useCallback, useEffect } from 'react';\nimport { useAuth } from '../hooks/useAuth';\n\n// Tour types - separated by user journey\nexport type ConsumerTour = 'welcome' | 'purchase' | 'library';\nexport type CreatorTour = 'creator-intro' | 'studio' | 'dashboard' | 'collaboration';\nexport type TourName = ConsumerTour | CreatorTour;\n\nexport interface TourState {\n  activeTour: TourName | null;\n  stepIndex: number;\n  isRunning: boolean;\n  completedTours: TourName[];\n  toursEnabled: boolean;\n}\n\nexport interface TourContextType {\n  // State\n  state: TourState;\n\n  // Actions\n  startTour: (tourName: TourName) => void;\n  endTour: () => void;\n  skipTour: () => void;\n  nextStep: () => void;\n  prevStep: () => void;\n  goToStep: (index: number) => void;\n  resetTour: (tourName: TourName) => void;\n  resetAllTours: () => void;\n\n  // Helpers\n  hasCompletedTour: (tourName: TourName) => boolean;\n  isConsumerTour: (tourName: TourName) => boolean;\n  isCreatorTour: (tourName: TourName) => boolean;\n  setToursEnabled: (enabled: boolean) => void;\n}\n\nconst TourContext = createContext<TourContextType | undefined>(undefined);\n\n// LocalStorage keys\nconst STORAGE_KEYS = {\n  completedTours: 'rb_tour_completed',\n  toursEnabled: 'rb_tours_enabled',\n  userId: 'rb_tour_user_id',\n};\n\n// Consumer tours (for all users)\nconst CONSUMER_TOURS: ConsumerTour[] = ['welcome', 'purchase', 'library'];\n\n// Creator tours (for users who visit /studio)\nconst CREATOR_TOURS: CreatorTour[] = ['creator-intro', 'studio', 'dashboard', 'collaboration'];\n\nexport function TourProvider({ children }: { children: React.ReactNode }) {\n  const { user, isAuthenticated } = useAuth();\n\n  const [state, setState] = useState<TourState>({\n    activeTour: null,\n    stepIndex: 0,\n    isRunning: false,\n    completedTours: [],\n    toursEnabled: true,\n  });\n\n  // Load completed tours from localStorage on mount and when user changes\n  useEffect(() => {\n    if (!isAuthenticated || !user) {\n      // Reset state if not authenticated\n      setState(prev => ({\n        ...prev,\n        completedTours: [],\n        activeTour: null,\n        isRunning: false,\n      }));\n      return;\n    }\n\n    const storedUserId = localStorage.getItem(STORAGE_KEYS.userId);\n    const currentUserId = String(user.id);\n\n    // If different user, reset tour completion\n    if (storedUserId && storedUserId !== currentUserId) {\n      localStorage.removeItem(STORAGE_KEYS.completedTours);\n    }\n\n    // Store current user ID\n    localStorage.setItem(STORAGE_KEYS.userId, currentUserId);\n\n    // Load completed tours\n    const storedTours = localStorage.getItem(STORAGE_KEYS.completedTours);\n    const completedTours: TourName[] = storedTours ? JSON.parse(storedTours) : [];\n\n    // Load tours enabled preference\n    const storedEnabled = localStorage.getItem(STORAGE_KEYS.toursEnabled);\n    const toursEnabled = storedEnabled !== 'false';\n\n    setState(prev => ({\n      ...prev,\n      completedTours,\n      toursEnabled,\n    }));\n  }, [isAuthenticated, user]);\n\n  // Save completed tours to localStorage whenever they change\n  const saveCompletedTours = useCallback((tours: TourName[]) => {\n    localStorage.setItem(STORAGE_KEYS.completedTours, JSON.stringify(tours));\n  }, []);\n\n  const startTour = useCallback((tourName: TourName) => {\n    if (!state.toursEnabled) return;\n\n    setState(prev => ({\n      ...prev,\n      activeTour: tourName,\n      stepIndex: 0,\n      isRunning: true,\n    }));\n  }, [state.toursEnabled]);\n\n  const endTour = useCallback(() => {\n    setState(prev => {\n      if (!prev.activeTour) return prev;\n\n      const newCompletedTours = prev.completedTours.includes(prev.activeTour)\n        ? prev.completedTours\n        : [...prev.completedTours, prev.activeTour];\n\n      saveCompletedTours(newCompletedTours);\n\n      return {\n        ...prev,\n        activeTour: null,\n        stepIndex: 0,\n        isRunning: false,\n        completedTours: newCompletedTours,\n      };\n    });\n  }, [saveCompletedTours]);\n\n  const skipTour = useCallback(() => {\n    setState(prev => {\n      if (!prev.activeTour) return prev;\n\n      // Mark as completed even when skipped\n      const newCompletedTours = prev.completedTours.includes(prev.activeTour)\n        ? prev.completedTours\n        : [...prev.completedTours, prev.activeTour];\n\n      saveCompletedTours(newCompletedTours);\n\n      return {\n        ...prev,\n        activeTour: null,\n        stepIndex: 0,\n        isRunning: false,\n        completedTours: newCompletedTours,\n      };\n    });\n  }, [saveCompletedTours]);\n\n  const nextStep = useCallback(() => {\n    setState(prev => ({\n      ...prev,\n      stepIndex: prev.stepIndex + 1,\n    }));\n  }, []);\n\n  const prevStep = useCallback(() => {\n    setState(prev => ({\n      ...prev,\n      stepIndex: Math.max(0, prev.stepIndex - 1),\n    }));\n  }, []);\n\n  const goToStep = useCallback((index: number) => {\n    setState(prev => ({\n      ...prev,\n      stepIndex: Math.max(0, index),\n    }));\n  }, []);\n\n  const resetTour = useCallback((tourName: TourName) => {\n    setState(prev => {\n      const newCompletedTours = prev.completedTours.filter(t => t !== tourName);\n      saveCompletedTours(newCompletedTours);\n      return {\n        ...prev,\n        completedTours: newCompletedTours,\n      };\n    });\n  }, [saveCompletedTours]);\n\n  const resetAllTours = useCallback(() => {\n    localStorage.removeItem(STORAGE_KEYS.completedTours);\n    setState(prev => ({\n      ...prev,\n      completedTours: [],\n    }));\n  }, []);\n\n  const hasCompletedTour = useCallback((tourName: TourName) => {\n    return state.completedTours.includes(tourName);\n  }, [state.completedTours]);\n\n  const isConsumerTour = useCallback((tourName: TourName) => {\n    return CONSUMER_TOURS.includes(tourName as ConsumerTour);\n  }, []);\n\n  const isCreatorTour = useCallback((tourName: TourName) => {\n    return CREATOR_TOURS.includes(tourName as CreatorTour);\n  }, []);\n\n  const setToursEnabled = useCallback((enabled: boolean) => {\n    localStorage.setItem(STORAGE_KEYS.toursEnabled, String(enabled));\n    setState(prev => ({\n      ...prev,\n      toursEnabled: enabled,\n      // Stop any running tour if disabling\n      ...(enabled ? {} : { activeTour: null, isRunning: false }),\n    }));\n  }, []);\n\n  return (\n    <TourContext.Provider\n      value={{\n        state,\n        startTour,\n        endTour,\n        skipTour,\n        nextStep,\n        prevStep,\n        goToStep,\n        resetTour,\n        resetAllTours,\n        hasCompletedTour,\n        isConsumerTour,\n        isCreatorTour,\n        setToursEnabled,\n      }}\n    >\n      {children}\n    </TourContext.Provider>\n  );\n}\n\nexport function useTour() {\n  const context = useContext(TourContext);\n  if (!context) {\n    throw new Error('useTour must be used within TourProvider');\n  }\n  return context;\n}\n\nexport default TourContext;\n","import React, { useEffect, useState } from 'react';\nimport { BetaWelcomeModal } from './BetaBadge';\nimport { useAuth } from '../hooks/useAuth';\nimport { useTour } from '../contexts/TourContext';\n\n/**\n * BetaOnboarding Component\n *\n * Shows welcome modal to new beta users on first login\n * Stores completion in localStorage to avoid showing again\n * Triggers the welcome tour after the modal is closed\n */\nexport function BetaOnboarding() {\n  const { isAuthenticated, user } = useAuth();\n  const { startTour, hasCompletedTour } = useTour();\n  const [showWelcome, setShowWelcome] = useState(false);\n\n  useEffect(() => {\n    if (!isAuthenticated || !user) {\n      return;\n    }\n\n    // Check if user has seen the welcome modal\n    const hasSeenWelcome = localStorage.getItem('beta_welcome_seen');\n    const lastSeenUserId = localStorage.getItem('beta_welcome_user_id');\n\n    // Show welcome if:\n    // 1. Never seen before, OR\n    // 2. Different user than last time (account switching)\n    if (!hasSeenWelcome || lastSeenUserId !== String(user.id)) {\n      // Small delay to let the app load first\n      setTimeout(() => {\n        setShowWelcome(true);\n      }, 1000);\n    }\n  }, [isAuthenticated, user]);\n\n  const handleClose = () => {\n    if (user) {\n      localStorage.setItem('beta_welcome_seen', 'true');\n      localStorage.setItem('beta_welcome_user_id', String(user.id));\n    }\n    setShowWelcome(false);\n\n    // Start the welcome tour after closing the modal (if not already completed)\n    if (!hasCompletedTour('welcome')) {\n      // Small delay to let the modal close animation finish\n      setTimeout(() => {\n        startTour('welcome');\n      }, 500);\n    }\n  };\n\n  return (\n    <>\n      {showWelcome && <BetaWelcomeModal onClose={handleClose} />}\n    </>\n  );\n}\n\nexport default BetaOnboarding;\n","/**\n * Footer component with legal links.\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport function Footer() {\n  const currentYear = new Date().getFullYear();\n\n  return (\n    <footer style={{\n      marginTop: 'auto',\n      padding: '24px 20px',\n      borderTop: '1px solid var(--border, #334155)',\n      background: 'var(--bg-secondary, #1e293b)',\n    }}>\n      <div style={{\n        maxWidth: 1200,\n        margin: '0 auto',\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-between',\n        alignItems: 'flex-start',\n        gap: 32,\n      }}>\n        {/* Brand */}\n        <div style={{ minWidth: 200 }}>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 10,\n            marginBottom: 8,\n          }}>\n            <img\n              src=\"/rb-logo.png\"\n              alt=\"renaissBlock\"\n              style={{\n                height: 28,\n                width: 'auto',\n                borderRadius: 4,\n              }}\n            />\n            <span style={{\n              fontSize: 16,\n              fontWeight: 700,\n              color: 'var(--text, #e5e7eb)',\n            }}>\n              renaissBlock\n            </span>\n          </div>\n          <div style={{\n            fontSize: 13,\n            color: 'var(--text-muted, #94a3b8)',\n          }}>\n            A platform for serious creators.\n          </div>\n        </div>\n\n        {/* Legal Links */}\n        <div style={{ minWidth: 150 }}>\n          <div style={{\n            fontSize: 13,\n            fontWeight: 600,\n            color: 'var(--text, #e5e7eb)',\n            marginBottom: 12,\n            textTransform: 'uppercase',\n            letterSpacing: '0.5px',\n          }}>\n            Legal\n          </div>\n          <nav style={{\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 8,\n          }}>\n            <Link to=\"/legal/terms\" style={linkStyle}>Terms of Service</Link>\n            <Link to=\"/legal/privacy\" style={linkStyle}>Privacy Policy</Link>\n            <Link to=\"/legal/content-policy\" style={linkStyle}>Content Policy</Link>\n            <Link to=\"/legal/dmca\" style={linkStyle}>DMCA / Copyright</Link>\n            <Link to=\"/legal/creator-agreement\" style={linkStyle}>Creator Agreement</Link>\n          </nav>\n        </div>\n\n        {/* Support Links */}\n        <div style={{ minWidth: 150 }}>\n          <div style={{\n            fontSize: 13,\n            fontWeight: 600,\n            color: 'var(--text, #e5e7eb)',\n            marginBottom: 12,\n            textTransform: 'uppercase',\n            letterSpacing: '0.5px',\n          }}>\n            Support\n          </div>\n          <nav style={{\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 8,\n          }}>\n            <a href=\"mailto:support@renaissblock.com\" style={linkStyle}>Contact Us</a>\n            <a href=\"mailto:dmca@renaissblock.com\" style={linkStyle}>Report Copyright</a>\n            <a href=\"mailto:reports@renaissblock.com\" style={linkStyle}>Report Content</a>\n          </nav>\n        </div>\n\n        {/* Copyright */}\n        <div style={{\n          width: '100%',\n          paddingTop: 16,\n          borderTop: '1px solid var(--border, #334155)',\n          marginTop: 8,\n        }}>\n          <div style={{\n            fontSize: 12,\n            color: 'var(--text-muted, #94a3b8)',\n            textAlign: 'center',\n          }}>\n            &copy; {currentYear} renaissBlock. All rights reserved.\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n\nconst linkStyle: React.CSSProperties = {\n  fontSize: 13,\n  color: 'var(--text-muted, #94a3b8)',\n  textDecoration: 'none',\n  transition: 'color 0.2s',\n};\n\nexport default Footer;\n","/**\n * Cookie consent banner for GDPR/CCPA compliance.\n * Shows on first visit and stores preference in localStorage.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { X } from 'lucide-react';\n\nconst COOKIE_CONSENT_KEY = 'rb_cookie_consent';\n\ninterface CookiePreferences {\n  necessary: boolean; // Always true\n  analytics: boolean;\n  marketing: boolean;\n}\n\nexport function CookieBanner() {\n  const [isVisible, setIsVisible] = useState(false);\n  const [showCustomize, setShowCustomize] = useState(false);\n  const [preferences, setPreferences] = useState<CookiePreferences>({\n    necessary: true,\n    analytics: false,\n    marketing: false,\n  });\n\n  useEffect(() => {\n    // Check if user has already made a choice\n    const consent = localStorage.getItem(COOKIE_CONSENT_KEY);\n    if (!consent) {\n      // Small delay to prevent flash on page load\n      const timer = setTimeout(() => setIsVisible(true), 1000);\n      return () => clearTimeout(timer);\n    }\n  }, []);\n\n  const saveConsent = (prefs: CookiePreferences) => {\n    localStorage.setItem(COOKIE_CONSENT_KEY, JSON.stringify({\n      ...prefs,\n      timestamp: new Date().toISOString(),\n    }));\n    setIsVisible(false);\n  };\n\n  const handleAcceptAll = () => {\n    saveConsent({\n      necessary: true,\n      analytics: true,\n      marketing: true,\n    });\n  };\n\n  const handleRejectNonEssential = () => {\n    saveConsent({\n      necessary: true,\n      analytics: false,\n      marketing: false,\n    });\n  };\n\n  const handleSavePreferences = () => {\n    saveConsent(preferences);\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <div style={{\n      position: 'fixed',\n      bottom: 0,\n      left: 0,\n      right: 0,\n      zIndex: 9999,\n      background: 'var(--bg, #0f172a)',\n      borderTop: '1px solid var(--border, #334155)',\n      padding: '16px 20px',\n      boxShadow: '0 -4px 20px rgba(0, 0, 0, 0.3)',\n    }}>\n      <div style={{\n        maxWidth: 1200,\n        margin: '0 auto',\n      }}>\n        {!showCustomize ? (\n          // Simple banner\n          <div style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            alignItems: 'center',\n            gap: 16,\n            justifyContent: 'space-between',\n          }}>\n            <div style={{ flex: '1 1 400px' }}>\n              <p style={{\n                margin: 0,\n                fontSize: 14,\n                color: 'var(--text, #e5e7eb)',\n              }}>\n                We use cookies to improve your experience.{' '}\n                <Link\n                  to=\"/legal/privacy\"\n                  style={{ color: 'var(--accent, #f59e0b)' }}\n                >\n                  Learn more in our Privacy Policy\n                </Link>\n              </p>\n            </div>\n            <div style={{\n              display: 'flex',\n              gap: 8,\n              flexWrap: 'wrap',\n            }}>\n              <button\n                onClick={() => setShowCustomize(true)}\n                style={{\n                  padding: '8px 16px',\n                  borderRadius: 6,\n                  border: '1px solid var(--border, #334155)',\n                  background: 'transparent',\n                  color: 'var(--text, #e5e7eb)',\n                  fontSize: 13,\n                  cursor: 'pointer',\n                }}\n              >\n                Customize\n              </button>\n              <button\n                onClick={handleRejectNonEssential}\n                style={{\n                  padding: '8px 16px',\n                  borderRadius: 6,\n                  border: '1px solid var(--border, #334155)',\n                  background: 'transparent',\n                  color: 'var(--text, #e5e7eb)',\n                  fontSize: 13,\n                  cursor: 'pointer',\n                }}\n              >\n                Reject Non-Essential\n              </button>\n              <button\n                onClick={handleAcceptAll}\n                style={{\n                  padding: '8px 16px',\n                  borderRadius: 6,\n                  border: 'none',\n                  background: 'var(--accent, #f59e0b)',\n                  color: '#000',\n                  fontSize: 13,\n                  fontWeight: 600,\n                  cursor: 'pointer',\n                }}\n              >\n                Accept All\n              </button>\n            </div>\n          </div>\n        ) : (\n          // Customize view\n          <div>\n            <div style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginBottom: 16,\n            }}>\n              <h3 style={{\n                margin: 0,\n                fontSize: 16,\n                fontWeight: 600,\n                color: 'var(--text, #e5e7eb)',\n              }}>\n                Cookie Preferences\n              </h3>\n              <button\n                onClick={() => setShowCustomize(false)}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  padding: 4,\n                  cursor: 'pointer',\n                  color: 'var(--text-muted, #94a3b8)',\n                }}\n              >\n                <X size={18} />\n              </button>\n            </div>\n\n            <div style={{\n              display: 'flex',\n              flexDirection: 'column',\n              gap: 12,\n              marginBottom: 16,\n            }}>\n              <label style={{\n                display: 'flex',\n                gap: 12,\n                alignItems: 'flex-start',\n                padding: 12,\n                background: 'var(--bg-secondary, #1e293b)',\n                borderRadius: 6,\n              }}>\n                <input\n                  type=\"checkbox\"\n                  checked={true}\n                  disabled\n                  style={{ marginTop: 3 }}\n                />\n                <div>\n                  <div style={{ fontWeight: 500, color: 'var(--text, #e5e7eb)', marginBottom: 2 }}>\n                    Necessary Cookies\n                  </div>\n                  <div style={{ fontSize: 13, color: 'var(--text-muted, #94a3b8)' }}>\n                    Required for the website to function. Cannot be disabled.\n                  </div>\n                </div>\n              </label>\n\n              <label style={{\n                display: 'flex',\n                gap: 12,\n                alignItems: 'flex-start',\n                padding: 12,\n                background: 'var(--bg-secondary, #1e293b)',\n                borderRadius: 6,\n                cursor: 'pointer',\n              }}>\n                <input\n                  type=\"checkbox\"\n                  checked={preferences.analytics}\n                  onChange={(e) => setPreferences(prev => ({ ...prev, analytics: e.target.checked }))}\n                  style={{ marginTop: 3 }}\n                />\n                <div>\n                  <div style={{ fontWeight: 500, color: 'var(--text, #e5e7eb)', marginBottom: 2 }}>\n                    Analytics Cookies\n                  </div>\n                  <div style={{ fontSize: 13, color: 'var(--text-muted, #94a3b8)' }}>\n                    Help us understand how you use the site to improve it.\n                  </div>\n                </div>\n              </label>\n\n              <label style={{\n                display: 'flex',\n                gap: 12,\n                alignItems: 'flex-start',\n                padding: 12,\n                background: 'var(--bg-secondary, #1e293b)',\n                borderRadius: 6,\n                cursor: 'pointer',\n              }}>\n                <input\n                  type=\"checkbox\"\n                  checked={preferences.marketing}\n                  onChange={(e) => setPreferences(prev => ({ ...prev, marketing: e.target.checked }))}\n                  style={{ marginTop: 3 }}\n                />\n                <div>\n                  <div style={{ fontWeight: 500, color: 'var(--text, #e5e7eb)', marginBottom: 2 }}>\n                    Marketing Cookies\n                  </div>\n                  <div style={{ fontSize: 13, color: 'var(--text-muted, #94a3b8)' }}>\n                    Used to show you relevant content and ads.\n                  </div>\n                </div>\n              </label>\n            </div>\n\n            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: 8 }}>\n              <button\n                onClick={handleRejectNonEssential}\n                style={{\n                  padding: '8px 16px',\n                  borderRadius: 6,\n                  border: '1px solid var(--border, #334155)',\n                  background: 'transparent',\n                  color: 'var(--text, #e5e7eb)',\n                  fontSize: 13,\n                  cursor: 'pointer',\n                }}\n              >\n                Reject All\n              </button>\n              <button\n                onClick={handleSavePreferences}\n                style={{\n                  padding: '8px 16px',\n                  borderRadius: 6,\n                  border: 'none',\n                  background: 'var(--accent, #f59e0b)',\n                  color: '#000',\n                  fontSize: 13,\n                  fontWeight: 600,\n                  cursor: 'pointer',\n                }}\n              >\n                Save Preferences\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default CookieBanner;\n","/**\n * Cart Context - Shopping cart state management\n *\n * Provides cart state and operations to all components.\n * Persists cart via backend API (database-backed).\n */\n\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { API_URL } from '../config';\n\ninterface CartItem {\n  id: number;\n  type: 'chapter' | 'content';\n  item_id: number;\n  title: string;\n  creator_username: string;\n  unit_price: string;\n  added_at: string;\n  book_title?: string;\n  chapter_order?: number;\n  cover_url?: string;\n}\n\ninterface BreakdownDisplay {\n  subtotal: string;\n  credit_card_fee: string;\n  buyer_total: string;\n  savings: string;\n  item_count: number;\n}\n\ninterface Cart {\n  id: number;\n  status: string;\n  item_count: number;\n  max_items: number;\n  items: CartItem[];\n  subtotal?: string;\n  credit_card_fee?: string;\n  total?: string;\n  savings_vs_individual?: string;\n  breakdown_display?: BreakdownDisplay;\n}\n\ninterface CartContextType {\n  cart: Cart | null;\n  loading: boolean;\n  error: string | null;\n  addToCart: (chapterId?: number, contentId?: number) => Promise<boolean>;\n  removeFromCart: (itemId: number) => Promise<boolean>;\n  clearCart: () => Promise<void>;\n  checkout: () => Promise<string | null>;\n  refreshCart: () => Promise<void>;\n  isInCart: (itemId: number, type: 'chapter' | 'content') => boolean;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport function CartProvider({ children }: { children: React.ReactNode }) {\n  const [cart, setCart] = useState<Cart | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const getCSRFToken = async () => {\n    try {\n      const res = await fetch(`${API_URL}/api/auth/csrf/`, { credentials: 'include' });\n      const data = await res.json();\n      return data?.csrfToken || '';\n    } catch {\n      return '';\n    }\n  };\n\n  const refreshCart = useCallback(async () => {\n    try {\n      const res = await fetch(`${API_URL}/api/cart/`, { credentials: 'include' });\n      if (res.ok) {\n        const data = await res.json();\n        setCart(data);\n        setError(null);\n      } else if (res.status === 403) {\n        // Not authenticated\n        setCart(null);\n      }\n    } catch (e) {\n      console.error('Failed to fetch cart:', e);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    refreshCart();\n  }, [refreshCart]);\n\n  const addToCart = async (chapterId?: number, contentId?: number): Promise<boolean> => {\n    setError(null);\n    try {\n      const csrfToken = await getCSRFToken();\n      const res = await fetch(`${API_URL}/api/cart/add/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrfToken,\n        },\n        credentials: 'include',\n        body: JSON.stringify({ chapter_id: chapterId, content_id: contentId }),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setError(data.error || 'Failed to add to cart');\n        return false;\n      }\n\n      await refreshCart();\n      return true;\n    } catch (e) {\n      setError('Failed to add to cart');\n      return false;\n    }\n  };\n\n  const removeFromCart = async (itemId: number): Promise<boolean> => {\n    setError(null);\n    try {\n      const csrfToken = await getCSRFToken();\n      const res = await fetch(`${API_URL}/api/cart/remove/${itemId}/`, {\n        method: 'DELETE',\n        headers: { 'X-CSRFToken': csrfToken },\n        credentials: 'include',\n      });\n\n      if (res.ok) {\n        await refreshCart();\n        return true;\n      }\n      return false;\n    } catch (e) {\n      return false;\n    }\n  };\n\n  const clearCart = async () => {\n    setError(null);\n    try {\n      const csrfToken = await getCSRFToken();\n      await fetch(`${API_URL}/api/cart/clear/`, {\n        method: 'POST',\n        headers: { 'X-CSRFToken': csrfToken },\n        credentials: 'include',\n      });\n      await refreshCart();\n    } catch (e) {\n      console.error('Failed to clear cart:', e);\n    }\n  };\n\n  const checkout = async (): Promise<string | null> => {\n    setError(null);\n    try {\n      const csrfToken = await getCSRFToken();\n      const res = await fetch(`${API_URL}/api/cart/checkout/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrfToken,\n        },\n        credentials: 'include',\n      });\n\n      const data = await res.json();\n\n      if (!res.ok) {\n        setError(data.error || 'Checkout failed');\n        return null;\n      }\n\n      return data.checkout_url;\n    } catch (e) {\n      setError('Checkout failed');\n      return null;\n    }\n  };\n\n  const isInCart = (itemId: number, type: 'chapter' | 'content'): boolean => {\n    if (!cart) return false;\n    return cart.items.some(\n      item => item.item_id === itemId && item.type === type\n    );\n  };\n\n  return (\n    <CartContext.Provider value={{\n      cart,\n      loading,\n      error,\n      addToCart,\n      removeFromCart,\n      clearCart,\n      checkout,\n      refreshCart,\n      isInCart,\n    }}>\n      {children}\n    </CartContext.Provider>\n  );\n}\n\nexport function useCart() {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within CartProvider');\n  }\n  return context;\n}\n\nexport default CartContext;\n","// src/helpers.ts\nfunction isOfType(type) {\n  return (value) => typeof value === type;\n}\nvar isFunction = isOfType(\"function\");\nvar isNull = (value) => {\n  return value === null;\n};\nvar isRegex = (value) => {\n  return Object.prototype.toString.call(value).slice(8, -1) === \"RegExp\";\n};\nvar isObject = (value) => {\n  return !isUndefined(value) && !isNull(value) && (isFunction(value) || typeof value === \"object\");\n};\nvar isUndefined = isOfType(\"undefined\");\n\n// src/index.ts\nfunction equalArray(left, right) {\n  const { length } = left;\n  if (length !== right.length) {\n    return false;\n  }\n  for (let index = length; index-- !== 0; ) {\n    if (!equal(left[index], right[index])) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction equalArrayBuffer(left, right) {\n  if (left.byteLength !== right.byteLength) {\n    return false;\n  }\n  const view1 = new DataView(left.buffer);\n  const view2 = new DataView(right.buffer);\n  let index = left.byteLength;\n  while (index--) {\n    if (view1.getUint8(index) !== view2.getUint8(index)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction equalMap(left, right) {\n  if (left.size !== right.size) {\n    return false;\n  }\n  for (const index of left.entries()) {\n    if (!right.has(index[0])) {\n      return false;\n    }\n  }\n  for (const index of left.entries()) {\n    if (!equal(index[1], right.get(index[0]))) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction equalSet(left, right) {\n  if (left.size !== right.size) {\n    return false;\n  }\n  for (const index of left.entries()) {\n    if (!right.has(index[0])) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction equal(left, right) {\n  if (left === right) {\n    return true;\n  }\n  if (left && isObject(left) && right && isObject(right)) {\n    if (left.constructor !== right.constructor) {\n      return false;\n    }\n    if (Array.isArray(left) && Array.isArray(right)) {\n      return equalArray(left, right);\n    }\n    if (left instanceof Map && right instanceof Map) {\n      return equalMap(left, right);\n    }\n    if (left instanceof Set && right instanceof Set) {\n      return equalSet(left, right);\n    }\n    if (ArrayBuffer.isView(left) && ArrayBuffer.isView(right)) {\n      return equalArrayBuffer(left, right);\n    }\n    if (isRegex(left) && isRegex(right)) {\n      return left.source === right.source && left.flags === right.flags;\n    }\n    if (left.valueOf !== Object.prototype.valueOf) {\n      return left.valueOf() === right.valueOf();\n    }\n    if (left.toString !== Object.prototype.toString) {\n      return left.toString() === right.toString();\n    }\n    const leftKeys = Object.keys(left);\n    const rightKeys = Object.keys(right);\n    if (leftKeys.length !== rightKeys.length) {\n      return false;\n    }\n    for (let index = leftKeys.length; index-- !== 0; ) {\n      if (!Object.prototype.hasOwnProperty.call(right, leftKeys[index])) {\n        return false;\n      }\n    }\n    for (let index = leftKeys.length; index-- !== 0; ) {\n      const key = leftKeys[index];\n      if (key === \"_owner\" && left.$$typeof) {\n        continue;\n      }\n      if (!equal(left[key], right[key])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  if (Number.isNaN(left) && Number.isNaN(right)) {\n    return true;\n  }\n  return left === right;\n}\nexport {\n  equal as default\n};\n//# sourceMappingURL=index.mjs.map","// src/helpers.ts\nvar objectTypes = [\n  \"Array\",\n  \"ArrayBuffer\",\n  \"AsyncFunction\",\n  \"AsyncGenerator\",\n  \"AsyncGeneratorFunction\",\n  \"Date\",\n  \"Error\",\n  \"Function\",\n  \"Generator\",\n  \"GeneratorFunction\",\n  \"HTMLElement\",\n  \"Map\",\n  \"Object\",\n  \"Promise\",\n  \"RegExp\",\n  \"Set\",\n  \"WeakMap\",\n  \"WeakSet\"\n];\nvar primitiveTypes = [\n  \"bigint\",\n  \"boolean\",\n  \"null\",\n  \"number\",\n  \"string\",\n  \"symbol\",\n  \"undefined\"\n];\nfunction getObjectType(value) {\n  const objectTypeName = Object.prototype.toString.call(value).slice(8, -1);\n  if (/HTML\\w+Element/.test(objectTypeName)) {\n    return \"HTMLElement\";\n  }\n  if (isObjectType(objectTypeName)) {\n    return objectTypeName;\n  }\n  return void 0;\n}\nfunction isObjectOfType(type) {\n  return (value) => getObjectType(value) === type;\n}\nfunction isObjectType(name) {\n  return objectTypes.includes(name);\n}\nfunction isOfType(type) {\n  return (value) => typeof value === type;\n}\nfunction isPrimitiveType(name) {\n  return primitiveTypes.includes(name);\n}\n\n// src/index.ts\nvar DOM_PROPERTIES_TO_CHECK = [\n  \"innerHTML\",\n  \"ownerDocument\",\n  \"style\",\n  \"attributes\",\n  \"nodeValue\"\n];\nfunction is(value) {\n  if (value === null) {\n    return \"null\";\n  }\n  switch (typeof value) {\n    case \"bigint\":\n      return \"bigint\";\n    case \"boolean\":\n      return \"boolean\";\n    case \"number\":\n      return \"number\";\n    case \"string\":\n      return \"string\";\n    case \"symbol\":\n      return \"symbol\";\n    case \"undefined\":\n      return \"undefined\";\n    default:\n  }\n  if (is.array(value)) {\n    return \"Array\";\n  }\n  if (is.plainFunction(value)) {\n    return \"Function\";\n  }\n  const tagType = getObjectType(value);\n  if (tagType) {\n    return tagType;\n  }\n  return \"Object\";\n}\nis.array = Array.isArray;\nis.arrayOf = (target, predicate) => {\n  if (!is.array(target) && !is.function(predicate)) {\n    return false;\n  }\n  return target.every((d) => predicate(d));\n};\nis.asyncGeneratorFunction = (value) => getObjectType(value) === \"AsyncGeneratorFunction\";\nis.asyncFunction = isObjectOfType(\"AsyncFunction\");\nis.bigint = isOfType(\"bigint\");\nis.boolean = (value) => {\n  return value === true || value === false;\n};\nis.date = isObjectOfType(\"Date\");\nis.defined = (value) => !is.undefined(value);\nis.domElement = (value) => {\n  return is.object(value) && !is.plainObject(value) && value.nodeType === 1 && is.string(value.nodeName) && DOM_PROPERTIES_TO_CHECK.every((property) => property in value);\n};\nis.empty = (value) => {\n  return is.string(value) && value.length === 0 || is.array(value) && value.length === 0 || is.object(value) && !is.map(value) && !is.set(value) && Object.keys(value).length === 0 || is.set(value) && value.size === 0 || is.map(value) && value.size === 0;\n};\nis.error = isObjectOfType(\"Error\");\nis.function = isOfType(\"function\");\nis.generator = (value) => {\n  return is.iterable(value) && is.function(value.next) && is.function(value.throw);\n};\nis.generatorFunction = isObjectOfType(\"GeneratorFunction\");\nis.instanceOf = (instance, class_) => {\n  if (!instance || !class_) {\n    return false;\n  }\n  return Object.getPrototypeOf(instance) === class_.prototype;\n};\nis.iterable = (value) => {\n  return !is.nullOrUndefined(value) && is.function(value[Symbol.iterator]);\n};\nis.map = isObjectOfType(\"Map\");\nis.nan = (value) => {\n  return Number.isNaN(value);\n};\nis.null = (value) => {\n  return value === null;\n};\nis.nullOrUndefined = (value) => {\n  return is.null(value) || is.undefined(value);\n};\nis.number = (value) => {\n  return isOfType(\"number\")(value) && !is.nan(value);\n};\nis.numericString = (value) => {\n  return is.string(value) && value.length > 0 && !Number.isNaN(Number(value));\n};\nis.object = (value) => {\n  return !is.nullOrUndefined(value) && (is.function(value) || typeof value === \"object\");\n};\nis.oneOf = (target, value) => {\n  if (!is.array(target)) {\n    return false;\n  }\n  return target.indexOf(value) > -1;\n};\nis.plainFunction = isObjectOfType(\"Function\");\nis.plainObject = (value) => {\n  if (getObjectType(value) !== \"Object\") {\n    return false;\n  }\n  const prototype = Object.getPrototypeOf(value);\n  return prototype === null || prototype === Object.getPrototypeOf({});\n};\nis.primitive = (value) => is.null(value) || isPrimitiveType(typeof value);\nis.promise = isObjectOfType(\"Promise\");\nis.propertyOf = (target, key, predicate) => {\n  if (!is.object(target) || !key) {\n    return false;\n  }\n  const value = target[key];\n  if (is.function(predicate)) {\n    return predicate(value);\n  }\n  return is.defined(value);\n};\nis.regexp = isObjectOfType(\"RegExp\");\nis.set = isObjectOfType(\"Set\");\nis.string = isOfType(\"string\");\nis.symbol = isOfType(\"symbol\");\nis.undefined = isOfType(\"undefined\");\nis.weakMap = isObjectOfType(\"WeakMap\");\nis.weakSet = isObjectOfType(\"WeakSet\");\nvar src_default = is;\nexport {\n  src_default as default\n};\n//# sourceMappingURL=index.mjs.map","// src/index.ts\nimport equal2 from \"@gilbarbara/deep-equal\";\nimport is2 from \"is-lite\";\n\n// src/helpers.ts\nimport equal from \"@gilbarbara/deep-equal\";\nimport is from \"is-lite\";\nfunction canHaveLength(...arguments_) {\n  return arguments_.every((d) => is.string(d) || is.array(d) || is.plainObject(d));\n}\nfunction checkEquality(left, right, value) {\n  if (!isSameType(left, right)) {\n    return false;\n  }\n  if ([left, right].every(is.array)) {\n    return !left.some(hasValue(value)) && right.some(hasValue(value));\n  }\n  if ([left, right].every(is.plainObject)) {\n    return !Object.entries(left).some(hasEntry(value)) && Object.entries(right).some(hasEntry(value));\n  }\n  return right === value;\n}\nfunction compareNumbers(previousData, data, options) {\n  const { actual, key, previous, type } = options;\n  const left = nested(previousData, key);\n  const right = nested(data, key);\n  let changed = [left, right].every(is.number) && (type === \"increased\" ? left < right : left > right);\n  if (!is.undefined(actual)) {\n    changed = changed && right === actual;\n  }\n  if (!is.undefined(previous)) {\n    changed = changed && left === previous;\n  }\n  return changed;\n}\nfunction compareValues(previousData, data, options) {\n  const { key, type, value } = options;\n  const left = nested(previousData, key);\n  const right = nested(data, key);\n  const primary = type === \"added\" ? left : right;\n  const secondary = type === \"added\" ? right : left;\n  if (!is.nullOrUndefined(value)) {\n    if (is.defined(primary)) {\n      if (is.array(primary) || is.plainObject(primary)) {\n        return checkEquality(primary, secondary, value);\n      }\n    } else {\n      return equal(secondary, value);\n    }\n    return false;\n  }\n  if ([left, right].every(is.array)) {\n    return !secondary.every(isEqualPredicate(primary));\n  }\n  if ([left, right].every(is.plainObject)) {\n    return hasExtraKeys(Object.keys(primary), Object.keys(secondary));\n  }\n  return ![left, right].every((d) => is.primitive(d) && is.defined(d)) && (type === \"added\" ? !is.defined(left) && is.defined(right) : is.defined(left) && !is.defined(right));\n}\nfunction getIterables(previousData, data, { key } = {}) {\n  let left = nested(previousData, key);\n  let right = nested(data, key);\n  if (!isSameType(left, right)) {\n    throw new TypeError(\"Inputs have different types\");\n  }\n  if (!canHaveLength(left, right)) {\n    throw new TypeError(\"Inputs don't have length\");\n  }\n  if ([left, right].every(is.plainObject)) {\n    left = Object.keys(left);\n    right = Object.keys(right);\n  }\n  return [left, right];\n}\nfunction hasEntry(input) {\n  return ([key, value]) => {\n    if (is.array(input)) {\n      return equal(input, value) || input.some((d) => equal(d, value) || is.array(value) && isEqualPredicate(value)(d));\n    }\n    if (is.plainObject(input) && input[key]) {\n      return !!input[key] && equal(input[key], value);\n    }\n    return equal(input, value);\n  };\n}\nfunction hasExtraKeys(left, right) {\n  return right.some((d) => !left.includes(d));\n}\nfunction hasValue(input) {\n  return (value) => {\n    if (is.array(input)) {\n      return input.some((d) => equal(d, value) || is.array(value) && isEqualPredicate(value)(d));\n    }\n    return equal(input, value);\n  };\n}\nfunction includesOrEqualsTo(previousValue, value) {\n  return is.array(previousValue) ? previousValue.some((d) => equal(d, value)) : equal(previousValue, value);\n}\nfunction isEqualPredicate(data) {\n  return (value) => data.some((d) => equal(d, value));\n}\nfunction isSameType(...arguments_) {\n  return arguments_.every(is.array) || arguments_.every(is.number) || arguments_.every(is.plainObject) || arguments_.every(is.string);\n}\nfunction nested(data, property) {\n  if (is.plainObject(data) || is.array(data)) {\n    if (is.string(property)) {\n      const props = property.split(\".\");\n      return props.reduce((acc, d) => acc && acc[d], data);\n    }\n    if (is.number(property)) {\n      return data[property];\n    }\n    return data;\n  }\n  return data;\n}\n\n// src/index.ts\nfunction treeChanges(previousData, data) {\n  if ([previousData, data].some(is2.nullOrUndefined)) {\n    throw new Error(\"Missing required parameters\");\n  }\n  if (![previousData, data].every((d) => is2.plainObject(d) || is2.array(d))) {\n    throw new Error(\"Expected plain objects or array\");\n  }\n  const added = (key, value) => {\n    try {\n      return compareValues(previousData, data, { key, type: \"added\", value });\n    } catch {\n      return false;\n    }\n  };\n  const changed = (key, actual, previous) => {\n    try {\n      const left = nested(previousData, key);\n      const right = nested(data, key);\n      const hasActual = is2.defined(actual);\n      const hasPrevious = is2.defined(previous);\n      if (hasActual || hasPrevious) {\n        const leftComparator = hasPrevious ? includesOrEqualsTo(previous, left) : !includesOrEqualsTo(actual, left);\n        const rightComparator = includesOrEqualsTo(actual, right);\n        return leftComparator && rightComparator;\n      }\n      if ([left, right].every(is2.array) || [left, right].every(is2.plainObject)) {\n        return !equal2(left, right);\n      }\n      return left !== right;\n    } catch {\n      return false;\n    }\n  };\n  const changedFrom = (key, previous, actual) => {\n    if (!is2.defined(key)) {\n      return false;\n    }\n    try {\n      const left = nested(previousData, key);\n      const right = nested(data, key);\n      const hasActual = is2.defined(actual);\n      return includesOrEqualsTo(previous, left) && (hasActual ? includesOrEqualsTo(actual, right) : !hasActual);\n    } catch {\n      return false;\n    }\n  };\n  const decreased = (key, actual, previous) => {\n    if (!is2.defined(key)) {\n      return false;\n    }\n    try {\n      return compareNumbers(previousData, data, { key, actual, previous, type: \"decreased\" });\n    } catch {\n      return false;\n    }\n  };\n  const emptied = (key) => {\n    try {\n      const [left, right] = getIterables(previousData, data, { key });\n      return !!left.length && !right.length;\n    } catch {\n      return false;\n    }\n  };\n  const filled = (key) => {\n    try {\n      const [left, right] = getIterables(previousData, data, { key });\n      return !left.length && !!right.length;\n    } catch {\n      return false;\n    }\n  };\n  const increased = (key, actual, previous) => {\n    if (!is2.defined(key)) {\n      return false;\n    }\n    try {\n      return compareNumbers(previousData, data, { key, actual, previous, type: \"increased\" });\n    } catch {\n      return false;\n    }\n  };\n  const removed = (key, value) => {\n    try {\n      return compareValues(previousData, data, { key, type: \"removed\", value });\n    } catch {\n      return false;\n    }\n  };\n  return { added, changed, changedFrom, decreased, emptied, filled, increased, removed };\n}\nexport {\n  treeChanges as default\n};\n//# sourceMappingURL=index.mjs.map","var E_NOSCROLL = new Error('Element already at target scroll position')\nvar E_CANCELLED = new Error('Scroll cancelled')\nvar min = Math.min\nvar ms = Date.now\n\nmodule.exports = {\n  left: make('scrollLeft'),\n  top: make('scrollTop')\n}\n\nfunction make (prop) {\n  return function scroll (el, to, opts, cb) {\n    opts = opts || {}\n\n    if (typeof opts == 'function') cb = opts, opts = {}\n    if (typeof cb != 'function') cb = noop\n\n    var start = ms()\n    var from = el[prop]\n    var ease = opts.ease || inOutSine\n    var duration = !isNaN(opts.duration) ? +opts.duration : 350\n    var cancelled = false\n\n    return from === to ?\n      cb(E_NOSCROLL, el[prop]) :\n      requestAnimationFrame(animate), cancel\n\n    function cancel () {\n      cancelled = true\n    }\n\n    function animate (timestamp) {\n      if (cancelled) return cb(E_CANCELLED, el[prop])\n\n      var now = ms()\n      var time = min(1, ((now - start) / duration))\n      var eased = ease(time)\n\n      el[prop] = (eased * (to - from)) + from\n\n      time < 1 ?\n        requestAnimationFrame(animate) :\n        requestAnimationFrame(function () {\n          cb(null, el[prop])\n        })\n    }\n  }\n}\n\nfunction inOutSine (n) {\n  return 0.5 * (1 - Math.cos(Math.PI * n))\n}\n\nfunction noop () {}\n","(function (root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([], factory);\n  } else if (typeof module === \"object\" && module.exports) {\n    module.exports = factory();\n  } else {\n    root.Scrollparent = factory();\n  }\n}(this, function () {\n  function isScrolling(node) {\n    var overflow = getComputedStyle(node, null).getPropertyValue(\"overflow\");\n\n    return overflow.indexOf(\"scroll\") > -1 || overflow.indexOf(\"auto\") > - 1;\n  }\n\n  function scrollParent(node) {\n    if (!(node instanceof HTMLElement || node instanceof SVGElement)) {\n      return undefined;\n    }\n\n    var current = node.parentNode;\n    while (current.parentNode) {\n      if (isScrolling(current)) {\n        return current;\n      }\n\n      current = current.parentNode;\n    }\n\n    return document.scrollingElement || document.documentElement;\n  }\n\n  return scrollParent;\n}));","\"use strict\";\nvar hasProps = function (jsx) {\n    return Object.prototype.hasOwnProperty.call(jsx, 'props');\n};\nvar reduceJsxToString = function (previous, current) {\n    return previous + innerText(current);\n};\nvar innerText = function (jsx) {\n    if (jsx === null ||\n        typeof jsx === 'boolean' ||\n        typeof jsx === 'undefined') {\n        return '';\n    }\n    if (typeof jsx === 'number') {\n        return jsx.toString();\n    }\n    if (typeof jsx === 'string') {\n        return jsx;\n    }\n    if (Array.isArray(jsx)) {\n        return jsx.reduce(reduceJsxToString, '');\n    }\n    if (hasProps(jsx) &&\n        Object.prototype.hasOwnProperty.call(jsx.props, 'children')) {\n        return innerText(jsx.props.children);\n    }\n    return '';\n};\ninnerText.default = innerText;\nmodule.exports = innerText;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.16.1\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && typeof navigator !== 'undefined';\n\nvar timeoutDuration = function () {\n  var longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\n  for (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n    if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n      return 1;\n    }\n  }\n  return 0;\n}();\n\nfunction microtaskDebounce(fn) {\n  var called = false;\n  return function () {\n    if (called) {\n      return;\n    }\n    called = true;\n    window.Promise.resolve().then(function () {\n      called = false;\n      fn();\n    });\n  };\n}\n\nfunction taskDebounce(fn) {\n  var scheduled = false;\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(function () {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nvar supportsMicroTasks = isBrowser && window.Promise;\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nvar debounce = supportsMicroTasks ? microtaskDebounce : taskDebounce;\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\n/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nfunction getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  var window = element.ownerDocument.defaultView;\n  var css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n\n/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nfunction getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nfunction getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body;\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body;\n    case '#document':\n      return element.body;\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n\n  var _getStyleComputedProp = getStyleComputedProperty(element),\n      overflow = _getStyleComputedProp.overflow,\n      overflowX = _getStyleComputedProp.overflowX,\n      overflowY = _getStyleComputedProp.overflowY;\n\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n\n/**\n * Returns the reference node of the reference object, or the reference object itself.\n * @method\n * @memberof Popper.Utils\n * @param {Element|Object} reference - the reference element (the popper will be relative to this)\n * @returns {Element} parent\n */\nfunction getReferenceNode(reference) {\n  return reference && reference.referenceNode ? reference.referenceNode : reference;\n}\n\nvar isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nvar isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nfunction isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nfunction getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  var noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  var offsetParent = element.offsetParent || null;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  var nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TH, TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n\nfunction isOffsetContainer(element) {\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;\n}\n\n/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nfunction getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nfunction findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\n  var start = order ? element1 : element2;\n  var end = order ? element2 : element1;\n\n  // Get common ancestor container\n  var range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  var commonAncestorContainer = range.commonAncestorContainer;\n\n  // Both nodes are inside #document\n\n  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  var element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n\n/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nfunction getScroll(element) {\n  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';\n\n  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    var html = element.ownerDocument.documentElement;\n    var scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nfunction includeScroll(rect, element) {\n  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var scrollTop = getScroll(element, 'top');\n  var scrollLeft = getScroll(element, 'left');\n  var modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n\n/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nfunction getBordersSize(styles, axis) {\n  var sideA = axis === 'x' ? 'Left' : 'Top';\n  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return parseFloat(styles['border' + sideA + 'Width']) + parseFloat(styles['border' + sideB + 'Width']);\n}\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE(10) ? parseInt(html['offset' + axis]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')]) : 0);\n}\n\nfunction getWindowSizes(document) {\n  var body = document.body;\n  var html = document.documentElement;\n  var computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle)\n  };\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nfunction getClientRect(offsets) {\n  return _extends({}, offsets, {\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height\n  });\n}\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nfunction getBoundingClientRect(element) {\n  var rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      var scrollTop = getScroll(element, 'top');\n      var scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    } else {\n      rect = element.getBoundingClientRect();\n    }\n  } catch (e) {}\n\n  var result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top\n  };\n\n  // subtract scrollbar size from sizes\n  var sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  var width = sizes.width || element.clientWidth || result.width;\n  var height = sizes.height || element.clientHeight || result.height;\n\n  var horizScrollbar = element.offsetWidth - width;\n  var vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    var styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n\nfunction getOffsetRectRelativeToArbitraryNode(children, parent) {\n  var fixedPosition = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var isIE10 = isIE(10);\n  var isHTML = parent.nodeName === 'HTML';\n  var childrenRect = getBoundingClientRect(children);\n  var parentRect = getBoundingClientRect(parent);\n  var scrollParent = getScrollParent(children);\n\n  var styles = getStyleComputedProperty(parent);\n  var borderTopWidth = parseFloat(styles.borderTopWidth);\n  var borderLeftWidth = parseFloat(styles.borderLeftWidth);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if (fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  var offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    var marginTop = parseFloat(styles.marginTop);\n    var marginLeft = parseFloat(styles.marginLeft);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (isIE10 && !fixedPosition ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n\nfunction getViewportOffsetRectRelativeToArtbitraryNode(element) {\n  var excludeScroll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var html = element.ownerDocument.documentElement;\n  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  var width = Math.max(html.clientWidth, window.innerWidth || 0);\n  var height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  var scrollTop = !excludeScroll ? getScroll(html) : 0;\n  var scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  var offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width: width,\n    height: height\n  };\n\n  return getClientRect(offset);\n}\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nfunction isFixed(element) {\n  var nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  var parentNode = getParentNode(element);\n  if (!parentNode) {\n    return false;\n  }\n  return isFixed(parentNode);\n}\n\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nfunction getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  var el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n}\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nfunction getBoundaries(popper, reference, padding, boundariesElement) {\n  var fixedPosition = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n  // NOTE: 1 DOM access here\n\n  var boundaries = { top: 0, left: 0 };\n  var offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, getReferenceNode(reference));\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport') {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  } else {\n    // Handle other cases based on DOM element used as boundaries\n    var boundariesNode = void 0;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent, fixedPosition);\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      var _getWindowSizes = getWindowSizes(popper.ownerDocument),\n          height = _getWindowSizes.height,\n          width = _getWindowSizes.width;\n\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  var isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0;\n  boundaries.top += isPaddingNumber ? padding : padding.top || 0;\n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0;\n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0;\n\n  return boundaries;\n}\n\nfunction getArea(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);\n\n  var rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height\n    }\n  };\n\n  var sortedAreas = Object.keys(rects).map(function (key) {\n    return _extends({\n      key: key\n    }, rects[key], {\n      area: getArea(rects[key])\n    });\n  }).sort(function (a, b) {\n    return b.area - a.area;\n  });\n\n  var filteredAreas = sortedAreas.filter(function (_ref2) {\n    var width = _ref2.width,\n        height = _ref2.height;\n    return width >= popper.clientWidth && height >= popper.clientHeight;\n  });\n\n  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;\n\n  var variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? '-' + variation : '');\n}\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nfunction getReferenceOffsets(state, popper, reference) {\n  var fixedPosition = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n  var commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, getReferenceNode(reference));\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n\n/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nfunction getOuterSizes(element) {\n  var window = element.ownerDocument.defaultView;\n  var styles = window.getComputedStyle(element);\n  var x = parseFloat(styles.marginTop || 0) + parseFloat(styles.marginBottom || 0);\n  var y = parseFloat(styles.marginLeft || 0) + parseFloat(styles.marginRight || 0);\n  var result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x\n  };\n  return result;\n}\n\n/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nfunction getOppositePlacement(placement) {\n  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nfunction getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  var popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  var popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  var mainSide = isHoriz ? 'top' : 'left';\n  var secondarySide = isHoriz ? 'left' : 'top';\n  var measurement = isHoriz ? 'height' : 'width';\n  var secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n\n/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(function (cur) {\n      return cur[prop] === value;\n    });\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  var match = find(arr, function (obj) {\n    return obj[prop] === value;\n  });\n  return arr.indexOf(match);\n}\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nfunction runModifiers(modifiers, data, ends) {\n  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(function (modifier) {\n    if (modifier['function']) {\n      // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    var fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nfunction update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  var data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {}\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(this.state, this.popper, this.reference, this.options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(this.options.placement, data.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding);\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(this.popper, data.offsets.reference, data.placement);\n\n  data.offsets.popper.position = this.options.positionFixed ? 'fixed' : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n\n/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nfunction isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(function (_ref) {\n    var name = _ref.name,\n        enabled = _ref.enabled;\n    return enabled && name === modifierName;\n  });\n}\n\n/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nfunction getSupportedPropertyName(property) {\n  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (var i = 0; i < prefixes.length; i++) {\n    var prefix = prefixes[i];\n    var toCheck = prefix ? '' + prefix + upperProp : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nfunction destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicitly asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n\n/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nfunction getWindow(element) {\n  var ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  var isBody = scrollParent.nodeName === 'BODY';\n  var target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction setupEventListeners(reference, options, state, updateBound) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  var scrollElement = getScrollParent(reference);\n  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nfunction enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(this.reference, this.options, this.state, this.scheduleUpdate);\n  }\n}\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(function (target) {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nfunction disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n\n/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nfunction isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setStyles(element, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    var unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n\n/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function (prop) {\n    var value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nfunction applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nfunction applyStyleOnLoad(reference, popper, options, modifierOptions, state) {\n  // compute reference element offsets\n  var referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  var placement = computeAutoPlacement(options.placement, referenceOffsets, popper, reference, options.modifiers.flip.boundariesElement, options.modifiers.flip.padding);\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n\n/**\n * @function\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Boolean} shouldRound - If the offsets should be rounded at all\n * @returns {Object} The popper's position offsets rounded\n *\n * The tale of pixel-perfect positioning. It's still not 100% perfect, but as\n * good as it can be within reason.\n * Discussion here: https://github.com/FezVrasta/popper.js/pull/715\n *\n * Low DPI screens cause a popper to be blurry if not using full pixels (Safari\n * as well on High DPI screens).\n *\n * Firefox prefers no rounding for positioning and does not have blurriness on\n * high DPI screens.\n *\n * Only horizontal placement and left/right values need to be considered.\n */\nfunction getRoundedOffsets(data, shouldRound) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n  var round = Math.round,\n      floor = Math.floor;\n\n  var noRound = function noRound(v) {\n    return v;\n  };\n\n  var referenceWidth = round(reference.width);\n  var popperWidth = round(popper.width);\n\n  var isVertical = ['left', 'right'].indexOf(data.placement) !== -1;\n  var isVariation = data.placement.indexOf('-') !== -1;\n  var sameWidthParity = referenceWidth % 2 === popperWidth % 2;\n  var bothOddWidth = referenceWidth % 2 === 1 && popperWidth % 2 === 1;\n\n  var horizontalToInteger = !shouldRound ? noRound : isVertical || isVariation || sameWidthParity ? round : floor;\n  var verticalToInteger = !shouldRound ? noRound : round;\n\n  return {\n    left: horizontalToInteger(bothOddWidth && !isVariation && shouldRound ? popper.left - 1 : popper.left),\n    top: verticalToInteger(popper.top),\n    bottom: verticalToInteger(popper.bottom),\n    right: horizontalToInteger(popper.right)\n  };\n}\n\nvar isFirefox = isBrowser && /Firefox/i.test(navigator.userAgent);\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeStyle(data, options) {\n  var x = options.x,\n      y = options.y;\n  var popper = data.offsets.popper;\n\n  // Remove this legacy support in Popper.js v2\n\n  var legacyGpuAccelerationOption = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'applyStyle';\n  }).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');\n  }\n  var gpuAcceleration = legacyGpuAccelerationOption !== undefined ? legacyGpuAccelerationOption : options.gpuAcceleration;\n\n  var offsetParent = getOffsetParent(data.instance.popper);\n  var offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  var styles = {\n    position: popper.position\n  };\n\n  var offsets = getRoundedOffsets(data, window.devicePixelRatio < 2 || !isFirefox);\n\n  var sideA = x === 'bottom' ? 'top' : 'bottom';\n  var sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  var prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  var left = void 0,\n      top = void 0;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = 'translate3d(' + left + 'px, ' + top + 'px, 0)';\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    var invertTop = sideA === 'bottom' ? -1 : 1;\n    var invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = sideA + ', ' + sideB;\n  }\n\n  // Attributes\n  var attributes = {\n    'x-placement': data.placement\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = _extends({}, attributes, data.attributes);\n  data.styles = _extends({}, styles, data.styles);\n  data.arrowStyles = _extends({}, data.offsets.arrow, data.arrowStyles);\n\n  return data;\n}\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nfunction isModifierRequired(modifiers, requestingName, requestedName) {\n  var requesting = find(modifiers, function (_ref) {\n    var name = _ref.name;\n    return name === requestingName;\n  });\n\n  var isRequired = !!requesting && modifiers.some(function (modifier) {\n    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;\n  });\n\n  if (!isRequired) {\n    var _requesting = '`' + requestingName + '`';\n    var requested = '`' + requestedName + '`';\n    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');\n  }\n  return isRequired;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction arrow(data, options) {\n  var _data$offsets$arrow;\n\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  var arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn('WARNING: `arrow.element` must be child of its popper element!');\n      return data;\n    }\n  }\n\n  var placement = data.placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  var len = isVertical ? 'height' : 'width';\n  var sideCapitalized = isVertical ? 'Top' : 'Left';\n  var side = sideCapitalized.toLowerCase();\n  var altSide = isVertical ? 'left' : 'top';\n  var opSide = isVertical ? 'bottom' : 'right';\n  var arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -= popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] += reference[side] + arrowElementSize - popper[opSide];\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  var center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  var css = getStyleComputedProperty(data.instance.popper);\n  var popperMarginSide = parseFloat(css['margin' + sideCapitalized]);\n  var popperBorderSide = parseFloat(css['border' + sideCapitalized + 'Width']);\n  var sideValue = center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = (_data$offsets$arrow = {}, defineProperty(_data$offsets$arrow, side, Math.round(sideValue)), defineProperty(_data$offsets$arrow, altSide, ''), _data$offsets$arrow);\n\n  return data;\n}\n\n/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nfunction getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n\n/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nvar placements = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'];\n\n// Get rid of `auto` `auto-start` and `auto-end`\nvar validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nfunction clockwise(placement) {\n  var counter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var index = validPlacements.indexOf(placement);\n  var arr = validPlacements.slice(index + 1).concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n\nvar BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise'\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, options.boundariesElement, data.positionFixed);\n\n  var placement = data.placement.split('-')[0];\n  var placementOpposite = getOppositePlacement(placement);\n  var variation = data.placement.split('-')[1] || '';\n\n  var flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach(function (step, index) {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    var popperOffsets = data.offsets.popper;\n    var refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    var floor = Math.floor;\n    var overlapsRef = placement === 'left' && floor(popperOffsets.right) > floor(refOffsets.left) || placement === 'right' && floor(popperOffsets.left) < floor(refOffsets.right) || placement === 'top' && floor(popperOffsets.bottom) > floor(refOffsets.top) || placement === 'bottom' && floor(popperOffsets.top) < floor(refOffsets.bottom);\n\n    var overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    var overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    var overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    var overflowsBottom = floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    var overflowsBoundaries = placement === 'left' && overflowsLeft || placement === 'right' && overflowsRight || placement === 'top' && overflowsTop || placement === 'bottom' && overflowsBottom;\n\n    // flip the variation if required\n    var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n\n    // flips variation if reference element overflows boundaries\n    var flippedVariationByRef = !!options.flipVariations && (isVertical && variation === 'start' && overflowsLeft || isVertical && variation === 'end' && overflowsRight || !isVertical && variation === 'start' && overflowsTop || !isVertical && variation === 'end' && overflowsBottom);\n\n    // flips variation if popper content overflows boundaries\n    var flippedVariationByContent = !!options.flipVariationsByContent && (isVertical && variation === 'start' && overflowsRight || isVertical && variation === 'end' && overflowsLeft || !isVertical && variation === 'start' && overflowsBottom || !isVertical && variation === 'end' && overflowsTop);\n\n    var flippedVariation = flippedVariationByRef || flippedVariationByContent;\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = _extends({}, data.offsets.popper, getPopperOffsets(data.instance.popper, data.offsets.reference, data.placement));\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction keepTogether(data) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var placement = data.placement.split('-')[0];\n  var floor = Math.floor;\n  var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  var side = isVertical ? 'right' : 'bottom';\n  var opSide = isVertical ? 'left' : 'top';\n  var measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] = floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nfunction toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  var split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  var value = +split[1];\n  var unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    var element = void 0;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    var rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    var size = void 0;\n    if (unit === 'vh') {\n      size = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    } else {\n      size = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nfunction parseOffset(offset, popperOffsets, referenceOffsets, basePlacement) {\n  var offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  var useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  var fragments = offset.split(/(\\+|\\-)/).map(function (frag) {\n    return frag.trim();\n  });\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  var divider = fragments.indexOf(find(fragments, function (frag) {\n    return frag.search(/,|\\s/) !== -1;\n  }));\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  var splitRegex = /\\s*,\\s*|\\s+/;\n  var ops = divider !== -1 ? [fragments.slice(0, divider).concat([fragments[divider].split(splitRegex)[0]]), [fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider + 1))] : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map(function (op, index) {\n    // Most of the units rely on the orientation of the popper\n    var measurement = (index === 1 ? !useHeight : useHeight) ? 'height' : 'width';\n    var mergeWithPrevious = false;\n    return op\n    // This aggregates any `+` or `-` sign that aren't considered operators\n    // e.g.: 10 + +5 => [10, +, +5]\n    .reduce(function (a, b) {\n      if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n        a[a.length - 1] = b;\n        mergeWithPrevious = true;\n        return a;\n      } else if (mergeWithPrevious) {\n        a[a.length - 1] += b;\n        mergeWithPrevious = false;\n        return a;\n      } else {\n        return a.concat(b);\n      }\n    }, [])\n    // Here we convert the string values into number values (in px)\n    .map(function (str) {\n      return toValue(str, measurement, popperOffsets, referenceOffsets);\n    });\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach(function (op, index) {\n    op.forEach(function (frag, index2) {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nfunction offset(data, _ref) {\n  var offset = _ref.offset;\n  var placement = data.placement,\n      _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var basePlacement = placement.split('-')[0];\n\n  var offsets = void 0;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction preventOverflow(data, options) {\n  var boundariesElement = options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  var transformProp = getSupportedPropertyName('transform');\n  var popperStyles = data.instance.popper.style; // assignment to help minification\n  var top = popperStyles.top,\n      left = popperStyles.left,\n      transform = popperStyles[transformProp];\n\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, boundariesElement, data.positionFixed);\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  var order = options.priority;\n  var popper = data.offsets.popper;\n\n  var check = {\n    primary: function primary(placement) {\n      var value = popper[placement];\n      if (popper[placement] < boundaries[placement] && !options.escapeWithReference) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return defineProperty({}, placement, value);\n    },\n    secondary: function secondary(placement) {\n      var mainSide = placement === 'right' ? 'left' : 'top';\n      var value = popper[mainSide];\n      if (popper[placement] > boundaries[placement] && !options.escapeWithReference) {\n        value = Math.min(popper[mainSide], boundaries[placement] - (placement === 'right' ? popper.width : popper.height));\n      }\n      return defineProperty({}, mainSide, value);\n    }\n  };\n\n  order.forEach(function (placement) {\n    var side = ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = _extends({}, popper, check[side](placement));\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction shift(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    var _data$offsets = data.offsets,\n        reference = _data$offsets.reference,\n        popper = _data$offsets.popper;\n\n    var isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    var side = isVertical ? 'left' : 'top';\n    var measurement = isVertical ? 'width' : 'height';\n\n    var shiftOffsets = {\n      start: defineProperty({}, side, reference[side]),\n      end: defineProperty({}, side, reference[side] + reference[measurement] - popper[measurement])\n    };\n\n    data.offsets.popper = _extends({}, popper, shiftOffsets[shiftvariation]);\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  var refRect = data.offsets.reference;\n  var bound = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'preventOverflow';\n  }).boundaries;\n\n  if (refRect.bottom < bound.top || refRect.left > bound.right || refRect.top > bound.bottom || refRect.right < bound.left) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction inner(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  var subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] = reference[basePlacement] - (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nvar modifiers = {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\"  or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent'\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]'\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport',\n    /**\n     * @prop {Boolean} flipVariations=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the reference element overlaps its boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariations: false,\n    /**\n     * @prop {Boolean} flipVariationsByContent=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the popper element overlaps its reference boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariationsByContent: false\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right'\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined\n  }\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nvar Defaults = {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: function onCreate() {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: function onUpdate() {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers: modifiers\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n\n// Utils\n// Methods\nvar Popper = function () {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {Element|referenceObject} reference - The reference element used to position the popper\n   * @param {Element} popper - The HTML / XML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  function Popper(reference, popper) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    classCallCheck(this, Popper);\n\n    this.scheduleUpdate = function () {\n      return requestAnimationFrame(_this.update);\n    };\n\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = _extends({}, Popper.Defaults, options);\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: []\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys(_extends({}, Popper.Defaults.modifiers, options.modifiers)).forEach(function (name) {\n      _this.options.modifiers[name] = _extends({}, Popper.Defaults.modifiers[name] || {}, options.modifiers ? options.modifiers[name] : {});\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers).map(function (name) {\n      return _extends({\n        name: name\n      }, _this.options.modifiers[name]);\n    })\n    // sort the modifiers by order\n    .sort(function (a, b) {\n      return a.order - b.order;\n    });\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(function (modifierOptions) {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(_this.reference, _this.popper, _this.options, modifierOptions, _this.state);\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    var eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n\n\n  createClass(Popper, [{\n    key: 'update',\n    value: function update$$1() {\n      return update.call(this);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy$$1() {\n      return destroy.call(this);\n    }\n  }, {\n    key: 'enableEventListeners',\n    value: function enableEventListeners$$1() {\n      return enableEventListeners.call(this);\n    }\n  }, {\n    key: 'disableEventListeners',\n    value: function disableEventListeners$$1() {\n      return disableEventListeners.call(this);\n    }\n\n    /**\n     * Schedules an update. It will run on the next UI update available.\n     * @method scheduleUpdate\n     * @memberof Popper\n     */\n\n\n    /**\n     * Collection of utilities useful when writing custom modifiers.\n     * Starting from version 1.7, this method is available only if you\n     * include `popper-utils.js` before `popper.js`.\n     *\n     * **DEPRECATION**: This way to access PopperUtils is deprecated\n     * and will be removed in v2! Use the PopperUtils module directly instead.\n     * Due to the high instability of the methods contained in Utils, we can't\n     * guarantee them to follow semver. Use them at your own risk!\n     * @static\n     * @private\n     * @type {Object}\n     * @deprecated since version 1.8\n     * @member Utils\n     * @memberof Popper\n     */\n\n  }]);\n  return Popper;\n}();\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n\n\nPopper.Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\nPopper.placements = placements;\nPopper.Defaults = Defaults;\n\nexport default Popper;\n//# sourceMappingURL=popper.js.map\n","var DOM_PROPERTIES_TO_CHECK = [\n    'innerHTML',\n    'ownerDocument',\n    'style',\n    'attributes',\n    'nodeValue',\n];\nvar objectTypes = [\n    'Array',\n    'ArrayBuffer',\n    'AsyncFunction',\n    'AsyncGenerator',\n    'AsyncGeneratorFunction',\n    'Date',\n    'Error',\n    'Function',\n    'Generator',\n    'GeneratorFunction',\n    'HTMLElement',\n    'Map',\n    'Object',\n    'Promise',\n    'RegExp',\n    'Set',\n    'WeakMap',\n    'WeakSet',\n];\nvar primitiveTypes = [\n    'bigint',\n    'boolean',\n    'null',\n    'number',\n    'string',\n    'symbol',\n    'undefined',\n];\nexport function getObjectType(value) {\n    var objectTypeName = Object.prototype.toString.call(value).slice(8, -1);\n    if (/HTML\\w+Element/.test(objectTypeName)) {\n        return 'HTMLElement';\n    }\n    if (isObjectType(objectTypeName)) {\n        return objectTypeName;\n    }\n    return undefined;\n}\nfunction isObjectOfType(type) {\n    return function (value) { return getObjectType(value) === type; };\n}\nfunction isObjectType(name) {\n    return objectTypes.includes(name);\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction isOfType(type) {\n    return function (value) { return typeof value === type; };\n}\nfunction isPrimitiveType(name) {\n    return primitiveTypes.includes(name);\n}\nfunction is(value) {\n    if (value === null) {\n        return 'null';\n    }\n    switch (typeof value) {\n        case 'bigint':\n            return 'bigint';\n        case 'boolean':\n            return 'boolean';\n        case 'number':\n            return 'number';\n        case 'string':\n            return 'string';\n        case 'symbol':\n            return 'symbol';\n        case 'undefined':\n            return 'undefined';\n        default:\n    }\n    if (is.array(value)) {\n        return 'Array';\n    }\n    if (is.plainFunction(value)) {\n        return 'Function';\n    }\n    var tagType = getObjectType(value);\n    /* istanbul ignore else */\n    if (tagType) {\n        return tagType;\n    }\n    /* istanbul ignore next */\n    return 'Object';\n}\nis.array = Array.isArray;\nis.arrayOf = function (target, predicate) {\n    if (!is.array(target) && !is.function(predicate)) {\n        return false;\n    }\n    return target.every(function (d) { return predicate(d); });\n};\nis.asyncGeneratorFunction = function (value) {\n    return getObjectType(value) === 'AsyncGeneratorFunction';\n};\n// eslint-disable-next-line @typescript-eslint/ban-types\nis.asyncFunction = isObjectOfType('AsyncFunction');\nis.bigint = isOfType('bigint');\nis.boolean = function (value) {\n    return value === true || value === false;\n};\nis.date = isObjectOfType('Date');\nis.defined = function (value) { return !is.undefined(value); };\nis.domElement = function (value) {\n    return (is.object(value) &&\n        !is.plainObject(value) &&\n        value.nodeType === 1 &&\n        is.string(value.nodeName) &&\n        DOM_PROPERTIES_TO_CHECK.every(function (property) { return property in value; }));\n};\nis.empty = function (value) {\n    return ((is.string(value) && value.length === 0) ||\n        (is.array(value) && value.length === 0) ||\n        (is.object(value) && !is.map(value) && !is.set(value) && Object.keys(value).length === 0) ||\n        (is.set(value) && value.size === 0) ||\n        (is.map(value) && value.size === 0));\n};\nis.error = isObjectOfType('Error');\n// eslint-disable-next-line @typescript-eslint/ban-types\nis.function = isOfType('function');\nis.generator = function (value) {\n    return (is.iterable(value) &&\n        is.function(value.next) &&\n        is.function(value.throw));\n};\nis.generatorFunction = isObjectOfType('GeneratorFunction');\nis.instanceOf = function (instance, class_) {\n    if (!instance || !class_) {\n        return false;\n    }\n    return Object.getPrototypeOf(instance) === class_.prototype;\n};\nis.iterable = function (value) {\n    return (!is.nullOrUndefined(value) && is.function(value[Symbol.iterator]));\n};\nis.map = isObjectOfType('Map');\nis.nan = function (value) {\n    return Number.isNaN(value);\n};\nis.null = function (value) {\n    return value === null;\n};\nis.nullOrUndefined = function (value) {\n    return is.null(value) || is.undefined(value);\n};\nis.number = function (value) {\n    return isOfType('number')(value) && !is.nan(value);\n};\nis.numericString = function (value) {\n    return is.string(value) && value.length > 0 && !Number.isNaN(Number(value));\n};\n// eslint-disable-next-line @typescript-eslint/ban-types\nis.object = function (value) {\n    return !is.nullOrUndefined(value) && (is.function(value) || typeof value === 'object');\n};\nis.oneOf = function (target, value) {\n    if (!is.array(target)) {\n        return false;\n    }\n    // eslint-disable-next-line unicorn/prefer-includes\n    return target.indexOf(value) > -1;\n};\n// eslint-disable-next-line @typescript-eslint/ban-types\nis.plainFunction = isObjectOfType('Function');\nis.plainObject = function (value) {\n    if (getObjectType(value) !== 'Object') {\n        return false;\n    }\n    var prototype = Object.getPrototypeOf(value);\n    return prototype === null || prototype === Object.getPrototypeOf({});\n};\nis.primitive = function (value) {\n    return is.null(value) || isPrimitiveType(typeof value);\n};\nis.promise = isObjectOfType('Promise');\nis.propertyOf = function (target, key, predicate) {\n    if (!is.object(target) || !key) {\n        return false;\n    }\n    var value = target[key];\n    if (is.function(predicate)) {\n        return predicate(value);\n    }\n    return is.defined(value);\n};\nis.regexp = isObjectOfType('RegExp');\nis.set = isObjectOfType('Set');\nis.string = isOfType('string');\nis.symbol = isOfType('symbol');\nis.undefined = isOfType('undefined');\nis.weakMap = isObjectOfType('WeakMap');\nis.weakSet = isObjectOfType('WeakSet');\nexport * from './types';\nexport default is;\n//# sourceMappingURL=index.js.map","// eslint-disable-next-line @typescript-eslint/ban-types\nfunction isOfType(type) {\n    return function (value) { return typeof value === type; };\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport var isFunction = isOfType('function');\nexport var isNull = function (value) {\n    return value === null;\n};\nexport var isRegex = function (value) {\n    return Object.prototype.toString.call(value).slice(8, -1) === 'RegExp';\n};\nexport var isObject = function (value) {\n    return !isUndefined(value) && !isNull(value) && (isFunction(value) || typeof value === 'object');\n};\nexport var isUndefined = isOfType('undefined');\n//# sourceMappingURL=helpers.js.map","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { isObject, isRegex } from './helpers';\nfunction equalArray(left, right) {\n    var length = left.length;\n    if (length !== right.length) {\n        return false;\n    }\n    for (var index = length; index-- !== 0;) {\n        if (!equal(left[index], right[index])) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction equalArrayBuffer(left, right) {\n    if (left.byteLength !== right.byteLength) {\n        return false;\n    }\n    var view1 = new DataView(left.buffer);\n    var view2 = new DataView(right.buffer);\n    var index = left.byteLength;\n    while (index--) {\n        if (view1.getUint8(index) !== view2.getUint8(index)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction equalMap(left, right) {\n    var e_1, _a, e_2, _b;\n    if (left.size !== right.size) {\n        return false;\n    }\n    try {\n        for (var _c = __values(left.entries()), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var index = _d.value;\n            if (!right.has(index[0])) {\n                return false;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    try {\n        for (var _e = __values(left.entries()), _f = _e.next(); !_f.done; _f = _e.next()) {\n            var index = _f.value;\n            if (!equal(index[1], right.get(index[0]))) {\n                return false;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return true;\n}\nfunction equalSet(left, right) {\n    var e_3, _a;\n    if (left.size !== right.size) {\n        return false;\n    }\n    try {\n        for (var _b = __values(left.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var index = _c.value;\n            if (!right.has(index[0])) {\n                return false;\n            }\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return true;\n}\nexport default function equal(left, right) {\n    if (left === right) {\n        return true;\n    }\n    if (left && isObject(left) && right && isObject(right)) {\n        if (left.constructor !== right.constructor) {\n            return false;\n        }\n        if (Array.isArray(left) && Array.isArray(right)) {\n            return equalArray(left, right);\n        }\n        if (left instanceof Map && right instanceof Map) {\n            return equalMap(left, right);\n        }\n        if (left instanceof Set && right instanceof Set) {\n            return equalSet(left, right);\n        }\n        if (ArrayBuffer.isView(left) && ArrayBuffer.isView(right)) {\n            return equalArrayBuffer(left, right);\n        }\n        if (isRegex(left) && isRegex(right)) {\n            return left.source === right.source && left.flags === right.flags;\n        }\n        if (left.valueOf !== Object.prototype.valueOf) {\n            return left.valueOf() === right.valueOf();\n        }\n        if (left.toString !== Object.prototype.toString) {\n            return left.toString() === right.toString();\n        }\n        var leftKeys = Object.keys(left);\n        var rightKeys = Object.keys(right);\n        if (leftKeys.length !== rightKeys.length) {\n            return false;\n        }\n        for (var index = leftKeys.length; index-- !== 0;) {\n            if (!Object.prototype.hasOwnProperty.call(right, leftKeys[index])) {\n                return false;\n            }\n        }\n        for (var index = leftKeys.length; index-- !== 0;) {\n            var key = leftKeys[index];\n            if (key === '_owner' && left.$$typeof) {\n                // React-specific: avoid traversing React elements' _owner.\n                //  _owner contains circular references\n                // and is not needed when comparing the actual elements (and not their owners)\n                // eslint-disable-next-line no-continue\n                continue;\n            }\n            if (!equal(left[key], right[key])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    if (Number.isNaN(left) && Number.isNaN(right)) {\n        return true;\n    }\n    return left === right;\n}\n//# sourceMappingURL=index.js.map","import equal from '@gilbarbara/deep-equal';\nimport is from 'is-lite';\nexport function canHaveLength() {\n    var arguments_ = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        arguments_[_i] = arguments[_i];\n    }\n    return arguments_.every(function (d) { return is.string(d) || is.array(d) || is.plainObject(d); });\n}\nexport function checkEquality(left, right, value) {\n    if (!isSameType(left, right)) {\n        return false;\n    }\n    if ([left, right].every(is.array)) {\n        return !left.some(hasValue(value)) && right.some(hasValue(value));\n    }\n    /* istanbul ignore else */\n    if ([left, right].every(is.plainObject)) {\n        return (!Object.entries(left).some(hasEntry(value)) && Object.entries(right).some(hasEntry(value)));\n    }\n    return right === value;\n}\nexport function compareNumbers(previousData, data, options) {\n    var actual = options.actual, key = options.key, previous = options.previous, type = options.type;\n    var left = nested(previousData, key);\n    var right = nested(data, key);\n    var changed = [left, right].every(is.number) && (type === 'increased' ? left < right : left > right);\n    if (!is.undefined(actual)) {\n        changed = changed && right === actual;\n    }\n    if (!is.undefined(previous)) {\n        changed = changed && left === previous;\n    }\n    return changed;\n}\nexport function compareValues(previousData, data, options) {\n    var key = options.key, type = options.type, value = options.value;\n    var left = nested(previousData, key);\n    var right = nested(data, key);\n    var primary = type === 'added' ? left : right;\n    var secondary = type === 'added' ? right : left;\n    // console.log({ primary, secondary });\n    if (!is.nullOrUndefined(value)) {\n        if (is.defined(primary)) {\n            // check if nested data matches\n            if (is.array(primary) || is.plainObject(primary)) {\n                return checkEquality(primary, secondary, value);\n            }\n        }\n        else {\n            return equal(secondary, value);\n        }\n        return false;\n    }\n    if ([left, right].every(is.array)) {\n        return !secondary.every(isEqualPredicate(primary));\n    }\n    if ([left, right].every(is.plainObject)) {\n        return hasExtraKeys(Object.keys(primary), Object.keys(secondary));\n    }\n    return (![left, right].every(function (d) { return is.primitive(d) && is.defined(d); }) &&\n        (type === 'added'\n            ? !is.defined(left) && is.defined(right)\n            : is.defined(left) && !is.defined(right)));\n}\nexport function getIterables(previousData, data, _a) {\n    var _b = _a === void 0 ? {} : _a, key = _b.key;\n    var left = nested(previousData, key);\n    var right = nested(data, key);\n    if (!isSameType(left, right)) {\n        throw new TypeError('Inputs have different types');\n    }\n    if (!canHaveLength(left, right)) {\n        throw new TypeError(\"Inputs don't have length\");\n    }\n    if ([left, right].every(is.plainObject)) {\n        left = Object.keys(left);\n        right = Object.keys(right);\n    }\n    return [left, right];\n}\nexport function hasEntry(input) {\n    return function (_a) {\n        var key = _a[0], value = _a[1];\n        if (is.array(input)) {\n            return (equal(input, value) ||\n                input.some(function (d) { return equal(d, value) || (is.array(value) && isEqualPredicate(value)(d)); }));\n        }\n        /* istanbul ignore else */\n        if (is.plainObject(input) && input[key]) {\n            return !!input[key] && equal(input[key], value);\n        }\n        return equal(input, value);\n    };\n}\nexport function hasExtraKeys(left, right) {\n    return right.some(function (d) { return !left.includes(d); });\n}\nexport function hasValue(input) {\n    return function (value) {\n        if (is.array(input)) {\n            return input.some(function (d) { return equal(d, value) || (is.array(value) && isEqualPredicate(value)(d)); });\n        }\n        return equal(input, value);\n    };\n}\nexport function includesOrEqualsTo(previousValue, value) {\n    return is.array(previousValue)\n        ? previousValue.some(function (d) { return equal(d, value); })\n        : equal(previousValue, value);\n}\nexport function isEqualPredicate(data) {\n    return function (value) { return data.some(function (d) { return equal(d, value); }); };\n}\nexport function isSameType() {\n    var arguments_ = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        arguments_[_i] = arguments[_i];\n    }\n    return (arguments_.every(is.array) ||\n        arguments_.every(is.number) ||\n        arguments_.every(is.plainObject) ||\n        arguments_.every(is.string));\n}\nexport function nested(data, property) {\n    /* istanbul ignore else */\n    if (is.plainObject(data) || is.array(data)) {\n        /* istanbul ignore else */\n        if (is.string(property)) {\n            var props = property.split('.');\n            return props.reduce(function (acc, d) { return acc && acc[d]; }, data);\n        }\n        /* istanbul ignore else */\n        if (is.number(property)) {\n            return data[property];\n        }\n        return data;\n    }\n    return data;\n}\n//# sourceMappingURL=helpers.js.map","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Popper from 'popper.js';\nimport deepmerge from 'deepmerge';\nimport is from 'is-lite';\nimport treeChanges from 'tree-changes';\nimport ReactDOM from 'react-dom';\n\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar DEFAULTS = {flip:{padding:20},preventOverflow:{padding:10}};\n\nvar VALIDATOR_ARG_ERROR_MESSAGE='The typeValidator argument must be a function '+'with the signature function(props, propName, componentName).';var MESSAGE_ARG_ERROR_MESSAGE='The error message is optional, but must be a string if provided.';function propIsRequired(condition,props,propName,componentName){if(typeof condition==='boolean'){return condition;}if(typeof condition==='function'){return condition(props,propName,componentName);}if(Boolean(condition)===true){return Boolean(condition);}return false;}function propExists(props,propName){return Object.hasOwnProperty.call(props,propName);}function missingPropError(props,propName,componentName,message){if(message){return new Error(message);}return new Error(\"Required \".concat(props[propName],\" `\").concat(propName,\"` was not specified in `\").concat(componentName,\"`.\"));}function guardAgainstInvalidArgTypes(typeValidator,message){if(typeof typeValidator!=='function'){throw new TypeError(VALIDATOR_ARG_ERROR_MESSAGE);}if(Boolean(message)&&typeof message!=='string'){throw new TypeError(MESSAGE_ARG_ERROR_MESSAGE);}}function isRequiredIf(typeValidator,condition,message){guardAgainstInvalidArgTypes(typeValidator,message);return function(props,propName,componentName){for(var _len=arguments.length,rest=new Array(_len>3?_len-3:0),_key=3;_key<_len;_key++){rest[_key-3]=arguments[_key];}if(propIsRequired(condition,props,propName,componentName)){if(propExists(props,propName)){return typeValidator.apply(void 0,[props,propName,componentName].concat(rest));}return missingPropError(props,propName,componentName,message);}// Is not required, so just run typeValidator.\nreturn typeValidator.apply(void 0,[props,propName,componentName].concat(rest));};}\n\nvar STATUS = {INIT:'init',IDLE:'idle',OPENING:'opening',OPEN:'open',CLOSING:'closing',ERROR:'error'};\n\nvar isReact16=ReactDOM.createPortal!==undefined;function canUseDOM(){return !!(typeof window!=='undefined'&&window.document&&window.document.createElement);}function isMobile(){return 'ontouchstart'in window&&/Mobi/.test(navigator.userAgent);}/**\n * Log method calls if debug is enabled\n *\n * @private\n * @param {Object}       arg\n * @param {string}       arg.title    - The title the logger was called from\n * @param {Object|Array} [arg.data]   - The data to be logged\n * @param {boolean}      [arg.warn]  - If true, the message will be a warning\n * @param {boolean}      [arg.debug] - Nothing will be logged unless debug is true\n */function log(_ref){var title=_ref.title,data=_ref.data,_ref$warn=_ref.warn,warn=_ref$warn===void 0?false:_ref$warn,_ref$debug=_ref.debug,debug=_ref$debug===void 0?false:_ref$debug;/* eslint-disable no-console */var logFn=warn?console.warn||console.error:console.log;if(debug&&title&&data){console.groupCollapsed(\"%creact-floater: \".concat(title),'color: #9b00ff; font-weight: bold; font-size: 12px;');if(Array.isArray(data)){data.forEach(function(d){if(is.plainObject(d)&&d.key){logFn.apply(console,[d.key,d.value]);}else {logFn.apply(console,[d]);}});}else {logFn.apply(console,[data]);}console.groupEnd();}/* eslint-enable */}function on(element,event,cb){var capture=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;element.addEventListener(event,cb,capture);}function off(element,event,cb){var capture=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;element.removeEventListener(event,cb,capture);}function once(element,event,cb){var capture=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var _nextCB;// eslint-disable-next-line prefer-const\n_nextCB=function nextCB(e){cb(e);off(element,event,_nextCB);};on(element,event,_nextCB,capture);}function noop(){}\n\nvar ReactFloaterPortal=/*#__PURE__*/function(_React$Component){_inherits(ReactFloaterPortal,_React$Component);var _super=_createSuper(ReactFloaterPortal);function ReactFloaterPortal(){_classCallCheck(this,ReactFloaterPortal);return _super.apply(this,arguments);}_createClass(ReactFloaterPortal,[{key:\"componentDidMount\",value:function componentDidMount(){if(!canUseDOM())return;if(!this.node){this.appendNode();}if(!isReact16){this.renderPortal();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(!canUseDOM())return;if(!isReact16){this.renderPortal();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(!canUseDOM()||!this.node)return;if(!isReact16){ReactDOM.unmountComponentAtNode(this.node);}if(this.node&&this.node.parentNode===document.body){document.body.removeChild(this.node);this.node=undefined;}}},{key:\"appendNode\",value:function appendNode(){var _this$props=this.props,id=_this$props.id,zIndex=_this$props.zIndex;if(!this.node){this.node=document.createElement('div');/* istanbul ignore else */if(id){this.node.id=id;}if(zIndex){this.node.style.zIndex=zIndex;}document.body.appendChild(this.node);}}},{key:\"renderPortal\",value:function renderPortal(){if(!canUseDOM())return null;var _this$props2=this.props,children=_this$props2.children,setRef=_this$props2.setRef;if(!this.node){this.appendNode();}/* istanbul ignore else */if(isReact16){return/*#__PURE__*/ReactDOM.createPortal(children,this.node);}var portal=ReactDOM.unstable_renderSubtreeIntoContainer(this,children.length>1?/*#__PURE__*/React.createElement(\"div\",null,children):children[0],this.node);setRef(portal);return null;}},{key:\"renderReact16\",value:function renderReact16(){var _this$props3=this.props,hasChildren=_this$props3.hasChildren,placement=_this$props3.placement,target=_this$props3.target;if(!hasChildren){if(target||placement==='center'){return this.renderPortal();}return null;}return this.renderPortal();}},{key:\"render\",value:function render(){if(!isReact16){return null;}return this.renderReact16();}}]);return ReactFloaterPortal;}(React.Component);_defineProperty(ReactFloaterPortal,\"propTypes\",{children:PropTypes.oneOfType([PropTypes.element,PropTypes.array]),hasChildren:PropTypes.bool,id:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),placement:PropTypes.string,setRef:PropTypes.func.isRequired,target:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),zIndex:PropTypes.number});\n\nvar FloaterArrow=/*#__PURE__*/function(_React$Component){_inherits(FloaterArrow,_React$Component);var _super=_createSuper(FloaterArrow);function FloaterArrow(){_classCallCheck(this,FloaterArrow);return _super.apply(this,arguments);}_createClass(FloaterArrow,[{key:\"parentStyle\",get:function get(){var _this$props=this.props,placement=_this$props.placement,styles=_this$props.styles;var length=styles.arrow.length;var arrow={pointerEvents:'none',position:'absolute',width:'100%'};/* istanbul ignore else */if(placement.startsWith('top')){arrow.bottom=0;arrow.left=0;arrow.right=0;arrow.height=length;}else if(placement.startsWith('bottom')){arrow.left=0;arrow.right=0;arrow.top=0;arrow.height=length;}else if(placement.startsWith('left')){arrow.right=0;arrow.top=0;arrow.bottom=0;}else if(placement.startsWith('right')){arrow.left=0;arrow.top=0;}return arrow;}},{key:\"render\",value:function render(){var _this$props2=this.props,placement=_this$props2.placement,setArrowRef=_this$props2.setArrowRef,styles=_this$props2.styles;var _styles$arrow=styles.arrow,color=_styles$arrow.color,display=_styles$arrow.display,length=_styles$arrow.length,margin=_styles$arrow.margin,position=_styles$arrow.position,spread=_styles$arrow.spread;var arrowStyles={display:display,position:position};var points;var x=spread;var y=length;/* istanbul ignore else */if(placement.startsWith('top')){points=\"0,0 \".concat(x/2,\",\").concat(y,\" \").concat(x,\",0\");arrowStyles.bottom=0;arrowStyles.marginLeft=margin;arrowStyles.marginRight=margin;}else if(placement.startsWith('bottom')){points=\"\".concat(x,\",\").concat(y,\" \").concat(x/2,\",0 0,\").concat(y);arrowStyles.top=0;arrowStyles.marginLeft=margin;arrowStyles.marginRight=margin;}else if(placement.startsWith('left')){y=spread;x=length;points=\"0,0 \".concat(x,\",\").concat(y/2,\" 0,\").concat(y);arrowStyles.right=0;arrowStyles.marginTop=margin;arrowStyles.marginBottom=margin;}else if(placement.startsWith('right')){y=spread;x=length;points=\"\".concat(x,\",\").concat(y,\" \").concat(x,\",0 0,\").concat(y/2);arrowStyles.left=0;arrowStyles.marginTop=margin;arrowStyles.marginBottom=margin;}return/*#__PURE__*/React.createElement(\"div\",{className:\"__floater__arrow\",style:this.parentStyle},/*#__PURE__*/React.createElement(\"span\",{ref:setArrowRef,style:arrowStyles},/*#__PURE__*/React.createElement(\"svg\",{width:x,height:y,version:\"1.1\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"polygon\",{points:points,fill:color}))));}}]);return FloaterArrow;}(React.Component);_defineProperty(FloaterArrow,\"propTypes\",{placement:PropTypes.string.isRequired,setArrowRef:PropTypes.func.isRequired,styles:PropTypes.object.isRequired});\n\nvar _excluded$1=[\"color\",\"height\",\"width\"];function FloaterCloseBtn(_ref){var handleClick=_ref.handleClick,styles=_ref.styles;var color=styles.color,height=styles.height,width=styles.width,style=_objectWithoutProperties(styles,_excluded$1);return/*#__PURE__*/React.createElement(\"button\",{\"aria-label\":\"close\",onClick:handleClick,style:style,type:\"button\"},/*#__PURE__*/React.createElement(\"svg\",{width:\"\".concat(width,\"px\"),height:\"\".concat(height,\"px\"),viewBox:\"0 0 18 18\",version:\"1.1\",xmlns:\"http://www.w3.org/2000/svg\",preserveAspectRatio:\"xMidYMid\"},/*#__PURE__*/React.createElement(\"g\",null,/*#__PURE__*/React.createElement(\"path\",{d:\"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z\",fill:color}))));}FloaterCloseBtn.propTypes={handleClick:PropTypes.func.isRequired,styles:PropTypes.object.isRequired};\n\nfunction FloaterContainer(_ref){var content=_ref.content,footer=_ref.footer,handleClick=_ref.handleClick,open=_ref.open,positionWrapper=_ref.positionWrapper,showCloseButton=_ref.showCloseButton,title=_ref.title,styles=_ref.styles;var output={content:/*#__PURE__*/React.isValidElement(content)?content:/*#__PURE__*/React.createElement(\"div\",{className:\"__floater__content\",style:styles.content},content)};if(title){output.title=/*#__PURE__*/React.isValidElement(title)?title:/*#__PURE__*/React.createElement(\"div\",{className:\"__floater__title\",style:styles.title},title);}if(footer){output.footer=/*#__PURE__*/React.isValidElement(footer)?footer:/*#__PURE__*/React.createElement(\"div\",{className:\"__floater__footer\",style:styles.footer},footer);}if((showCloseButton||positionWrapper)&&!is[\"boolean\"](open)){output.close=/*#__PURE__*/React.createElement(FloaterCloseBtn,{styles:styles.close,handleClick:handleClick});}return/*#__PURE__*/React.createElement(\"div\",{className:\"__floater__container\",style:styles.container},output.close,output.title,output.content,output.footer);}FloaterContainer.propTypes={content:PropTypes.node.isRequired,footer:PropTypes.node,handleClick:PropTypes.func.isRequired,open:PropTypes.bool,positionWrapper:PropTypes.bool.isRequired,showCloseButton:PropTypes.bool.isRequired,styles:PropTypes.object.isRequired,title:PropTypes.node};\n\nvar Floater=/*#__PURE__*/function(_React$Component){_inherits(Floater,_React$Component);var _super=_createSuper(Floater);function Floater(){_classCallCheck(this,Floater);return _super.apply(this,arguments);}_createClass(Floater,[{key:\"style\",get:function get(){var _this$props=this.props,disableAnimation=_this$props.disableAnimation,component=_this$props.component,placement=_this$props.placement,hideArrow=_this$props.hideArrow,status=_this$props.status,styles=_this$props.styles;var length=styles.arrow.length,floater=styles.floater,floaterCentered=styles.floaterCentered,floaterClosing=styles.floaterClosing,floaterOpening=styles.floaterOpening,floaterWithAnimation=styles.floaterWithAnimation,floaterWithComponent=styles.floaterWithComponent;var element={};if(!hideArrow){if(placement.startsWith('top')){element.padding=\"0 0 \".concat(length,\"px\");}else if(placement.startsWith('bottom')){element.padding=\"\".concat(length,\"px 0 0\");}else if(placement.startsWith('left')){element.padding=\"0 \".concat(length,\"px 0 0\");}else if(placement.startsWith('right')){element.padding=\"0 0 0 \".concat(length,\"px\");}}if([STATUS.OPENING,STATUS.OPEN].indexOf(status)!==-1){element=_objectSpread2(_objectSpread2({},element),floaterOpening);}if(status===STATUS.CLOSING){element=_objectSpread2(_objectSpread2({},element),floaterClosing);}if(status===STATUS.OPEN&&!disableAnimation){element=_objectSpread2(_objectSpread2({},element),floaterWithAnimation);}if(placement==='center'){element=_objectSpread2(_objectSpread2({},element),floaterCentered);}if(component){element=_objectSpread2(_objectSpread2({},element),floaterWithComponent);}return _objectSpread2(_objectSpread2({},floater),element);}},{key:\"render\",value:function render(){var _this$props2=this.props,component=_this$props2.component,closeFn=_this$props2.handleClick,hideArrow=_this$props2.hideArrow,setFloaterRef=_this$props2.setFloaterRef,status=_this$props2.status;var output={};var classes=['__floater'];if(component){if(/*#__PURE__*/React.isValidElement(component)){output.content=/*#__PURE__*/React.cloneElement(component,{closeFn:closeFn});}else {output.content=component({closeFn:closeFn});}}else {output.content=/*#__PURE__*/React.createElement(FloaterContainer,this.props);}if(status===STATUS.OPEN){classes.push('__floater__open');}if(!hideArrow){output.arrow=/*#__PURE__*/React.createElement(FloaterArrow,this.props);}return/*#__PURE__*/React.createElement(\"div\",{ref:setFloaterRef,className:classes.join(' '),style:this.style},/*#__PURE__*/React.createElement(\"div\",{className:\"__floater__body\"},output.content,output.arrow));}}]);return Floater;}(React.Component);_defineProperty(Floater,\"propTypes\",{component:PropTypes.oneOfType([PropTypes.func,PropTypes.element]),content:PropTypes.node,disableAnimation:PropTypes.bool.isRequired,footer:PropTypes.node,handleClick:PropTypes.func.isRequired,hideArrow:PropTypes.bool.isRequired,open:PropTypes.bool,placement:PropTypes.string.isRequired,positionWrapper:PropTypes.bool.isRequired,setArrowRef:PropTypes.func.isRequired,setFloaterRef:PropTypes.func.isRequired,showCloseButton:PropTypes.bool,status:PropTypes.string.isRequired,styles:PropTypes.object.isRequired,title:PropTypes.node});\n\nvar ReactFloaterWrapper=/*#__PURE__*/function(_React$Component){_inherits(ReactFloaterWrapper,_React$Component);var _super=_createSuper(ReactFloaterWrapper);function ReactFloaterWrapper(){_classCallCheck(this,ReactFloaterWrapper);return _super.apply(this,arguments);}_createClass(ReactFloaterWrapper,[{key:\"render\",value:function render(){var _this$props=this.props,children=_this$props.children,handleClick=_this$props.handleClick,handleMouseEnter=_this$props.handleMouseEnter,handleMouseLeave=_this$props.handleMouseLeave,setChildRef=_this$props.setChildRef,setWrapperRef=_this$props.setWrapperRef,style=_this$props.style,styles=_this$props.styles;var element;/* istanbul ignore else */if(children){if(React.Children.count(children)===1){if(!/*#__PURE__*/React.isValidElement(children)){element=/*#__PURE__*/React.createElement(\"span\",null,children);}else {var refProp=is[\"function\"](children.type)?'innerRef':'ref';element=/*#__PURE__*/React.cloneElement(React.Children.only(children),_defineProperty({},refProp,setChildRef));}}else {element=children;}}if(!element){return null;}return/*#__PURE__*/React.createElement(\"span\",{ref:setWrapperRef,style:_objectSpread2(_objectSpread2({},styles),style),onClick:handleClick,onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave},element);}}]);return ReactFloaterWrapper;}(React.Component);_defineProperty(ReactFloaterWrapper,\"propTypes\",{children:PropTypes.node,handleClick:PropTypes.func.isRequired,handleMouseEnter:PropTypes.func.isRequired,handleMouseLeave:PropTypes.func.isRequired,setChildRef:PropTypes.func.isRequired,setWrapperRef:PropTypes.func.isRequired,style:PropTypes.object,styles:PropTypes.object.isRequired});\n\nvar defaultOptions={zIndex:100};function getStyles(styles){var options=deepmerge(defaultOptions,styles.options||{});return {wrapper:{cursor:'help',display:'inline-flex',flexDirection:'column',zIndex:options.zIndex},wrapperPosition:{left:-1000,position:'absolute',top:-1000,visibility:'hidden'},floater:{display:'inline-block',filter:'drop-shadow(0 0 3px rgba(0, 0, 0, 0.3))',maxWidth:300,opacity:0,position:'relative',transition:'opacity 0.3s',visibility:'hidden',zIndex:options.zIndex},floaterOpening:{opacity:1,visibility:'visible'},floaterWithAnimation:{opacity:1,transition:'opacity 0.3s, transform 0.2s',visibility:'visible'},floaterWithComponent:{maxWidth:'100%'},floaterClosing:{opacity:0,visibility:'visible'},floaterCentered:{left:'50%',position:'fixed',top:'50%',transform:'translate(-50%, -50%)'},container:{backgroundColor:'#fff',color:'#666',minHeight:60,minWidth:200,padding:20,position:'relative',zIndex:10},title:{borderBottom:'1px solid #555',color:'#555',fontSize:18,marginBottom:5,paddingBottom:6,paddingRight:18},content:{fontSize:15},close:{backgroundColor:'transparent',border:0,borderRadius:0,color:'#555',fontSize:0,height:15,outline:'none',padding:10,position:'absolute',right:0,top:0,width:15,WebkitAppearance:'none'},footer:{borderTop:'1px solid #ccc',fontSize:13,marginTop:10,paddingTop:5},arrow:{color:'#fff',display:'inline-flex',length:16,margin:8,position:'absolute',spread:32},options:options};}\n\nvar _excluded=[\"arrow\",\"flip\",\"offset\"];var POSITIONING_PROPS=['position','top','right','bottom','left'];var ReactFloater=/*#__PURE__*/function(_React$Component){_inherits(ReactFloater,_React$Component);var _super=_createSuper(ReactFloater);function ReactFloater(props){var _this;_classCallCheck(this,ReactFloater);_this=_super.call(this,props);/* istanbul ignore else */_defineProperty(_assertThisInitialized(_this),\"setArrowRef\",function(ref){_this.arrowRef=ref;});_defineProperty(_assertThisInitialized(_this),\"setChildRef\",function(ref){_this.childRef=ref;});_defineProperty(_assertThisInitialized(_this),\"setFloaterRef\",function(ref){_this.floaterRef=ref;});_defineProperty(_assertThisInitialized(_this),\"setWrapperRef\",function(ref){_this.wrapperRef=ref;});_defineProperty(_assertThisInitialized(_this),\"handleTransitionEnd\",function(){var status=_this.state.status;var callback=_this.props.callback;/* istanbul ignore else */if(_this.wrapperPopper){_this.wrapperPopper.instance.update();}_this.setState({status:status===STATUS.OPENING?STATUS.OPEN:STATUS.IDLE},function(){var newStatus=_this.state.status;callback(newStatus===STATUS.OPEN?'open':'close',_this.props);});});_defineProperty(_assertThisInitialized(_this),\"handleClick\",function(){var _this$props=_this.props,event=_this$props.event,open=_this$props.open;if(is[\"boolean\"](open))return;var _this$state=_this.state,positionWrapper=_this$state.positionWrapper,status=_this$state.status;/* istanbul ignore else */if(_this.event==='click'||_this.event==='hover'&&positionWrapper){log({title:'click',data:[{event:event,status:status===STATUS.OPEN?'closing':'opening'}],debug:_this.debug});_this.toggle();}});_defineProperty(_assertThisInitialized(_this),\"handleMouseEnter\",function(){var _this$props2=_this.props,event=_this$props2.event,open=_this$props2.open;if(is[\"boolean\"](open)||isMobile())return;var status=_this.state.status;/* istanbul ignore else */if(_this.event==='hover'&&status===STATUS.IDLE){log({title:'mouseEnter',data:[{key:'originalEvent',value:event}],debug:_this.debug});clearTimeout(_this.eventDelayTimeout);_this.toggle();}});_defineProperty(_assertThisInitialized(_this),\"handleMouseLeave\",function(){var _this$props3=_this.props,event=_this$props3.event,eventDelay=_this$props3.eventDelay,open=_this$props3.open;if(is[\"boolean\"](open)||isMobile())return;var _this$state2=_this.state,status=_this$state2.status,positionWrapper=_this$state2.positionWrapper;/* istanbul ignore else */if(_this.event==='hover'){log({title:'mouseLeave',data:[{key:'originalEvent',value:event}],debug:_this.debug});if(!eventDelay){_this.toggle(STATUS.IDLE);}else if([STATUS.OPENING,STATUS.OPEN].indexOf(status)!==-1&&!positionWrapper&&!_this.eventDelayTimeout){_this.eventDelayTimeout=setTimeout(function(){delete _this.eventDelayTimeout;_this.toggle();},eventDelay*1000);}}});_this.state={currentPlacement:props.placement,needsUpdate:false,positionWrapper:props.wrapperOptions.position&&!!props.target,status:STATUS.INIT,statusWrapper:STATUS.INIT};_this._isMounted=false;_this.hasMounted=false;if(canUseDOM()){window.addEventListener('load',function(){if(_this.popper){_this.popper.instance.update();}if(_this.wrapperPopper){_this.wrapperPopper.instance.update();}});}return _this;}_createClass(ReactFloater,[{key:\"componentDidMount\",value:function componentDidMount(){if(!canUseDOM())return;var positionWrapper=this.state.positionWrapper;var _this$props5=this.props,children=_this$props5.children,open=_this$props5.open,target=_this$props5.target;this._isMounted=true;log({title:'init',data:{hasChildren:!!children,hasTarget:!!target,isControlled:is[\"boolean\"](open),positionWrapper:positionWrapper,target:this.target,floater:this.floaterRef},debug:this.debug});if(!this.hasMounted){this.initPopper();this.hasMounted=true;}if(!children&&target&&!is[\"boolean\"](open));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(!canUseDOM())return;var _this$props6=this.props,autoOpen=_this$props6.autoOpen,open=_this$props6.open,target=_this$props6.target,wrapperOptions=_this$props6.wrapperOptions;var _treeChanges=treeChanges(prevState,this.state),changedFrom=_treeChanges.changedFrom,changed=_treeChanges.changed;if(prevProps.open!==open){var forceStatus;// always follow `open` in controlled mode\nif(is[\"boolean\"](open)){forceStatus=open?STATUS.OPENING:STATUS.CLOSING;}this.toggle(forceStatus);}if(prevProps.wrapperOptions.position!==wrapperOptions.position||prevProps.target!==target){this.changeWrapperPosition(this.props);}if(changed('status',STATUS.IDLE)&&open){this.toggle(STATUS.OPEN);}else if(changedFrom('status',STATUS.INIT,STATUS.IDLE)&&autoOpen){this.toggle(STATUS.OPEN);}if(this.popper&&changed('status',STATUS.OPENING)){this.popper.instance.update();}if(this.floaterRef&&(changed('status',STATUS.OPENING)||changed('status',STATUS.CLOSING))){once(this.floaterRef,'transitionend',this.handleTransitionEnd);}if(changed('needsUpdate',true)){this.rebuildPopper();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(!canUseDOM())return;this._isMounted=false;if(this.popper){this.popper.instance.destroy();}if(this.wrapperPopper){this.wrapperPopper.instance.destroy();}}},{key:\"initPopper\",value:function initPopper(){var _this2=this;var target=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.target;var positionWrapper=this.state.positionWrapper;var _this$props7=this.props,disableFlip=_this$props7.disableFlip,getPopper=_this$props7.getPopper,hideArrow=_this$props7.hideArrow,offset=_this$props7.offset,placement=_this$props7.placement,wrapperOptions=_this$props7.wrapperOptions;var flipBehavior=placement==='top'||placement==='bottom'?'flip':['right','bottom-end','top-end','left','top-start','bottom-start'];/* istanbul ignore else */if(placement==='center'){this.setState({status:STATUS.IDLE});}else if(target&&this.floaterRef){var _this$options=this.options,arrow=_this$options.arrow,flip=_this$options.flip,offsetOptions=_this$options.offset,rest=_objectWithoutProperties(_this$options,_excluded);new Popper(target,this.floaterRef,{placement:placement,modifiers:_objectSpread2({arrow:_objectSpread2({enabled:!hideArrow,element:this.arrowRef},arrow),flip:_objectSpread2({enabled:!disableFlip,behavior:flipBehavior},flip),offset:_objectSpread2({offset:\"0, \".concat(offset,\"px\")},offsetOptions)},rest),onCreate:function onCreate(data){var _this2$floaterRef;_this2.popper=data;if(!((_this2$floaterRef=_this2.floaterRef)!==null&&_this2$floaterRef!==void 0&&_this2$floaterRef.isConnected)){_this2.setState({needsUpdate:true});return;}getPopper(data,'floater');if(_this2._isMounted){_this2.setState({currentPlacement:data.placement,status:STATUS.IDLE});}if(placement!==data.placement){setTimeout(function(){data.instance.update();},1);}},onUpdate:function onUpdate(data){_this2.popper=data;var currentPlacement=_this2.state.currentPlacement;if(_this2._isMounted&&data.placement!==currentPlacement){_this2.setState({currentPlacement:data.placement});}}});}if(positionWrapper){var wrapperOffset=!is.undefined(wrapperOptions.offset)?wrapperOptions.offset:0;new Popper(this.target,this.wrapperRef,{placement:wrapperOptions.placement||placement,modifiers:{arrow:{enabled:false},offset:{offset:\"0, \".concat(wrapperOffset,\"px\")},flip:{enabled:false}},onCreate:function onCreate(data){_this2.wrapperPopper=data;if(_this2._isMounted){_this2.setState({statusWrapper:STATUS.IDLE});}getPopper(data,'wrapper');if(placement!==data.placement){setTimeout(function(){data.instance.update();},1);}}});}}},{key:\"rebuildPopper\",value:function rebuildPopper(){var _this3=this;this.floaterRefInterval=setInterval(function(){var _this3$floaterRef;if((_this3$floaterRef=_this3.floaterRef)!==null&&_this3$floaterRef!==void 0&&_this3$floaterRef.isConnected){clearInterval(_this3.floaterRefInterval);_this3.setState({needsUpdate:false});_this3.initPopper();}},50);}},{key:\"changeWrapperPosition\",value:function changeWrapperPosition(_ref){var target=_ref.target,wrapperOptions=_ref.wrapperOptions;this.setState({positionWrapper:wrapperOptions.position&&!!target});}},{key:\"toggle\",value:function toggle(forceStatus){var status=this.state.status;var nextStatus=status===STATUS.OPEN?STATUS.CLOSING:STATUS.OPENING;if(!is.undefined(forceStatus)){nextStatus=forceStatus;}this.setState({status:nextStatus});}},{key:\"debug\",get:function get(){var debug=this.props.debug;return debug||canUseDOM()&&'ReactFloaterDebug'in window&&!!window.ReactFloaterDebug;}},{key:\"event\",get:function get(){var _this$props8=this.props,disableHoverToClick=_this$props8.disableHoverToClick,event=_this$props8.event;if(event==='hover'&&isMobile()&&!disableHoverToClick){return 'click';}return event;}},{key:\"options\",get:function get(){var options=this.props.options;return deepmerge(DEFAULTS,options||{});}},{key:\"styles\",get:function get(){var _this4=this;var _this$state3=this.state,status=_this$state3.status,positionWrapper=_this$state3.positionWrapper,statusWrapper=_this$state3.statusWrapper;var styles=this.props.styles;var nextStyles=deepmerge(getStyles(styles),styles);if(positionWrapper){var wrapperStyles;if(!([STATUS.IDLE].indexOf(status)!==-1)||!([STATUS.IDLE].indexOf(statusWrapper)!==-1)){wrapperStyles=nextStyles.wrapperPosition;}else {wrapperStyles=this.wrapperPopper.styles;}nextStyles.wrapper=_objectSpread2(_objectSpread2({},nextStyles.wrapper),wrapperStyles);}/* istanbul ignore else */if(this.target){var targetStyles=window.getComputedStyle(this.target);/* istanbul ignore else */if(this.wrapperStyles){nextStyles.wrapper=_objectSpread2(_objectSpread2({},nextStyles.wrapper),this.wrapperStyles);}else if(!(['relative','static'].indexOf(targetStyles.position)!==-1)){this.wrapperStyles={};if(!positionWrapper){POSITIONING_PROPS.forEach(function(d){_this4.wrapperStyles[d]=targetStyles[d];});nextStyles.wrapper=_objectSpread2(_objectSpread2({},nextStyles.wrapper),this.wrapperStyles);this.target.style.position='relative';this.target.style.top='auto';this.target.style.right='auto';this.target.style.bottom='auto';this.target.style.left='auto';}}}return nextStyles;}},{key:\"target\",get:function get(){if(!canUseDOM())return null;var target=this.props.target;if(target){if(is.domElement(target)){return target;}return document.querySelector(target);}return this.childRef||this.wrapperRef;}},{key:\"render\",value:function render(){var _this$state4=this.state,currentPlacement=_this$state4.currentPlacement,positionWrapper=_this$state4.positionWrapper,status=_this$state4.status;var _this$props9=this.props,children=_this$props9.children,component=_this$props9.component,content=_this$props9.content,disableAnimation=_this$props9.disableAnimation,footer=_this$props9.footer,hideArrow=_this$props9.hideArrow,id=_this$props9.id,open=_this$props9.open,showCloseButton=_this$props9.showCloseButton,style=_this$props9.style,target=_this$props9.target,title=_this$props9.title;var wrapper=/*#__PURE__*/React.createElement(ReactFloaterWrapper,{handleClick:this.handleClick,handleMouseEnter:this.handleMouseEnter,handleMouseLeave:this.handleMouseLeave,setChildRef:this.setChildRef,setWrapperRef:this.setWrapperRef,style:style,styles:this.styles.wrapper},children);var output={};if(positionWrapper){output.wrapperInPortal=wrapper;}else {output.wrapperAsChildren=wrapper;}return/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(ReactFloaterPortal,{hasChildren:!!children,id:id,placement:currentPlacement,setRef:this.setFloaterRef,target:target,zIndex:this.styles.options.zIndex},/*#__PURE__*/React.createElement(Floater,{component:component,content:content,disableAnimation:disableAnimation,footer:footer,handleClick:this.handleClick,hideArrow:hideArrow||currentPlacement==='center',open:open,placement:currentPlacement,positionWrapper:positionWrapper,setArrowRef:this.setArrowRef,setFloaterRef:this.setFloaterRef,showCloseButton:showCloseButton,status:status,styles:this.styles,title:title}),output.wrapperInPortal),output.wrapperAsChildren);}}]);return ReactFloater;}(React.Component);_defineProperty(ReactFloater,\"propTypes\",{autoOpen:PropTypes.bool,callback:PropTypes.func,children:PropTypes.node,component:isRequiredIf(PropTypes.oneOfType([PropTypes.func,PropTypes.element]),function(props){return !props.content;}),content:isRequiredIf(PropTypes.node,function(props){return !props.component;}),debug:PropTypes.bool,disableAnimation:PropTypes.bool,disableFlip:PropTypes.bool,disableHoverToClick:PropTypes.bool,event:PropTypes.oneOf(['hover','click']),eventDelay:PropTypes.number,footer:PropTypes.node,getPopper:PropTypes.func,hideArrow:PropTypes.bool,id:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),offset:PropTypes.number,open:PropTypes.bool,options:PropTypes.object,placement:PropTypes.oneOf(['top','top-start','top-end','bottom','bottom-start','bottom-end','left','left-start','left-end','right','right-start','right-end','auto','center']),showCloseButton:PropTypes.bool,style:PropTypes.object,styles:PropTypes.object,target:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),title:PropTypes.node,wrapperOptions:PropTypes.shape({offset:PropTypes.number,placement:PropTypes.oneOf(['top','top-start','top-end','bottom','bottom-start','bottom-end','left','left-start','left-end','right','right-start','right-end','auto']),position:PropTypes.bool})});_defineProperty(ReactFloater,\"defaultProps\",{autoOpen:false,callback:noop,debug:false,disableAnimation:false,disableFlip:false,disableHoverToClick:false,event:'click',eventDelay:0.4,getPopper:noop,hideArrow:false,offset:15,placement:'bottom',showCloseButton:false,styles:{},target:null,wrapperOptions:{position:false}});\n\nexport { ReactFloater as default };\n","import equal from '@gilbarbara/deep-equal';\nimport is from 'is-lite';\nimport { compareNumbers, compareValues, getIterables, includesOrEqualsTo, nested } from './helpers';\nexport default function treeChanges(previousData, data) {\n    if ([previousData, data].some(is.nullOrUndefined)) {\n        throw new Error('Missing required parameters');\n    }\n    if (![previousData, data].every(function (d) { return is.plainObject(d) || is.array(d); })) {\n        throw new Error('Expected plain objects or array');\n    }\n    var added = function (key, value) {\n        try {\n            return compareValues(previousData, data, { key: key, type: 'added', value: value });\n        }\n        catch (_a) {\n            /* istanbul ignore next */\n            return false;\n        }\n    };\n    var changed = function (key, actual, previous) {\n        try {\n            var left = nested(previousData, key);\n            var right = nested(data, key);\n            var hasActual = is.defined(actual);\n            var hasPrevious = is.defined(previous);\n            if (hasActual || hasPrevious) {\n                var leftComparator = hasPrevious\n                    ? includesOrEqualsTo(previous, left)\n                    : !includesOrEqualsTo(actual, left);\n                var rightComparator = includesOrEqualsTo(actual, right);\n                return leftComparator && rightComparator;\n            }\n            if ([left, right].every(is.array) || [left, right].every(is.plainObject)) {\n                return !equal(left, right);\n            }\n            return left !== right;\n        }\n        catch (_a) {\n            /* istanbul ignore next */\n            return false;\n        }\n    };\n    var changedFrom = function (key, previous, actual) {\n        if (!is.defined(key)) {\n            return false;\n        }\n        try {\n            var left = nested(previousData, key);\n            var right = nested(data, key);\n            var hasActual = is.defined(actual);\n            return (includesOrEqualsTo(previous, left) &&\n                (hasActual ? includesOrEqualsTo(actual, right) : !hasActual));\n        }\n        catch (_a) {\n            /* istanbul ignore next */\n            return false;\n        }\n    };\n    /**\n     * @deprecated\n     * Use \"changed\" instead\n     */\n    var changedTo = function (key, actual) {\n        if (!is.defined(key)) {\n            return false;\n        }\n        /* istanbul ignore next */\n        if (process.env.NODE_ENV === 'development') {\n            // eslint-disable-next-line no-console\n            console.warn('`changedTo` is deprecated! Replace it with `change`');\n        }\n        return changed(key, actual);\n    };\n    var decreased = function (key, actual, previous) {\n        if (!is.defined(key)) {\n            return false;\n        }\n        try {\n            return compareNumbers(previousData, data, { key: key, actual: actual, previous: previous, type: 'decreased' });\n        }\n        catch (_a) {\n            /* istanbul ignore next */\n            return false;\n        }\n    };\n    var emptied = function (key) {\n        try {\n            var _a = getIterables(previousData, data, { key: key }), left = _a[0], right = _a[1];\n            return !!left.length && !right.length;\n        }\n        catch (_b) {\n            /* istanbul ignore next */\n            return false;\n        }\n    };\n    var filled = function (key) {\n        try {\n            var _a = getIterables(previousData, data, { key: key }), left = _a[0], right = _a[1];\n            return !left.length && !!right.length;\n        }\n        catch (_b) {\n            /* istanbul ignore next */\n            return false;\n        }\n    };\n    var increased = function (key, actual, previous) {\n        if (!is.defined(key)) {\n            return false;\n        }\n        try {\n            return compareNumbers(previousData, data, { key: key, actual: actual, previous: previous, type: 'increased' });\n        }\n        catch (_a) {\n            /* istanbul ignore next */\n            return false;\n        }\n    };\n    var removed = function (key, value) {\n        try {\n            return compareValues(previousData, data, { key: key, type: 'removed', value: value });\n        }\n        catch (_a) {\n            /* istanbul ignore next */\n            return false;\n        }\n    };\n    return { added: added, changed: changed, changedFrom: changedFrom, changedTo: changedTo, decreased: decreased, emptied: emptied, filled: filled, increased: increased, removed: removed };\n}\nexport * from './types';\n//# sourceMappingURL=index.js.map","var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n// src/literals/index.ts\nvar ACTIONS = {\n  INIT: \"init\",\n  START: \"start\",\n  STOP: \"stop\",\n  RESET: \"reset\",\n  PREV: \"prev\",\n  NEXT: \"next\",\n  GO: \"go\",\n  CLOSE: \"close\",\n  SKIP: \"skip\",\n  UPDATE: \"update\"\n};\nvar EVENTS = {\n  TOUR_START: \"tour:start\",\n  STEP_BEFORE: \"step:before\",\n  BEACON: \"beacon\",\n  TOOLTIP: \"tooltip\",\n  STEP_AFTER: \"step:after\",\n  TOUR_END: \"tour:end\",\n  TOUR_STATUS: \"tour:status\",\n  TARGET_NOT_FOUND: \"error:target_not_found\",\n  ERROR: \"error\"\n};\nvar LIFECYCLE = {\n  INIT: \"init\",\n  READY: \"ready\",\n  BEACON: \"beacon\",\n  TOOLTIP: \"tooltip\",\n  COMPLETE: \"complete\",\n  ERROR: \"error\"\n};\nvar ORIGIN = {\n  BUTTON_CLOSE: \"button_close\",\n  BUTTON_PRIMARY: \"button_primary\",\n  KEYBOARD: \"keyboard\",\n  OVERLAY: \"overlay\"\n};\nvar STATUS = {\n  IDLE: \"idle\",\n  READY: \"ready\",\n  WAITING: \"waiting\",\n  RUNNING: \"running\",\n  PAUSED: \"paused\",\n  SKIPPED: \"skipped\",\n  FINISHED: \"finished\",\n  ERROR: \"error\"\n};\n\n// src/components/index.tsx\nimport * as React9 from \"react\";\nimport isEqual from \"@gilbarbara/deep-equal\";\nimport is6 from \"is-lite\";\nimport treeChanges3 from \"tree-changes\";\n\n// src/modules/dom.ts\nimport scroll from \"scroll\";\nimport scrollParent from \"scrollparent\";\nfunction canUseDOM() {\n  var _a;\n  return !!(typeof window !== \"undefined\" && ((_a = window.document) == null ? void 0 : _a.createElement));\n}\nfunction getClientRect(element) {\n  if (!element) {\n    return null;\n  }\n  return element.getBoundingClientRect();\n}\nfunction getDocumentHeight(median = false) {\n  const { body, documentElement } = document;\n  if (!body || !documentElement) {\n    return 0;\n  }\n  if (median) {\n    const heights = [\n      body.scrollHeight,\n      body.offsetHeight,\n      documentElement.clientHeight,\n      documentElement.scrollHeight,\n      documentElement.offsetHeight\n    ].sort((a, b) => a - b);\n    const middle = Math.floor(heights.length / 2);\n    if (heights.length % 2 === 0) {\n      return (heights[middle - 1] + heights[middle]) / 2;\n    }\n    return heights[middle];\n  }\n  return Math.max(\n    body.scrollHeight,\n    body.offsetHeight,\n    documentElement.clientHeight,\n    documentElement.scrollHeight,\n    documentElement.offsetHeight\n  );\n}\nfunction getElement(element) {\n  if (typeof element === \"string\") {\n    try {\n      return document.querySelector(element);\n    } catch (error) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(error);\n      }\n      return null;\n    }\n  }\n  return element;\n}\nfunction getStyleComputedProperty(el) {\n  if (!el || el.nodeType !== 1) {\n    return null;\n  }\n  return getComputedStyle(el);\n}\nfunction getScrollParent(element, skipFix, forListener) {\n  if (!element) {\n    return scrollDocument();\n  }\n  const parent = scrollParent(element);\n  if (parent) {\n    if (parent.isSameNode(scrollDocument())) {\n      if (forListener) {\n        return document;\n      }\n      return scrollDocument();\n    }\n    const hasScrolling = parent.scrollHeight > parent.offsetHeight;\n    if (!hasScrolling && !skipFix) {\n      parent.style.overflow = \"initial\";\n      return scrollDocument();\n    }\n  }\n  return parent;\n}\nfunction hasCustomScrollParent(element, skipFix) {\n  if (!element) {\n    return false;\n  }\n  const parent = getScrollParent(element, skipFix);\n  return parent ? !parent.isSameNode(scrollDocument()) : false;\n}\nfunction hasCustomOffsetParent(element) {\n  return element.offsetParent !== document.body;\n}\nfunction hasPosition(el, type = \"fixed\") {\n  if (!el || !(el instanceof HTMLElement)) {\n    return false;\n  }\n  const { nodeName } = el;\n  const styles = getStyleComputedProperty(el);\n  if (nodeName === \"BODY\" || nodeName === \"HTML\") {\n    return false;\n  }\n  if (styles && styles.position === type) {\n    return true;\n  }\n  if (!el.parentNode) {\n    return false;\n  }\n  return hasPosition(el.parentNode, type);\n}\nfunction isElementVisible(element) {\n  var _a;\n  if (!element) {\n    return false;\n  }\n  let parentElement = element;\n  while (parentElement) {\n    if (parentElement === document.body) {\n      break;\n    }\n    if (parentElement instanceof HTMLElement) {\n      const { display, visibility } = getComputedStyle(parentElement);\n      if (display === \"none\" || visibility === \"hidden\") {\n        return false;\n      }\n    }\n    parentElement = (_a = parentElement.parentElement) != null ? _a : null;\n  }\n  return true;\n}\nfunction getElementPosition(element, offset, skipFix) {\n  var _a, _b, _c;\n  const elementRect = getClientRect(element);\n  const parent = getScrollParent(element, skipFix);\n  const hasScrollParent = hasCustomScrollParent(element, skipFix);\n  const isFixedTarget = hasPosition(element);\n  let parentTop = 0;\n  let top = (_a = elementRect == null ? void 0 : elementRect.top) != null ? _a : 0;\n  if (hasScrollParent && isFixedTarget) {\n    const offsetTop = (_b = element == null ? void 0 : element.offsetTop) != null ? _b : 0;\n    const parentScrollTop = (_c = parent == null ? void 0 : parent.scrollTop) != null ? _c : 0;\n    top = offsetTop - parentScrollTop;\n  } else if (parent instanceof HTMLElement) {\n    parentTop = parent.scrollTop;\n    if (!hasScrollParent && !hasPosition(element)) {\n      top += parentTop;\n    }\n    if (!parent.isSameNode(scrollDocument())) {\n      top += scrollDocument().scrollTop;\n    }\n  }\n  return Math.floor(top - offset);\n}\nfunction getScrollTo(element, offset, skipFix) {\n  var _a;\n  if (!element) {\n    return 0;\n  }\n  const { offsetTop = 0, scrollTop = 0 } = (_a = scrollParent(element)) != null ? _a : {};\n  let top = element.getBoundingClientRect().top + scrollTop;\n  if (!!offsetTop && (hasCustomScrollParent(element, skipFix) || hasCustomOffsetParent(element))) {\n    top -= offsetTop;\n  }\n  const output = Math.floor(top - offset);\n  return output < 0 ? 0 : output;\n}\nfunction scrollDocument() {\n  var _a;\n  return (_a = document.scrollingElement) != null ? _a : document.documentElement;\n}\nfunction scrollTo(value, options) {\n  const { duration, element } = options;\n  return new Promise((resolve, reject) => {\n    const { scrollTop } = element;\n    const limit = value > scrollTop ? value - scrollTop : scrollTop - value;\n    scroll.top(element, value, { duration: limit < 100 ? 50 : duration }, (error) => {\n      if (error && error.message !== \"Element already at target scroll position\") {\n        return reject(error);\n      }\n      return resolve();\n    });\n  });\n}\n\n// src/modules/helpers.tsx\nimport { cloneElement, isValidElement } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport innerText from \"react-innertext\";\nimport is from \"is-lite\";\nvar isReact16 = createPortal !== void 0;\nfunction getBrowser(userAgent = navigator.userAgent) {\n  let browser = userAgent;\n  if (typeof window === \"undefined\") {\n    browser = \"node\";\n  } else if (document.documentMode) {\n    browser = \"ie\";\n  } else if (/Edge/.test(userAgent)) {\n    browser = \"edge\";\n  } else if (Boolean(window.opera) || userAgent.includes(\" OPR/\")) {\n    browser = \"opera\";\n  } else if (typeof window.InstallTrigger !== \"undefined\") {\n    browser = \"firefox\";\n  } else if (window.chrome) {\n    browser = \"chrome\";\n  } else if (/(Version\\/([\\d._]+).*Safari|CriOS|FxiOS| Mobile\\/)/.test(userAgent)) {\n    browser = \"safari\";\n  }\n  return browser;\n}\nfunction getObjectType(value) {\n  return Object.prototype.toString.call(value).slice(8, -1).toLowerCase();\n}\nfunction getReactNodeText(input, options = {}) {\n  const { defaultValue, step, steps } = options;\n  let text = innerText(input);\n  if (!text) {\n    if (isValidElement(input) && !Object.values(input.props).length && getObjectType(input.type) === \"function\") {\n      const component = input.type({});\n      text = getReactNodeText(component, options);\n    } else {\n      text = innerText(defaultValue);\n    }\n  } else if ((text.includes(\"{step}\") || text.includes(\"{steps}\")) && step && steps) {\n    text = text.replace(\"{step}\", step.toString()).replace(\"{steps}\", steps.toString());\n  }\n  return text;\n}\nfunction hasValidKeys(object, keys) {\n  if (!is.plainObject(object) || !is.array(keys)) {\n    return false;\n  }\n  return Object.keys(object).every((d) => keys.includes(d));\n}\nfunction hexToRGB(hex) {\n  const shorthandRegex = /^#?([\\da-f])([\\da-f])([\\da-f])$/i;\n  const properHex = hex.replace(shorthandRegex, (_m, r, g, b) => r + r + g + g + b + b);\n  const result = /^#?([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})$/i.exec(properHex);\n  return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)] : [];\n}\nfunction hideBeacon(step) {\n  return step.disableBeacon || step.placement === \"center\";\n}\nfunction isLegacy() {\n  return ![\"chrome\", \"safari\", \"firefox\", \"opera\"].includes(getBrowser());\n}\nfunction log({ data, debug = false, title, warn = false }) {\n  const logFn = warn ? console.warn || console.error : console.log;\n  if (debug) {\n    if (title && data) {\n      console.groupCollapsed(\n        `%creact-joyride: ${title}`,\n        \"color: #ff0044; font-weight: bold; font-size: 12px;\"\n      );\n      if (Array.isArray(data)) {\n        data.forEach((d) => {\n          if (is.plainObject(d) && d.key) {\n            logFn.apply(console, [d.key, d.value]);\n          } else {\n            logFn.apply(console, [d]);\n          }\n        });\n      } else {\n        logFn.apply(console, [data]);\n      }\n      console.groupEnd();\n    } else {\n      console.error(\"Missing title or data props\");\n    }\n  }\n}\nfunction noop() {\n  return void 0;\n}\nfunction objectKeys(input) {\n  return Object.keys(input);\n}\nfunction omit(input, ...filter) {\n  if (!is.plainObject(input)) {\n    throw new TypeError(\"Expected an object\");\n  }\n  const output = {};\n  for (const key in input) {\n    if ({}.hasOwnProperty.call(input, key)) {\n      if (!filter.includes(key)) {\n        output[key] = input[key];\n      }\n    }\n  }\n  return output;\n}\nfunction pick(input, ...filter) {\n  if (!is.plainObject(input)) {\n    throw new TypeError(\"Expected an object\");\n  }\n  if (!filter.length) {\n    return input;\n  }\n  const output = {};\n  for (const key in input) {\n    if ({}.hasOwnProperty.call(input, key)) {\n      if (filter.includes(key)) {\n        output[key] = input[key];\n      }\n    }\n  }\n  return output;\n}\nfunction replaceLocaleContent(input, step, steps) {\n  const replacer = (text) => text.replace(\"{step}\", String(step)).replace(\"{steps}\", String(steps));\n  if (getObjectType(input) === \"string\") {\n    return replacer(input);\n  }\n  if (!isValidElement(input)) {\n    return input;\n  }\n  const { children } = input.props;\n  if (getObjectType(children) === \"string\" && children.includes(\"{step}\")) {\n    return cloneElement(input, {\n      children: replacer(children)\n    });\n  }\n  if (Array.isArray(children)) {\n    return cloneElement(input, {\n      children: children.map((child) => {\n        if (typeof child === \"string\") {\n          return replacer(child);\n        }\n        return replaceLocaleContent(child, step, steps);\n      })\n    });\n  }\n  if (getObjectType(input.type) === \"function\" && !Object.values(input.props).length) {\n    const component = input.type({});\n    return replaceLocaleContent(component, step, steps);\n  }\n  return input;\n}\nfunction shouldScroll(options) {\n  const { isFirstStep, lifecycle, previousLifecycle, scrollToFirstStep, step, target } = options;\n  return !step.disableScrolling && (!isFirstStep || scrollToFirstStep || lifecycle === LIFECYCLE.TOOLTIP) && step.placement !== \"center\" && (!step.isFixed || !hasPosition(target)) && // fixed steps don't need to scroll\n  previousLifecycle !== lifecycle && [LIFECYCLE.BEACON, LIFECYCLE.TOOLTIP].includes(lifecycle);\n}\n\n// src/modules/step.ts\nimport deepmerge2 from \"deepmerge\";\nimport is2 from \"is-lite\";\n\n// src/defaults.ts\nvar defaultFloaterProps = {\n  options: {\n    preventOverflow: {\n      boundariesElement: \"scrollParent\"\n    }\n  },\n  wrapperOptions: {\n    offset: -18,\n    position: true\n  }\n};\nvar defaultLocale = {\n  back: \"Back\",\n  close: \"Close\",\n  last: \"Last\",\n  next: \"Next\",\n  nextLabelWithProgress: \"Next (Step {step} of {steps})\",\n  open: \"Open the dialog\",\n  skip: \"Skip\"\n};\nvar defaultStep = {\n  event: \"click\",\n  placement: \"bottom\",\n  offset: 10,\n  disableBeacon: false,\n  disableCloseOnEsc: false,\n  disableOverlay: false,\n  disableOverlayClose: false,\n  disableScrollParentFix: false,\n  disableScrolling: false,\n  hideBackButton: false,\n  hideCloseButton: false,\n  hideFooter: false,\n  isFixed: false,\n  locale: defaultLocale,\n  showProgress: false,\n  showSkipButton: false,\n  spotlightClicks: false,\n  spotlightPadding: 10\n};\nvar defaultProps = {\n  continuous: false,\n  debug: false,\n  disableCloseOnEsc: false,\n  disableOverlay: false,\n  disableOverlayClose: false,\n  disableScrolling: false,\n  disableScrollParentFix: false,\n  getHelpers: noop(),\n  hideBackButton: false,\n  run: true,\n  scrollOffset: 20,\n  scrollDuration: 300,\n  scrollToFirstStep: false,\n  showSkipButton: false,\n  showProgress: false,\n  spotlightClicks: false,\n  spotlightPadding: 10,\n  steps: []\n};\n\n// src/styles.ts\nimport deepmerge from \"deepmerge\";\nvar defaultOptions = {\n  arrowColor: \"#fff\",\n  backgroundColor: \"#fff\",\n  beaconSize: 36,\n  overlayColor: \"rgba(0, 0, 0, 0.5)\",\n  primaryColor: \"#f04\",\n  spotlightShadow: \"0 0 15px rgba(0, 0, 0, 0.5)\",\n  textColor: \"#333\",\n  width: 380,\n  zIndex: 100\n};\nvar buttonBase = {\n  backgroundColor: \"transparent\",\n  border: 0,\n  borderRadius: 0,\n  color: \"#555\",\n  cursor: \"pointer\",\n  fontSize: 16,\n  lineHeight: 1,\n  padding: 8,\n  WebkitAppearance: \"none\"\n};\nvar spotlight = {\n  borderRadius: 4,\n  position: \"absolute\"\n};\nfunction getStyles(props, step) {\n  var _a, _b, _c, _d, _e;\n  const { floaterProps, styles } = props;\n  const mergedFloaterProps = deepmerge((_a = step.floaterProps) != null ? _a : {}, floaterProps != null ? floaterProps : {});\n  const mergedStyles = deepmerge(styles != null ? styles : {}, (_b = step.styles) != null ? _b : {});\n  const options = deepmerge(defaultOptions, mergedStyles.options || {});\n  const hideBeacon2 = step.placement === \"center\" || step.disableBeacon;\n  let { width } = options;\n  if (window.innerWidth > 480) {\n    width = 380;\n  }\n  if (\"width\" in options) {\n    width = typeof options.width === \"number\" && window.innerWidth < options.width ? window.innerWidth - 30 : options.width;\n  }\n  const overlay = {\n    bottom: 0,\n    left: 0,\n    overflow: \"hidden\",\n    position: \"absolute\",\n    right: 0,\n    top: 0,\n    zIndex: options.zIndex\n  };\n  const defaultStyles = {\n    beacon: {\n      ...buttonBase,\n      display: hideBeacon2 ? \"none\" : \"inline-block\",\n      height: options.beaconSize,\n      position: \"relative\",\n      width: options.beaconSize,\n      zIndex: options.zIndex\n    },\n    beaconInner: {\n      animation: \"joyride-beacon-inner 1.2s infinite ease-in-out\",\n      backgroundColor: options.primaryColor,\n      borderRadius: \"50%\",\n      display: \"block\",\n      height: \"50%\",\n      left: \"50%\",\n      opacity: 0.7,\n      position: \"absolute\",\n      top: \"50%\",\n      transform: \"translate(-50%, -50%)\",\n      width: \"50%\"\n    },\n    beaconOuter: {\n      animation: \"joyride-beacon-outer 1.2s infinite ease-in-out\",\n      backgroundColor: `rgba(${hexToRGB(options.primaryColor).join(\",\")}, 0.2)`,\n      border: `2px solid ${options.primaryColor}`,\n      borderRadius: \"50%\",\n      boxSizing: \"border-box\",\n      display: \"block\",\n      height: \"100%\",\n      left: 0,\n      opacity: 0.9,\n      position: \"absolute\",\n      top: 0,\n      transformOrigin: \"center\",\n      width: \"100%\"\n    },\n    tooltip: {\n      backgroundColor: options.backgroundColor,\n      borderRadius: 5,\n      boxSizing: \"border-box\",\n      color: options.textColor,\n      fontSize: 16,\n      maxWidth: \"100%\",\n      padding: 15,\n      position: \"relative\",\n      width\n    },\n    tooltipContainer: {\n      lineHeight: 1.4,\n      textAlign: \"center\"\n    },\n    tooltipTitle: {\n      fontSize: 18,\n      margin: 0\n    },\n    tooltipContent: {\n      padding: \"20px 10px\"\n    },\n    tooltipFooter: {\n      alignItems: \"center\",\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      marginTop: 15\n    },\n    tooltipFooterSpacer: {\n      flex: 1\n    },\n    buttonNext: {\n      ...buttonBase,\n      backgroundColor: options.primaryColor,\n      borderRadius: 4,\n      color: \"#fff\"\n    },\n    buttonBack: {\n      ...buttonBase,\n      color: options.primaryColor,\n      marginLeft: \"auto\",\n      marginRight: 5\n    },\n    buttonClose: {\n      ...buttonBase,\n      color: options.textColor,\n      height: 14,\n      padding: 15,\n      position: \"absolute\",\n      right: 0,\n      top: 0,\n      width: 14\n    },\n    buttonSkip: {\n      ...buttonBase,\n      color: options.textColor,\n      fontSize: 14\n    },\n    overlay: {\n      ...overlay,\n      backgroundColor: options.overlayColor,\n      mixBlendMode: \"hard-light\"\n    },\n    overlayLegacy: {\n      ...overlay\n    },\n    overlayLegacyCenter: {\n      ...overlay,\n      backgroundColor: options.overlayColor\n    },\n    spotlight: {\n      ...spotlight,\n      backgroundColor: \"gray\"\n    },\n    spotlightLegacy: {\n      ...spotlight,\n      boxShadow: `0 0 0 9999px ${options.overlayColor}, ${options.spotlightShadow}`\n    },\n    floaterStyles: {\n      arrow: {\n        color: (_e = (_d = (_c = mergedFloaterProps == null ? void 0 : mergedFloaterProps.styles) == null ? void 0 : _c.arrow) == null ? void 0 : _d.color) != null ? _e : options.arrowColor\n      },\n      options: {\n        zIndex: options.zIndex + 100\n      }\n    },\n    options\n  };\n  return deepmerge(defaultStyles, mergedStyles);\n}\n\n// src/modules/step.ts\nfunction getTourProps(props) {\n  return pick(\n    props,\n    \"beaconComponent\",\n    \"disableCloseOnEsc\",\n    \"disableOverlay\",\n    \"disableOverlayClose\",\n    \"disableScrolling\",\n    \"disableScrollParentFix\",\n    \"floaterProps\",\n    \"hideBackButton\",\n    \"hideCloseButton\",\n    \"locale\",\n    \"showProgress\",\n    \"showSkipButton\",\n    \"spotlightClicks\",\n    \"spotlightPadding\",\n    \"styles\",\n    \"tooltipComponent\"\n  );\n}\nfunction getMergedStep(props, currentStep) {\n  var _a, _b, _c, _d, _e, _f;\n  const step = currentStep != null ? currentStep : {};\n  const mergedStep = deepmerge2.all([defaultStep, getTourProps(props), step], {\n    isMergeableObject: is2.plainObject\n  });\n  const mergedStyles = getStyles(props, mergedStep);\n  const scrollParent2 = hasCustomScrollParent(\n    getElement(mergedStep.target),\n    mergedStep.disableScrollParentFix\n  );\n  const floaterProps = deepmerge2.all([\n    defaultFloaterProps,\n    (_a = props.floaterProps) != null ? _a : {},\n    (_b = mergedStep.floaterProps) != null ? _b : {}\n  ]);\n  floaterProps.offset = mergedStep.offset;\n  floaterProps.styles = deepmerge2((_c = floaterProps.styles) != null ? _c : {}, mergedStyles.floaterStyles);\n  floaterProps.offset += (_e = (_d = props.spotlightPadding) != null ? _d : mergedStep.spotlightPadding) != null ? _e : 0;\n  if (mergedStep.placementBeacon && floaterProps.wrapperOptions) {\n    floaterProps.wrapperOptions.placement = mergedStep.placementBeacon;\n  }\n  if (scrollParent2 && floaterProps.options.preventOverflow) {\n    floaterProps.options.preventOverflow.boundariesElement = \"window\";\n  }\n  return {\n    ...mergedStep,\n    locale: deepmerge2.all([defaultLocale, (_f = props.locale) != null ? _f : {}, mergedStep.locale || {}]),\n    floaterProps,\n    styles: omit(mergedStyles, \"floaterStyles\")\n  };\n}\nfunction validateStep(step, debug = false) {\n  if (!is2.plainObject(step)) {\n    log({\n      title: \"validateStep\",\n      data: \"step must be an object\",\n      warn: true,\n      debug\n    });\n    return false;\n  }\n  if (!step.target) {\n    log({\n      title: \"validateStep\",\n      data: \"target is missing from the step\",\n      warn: true,\n      debug\n    });\n    return false;\n  }\n  return true;\n}\nfunction validateSteps(steps, debug = false) {\n  if (!is2.array(steps)) {\n    log({\n      title: \"validateSteps\",\n      data: \"steps must be an array\",\n      warn: true,\n      debug\n    });\n    return false;\n  }\n  return steps.every((d) => validateStep(d, debug));\n}\n\n// src/modules/store.ts\nimport is3 from \"is-lite\";\nvar defaultState = {\n  action: \"init\",\n  controlled: false,\n  index: 0,\n  lifecycle: LIFECYCLE.INIT,\n  origin: null,\n  size: 0,\n  status: STATUS.IDLE\n};\nvar validKeys = objectKeys(omit(defaultState, \"controlled\", \"size\"));\nvar Store = class {\n  constructor(options) {\n    __publicField(this, \"beaconPopper\");\n    __publicField(this, \"tooltipPopper\");\n    __publicField(this, \"data\", /* @__PURE__ */ new Map());\n    __publicField(this, \"listener\");\n    __publicField(this, \"store\", /* @__PURE__ */ new Map());\n    __publicField(this, \"addListener\", (listener) => {\n      this.listener = listener;\n    });\n    __publicField(this, \"setSteps\", (steps) => {\n      const { size, status } = this.getState();\n      const state = {\n        size: steps.length,\n        status\n      };\n      this.data.set(\"steps\", steps);\n      if (status === STATUS.WAITING && !size && steps.length) {\n        state.status = STATUS.RUNNING;\n      }\n      this.setState(state);\n    });\n    __publicField(this, \"getPopper\", (name) => {\n      if (name === \"beacon\") {\n        return this.beaconPopper;\n      }\n      return this.tooltipPopper;\n    });\n    __publicField(this, \"setPopper\", (name, popper) => {\n      if (name === \"beacon\") {\n        this.beaconPopper = popper;\n      } else {\n        this.tooltipPopper = popper;\n      }\n    });\n    __publicField(this, \"cleanupPoppers\", () => {\n      this.beaconPopper = null;\n      this.tooltipPopper = null;\n    });\n    __publicField(this, \"close\", (origin = null) => {\n      const { index, status } = this.getState();\n      if (status !== STATUS.RUNNING) {\n        return;\n      }\n      this.setState({\n        ...this.getNextState({ action: ACTIONS.CLOSE, index: index + 1, origin })\n      });\n    });\n    __publicField(this, \"go\", (nextIndex) => {\n      const { controlled, status } = this.getState();\n      if (controlled || status !== STATUS.RUNNING) {\n        return;\n      }\n      const step = this.getSteps()[nextIndex];\n      this.setState({\n        ...this.getNextState({ action: ACTIONS.GO, index: nextIndex }),\n        status: step ? status : STATUS.FINISHED\n      });\n    });\n    __publicField(this, \"info\", () => this.getState());\n    __publicField(this, \"next\", () => {\n      const { index, status } = this.getState();\n      if (status !== STATUS.RUNNING) {\n        return;\n      }\n      this.setState(this.getNextState({ action: ACTIONS.NEXT, index: index + 1 }));\n    });\n    __publicField(this, \"open\", () => {\n      const { status } = this.getState();\n      if (status !== STATUS.RUNNING) {\n        return;\n      }\n      this.setState({\n        ...this.getNextState({ action: ACTIONS.UPDATE, lifecycle: LIFECYCLE.TOOLTIP })\n      });\n    });\n    __publicField(this, \"prev\", () => {\n      const { index, status } = this.getState();\n      if (status !== STATUS.RUNNING) {\n        return;\n      }\n      this.setState({\n        ...this.getNextState({ action: ACTIONS.PREV, index: index - 1 })\n      });\n    });\n    __publicField(this, \"reset\", (restart = false) => {\n      const { controlled } = this.getState();\n      if (controlled) {\n        return;\n      }\n      this.setState({\n        ...this.getNextState({ action: ACTIONS.RESET, index: 0 }),\n        status: restart ? STATUS.RUNNING : STATUS.READY\n      });\n    });\n    __publicField(this, \"skip\", () => {\n      const { status } = this.getState();\n      if (status !== STATUS.RUNNING) {\n        return;\n      }\n      this.setState({\n        action: ACTIONS.SKIP,\n        lifecycle: LIFECYCLE.INIT,\n        status: STATUS.SKIPPED\n      });\n    });\n    __publicField(this, \"start\", (nextIndex) => {\n      const { index, size } = this.getState();\n      this.setState({\n        ...this.getNextState(\n          {\n            action: ACTIONS.START,\n            index: is3.number(nextIndex) ? nextIndex : index\n          },\n          true\n        ),\n        status: size ? STATUS.RUNNING : STATUS.WAITING\n      });\n    });\n    __publicField(this, \"stop\", (advance = false) => {\n      const { index, status } = this.getState();\n      if ([STATUS.FINISHED, STATUS.SKIPPED].includes(status)) {\n        return;\n      }\n      this.setState({\n        ...this.getNextState({ action: ACTIONS.STOP, index: index + (advance ? 1 : 0) }),\n        status: STATUS.PAUSED\n      });\n    });\n    __publicField(this, \"update\", (state) => {\n      var _a, _b;\n      if (!hasValidKeys(state, validKeys)) {\n        throw new Error(`State is not valid. Valid keys: ${validKeys.join(\", \")}`);\n      }\n      this.setState({\n        ...this.getNextState(\n          {\n            ...this.getState(),\n            ...state,\n            action: (_a = state.action) != null ? _a : ACTIONS.UPDATE,\n            origin: (_b = state.origin) != null ? _b : null\n          },\n          true\n        )\n      });\n    });\n    const { continuous = false, stepIndex, steps = [] } = options != null ? options : {};\n    this.setState(\n      {\n        action: ACTIONS.INIT,\n        controlled: is3.number(stepIndex),\n        continuous,\n        index: is3.number(stepIndex) ? stepIndex : 0,\n        lifecycle: LIFECYCLE.INIT,\n        origin: null,\n        status: steps.length ? STATUS.READY : STATUS.IDLE\n      },\n      true\n    );\n    this.beaconPopper = null;\n    this.tooltipPopper = null;\n    this.listener = null;\n    this.setSteps(steps);\n  }\n  getState() {\n    if (!this.store.size) {\n      return { ...defaultState };\n    }\n    return {\n      action: this.store.get(\"action\") || \"\",\n      controlled: this.store.get(\"controlled\") || false,\n      index: parseInt(this.store.get(\"index\"), 10),\n      lifecycle: this.store.get(\"lifecycle\") || \"\",\n      origin: this.store.get(\"origin\") || null,\n      size: this.store.get(\"size\") || 0,\n      status: this.store.get(\"status\") || \"\"\n    };\n  }\n  getNextState(state, force = false) {\n    var _a, _b, _c, _d, _e;\n    const { action, controlled, index, size, status } = this.getState();\n    const newIndex = is3.number(state.index) ? state.index : index;\n    const nextIndex = controlled && !force ? index : Math.min(Math.max(newIndex, 0), size);\n    return {\n      action: (_a = state.action) != null ? _a : action,\n      controlled,\n      index: nextIndex,\n      lifecycle: (_b = state.lifecycle) != null ? _b : LIFECYCLE.INIT,\n      origin: (_c = state.origin) != null ? _c : null,\n      size: (_d = state.size) != null ? _d : size,\n      status: nextIndex === size ? STATUS.FINISHED : (_e = state.status) != null ? _e : status\n    };\n  }\n  getSteps() {\n    const steps = this.data.get(\"steps\");\n    return Array.isArray(steps) ? steps : [];\n  }\n  hasUpdatedState(oldState) {\n    const before = JSON.stringify(oldState);\n    const after = JSON.stringify(this.getState());\n    return before !== after;\n  }\n  setState(nextState, initial = false) {\n    const state = this.getState();\n    const {\n      action,\n      index,\n      lifecycle,\n      origin = null,\n      size,\n      status\n    } = {\n      ...state,\n      ...nextState\n    };\n    this.store.set(\"action\", action);\n    this.store.set(\"index\", index);\n    this.store.set(\"lifecycle\", lifecycle);\n    this.store.set(\"origin\", origin);\n    this.store.set(\"size\", size);\n    this.store.set(\"status\", status);\n    if (initial) {\n      this.store.set(\"controlled\", nextState.controlled);\n      this.store.set(\"continuous\", nextState.continuous);\n    }\n    if (this.listener && this.hasUpdatedState(state)) {\n      this.listener(this.getState());\n    }\n  }\n  getHelpers() {\n    return {\n      close: this.close,\n      go: this.go,\n      info: this.info,\n      next: this.next,\n      open: this.open,\n      prev: this.prev,\n      reset: this.reset,\n      skip: this.skip\n    };\n  }\n};\nfunction createStore(options) {\n  return new Store(options);\n}\n\n// src/components/Overlay.tsx\nimport * as React2 from \"react\";\nimport treeChanges from \"tree-changes\";\n\n// src/components/Spotlight.tsx\nimport * as React from \"react\";\nfunction JoyrideSpotlight({ styles }) {\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      key: \"JoyrideSpotlight\",\n      className: \"react-joyride__spotlight\",\n      \"data-test-id\": \"spotlight\",\n      style: styles\n    }\n  );\n}\nvar Spotlight_default = JoyrideSpotlight;\n\n// src/components/Overlay.tsx\nvar JoyrideOverlay = class extends React2.Component {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"isActive\", false);\n    __publicField(this, \"resizeTimeout\");\n    __publicField(this, \"scrollTimeout\");\n    __publicField(this, \"scrollParent\");\n    __publicField(this, \"state\", {\n      isScrolling: false,\n      mouseOverSpotlight: false,\n      showSpotlight: true\n    });\n    __publicField(this, \"hideSpotlight\", () => {\n      const { continuous, disableOverlay, lifecycle } = this.props;\n      const hiddenLifecycles = [\n        LIFECYCLE.INIT,\n        LIFECYCLE.BEACON,\n        LIFECYCLE.COMPLETE,\n        LIFECYCLE.ERROR\n      ];\n      return disableOverlay || (continuous ? hiddenLifecycles.includes(lifecycle) : lifecycle !== LIFECYCLE.TOOLTIP);\n    });\n    __publicField(this, \"handleMouseMove\", (event) => {\n      const { mouseOverSpotlight } = this.state;\n      const { height, left, position, top, width } = this.spotlightStyles;\n      const offsetY = position === \"fixed\" ? event.clientY : event.pageY;\n      const offsetX = position === \"fixed\" ? event.clientX : event.pageX;\n      const inSpotlightHeight = offsetY >= top && offsetY <= top + height;\n      const inSpotlightWidth = offsetX >= left && offsetX <= left + width;\n      const inSpotlight = inSpotlightWidth && inSpotlightHeight;\n      if (inSpotlight !== mouseOverSpotlight) {\n        this.updateState({ mouseOverSpotlight: inSpotlight });\n      }\n    });\n    __publicField(this, \"handleScroll\", () => {\n      const { target } = this.props;\n      const element = getElement(target);\n      if (this.scrollParent !== document) {\n        const { isScrolling } = this.state;\n        if (!isScrolling) {\n          this.updateState({ isScrolling: true, showSpotlight: false });\n        }\n        clearTimeout(this.scrollTimeout);\n        this.scrollTimeout = window.setTimeout(() => {\n          this.updateState({ isScrolling: false, showSpotlight: true });\n        }, 50);\n      } else if (hasPosition(element, \"sticky\")) {\n        this.updateState({});\n      }\n    });\n    __publicField(this, \"handleResize\", () => {\n      clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = window.setTimeout(() => {\n        if (!this.isActive) {\n          return;\n        }\n        this.forceUpdate();\n      }, 100);\n    });\n  }\n  componentDidMount() {\n    const { debug, disableScrolling, disableScrollParentFix = false, target } = this.props;\n    const element = getElement(target);\n    this.scrollParent = getScrollParent(element != null ? element : document.body, disableScrollParentFix, true);\n    this.isActive = true;\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!disableScrolling && hasCustomScrollParent(element, true)) {\n        log({\n          title: \"step has a custom scroll parent and can cause trouble with scrolling\",\n          data: [{ key: \"parent\", value: this.scrollParent }],\n          debug\n        });\n      }\n    }\n    window.addEventListener(\"resize\", this.handleResize);\n  }\n  componentDidUpdate(previousProps) {\n    var _a;\n    const { disableScrollParentFix, lifecycle, spotlightClicks, target } = this.props;\n    const { changed } = treeChanges(previousProps, this.props);\n    if (changed(\"target\") || changed(\"disableScrollParentFix\")) {\n      const element = getElement(target);\n      this.scrollParent = getScrollParent(element != null ? element : document.body, disableScrollParentFix, true);\n    }\n    if (changed(\"lifecycle\", LIFECYCLE.TOOLTIP)) {\n      (_a = this.scrollParent) == null ? void 0 : _a.addEventListener(\"scroll\", this.handleScroll, { passive: true });\n      setTimeout(() => {\n        const { isScrolling } = this.state;\n        if (!isScrolling) {\n          this.updateState({ showSpotlight: true });\n        }\n      }, 100);\n    }\n    if (changed(\"spotlightClicks\") || changed(\"disableOverlay\") || changed(\"lifecycle\")) {\n      if (spotlightClicks && lifecycle === LIFECYCLE.TOOLTIP) {\n        window.addEventListener(\"mousemove\", this.handleMouseMove, false);\n      } else if (lifecycle !== LIFECYCLE.TOOLTIP) {\n        window.removeEventListener(\"mousemove\", this.handleMouseMove);\n      }\n    }\n  }\n  componentWillUnmount() {\n    var _a;\n    this.isActive = false;\n    window.removeEventListener(\"mousemove\", this.handleMouseMove);\n    window.removeEventListener(\"resize\", this.handleResize);\n    clearTimeout(this.resizeTimeout);\n    clearTimeout(this.scrollTimeout);\n    (_a = this.scrollParent) == null ? void 0 : _a.removeEventListener(\"scroll\", this.handleScroll);\n  }\n  get overlayStyles() {\n    const { mouseOverSpotlight } = this.state;\n    const { disableOverlayClose, placement, styles } = this.props;\n    let baseStyles = styles.overlay;\n    if (isLegacy()) {\n      baseStyles = placement === \"center\" ? styles.overlayLegacyCenter : styles.overlayLegacy;\n    }\n    return {\n      cursor: disableOverlayClose ? \"default\" : \"pointer\",\n      height: getDocumentHeight(),\n      pointerEvents: mouseOverSpotlight ? \"none\" : \"auto\",\n      ...baseStyles\n    };\n  }\n  get spotlightStyles() {\n    var _a, _b, _c;\n    const { showSpotlight } = this.state;\n    const {\n      disableScrollParentFix = false,\n      spotlightClicks,\n      spotlightPadding = 0,\n      styles,\n      target\n    } = this.props;\n    const element = getElement(target);\n    const elementRect = getClientRect(element);\n    const isFixedTarget = hasPosition(element);\n    const top = getElementPosition(element, spotlightPadding, disableScrollParentFix);\n    return {\n      ...isLegacy() ? styles.spotlightLegacy : styles.spotlight,\n      height: Math.round(((_a = elementRect == null ? void 0 : elementRect.height) != null ? _a : 0) + spotlightPadding * 2),\n      left: Math.round(((_b = elementRect == null ? void 0 : elementRect.left) != null ? _b : 0) - spotlightPadding),\n      opacity: showSpotlight ? 1 : 0,\n      pointerEvents: spotlightClicks ? \"none\" : \"auto\",\n      position: isFixedTarget ? \"fixed\" : \"absolute\",\n      top,\n      transition: \"opacity 0.2s\",\n      width: Math.round(((_c = elementRect == null ? void 0 : elementRect.width) != null ? _c : 0) + spotlightPadding * 2)\n    };\n  }\n  updateState(state) {\n    if (!this.isActive) {\n      return;\n    }\n    this.setState((previousState) => ({ ...previousState, ...state }));\n  }\n  render() {\n    const { showSpotlight } = this.state;\n    const { onClickOverlay, placement } = this.props;\n    const { hideSpotlight, overlayStyles, spotlightStyles } = this;\n    if (hideSpotlight()) {\n      return null;\n    }\n    let spotlight2 = placement !== \"center\" && showSpotlight && /* @__PURE__ */ React2.createElement(Spotlight_default, { styles: spotlightStyles });\n    if (getBrowser() === \"safari\") {\n      const { mixBlendMode, zIndex, ...safariOverlay } = overlayStyles;\n      spotlight2 = /* @__PURE__ */ React2.createElement(\"div\", { style: { ...safariOverlay } }, spotlight2);\n      delete overlayStyles.backgroundColor;\n    }\n    return /* @__PURE__ */ React2.createElement(\n      \"div\",\n      {\n        className: \"react-joyride__overlay\",\n        \"data-test-id\": \"overlay\",\n        onClick: onClickOverlay,\n        role: \"presentation\",\n        style: overlayStyles\n      },\n      spotlight2\n    );\n  }\n};\n\n// src/components/Portal.tsx\nimport * as React3 from \"react\";\nimport * as ReactDOM from \"react-dom\";\nvar JoyridePortal = class extends React3.Component {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"node\", null);\n  }\n  componentDidMount() {\n    const { id } = this.props;\n    if (!canUseDOM()) {\n      return;\n    }\n    this.node = document.createElement(\"div\");\n    this.node.id = id;\n    document.body.appendChild(this.node);\n    if (!isReact16) {\n      this.renderReact15();\n    }\n  }\n  componentDidUpdate() {\n    if (!canUseDOM()) {\n      return;\n    }\n    if (!isReact16) {\n      this.renderReact15();\n    }\n  }\n  componentWillUnmount() {\n    if (!canUseDOM() || !this.node) {\n      return;\n    }\n    if (!isReact16) {\n      ReactDOM.unmountComponentAtNode(this.node);\n    }\n    if (this.node.parentNode === document.body) {\n      document.body.removeChild(this.node);\n      this.node = null;\n    }\n  }\n  renderReact15() {\n    if (!canUseDOM()) {\n      return;\n    }\n    const { children } = this.props;\n    if (this.node) {\n      ReactDOM.unstable_renderSubtreeIntoContainer(this, children, this.node);\n    }\n  }\n  renderReact16() {\n    if (!canUseDOM() || !isReact16) {\n      return null;\n    }\n    const { children } = this.props;\n    if (!this.node) {\n      return null;\n    }\n    return ReactDOM.createPortal(children, this.node);\n  }\n  render() {\n    if (!isReact16) {\n      return null;\n    }\n    return this.renderReact16();\n  }\n};\n\n// src/components/Step.tsx\nimport * as React8 from \"react\";\nimport Floater from \"react-floater\";\nimport is5 from \"is-lite\";\nimport treeChanges2 from \"tree-changes\";\n\n// src/modules/scope.ts\nvar Scope = class {\n  constructor(element, options) {\n    __publicField(this, \"element\");\n    __publicField(this, \"options\");\n    __publicField(this, \"canBeTabbed\", (element) => {\n      const { tabIndex } = element;\n      if (tabIndex === null || tabIndex < 0) {\n        return false;\n      }\n      return this.canHaveFocus(element);\n    });\n    __publicField(this, \"canHaveFocus\", (element) => {\n      const validTabNodes = /input|select|textarea|button|object/;\n      const nodeName = element.nodeName.toLowerCase();\n      const isValid = validTabNodes.test(nodeName) && !element.getAttribute(\"disabled\") || nodeName === \"a\" && !!element.getAttribute(\"href\");\n      return isValid && this.isVisible(element);\n    });\n    __publicField(this, \"findValidTabElements\", () => [].slice.call(this.element.querySelectorAll(\"*\"), 0).filter(this.canBeTabbed));\n    __publicField(this, \"handleKeyDown\", (event) => {\n      const { code = \"Tab\" } = this.options;\n      if (event.code === code) {\n        this.interceptTab(event);\n      }\n    });\n    __publicField(this, \"interceptTab\", (event) => {\n      event.preventDefault();\n      const elements = this.findValidTabElements();\n      const { shiftKey } = event;\n      if (!elements.length) {\n        return;\n      }\n      let x = document.activeElement ? elements.indexOf(document.activeElement) : 0;\n      if (x === -1 || !shiftKey && x + 1 === elements.length) {\n        x = 0;\n      } else if (shiftKey && x === 0) {\n        x = elements.length - 1;\n      } else {\n        x += shiftKey ? -1 : 1;\n      }\n      elements[x].focus();\n    });\n    // eslint-disable-next-line class-methods-use-this\n    __publicField(this, \"isHidden\", (element) => {\n      const noSize = element.offsetWidth <= 0 && element.offsetHeight <= 0;\n      const style = window.getComputedStyle(element);\n      if (noSize && !element.innerHTML) {\n        return true;\n      }\n      return noSize && style.getPropertyValue(\"overflow\") !== \"visible\" || style.getPropertyValue(\"display\") === \"none\";\n    });\n    __publicField(this, \"isVisible\", (element) => {\n      let parentElement = element;\n      while (parentElement) {\n        if (parentElement instanceof HTMLElement) {\n          if (parentElement === document.body) {\n            break;\n          }\n          if (this.isHidden(parentElement)) {\n            return false;\n          }\n          parentElement = parentElement.parentNode;\n        }\n      }\n      return true;\n    });\n    __publicField(this, \"removeScope\", () => {\n      window.removeEventListener(\"keydown\", this.handleKeyDown);\n    });\n    __publicField(this, \"checkFocus\", (target) => {\n      if (document.activeElement !== target) {\n        target.focus();\n        window.requestAnimationFrame(() => this.checkFocus(target));\n      }\n    });\n    __publicField(this, \"setFocus\", () => {\n      const { selector } = this.options;\n      if (!selector) {\n        return;\n      }\n      const target = this.element.querySelector(selector);\n      if (target) {\n        window.requestAnimationFrame(() => this.checkFocus(target));\n      }\n    });\n    if (!(element instanceof HTMLElement)) {\n      throw new TypeError(\"Invalid parameter: element must be an HTMLElement\");\n    }\n    this.element = element;\n    this.options = options;\n    window.addEventListener(\"keydown\", this.handleKeyDown, false);\n    this.setFocus();\n  }\n};\n\n// src/components/Beacon.tsx\nimport * as React4 from \"react\";\nimport is4 from \"is-lite\";\nvar JoyrideBeacon = class extends React4.Component {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"beacon\", null);\n    __publicField(this, \"setBeaconRef\", (c) => {\n      this.beacon = c;\n    });\n    if (props.beaconComponent) {\n      return;\n    }\n    const head = document.head || document.getElementsByTagName(\"head\")[0];\n    const style = document.createElement(\"style\");\n    style.id = \"joyride-beacon-animation\";\n    if (props.nonce) {\n      style.setAttribute(\"nonce\", props.nonce);\n    }\n    const css = `\n        @keyframes joyride-beacon-inner {\n          20% {\n            opacity: 0.9;\n          }\n        \n          90% {\n            opacity: 0.7;\n          }\n        }\n        \n        @keyframes joyride-beacon-outer {\n          0% {\n            transform: scale(1);\n          }\n        \n          45% {\n            opacity: 0.7;\n            transform: scale(0.75);\n          }\n        \n          100% {\n            opacity: 0.9;\n            transform: scale(1);\n          }\n        }\n      `;\n    style.appendChild(document.createTextNode(css));\n    head.appendChild(style);\n  }\n  componentDidMount() {\n    const { shouldFocus } = this.props;\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!is4.domElement(this.beacon)) {\n        console.warn(\"beacon is not a valid DOM element\");\n      }\n    }\n    setTimeout(() => {\n      if (is4.domElement(this.beacon) && shouldFocus) {\n        this.beacon.focus();\n      }\n    }, 0);\n  }\n  componentWillUnmount() {\n    const style = document.getElementById(\"joyride-beacon-animation\");\n    if (style == null ? void 0 : style.parentNode) {\n      style.parentNode.removeChild(style);\n    }\n  }\n  render() {\n    const {\n      beaconComponent,\n      continuous,\n      index,\n      isLastStep,\n      locale,\n      onClickOrHover,\n      size,\n      step,\n      styles\n    } = this.props;\n    const title = getReactNodeText(locale.open);\n    const sharedProps = {\n      \"aria-label\": title,\n      onClick: onClickOrHover,\n      onMouseEnter: onClickOrHover,\n      ref: this.setBeaconRef,\n      title\n    };\n    let component;\n    if (beaconComponent) {\n      const BeaconComponent = beaconComponent;\n      component = /* @__PURE__ */ React4.createElement(\n        BeaconComponent,\n        {\n          continuous,\n          index,\n          isLastStep,\n          size,\n          step,\n          ...sharedProps\n        }\n      );\n    } else {\n      component = /* @__PURE__ */ React4.createElement(\n        \"button\",\n        {\n          key: \"JoyrideBeacon\",\n          className: \"react-joyride__beacon\",\n          \"data-test-id\": \"button-beacon\",\n          style: styles.beacon,\n          type: \"button\",\n          ...sharedProps\n        },\n        /* @__PURE__ */ React4.createElement(\"span\", { style: styles.beaconInner }),\n        /* @__PURE__ */ React4.createElement(\"span\", { style: styles.beaconOuter })\n      );\n    }\n    return component;\n  }\n};\n\n// src/components/Tooltip/index.tsx\nimport * as React7 from \"react\";\n\n// src/components/Tooltip/Container.tsx\nimport * as React6 from \"react\";\n\n// src/components/Tooltip/CloseButton.tsx\nimport React5 from \"react\";\nfunction JoyrideTooltipCloseButton({ styles, ...props }) {\n  const { color, height, width, ...style } = styles;\n  return /* @__PURE__ */ React5.createElement(\"button\", { style, type: \"button\", ...props }, /* @__PURE__ */ React5.createElement(\n    \"svg\",\n    {\n      height: typeof height === \"number\" ? `${height}px` : height,\n      preserveAspectRatio: \"xMidYMid\",\n      version: \"1.1\",\n      viewBox: \"0 0 18 18\",\n      width: typeof width === \"number\" ? `${width}px` : width,\n      xmlns: \"http://www.w3.org/2000/svg\"\n    },\n    /* @__PURE__ */ React5.createElement(\"g\", null, /* @__PURE__ */ React5.createElement(\n      \"path\",\n      {\n        d: \"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z\",\n        fill: color\n      }\n    ))\n  ));\n}\nvar CloseButton_default = JoyrideTooltipCloseButton;\n\n// src/components/Tooltip/Container.tsx\nfunction JoyrideTooltipContainer(props) {\n  const { backProps, closeProps, index, isLastStep, primaryProps, skipProps, step, tooltipProps } = props;\n  const { content, hideBackButton, hideCloseButton, hideFooter, showSkipButton, styles, title } = step;\n  const output = {};\n  output.primary = /* @__PURE__ */ React6.createElement(\n    \"button\",\n    {\n      \"data-test-id\": \"button-primary\",\n      style: styles.buttonNext,\n      type: \"button\",\n      ...primaryProps\n    }\n  );\n  if (showSkipButton && !isLastStep) {\n    output.skip = /* @__PURE__ */ React6.createElement(\n      \"button\",\n      {\n        \"aria-live\": \"off\",\n        \"data-test-id\": \"button-skip\",\n        style: styles.buttonSkip,\n        type: \"button\",\n        ...skipProps\n      }\n    );\n  }\n  if (!hideBackButton && index > 0) {\n    output.back = /* @__PURE__ */ React6.createElement(\"button\", { \"data-test-id\": \"button-back\", style: styles.buttonBack, type: \"button\", ...backProps });\n  }\n  output.close = !hideCloseButton && /* @__PURE__ */ React6.createElement(CloseButton_default, { \"data-test-id\": \"button-close\", styles: styles.buttonClose, ...closeProps });\n  return /* @__PURE__ */ React6.createElement(\n    \"div\",\n    {\n      key: \"JoyrideTooltip\",\n      \"aria-label\": getReactNodeText(title != null ? title : content),\n      className: \"react-joyride__tooltip\",\n      style: styles.tooltip,\n      ...tooltipProps\n    },\n    /* @__PURE__ */ React6.createElement(\"div\", { style: styles.tooltipContainer }, title && /* @__PURE__ */ React6.createElement(\"h1\", { \"aria-label\": getReactNodeText(title), style: styles.tooltipTitle }, title), /* @__PURE__ */ React6.createElement(\"div\", { style: styles.tooltipContent }, content)),\n    !hideFooter && /* @__PURE__ */ React6.createElement(\"div\", { style: styles.tooltipFooter }, /* @__PURE__ */ React6.createElement(\"div\", { style: styles.tooltipFooterSpacer }, output.skip), output.back, output.primary),\n    output.close\n  );\n}\nvar Container_default = JoyrideTooltipContainer;\n\n// src/components/Tooltip/index.tsx\nvar JoyrideTooltip = class extends React7.Component {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"handleClickBack\", (event) => {\n      event.preventDefault();\n      const { helpers } = this.props;\n      helpers.prev();\n    });\n    __publicField(this, \"handleClickClose\", (event) => {\n      event.preventDefault();\n      const { helpers } = this.props;\n      helpers.close(\"button_close\");\n    });\n    __publicField(this, \"handleClickPrimary\", (event) => {\n      event.preventDefault();\n      const { continuous, helpers } = this.props;\n      if (!continuous) {\n        helpers.close(\"button_primary\");\n        return;\n      }\n      helpers.next();\n    });\n    __publicField(this, \"handleClickSkip\", (event) => {\n      event.preventDefault();\n      const { helpers } = this.props;\n      helpers.skip();\n    });\n    __publicField(this, \"getElementsProps\", () => {\n      const { continuous, index, isLastStep, setTooltipRef, size, step } = this.props;\n      const { back, close, last, next, nextLabelWithProgress, skip } = step.locale;\n      const backText = getReactNodeText(back);\n      const closeText = getReactNodeText(close);\n      const lastText = getReactNodeText(last);\n      const nextText = getReactNodeText(next);\n      const skipText = getReactNodeText(skip);\n      let primary = close;\n      let primaryText = closeText;\n      if (continuous) {\n        primary = next;\n        primaryText = nextText;\n        if (step.showProgress && !isLastStep) {\n          const labelWithProgress = getReactNodeText(nextLabelWithProgress, {\n            step: index + 1,\n            steps: size\n          });\n          primary = replaceLocaleContent(nextLabelWithProgress, index + 1, size);\n          primaryText = labelWithProgress;\n        }\n        if (isLastStep) {\n          primary = last;\n          primaryText = lastText;\n        }\n      }\n      return {\n        backProps: {\n          \"aria-label\": backText,\n          children: back,\n          \"data-action\": \"back\",\n          onClick: this.handleClickBack,\n          role: \"button\",\n          title: backText\n        },\n        closeProps: {\n          \"aria-label\": closeText,\n          children: close,\n          \"data-action\": \"close\",\n          onClick: this.handleClickClose,\n          role: \"button\",\n          title: closeText\n        },\n        primaryProps: {\n          \"aria-label\": primaryText,\n          children: primary,\n          \"data-action\": \"primary\",\n          onClick: this.handleClickPrimary,\n          role: \"button\",\n          title: primaryText\n        },\n        skipProps: {\n          \"aria-label\": skipText,\n          children: skip,\n          \"data-action\": \"skip\",\n          onClick: this.handleClickSkip,\n          role: \"button\",\n          title: skipText\n        },\n        tooltipProps: {\n          \"aria-modal\": true,\n          ref: setTooltipRef,\n          role: \"alertdialog\"\n        }\n      };\n    });\n  }\n  render() {\n    const { continuous, index, isLastStep, setTooltipRef, size, step } = this.props;\n    const { beaconComponent, tooltipComponent, ...cleanStep } = step;\n    let component;\n    if (tooltipComponent) {\n      const renderProps = {\n        ...this.getElementsProps(),\n        continuous,\n        index,\n        isLastStep,\n        size,\n        step: cleanStep,\n        setTooltipRef\n      };\n      const TooltipComponent = tooltipComponent;\n      component = /* @__PURE__ */ React7.createElement(TooltipComponent, { ...renderProps });\n    } else {\n      component = /* @__PURE__ */ React7.createElement(\n        Container_default,\n        {\n          ...this.getElementsProps(),\n          continuous,\n          index,\n          isLastStep,\n          size,\n          step\n        }\n      );\n    }\n    return component;\n  }\n};\n\n// src/components/Step.tsx\nvar JoyrideStep = class extends React8.Component {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"scope\", null);\n    __publicField(this, \"tooltip\", null);\n    /**\n     * Beacon click/hover event listener\n     */\n    __publicField(this, \"handleClickHoverBeacon\", (event) => {\n      const { step, store } = this.props;\n      if (event.type === \"mouseenter\" && step.event !== \"hover\") {\n        return;\n      }\n      store.update({ lifecycle: LIFECYCLE.TOOLTIP });\n    });\n    __publicField(this, \"setTooltipRef\", (element) => {\n      this.tooltip = element;\n    });\n    __publicField(this, \"setPopper\", (popper, type) => {\n      var _a;\n      const { action, lifecycle, step, store } = this.props;\n      if (type === \"wrapper\") {\n        store.setPopper(\"beacon\", popper);\n      } else {\n        store.setPopper(\"tooltip\", popper);\n      }\n      if (store.getPopper(\"beacon\") && (store.getPopper(\"tooltip\") || step.placement === \"center\") && lifecycle === LIFECYCLE.INIT) {\n        store.update({\n          action,\n          lifecycle: LIFECYCLE.READY\n        });\n      }\n      if ((_a = step.floaterProps) == null ? void 0 : _a.getPopper) {\n        step.floaterProps.getPopper(popper, type);\n      }\n    });\n    __publicField(this, \"renderTooltip\", (renderProps) => {\n      const { continuous, helpers, index, size, step } = this.props;\n      return /* @__PURE__ */ React8.createElement(\n        JoyrideTooltip,\n        {\n          continuous,\n          helpers,\n          index,\n          isLastStep: index + 1 === size,\n          setTooltipRef: this.setTooltipRef,\n          size,\n          step,\n          ...renderProps\n        }\n      );\n    });\n  }\n  componentDidMount() {\n    const { debug, index } = this.props;\n    log({\n      title: `step:${index}`,\n      data: [{ key: \"props\", value: this.props }],\n      debug\n    });\n  }\n  componentDidUpdate(previousProps) {\n    var _a;\n    const {\n      action,\n      callback,\n      continuous,\n      controlled,\n      debug,\n      helpers,\n      index,\n      lifecycle,\n      shouldScroll: shouldScroll2,\n      status,\n      step,\n      store\n    } = this.props;\n    const { changed, changedFrom } = treeChanges2(previousProps, this.props);\n    const state = helpers.info();\n    const skipBeacon = continuous && action !== ACTIONS.CLOSE && (index > 0 || action === ACTIONS.PREV);\n    const hasStoreChanged = changed(\"action\") || changed(\"index\") || changed(\"lifecycle\") || changed(\"status\");\n    const isInitial = changedFrom(\"lifecycle\", [LIFECYCLE.TOOLTIP, LIFECYCLE.INIT], LIFECYCLE.INIT);\n    const isAfterAction = changed(\"action\", [\n      ACTIONS.NEXT,\n      ACTIONS.PREV,\n      ACTIONS.SKIP,\n      ACTIONS.CLOSE\n    ]);\n    const isControlled = controlled && index === previousProps.index;\n    if (isAfterAction && (isInitial || isControlled)) {\n      callback({\n        ...state,\n        index: previousProps.index,\n        lifecycle: LIFECYCLE.COMPLETE,\n        step: previousProps.step,\n        type: EVENTS.STEP_AFTER\n      });\n    }\n    if (step.placement === \"center\" && status === STATUS.RUNNING && changed(\"index\") && action !== ACTIONS.START && lifecycle === LIFECYCLE.INIT) {\n      store.update({ lifecycle: LIFECYCLE.READY });\n    }\n    if (hasStoreChanged) {\n      const element = getElement(step.target);\n      const elementExists = !!element;\n      const hasRenderedTarget = elementExists && isElementVisible(element);\n      if (hasRenderedTarget) {\n        if (changedFrom(\"status\", STATUS.READY, STATUS.RUNNING) || changedFrom(\"lifecycle\", LIFECYCLE.INIT, LIFECYCLE.READY)) {\n          callback({\n            ...state,\n            step,\n            type: EVENTS.STEP_BEFORE\n          });\n        }\n      } else {\n        console.warn(elementExists ? \"Target not visible\" : \"Target not mounted\", step);\n        callback({\n          ...state,\n          type: EVENTS.TARGET_NOT_FOUND,\n          step\n        });\n        if (!controlled) {\n          store.update({ index: index + (action === ACTIONS.PREV ? -1 : 1) });\n        }\n      }\n    }\n    if (changedFrom(\"lifecycle\", LIFECYCLE.INIT, LIFECYCLE.READY)) {\n      store.update({\n        lifecycle: hideBeacon(step) || skipBeacon ? LIFECYCLE.TOOLTIP : LIFECYCLE.BEACON\n      });\n    }\n    if (changed(\"index\")) {\n      log({\n        title: `step:${lifecycle}`,\n        data: [{ key: \"props\", value: this.props }],\n        debug\n      });\n    }\n    if (changed(\"lifecycle\", LIFECYCLE.BEACON)) {\n      callback({\n        ...state,\n        step,\n        type: EVENTS.BEACON\n      });\n    }\n    if (changed(\"lifecycle\", LIFECYCLE.TOOLTIP)) {\n      callback({\n        ...state,\n        step,\n        type: EVENTS.TOOLTIP\n      });\n      if (shouldScroll2 && this.tooltip) {\n        this.scope = new Scope(this.tooltip, { selector: \"[data-action=primary]\" });\n        this.scope.setFocus();\n      }\n    }\n    if (changedFrom(\"lifecycle\", [LIFECYCLE.TOOLTIP, LIFECYCLE.INIT], LIFECYCLE.INIT)) {\n      (_a = this.scope) == null ? void 0 : _a.removeScope();\n      store.cleanupPoppers();\n    }\n  }\n  componentWillUnmount() {\n    var _a;\n    (_a = this.scope) == null ? void 0 : _a.removeScope();\n  }\n  get open() {\n    const { lifecycle, step } = this.props;\n    return hideBeacon(step) || lifecycle === LIFECYCLE.TOOLTIP;\n  }\n  render() {\n    const { continuous, debug, index, nonce, shouldScroll: shouldScroll2, size, step } = this.props;\n    const target = getElement(step.target);\n    if (!validateStep(step) || !is5.domElement(target)) {\n      return null;\n    }\n    return /* @__PURE__ */ React8.createElement(\"div\", { key: `JoyrideStep-${index}`, className: \"react-joyride__step\" }, /* @__PURE__ */ React8.createElement(\n      Floater,\n      {\n        ...step.floaterProps,\n        component: this.renderTooltip,\n        debug,\n        getPopper: this.setPopper,\n        id: `react-joyride-step-${index}`,\n        open: this.open,\n        placement: step.placement,\n        target: step.target\n      },\n      /* @__PURE__ */ React8.createElement(\n        JoyrideBeacon,\n        {\n          beaconComponent: step.beaconComponent,\n          continuous,\n          index,\n          isLastStep: index + 1 === size,\n          locale: step.locale,\n          nonce,\n          onClickOrHover: this.handleClickHoverBeacon,\n          shouldFocus: shouldScroll2,\n          size,\n          step,\n          styles: step.styles\n        }\n      )\n    ));\n  }\n};\n\n// src/components/index.tsx\nvar Joyride = class extends React9.Component {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"helpers\");\n    __publicField(this, \"store\");\n    /**\n     * Trigger the callback.\n     */\n    __publicField(this, \"callback\", (data) => {\n      const { callback } = this.props;\n      if (is6.function(callback)) {\n        callback(data);\n      }\n    });\n    /**\n     * Keydown event listener\n     */\n    __publicField(this, \"handleKeyboard\", (event) => {\n      const { index, lifecycle } = this.state;\n      const { steps } = this.props;\n      const step = steps[index];\n      if (lifecycle === LIFECYCLE.TOOLTIP) {\n        if (event.code === \"Escape\" && step && !step.disableCloseOnEsc) {\n          this.store.close(\"keyboard\");\n        }\n      }\n    });\n    __publicField(this, \"handleClickOverlay\", () => {\n      const { index } = this.state;\n      const { steps } = this.props;\n      const step = getMergedStep(this.props, steps[index]);\n      if (!step.disableOverlayClose) {\n        this.helpers.close(\"overlay\");\n      }\n    });\n    /**\n     * Sync the store with the component's state\n     */\n    __publicField(this, \"syncState\", (state) => {\n      this.setState(state);\n    });\n    const { debug, getHelpers, run = true, stepIndex } = props;\n    this.store = createStore({\n      ...props,\n      controlled: run && is6.number(stepIndex)\n    });\n    this.helpers = this.store.getHelpers();\n    const { addListener } = this.store;\n    log({\n      title: \"init\",\n      data: [\n        { key: \"props\", value: this.props },\n        { key: \"state\", value: this.state }\n      ],\n      debug\n    });\n    addListener(this.syncState);\n    if (getHelpers) {\n      getHelpers(this.helpers);\n    }\n    this.state = this.store.getState();\n  }\n  componentDidMount() {\n    if (!canUseDOM()) {\n      return;\n    }\n    const { debug, disableCloseOnEsc, run, steps } = this.props;\n    const { start } = this.store;\n    if (validateSteps(steps, debug) && run) {\n      start();\n    }\n    if (!disableCloseOnEsc) {\n      document.body.addEventListener(\"keydown\", this.handleKeyboard, { passive: true });\n    }\n  }\n  componentDidUpdate(previousProps, previousState) {\n    if (!canUseDOM()) {\n      return;\n    }\n    const { action, controlled, index, status } = this.state;\n    const { debug, run, stepIndex, steps } = this.props;\n    const { stepIndex: previousStepIndex, steps: previousSteps } = previousProps;\n    const { reset, setSteps, start, stop, update } = this.store;\n    const { changed: changedProps } = treeChanges3(previousProps, this.props);\n    const { changed, changedFrom } = treeChanges3(previousState, this.state);\n    const step = getMergedStep(this.props, steps[index]);\n    const stepsChanged = !isEqual(previousSteps, steps);\n    const stepIndexChanged = is6.number(stepIndex) && changedProps(\"stepIndex\");\n    const target = getElement(step.target);\n    if (stepsChanged) {\n      if (validateSteps(steps, debug)) {\n        setSteps(steps);\n      } else {\n        console.warn(\"Steps are not valid\", steps);\n      }\n    }\n    if (changedProps(\"run\")) {\n      if (run) {\n        start(stepIndex);\n      } else {\n        stop();\n      }\n    }\n    if (stepIndexChanged) {\n      let nextAction = is6.number(previousStepIndex) && previousStepIndex < stepIndex ? ACTIONS.NEXT : ACTIONS.PREV;\n      if (action === ACTIONS.STOP) {\n        nextAction = ACTIONS.START;\n      }\n      if (![STATUS.FINISHED, STATUS.SKIPPED].includes(status)) {\n        update({\n          action: action === ACTIONS.CLOSE ? ACTIONS.CLOSE : nextAction,\n          index: stepIndex,\n          lifecycle: LIFECYCLE.INIT\n        });\n      }\n    }\n    if (!controlled && status === STATUS.RUNNING && index === 0 && !target) {\n      this.store.update({ index: index + 1 });\n      this.callback({\n        ...this.state,\n        type: EVENTS.TARGET_NOT_FOUND,\n        step\n      });\n    }\n    const callbackData = {\n      ...this.state,\n      index,\n      step\n    };\n    const isAfterAction = changed(\"action\", [\n      ACTIONS.NEXT,\n      ACTIONS.PREV,\n      ACTIONS.SKIP,\n      ACTIONS.CLOSE\n    ]);\n    if (isAfterAction && changed(\"status\", STATUS.PAUSED)) {\n      const previousStep = getMergedStep(this.props, steps[previousState.index]);\n      this.callback({\n        ...callbackData,\n        index: previousState.index,\n        lifecycle: LIFECYCLE.COMPLETE,\n        step: previousStep,\n        type: EVENTS.STEP_AFTER\n      });\n    }\n    if (changed(\"status\", [STATUS.FINISHED, STATUS.SKIPPED])) {\n      const previousStep = getMergedStep(this.props, steps[previousState.index]);\n      if (!controlled) {\n        this.callback({\n          ...callbackData,\n          index: previousState.index,\n          lifecycle: LIFECYCLE.COMPLETE,\n          step: previousStep,\n          type: EVENTS.STEP_AFTER\n        });\n      }\n      this.callback({\n        ...callbackData,\n        type: EVENTS.TOUR_END,\n        // Return the last step when the tour is finished\n        step: previousStep,\n        index: previousState.index\n      });\n      reset();\n    } else if (changedFrom(\"status\", [STATUS.IDLE, STATUS.READY], STATUS.RUNNING)) {\n      this.callback({\n        ...callbackData,\n        type: EVENTS.TOUR_START\n      });\n    } else if (changed(\"status\") || changed(\"action\", ACTIONS.RESET)) {\n      this.callback({\n        ...callbackData,\n        type: EVENTS.TOUR_STATUS\n      });\n    }\n    this.scrollToStep(previousState);\n  }\n  componentWillUnmount() {\n    const { disableCloseOnEsc } = this.props;\n    if (!disableCloseOnEsc) {\n      document.body.removeEventListener(\"keydown\", this.handleKeyboard);\n    }\n  }\n  scrollToStep(previousState) {\n    const { index, lifecycle, status } = this.state;\n    const {\n      debug,\n      disableScrollParentFix = false,\n      scrollDuration,\n      scrollOffset = 20,\n      scrollToFirstStep = false,\n      steps\n    } = this.props;\n    const step = getMergedStep(this.props, steps[index]);\n    const target = getElement(step.target);\n    const shouldScrollToStep = shouldScroll({\n      isFirstStep: index === 0,\n      lifecycle,\n      previousLifecycle: previousState.lifecycle,\n      scrollToFirstStep,\n      step,\n      target\n    });\n    if (status === STATUS.RUNNING && shouldScrollToStep) {\n      const hasCustomScroll = hasCustomScrollParent(target, disableScrollParentFix);\n      const scrollParent2 = getScrollParent(target, disableScrollParentFix);\n      let scrollY = Math.floor(getScrollTo(target, scrollOffset, disableScrollParentFix)) || 0;\n      log({\n        title: \"scrollToStep\",\n        data: [\n          { key: \"index\", value: index },\n          { key: \"lifecycle\", value: lifecycle },\n          { key: \"status\", value: status }\n        ],\n        debug\n      });\n      const beaconPopper = this.store.getPopper(\"beacon\");\n      const tooltipPopper = this.store.getPopper(\"tooltip\");\n      if (lifecycle === LIFECYCLE.BEACON && beaconPopper) {\n        const { offsets, placement } = beaconPopper;\n        if (![\"bottom\"].includes(placement) && !hasCustomScroll) {\n          scrollY = Math.floor(offsets.popper.top - scrollOffset);\n        }\n      } else if (lifecycle === LIFECYCLE.TOOLTIP && tooltipPopper) {\n        const { flipped, offsets, placement } = tooltipPopper;\n        if ([\"top\", \"right\", \"left\"].includes(placement) && !flipped && !hasCustomScroll) {\n          scrollY = Math.floor(offsets.popper.top - scrollOffset);\n        } else {\n          scrollY -= step.spotlightPadding;\n        }\n      }\n      scrollY = scrollY >= 0 ? scrollY : 0;\n      if (status === STATUS.RUNNING) {\n        scrollTo(scrollY, { element: scrollParent2, duration: scrollDuration }).then(\n          () => {\n            setTimeout(() => {\n              var _a;\n              (_a = this.store.getPopper(\"tooltip\")) == null ? void 0 : _a.instance.update();\n            }, 10);\n          }\n        );\n      }\n    }\n  }\n  render() {\n    if (!canUseDOM()) {\n      return null;\n    }\n    const { index, lifecycle, status } = this.state;\n    const {\n      continuous = false,\n      debug = false,\n      nonce,\n      scrollToFirstStep = false,\n      steps\n    } = this.props;\n    const isRunning = status === STATUS.RUNNING;\n    const content = {};\n    if (isRunning && steps[index]) {\n      const step = getMergedStep(this.props, steps[index]);\n      content.step = /* @__PURE__ */ React9.createElement(\n        JoyrideStep,\n        {\n          ...this.state,\n          callback: this.callback,\n          continuous,\n          debug,\n          helpers: this.helpers,\n          nonce,\n          shouldScroll: !step.disableScrolling && (index !== 0 || scrollToFirstStep),\n          step,\n          store: this.store\n        }\n      );\n      content.overlay = /* @__PURE__ */ React9.createElement(JoyridePortal, { id: \"react-joyride-portal\" }, /* @__PURE__ */ React9.createElement(\n        JoyrideOverlay,\n        {\n          ...step,\n          continuous,\n          debug,\n          lifecycle,\n          onClickOverlay: this.handleClickOverlay\n        }\n      ));\n    }\n    return /* @__PURE__ */ React9.createElement(\"div\", { className: \"react-joyride\" }, content.step, content.overlay);\n  }\n};\n__publicField(Joyride, \"defaultProps\", defaultProps);\nvar components_default = Joyride;\nexport {\n  ACTIONS,\n  EVENTS,\n  LIFECYCLE,\n  ORIGIN,\n  STATUS,\n  components_default as default\n};\n//# sourceMappingURL=index.mjs.map","/**\n * Tour Step Definitions\n *\n * Defines all steps for consumer and creator tour tracks.\n * Uses data-tour attributes for stable element targeting.\n */\n\nimport { Step } from 'react-joyride';\n\n// ============================================\n// CONSUMER TRACK TOURS\n// ============================================\n\n/**\n * Welcome Tour - First tour shown after signup\n * Focuses on browsing, discovery, and basic navigation\n */\nexport const welcomeTourSteps: Step[] = [\n  {\n    target: 'body',\n    content: 'Welcome to renaissBlock! Let us show you around so you can discover amazing content from independent creators.',\n    placement: 'center',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"genre-filters\"]',\n    content: 'Browse content by category. Filter by Books, Art, and more content types coming soon.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"content-grid\"]',\n    content: 'Discover content from independent creators. Click any item to preview before buying.',\n    placement: 'top',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"search-bar\"]',\n    content: 'Search for specific titles, genres, or creators.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"cart-button\"]',\n    content: 'Your shopping cart. Add content here and checkout when ready.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"notifications-button\"]',\n    content: 'Stay updated on your purchases, follows, and collaboration invites.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"profile-link\"]',\n    content: 'Access your profile, wallet, purchased content, and settings.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: 'body',\n    content: 'Ready to create your own content? Visit the Studio when you\\'re ready to publish your work!',\n    placement: 'center',\n    disableBeacon: true,\n  },\n];\n\n/**\n * Welcome Tour - Mobile version (fewer steps, adjusted placements)\n */\nexport const welcomeTourStepsMobile: Step[] = [\n  {\n    target: 'body',\n    content: 'Welcome to renaissBlock! Let us show you around.',\n    placement: 'center',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"mobile-genre-selector\"]',\n    content: 'Browse content by category here.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"content-grid\"]',\n    content: 'Tap any item to preview and purchase content from creators.',\n    placement: 'top',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"mobile-menu-toggle\"]',\n    content: 'Access your cart, notifications, and profile from this menu.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: 'body',\n    content: 'You\\'re all set! Enjoy exploring content from independent creators.',\n    placement: 'center',\n    disableBeacon: true,\n  },\n];\n\n/**\n * Purchase Tour - Triggered on first \"Add to Cart\" action\n * Guides users through the purchase flow\n */\nexport const purchaseTourSteps: Step[] = [\n  {\n    target: '[data-tour=\"cart-items\"]',\n    content: 'Items you\\'ve added appear here. Review your selections before checkout.',\n    placement: 'right',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"cart-summary\"]',\n    content: 'See your total with any applicable fees. We keep pricing transparent.',\n    placement: 'left',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"checkout-button\"]',\n    content: 'Ready to purchase? Click here to complete your order securely.',\n    placement: 'top',\n    disableBeacon: true,\n  },\n];\n\n/**\n * Library Tour - Triggered after first purchase\n * Shows users how to access purchased content\n */\nexport const libraryTourSteps: Step[] = [\n  {\n    target: '[data-tour=\"library-sidebar\"]',\n    content: 'Your Library! All purchased content is organized here by category.',\n    placement: 'right',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"library-tabs\"]',\n    content: 'Switch between your Books, Art, and other content types.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"library-item\"]',\n    content: 'Click any item to start reading or viewing. Your progress is saved automatically.',\n    placement: 'right',\n    disableBeacon: true,\n  },\n];\n\n// ============================================\n// CREATOR TRACK TOURS\n// ============================================\n\n/**\n * Creator Intro Tour - Triggered on first /studio visit\n * Introduces users to the creator experience\n */\nexport const creatorIntroTourSteps: Step[] = [\n  {\n    target: 'body',\n    content: 'Welcome to the Creator Studio! This is where you\\'ll publish content and earn from your creative work.',\n    placement: 'center',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"solo-mode-card\"]',\n    content: 'Create Solo: Work independently with full creative control and keep 100% of your revenue.',\n    placement: 'right',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"collab-mode-card\"]',\n    content: 'Start Collaboration: Team up with other creators, set roles, and split revenue fairly.',\n    placement: 'left',\n    disableBeacon: true,\n  },\n  {\n    target: 'body',\n    content: 'Your earnings go directly to your connected wallet in USDC. Ready to create something amazing?',\n    placement: 'center',\n    disableBeacon: true,\n  },\n];\n\n/**\n * Studio Tour - Guides through the creation wizard\n * Triggered when starting first project\n */\nexport const studioTourSteps: Step[] = [\n  {\n    target: '[data-tour=\"content-type-selector\"]',\n    content: 'First, choose what type of content you want to create: Book, Art, Video, or Music.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"upload-area\"]',\n    content: 'Upload your files or use our built-in editor to create directly.',\n    placement: 'top',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"customize-panel\"]',\n    content: 'Set your price, number of editions, and how much to show as a free preview.',\n    placement: 'left',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"publish-button\"]',\n    content: 'When everything looks good, publish to make your content available for purchase!',\n    placement: 'top',\n    disableBeacon: true,\n  },\n];\n\n/**\n * Dashboard Tour - Shows creators their analytics\n * Triggered on first /dashboard visit\n */\nexport const dashboardTourSteps: Step[] = [\n  {\n    target: '[data-tour=\"earnings-card\"]',\n    content: 'Track your total earnings at a glance. See how much you\\'ve made from your content.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"sales-chart\"]',\n    content: 'View your sales performance over time with detailed analytics.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"content-list\"]',\n    content: 'Manage all your published content. Edit, unpublish, or view stats for each item.',\n    placement: 'top',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"wallet-section\"]',\n    content: 'Your connected wallet receives earnings automatically in USDC.',\n    placement: 'left',\n    disableBeacon: true,\n  },\n];\n\n/**\n * Collaboration Tour - Guides through team project features\n * Triggered when creating first collaboration\n */\nexport const collaborationTourSteps: Step[] = [\n  {\n    target: '[data-tour=\"team-panel\"]',\n    content: 'Invite collaborators by email or username to join your project.',\n    placement: 'right',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"roles-dropdown\"]',\n    content: 'Assign roles like Writer, Artist, Editor to define responsibilities.',\n    placement: 'bottom',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"revenue-splits\"]',\n    content: 'Set fair revenue distribution. Each team member sees their share upfront.',\n    placement: 'left',\n    disableBeacon: true,\n  },\n  {\n    target: '[data-tour=\"approval-workflow\"]',\n    content: 'All team members must approve before publishing. No surprises!',\n    placement: 'top',\n    disableBeacon: true,\n  },\n];\n\n// ============================================\n// TOUR STEP GETTER\n// ============================================\n\nimport type { TourName } from '../../contexts/TourContext';\n\nexport function getTourSteps(tourName: TourName, isMobile: boolean = false): Step[] {\n  switch (tourName) {\n    // Consumer tours\n    case 'welcome':\n      return isMobile ? welcomeTourStepsMobile : welcomeTourSteps;\n    case 'purchase':\n      return purchaseTourSteps;\n    case 'library':\n      return libraryTourSteps;\n\n    // Creator tours\n    case 'creator-intro':\n      return creatorIntroTourSteps;\n    case 'studio':\n      return studioTourSteps;\n    case 'dashboard':\n      return dashboardTourSteps;\n    case 'collaboration':\n      return collaborationTourSteps;\n\n    default:\n      return [];\n  }\n}\n\n// Tour display names for UI\nexport const tourDisplayNames: Record<TourName, string> = {\n  'welcome': 'Welcome Tour',\n  'purchase': 'Shopping Tour',\n  'library': 'Library Tour',\n  'creator-intro': 'Creator Introduction',\n  'studio': 'Studio Tour',\n  'dashboard': 'Dashboard Tour',\n  'collaboration': 'Collaboration Tour',\n};\n","/**\n * Tour Styles\n *\n * Matches the renaissBlock dark theme with amber accent.\n * Colors: --bg: #141414, --panel: #1a1a1a, --accent: #f59e0b\n */\n\nimport { Styles } from 'react-joyride';\n\nexport const tourStyles: Partial<Styles> = {\n  options: {\n    // Background for tooltip\n    backgroundColor: '#1a1a1a',\n    // Arrow color matches tooltip background\n    arrowColor: '#1a1a1a',\n    // Overlay color (darkens the rest of the page)\n    overlayColor: 'rgba(0, 0, 0, 0.75)',\n    // Primary accent color (amber)\n    primaryColor: '#f59e0b',\n    // Text color\n    textColor: '#e5e7eb',\n    // Spotlight shadow for highlighted elements\n    spotlightShadow: '0 0 20px rgba(245, 158, 11, 0.4)',\n    // High z-index to appear above everything\n    zIndex: 10000,\n    // Beacon color (pulsing dot)\n    beaconSize: 36,\n  },\n  // Tooltip container\n  tooltip: {\n    borderRadius: 12,\n    padding: 0,\n    boxShadow: '0 8px 32px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.1)',\n  },\n  // Tooltip content area\n  tooltipContainer: {\n    textAlign: 'left' as const,\n    padding: '20px 24px',\n  },\n  // Tooltip title (if used)\n  tooltipTitle: {\n    fontSize: 16,\n    fontWeight: 700,\n    marginBottom: 8,\n    color: '#ffffff',\n  },\n  // Tooltip content text\n  tooltipContent: {\n    fontSize: 14,\n    lineHeight: 1.6,\n    color: '#d1d5db',\n    padding: 0,\n  },\n  // Footer with buttons\n  tooltipFooter: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: '12px 24px 20px',\n    borderTop: '1px solid rgba(255, 255, 255, 0.1)',\n    marginTop: 0,\n  },\n  // Next button\n  buttonNext: {\n    backgroundColor: '#f59e0b',\n    color: '#000000',\n    fontWeight: 600,\n    fontSize: 13,\n    padding: '8px 16px',\n    borderRadius: 8,\n    border: 'none',\n    cursor: 'pointer',\n    transition: 'all 0.2s ease',\n  },\n  // Back button\n  buttonBack: {\n    color: '#9ca3af',\n    fontWeight: 500,\n    fontSize: 13,\n    padding: '8px 12px',\n    marginRight: 8,\n    background: 'transparent',\n    border: 'none',\n    cursor: 'pointer',\n  },\n  // Skip button\n  buttonSkip: {\n    color: '#6b7280',\n    fontWeight: 500,\n    fontSize: 12,\n    padding: '8px 12px',\n    background: 'transparent',\n    border: 'none',\n    cursor: 'pointer',\n  },\n  // Close button (X)\n  buttonClose: {\n    color: '#9ca3af',\n    padding: 8,\n    position: 'absolute' as const,\n    right: 8,\n    top: 8,\n  },\n  // Spotlight (highlighted area around target)\n  spotlight: {\n    borderRadius: 8,\n  },\n  // Beacon (pulsing dot) - we disable these mostly\n  beacon: {\n    display: 'none',\n  },\n  beaconInner: {\n    backgroundColor: '#f59e0b',\n  },\n  beaconOuter: {\n    backgroundColor: 'rgba(245, 158, 11, 0.3)',\n    border: '2px solid #f59e0b',\n  },\n  // Overlay\n  overlay: {\n    mixBlendMode: undefined,\n  },\n};\n\n// Custom CSS for additional styling (to be added to index.css or App.css)\nexport const tourCSS = `\n/* Tour tooltip animations */\n.react-joyride__tooltip {\n  animation: tourFadeIn 0.2s ease-out;\n}\n\n@keyframes tourFadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(8px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Spotlight glow effect */\n.react-joyride__spotlight {\n  box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.3) !important;\n}\n\n/* Button hover states */\n.react-joyride__tooltip button[data-action=\"primary\"]:hover {\n  background-color: #d97706 !important;\n}\n\n.react-joyride__tooltip button[data-action=\"back\"]:hover,\n.react-joyride__tooltip button[data-action=\"skip\"]:hover {\n  color: #e5e7eb !important;\n}\n\n/* Progress indicator styling */\n.tour-progress {\n  display: flex;\n  gap: 6px;\n  align-items: center;\n}\n\n.tour-progress-dot {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: #4b5563;\n  transition: all 0.2s ease;\n}\n\n.tour-progress-dot.active {\n  background: #f59e0b;\n  width: 8px;\n  height: 8px;\n}\n\n.tour-progress-dot.completed {\n  background: #10b981;\n}\n`;\n","/**\n * Tour Provider Component\n *\n * Wraps React Joyride and integrates with TourContext.\n * Handles tour rendering, callbacks, and state management.\n */\n\nimport React, { useCallback, useMemo } from 'react';\nimport Joyride, { CallBackProps, STATUS, EVENTS, ACTIONS, TooltipRenderProps } from 'react-joyride';\nimport { useTour } from '../../contexts/TourContext';\nimport { useMobile } from '../../hooks/useMobile';\nimport { getTourSteps } from './tourSteps';\nimport { tourStyles } from './tourStyles';\n\n// Custom tooltip component for more control\nfunction TourTooltip({\n  continuous,\n  index,\n  step,\n  size,\n  backProps,\n  closeProps,\n  primaryProps,\n  skipProps,\n  tooltipProps,\n}: TooltipRenderProps) {\n  const isFirst = index === 0;\n  const isLast = index === size - 1;\n\n  return (\n    <div\n      {...tooltipProps}\n      style={{\n        backgroundColor: '#1a1a1a',\n        borderRadius: 12,\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.1)',\n        maxWidth: 340,\n        minWidth: 280,\n      }}\n    >\n      {/* Close button */}\n      <button\n        {...closeProps}\n        style={{\n          position: 'absolute',\n          right: 8,\n          top: 8,\n          background: 'transparent',\n          border: 'none',\n          color: '#6b7280',\n          cursor: 'pointer',\n          padding: 4,\n          fontSize: 18,\n          lineHeight: 1,\n        }}\n        aria-label=\"Close tour\"\n      >\n        &times;\n      </button>\n\n      {/* Content */}\n      <div style={{ padding: '20px 24px' }}>\n        {step.title && (\n          <div style={{\n            fontSize: 16,\n            fontWeight: 700,\n            color: '#ffffff',\n            marginBottom: 8,\n          }}>\n            {typeof step.title === 'string' ? step.title : step.title}\n          </div>\n        )}\n        <div style={{\n          fontSize: 14,\n          lineHeight: 1.6,\n          color: '#d1d5db',\n        }}>\n          {typeof step.content === 'string' ? step.content : step.content}\n        </div>\n      </div>\n\n      {/* Footer */}\n      <div style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '12px 24px 20px',\n        borderTop: '1px solid rgba(255, 255, 255, 0.1)',\n      }}>\n        {/* Left side: Skip / Progress */}\n        <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n          {!isLast && (\n            <button\n              {...skipProps}\n              style={{\n                background: 'transparent',\n                border: 'none',\n                color: '#6b7280',\n                fontSize: 12,\n                cursor: 'pointer',\n                padding: '4px 8px',\n              }}\n            >\n              Skip tour\n            </button>\n          )}\n          <div style={{\n            fontSize: 12,\n            color: '#6b7280',\n          }}>\n            {index + 1} / {size}\n          </div>\n        </div>\n\n        {/* Right side: Back / Next */}\n        <div style={{ display: 'flex', gap: 8 }}>\n          {!isFirst && (\n            <button\n              {...backProps}\n              style={{\n                background: 'transparent',\n                border: 'none',\n                color: '#9ca3af',\n                fontSize: 13,\n                fontWeight: 500,\n                cursor: 'pointer',\n                padding: '8px 12px',\n              }}\n            >\n              Back\n            </button>\n          )}\n          <button\n            {...primaryProps}\n            style={{\n              backgroundColor: '#f59e0b',\n              color: '#000000',\n              fontWeight: 600,\n              fontSize: 13,\n              padding: '8px 16px',\n              borderRadius: 8,\n              border: 'none',\n              cursor: 'pointer',\n            }}\n          >\n            {isLast ? 'Done' : 'Next'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function TourRenderer() {\n  const { state, endTour, skipTour, goToStep } = useTour();\n  const { isMobile } = useMobile();\n\n  // Get steps for the active tour\n  const steps = useMemo(() => {\n    if (!state.activeTour) return [];\n    return getTourSteps(state.activeTour, isMobile);\n  }, [state.activeTour, isMobile]);\n\n  // Handle Joyride callbacks\n  const handleCallback = useCallback((data: CallBackProps) => {\n    const { status, type, index, action } = data;\n\n    // Handle tour completion\n    if (status === STATUS.FINISHED) {\n      endTour();\n      return;\n    }\n\n    // Handle skip\n    if (status === STATUS.SKIPPED) {\n      skipTour();\n      return;\n    }\n\n    // Handle step navigation\n    if (type === EVENTS.STEP_AFTER) {\n      if (action === ACTIONS.NEXT) {\n        goToStep(index + 1);\n      } else if (action === ACTIONS.PREV) {\n        goToStep(index - 1);\n      }\n    }\n\n    // Handle close button\n    if (action === ACTIONS.CLOSE) {\n      skipTour();\n    }\n  }, [endTour, skipTour, goToStep]);\n\n  // Don't render if no active tour\n  if (!state.isRunning || !state.activeTour || steps.length === 0) {\n    return null;\n  }\n\n  return (\n    <Joyride\n      steps={steps}\n      stepIndex={state.stepIndex}\n      run={state.isRunning}\n      continuous\n      showSkipButton\n      showProgress={false}\n      disableScrolling={false}\n      disableOverlayClose={false}\n      spotlightClicks={false}\n      callback={handleCallback}\n      styles={tourStyles}\n      tooltipComponent={TourTooltip}\n      floaterProps={{\n        disableAnimation: false,\n        styles: {\n          floater: {\n            filter: 'drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3))',\n          },\n        },\n      }}\n      locale={{\n        back: 'Back',\n        close: 'Close',\n        last: 'Done',\n        next: 'Next',\n        skip: 'Skip tour',\n      }}\n    />\n  );\n}\n\nexport default TourRenderer;\n","/**\n * Tour Menu Component\n *\n * Provides UI for users to replay tours and manage tour preferences.\n * Can be used as a dropdown menu item or standalone component.\n */\n\nimport React, { useState } from 'react';\nimport { HelpCircle, Play, RotateCcw, X } from 'lucide-react';\nimport { useTour, TourName } from '../../contexts/TourContext';\nimport { tourDisplayNames } from './tourSteps';\n\ninterface TourMenuProps {\n  variant?: 'button' | 'dropdown-item';\n  onClose?: () => void;\n}\n\nexport function TourMenu({ variant = 'button', onClose }: TourMenuProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const { startTour, hasCompletedTour, resetAllTours, state } = useTour();\n\n  const consumerTours: TourName[] = ['welcome', 'purchase', 'library'];\n  const creatorTours: TourName[] = ['creator-intro', 'studio', 'dashboard', 'collaboration'];\n\n  const handleStartTour = (tourName: TourName) => {\n    startTour(tourName);\n    setIsOpen(false);\n    onClose?.();\n  };\n\n  const handleResetAll = () => {\n    resetAllTours();\n    setIsOpen(false);\n  };\n\n  // Dropdown item variant (for use in profile menu)\n  if (variant === 'dropdown-item') {\n    return (\n      <button\n        onClick={() => handleStartTour('welcome')}\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: 8,\n          width: '100%',\n          padding: '10px 16px',\n          background: 'transparent',\n          border: 'none',\n          color: '#d1d5db',\n          fontSize: 14,\n          cursor: 'pointer',\n          textAlign: 'left',\n        }}\n        onMouseEnter={(e) => {\n          e.currentTarget.style.background = '#2a3444';\n        }}\n        onMouseLeave={(e) => {\n          e.currentTarget.style.background = 'transparent';\n        }}\n      >\n        <HelpCircle size={18} />\n        Take the Tour\n      </button>\n    );\n  }\n\n  // Button with modal variant\n  return (\n    <>\n      <button\n        onClick={() => setIsOpen(true)}\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: 6,\n          padding: '8px 12px',\n          background: 'transparent',\n          border: '1px solid #374151',\n          borderRadius: 8,\n          color: '#9ca3af',\n          fontSize: 13,\n          cursor: 'pointer',\n          transition: 'all 0.2s ease',\n        }}\n        onMouseEnter={(e) => {\n          e.currentTarget.style.borderColor = '#f59e0b';\n          e.currentTarget.style.color = '#f59e0b';\n        }}\n        onMouseLeave={(e) => {\n          e.currentTarget.style.borderColor = '#374151';\n          e.currentTarget.style.color = '#9ca3af';\n        }}\n        title=\"App Tour\"\n      >\n        <HelpCircle size={16} />\n        Tour\n      </button>\n\n      {/* Tour selection modal */}\n      {isOpen && (\n        <div\n          style={{\n            position: 'fixed',\n            inset: 0,\n            background: 'rgba(0, 0, 0, 0.7)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 10001,\n          }}\n          onClick={() => setIsOpen(false)}\n        >\n          <div\n            style={{\n              background: '#1a1a1a',\n              borderRadius: 16,\n              padding: 24,\n              maxWidth: 400,\n              width: '90%',\n              boxShadow: '0 8px 32px rgba(0, 0, 0, 0.5)',\n            }}\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/* Header */}\n            <div style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginBottom: 20,\n            }}>\n              <h3 style={{\n                fontSize: 18,\n                fontWeight: 700,\n                color: '#ffffff',\n                margin: 0,\n              }}>\n                App Tours\n              </h3>\n              <button\n                onClick={() => setIsOpen(false)}\n                style={{\n                  background: 'transparent',\n                  border: 'none',\n                  color: '#6b7280',\n                  cursor: 'pointer',\n                  padding: 4,\n                }}\n              >\n                <X size={20} />\n              </button>\n            </div>\n\n            {/* Consumer Tours */}\n            <div style={{ marginBottom: 20 }}>\n              <h4 style={{\n                fontSize: 12,\n                fontWeight: 600,\n                color: '#6b7280',\n                textTransform: 'uppercase',\n                letterSpacing: 0.5,\n                marginBottom: 12,\n              }}>\n                Getting Started\n              </h4>\n              <div style={{ display: 'flex', flexDirection: 'column', gap: 8 }}>\n                {consumerTours.map((tour) => (\n                  <TourButton\n                    key={tour}\n                    tourName={tour}\n                    isCompleted={hasCompletedTour(tour)}\n                    onClick={() => handleStartTour(tour)}\n                    isRunning={state.activeTour === tour}\n                  />\n                ))}\n              </div>\n            </div>\n\n            {/* Creator Tours */}\n            <div style={{ marginBottom: 20 }}>\n              <h4 style={{\n                fontSize: 12,\n                fontWeight: 600,\n                color: '#6b7280',\n                textTransform: 'uppercase',\n                letterSpacing: 0.5,\n                marginBottom: 12,\n              }}>\n                Creator Tools\n              </h4>\n              <div style={{ display: 'flex', flexDirection: 'column', gap: 8 }}>\n                {creatorTours.map((tour) => (\n                  <TourButton\n                    key={tour}\n                    tourName={tour}\n                    isCompleted={hasCompletedTour(tour)}\n                    onClick={() => handleStartTour(tour)}\n                    isRunning={state.activeTour === tour}\n                  />\n                ))}\n              </div>\n            </div>\n\n            {/* Reset all tours */}\n            <button\n              onClick={handleResetAll}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: 8,\n                width: '100%',\n                padding: '10px 16px',\n                background: 'transparent',\n                border: '1px solid #374151',\n                borderRadius: 8,\n                color: '#9ca3af',\n                fontSize: 13,\n                cursor: 'pointer',\n                transition: 'all 0.2s ease',\n              }}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.borderColor = '#6b7280';\n                e.currentTarget.style.color = '#d1d5db';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.borderColor = '#374151';\n                e.currentTarget.style.color = '#9ca3af';\n              }}\n            >\n              <RotateCcw size={14} />\n              Reset All Tours\n            </button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\n// Individual tour button\nfunction TourButton({\n  tourName,\n  isCompleted,\n  onClick,\n  isRunning,\n}: {\n  tourName: TourName;\n  isCompleted: boolean;\n  onClick: () => void;\n  isRunning: boolean;\n}) {\n  return (\n    <button\n      onClick={onClick}\n      disabled={isRunning}\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        padding: '12px 16px',\n        background: '#111827',\n        border: '1px solid #2a3444',\n        borderRadius: 8,\n        cursor: isRunning ? 'not-allowed' : 'pointer',\n        transition: 'all 0.2s ease',\n        opacity: isRunning ? 0.5 : 1,\n      }}\n      onMouseEnter={(e) => {\n        if (!isRunning) {\n          e.currentTarget.style.borderColor = '#f59e0b';\n          e.currentTarget.style.background = '#1f2937';\n        }\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.borderColor = '#2a3444';\n        e.currentTarget.style.background = '#111827';\n      }}\n    >\n      <span style={{\n        fontSize: 14,\n        color: '#e5e7eb',\n        fontWeight: 500,\n      }}>\n        {tourDisplayNames[tourName]}\n      </span>\n      <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n        {isCompleted && (\n          <span style={{\n            fontSize: 11,\n            color: '#10b981',\n            fontWeight: 600,\n          }}>\n            Completed\n          </span>\n        )}\n        <Play size={14} style={{ color: '#f59e0b' }} />\n      </div>\n    </button>\n  );\n}\n\nexport default TourMenu;\n","/**\n * Cart Icon Component\n *\n * Shopping cart icon for header navigation.\n * Shows item count badge when cart has items.\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { ShoppingCart } from 'lucide-react';\nimport { useCart } from '../contexts/CartContext';\n\ninterface CartIconProps {\n  className?: string;\n}\n\nexport default function CartIcon({ className = '' }: CartIconProps) {\n  const { cart, loading } = useCart();\n  const itemCount = cart?.item_count || 0;\n\n  return (\n    <Link\n      to=\"/cart\"\n      className={`rb-nav-link rb-cart-icon ${className}`}\n      title={itemCount > 0 ? `Cart (${itemCount} items)` : 'Cart'}\n      style={{\n        position: 'relative',\n        display: 'flex',\n        alignItems: 'center',\n        padding: '8px',\n        color: 'var(--text, #e2e8f0)',\n        textDecoration: 'none',\n      }}\n    >\n      <ShoppingCart size={20} />\n\n      {!loading && itemCount > 0 && (\n        <span\n          style={{\n            position: 'absolute',\n            top: '0',\n            right: '0',\n            backgroundColor: 'var(--accent, #3b82f6)',\n            color: 'white',\n            fontSize: '11px',\n            fontWeight: 600,\n            minWidth: '18px',\n            height: '18px',\n            borderRadius: '50%',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: '0 4px',\n          }}\n        >\n          {itemCount > 99 ? '99+' : itemCount}\n        </span>\n      )}\n    </Link>\n  );\n}\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Search, Clock, TrendingUp, X } from 'lucide-react';\nimport { API_URL } from '../config';\n\ntype Suggestion = {\n  id: number;\n  title: string;\n  creator_username?: string;\n  content_type?: string;\n};\n\ntype Props = {\n  onSearch?: (query: string) => void;\n};\n\nconst RECENT_SEARCHES_KEY = 'rb_recent_searches';\nconst MAX_RECENT_SEARCHES = 5;\n\nexport function SearchAutocomplete({ onSearch }: Props) {\n  const [query, setQuery] = useState('');\n  const [suggestions, setSuggestions] = useState<Suggestion[]>([]);\n  const [recentSearches, setRecentSearches] = useState<string[]>([]);\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const [loading, setLoading] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const navigate = useNavigate();\n\n  // Load recent searches from localStorage\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(RECENT_SEARCHES_KEY);\n      if (stored) {\n        setRecentSearches(JSON.parse(stored));\n      }\n    } catch {}\n  }, []);\n\n  // Save recent search\n  const saveRecentSearch = (search: string) => {\n    if (!search.trim()) return;\n    const updated = [search, ...recentSearches.filter(s => s !== search)].slice(0, MAX_RECENT_SEARCHES);\n    setRecentSearches(updated);\n    try {\n      localStorage.setItem(RECENT_SEARCHES_KEY, JSON.stringify(updated));\n    } catch {}\n  };\n\n  // Remove recent search\n  const removeRecentSearch = (search: string, e: React.MouseEvent) => {\n    e.stopPropagation();\n    const updated = recentSearches.filter(s => s !== search);\n    setRecentSearches(updated);\n    try {\n      localStorage.setItem(RECENT_SEARCHES_KEY, JSON.stringify(updated));\n    } catch {}\n  };\n\n  // Fetch suggestions (debounced)\n  useEffect(() => {\n    if (query.length < 2) {\n      setSuggestions([]);\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      setLoading(true);\n      fetch(`${API_URL}/api/search/?q=${encodeURIComponent(query)}`, { credentials: 'include' })\n        .then(r => r.json())\n        .then(data => {\n          if (Array.isArray(data)) {\n            setSuggestions(data.slice(0, 6));\n          }\n        })\n        .catch(() => setSuggestions([]))\n        .finally(() => setLoading(false));\n    }, 200);\n\n    return () => clearTimeout(timer);\n  }, [query]);\n\n  // Handle click outside to close dropdown\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (containerRef.current && !containerRef.current.contains(e.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Handle search submission\n  const handleSearch = (searchQuery: string) => {\n    if (!searchQuery.trim()) return;\n    saveRecentSearch(searchQuery.trim());\n    setIsOpen(false);\n    setQuery(searchQuery);\n    if (onSearch) {\n      onSearch(searchQuery);\n    } else {\n      navigate(`/search?q=${encodeURIComponent(searchQuery.trim())}`);\n    }\n  };\n\n  // Handle keyboard navigation\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    const items = query.length >= 2 ? suggestions : recentSearches;\n    const totalItems = items.length;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedIndex(prev => (prev < totalItems - 1 ? prev + 1 : prev));\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedIndex(prev => (prev > 0 ? prev - 1 : -1));\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (selectedIndex >= 0 && selectedIndex < totalItems) {\n          const selected = query.length >= 2\n            ? suggestions[selectedIndex]?.title\n            : recentSearches[selectedIndex];\n          if (selected) handleSearch(selected);\n        } else {\n          handleSearch(query);\n        }\n        break;\n      case 'Escape':\n        setIsOpen(false);\n        inputRef.current?.blur();\n        break;\n    }\n  };\n\n  // Reset selection when suggestions change\n  useEffect(() => {\n    setSelectedIndex(-1);\n  }, [suggestions, recentSearches]);\n\n  const showDropdown = isOpen && (query.length >= 2 ? suggestions.length > 0 : recentSearches.length > 0);\n\n  return (\n    <div ref={containerRef} className=\"search-autocomplete\" style={{ position: 'relative', width: '100%' }}>\n      <form\n        onSubmit={(e) => { e.preventDefault(); handleSearch(query); }}\n        className=\"rb-search\"\n      >\n        <input\n          ref={inputRef}\n          type=\"text\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          onFocus={() => setIsOpen(true)}\n          onKeyDown={handleKeyDown}\n          placeholder=\"Search\"\n          autoComplete=\"off\"\n        />\n        <button type=\"submit\">\n          <Search size={18} />\n        </button>\n      </form>\n\n      {/* Dropdown */}\n      {showDropdown && (\n        <div className=\"search-dropdown\" style={{\n          position: 'absolute',\n          top: '100%',\n          left: 0,\n          right: 0,\n          marginTop: 4,\n          background: '#1e293b',\n          borderRadius: 8,\n          boxShadow: '0 4px 20px rgba(0,0,0,0.4)',\n          zIndex: 1000,\n          overflow: 'hidden',\n          border: '1px solid #334155',\n        }}>\n          {query.length >= 2 ? (\n            // Show search suggestions\n            <>\n              {suggestions.map((item, index) => (\n                <div\n                  key={item.id}\n                  onClick={() => handleSearch(item.title)}\n                  style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 12,\n                    padding: '10px 16px',\n                    cursor: 'pointer',\n                    background: selectedIndex === index ? '#334155' : 'transparent',\n                  }}\n                  onMouseEnter={() => setSelectedIndex(index)}\n                >\n                  <Search size={16} style={{ color: '#64748b', flexShrink: 0 }} />\n                  <div style={{ flex: 1, minWidth: 0 }}>\n                    <div style={{\n                      color: '#f1f5f9',\n                      fontSize: 14,\n                      whiteSpace: 'nowrap',\n                      overflow: 'hidden',\n                      textOverflow: 'ellipsis',\n                    }}>\n                      {item.title}\n                    </div>\n                    {item.creator_username && (\n                      <div style={{ color: '#64748b', fontSize: 12 }}>\n                        by {item.creator_username}\n                      </div>\n                    )}\n                  </div>\n                  {item.content_type && (\n                    <span style={{\n                      fontSize: 10,\n                      padding: '2px 6px',\n                      background: '#334155',\n                      borderRadius: 4,\n                      color: '#94a3b8',\n                      textTransform: 'capitalize',\n                    }}>\n                      {item.content_type}\n                    </span>\n                  )}\n                </div>\n              ))}\n            </>\n          ) : (\n            // Show recent searches\n            <>\n              <div style={{\n                padding: '8px 16px',\n                fontSize: 12,\n                color: '#64748b',\n                borderBottom: '1px solid #334155',\n              }}>\n                Recent searches\n              </div>\n              {recentSearches.map((search, index) => (\n                <div\n                  key={search}\n                  onClick={() => handleSearch(search)}\n                  style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 12,\n                    padding: '10px 16px',\n                    cursor: 'pointer',\n                    background: selectedIndex === index ? '#334155' : 'transparent',\n                  }}\n                  onMouseEnter={() => setSelectedIndex(index)}\n                >\n                  <Clock size={16} style={{ color: '#64748b', flexShrink: 0 }} />\n                  <span style={{ flex: 1, color: '#f1f5f9', fontSize: 14 }}>\n                    {search}\n                  </span>\n                  <button\n                    onClick={(e) => removeRecentSearch(search, e)}\n                    style={{\n                      background: 'none',\n                      border: 'none',\n                      padding: 4,\n                      cursor: 'pointer',\n                      color: '#64748b',\n                      display: 'flex',\n                      alignItems: 'center',\n                    }}\n                  >\n                    <X size={14} />\n                  </button>\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useEffect, useState, Suspense, lazy } from 'react';\nimport { Route, Routes, Link, useLocation, useNavigate, Navigate } from 'react-router-dom';\nimport './App.css';\nimport { CreatorSidebar } from './components/CreatorSidebar';\nimport { LibrarySidebar } from './components/LibrarySidebar';\nimport { MobileLibrary } from './components/MobileLibrary';\nimport { useMobile } from './hooks/useMobile';\nimport ProtectedRoute from './components/ProtectedRoute';\nimport ErrorBoundary from './components/ErrorBoundary';\nimport NotificationBell from './components/notifications/NotificationBell';\nimport NotificationToastContainer from './components/notifications/NotificationToastContainer';\nimport notificationService from './services/notificationService';\nimport { BetaBadge, TestModeBanner } from './components/BetaBadge';\nimport { useAuth } from './hooks/useAuth';\nimport BetaOnboarding from './components/BetaOnboarding';\nimport { Footer } from './components/legal/Footer';\nimport { CookieBanner } from './components/legal/CookieBanner';\nimport { API_URL } from './config';\nimport { CartProvider } from './contexts/CartContext';\nimport { TourProvider } from './contexts/TourContext';\nimport { TourRenderer } from './components/Tour/TourProvider';\nimport { TourMenu } from './components/Tour/TourMenu';\nimport CartIcon from './components/CartIcon';\nimport {\n  User, LogOut, Menu, X, Users\n} from 'lucide-react';\nimport { SearchAutocomplete } from './components/SearchAutocomplete';\n\n// Lazy-loaded page components for code splitting\nconst HomePage = lazy(() => import('./pages/HomePage'));\nconst SearchPage = lazy(() => import('./pages/SearchPage'));\nconst StudioPage = lazy(() => import('./pages/StudioPage'));\nconst DashboardPage = lazy(() => import('./pages/DashboardPage'));\nconst ProfilePage = lazy(() => import('./pages/ProfilePageRedesigned'));\nconst AuthPage = lazy(() => import('./pages/AuthPage'));\nconst WalletInfoPage = lazy(() => import('./pages/WalletInfoPage'));\n// TermsPage replaced by TermsOfServicePage in legal pages\nconst BetaLanding = lazy(() => import('./pages/BetaLanding'));\nconst CollaboratorsPage = lazy(() => import('./pages/CollaboratorsPage'));\nconst PublicProfilePage = lazy(() => import('./pages/PublicProfilePage'));\nconst ContentDetail = lazy(() => import('./pages/ContentDetail'));\nconst PurchaseSuccessPage = lazy(() => import('./pages/PurchaseSuccessPage'));\nconst ReaderPage = lazy(() => import('./pages/ReaderPage').then(m => ({ default: m.ReaderPage })));\nconst CollaborationDashboard = lazy(() => import('./pages/CollaborationDashboard'));\nconst CollaborativeProjectPage = lazy(() => import('./pages/CollaborativeProjectPage'));\nconst NotificationsPage = lazy(() => import('./pages/NotificationsPage'));\nconst FollowingFeedPage = lazy(() => import('./pages/FollowingFeedPage'));\nconst CartPage = lazy(() => import('./pages/CartPage'));\nconst CartSuccessPage = lazy(() => import('./pages/CartSuccessPage'));\n\n// Legal pages\nconst TermsOfServicePage = lazy(() => import('./pages/legal/TermsOfServicePage'));\nconst PrivacyPolicyPage = lazy(() => import('./pages/legal/PrivacyPolicyPage'));\nconst ContentPolicyPage = lazy(() => import('./pages/legal/ContentPolicyPage'));\nconst DMCAPolicyPage = lazy(() => import('./pages/legal/DMCAPolicyPage'));\nconst CreatorAgreementPage = lazy(() => import('./pages/legal/CreatorAgreementPage'));\n\n// Loading fallback component\nconst PageLoader = () => (\n  <div style={{\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: '200px',\n    color: 'var(--text-muted, #94a3b8)',\n  }}>\n    Loading...\n  </div>\n);\n\nfunction Header() {\n  const [isAuthed, setIsAuthed] = useState(false);\n  const [username, setUsername] = useState('');\n  const [avatarUrl, setAvatarUrl] = useState<string | null>(null);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const checkAuth = React.useCallback(() => {\n    fetch(`${API_URL}/api/auth/status/`, { credentials: 'include' })\n      .then(r=>r.json())\n      .then(d=> {\n        const authed = !!d?.authenticated;\n        setIsAuthed(authed);\n\n        // Store username and avatar if available\n        if (authed && d?.user?.username) {\n          setUsername(d.user.username);\n          setAvatarUrl(d.user.avatar_url || null);\n        } else {\n          setUsername('');\n          setAvatarUrl(null);\n        }\n\n        // Start/stop notification polling based on auth state\n        if (authed) {\n          if (!notificationService.isPolling()) {\n            notificationService.startPolling();\n          }\n        } else {\n          if (notificationService.isPolling()) {\n            notificationService.stopPolling();\n          }\n          notificationService.reset();\n        }\n      })\n      .catch(()=> {\n        setIsAuthed(false);\n        setUsername('');\n        setAvatarUrl(null);\n        notificationService.stopPolling();\n        notificationService.reset();\n      });\n  }, []);\n\n  useEffect(()=>{\n    checkAuth();\n    // Poll auth status every 10 seconds to catch changes\n    const interval = setInterval(checkAuth, 10000);\n    return () => {\n      clearInterval(interval);\n      // Clean up notification service on unmount\n      notificationService.stopPolling();\n    };\n  },[location.pathname, checkAuth]);\n\n  // Also refresh immediately when we land on home with potential fresh logout redirect\n  useEffect(()=>{\n    if (location.pathname === '/') {\n      checkAuth();\n    }\n  }, [location.pathname, checkAuth]);\n\n  const goLogin = () => { navigate('/auth'); };\n\n  const doLogout = async () => {\n    try {\n      const t = await fetch(`${API_URL}/api/auth/csrf/`, { credentials:'include' }).then(r=>r.json()).then(j=> j?.csrfToken || '');\n      await fetch(`${API_URL}/api/auth/logout/`, { method:'POST', credentials:'include', headers:{ 'X-CSRFToken': t, 'X-Requested-With': 'XMLHttpRequest' } });\n    } catch {}\n\n    // Stop notification polling and reset\n    notificationService.stopPolling();\n    notificationService.reset();\n\n    // Optimistically flip immediately\n    setIsAuthed(false);\n\n    // Navigate to home using React Router\n    navigate('/');\n\n    // Re-check server state after navigation\n    setTimeout(() => checkAuth(), 100);\n  };\n  return (\n    <nav className=\"rb-header\">\n      <div className=\"rb-header-left\">\n        <Link to=\"/\" className=\"rb-logo-link\">\n          <img src=\"/rb-logo.png\" alt=\"renaissBlock\" className=\"rb-logo-img\"/>\n        </Link>\n        <BetaBadge variant=\"header\" showTestMode={true} />\n      </div>\n      <div className=\"rb-header-center\" data-tour=\"search-bar\">\n        <SearchAutocomplete />\n      </div>\n\n      {/* Mobile Menu Toggle */}\n      <button\n        className=\"rb-mobile-menu-toggle\"\n        onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n        aria-label=\"Toggle menu\"\n        data-tour=\"mobile-menu-toggle\"\n      >\n        {mobileMenuOpen ? <X size={24} /> : <Menu size={24} />}\n      </button>\n\n      {/* Navigation Links */}\n      <div className={`rb-header-right rb-nav ${mobileMenuOpen ? 'rb-nav-mobile-open' : ''}`}>\n        {isAuthed && (\n          <>\n            <TourMenu />\n            <span data-tour=\"cart-button\">\n              <CartIcon />\n            </span>\n            <span data-tour=\"notifications-button\">\n              <NotificationBell />\n            </span>\n            <Link to=\"/collaborators\" className=\"rb-nav-link\" title=\"Find Collaborators\" data-tour=\"collaborators-link\">\n              <Users size={20} />\n            </Link>\n            <Link to=\"/profile\" className=\"rb-nav-link rb-profile-link\" title=\"Profile\" data-tour=\"profile-link\">\n              {avatarUrl ? (\n                <img\n                  src={avatarUrl}\n                  alt={username}\n                  style={{\n                    width: 28,\n                    height: 28,\n                    borderRadius: '50%',\n                    objectFit: 'cover',\n                    border: '2px solid var(--accent)',\n                  }}\n                />\n              ) : (\n                <User size={20} />\n              )}\n              <span>@{username || 'Profile'}</span>\n            </Link>\n            <button\n              onClick={doLogout}\n              className=\"rb-nav-link rb-logout-btn\"\n              title=\"Logout\"\n            >\n              <LogOut size={20} />\n              <span>Logout</span>\n            </button>\n          </>\n        )}\n        {!isAuthed && (\n          <button onClick={goLogin} className=\"rb-nav-link rb-signin-btn\">\n            <User size={20} />\n            <span>Sign in</span>\n          </button>\n        )}\n      </div>\n    </nav>\n  );\n}\n\nexport default function App() {\n  const location = useLocation();\n  const { isAuthenticated, loading } = useAuth();\n  const { isMobile } = useMobile();\n\n  // Legacy CreatorSidebar removed - functionality now in navbar and page tabs\n  const showCreatorSidebar = false;\n  // Only show Library sidebar when authenticated AND on home or search pages AND not mobile\n  const showLibrarySidebar = !isMobile && isAuthenticated && [/^\\/$/, /^\\/search/].some(r => r.test(location.pathname));\n  // Show mobile library on home page for authenticated mobile users\n  const showMobileLibrary = isMobile && isAuthenticated && location.pathname === '/';\n  const isReaderPage = /^\\/reader/.test(location.pathname);\n  // Hide footer on pages that have the sidebar (footer links are in sidebar instead)\n  const showFooter = !showLibrarySidebar;\n\n  // Public routes that don't require authentication\n  const publicRoutes = ['/auth', '/terms', '/wallet-info', '/beta', '/profile/', '/legal'];\n  const isPublicRoute = publicRoutes.some(route => location.pathname.startsWith(route));\n\n  // Show loading state while checking authentication\n  if (loading) {\n    return (\n      <div className=\"rb-app\" style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100vh',\n        background: 'var(--bg)',\n        color: 'var(--text)'\n      }}>\n        <div style={{ textAlign: 'center' }}>\n          <div style={{ fontSize: '18px', marginBottom: '8px' }}>Loading...</div>\n        </div>\n      </div>\n    );\n  }\n\n  // Show beta landing page for unauthenticated users (except on public routes)\n  if (!isAuthenticated && !isPublicRoute) {\n    return (\n      <div className=\"rb-app\">\n        <BetaLanding />\n        <NotificationToastContainer />\n      </div>\n    );\n  }\n\n  // Special handling for explicit /beta route\n  const isBetaLanding = location.pathname === '/beta';\n  if (isBetaLanding) {\n    return (\n      <div className=\"rb-app\">\n        <BetaLanding />\n        <NotificationToastContainer />\n      </div>\n    );\n  }\n\n  // Reader page gets its own full-screen layout without app chrome\n  if (isReaderPage) {\n    return (\n      <div className=\"rb-app\">\n        <ErrorBoundary>\n          <Suspense fallback={<PageLoader />}>\n            <Routes>\n              <Route path=\"/reader/:contentId\" element={<ReaderPage />} />\n            </Routes>\n          </Suspense>\n        </ErrorBoundary>\n      </div>\n    );\n  }\n\n  return (\n    <TourProvider>\n    <CartProvider>\n    <div className=\"rb-app\">\n      <Header />\n      {showLibrarySidebar && <LibrarySidebar />}\n      <main\n        className=\"rb-main\"\n        style={{\n          display: 'grid',\n          gridTemplateColumns: showCreatorSidebar ? '240px 1fr' : '1fr',\n          gap: 16,\n          ...(showLibrarySidebar ? {\n            marginLeft: 320,\n            marginRight: 0,\n            width: 'calc(100% - 320px)',\n          } : {}),\n          transition: 'margin-left 0.3s ease, width 0.3s ease',\n        }}\n      >\n        {showCreatorSidebar && <CreatorSidebar />}\n        <div style={{ width: '100%', minWidth: 0 }}>\n          {/* Mobile Library - shown at top of home page for mobile users */}\n          {showMobileLibrary && <MobileLibrary />}\n          <ErrorBoundary>\n            <Suspense fallback={<PageLoader />}>\n              <Routes>\n                <Route path=\"/\" element={<HomePage />} />\n                <Route path=\"/beta\" element={<BetaLanding />} />\n                <Route path=\"/login\" element={<Navigate to=\"/auth\" replace />} />\n                <Route path=\"/signup\" element={<Navigate to=\"/auth\" replace />} />\n                <Route path=\"/search\" element={<SearchPage />} />\n                <Route path=\"/studio\" element={<StudioPage />} />\n                <Route path=\"/dashboard\" element={<DashboardPage />} />\n                <Route path=\"/profile\" element={<ProfilePage />} />\n                <Route path=\"/profile/:username\" element={<PublicProfilePage />} />\n                <Route path=\"/collaborators\" element={<CollaboratorsPage />} />\n                <Route path=\"/auth\" element={<AuthPage />} />\n                <Route path=\"/wallet-info\" element={<WalletInfoPage />} />\n                <Route path=\"/terms\" element={<TermsOfServicePage />} />\n                <Route path=\"/legal/terms\" element={<TermsOfServicePage />} />\n                <Route path=\"/legal/privacy\" element={<PrivacyPolicyPage />} />\n                <Route path=\"/legal/content-policy\" element={<ContentPolicyPage />} />\n                <Route path=\"/legal/dmca\" element={<DMCAPolicyPage />} />\n                <Route path=\"/legal/creator-agreement\" element={<CreatorAgreementPage />} />\n                <Route path=\"/content/:id\" element={<ContentDetail />} />\n                <Route path=\"/purchase/success\" element={<PurchaseSuccessPage />} />\n                <Route path=\"/cart\" element={<ProtectedRoute><CartPage /></ProtectedRoute>} />\n                <Route path=\"/cart/success\" element={<ProtectedRoute><CartSuccessPage /></ProtectedRoute>} />\n                <Route path=\"/collaborations\" element={<ProtectedRoute><CollaborationDashboard /></ProtectedRoute>} />\n                <Route path=\"/collaborations/:projectId\" element={<ProtectedRoute><CollaborativeProjectPage /></ProtectedRoute>} />\n                <Route path=\"/notifications\" element={<ProtectedRoute><NotificationsPage /></ProtectedRoute>} />\n                <Route path=\"/feed\" element={<ProtectedRoute><FollowingFeedPage /></ProtectedRoute>} />\n              </Routes>\n            </Suspense>\n          </ErrorBoundary>\n        </div>\n      </main>\n      {showFooter && <Footer />}\n      <NotificationToastContainer />\n      <CookieBanner />\n      <TestModeBanner />\n      <BetaOnboarding />\n      <TourRenderer />\n    </div>\n    </CartProvider>\n    </TourProvider>\n  );\n}\n","import './polyfills';\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom';\n\n// Polyfills for Node globals used by some dependencies in the browser\nimport { Buffer } from 'buffer';\nimport process from 'process';\nif (!(window as any).Buffer) (window as any).Buffer = Buffer;\nif (!(window as any).process) (window as any).process = process;\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>\n);\n"],"file":"assets/index-N-1KqPbo.js"}