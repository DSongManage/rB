{"version":3,"file":"InviteModal-IMIxpNJG.js","sources":["../../node_modules/lucide-react/dist/esm/icons/award.js","../../node_modules/lucide-react/dist/esm/icons/brush.js","../../node_modules/lucide-react/dist/esm/icons/circle-play.js","../../node_modules/lucide-react/dist/esm/icons/layout-grid.js","../../node_modules/lucide-react/dist/esm/icons/mic.js","../../node_modules/lucide-react/dist/esm/icons/mic-vocal.js","../../node_modules/lucide-react/dist/esm/icons/paint-bucket.js","../../node_modules/lucide-react/dist/esm/icons/pen-tool.js","../../node_modules/lucide-react/dist/esm/icons/scissors.js","../../node_modules/lucide-react/dist/esm/icons/sliders-vertical.js","../../node_modules/lucide-react/dist/esm/icons/volume-2.js","../../src/components/InviteModal.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526\",\n      key: \"1yiouv\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }]\n];\nconst Award = createLucideIcon(\"award\", __iconNode);\n\nexport { __iconNode, Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m11 10 3 3\", key: \"fzmg1i\" }],\n  [\n    \"path\",\n    { d: \"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z\", key: \"p4q2r7\" }\n  ],\n  [\"path\", { d: \"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031\", key: \"wy6l02\" }]\n];\nconst Brush = createLucideIcon(\"brush\", __iconNode);\n\nexport { __iconNode, Brush as default };\n//# sourceMappingURL=brush.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z\",\n      key: \"kmsa83\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n];\nconst CirclePlay = createLucideIcon(\"circle-play\", __iconNode);\n\nexport { __iconNode, CirclePlay as default };\n//# sourceMappingURL=circle-play.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"3\", rx: \"1\", key: \"1g98yp\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"3\", rx: \"1\", key: \"6d4xhi\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"14\", rx: \"1\", key: \"nxv5o0\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"14\", rx: \"1\", key: \"1bb6yr\" }]\n];\nconst LayoutGrid = createLucideIcon(\"layout-grid\", __iconNode);\n\nexport { __iconNode, LayoutGrid as default };\n//# sourceMappingURL=layout-grid.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 19v3\", key: \"npa21l\" }],\n  [\"path\", { d: \"M19 10v2a7 7 0 0 1-14 0v-2\", key: \"1vc78b\" }],\n  [\"rect\", { x: \"9\", y: \"2\", width: \"6\", height: \"13\", rx: \"3\", key: \"s6n7sd\" }]\n];\nconst Mic = createLucideIcon(\"mic\", __iconNode);\n\nexport { __iconNode, Mic as default };\n//# sourceMappingURL=mic.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12\",\n      key: \"80a601\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5\",\n      key: \"j0ngtp\"\n    }\n  ],\n  [\"circle\", { cx: \"16\", cy: \"7\", r: \"5\", key: \"d08jfb\" }]\n];\nconst MicVocal = createLucideIcon(\"mic-vocal\", __iconNode);\n\nexport { __iconNode, MicVocal as default };\n//# sourceMappingURL=mic-vocal.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z\", key: \"irua1i\" }\n  ],\n  [\"path\", { d: \"m5 2 5 5\", key: \"1lls2c\" }],\n  [\"path\", { d: \"M2 13h15\", key: \"1hkzvu\" }],\n  [\"path\", { d: \"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z\", key: \"xk76lq\" }]\n];\nconst PaintBucket = createLucideIcon(\"paint-bucket\", __iconNode);\n\nexport { __iconNode, PaintBucket as default };\n//# sourceMappingURL=paint-bucket.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z\",\n      key: \"nt11vn\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18\",\n      key: \"15qc1e\"\n    }\n  ],\n  [\"path\", { d: \"m2.3 2.3 7.286 7.286\", key: \"1wuzzi\" }],\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"2\", key: \"xmgehs\" }]\n];\nconst PenTool = createLucideIcon(\"pen-tool\", __iconNode);\n\nexport { __iconNode, PenTool as default };\n//# sourceMappingURL=pen-tool.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"6\", cy: \"6\", r: \"3\", key: \"1lh9wr\" }],\n  [\"path\", { d: \"M8.12 8.12 12 12\", key: \"1alkpv\" }],\n  [\"path\", { d: \"M20 4 8.12 15.88\", key: \"xgtan2\" }],\n  [\"circle\", { cx: \"6\", cy: \"18\", r: \"3\", key: \"fqmcym\" }],\n  [\"path\", { d: \"M14.8 14.8 20 20\", key: \"ptml3r\" }]\n];\nconst Scissors = createLucideIcon(\"scissors\", __iconNode);\n\nexport { __iconNode, Scissors as default };\n//# sourceMappingURL=scissors.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 8h4\", key: \"1sr2af\" }],\n  [\"path\", { d: \"M12 21v-9\", key: \"17s77i\" }],\n  [\"path\", { d: \"M12 8V3\", key: \"13r4qs\" }],\n  [\"path\", { d: \"M17 16h4\", key: \"h1uq16\" }],\n  [\"path\", { d: \"M19 12V3\", key: \"o1uvq1\" }],\n  [\"path\", { d: \"M19 21v-5\", key: \"qua636\" }],\n  [\"path\", { d: \"M3 14h4\", key: \"bcjad9\" }],\n  [\"path\", { d: \"M5 10V3\", key: \"cb8scm\" }],\n  [\"path\", { d: \"M5 21v-7\", key: \"1w1uti\" }]\n];\nconst SlidersVertical = createLucideIcon(\"sliders-vertical\", __iconNode);\n\nexport { __iconNode, SlidersVertical as default };\n//# sourceMappingURL=sliders-vertical.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z\",\n      key: \"uqj9uw\"\n    }\n  ],\n  [\"path\", { d: \"M16 9a5 5 0 0 1 0 6\", key: \"1q6k2b\" }],\n  [\"path\", { d: \"M19.364 18.364a9 9 0 0 0 0-12.728\", key: \"ijwkga\" }]\n];\nconst Volume2 = createLucideIcon(\"volume-2\", __iconNode);\n\nexport { __iconNode, Volume2 as default };\n//# sourceMappingURL=volume-2.js.map\n","import React, { useState, useEffect } from 'react';\nimport {\n  BookOpen, Palette, Music, Film, Check, Plus, User,\n  Pen, Users, Image, CheckCircle, FileText, Mic, Mic2,\n  Brush, PaintBucket, Eye, Sliders, Volume2, Video,\n  Scissors, PlayCircle, Briefcase, LayoutGrid, Type, PenTool\n} from 'lucide-react';\nimport { API_URL } from '../config';\n\n// Helper to render role icon based on icon string\nconst RoleIcon = ({ icon, size = 20 }: { icon: string; size?: number }) => {\n  const iconProps = { size, strokeWidth: 1.5 };\n  switch (icon) {\n    case 'pen': return <Pen {...iconProps} />;\n    case 'users': return <Users {...iconProps} />;\n    case 'palette': return <Palette {...iconProps} />;\n    case 'image': return <Image {...iconProps} />;\n    case 'check-circle': return <CheckCircle {...iconProps} />;\n    case 'spell-check': return <FileText {...iconProps} />;\n    case 'microphone': return <Mic2 {...iconProps} />;\n    case 'brush': return <Brush {...iconProps} />;\n    case 'paint-brush': return <PaintBucket {...iconProps} />;\n    case 'eye': return <Eye {...iconProps} />;\n    case 'music': return <Music {...iconProps} />;\n    case 'sliders': return <Sliders {...iconProps} />;\n    case 'mic': return <Mic {...iconProps} />;\n    case 'file-text': return <FileText {...iconProps} />;\n    case 'volume-2': return <Volume2 {...iconProps} />;\n    case 'film': return <Film {...iconProps} />;\n    case 'video': return <Video {...iconProps} />;\n    case 'scissors': return <Scissors {...iconProps} />;\n    case 'play-circle': return <PlayCircle {...iconProps} />;\n    case 'briefcase': return <Briefcase {...iconProps} />;\n    case 'type': return <Type {...iconProps} />;\n    case 'pen-tool': return <PenTool {...iconProps} />;\n    default: return <User {...iconProps} />;\n  }\n};\n\n// Types for contract tasks\ninterface ContractTask {\n  id: string;\n  title: string;\n  description: string;\n  deadline: string;\n}\n\n// Types for role definitions\ninterface RoleDefinition {\n  id: number;\n  name: string;\n  category: string;\n  description: string;\n  applicable_to_book: boolean;\n  applicable_to_art: boolean;\n  applicable_to_music: boolean;\n  applicable_to_video: boolean;\n  applicable_to_comic: boolean;\n  default_permissions: {\n    create: string[];\n    edit: { scope: string; types: string[] };\n    review: string[];\n  };\n  ui_components: string[];\n  icon: string;\n  color: string;\n}\n\n// Project type options\ntype ProjectType = 'book' | 'art' | 'music' | 'video' | 'comic';\n\nconst PROJECT_TYPE_OPTIONS: { value: ProjectType; label: string; icon: React.ReactNode; description: string; comingSoon?: boolean }[] = [\n  { value: 'book', label: 'Book', icon: <BookOpen size={28} />, description: 'Written content with chapters' },\n  { value: 'comic', label: 'Comic', icon: <LayoutGrid size={28} />, description: 'Comic books with panels' },\n  { value: 'art', label: 'Art', icon: <Palette size={28} />, description: 'Visual artwork and illustrations' },\n  { value: 'music', label: 'Music', icon: <Music size={28} />, description: 'Audio tracks and albums', comingSoon: true },\n  { value: 'video', label: 'Film', icon: <Film size={28} />, description: 'Video content and films', comingSoon: true },\n];\n\ntype InviteModalProps = {\n  open: boolean;\n  onClose: () => void;\n  recipient: {\n    id: number;\n    username: string;\n    display_name?: string;\n    avatar_url?: string;\n    status?: string;\n    status_category?: 'green'|'yellow'|'red';\n    roles?: string[];\n    genres?: string[];\n  };\n  // Optional: If provided, this is a project-specific invite\n  projectId?: number;\n  projectTitle?: string;\n  projectType?: ProjectType;\n};\n\n// Dynamic pitch template that includes project title when available\nconst getDefaultPitch = (projectTitle?: string) => {\n  if (projectTitle) {\n    return `Hi! I'd love to collaborate with you on \"${projectTitle}\".\n\n**Project Vision:**\n[Describe your project idea here]\n\n**Your Role:**\n[What you'd like them to contribute]\n\nLooking forward to creating something amazing together!`;\n  }\n  return `Hi! I'd love to collaborate with you on an upcoming project.\n\n**Project Vision:**\n[Describe your project idea here]\n\n**Your Role:**\n[What you'd like them to contribute]\n\nLooking forward to creating something amazing together!`;\n};\n\n// Generate unique ID for tasks\nconst generateId = () => Math.random().toString(36).substr(2, 9);\n\n// Format date for input\nconst getDefaultDeadline = (daysFromNow: number = 14) => {\n  const date = new Date();\n  date.setDate(date.getDate() + daysFromNow);\n  return date.toISOString().slice(0, 16);\n};\n\nexport default function InviteModal({ open, onClose, recipient, projectId, projectTitle, projectType: initialProjectType }: InviteModalProps) {\n  // Custom project title for new collaborations (when no projectId/projectTitle is passed)\n  const [customProjectTitle, setCustomProjectTitle] = useState('');\n\n  // Effective title: use passed projectTitle or custom one\n  const effectiveTitle = projectTitle || customProjectTitle || '';\n\n  const [message, setMessage] = useState(getDefaultPitch(projectTitle));\n  const [equityPercent, setEquityPercent] = useState(50);\n  const [role, setRole] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const [sending, setSending] = useState(false);\n  const [successMsg, setSuccessMsg] = useState('');\n  const [errorMsg, setErrorMsg] = useState('');\n\n  // Project type - required for new collaborations\n  const [projectType, setProjectType] = useState<ProjectType>(initialProjectType || 'book');\n\n  // Role definitions from API\n  const [roleDefinitions, setRoleDefinitions] = useState<RoleDefinition[]>([]);\n  const [selectedRoleId, setSelectedRoleId] = useState<number | null>(null);\n  const [loadingRoles, setLoadingRoles] = useState(false);\n  const [showCustomRole, setShowCustomRole] = useState(false);\n\n  // Contract tasks\n  const [tasks, setTasks] = useState<ContractTask[]>([]);\n  const [showTaskForm, setShowTaskForm] = useState(false);\n\n  // Permissions - defaults based on project type\n  const [canEditText, setCanEditText] = useState(true);\n  const [canEditImages, setCanEditImages] = useState(true);\n  const [canEditAudio, setCanEditAudio] = useState(false);\n  const [canEditVideo, setCanEditVideo] = useState(false);\n\n  // Fetch role definitions when project type changes\n  useEffect(() => {\n    if (!open) return;\n\n    const fetchRoleDefinitions = async () => {\n      setLoadingRoles(true);\n      try {\n        const res = await fetch(`${API_URL}/api/role-definitions/?project_type=${projectType}`, {\n          credentials: 'include',\n        });\n        if (res.ok) {\n          const data = await res.json();\n          setRoleDefinitions(data);\n        }\n      } catch (err) {\n        console.error('Failed to fetch role definitions:', err);\n      } finally {\n        setLoadingRoles(false);\n      }\n    };\n\n    fetchRoleDefinitions();\n  }, [projectType, open]);\n\n  // Update pitch message when custom project title changes (for new collaborations)\n  useEffect(() => {\n    if (!projectId && customProjectTitle) {\n      setMessage(getDefaultPitch(customProjectTitle));\n    } else if (!projectId && !customProjectTitle) {\n      setMessage(getDefaultPitch());\n    }\n  }, [customProjectTitle, projectId]);\n\n  // Handle role selection - auto-populate permissions from role definition\n  const handleRoleSelect = (roleId: number | null) => {\n    setSelectedRoleId(roleId);\n    setShowCustomRole(false);\n\n    if (roleId) {\n      const roleDef = roleDefinitions.find(r => r.id === roleId);\n      if (roleDef) {\n        setRole(roleDef.name);\n        // Auto-populate permissions from role definition\n        const perms = roleDef.default_permissions;\n        const editTypes = perms.edit?.types || [];\n        setCanEditText(editTypes.includes('text') || perms.create?.includes('text'));\n        setCanEditImages(editTypes.includes('image') || perms.create?.includes('image'));\n        setCanEditAudio(editTypes.includes('audio') || perms.create?.includes('audio'));\n        setCanEditVideo(editTypes.includes('video') || perms.create?.includes('video'));\n      }\n    } else {\n      setRole('');\n    }\n  };\n\n  // Handle custom role selection\n  const handleCustomRole = () => {\n    setSelectedRoleId(null);\n    setShowCustomRole(true);\n    setRole('');\n  };\n\n  // Update permissions when project type changes\n  const handleProjectTypeChange = (newType: ProjectType) => {\n    setProjectType(newType);\n    // Reset role selection when project type changes\n    setSelectedRoleId(null);\n    setShowCustomRole(false);\n    setRole('');\n    // Set smart defaults based on project type\n    switch (newType) {\n      case 'book':\n        setCanEditText(true);\n        setCanEditImages(true);\n        setCanEditAudio(false);\n        setCanEditVideo(false);\n        break;\n      case 'art':\n        setCanEditText(false);\n        setCanEditImages(true);\n        setCanEditAudio(false);\n        setCanEditVideo(false);\n        break;\n      case 'music':\n        setCanEditText(false);\n        setCanEditImages(true); // For album art\n        setCanEditAudio(true);\n        setCanEditVideo(false);\n        break;\n      case 'video':\n        setCanEditText(false);\n        setCanEditImages(true); // For thumbnails\n        setCanEditAudio(true);\n        setCanEditVideo(true);\n        break;\n      case 'comic':\n        setCanEditText(true);   // For speech bubbles\n        setCanEditImages(true); // For panel artwork\n        setCanEditAudio(false);\n        setCanEditVideo(false);\n        break;\n    }\n  };\n\n  if (!open) return null;\n\n  const statusColors = {\n    green: { bg: '#10b981', text: '#fff' },\n    yellow: { bg: '#f59e0b', text: '#000' },\n    red: { bg: '#ef4444', text: '#fff' },\n  };\n  const statusColor = statusColors[recipient.status_category || 'green'];\n\n  async function fetchCsrf() {\n    try {\n      const res = await fetch(`${API_URL}/api/auth/csrf/`, { credentials: 'include' });\n      const data = await res.json();\n      return data?.csrfToken || '';\n    } catch {\n      return '';\n    }\n  }\n\n  const addTask = () => {\n    setTasks([...tasks, {\n      id: generateId(),\n      title: '',\n      description: '',\n      deadline: getDefaultDeadline(),\n    }]);\n    setShowTaskForm(true);\n  };\n\n  const updateTask = (id: string, field: keyof ContractTask, value: string) => {\n    setTasks(tasks.map(t => t.id === id ? { ...t, [field]: value } : t));\n  };\n\n  const removeTask = (id: string) => {\n    setTasks(tasks.filter(t => t.id !== id));\n  };\n\n  const handleSend = async () => {\n    setSuccessMsg('');\n    setErrorMsg('');\n\n    // Validate tasks have required fields\n    for (const task of tasks) {\n      if (!task.title.trim()) {\n        setErrorMsg('All tasks must have a title');\n        return;\n      }\n      if (!task.deadline) {\n        setErrorMsg('All tasks must have a deadline');\n        return;\n      }\n    }\n\n    setSending(true);\n\n    try {\n      const csrf = await fetchCsrf();\n\n      // If we have a projectId, use the new collaborative invite endpoint\n      if (projectId) {\n        const res = await fetch(`${API_URL}/api/collaborative-projects/${projectId}/invite_collaborator/`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'X-CSRFToken': csrf,\n            'X-Requested-With': 'XMLHttpRequest',\n          },\n          credentials: 'include',\n          body: JSON.stringify({\n            user_id: recipient.id,\n            role: role || 'Collaborator',\n            role_definition_id: selectedRoleId || undefined,\n            revenue_percentage: equityPercent,\n            can_edit_text: canEditText,\n            can_edit_images: canEditImages,\n            can_edit_audio: canEditAudio,\n            can_edit_video: canEditVideo,\n            tasks: tasks.map(t => ({\n              title: t.title,\n              description: t.description,\n              deadline: new Date(t.deadline).toISOString(),\n            })),\n          }),\n        });\n\n        if (res.ok) {\n          setSuccessMsg(`Invite sent to @${recipient.username}!`);\n          setTimeout(() => {\n            onClose();\n            resetForm();\n          }, 2000);\n        } else {\n          const error = await res.json();\n          setErrorMsg(error.error || 'Failed to send invite');\n        }\n      } else {\n        // Use the old general invite endpoint (enhanced with tasks support)\n        const res = await fetch(`${API_URL}/api/invite/`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'X-CSRFToken': csrf,\n            'X-Requested-With': 'XMLHttpRequest',\n          },\n          credentials: 'include',\n          body: JSON.stringify({\n            message,\n            equity_percent: equityPercent,\n            collaborators: [recipient.id],\n            attachments: '',\n            role: role || 'Collaborator',\n            project_type: projectType,\n            tasks: tasks.map(t => ({\n              title: t.title,\n              description: t.description,\n              deadline: new Date(t.deadline).toISOString(),\n            })),\n          }),\n        });\n\n        if (res.ok) {\n          setSuccessMsg(`Invite sent to @${recipient.username}!`);\n          setTimeout(() => {\n            onClose();\n            resetForm();\n          }, 2000);\n        } else {\n          const error = await res.text();\n          setErrorMsg(`Failed to send invite: ${error}`);\n        }\n      }\n    } catch (err: any) {\n      setErrorMsg(`Error: ${err.message || 'Unknown error'}`);\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const resetForm = () => {\n    setCustomProjectTitle('');\n    setMessage(getDefaultPitch(projectTitle));\n    setEquityPercent(50);\n    setRole('');\n    setSelectedRoleId(null);\n    setShowCustomRole(false);\n    setProjectType(initialProjectType || 'book');\n    setTasks([]);\n    setSuccessMsg('');\n    setErrorMsg('');\n    setCanEditText(true);\n    setCanEditImages(true);\n    setCanEditAudio(false);\n    setCanEditVideo(false);\n  };\n\n  return (\n    <div style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      background: 'rgba(0,0,0,0.85)',\n      display: 'grid',\n      placeItems: 'center',\n      zIndex: 1000,\n      padding: 20,\n    }}>\n      <div\n        className=\"invite-modal-scroll\"\n        style={{\n          background: '#0f172a',\n          border: '1px solid #334155',\n          borderRadius: 16,\n          width: '100%',\n          maxWidth: 1000,\n          maxHeight: '90vh',\n          overflow: 'auto',\n          boxShadow: '0 20px 25px -5px rgba(0,0,0,0.5)',\n        }}\n      >\n        {/* Header */}\n        <div style={{\n          padding: 24,\n          borderBottom: '1px solid #334155',\n          display: 'flex',\n          alignItems: 'center',\n          gap: 16,\n          background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',\n        }}>\n          <div style={{\n            width: 64,\n            height: 64,\n            borderRadius: 12,\n            background: recipient.avatar_url ? `url(${recipient.avatar_url})` : '#1e293b',\n            backgroundSize: 'cover',\n            display: 'grid',\n            placeItems: 'center',\n            color: '#f59e0b',\n            fontWeight: 700,\n            fontSize: 24,\n            border: '2px solid #334155',\n          }}>\n            {!recipient.avatar_url && recipient.username.slice(0, 1).toUpperCase()}\n          </div>\n\n          <div style={{ flex: 1 }}>\n            <div style={{ display: 'flex', alignItems: 'center', gap: 12, marginBottom: 4 }}>\n              <span style={{ color: '#f8fafc', fontWeight: 600, fontSize: 20 }}>@{recipient.username}</span>\n              {recipient.status && (\n                <div style={{\n                  background: statusColor.bg,\n                  color: statusColor.text,\n                  fontSize: 10,\n                  fontWeight: 600,\n                  padding: '4px 10px',\n                  borderRadius: 4,\n                  letterSpacing: 0.3,\n                }}>\n                  {recipient.status}\n                </div>\n              )}\n            </div>\n            {recipient.display_name && (\n              <div style={{ color: '#cbd5e1', fontSize: 14, marginBottom: 8 }}>{recipient.display_name}</div>\n            )}\n            {projectTitle && (\n              <div style={{ color: '#f59e0b', fontSize: 12, fontWeight: 600 }}>\n                Inviting to: {projectTitle}\n              </div>\n            )}\n            {/* Capabilities badges */}\n            <div style={{ display: 'flex', flexWrap: 'wrap', gap: 6, marginTop: 8 }}>\n              {recipient.roles?.map((r, i) => (\n                <span key={`r-${i}`} style={{\n                  background: 'rgba(245,158,11,0.15)',\n                  color: '#f59e0b',\n                  fontSize: 10,\n                  fontWeight: 600,\n                  padding: '2px 6px',\n                  borderRadius: 3,\n                  border: '1px solid rgba(245,158,11,0.4)',\n                }}>\n                  {r}\n                </span>\n              ))}\n              {recipient.genres?.map((g, i) => (\n                <span key={`g-${i}`} style={{\n                  background: 'rgba(59,130,246,0.15)',\n                  color: '#3b82f6',\n                  fontSize: 10,\n                  fontWeight: 600,\n                  padding: '2px 6px',\n                  borderRadius: 3,\n                  border: '1px solid rgba(59,130,246,0.4)',\n                }}>\n                  {g}\n                </span>\n              ))}\n            </div>\n          </div>\n\n          <button\n            onClick={onClose}\n            style={{\n              background: 'transparent',\n              border: 'none',\n              color: '#94a3b8',\n              fontSize: 24,\n              cursor: 'pointer',\n              padding: 8,\n            }}\n          >\n            ×\n          </button>\n        </div>\n\n        {/* Project Context Banner */}\n        {effectiveTitle && (\n          <div style={{\n            padding: '16px 24px',\n            background: 'linear-gradient(90deg, rgba(245,158,11,0.1) 0%, rgba(245,158,11,0.05) 100%)',\n            borderBottom: '1px solid rgba(245,158,11,0.2)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 12,\n          }}>\n            <div style={{\n              width: 40,\n              height: 40,\n              borderRadius: 8,\n              background: 'rgba(245,158,11,0.15)',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              color: '#f59e0b',\n            }}>\n              <BookOpen size={20} />\n            </div>\n            <div>\n              <div style={{ color: '#94a3b8', fontSize: 11, textTransform: 'uppercase', letterSpacing: 0.5 }}>\n                Project\n              </div>\n              <div style={{ color: '#f8fafc', fontSize: 16, fontWeight: 600 }}>\n                {effectiveTitle}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Form */}\n        <div style={{ padding: 24, display: 'grid', gap: 20 }}>\n          {/* Project Title Input - for new collaborations (first field) */}\n          {!projectId && (\n            <div>\n              <label style={{ display: 'block', color: '#cbd5e1', fontSize: 13, fontWeight: 600, marginBottom: 8 }}>\n                Project Title <span style={{ color: '#ef4444' }}>*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={customProjectTitle}\n                onChange={(e) => setCustomProjectTitle(e.target.value)}\n                placeholder=\"Enter a title for your project...\"\n                style={{\n                  width: '100%',\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  padding: 12,\n                  color: '#f8fafc',\n                  fontSize: 14,\n                }}\n              />\n              <div style={{ fontSize: 11, color: '#64748b', marginTop: 4 }}>\n                Give your project a name that describes what you're creating together\n              </div>\n            </div>\n          )}\n\n          {/* Project Type Selector - REQUIRED for new collaborations */}\n          {!projectId && (\n            <div>\n              <label style={{ display: 'block', color: '#cbd5e1', fontSize: 13, fontWeight: 600, marginBottom: 12 }}>\n                Project Type <span style={{ color: '#ef4444' }}>*</span>\n              </label>\n              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: 12 }}>\n                {PROJECT_TYPE_OPTIONS.map((option) => (\n                  <button\n                    key={option.value}\n                    type=\"button\"\n                    onClick={() => !option.comingSoon && handleProjectTypeChange(option.value)}\n                    disabled={option.comingSoon}\n                    style={{\n                      background: option.comingSoon\n                        ? '#1e293b'\n                        : projectType === option.value\n                          ? 'rgba(245,158,11,0.15)'\n                          : '#1e293b',\n                      border: `2px solid ${option.comingSoon ? '#334155' : projectType === option.value ? '#f59e0b' : '#334155'}`,\n                      borderRadius: 12,\n                      padding: 16,\n                      cursor: option.comingSoon ? 'not-allowed' : 'pointer',\n                      display: 'flex',\n                      flexDirection: 'column',\n                      alignItems: 'center',\n                      gap: 8,\n                      transition: 'all 0.2s ease',\n                      opacity: option.comingSoon ? 0.5 : 1,\n                      position: 'relative',\n                    }}\n                  >\n                    {option.comingSoon && (\n                      <span style={{\n                        position: 'absolute',\n                        top: 6,\n                        right: 6,\n                        background: '#f59e0b',\n                        color: '#000',\n                        fontSize: 8,\n                        fontWeight: 700,\n                        padding: '2px 4px',\n                        borderRadius: 3,\n                      }}>\n                        SOON\n                      </span>\n                    )}\n                    <span style={{ color: option.comingSoon ? '#64748b' : projectType === option.value ? '#f59e0b' : '#94a3b8' }}>\n                      {option.icon}\n                    </span>\n                    <span style={{\n                      color: option.comingSoon ? '#64748b' : projectType === option.value ? '#f59e0b' : '#f8fafc',\n                      fontSize: 14,\n                      fontWeight: 600\n                    }}>\n                      {option.label}\n                    </span>\n                    <span style={{\n                      color: '#64748b',\n                      fontSize: 11,\n                      textAlign: 'center',\n                      lineHeight: 1.3\n                    }}>\n                      {option.description}\n                    </span>\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Role Selection */}\n          <div>\n            <label style={{ display: 'block', color: '#cbd5e1', fontSize: 13, fontWeight: 600, marginBottom: 12 }}>\n              Their Role <span style={{ color: '#ef4444' }}>*</span>\n            </label>\n\n            {loadingRoles ? (\n              <div style={{ color: '#64748b', fontSize: 13, padding: 12 }}>\n                Loading roles...\n              </div>\n            ) : (\n              <>\n                {/* Role cards grid */}\n                <div style={{\n                  display: 'grid',\n                  gridTemplateColumns: 'repeat(auto-fill, minmax(140px, 1fr))',\n                  gap: 10,\n                  marginBottom: 12,\n                }}>\n                  {roleDefinitions.map((roleDef) => (\n                    <button\n                      key={roleDef.id}\n                      type=\"button\"\n                      onClick={() => handleRoleSelect(roleDef.id)}\n                      style={{\n                        background: selectedRoleId === roleDef.id ? 'rgba(245,158,11,0.15)' : '#1e293b',\n                        border: `2px solid ${selectedRoleId === roleDef.id ? '#f59e0b' : '#334155'}`,\n                        borderRadius: 10,\n                        padding: '12px 10px',\n                        cursor: 'pointer',\n                        display: 'flex',\n                        flexDirection: 'column',\n                        alignItems: 'center',\n                        gap: 6,\n                        transition: 'all 0.2s ease',\n                        position: 'relative',\n                      }}\n                    >\n                      {selectedRoleId === roleDef.id && (\n                        <div style={{\n                          position: 'absolute',\n                          top: 6,\n                          right: 6,\n                          background: '#f59e0b',\n                          borderRadius: '50%',\n                          width: 16,\n                          height: 16,\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                        }}>\n                          <Check size={10} color=\"#000\" strokeWidth={3} />\n                        </div>\n                      )}\n                      <div style={{\n                        width: 36,\n                        height: 36,\n                        borderRadius: 8,\n                        background: `${roleDef.color}20`,\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        color: roleDef.color,\n                      }}>\n                        <RoleIcon icon={roleDef.icon} size={20} />\n                      </div>\n                      <span style={{\n                        color: selectedRoleId === roleDef.id ? '#f59e0b' : '#f8fafc',\n                        fontSize: 12,\n                        fontWeight: 600,\n                        textAlign: 'center',\n                      }}>\n                        {roleDef.name}\n                      </span>\n                      <span style={{\n                        color: '#64748b',\n                        fontSize: 9,\n                        textAlign: 'center',\n                        lineHeight: 1.2,\n                        display: '-webkit-box',\n                        WebkitLineClamp: 2,\n                        WebkitBoxOrient: 'vertical',\n                        overflow: 'hidden',\n                      }}>\n                        {roleDef.description.slice(0, 50)}{roleDef.description.length > 50 ? '...' : ''}\n                      </span>\n                    </button>\n                  ))}\n\n                  {/* Custom role option */}\n                  <button\n                    type=\"button\"\n                    onClick={handleCustomRole}\n                    style={{\n                      background: showCustomRole ? 'rgba(245,158,11,0.15)' : '#1e293b',\n                      border: `2px solid ${showCustomRole ? '#f59e0b' : '#334155'}`,\n                      borderRadius: 10,\n                      padding: '12px 10px',\n                      cursor: 'pointer',\n                      display: 'flex',\n                      flexDirection: 'column',\n                      alignItems: 'center',\n                      gap: 6,\n                      transition: 'all 0.2s ease',\n                    }}\n                  >\n                    <div style={{\n                      width: 36,\n                      height: 36,\n                      borderRadius: 8,\n                      background: 'rgba(148, 163, 184, 0.2)',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      color: '#94a3b8',\n                    }}>\n                      <Plus size={20} strokeWidth={1.5} />\n                    </div>\n                    <span style={{\n                      color: showCustomRole ? '#f59e0b' : '#94a3b8',\n                      fontSize: 12,\n                      fontWeight: 600,\n                    }}>\n                      Custom Role\n                    </span>\n                    <span style={{\n                      color: '#64748b',\n                      fontSize: 9,\n                      textAlign: 'center',\n                    }}>\n                      Define your own\n                    </span>\n                  </button>\n                </div>\n\n                {/* Custom role input (shown when custom role is selected) */}\n                {showCustomRole && (\n                  <input\n                    type=\"text\"\n                    value={role}\n                    onChange={(e) => setRole(e.target.value)}\n                    placeholder=\"Enter custom role name...\"\n                    style={{\n                      width: '100%',\n                      background: '#1e293b',\n                      border: '1px solid #f59e0b',\n                      borderRadius: 8,\n                      padding: 12,\n                      color: '#f8fafc',\n                      fontSize: 14,\n                    }}\n                  />\n                )}\n\n                {/* Selected role info */}\n                {selectedRoleId && !showCustomRole && (\n                  <div style={{\n                    background: 'rgba(245,158,11,0.1)',\n                    border: '1px solid rgba(245,158,11,0.3)',\n                    borderRadius: 8,\n                    padding: 12,\n                  }}>\n                    {(() => {\n                      const selectedRole = roleDefinitions.find(r => r.id === selectedRoleId);\n                      if (!selectedRole) return null;\n                      return (\n                        <>\n                          <div style={{ color: '#f59e0b', fontSize: 13, fontWeight: 600, marginBottom: 4 }}>\n                            {selectedRole.name}\n                          </div>\n                          <div style={{ color: '#94a3b8', fontSize: 12, marginBottom: 8 }}>\n                            {selectedRole.description}\n                          </div>\n                          <div style={{ display: 'flex', flexWrap: 'wrap', gap: 6 }}>\n                            {selectedRole.default_permissions.create?.length > 0 && (\n                              <span style={{\n                                background: 'rgba(16,185,129,0.15)',\n                                color: '#10b981',\n                                fontSize: 10,\n                                padding: '2px 8px',\n                                borderRadius: 4,\n                              }}>\n                                Can create: {selectedRole.default_permissions.create.join(', ')}\n                              </span>\n                            )}\n                            {selectedRole.default_permissions.edit?.types?.length > 0 && (\n                              <span style={{\n                                background: 'rgba(59,130,246,0.15)',\n                                color: '#3b82f6',\n                                fontSize: 10,\n                                padding: '2px 8px',\n                                borderRadius: 4,\n                              }}>\n                                Can edit: {selectedRole.default_permissions.edit.types.join(', ')} ({selectedRole.default_permissions.edit.scope})\n                              </span>\n                            )}\n                            {selectedRole.default_permissions.review?.length > 0 && (\n                              <span style={{\n                                background: 'rgba(168,85,247,0.15)',\n                                color: '#a855f7',\n                                fontSize: 10,\n                                padding: '2px 8px',\n                                borderRadius: 4,\n                              }}>\n                                Can review: {selectedRole.default_permissions.review.join(', ')}\n                              </span>\n                            )}\n                          </div>\n                        </>\n                      );\n                    })()}\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n\n          {/* Project Pitch */}\n          <div>\n            <label style={{ display: 'block', color: '#cbd5e1', fontSize: 13, fontWeight: 600, marginBottom: 8 }}>\n              Project Pitch\n            </label>\n            <textarea\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              placeholder=\"Describe your project and what you're looking for...\"\n              style={{\n                width: '100%',\n                minHeight: 150,\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: 12,\n                color: '#f8fafc',\n                fontSize: 14,\n                fontFamily: 'inherit',\n                resize: 'vertical',\n              }}\n            />\n            <div style={{ fontSize: 11, color: '#64748b', marginTop: 4 }}>\n              {message.length}/1000 characters\n            </div>\n          </div>\n\n          {/* Contract Tasks Section */}\n          <div style={{\n            background: '#1e293b',\n            border: '1px solid #334155',\n            borderRadius: 12,\n            padding: 20,\n          }}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 16 }}>\n              <div>\n                <div style={{ color: '#f8fafc', fontSize: 15, fontWeight: 600 }}>\n                  Contract Tasks\n                </div>\n                <div style={{ color: '#94a3b8', fontSize: 12, marginTop: 2 }}>\n                  Define specific deliverables with deadlines. These become binding after acceptance.\n                </div>\n              </div>\n              <button\n                onClick={addTask}\n                style={{\n                  background: 'rgba(245,158,11,0.15)',\n                  border: '1px solid #f59e0b',\n                  color: '#f59e0b',\n                  padding: '8px 16px',\n                  borderRadius: 8,\n                  fontWeight: 600,\n                  cursor: 'pointer',\n                  fontSize: 13,\n                }}\n              >\n                + Add Task\n              </button>\n            </div>\n\n            {tasks.length === 0 ? (\n              <div style={{\n                padding: 24,\n                textAlign: 'center',\n                color: '#64748b',\n                fontSize: 13,\n                border: '1px dashed #334155',\n                borderRadius: 8,\n              }}>\n                No tasks defined yet. Add tasks to create a concrete contract.\n              </div>\n            ) : (\n              <div style={{ display: 'flex', flexDirection: 'column', gap: 12 }}>\n                {tasks.map((task, index) => (\n                  <div key={task.id} style={{\n                    background: '#0f172a',\n                    border: '1px solid #334155',\n                    borderRadius: 8,\n                    padding: 16,\n                  }}>\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', gap: 12 }}>\n                      <div style={{ flex: 1, display: 'grid', gap: 12 }}>\n                        <div style={{ display: 'flex', gap: 12 }}>\n                          <div style={{ flex: 2 }}>\n                            <label style={{ display: 'block', color: '#94a3b8', fontSize: 11, marginBottom: 4 }}>\n                              Task {index + 1}: Title *\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={task.title}\n                              onChange={(e) => updateTask(task.id, 'title', e.target.value)}\n                              placeholder=\"e.g., Character designs for Chapter 1\"\n                              style={{\n                                width: '100%',\n                                background: '#1e293b',\n                                border: '1px solid #334155',\n                                borderRadius: 6,\n                                padding: 10,\n                                color: '#f8fafc',\n                                fontSize: 13,\n                              }}\n                            />\n                          </div>\n                          <div style={{ flex: 1 }}>\n                            <label style={{ display: 'block', color: '#94a3b8', fontSize: 11, marginBottom: 4 }}>\n                              Deadline *\n                            </label>\n                            <input\n                              type=\"datetime-local\"\n                              value={task.deadline}\n                              onChange={(e) => updateTask(task.id, 'deadline', e.target.value)}\n                              style={{\n                                width: '100%',\n                                background: '#1e293b',\n                                border: '1px solid #334155',\n                                borderRadius: 6,\n                                padding: 10,\n                                color: '#f8fafc',\n                                fontSize: 13,\n                              }}\n                            />\n                          </div>\n                        </div>\n                        <div>\n                          <label style={{ display: 'block', color: '#94a3b8', fontSize: 11, marginBottom: 4 }}>\n                            Description (optional)\n                          </label>\n                          <textarea\n                            value={task.description}\n                            onChange={(e) => updateTask(task.id, 'description', e.target.value)}\n                            placeholder=\"Detailed requirements, expectations, or notes...\"\n                            rows={2}\n                            style={{\n                              width: '100%',\n                              background: '#1e293b',\n                              border: '1px solid #334155',\n                              borderRadius: 6,\n                              padding: 10,\n                              color: '#f8fafc',\n                              fontSize: 13,\n                              fontFamily: 'inherit',\n                              resize: 'vertical',\n                            }}\n                          />\n                        </div>\n                      </div>\n                      <button\n                        onClick={() => removeTask(task.id)}\n                        style={{\n                          background: 'transparent',\n                          border: 'none',\n                          color: '#ef4444',\n                          fontSize: 18,\n                          cursor: 'pointer',\n                          padding: 4,\n                        }}\n                      >\n                        ×\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {tasks.length > 0 && (\n              <div style={{\n                marginTop: 16,\n                padding: 12,\n                background: 'rgba(245,158,11,0.1)',\n                borderRadius: 8,\n                display: 'flex',\n                alignItems: 'center',\n                gap: 8,\n              }}>\n                <span style={{ fontSize: 16 }}>⚠️</span>\n                <span style={{ color: '#f59e0b', fontSize: 12 }}>\n                  Tasks become immutable after the collaborator accepts. Changes require mutual agreement.\n                </span>\n              </div>\n            )}\n          </div>\n\n          {/* Permissions */}\n          {projectId && (\n            <div>\n              <label style={{ display: 'block', color: '#cbd5e1', fontSize: 13, fontWeight: 600, marginBottom: 12 }}>\n                Editing Permissions\n              </label>\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: 12 }}>\n                {[\n                  { key: 'text', label: 'Text', value: canEditText, setter: setCanEditText },\n                  { key: 'images', label: 'Images', value: canEditImages, setter: setCanEditImages },\n                  { key: 'audio', label: 'Audio', value: canEditAudio, setter: setCanEditAudio },\n                  { key: 'video', label: 'Video', value: canEditVideo, setter: setCanEditVideo },\n                ].map(perm => (\n                  <label key={perm.key} style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 8,\n                    padding: '8px 16px',\n                    background: perm.value ? 'rgba(16,185,129,0.15)' : '#1e293b',\n                    border: `1px solid ${perm.value ? '#10b981' : '#334155'}`,\n                    borderRadius: 8,\n                    cursor: 'pointer',\n                  }}>\n                    <input\n                      type=\"checkbox\"\n                      checked={perm.value}\n                      onChange={(e) => perm.setter(e.target.checked)}\n                      style={{ accentColor: '#10b981' }}\n                    />\n                    <span style={{ color: perm.value ? '#10b981' : '#94a3b8', fontSize: 13 }}>\n                      {perm.label}\n                    </span>\n                  </label>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Equity Slider */}\n          <div>\n            <label style={{ display: 'block', color: '#cbd5e1', fontSize: 13, fontWeight: 600, marginBottom: 8 }}>\n              Revenue Split for @{recipient.username}: {equityPercent}%\n            </label>\n            <input\n              type=\"range\"\n              min={0}\n              max={100}\n              step={5}\n              value={equityPercent}\n              onChange={(e) => setEquityPercent(parseInt(e.target.value))}\n              style={{ width: '100%' }}\n            />\n            <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: 11, color: '#64748b', marginTop: 4 }}>\n              <span>You keep: {100 - equityPercent}%</span>\n              <span>They get: {equityPercent}%</span>\n            </div>\n          </div>\n\n          {/* Preview Pane */}\n          <div style={{\n            background: '#1e293b',\n            border: '1px solid #334155',\n            borderRadius: 8,\n            padding: 16,\n          }}>\n            <div style={{ color: '#94a3b8', fontSize: 12, fontWeight: 600, marginBottom: 12, textTransform: 'uppercase', letterSpacing: 0.5 }}>\n              Preview\n            </div>\n\n            {/* Project Title in Preview */}\n            {effectiveTitle && (\n              <div style={{\n                marginBottom: 12,\n                paddingBottom: 12,\n                borderBottom: '1px solid #334155',\n              }}>\n                <div style={{ color: '#f59e0b', fontSize: 11, fontWeight: 600, marginBottom: 4, textTransform: 'uppercase', letterSpacing: 0.5 }}>\n                  Project\n                </div>\n                <div style={{ color: '#f8fafc', fontSize: 15, fontWeight: 600 }}>\n                  {effectiveTitle}\n                </div>\n              </div>\n            )}\n\n            <div style={{ color: '#cbd5e1', fontSize: 13, whiteSpace: 'pre-wrap', lineHeight: 1.6 }}>\n              {message || '(Your pitch will appear here)'}\n            </div>\n\n            {/* Tasks Preview */}\n            {tasks.length > 0 && (\n              <div style={{ marginTop: 16, paddingTop: 16, borderTop: '1px solid #334155' }}>\n                <div style={{ fontSize: 12, color: '#f59e0b', fontWeight: 600, marginBottom: 8 }}>\n                  Contract Tasks ({tasks.length})\n                </div>\n                {tasks.map((task, i) => (\n                  <div key={task.id} style={{\n                    padding: 10,\n                    background: '#0f172a',\n                    borderRadius: 6,\n                    marginBottom: 8,\n                    borderLeft: '3px solid #f59e0b',\n                  }}>\n                    <div style={{ color: '#f8fafc', fontSize: 13, fontWeight: 600 }}>{task.title || '(Untitled)'}</div>\n                    {task.description && (\n                      <div style={{ color: '#94a3b8', fontSize: 12, marginTop: 4 }}>{task.description}</div>\n                    )}\n                    <div style={{ color: '#f59e0b', fontSize: 11, marginTop: 6 }}>\n                      Due: {task.deadline ? new Date(task.deadline).toLocaleDateString() : '(No deadline)'}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            <div style={{ marginTop: 16, paddingTop: 16, borderTop: '1px solid #334155' }}>\n              <div style={{ fontSize: 12, color: '#94a3b8' }}>Revenue Split</div>\n              <div style={{ display: 'flex', gap: 12, marginTop: 8 }}>\n                <div style={{\n                  flex: 100 - equityPercent,\n                  background: '#334155',\n                  height: 32,\n                  borderRadius: 6,\n                  display: 'grid',\n                  placeItems: 'center',\n                  color: '#cbd5e1',\n                  fontSize: 12,\n                  fontWeight: 600,\n                }}>\n                  You: {100 - equityPercent}%\n                </div>\n                <div style={{\n                  flex: equityPercent,\n                  background: '#f59e0b',\n                  height: 32,\n                  borderRadius: 6,\n                  display: 'grid',\n                  placeItems: 'center',\n                  color: '#000',\n                  fontSize: 12,\n                  fontWeight: 600,\n                }}>\n                  @{recipient.username}: {equityPercent}%\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Success/Error Messages */}\n          {successMsg && (\n            <div style={{\n              background: 'rgba(16,185,129,0.1)',\n              border: '1px solid #10b981',\n              color: '#10b981',\n              padding: 12,\n              borderRadius: 8,\n              fontSize: 13,\n            }}>\n              {successMsg}\n            </div>\n          )}\n          {errorMsg && (\n            <div style={{\n              background: 'rgba(239,68,68,0.1)',\n              border: '1px solid #ef4444',\n              color: '#ef4444',\n              padding: 12,\n              borderRadius: 8,\n              fontSize: 13,\n            }}>\n              {errorMsg}\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div style={{ display: 'flex', gap: 12, justifyContent: 'flex-end' }}>\n            <button\n              onClick={onClose}\n              style={{\n                background: 'transparent',\n                border: '1px solid #334155',\n                color: '#cbd5e1',\n                padding: '10px 20px',\n                borderRadius: 8,\n                fontWeight: 600,\n                cursor: 'pointer',\n              }}\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleSend}\n              disabled={sending || !message.trim() || message.length > 1000}\n              style={{\n                background: sending ? '#64748b' : '#f59e0b',\n                color: '#000',\n                border: 'none',\n                padding: '10px 24px',\n                borderRadius: 8,\n                fontWeight: 700,\n                cursor: sending ? 'not-allowed' : 'pointer',\n                opacity: (!message.trim() || message.length > 1000) ? 0.5 : 1,\n              }}\n            >\n              {sending ? 'Sending...' : 'Send Invite'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["Award","createLucideIcon","d","key","cx","cy","r","Brush","CirclePlay","LayoutGrid","width","height","x","y","rx","Mic","MicVocal","PaintBucket","PenTool","Scissors","SlidersVertical","Volume2","RoleIcon","icon","size","iconProps","strokeWidth","Pen","Users","Palette","Image","CheckCircle","FileText","Mic2","Eye","Music","Sliders","Film","Video","PlayCircle","Briefcase","Type","User","PROJECT_TYPE_OPTIONS","value","label","jsx","BookOpen","description","comingSoon","getDefaultPitch","projectTitle","getDefaultDeadline","daysFromNow","date","Date","setDate","getDate","toISOString","slice","InviteModal","open","onClose","recipient","projectId","projectType","initialProjectType","customProjectTitle","setCustomProjectTitle","useState","effectiveTitle","message","setMessage","equityPercent","setEquityPercent","role","setRole","uploading","setUploading","sending","setSending","successMsg","setSuccessMsg","errorMsg","setErrorMsg","setProjectType","roleDefinitions","setRoleDefinitions","selectedRoleId","setSelectedRoleId","loadingRoles","setLoadingRoles","showCustomRole","setShowCustomRole","tasks","setTasks","showTaskForm","setShowTaskForm","canEditText","setCanEditText","canEditImages","setCanEditImages","canEditAudio","setCanEditAudio","canEditVideo","setCanEditVideo","useEffect","async","res","fetch","API_URL","credentials","ok","data","json","err","fetchRoleDefinitions","statusColor","green","bg","text","yellow","red","status_category","updateTask","id","field","map","t","resetForm","style","position","top","left","right","bottom","background","display","placeItems","zIndex","padding","children","jsxs","className","border","borderRadius","maxWidth","maxHeight","overflow","boxShadow","borderBottom","alignItems","gap","avatar_url","backgroundSize","color","fontWeight","fontSize","username","toUpperCase","flex","marginBottom","status","letterSpacing","display_name","flexWrap","marginTop","_a","roles","i","_b","genres","g","onClick","cursor","justifyContent","textTransform","type","onChange","e","target","placeholder","gridTemplateColumns","option","newType","handleProjectTypeChange","disabled","flexDirection","transition","opacity","textAlign","lineHeight","Fragment","roleDef","roleId","find","name","perms","default_permissions","editTypes","edit","types","includes","create","_c","_d","_e","handleRoleSelect","Check","WebkitLineClamp","WebkitBoxOrient","length","Plus","selectedRole","join","scope","review","minHeight","fontFamily","resize","Math","random","toString","substr","title","deadline","task","index","rows","removeTask","filter","setter","perm","checked","accentColor","min","max","step","parseInt","paddingBottom","whiteSpace","paddingTop","borderTop","borderLeft","toLocaleDateString","trim","csrf","csrfToken","fetchCsrf","method","headers","body","JSON","stringify","user_id","role_definition_id","revenue_percentage","can_edit_text","can_edit_images","can_edit_audio","can_edit_video","setTimeout","error","equity_percent","collaborators","attachments","project_type"],"mappings":";;;;;;GASA,MAUMA,EAAQC,EAAiB,QAVZ,CACjB,CACE,OACA,CACEC,EAAG,yHACHC,IAAK,WAGT,CAAC,SAAU,CAAEC,GAAI,KAAMC,GAAI,IAAKC,EAAG,IAAKH,IAAK,aCAzCI,EAAQN,EAAiB,QARZ,CACjB,CAAC,OAAQ,CAAEC,EAAG,aAAcC,IAAK,WACjC,CACE,OACA,CAAED,EAAG,0EAA2EC,IAAK,WAEvF,CAAC,OAAQ,CAAED,EAAG,gEAAiEC,IAAK,aCIhFK,EAAaP,EAAiB,cAVjB,CACjB,CACE,OACA,CACEC,EAAG,+FACHC,IAAK,WAGT,CAAC,SAAU,CAAEC,GAAI,KAAMC,GAAI,KAAMC,EAAG,KAAMH,IAAK,aCF3CM,EAAaR,EAAiB,cANjB,CACjB,CAAC,OAAQ,CAAES,MAAO,IAAKC,OAAQ,IAAKC,EAAG,IAAKC,EAAG,IAAKC,GAAI,IAAKX,IAAK,WAClE,CAAC,OAAQ,CAAEO,MAAO,IAAKC,OAAQ,IAAKC,EAAG,KAAMC,EAAG,IAAKC,GAAI,IAAKX,IAAK,WACnE,CAAC,OAAQ,CAAEO,MAAO,IAAKC,OAAQ,IAAKC,EAAG,KAAMC,EAAG,KAAMC,GAAI,IAAKX,IAAK,WACpE,CAAC,OAAQ,CAAEO,MAAO,IAAKC,OAAQ,IAAKC,EAAG,IAAKC,EAAG,KAAMC,GAAI,IAAKX,IAAK,aCC/DY,EAAMd,EAAiB,MALV,CACjB,CAAC,OAAQ,CAAEC,EAAG,WAAYC,IAAK,WAC/B,CAAC,OAAQ,CAAED,EAAG,6BAA8BC,IAAK,WACjD,CAAC,OAAQ,CAAES,EAAG,IAAKC,EAAG,IAAKH,MAAO,IAAKC,OAAQ,KAAMG,GAAI,IAAKX,IAAK,aCc/Da,EAAWf,EAAiB,YAjBf,CACjB,CACE,OACA,CACEC,EAAG,gFACHC,IAAK,WAGT,CACE,OACA,CACED,EAAG,iGACHC,IAAK,WAGT,CAAC,SAAU,CAAEC,GAAI,KAAMC,GAAI,IAAKC,EAAG,IAAKH,IAAK,aCNzCc,EAAchB,EAAiB,eATlB,CACjB,CACE,OACA,CAAEC,EAAG,oEAAqEC,IAAK,WAEjF,CAAC,OAAQ,CAAED,EAAG,WAAYC,IAAK,WAC/B,CAAC,OAAQ,CAAED,EAAG,WAAYC,IAAK,WAC/B,CAAC,OAAQ,CAAED,EAAG,2DAA4DC,IAAK,aCW3Ee,EAAUjB,EAAiB,WAlBd,CACjB,CACE,OACA,CACEC,EAAG,+HACHC,IAAK,WAGT,CACE,OACA,CACED,EAAG,gHACHC,IAAK,WAGT,CAAC,OAAQ,CAAED,EAAG,uBAAwBC,IAAK,WAC3C,CAAC,SAAU,CAAEC,GAAI,KAAMC,GAAI,KAAMC,EAAG,IAAKH,IAAK,aCT1CgB,EAAWlB,EAAiB,WAPf,CACjB,CAAC,SAAU,CAAEG,GAAI,IAAKC,GAAI,IAAKC,EAAG,IAAKH,IAAK,WAC5C,CAAC,OAAQ,CAAED,EAAG,mBAAoBC,IAAK,WACvC,CAAC,OAAQ,CAAED,EAAG,mBAAoBC,IAAK,WACvC,CAAC,SAAU,CAAEC,GAAI,IAAKC,GAAI,KAAMC,EAAG,IAAKH,IAAK,WAC7C,CAAC,OAAQ,CAAED,EAAG,mBAAoBC,IAAK,aCMnCiB,EAAkBnB,EAAiB,mBAXtB,CACjB,CAAC,OAAQ,CAAEC,EAAG,UAAWC,IAAK,WAC9B,CAAC,OAAQ,CAAED,EAAG,YAAaC,IAAK,WAChC,CAAC,OAAQ,CAAED,EAAG,UAAWC,IAAK,WAC9B,CAAC,OAAQ,CAAED,EAAG,WAAYC,IAAK,WAC/B,CAAC,OAAQ,CAAED,EAAG,WAAYC,IAAK,WAC/B,CAAC,OAAQ,CAAED,EAAG,YAAaC,IAAK,WAChC,CAAC,OAAQ,CAAED,EAAG,UAAWC,IAAK,WAC9B,CAAC,OAAQ,CAAED,EAAG,UAAWC,IAAK,WAC9B,CAAC,OAAQ,CAAED,EAAG,WAAYC,IAAK,aCE3BkB,EAAUpB,EAAiB,WAXd,CACjB,CACE,OACA,CACEC,EAAG,2KACHC,IAAK,WAGT,CAAC,OAAQ,CAAED,EAAG,sBAAuBC,IAAK,WAC1C,CAAC,OAAQ,CAAED,EAAG,oCAAqCC,IAAK,aCRpDmB,EAAW,EAAGC,OAAMC,OAAO,OAC/B,MAAMC,EAAY,CAAED,OAAME,YAAa,KACvC,OAAQH,GACN,IAAK,MAAO,aAAQI,EAAA,IAAQF,IAC5B,IAAK,QAAS,aAAQG,EAAA,IAAUH,IAChC,IAAK,UAAW,aAAQI,EAAA,IAAYJ,IACpC,IAAK,QAAS,aAAQK,EAAA,IAAUL,IAChC,IAAK,eAAgB,aAAQM,EAAA,IAAgBN,IAC7C,IAAK,cAQL,IAAK,YAAa,aAAQO,EAAA,IAAaP,IAPvC,IAAK,aAAc,aAAQQ,EAAA,IAASR,IACpC,IAAK,QAAS,aAAQlB,EAAA,IAAUkB,IAChC,IAAK,cAAe,aAAQR,EAAA,IAAgBQ,IAC5C,IAAK,MAAO,aAAQS,EAAA,IAAQT,IAC5B,IAAK,QAAS,aAAQU,EAAA,IAAUV,IAChC,IAAK,UAAW,aAAQW,EAAA,IAAYX,IACpC,IAAK,MAAO,aAAQV,EAAA,IAAQU,IAE5B,IAAK,WAAY,aAAQJ,EAAA,IAAYI,IACrC,IAAK,OAAQ,aAAQY,EAAA,IAASZ,IAC9B,IAAK,QAAS,aAAQa,EAAA,IAAUb,IAChC,IAAK,WAAY,aAAQN,EAAA,IAAaM,IACtC,IAAK,cAAe,aAAQc,EAAA,IAAed,IAC3C,IAAK,YAAa,aAAQe,EAAA,IAAcf,IACxC,IAAK,OAAQ,aAAQgB,EAAA,IAAShB,IAC9B,IAAK,WAAY,aAAQP,EAAA,IAAYO,IACrC,QAAS,aAAQiB,EAAA,IAASjB,MAoCxBkB,EAAkI,CACtI,CAAEC,MAAO,OAAQC,MAAO,OAAQtB,KAAMuB,EAAAA,IAACC,EAAA,CAASvB,KAAM,KAAQwB,YAAa,iCAC3E,CAAEJ,MAAO,QAASC,MAAO,QAAStB,KAAMuB,EAAAA,IAACrC,EAAA,CAAWe,KAAM,KAAQwB,YAAa,2BAC/E,CAAEJ,MAAO,MAAOC,MAAO,MAAOtB,KAAMuB,EAAAA,IAACjB,EAAA,CAAQL,KAAM,KAAQwB,YAAa,oCACxE,CAAEJ,MAAO,QAASC,MAAO,QAAStB,KAAMuB,EAAAA,IAACX,EAAA,CAAMX,KAAM,KAAQwB,YAAa,0BAA2BC,YAAY,GACjH,CAAEL,MAAO,QAASC,MAAO,OAAQtB,KAAMuB,EAAAA,IAACT,EAAA,CAAKb,KAAM,KAAQwB,YAAa,0BAA2BC,YAAY,IAuB3GC,EAAmBC,GACnBA,EACK,4CAA4CA,mLAU9C,4OAeHC,EAAqB,CAACC,EAAsB,MAChD,MAAMC,MAAWC,KAEjB,OADAD,EAAKE,QAAQF,EAAKG,UAAYJ,GACvBC,EAAKI,cAAcC,MAAM,EAAG,KAGrC,SAAwBC,GAAYC,KAAEA,EAAAC,QAAMA,EAAAC,UAASA,YAAWC,EAAAb,aAAWA,EAAcc,YAAaC,YAEpG,MAAOC,EAAoBC,GAAyBC,EAAAA,SAAS,IAGvDC,EAAiBnB,GAAgBgB,GAAsB,IAEtDI,EAASC,GAAcH,EAAAA,SAASnB,EAAgBC,KAChDsB,EAAeC,GAAoBL,EAAAA,SAAS,KAC5CM,EAAMC,GAAWP,EAAAA,SAAS,KAC1BQ,EAAWC,GAAgBT,EAAAA,UAAS,IACpCU,EAASC,GAAcX,EAAAA,UAAS,IAChCY,EAAYC,GAAiBb,EAAAA,SAAS,KACtCc,EAAUC,GAAef,EAAAA,SAAS,KAGlCJ,EAAaoB,GAAkBhB,EAAAA,SAAsBH,GAAsB,SAG3EoB,EAAiBC,GAAsBlB,EAAAA,SAA2B,KAClEmB,EAAgBC,GAAqBpB,EAAAA,SAAwB,OAC7DqB,EAAcC,GAAmBtB,EAAAA,UAAS,IAC1CuB,EAAgBC,GAAqBxB,EAAAA,UAAS,IAG9CyB,EAAOC,GAAY1B,EAAAA,SAAyB,KAC5C2B,EAAcC,GAAmB5B,EAAAA,UAAS,IAG1C6B,EAAaC,GAAkB9B,EAAAA,UAAS,IACxC+B,EAAeC,GAAoBhC,EAAAA,UAAS,IAC5CiC,EAAcC,IAAmBlC,EAAAA,UAAS,IAC1CmC,GAAcC,IAAmBpC,EAAAA,UAAS,GAGjDqC,EAAAA,UAAU,KACR,IAAK7C,EAAM,OAEkB8C,WAC3BhB,GAAgB,GAChB,IACE,MAAMiB,QAAYC,MAAM,GAAGC,wCAA8C7C,IAAe,CACtF8C,YAAa,YAEf,GAAIH,EAAII,GAAI,CACV,MAAMC,QAAaL,EAAIM,OACvB3B,EAAmB0B,EACrB,CACF,OAASE,GAET,CAAA,QACExB,GAAgB,EAClB,GAGFyB,IACC,CAACnD,EAAaJ,IAGjB6C,EAAAA,UAAU,MACH1C,GAAaG,EAChBK,EAAWtB,EAAgBiB,IACjBH,GAAcG,GACxBK,EAAWtB,MAEZ,CAACiB,EAAoBH,IAyExB,IAAKH,EAAM,OAAO,KAElB,MAKMwD,GALe,CACnBC,MAAO,CAAEC,GAAI,UAAWC,KAAM,QAC9BC,OAAQ,CAAEF,GAAI,UAAWC,KAAM,QAC/BE,IAAK,CAAEH,GAAI,UAAWC,KAAM,SAEGzD,EAAU4D,iBAAmB,SAY9D,MAUMC,GAAa,CAACC,EAAYC,EAA2BlF,KACzDmD,EAASD,EAAMiC,IAAIC,GAAKA,EAAEH,KAAOA,EAAK,IAAKG,EAAGF,CAACA,GAAQlF,GAAUoF,KA4G7DC,GAAY,KAChB7D,EAAsB,IACtBI,EAAWtB,EAAgBC,IAC3BuB,EAAiB,IACjBE,EAAQ,IACRa,EAAkB,MAClBI,GAAkB,GAClBR,EAAenB,GAAsB,QACrC6B,EAAS,IACTb,EAAc,IACdE,EAAY,IACZe,GAAe,GACfE,GAAiB,GACjBE,IAAgB,GAChBE,IAAgB,IAGlB,OACE3D,EAAAA,IAAC,OAAIoF,MAAO,CACVC,SAAU,QACVC,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRC,WAAY,mBACZC,QAAS,OACTC,WAAY,SACZC,OAAQ,IACRC,QAAS,IAETC,SAAAC,EAAAA,KAAC,MAAA,CACCC,UAAU,sBACVb,MAAO,CACLM,WAAY,UACZQ,OAAQ,oBACRC,aAAc,GACdvI,MAAO,OACPwI,SAAU,IACVC,UAAW,OACXC,SAAU,OACVC,UAAW,oCAIbR,SAAA,CAAAC,OAAC,OAAIZ,MAAO,CACVU,QAAS,GACTU,aAAc,oBACdb,QAAS,OACTc,WAAY,SACZC,IAAK,GACLhB,WAAY,qDAEZK,SAAA,CAAA/F,MAAC,OAAIoF,MAAO,CACVxH,MAAO,GACPC,OAAQ,GACRsI,aAAc,GACdT,WAAYzE,EAAU0F,WAAa,OAAO1F,EAAU0F,cAAgB,UACpEC,eAAgB,QAChBjB,QAAS,OACTC,WAAY,SACZiB,MAAO,UACPC,WAAY,IACZC,SAAU,GACVb,OAAQ,qBAEPH,UAAC9E,EAAU0F,YAAc1F,EAAU+F,SAASnG,MAAM,EAAG,GAAGoG,uBAG1D,MAAA,CAAI7B,MAAO,CAAE8B,KAAM,GAClBnB,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEO,QAAS,OAAQc,WAAY,SAAUC,IAAK,GAAIS,aAAc,GAC1EpB,SAAA,CAAAC,EAAAA,KAAC,OAAA,CAAKZ,MAAO,CAAEyB,MAAO,UAAWC,WAAY,IAAKC,SAAU,IAAMhB,SAAA,CAAA,IAAE9E,EAAU+F,YAC7E/F,EAAUmG,QACTpH,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CACVM,WAAYnB,GAAYE,GACxBoC,MAAOtC,GAAYG,KACnBqC,SAAU,GACVD,WAAY,IACZhB,QAAS,WACTK,aAAc,EACdkB,cAAe,IAEdtB,WAAUqB,YAIhBnG,EAAUqG,cACTtH,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAII,aAAc,GAAMpB,WAAUuB,eAE7EjH,GACC2F,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAID,WAAY,KAAOf,SAAA,CAAA,gBACjD1F,KAIlB2F,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEO,QAAS,OAAQ4B,SAAU,OAAQb,IAAK,EAAGc,UAAW,GACjEzB,SAAA,CAAA,OAAA0B,EAAAxG,EAAUyG,YAAV,EAAAD,EAAiBxC,IAAI,CAACzH,EAAGmK,IACxB3H,EAAAA,IAAC,QAAoBoF,MAAO,CAC1BM,WAAY,wBACZmB,MAAO,UACPE,SAAU,GACVD,WAAY,IACZhB,QAAS,UACTK,aAAc,EACdD,OAAQ,kCAEPH,SAAAvI,GATQ,KAAKmK,MAYjB,OAAAC,EAAA3G,EAAU4G,aAAV,EAAAD,EAAkB3C,IAAI,CAAC6C,EAAGH,IACzB3H,EAAAA,IAAC,QAAoBoF,MAAO,CAC1BM,WAAY,wBACZmB,MAAO,UACPE,SAAU,GACVD,WAAY,IACZhB,QAAS,UACTK,aAAc,EACdD,OAAQ,kCAEPH,SAAA+B,GATQ,KAAKH,YAetB3H,EAAAA,IAAC,SAAA,CACC+H,QAAS/G,EACToE,MAAO,CACLM,WAAY,cACZQ,OAAQ,OACRW,MAAO,UACPE,SAAU,GACViB,OAAQ,UACRlC,QAAS,GAEZC,SAAA,SAMFvE,GACCwE,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CACVU,QAAS,YACTJ,WAAY,8EACZc,aAAc,iCACdb,QAAS,OACTc,WAAY,SACZC,IAAK,IAELX,SAAA,CAAA/F,MAAC,OAAIoF,MAAO,CACVxH,MAAO,GACPC,OAAQ,GACRsI,aAAc,EACdT,WAAY,wBACZC,QAAS,OACTc,WAAY,SACZwB,eAAgB,SAChBpB,MAAO,WAEPd,SAAA/F,EAAAA,IAACC,EAAA,CAASvB,KAAM,cAEjB,MAAA,CACCqH,SAAA,GAAA/F,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAImB,cAAe,YAAab,cAAe,IAAOtB,SAAA,YAGhG/F,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAID,WAAY,KACvDf,SAAAvE,UAOTwE,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEU,QAAS,GAAIH,QAAS,OAAQe,IAAK,IAE9CX,SAAA,EAAC7E,UACC,MAAA,CACC6E,SAAA,GAAAC,KAAC,QAAA,CAAMZ,MAAO,CAAEO,QAAS,QAASkB,MAAO,UAAWE,SAAU,GAAID,WAAY,IAAKK,aAAc,GAAKpB,SAAA,CAAA,uBACrF,OAAA,CAAKX,MAAO,CAAEyB,MAAO,WAAad,SAAA,SAEnD/F,EAAAA,IAAC,QAAA,CACCmI,KAAK,OACLrI,MAAOuB,EACP+G,SAAWC,GAAM/G,EAAsB+G,EAAEC,OAAOxI,OAChDyI,YAAY,oCACZnD,MAAO,CACLxH,MAAO,OACP8H,WAAY,UACZQ,OAAQ,oBACRC,aAAc,EACdL,QAAS,GACTe,MAAO,UACPE,SAAU,MAGd/G,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CAAE2B,SAAU,GAAIF,MAAO,UAAWW,UAAW,GAAKzB,SAAA,8EAOhE7E,GACA8E,EAAAA,KAAC,MAAA,CACCD,SAAA,GAAAC,KAAC,QAAA,CAAMZ,MAAO,CAAEO,QAAS,QAASkB,MAAO,UAAWE,SAAU,GAAID,WAAY,IAAKK,aAAc,IAAMpB,SAAA,CAAA,sBACvF,OAAA,CAAKX,MAAO,CAAEyB,MAAO,WAAad,SAAA,WAElD/F,IAAC,MAAA,CAAIoF,MAAO,CAAEO,QAAS,OAAQ6C,oBAAqB,iBAAkB9B,IAAK,IACxEX,SAAAlG,EAAqBoF,IAAKwD,GACzBzC,EAAAA,KAAC,SAAA,CAECmC,KAAK,SACLJ,QAAS,KAAOU,EAAOtI,YAvYT,CAACuI,IAO/B,OANAnG,EAAemG,GAEf/F,EAAkB,MAClBI,GAAkB,GAClBjB,EAAQ,IAEA4G,GACN,IAAK,OAwBL,IAAK,QACHrF,GAAe,GACfE,GAAiB,GACjBE,IAAgB,GAChBE,IAAgB,GAChB,MAvBF,IAAK,MACHN,GAAe,GACfE,GAAiB,GACjBE,IAAgB,GAChBE,IAAgB,GAChB,MACF,IAAK,QACHN,GAAe,GACfE,GAAiB,GACjBE,IAAgB,GAChBE,IAAgB,GAChB,MACF,IAAK,QACHN,GAAe,GACfE,GAAiB,GACjBE,IAAgB,GAChBE,IAAgB,KAyWiCgF,CAAwBF,EAAO3I,OACpE8I,SAAUH,EAAOtI,WACjBiF,MAAO,CACLM,WAAY+C,EAAOtI,WACf,UACAgB,IAAgBsH,EAAO3I,MACrB,wBACA,UACNoG,OAAQ,cAAauC,EAAOtI,WAAa,UAAYgB,IAAgBsH,EAAO3I,MAAQ,UAAY,WAChGqG,aAAc,GACdL,QAAS,GACTkC,OAAQS,EAAOtI,WAAa,cAAgB,UAC5CwF,QAAS,OACTkD,cAAe,SACfpC,WAAY,SACZC,IAAK,EACLoC,WAAY,gBACZC,QAASN,EAAOtI,WAAa,GAAM,EACnCkF,SAAU,YAGXU,SAAA,CAAA0C,EAAOtI,YACNH,EAAAA,IAAC,OAAA,CAAKoF,MAAO,CACXC,SAAU,WACVC,IAAK,EACLE,MAAO,EACPE,WAAY,UACZmB,MAAO,OACPE,SAAU,EACVD,WAAY,IACZhB,QAAS,UACTK,aAAc,GACbJ,SAAA,WAIL/F,IAAC,OAAA,CAAKoF,MAAO,CAAEyB,MAAO4B,EAAOtI,WAAa,UAAYgB,IAAgBsH,EAAO3I,MAAQ,UAAY,WAC9FiG,WAAOtH,OAEVuB,MAAC,QAAKoF,MAAO,CACXyB,MAAO4B,EAAOtI,WAAa,UAAYgB,IAAgBsH,EAAO3I,MAAQ,UAAY,UAClFiH,SAAU,GACVD,WAAY,KAEXf,WAAOhG,QAEVC,MAAC,QAAKoF,MAAO,CACXyB,MAAO,UACPE,SAAU,GACViC,UAAW,SACXC,WAAY,KAEXlD,WAAO7F,gBAtDLuI,EAAO3I,oBA+DrB,MAAA,CACCiG,SAAA,GAAAC,KAAC,QAAA,CAAMZ,MAAO,CAAEO,QAAS,QAASkB,MAAO,UAAWE,SAAU,GAAID,WAAY,IAAKK,aAAc,IAAMpB,SAAA,CAAA,oBACzF,OAAA,CAAKX,MAAO,CAAEyB,MAAO,WAAad,SAAA,SAG/CnD,IACC5C,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAIjB,QAAS,IAAMC,SAAA,4BAI7DmD,EAAAA,SAAA,CAEEnD,SAAA,CAAAC,OAAC,OAAIZ,MAAO,CACVO,QAAS,OACT6C,oBAAqB,wCACrB9B,IAAK,GACLS,aAAc,IAEbpB,SAAA,CAAAvD,EAAgByC,IAAKkE,GACpBnD,EAAAA,KAAC,SAAA,CAECmC,KAAK,SACLJ,QAAS,IAvfJ,CAACqB,kBAIxB,GAHAzG,EAAkByG,GAClBrG,GAAkB,GAEdqG,EAAQ,CACV,MAAMD,EAAU3G,EAAgB6G,KAAK7L,GAAKA,EAAEuH,KAAOqE,GACnD,GAAID,EAAS,CACXrH,EAAQqH,EAAQG,MAEhB,MAAMC,EAAQJ,EAAQK,oBAChBC,GAAY,OAAAhC,EAAA8B,EAAMG,WAAN,EAAAjC,EAAYkC,QAAS,GACvCtG,EAAeoG,EAAUG,SAAS,UAAW,OAAAhC,EAAA2B,EAAMM,aAAN,EAAAjC,EAAcgC,SAAS,UACpErG,EAAiBkG,EAAUG,SAAS,WAAY,OAAAE,IAAMD,aAAN,EAAAC,EAAcF,SAAS,WACvEnG,GAAgBgG,EAAUG,SAAS,WAAY,OAAAG,IAAMF,aAAN,EAAAE,EAAcH,SAAS,WACtEjG,GAAgB8F,EAAUG,SAAS,WAAY,OAAAI,IAAMH,aAAN,EAAAG,EAAcJ,SAAS,UACxE,CACF,MACE9H,EAAQ,KAseuBmI,CAAiBd,EAAQpE,IACxCK,MAAO,CACLM,WAAYhD,IAAmByG,EAAQpE,GAAK,wBAA0B,UACtEmB,OAAQ,cAAaxD,IAAmByG,EAAQpE,GAAK,UAAY,WACjEoB,aAAc,GACdL,QAAS,YACTkC,OAAQ,UACRrC,QAAS,OACTkD,cAAe,SACfpC,WAAY,SACZC,IAAK,EACLoC,WAAY,gBACZzD,SAAU,YAGXU,SAAA,CAAArD,IAAmByG,EAAQpE,MAC1B/E,IAAC,MAAA,CAAIoF,MAAO,CACVC,SAAU,WACVC,IAAK,EACLE,MAAO,EACPE,WAAY,UACZS,aAAc,MACdvI,MAAO,GACPC,OAAQ,GACR8H,QAAS,OACTc,WAAY,SACZwB,eAAgB,UAEhBlC,eAACmE,EAAA,CAAMxL,KAAM,GAAImI,MAAM,OAAOjI,YAAa,MAG/CoB,MAAC,OAAIoF,MAAO,CACVxH,MAAO,GACPC,OAAQ,GACRsI,aAAc,EACdT,WAAY,GAAGyD,EAAQtC,UACvBlB,QAAS,OACTc,WAAY,SACZwB,eAAgB,SAChBpB,MAAOsC,EAAQtC,OAEfd,eAACvH,EAAA,CAASC,KAAM0K,EAAQ1K,KAAMC,KAAM,OAEtCsB,MAAC,QAAKoF,MAAO,CACXyB,MAAOnE,IAAmByG,EAAQpE,GAAK,UAAY,UACnDgC,SAAU,GACVD,WAAY,IACZkC,UAAW,UAEVjD,WAAQuD,OAEXtD,OAAC,QAAKZ,MAAO,CACXyB,MAAO,UACPE,SAAU,EACViC,UAAW,SACXC,WAAY,IACZtD,QAAS,cACTwE,gBAAiB,EACjBC,gBAAiB,WACjB9D,SAAU,UAETP,SAAA,CAAAoD,EAAQjJ,YAAYW,MAAM,EAAG,IAAKsI,EAAQjJ,YAAYmK,OAAS,GAAK,MAAQ,QA/D1ElB,EAAQpE,KAqEjBiB,EAAAA,KAAC,SAAA,CACCmC,KAAK,SACLJ,QAtiBO,KACvBpF,EAAkB,MAClBI,GAAkB,GAClBjB,EAAQ,KAoiBQsD,MAAO,CACLM,WAAY5C,EAAiB,wBAA0B,UACvDoD,OAAQ,cAAapD,EAAiB,UAAY,WAClDqD,aAAc,GACdL,QAAS,YACTkC,OAAQ,UACRrC,QAAS,OACTkD,cAAe,SACfpC,WAAY,SACZC,IAAK,EACLoC,WAAY,iBAGd/C,SAAA,CAAA/F,MAAC,OAAIoF,MAAO,CACVxH,MAAO,GACPC,OAAQ,GACRsI,aAAc,EACdT,WAAY,2BACZC,QAAS,OACTc,WAAY,SACZwB,eAAgB,SAChBpB,MAAO,WAEPd,SAAA/F,MAACsK,EAAA,CAAK5L,KAAM,GAAIE,YAAa,QAE/BoB,MAAC,QAAKoF,MAAO,CACXyB,MAAO/D,EAAiB,UAAY,UACpCiE,SAAU,GACVD,WAAY,KACXf,SAAA,gBAGH/F,MAAC,QAAKoF,MAAO,CACXyB,MAAO,UACPE,SAAU,EACViC,UAAW,UACVjD,SAAA,0BAONjD,GACC9C,EAAAA,IAAC,QAAA,CACCmI,KAAK,OACLrI,MAAO+B,EACPuG,SAAWC,GAAMvG,EAAQuG,EAAEC,OAAOxI,OAClCyI,YAAY,4BACZnD,MAAO,CACLxH,MAAO,OACP8H,WAAY,UACZQ,OAAQ,oBACRC,aAAc,EACdL,QAAS,GACTe,MAAO,UACPE,SAAU,MAMfrE,IAAmBI,KAClB9C,IAAC,OAAIoF,MAAO,CACVM,WAAY,uBACZQ,OAAQ,iCACRC,aAAc,EACdL,QAAS,IAEPC,2BACA,MAAMwE,EAAe/H,EAAgB6G,KAAK7L,GAAKA,EAAEuH,KAAOrC,GACxD,OAAK6H,EAEHvE,EAAAA,KAAAkD,WAAA,CACEnD,SAAA,GAAA/F,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAID,WAAY,IAAKK,aAAc,GAC1EpB,WAAauD,SAEhBtJ,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAII,aAAc,GACzDpB,SAAAwE,EAAarK,cAEhB8F,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEO,QAAS,OAAQ4B,SAAU,OAAQb,IAAK,GACnDX,SAAA,EAAA,OAAA0B,EAAA8C,EAAaf,oBAAoBK,aAAjC,EAAApC,EAAyC4C,QAAS,GACjDrE,OAAC,QAAKZ,MAAO,CACXM,WAAY,wBACZmB,MAAO,UACPE,SAAU,GACVjB,QAAS,UACTK,aAAc,GACbJ,SAAA,CAAA,eACYwE,EAAaf,oBAAoBK,OAAOW,KAAK,UAG7D,OAAAV,EAAA,OAAAlC,EAAA2C,EAAaf,oBAAoBE,WAAjC,EAAA9B,EAAuC+B,YAAvC,EAAAG,EAA8CO,QAAS,GACtDrE,EAAAA,KAAC,QAAKZ,MAAO,CACXM,WAAY,wBACZmB,MAAO,UACPE,SAAU,GACVjB,QAAS,UACTK,aAAc,GACbJ,SAAA,CAAA,aACUwE,EAAaf,oBAAoBE,KAAKC,MAAMa,KAAK,MAAM,KAAGD,EAAaf,oBAAoBE,KAAKe,MAAM,QAGpH,OAAAV,EAAAQ,EAAaf,oBAAoBkB,aAAjC,EAAAX,EAAyCM,QAAS,GACjDrE,OAAC,QAAKZ,MAAO,CACXM,WAAY,wBACZmB,MAAO,UACPE,SAAU,GACVjB,QAAS,UACTK,aAAc,GACbJ,SAAA,CAAA,eACYwE,EAAaf,oBAAoBkB,OAAOF,KAAK,eAxC1C,IA8C5B,oBAQT,MAAA,CACCzE,SAAA,GAAA/F,IAAC,QAAA,CAAMoF,MAAO,CAAEO,QAAS,QAASkB,MAAO,UAAWE,SAAU,GAAID,WAAY,IAAKK,aAAc,GAAKpB,SAAA,kBAGtG/F,EAAAA,IAAC,WAAA,CACCF,MAAO2B,EACP2G,SAAWC,GAAM3G,EAAW2G,EAAEC,OAAOxI,OACrCyI,YAAY,uDACZnD,MAAO,CACLxH,MAAO,OACP+M,UAAW,IACXjF,WAAY,UACZQ,OAAQ,oBACRC,aAAc,EACdL,QAAS,GACTe,MAAO,UACPE,SAAU,GACV6D,WAAY,UACZC,OAAQ,cAGZ7E,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAE2B,SAAU,GAAIF,MAAO,UAAWW,UAAW,GACtDzB,SAAA,CAAAtE,EAAQ4I,OAAO,yBAKpBrE,OAAC,OAAIZ,MAAO,CACVM,WAAY,UACZQ,OAAQ,oBACRC,aAAc,GACdL,QAAS,IAETC,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEO,QAAS,OAAQsC,eAAgB,gBAAiBxB,WAAY,SAAUU,aAAc,IAClGpB,SAAA,CAAAC,OAAC,MAAA,CACCD,SAAA,CAAA/F,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAID,WAAY,KAAOf,SAAA,mBAGjE/F,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAIS,UAAW,GAAKzB,SAAA,2FAIhE/F,EAAAA,IAAC,SAAA,CACC+H,QA5oBE,KACd9E,EAAS,IAAID,EAAO,CAClB+B,GAxKmB+F,KAAKC,SAASC,SAAS,IAAIC,OAAO,EAAG,GAyKxDC,MAAO,GACPhL,YAAa,GACbiL,SAAU7K,OAEZ6C,GAAgB,IAsoBJiC,MAAO,CACLM,WAAY,wBACZQ,OAAQ,oBACRW,MAAO,UACPf,QAAS,WACTK,aAAc,EACdW,WAAY,IACZkB,OAAQ,UACRjB,SAAU,IAEbhB,SAAA,kBAKe,IAAjB/C,EAAMqH,SACLrK,IAAC,OAAIoF,MAAO,CACVU,QAAS,GACTkD,UAAW,SACXnC,MAAO,UACPE,SAAU,GACVb,OAAQ,qBACRC,aAAc,GACbJ,4EAIH/F,MAAC,OAAIoF,MAAO,CAAEO,QAAS,OAAQkD,cAAe,SAAUnC,IAAK,IAC1DX,SAAA/C,EAAMiC,IAAI,CAACmG,EAAMC,IAChBrL,EAAAA,IAAC,MAAA,CAAkBoF,MAAO,CACxBM,WAAY,UACZQ,OAAQ,oBACRC,aAAc,EACdL,QAAS,IAETC,SAAAC,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEO,QAAS,OAAQsC,eAAgB,gBAAiBxB,WAAY,aAAcC,IAAK,IAC7FX,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAE8B,KAAM,EAAGvB,QAAS,OAAQe,IAAK,IAC3CX,SAAA,CAAAC,OAAC,OAAIZ,MAAO,CAAEO,QAAS,OAAQe,IAAK,IAClCX,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAE8B,KAAM,GAClBnB,SAAA,CAAAC,EAAAA,KAAC,QAAA,CAAMZ,MAAO,CAAEO,QAAS,QAASkB,MAAO,UAAWE,SAAU,GAAII,aAAc,GAAKpB,SAAA,CAAA,QAC7EsF,EAAQ,EAAE,eAElBrL,EAAAA,IAAC,QAAA,CACCmI,KAAK,OACLrI,MAAOsL,EAAKF,MACZ9C,SAAWC,GAAMvD,GAAWsG,EAAKrG,GAAI,QAASsD,EAAEC,OAAOxI,OACvDyI,YAAY,wCACZnD,MAAO,CACLxH,MAAO,OACP8H,WAAY,UACZQ,OAAQ,oBACRC,aAAc,EACdL,QAAS,GACTe,MAAO,UACPE,SAAU,gBAIf,MAAA,CAAI3B,MAAO,CAAE8B,KAAM,GAClBnB,SAAA,GAAA/F,IAAC,QAAA,CAAMoF,MAAO,CAAEO,QAAS,QAASkB,MAAO,UAAWE,SAAU,GAAII,aAAc,GAAKpB,SAAA,eAGrF/F,EAAAA,IAAC,QAAA,CACCmI,KAAK,iBACLrI,MAAOsL,EAAKD,SACZ/C,SAAWC,GAAMvD,GAAWsG,EAAKrG,GAAI,WAAYsD,EAAEC,OAAOxI,OAC1DsF,MAAO,CACLxH,MAAO,OACP8H,WAAY,UACZQ,OAAQ,oBACRC,aAAc,EACdL,QAAS,GACTe,MAAO,UACPE,SAAU,mBAKjB,MAAA,CACChB,SAAA,GAAA/F,IAAC,QAAA,CAAMoF,MAAO,CAAEO,QAAS,QAASkB,MAAO,UAAWE,SAAU,GAAII,aAAc,GAAKpB,SAAA,2BAGrF/F,EAAAA,IAAC,WAAA,CACCF,MAAOsL,EAAKlL,YACZkI,SAAWC,GAAMvD,GAAWsG,EAAKrG,GAAI,cAAesD,EAAEC,OAAOxI,OAC7DyI,YAAY,mDACZ+C,KAAM,EACNlG,MAAO,CACLxH,MAAO,OACP8H,WAAY,UACZQ,OAAQ,oBACRC,aAAc,EACdL,QAAS,GACTe,MAAO,UACPE,SAAU,GACV6D,WAAY,UACZC,OAAQ,oBAKhB7K,EAAAA,IAAC,SAAA,CACC+H,QAAS,KAAMwD,OAruBjBxG,EAquB4BqG,EAAKrG,QApuBnD9B,EAASD,EAAMwI,OAAOtG,GAAKA,EAAEH,KAAOA,IADnB,IAACA,GAsuBEK,MAAO,CACLM,WAAY,cACZQ,OAAQ,OACRW,MAAO,UACPE,SAAU,GACViB,OAAQ,UACRlC,QAAS,GAEZC,SAAA,UAlFKqF,EAAKrG,OA2FpB/B,EAAMqH,OAAS,KACdrE,KAAC,OAAIZ,MAAO,CACVoC,UAAW,GACX1B,QAAS,GACTJ,WAAY,uBACZS,aAAc,EACdR,QAAS,OACTc,WAAY,SACZC,IAAK,GAELX,SAAA,CAAA/F,MAAC,QAAKoF,MAAO,CAAE2B,SAAU,IAAMhB,SAAA,OAC/B/F,EAAAA,IAAC,QAAKoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,IAAMhB,SAAA,mGAQtD7E,UACE,MAAA,CACC6E,SAAA,GAAA/F,IAAC,QAAA,CAAMoF,MAAO,CAAEO,QAAS,QAASkB,MAAO,UAAWE,SAAU,GAAID,WAAY,IAAKK,aAAc,IAAMpB,SAAA,wBAGvG/F,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CAAEO,QAAS,OAAQ4B,SAAU,OAAQb,IAAK,IACnDX,SAAA,CACC,CAAE1I,IAAK,OAAQ0C,MAAO,OAAQD,MAAOsD,EAAaqI,OAAQpI,GAC1D,CAAEhG,IAAK,SAAU0C,MAAO,SAAUD,MAAOwD,EAAemI,OAAQlI,GAChE,CAAElG,IAAK,QAAS0C,MAAO,QAASD,MAAO0D,EAAciI,OAAQhI,IAC7D,CAAEpG,IAAK,QAAS0C,MAAO,QAASD,MAAO4D,GAAc+H,OAAQ9H,KAC7DsB,IAAIyG,KACJ1F,KAAC,SAAqBZ,MAAO,CAC3BO,QAAS,OACTc,WAAY,SACZC,IAAK,EACLZ,QAAS,WACTJ,WAAYgG,EAAK5L,MAAQ,wBAA0B,UACnDoG,OAAQ,cAAawF,EAAK5L,MAAQ,UAAY,WAC9CqG,aAAc,EACd6B,OAAQ,WAERjC,SAAA,CAAA/F,EAAAA,IAAC,QAAA,CACCmI,KAAK,WACLwD,QAASD,EAAK5L,MACdsI,SAAWC,GAAMqD,EAAKD,OAAOpD,EAAEC,OAAOqD,SACtCvG,MAAO,CAAEwG,YAAa,eAExB5L,IAAC,OAAA,CAAKoF,MAAO,CAAEyB,MAAO6E,EAAK5L,MAAQ,UAAY,UAAWiH,SAAU,IACjEhB,WAAKhG,UAjBE2L,EAAKrO,kBA0BxB,MAAA,CACC0I,SAAA,GAAAC,KAAC,QAAA,CAAMZ,MAAO,CAAEO,QAAS,QAASkB,MAAO,UAAWE,SAAU,GAAID,WAAY,IAAKK,aAAc,GAAKpB,SAAA,CAAA,sBAChF9E,EAAU+F,SAAS,KAAGrF,EAAc,OAE1D3B,EAAAA,IAAC,QAAA,CACCmI,KAAK,QACL0D,IAAK,EACLC,IAAK,IACLC,KAAM,EACNjM,MAAO6B,EACPyG,SAAWC,GAAMzG,EAAiBoK,SAAS3D,EAAEC,OAAOxI,QACpDsF,MAAO,CAAExH,MAAO,YAElBoI,KAAC,MAAA,CAAIZ,MAAO,CAAEO,QAAS,OAAQsC,eAAgB,gBAAiBlB,SAAU,GAAIF,MAAO,UAAWW,UAAW,GACzGzB,SAAA,CAAAC,OAAC,OAAA,CAAKD,SAAA,CAAA,aAAW,IAAMpE,EAAc,cACpC,OAAA,CAAKoE,SAAA,CAAA,aAAWpE,EAAc,aAKnCqE,OAAC,OAAIZ,MAAO,CACVM,WAAY,UACZQ,OAAQ,oBACRC,aAAc,EACdL,QAAS,IAETC,SAAA,CAAA/F,MAAC,OAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAID,WAAY,IAAKK,aAAc,GAAIe,cAAe,YAAab,cAAe,IAAOtB,SAAA,YAKlIvE,GACCwE,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CACV+B,aAAc,GACd8E,cAAe,GACfzF,aAAc,qBAEdT,SAAA,CAAA/F,MAAC,OAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAID,WAAY,IAAKK,aAAc,EAAGe,cAAe,YAAab,cAAe,IAAOtB,SAAA,YAGlI/F,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAID,WAAY,KACvDf,SAAAvE,SAKPxB,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAImF,WAAY,WAAYjD,WAAY,KAC/ElD,YAAW,kCAIb/C,EAAMqH,OAAS,GACdrE,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEoC,UAAW,GAAI2E,WAAY,GAAIC,UAAW,qBACtDrG,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAE2B,SAAU,GAAIF,MAAO,UAAWC,WAAY,IAAKK,aAAc,GAAKpB,SAAA,CAAA,mBAC/D/C,EAAMqH,OAAO,OAE/BrH,EAAMiC,IAAI,CAACmG,EAAMzD,IAChB3B,OAAC,OAAkBZ,MAAO,CACxBU,QAAS,GACTJ,WAAY,UACZS,aAAc,EACdgB,aAAc,EACdkF,WAAY,qBAEZtG,SAAA,GAAA/F,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAID,WAAY,KAAQf,SAAAqF,EAAKF,OAAS,eAC/EE,EAAKlL,aACJF,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAIS,UAAW,GAAMzB,WAAK7F,cAEtE8F,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEyB,MAAO,UAAWE,SAAU,GAAIS,UAAW,GAAKzB,SAAA,CAAA,QACtDqF,EAAKD,SAAW,IAAI1K,KAAK2K,EAAKD,UAAUmB,qBAAuB,qBAZ/DlB,EAAKrG,QAmBrBiB,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEoC,UAAW,GAAI2E,WAAY,GAAIC,UAAW,qBACtDrG,SAAA,CAAA/F,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CAAE2B,SAAU,GAAIF,MAAO,WAAad,SAAA,kBAChDC,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEO,QAAS,OAAQe,IAAK,GAAIc,UAAW,GACjDzB,SAAA,CAAAC,OAAC,OAAIZ,MAAO,CACV8B,KAAM,IAAMvF,EACZ+D,WAAY,UACZ7H,OAAQ,GACRsI,aAAc,EACdR,QAAS,OACTC,WAAY,SACZiB,MAAO,UACPE,SAAU,GACVD,WAAY,KACXf,SAAA,CAAA,QACK,IAAMpE,EAAc,OAE5BqE,OAAC,OAAIZ,MAAO,CACV8B,KAAMvF,EACN+D,WAAY,UACZ7H,OAAQ,GACRsI,aAAc,EACdR,QAAS,OACTC,WAAY,SACZiB,MAAO,OACPE,SAAU,GACVD,WAAY,KACXf,SAAA,CAAA,IACC9E,EAAU+F,SAAS,KAAGrF,EAAc,gBAO7CQ,GACCnC,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CACVM,WAAY,uBACZQ,OAAQ,oBACRW,MAAO,UACPf,QAAS,GACTK,aAAc,EACdY,SAAU,IAEThB,SAAA5D,IAGJE,GACCrC,EAAAA,IAAC,MAAA,CAAIoF,MAAO,CACVM,WAAY,sBACZQ,OAAQ,oBACRW,MAAO,UACPf,QAAS,GACTK,aAAc,EACdY,SAAU,IAEThB,SAAA1D,IAKL2D,EAAAA,KAAC,MAAA,CAAIZ,MAAO,CAAEO,QAAS,OAAQe,IAAK,GAAIuB,eAAgB,YACtDlC,SAAA,CAAA/F,EAAAA,IAAC,SAAA,CACC+H,QAAS/G,EACToE,MAAO,CACLM,WAAY,cACZQ,OAAQ,oBACRW,MAAO,UACPf,QAAS,YACTK,aAAc,EACdW,WAAY,IACZkB,OAAQ,WAEXjC,SAAA,WAGD/F,EAAAA,IAAC,SAAA,CACC+H,QAp8BOlE,UACjBzB,EAAc,IACdE,EAAY,IAGZ,IAAA,MAAW8I,KAAQpI,EAAO,CACxB,IAAKoI,EAAKF,MAAMqB,OAEd,YADAjK,EAAY,+BAGd,IAAK8I,EAAKD,SAER,YADA7I,EAAY,iCAGhB,CAEAJ,GAAW,GAEX,IACE,MAAMsK,QA/CV3I,iBACE,IACE,MAAMC,QAAYC,MAAM,GAAGC,mBAA0B,CAAEC,YAAa,YAC9DE,QAAaL,EAAIM,OACvB,aAAOD,WAAMsI,YAAa,EAC5B,CAAA,MACE,MAAO,EACT,CACF,CAuCuBC,GAGnB,GAAIxL,EAAW,CACb,MAAM4C,QAAYC,MAAM,GAAGC,gCAAsC9C,yBAAkC,CACjGyL,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChB,cAAeJ,EACf,mBAAoB,kBAEtBvI,YAAa,UACb4I,KAAMC,KAAKC,UAAU,CACnBC,QAAS/L,EAAU8D,GACnBlD,KAAMA,GAAQ,eACdoL,mBAAoBvK,QAAkB,EACtCwK,mBAAoBvL,EACpBwL,cAAe/J,EACfgK,gBAAiB9J,EACjB+J,eAAgB7J,EAChB8J,eAAgB5J,GAChBV,MAAOA,EAAMiC,IAAIC,IAAA,CACfgG,MAAOhG,EAAEgG,MACThL,YAAagF,EAAEhF,YACfiL,SAAU,IAAI1K,KAAKyE,EAAEiG,UAAUvK,qBAKrC,GAAIkD,EAAII,GACN9B,EAAc,mBAAmBnB,EAAU+F,aAC3CuG,WAAW,KACTvM,IACAmE,MACC,SACE,CACL,MAAMqI,QAAc1J,EAAIM,OACxB9B,EAAYkL,EAAMA,OAAS,wBAC7B,CACF,KAAO,CAEL,MAAM1J,QAAYC,MAAM,GAAGC,gBAAuB,CAChD2I,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChB,cAAeJ,EACf,mBAAoB,kBAEtBvI,YAAa,UACb4I,KAAMC,KAAKC,UAAU,CACnBtL,UACAgM,eAAgB9L,EAChB+L,cAAe,CAACzM,EAAU8D,IAC1B4I,YAAa,GACb9L,KAAMA,GAAQ,eACd+L,aAAczM,EACd6B,MAAOA,EAAMiC,IAAIC,IAAA,CACfgG,MAAOhG,EAAEgG,MACThL,YAAagF,EAAEhF,YACfiL,SAAU,IAAI1K,KAAKyE,EAAEiG,UAAUvK,qBAKrC,GAAIkD,EAAII,GACN9B,EAAc,mBAAmBnB,EAAU+F,aAC3CuG,WAAW,KACTvM,IACAmE,MACC,SACE,CACL,MAAMqI,QAAc1J,EAAIY,OACxBpC,EAAY,0BAA0BkL,IACxC,CACF,CACF,OAASnJ,GACP/B,EAAY,UAAU+B,EAAI5C,SAAW,kBACvC,CAAA,QACES,GAAW,EACb,GAm2BU0G,SAAU3G,IAAYR,EAAQ8K,QAAU9K,EAAQ4I,OAAS,IACzDjF,MAAO,CACLM,WAAYzD,EAAU,UAAY,UAClC4E,MAAO,OACPX,OAAQ,OACRJ,QAAS,YACTK,aAAc,EACdW,WAAY,IACZkB,OAAQ/F,EAAU,cAAgB,UAClC8G,SAAWtH,EAAQ8K,QAAU9K,EAAQ4I,OAAS,IAAQ,GAAM,GAG7DtE,WAAU,aAAe,0BAOxC","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10]}