import{j as e}from"./web3auth-BkZxjmxM.js";import{a as t,r}from"./router-cVcvJ1e3.js";import{c as n,h as o,Q as i,J as a,b as l,X as s,T as d,j as c}from"./index-Clb-55uW.js";import{A as p}from"./arrow-left-Cx3lpWdl.js";import{C as u}from"./calendar-BLbxeSiy.js";import{S as x,a as g}from"./square-C6kX_zTv.js";import{T as f}from"./trash-2-CuRyvxhn.js";import"./vendor-Cfs_Iq82.js";
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=n("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),h=n("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),v=[{value:"all",label:"All Types"},{value:"invitation",label:"Invitations"},{value:"invitation_response",label:"Invite Responses"},{value:"counter_proposal",label:"Counter Proposals"},{value:"comment",label:"Comments"},{value:"approval",label:"Approvals"},{value:"section_update",label:"Updates"},{value:"revenue_proposal",label:"Revenue Proposals"},{value:"mint_ready",label:"Mint Ready"},{value:"content_like",label:"Likes"},{value:"content_comment",label:"Content Comments"},{value:"content_rating",label:"Ratings"},{value:"creator_review",label:"Reviews"}],m=[{value:"all",label:"All Time"},{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"}];function y(){const n=t(),{isMobile:y,isPhone:j}=o(),[k,z]=r.useState("unread"),[w,S]=r.useState("all"),[C,R]=r.useState("all"),[I,W]=r.useState(""),[A,_]=r.useState(!1),[H,T]=r.useState(new Set),[B,D]=r.useState(!1),[M,L]=r.useState(null),[N,P]=r.useState(!1),{notifications:q,unreadCount:E,isLoading:O,markAsRead:Q,markAllAsRead:J,deleteNotification:U,refresh:V}=i();r.useEffect(()=>{V()},[V]),r.useEffect(()=>{A||T(new Set)},[A]);const X=r.useMemo(()=>q.filter(e=>{var t,r;if("unread"===k&&e.read)return!1;if("read"===k&&!e.read)return!1;if("all"!==w&&e.type!==w)return!1;if(!(e=>{if("all"===C)return!0;const t=new Date(e),r=new Date,n=Math.floor((r.getTime()-t.getTime())/864e5);switch(C){case"today":return 0===n;case"week":return n<=7;case"month":return n<=30;default:return!0}})(e.created_at))return!1;if(I){const n=I.toLowerCase(),o=null==(t=e.title)?void 0:t.toLowerCase().includes(n),i=null==(r=e.message)?void 0:r.toLowerCase().includes(n);if(!o&&!i)return!1}return!0}),[q,k,w,C,I]),$=e=>{const t=new Set(H);t.has(e)?t.delete(e):t.add(e),T(t)},F=()=>{T(new Set)},G=async e=>{e.read||await Q(e.id),L(e),D(!0)};return e.jsxs("div",{style:{maxWidth:900,margin:"0 auto",padding:j?"16px 12px":"24px 16px"},children:[e.jsxs("div",{style:{marginBottom:j?16:24},children:[e.jsxs("button",{onClick:()=>n(-1),style:{display:"flex",alignItems:"center",gap:8,background:"transparent",border:"none",color:"var(--text-muted)",fontSize:14,cursor:"pointer",padding:"8px 0",marginBottom:j?12:16,minHeight:44},children:[e.jsx(p,{size:18}),"Back"]}),e.jsxs("div",{style:{display:"flex",flexDirection:j?"column":"row",alignItems:j?"flex-start":"center",justifyContent:"space-between",gap:j?12:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx(a,{size:j?24:28,color:"#f59e0b"}),e.jsx("h1",{style:{fontSize:j?20:24,fontWeight:700,color:"var(--text)",margin:0},children:"Notifications"}),E>0&&e.jsx("span",{style:{background:"#ef4444",color:"#fff",fontSize:11,fontWeight:700,padding:"3px 8px",borderRadius:12},children:E})]}),e.jsxs("button",{onClick:async()=>{await J()},disabled:0===E,style:{display:"flex",alignItems:"center",gap:8,background:E>0?"#f59e0b":"transparent",border:E>0?"none":"1px solid var(--border)",color:E>0?"#000":"var(--subtle)",fontSize:13,fontWeight:600,padding:"10px 16px",borderRadius:8,cursor:E>0?"pointer":"not-allowed",opacity:E>0?1:.6,minHeight:44,width:j?"100%":"auto",justifyContent:"center"},children:[e.jsx(b,{size:16}),"Mark All Read"]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"0 12px"},children:[e.jsx(l,{size:18,color:"var(--subtle)"}),e.jsx("input",{type:"text",placeholder:"Search notifications...",value:I,onChange:e=>W(e.target.value),style:{flex:1,background:"transparent",border:"none",color:"var(--text)",fontSize:14,padding:"12px",outline:"none",minHeight:44}}),I&&e.jsx("button",{onClick:()=>W(""),style:{background:"transparent",border:"none",color:"var(--subtle)",cursor:"pointer",padding:4,display:"flex",alignItems:"center"},children:e.jsx(s,{size:16})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:j?"column":"row",gap:8},children:[e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:8},children:[e.jsx(h,{size:16,color:"var(--subtle)"}),e.jsx("select",{value:w,onChange:e=>S(e.target.value),style:{flex:1,background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:6,color:"var(--text)",fontSize:13,padding:"10px 12px",cursor:"pointer",outline:"none",minHeight:44},children:v.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:8},children:[e.jsx(u,{size:16,color:"var(--subtle)"}),e.jsx("select",{value:C,onChange:e=>R(e.target.value),style:{flex:1,background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:6,color:"var(--text)",fontSize:13,padding:"10px 12px",cursor:"pointer",outline:"none",minHeight:44},children:m.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,borderBottom:"1px solid var(--panel-border-strong)",paddingBottom:12,gap:8,flexWrap:"wrap"},children:[e.jsx("div",{style:{display:"flex",gap:4,overflowX:"auto",WebkitOverflowScrolling:"touch"},children:["unread","read","all"].map(t=>e.jsxs("button",{onClick:()=>z(t),style:{background:k===t?"var(--dropdown-hover)":"transparent",border:"none",color:k===t?"#f59e0b":"var(--text-muted)",fontSize:13,fontWeight:600,padding:"8px 14px",borderRadius:6,cursor:"pointer",textTransform:"capitalize",whiteSpace:"nowrap",minHeight:40},children:[t,"unread"===t&&E>0&&e.jsxs("span",{style:{marginLeft:4,opacity:.8},children:["(",E,")"]})]},t))}),e.jsxs("button",{onClick:()=>_(!A),style:{display:"flex",alignItems:"center",gap:6,background:A?"rgba(59, 130, 246, 0.15)":"transparent",border:"1px solid "+(A?"#3b82f6":"var(--border)"),color:A?"#3b82f6":"var(--text-muted)",fontSize:12,fontWeight:600,padding:"6px 12px",borderRadius:6,cursor:"pointer",minHeight:36},children:[e.jsx(x,{size:14}),A?"Cancel":"Select"]})]}),A&&e.jsxs("div",{style:{display:"flex",flexDirection:j?"column":"row",alignItems:j?"stretch":"center",justifyContent:"space-between",gap:12,padding:"12px 16px",background:"var(--dropdown-hover)",borderRadius:8,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>{T(new Set(X.map(e=>e.id)))},style:{background:"transparent",border:"1px solid var(--border)",color:"var(--text-muted)",fontSize:12,fontWeight:600,padding:"6px 12px",borderRadius:4,cursor:"pointer",minHeight:36},children:"Select All"}),e.jsx("button",{onClick:F,disabled:0===H.size,style:{background:"transparent",border:"1px solid var(--border)",color:H.size>0?"var(--text-muted)":"var(--subtle)",fontSize:12,fontWeight:600,padding:"6px 12px",borderRadius:4,cursor:H.size>0?"pointer":"not-allowed",minHeight:36},children:"Clear"}),e.jsxs("span",{style:{fontSize:13,color:"var(--subtle)"},children:[H.size," selected"]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("button",{onClick:async()=>{for(const e of H)await Q(e);F(),_(!1)},disabled:0===H.size,style:{display:"flex",alignItems:"center",gap:6,background:H.size>0?"#3b82f6":"var(--chip-bg)",border:"none",color:H.size>0?"#fff":"var(--subtle)",fontSize:12,fontWeight:600,padding:"8px 14px",borderRadius:6,cursor:H.size>0?"pointer":"not-allowed",flex:j?1:"none",justifyContent:"center",minHeight:40},children:[e.jsx(b,{size:14}),"Mark Read"]}),e.jsxs("button",{onClick:()=>P(!0),disabled:0===H.size,style:{display:"flex",alignItems:"center",gap:6,background:H.size>0?"#dc2626":"var(--chip-bg)",border:"none",color:H.size>0?"#fff":"var(--subtle)",fontSize:12,fontWeight:600,padding:"8px 14px",borderRadius:6,cursor:H.size>0?"pointer":"not-allowed",flex:j?1:"none",justifyContent:"center",minHeight:40},children:[e.jsx(f,{size:14}),"Delete"]})]})]}),e.jsx("div",{style:{background:"var(--bg-card)",borderRadius:12,border:"1px solid var(--panel-border-strong)",overflow:"hidden"},children:O&&0===q.length?e.jsx("div",{style:{padding:60,textAlign:"center",color:"var(--text-muted)"},children:"Loading notifications..."}):0===X.length?e.jsxs("div",{style:{padding:60,textAlign:"center",color:"var(--text-muted)"},children:[e.jsx(a,{size:40,style:{marginBottom:16,opacity:.5}}),e.jsx("div",{style:{fontSize:16,fontWeight:600,marginBottom:8},children:I?"No notifications match your search":"all"===k?"No notifications yet":"unread"===k?"No unread notifications":"No read notifications"}),e.jsx("div",{style:{fontSize:13,color:"var(--subtle)"},children:I?"Try adjusting your search or filters":"all"===k?"We'll notify you when there's activity":"Check back later for updates"})]}):e.jsx("div",{children:X.map(t=>e.jsxs("div",{style:{display:"flex",alignItems:"stretch"},children:[A&&e.jsx("button",{onClick:()=>$(t.id),style:{display:"flex",alignItems:"center",justifyContent:"center",width:48,background:H.has(t.id)?"rgba(59, 130, 246, 0.1)":"transparent",border:"none",borderRight:"1px solid var(--panel-border-strong)",cursor:"pointer",flexShrink:0},children:H.has(t.id)?e.jsx(x,{size:20,color:"#3b82f6"}):e.jsx(g,{size:20,color:"var(--subtle)"})}),e.jsx("div",{style:{flex:1},children:e.jsx(d,{notification:t,onClick:()=>(async e=>{A?$(e.id):(e.read||await Q(e.id),e.action_url?n(e.action_url):e.project_id&&n(`/studio/${e.project_id}`))})(t),onDelete:e=>{A||(async(e,t)=>{e.stopPropagation(),await U(t)})(e,t.id)},onViewInvite:A?void 0:G})})]},t.id))})}),q.length>0&&e.jsxs("div",{style:{marginTop:16,padding:12,textAlign:"center",fontSize:12,color:"var(--subtle)"},children:["Showing ",X.length," of ",q.length," notifications"]}),N&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:20},onClick:()=>P(!1),children:e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:12,padding:24,maxWidth:400,width:"100%",border:"1px solid var(--panel-border-strong)"},onClick:e=>e.stopPropagation(),children:[e.jsx("h3",{style:{fontSize:18,fontWeight:700,color:"var(--text)",margin:"0 0 12px 0"},children:"Delete Notifications?"}),e.jsxs("p",{style:{fontSize:14,color:"var(--text-muted)",margin:"0 0 20px 0"},children:["Are you sure you want to delete ",H.size," notification",1!==H.size?"s":"","? This cannot be undone."]}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsx("button",{onClick:()=>P(!1),style:{flex:1,background:"transparent",border:"1px solid var(--border)",color:"var(--text-muted)",fontSize:14,fontWeight:600,padding:"12px 20px",borderRadius:8,cursor:"pointer",minHeight:48},children:"Cancel"}),e.jsx("button",{onClick:async()=>{for(const e of H)await U(e);F(),_(!1),P(!1)},style:{flex:1,background:"#dc2626",border:"none",color:"#fff",fontSize:14,fontWeight:600,padding:"12px 20px",borderRadius:8,cursor:"pointer",minHeight:48},children:"Delete"})]})]})}),M&&M.project_id&&e.jsx(c,{open:B,onClose:()=>{D(!1),L(null),V()},projectId:M.project_id,notificationMessage:M.message})]})}export{y as default};
