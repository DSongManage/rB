import{P as e,a as t,g as n,h as i,L as r,j as s,T as o}from"./web3auth-Sk1I85Hw.js";import{r as a,L as l}from"./router-XSTgIKKd.js";import{c as d,o as c,a as p,s as x,d as u,l as g,B as f,g as y,b as h,e as b,f as m}from"./bridgeApi-CMs7OU4_.js";import{C as j}from"./circle-alert-DWN_VUpj.js";import{C as S,T as k}from"./triangle-alert-DF3Flljz.js";import{c as v,T as z,y as w,z as C,b as I,e as A,A as T,E as R,G as W,H as $,J as M,w as B,K as D,L as _,v as E,O as U,Q as F,V as P}from"./index-BeJcpABu.js";import{E as L}from"./external-link-XClled-u.js";import{R as N}from"./refresh-cw-BF8mKS7C.js";import{S as Y}from"./star-GcRCHP4i.js";import{T as H}from"./trash-2-CwdTASy_.js";import{W as V}from"./wallet-CpKQfBm-.js";import{L as q}from"./loader-DS6IT9rA.js";import{S as G}from"./send-BtLT_loB.js";import{A as O}from"./arrow-left-9ZwHef2f.js";import{S as K}from"./shield-DHIMn7CH.js";import{C as X}from"./circle-check-Bv3oXLHU.js";import{P as Q}from"./plus-M4LBYNoy.js";import{C as J}from"./credit-card-B6sc5uoq.js";import{I as Z}from"./info-Da5peMua.js";import"./vendor-Cfs_Iq82.js";
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=v("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),te=v("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),ne=v("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),ie=v("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),re=v("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),se=v("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var oe,ae;function le(e,r,s,o,a=z,l=w){return function(e,t,r,s,o,a=z,l=w){const d=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:i.programId,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}];return new n({keys:d,programId:l,data:o})}(e,r,s,o,t.alloc(0),a,l)}(ae=oe||(oe={}))[ae.InitializeMint=0]="InitializeMint",ae[ae.InitializeAccount=1]="InitializeAccount",ae[ae.InitializeMultisig=2]="InitializeMultisig",ae[ae.Transfer=3]="Transfer",ae[ae.Approve=4]="Approve",ae[ae.Revoke=5]="Revoke",ae[ae.SetAuthority=6]="SetAuthority",ae[ae.MintTo=7]="MintTo",ae[ae.Burn=8]="Burn",ae[ae.CloseAccount=9]="CloseAccount",ae[ae.FreezeAccount=10]="FreezeAccount",ae[ae.ThawAccount=11]="ThawAccount",ae[ae.TransferChecked=12]="TransferChecked",ae[ae.ApproveChecked=13]="ApproveChecked",ae[ae.MintToChecked=14]="MintToChecked",ae[ae.BurnChecked=15]="BurnChecked",ae[ae.InitializeAccount2=16]="InitializeAccount2",ae[ae.SyncNative=17]="SyncNative",ae[ae.InitializeAccount3=18]="InitializeAccount3",ae[ae.InitializeMultisig2=19]="InitializeMultisig2",ae[ae.InitializeMint2=20]="InitializeMint2",ae[ae.GetAccountDataSize=21]="GetAccountDataSize",ae[ae.InitializeImmutableOwner=22]="InitializeImmutableOwner",ae[ae.AmountToUiAmount=23]="AmountToUiAmount",ae[ae.UiAmountToAmount=24]="UiAmountToAmount",ae[ae.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",ae[ae.TransferFeeExtension=26]="TransferFeeExtension",ae[ae.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",ae[ae.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",ae[ae.Reallocate=29]="Reallocate",ae[ae.MemoTransferExtension=30]="MemoTransferExtension",ae[ae.CreateNativeMint=31]="CreateNativeMint",ae[ae.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",ae[ae.InterestBearingMintExtension=33]="InterestBearingMintExtension",ae[ae.CpiGuardExtension=34]="CpiGuardExtension",ae[ae.InitializePermanentDelegate=35]="InitializePermanentDelegate",ae[ae.TransferHookExtension=36]="TransferHookExtension",ae[ae.MetadataPointerExtension=39]="MetadataPointerExtension",ae[ae.GroupPointerExtension=40]="GroupPointerExtension",ae[ae.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",ae[ae.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",ae[ae.PausableExtension=44]="PausableExtension";const de=r.struct([r.u8("instruction"),C("amount")]);function ce(i,r,s,o,a=[],l=z){const d=function(t,n,i){if(i.length){t.push({pubkey:n,isSigner:!1,isWritable:!1});for(const n of i)t.push({pubkey:n instanceof e?n:n.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:n,isSigner:!0,isWritable:!1});return t}([{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0}],s,a),c=t.alloc(de.span);return de.encode({instruction:oe.Transfer,amount:BigInt(o)},c),new n({keys:d,programId:l,data:c})}const pe="#334155",xe="#334155",ue="#cbd5e1",ge="#94a3b8",fe="#f59e0b",ye="#10b981",he="rgba(16,185,129,0.15)",be="#ef4444",me="rgba(239,68,68,0.15)",je="#f59e0b",Se="rgba(245,158,11,0.15)",ke="#3b82f6",ve=({status:e,hasCustomer:t,onStatusChange:n})=>{const[i,r]=a.useState(!1),[o,l]=a.useState(null),x=e||"not_started",u={not_started:{icon:j,label:"Not Started",description:"Complete identity verification to enable bank payouts.",color:ge,bgColor:pe},pending:{icon:A,label:"Pending Review",description:"Your verification is being reviewed. This usually takes a few minutes.",color:je,bgColor:Se},approved:{icon:I,label:"Verified",description:"Your identity has been verified. You can now link bank accounts.",color:ye,bgColor:he},rejected:{icon:S,label:"Verification Failed",description:"Your verification was not approved. Please try again with valid documents.",color:be,bgColor:me},incomplete:{icon:j,label:"Incomplete",description:"Your verification is incomplete. Please complete all required steps.",color:je,bgColor:Se}}[x],g=u.icon;return s.jsxs("div",{children:[s.jsxs("div",{style:{background:u.bgColor,borderRadius:12,padding:16,display:"flex",alignItems:"flex-start",gap:12},children:[s.jsx(g,{size:24,style:{color:u.color,flexShrink:0,marginTop:2}}),s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{color:u.color,fontWeight:600,fontSize:15},children:u.label}),s.jsx("p",{style:{color:ue,fontSize:13,margin:"4px 0 0",lineHeight:1.5},children:u.description})]})]}),o&&s.jsx("div",{style:{marginTop:16,padding:12,background:me,border:`1px solid ${be}40`,borderRadius:8,color:be,fontSize:13},children:o}),s.jsxs("div",{style:{marginTop:16,display:"flex",gap:12},children:[("not_started"===x||"rejected"===x||"incomplete"===x)&&s.jsxs("button",{onClick:async()=>{r(!0),l(null);try{t||await d(),await c(),null==n||n()}catch(e){l(e instanceof Error?e.message:"Failed to start KYC")}finally{r(!1)}},disabled:i,style:{display:"inline-flex",alignItems:"center",gap:8,padding:"10px 20px",background:fe,color:"#000",border:"none",borderRadius:8,fontSize:14,fontWeight:600,cursor:i?"not-allowed":"pointer",opacity:i?.6:1},children:[s.jsx(L,{size:16}),t?"Continue Verification":"Start Verification"]}),"pending"===x&&s.jsxs("button",{onClick:async()=>{r(!0);try{await p(),null==n||n()}catch(e){}finally{r(!1)}},disabled:i,style:{display:"inline-flex",alignItems:"center",gap:8,padding:"10px 20px",background:pe,color:ue,border:`1px solid ${xe}`,borderRadius:8,fontSize:14,fontWeight:500,cursor:i?"not-allowed":"pointer",opacity:i?.6:1},children:[s.jsx(N,{size:16,style:i?{animation:"spin 1s linear infinite"}:{}}),"Refresh Status"]})]}),s.jsxs("p",{style:{marginTop:16,fontSize:12,color:ge,lineHeight:1.5},children:["Verification is powered by Bridge.xyz. Your data is securely handled according to their"," ",s.jsx("a",{href:"https://www.bridge.xyz/privacy",target:"_blank",rel:"noopener noreferrer",style:{color:ke,textDecoration:"none"},onMouseEnter:e=>e.currentTarget.style.textDecoration="underline",onMouseLeave:e=>e.currentTarget.style.textDecoration="none",children:"privacy policy"}),"."]}),s.jsx("style",{children:"\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n      "})]})},ze="#0f172a",we="#1e293b",Ce="#334155",Ie="#334155",Ae="#f8fafc",Te="#cbd5e1",Re="#94a3b8",We="#ef4444",$e="rgba(239,68,68,0.15)",Me="#3b82f6",Be="rgba(59,130,246,0.15)",De=({account:e,onUpdate:t})=>{const[n,i]=a.useState(!1),[r,o]=a.useState(!1),[l,d]=a.useState(null);return s.jsxs("div",{style:{background:ze,border:`1px solid ${Ie}`,borderRadius:12,padding:16,position:"relative"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[s.jsx("div",{style:{padding:10,background:Ce,borderRadius:10},children:s.jsx(ne,{size:20,style:{color:Re}})}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("span",{style:{fontWeight:600,color:Ae,fontSize:15},children:e.account_name}),e.is_default&&s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"2px 8px",background:Be,color:Me,fontSize:11,fontWeight:600,borderRadius:20},children:[s.jsx(Y,{size:10}),"Default"]})]}),s.jsxs("p",{style:{fontSize:13,color:Re,marginTop:4},children:[e.bank_name||"Bank Account"," • ",e.account_type]}),e.last_four&&s.jsxs("p",{style:{fontSize:12,color:Re,marginTop:4},children:["****",e.last_four]})]})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("button",{onClick:()=>o(!r),disabled:n,style:{padding:6,background:"transparent",border:"none",borderRadius:6,cursor:n?"not-allowed":"pointer",color:Re},onMouseEnter:e=>e.currentTarget.style.background=Ce,onMouseLeave:e=>e.currentTarget.style.background="transparent",children:s.jsx(ie,{size:18})}),r&&s.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:4,width:180,background:we,border:`1px solid ${Ie}`,borderRadius:10,boxShadow:"0 10px 25px rgba(0,0,0,0.3)",zIndex:10,overflow:"hidden"},children:[!e.is_default&&s.jsxs("button",{onClick:async()=>{i(!0),d(null);try{await x(e.id),null==t||t()}catch(n){d(n instanceof Error?n.message:"Failed to set default")}finally{i(!1),o(!1)}},disabled:n,style:{width:"100%",textAlign:"left",padding:"10px 14px",background:"transparent",border:"none",color:Te,fontSize:13,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:10},onMouseEnter:e=>e.currentTarget.style.background=Ce,onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[s.jsx(Y,{size:14}),"Set as Default"]}),s.jsxs("button",{onClick:async()=>{if(confirm("Are you sure you want to remove this bank account?")){i(!0),d(null);try{await u(e.id),null==t||t()}catch(n){d(n instanceof Error?n.message:"Failed to delete account")}finally{i(!1),o(!1)}}},disabled:n,style:{width:"100%",textAlign:"left",padding:"10px 14px",background:"transparent",border:"none",color:We,fontSize:13,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:10},onMouseEnter:e=>e.currentTarget.style.background=$e,onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[s.jsx(H,{size:14}),"Remove Account"]})]})]})]}),l&&s.jsx("div",{style:{marginTop:12,padding:10,background:$e,border:`1px solid ${We}40`,borderRadius:8,color:We,fontSize:13},children:l}),r&&s.jsx("div",{style:{position:"fixed",inset:0,zIndex:5},onClick:()=>o(!1)})]})},_e="#0f172a",Ee="#1e293b",Ue="#334155",Fe="#334155",Pe="#f8fafc",Le="#cbd5e1",Ne="#94a3b8",Ye="#10b981",He="rgba(16,185,129,0.15)",Ve="#ef4444",qe="rgba(239,68,68,0.15)",Ge="#f59e0b",Oe="rgba(245,158,11,0.15)",Ke="#3b82f6",Xe="rgba(59,130,246,0.15)",Qe=({className:e=""})=>{const[t,n]=a.useState([]),[i,r]=a.useState(!0),[o,l]=a.useState(null),d=async()=>{r(!0),l(null);try{const e=await g();n(e.payouts)}catch(e){l(e instanceof Error?e.message:"Failed to load payouts")}finally{r(!1)}};a.useEffect(()=>{d()},[]);const c={pending:{icon:A,color:Ge,bgColor:Oe,label:"Pending"},processing:{icon:A,color:Ke,bgColor:Xe,label:"Processing"},completed:{icon:I,color:Ye,bgColor:He,label:"Completed"},failed:{icon:S,color:Ve,bgColor:qe,label:"Failed"}};return i?s.jsxs("div",{style:{background:_e,border:`1px solid ${Fe}`,borderRadius:12,padding:24},children:[s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"32px 0"},children:s.jsx(N,{size:24,style:{color:Ne,animation:"spin 1s linear infinite"}})}),s.jsx("style",{children:"\n          @keyframes spin {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n          }\n        "})]}):s.jsxs("div",{style:{background:_e,border:`1px solid ${Fe}`,borderRadius:12,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:16,borderBottom:`1px solid ${Fe}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx("h3",{style:{fontSize:16,fontWeight:600,color:Pe,margin:0},children:"Payout History"}),s.jsx("button",{onClick:d,title:"Refresh",style:{padding:8,background:"transparent",border:"none",borderRadius:6,cursor:"pointer",color:Ne},onMouseEnter:e=>e.currentTarget.style.background=Ue,onMouseLeave:e=>e.currentTarget.style.background="transparent",children:s.jsx(N,{size:16})})]}),o&&s.jsx("div",{style:{padding:16,background:qe,color:Ve,fontSize:13},children:o}),0===t.length?s.jsxs("div",{style:{padding:32,textAlign:"center",color:Ne},children:[s.jsx("p",{style:{margin:0,fontSize:14},children:"No payouts yet"}),s.jsx("p",{style:{margin:"8px 0 0",fontSize:13},children:"Payouts appear here when USDC is converted to USD"})]}):s.jsx("div",{style:{overflowX:"auto"},children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{background:Ee},children:[s.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ne,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"Date"}),s.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ne,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"USDC Amount"}),s.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ne,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"USD Deposited"}),s.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ne,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"Fee"}),s.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ne,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"Status"}),s.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ne,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"Transaction"})]})}),s.jsx("tbody",{children:t.map((e,t)=>{const n=c[e.status],i=n.icon;return s.jsxs("tr",{style:{borderTop:t>0?`1px solid ${Fe}`:void 0},onMouseEnter:e=>e.currentTarget.style.background=Ee,onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[s.jsx("td",{style:{padding:"12px 16px",fontSize:13,color:Le},children:(r=e.initiated_at,new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}))}),s.jsxs("td",{style:{padding:"12px 16px",fontSize:13,fontWeight:500,color:Pe},children:["$",Number(e.usdc_amount).toFixed(2)]}),s.jsxs("td",{style:{padding:"12px 16px",fontSize:13,fontWeight:600,color:Ye},children:["$",Number(e.usd_amount).toFixed(2)]}),s.jsxs("td",{style:{padding:"12px 16px",fontSize:13,color:Ne},children:["$",Number(e.fee_amount).toFixed(2)]}),s.jsx("td",{style:{padding:"12px 16px"},children:s.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6,padding:"4px 10px",background:n.bgColor,borderRadius:20},children:[s.jsx(i,{size:14,style:{color:n.color}}),s.jsx("span",{style:{fontSize:12,fontWeight:500,color:n.color},children:n.label})]})}),s.jsx("td",{style:{padding:"12px 16px"},children:e.source_tx_signature&&s.jsxs("a",{href:`https://solscan.io/tx/${e.source_tx_signature}`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:4,fontSize:13,color:Ke,textDecoration:"none"},onMouseEnter:e=>e.currentTarget.style.textDecoration="underline",onMouseLeave:e=>e.currentTarget.style.textDecoration="none",children:["View",s.jsx(L,{size:12})]})})]},e.id);var r})})]})})]})};async function Je(){try{const e=await fetch(`${T}/api/bridge/liquidation-addresses/`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch liquidation addresses");const t=await e.json(),n=t.results||t||[];return n.find(e=>e.is_primary)||n[0]||null}catch(e){return null}}async function Ze(t,n,i){const r=W(),s=new e($),a=new e(n),l=await M(s,t,!1,z),d=await M(s,a,!0,z),c=new o;await r.getAccountInfo(d)||c.add(le(t,d,a,s,z,w));const p=BigInt(Math.floor(i*Math.pow(10,U)));return c.add(ce(l,d,t,p,[],z)),c}const et="#0f172a",tt="#1e293b",nt="#334155",it="#0f172a",rt="#334155",st="#f8fafc",ot="#cbd5e1",at="#94a3b8",lt="#f59e0b",dt="#10b981",ct="rgba(16,185,129,0.15)",pt="#ef4444",xt="rgba(239,68,68,0.15)",ut="rgba(245,158,11,0.15)",gt=({walletAddress:e,onWithdrawComplete:t,className:n=""})=>{const[i,r]=a.useState(""),[o,l]=a.useState(null),[d,c]=a.useState(null),[p,x]=a.useState(!1),[u,g]=a.useState(!1),[f,y]=a.useState(null),[h,b]=a.useState(null);a.useEffect(()=>{m(),S()},[e]);const m=async()=>{if(e){g(!0);try{const t=await D(e);l(t)}catch(t){}finally{g(!1)}}},S=async()=>{const e=await Je();c(e)};return s.jsxs("div",{className:n,style:{backgroundColor:tt,borderRadius:"12px",padding:"24px",border:`1px solid ${rt}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:ut,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(ee,{size:20,color:lt})}),s.jsxs("div",{children:[s.jsx("h3",{style:{color:st,fontSize:"18px",fontWeight:600,margin:0},children:"Withdraw to Bank"}),s.jsx("p",{style:{color:at,fontSize:"14px",margin:0},children:"Convert USDC to USD and deposit to your bank"})]})]}),s.jsxs("div",{style:{backgroundColor:et,borderRadius:"8px",padding:"16px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(V,{size:18,color:at}),s.jsx("span",{style:{color:ot,fontSize:"14px"},children:"Available Balance"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u?s.jsx(q,{size:16,color:at,className:"animate-spin"}):s.jsx("span",{style:{color:st,fontSize:"18px",fontWeight:600},children:null!==o?`${o.toFixed(2)} USDC`:"-- USDC"}),s.jsx("button",{onClick:m,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex"},title:"Refresh balance",children:s.jsx(N,{size:14,color:at})})]})]}),(null==d?void 0:d.external_account)&&s.jsxs("div",{style:{backgroundColor:et,borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx(te,{size:18,color:at}),s.jsxs("div",{children:[s.jsx("span",{style:{color:ot,fontSize:"14px"},children:d.external_account.bank_name}),s.jsxs("span",{style:{color:at,fontSize:"14px",marginLeft:"8px"},children:["****",d.external_account.account_last_four]})]})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",color:ot,fontSize:"14px",marginBottom:"8px"},children:"Amount (USDC)"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:"text",value:i,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&(r(t),y(null),b(null))},placeholder:"0.00",disabled:p,style:{width:"100%",padding:"12px 70px 12px 16px",backgroundColor:it,border:`1px solid ${f?pt:rt}`,borderRadius:"8px",color:st,fontSize:"18px",outline:"none",boxSizing:"border-box"}}),s.jsx("button",{onClick:()=>{null!==o&&r(o.toString())},disabled:p||null===o,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",backgroundColor:nt,color:lt,border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"MAX"})]}),s.jsx("p",{style:{color:at,fontSize:"12px",marginTop:"4px"},children:"Minimum withdrawal: $10 USDC"})]}),f&&s.jsxs("div",{style:{backgroundColor:xt,border:`1px solid ${pt}`,borderRadius:"8px",padding:"12px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(j,{size:18,color:pt}),s.jsx("span",{style:{color:pt,fontSize:"14px"},children:f})]}),h&&s.jsxs("div",{style:{backgroundColor:ct,border:`1px solid ${dt}`,borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[s.jsx(I,{size:18,color:dt}),s.jsx("span",{style:{color:dt,fontSize:"14px",fontWeight:600},children:"Withdrawal submitted!"})]}),s.jsx("p",{style:{color:ot,fontSize:"13px",margin:"0 0 8px 0"},children:"Your USDC has been sent to Bridge. It will be converted to USD and deposited to your bank within 1-2 business days."}),s.jsxs("a",{href:h.explorerLink,target:"_blank",rel:"noopener noreferrer",style:{color:lt,fontSize:"13px",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"4px"},children:["View transaction ",s.jsx(L,{size:12})]})]}),s.jsx("button",{onClick:async()=>{const e=parseFloat(i);if(!i||isNaN(e)||e<=0)y("Please enter a valid amount");else if(e<10)y("Minimum withdrawal is $10 USDC");else if(null!==o&&e>o)y("Insufficient balance");else if(d){x(!0),y(null),b(null);try{const n=await async function(e){try{if(e<=0)return{success:!1,error:"Amount must be greater than 0"};const t=await Je();if(!t)return{success:!1,error:"No liquidation address found. Please complete Bridge setup first."};const n=await B(),i=await D(n.toString());if(i<e)return{success:!1,error:`Insufficient USDC balance. Available: ${i.toFixed(2)} USDC`};const r=await Ze(n,t.address,e),s=await _(r);return{success:!0,signature:s,explorerLink:E(s)}}catch(f){return{success:!1,error:f.message||"Failed to send transaction"}}}(e);n.success&&n.signature?(b({signature:n.signature,explorerLink:n.explorerLink||E(n.signature)}),r(""),m(),null==t||t()):y(n.error||"Withdrawal failed")}catch(n){y(n.message||"Failed to process withdrawal")}finally{x(!1)}}else y("No bank account linked. Please complete Bridge setup first.")},disabled:p||!i||!d,style:{width:"100%",padding:"14px",backgroundColor:p||!i?nt:lt,color:p||!i?at:et,border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:600,cursor:p||!i?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:p?s.jsxs(s.Fragment,{children:[s.jsx(q,{size:18,className:"animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(te,{size:18}),"Withdraw to Bank"]})}),s.jsx("p",{style:{color:at,fontSize:"12px",marginTop:"12px",textAlign:"center"},children:"Powered by Bridge.xyz. You'll be asked to authenticate with Web3Auth to sign the transaction."})]})},ft="#0f172a",yt="#1e293b",ht="#334155",bt="#0f172a",mt="#334155",jt="#f8fafc",St="#cbd5e1",kt="#94a3b8",vt="#f59e0b",zt="#10b981",wt="rgba(16,185,129,0.15)",Ct="#ef4444",It="rgba(239,68,68,0.15)",At="#f59e0b",Tt="rgba(245,158,11,0.15)",Rt="#3b82f6",Wt="rgba(59,130,246,0.15)",$t=({walletAddress:t,onSendComplete:n,className:i=""})=>{const[r,o]=a.useState(""),[l,d]=a.useState(""),[c,p]=a.useState(null),[x,u]=a.useState(null),[g,f]=a.useState(!1),[y,h]=a.useState(!1),[b,m]=a.useState(null),[S,v]=a.useState(null),[w,C]=a.useState(null),[A,T]=a.useState(!1),[U,Y]=a.useState(null);a.useEffect(()=>{H()},[t]),a.useEffect(()=>{r.length>=32?O(r):(C(null),T(!1),Y(null))},[r]);const H=async()=>{if(t){h(!0);try{const[e,n]=await Promise.all([D(t),F(t)]);p(e),u(n)}catch(e){}finally{h(!1)}}},O=async n=>{const i=R(n);if(C(i),i&&n!==t)try{const t=await async function(t){if(!R(t))return!1;const n=W(),i=new e($),r=new e(t),s=await M(i,r,!0,z);return null===await n.getAccountInfo(s)}(n);T(t);const i=await async function(e,t=!1){const n=W();let i=0;t&&(i=await n.getMinimumBalanceForRentExemption(165));return(5e3+i)/1e9}(0,t);Y(i)}catch(r){}};return s.jsxs("div",{className:i,style:{backgroundColor:yt,borderRadius:"12px",padding:"24px",border:`1px solid ${mt}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:Wt,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(G,{size:20,color:Rt})}),s.jsxs("div",{children:[s.jsx("h3",{style:{color:jt,fontSize:"18px",fontWeight:600,margin:0},children:"Send USDC"}),s.jsx("p",{style:{color:kt,fontSize:"14px",margin:0},children:"Transfer USDC to any Solana wallet"})]})]}),s.jsxs("div",{style:{backgroundColor:ft,borderRadius:"8px",padding:"16px",marginBottom:"16px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(V,{size:16,color:kt}),s.jsx("span",{style:{color:St,fontSize:"14px"},children:"USDC Balance"})]}),s.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:y?s.jsx(q,{size:14,color:kt,className:"animate-spin"}):s.jsx("span",{style:{color:jt,fontSize:"16px",fontWeight:600},children:null!==c?`${c.toFixed(2)} USDC`:"-- USDC"})})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{style:{color:kt,fontSize:"12px"},children:"SOL (for fees)"}),s.jsx("span",{style:{color:kt,fontSize:"12px"},children:null!==x?`${x.toFixed(4)} SOL`:"-- SOL"})]}),s.jsxs("button",{onClick:H,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",marginTop:"8px",display:"flex",alignItems:"center",gap:"4px",color:kt,fontSize:"12px"},children:[s.jsx(N,{size:12})," Refresh"]})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",color:St,fontSize:"14px",marginBottom:"8px"},children:"Recipient Address"}),s.jsx("input",{type:"text",value:r,onChange:e=>{o(e.target.value.trim()),m(null),v(null)},placeholder:"Enter Solana wallet address",disabled:g,style:{width:"100%",padding:"12px 16px",backgroundColor:bt,border:`1px solid ${!1===w?Ct:!0===w?zt:mt}`,borderRadius:"8px",color:jt,fontSize:"14px",outline:"none",boxSizing:"border-box",fontFamily:"monospace"}}),!1===w&&s.jsx("p",{style:{color:Ct,fontSize:"12px",marginTop:"4px"},children:"Invalid Solana address"}),!0===w&&r&&s.jsxs("a",{href:P(r),target:"_blank",rel:"noopener noreferrer",style:{color:kt,fontSize:"12px",marginTop:"4px",display:"inline-flex",alignItems:"center",gap:"4px",textDecoration:"none"},children:["View on Solscan ",s.jsx(L,{size:10})]})]}),A&&s.jsxs("div",{style:{backgroundColor:Tt,border:`1px solid ${At}`,borderRadius:"8px",padding:"12px",marginBottom:"16px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[s.jsx(k,{size:16,color:At,style:{marginTop:"2px"}}),s.jsxs("div",{children:[s.jsx("span",{style:{color:At,fontSize:"13px"},children:"Recipient doesn't have a USDC account. One will be created automatically."}),null!==U&&s.jsxs("p",{style:{color:kt,fontSize:"12px",margin:"4px 0 0 0"},children:["Estimated fee: ~",U.toFixed(5)," SOL"]})]})]}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("label",{style:{display:"block",color:St,fontSize:"14px",marginBottom:"8px"},children:"Amount (USDC)"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:"text",value:l,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&(d(t),m(null),v(null))},placeholder:"0.00",disabled:g,style:{width:"100%",padding:"12px 70px 12px 16px",backgroundColor:bt,border:`1px solid ${b?Ct:mt}`,borderRadius:"8px",color:jt,fontSize:"18px",outline:"none",boxSizing:"border-box"}}),s.jsx("button",{onClick:()=>{null!==c&&d(c.toString())},disabled:g||null===c,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",backgroundColor:ht,color:vt,border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"MAX"})]})]}),b&&s.jsxs("div",{style:{backgroundColor:It,border:`1px solid ${Ct}`,borderRadius:"8px",padding:"12px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(j,{size:18,color:Ct}),s.jsx("span",{style:{color:Ct,fontSize:"14px"},children:b})]}),S&&s.jsxs("div",{style:{backgroundColor:wt,border:`1px solid ${zt}`,borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[s.jsx(I,{size:18,color:zt}),s.jsx("span",{style:{color:zt,fontSize:"14px",fontWeight:600},children:"Transfer successful!"})]}),s.jsxs("a",{href:S.explorerLink,target:"_blank",rel:"noopener noreferrer",style:{color:vt,fontSize:"13px",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"4px"},children:["View transaction ",s.jsx(L,{size:12})]})]}),s.jsx("button",{onClick:async()=>{const e=parseFloat(l);if(r)if(R(r))if(r!==t)if(!l||isNaN(e)||e<=0)m("Please enter a valid amount");else if(null!==c&&e>c)m("Insufficient USDC balance");else if(null!==x&&x<.01)m("Insufficient SOL for transaction fees. Need at least 0.01 SOL.");else{f(!0),m(null),v(null);try{const t=await async function(e,t){try{if(!R(e))return{success:!1,error:"Invalid Solana address"};if(t<=0)return{success:!1,error:"Amount must be greater than 0"};const n=await B();if(n.toString()===e)return{success:!1,error:"Cannot send to your own wallet"};const i=await D(n.toString());if(i<t)return{success:!1,error:`Insufficient USDC balance. Available: ${i.toFixed(2)} USDC`};const r=await Ze(n,e,t),s=await _(r);return{success:!0,signature:s,explorerLink:E(s)}}catch(b){return{success:!1,error:b.message||"Failed to send transaction"}}}(r,e);t.success&&t.signature?(v({signature:t.signature,explorerLink:t.explorerLink||E(t.signature)}),d(""),o(""),H(),null==n||n()):m(t.error||"Transfer failed")}catch(i){m(i.message||"Failed to send transaction")}finally{f(!1)}}else m("Cannot send to your own wallet");else m("Invalid Solana address");else m("Please enter a recipient address")},disabled:g||!l||!r||!1===w,style:{width:"100%",padding:"14px",backgroundColor:!g&&l&&r?Rt:ht,color:!g&&l&&r?jt:kt,border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:600,cursor:!g&&l&&r?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:g?s.jsxs(s.Fragment,{children:[s.jsx(q,{size:18,className:"animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(G,{size:18}),"Send USDC"]})}),s.jsx("p",{style:{color:kt,fontSize:"12px",marginTop:"12px",textAlign:"center"},children:"You'll be asked to authenticate with Web3Auth to sign the transaction."})]})},Mt="#0f172a",Bt="#1e293b",Dt="#334155",_t="#334155",Et="#475569",Ut="#f8fafc",Ft="#cbd5e1",Pt="#94a3b8",Lt="#f59e0b",Nt="#fbbf24",Yt="#10b981",Ht="rgba(16,185,129,0.1)",Vt="#ef4444",qt="rgba(239,68,68,0.1)",Gt="rgba(245,158,11,0.1)",Ot="#3b82f6",Kt="rgba(59,130,246,0.1)",Xt=()=>{const[e,t]=a.useState(null),[n,i]=a.useState([]),[r,o]=a.useState(null),[d,c]=a.useState(!0),[p,x]=a.useState(null),[u,g]=a.useState(!1),[S,k]=a.useState(!1),[v,z]=a.useState("withdraw"),w=async()=>{c(!0),x(null);try{const[e,n,r]=await Promise.all([y(),h().catch(()=>({accounts:[]})),fetch(`${T}/api/users/profile/`,{credentials:"include"}).then(e=>e.ok?e.json():null).catch(()=>null)]);t(e),i(n.accounts||[]),(null==r?void 0:r.wallet_address)&&o(r.wallet_address)}catch(e){x(e instanceof Error?e.message:"Failed to load payout settings")}finally{c(!1)}};a.useEffect(()=>{w()},[]);const C=async()=>{g(!0);try{await b(),await w()}catch(e){x(e instanceof Error?e.message:"Failed to link bank account")}finally{g(!1)}},I=(()=>{let t=0;return"approved"===(null==e?void 0:e.kyc_status)&&t++,n.length>0&&t++,(null==e?void 0:e.has_liquidation_address)&&t++,{completed:t,total:3,percentage:Math.round(t/3*100)}})();return d?s.jsxs("div",{style:{minHeight:"100vh",background:Mt,display:"flex",alignItems:"center",justifyContent:"center"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx(N,{size:40,style:{color:Lt,animation:"spin 1s linear infinite",marginBottom:16}}),s.jsx("div",{style:{color:Pt,fontSize:14},children:"Loading payout settings..."})]}),s.jsx("style",{children:"\n          @keyframes spin {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n          }\n        "})]}):s.jsx("div",{style:{minHeight:"100vh",background:Mt,padding:"24px 16px 48px"},children:s.jsxs("div",{style:{maxWidth:900,margin:"0 auto"},children:[s.jsxs("div",{style:{marginBottom:32},children:[s.jsxs(l,{to:"/profile",style:{display:"inline-flex",alignItems:"center",gap:8,color:Pt,textDecoration:"none",fontSize:14,marginBottom:16,transition:"color 0.2s"},onMouseEnter:e=>e.currentTarget.style.color=Ut,onMouseLeave:e=>e.currentTarget.style.color=Pt,children:[s.jsx(O,{size:16}),"Back to Profile"]}),s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:16},children:[s.jsxs("div",{children:[s.jsxs("h1",{style:{color:Ut,fontSize:28,fontWeight:700,margin:0,display:"flex",alignItems:"center",gap:12},children:[s.jsx(te,{size:32,style:{color:Lt}}),"Payout Settings"]}),s.jsx("p",{style:{color:Pt,marginTop:8,fontSize:15},children:"Configure how you receive your earnings from sales"})]}),s.jsxs("div",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:12,padding:"16px 20px",minWidth:200},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[s.jsx("span",{style:{color:Ft,fontSize:13},children:"Setup Progress"}),s.jsxs("span",{style:{color:100===I.percentage?Yt:Lt,fontSize:14,fontWeight:600},children:[I.completed,"/",I.total]})]}),s.jsx("div",{style:{height:6,background:Dt,borderRadius:3,overflow:"hidden"},children:s.jsx("div",{style:{height:"100%",width:`${I.percentage}%`,background:100===I.percentage?`linear-gradient(90deg, ${Yt}, #34d399)`:`linear-gradient(90deg, ${Lt}, ${Nt})`,borderRadius:3,transition:"width 0.3s ease"}})})]})]})]}),p&&s.jsxs("div",{style:{background:qt,border:`1px solid ${Vt}`,borderRadius:12,padding:16,marginBottom:24,display:"flex",alignItems:"center",gap:12},children:[s.jsx(j,{size:20,style:{color:Vt,flexShrink:0}}),s.jsx("span",{style:{color:Vt,flex:1,fontSize:14},children:p}),s.jsx("button",{onClick:()=>x(null),style:{background:"transparent",border:"none",color:Vt,cursor:"pointer",padding:4,fontSize:18,lineHeight:1},children:"×"})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[s.jsxs("section",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:16,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${_t}`,display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{style:{width:40,height:40,borderRadius:10,background:"approved"===(null==e?void 0:e.kyc_status)?Ht:`${Lt}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(K,{size:20,style:{color:"approved"===(null==e?void 0:e.kyc_status)?Yt:Lt}})}),s.jsxs("div",{style:{flex:1},children:[s.jsx("h2",{style:{color:Ut,fontSize:16,fontWeight:600,margin:0},children:"Step 1: Identity Verification"}),s.jsx("p",{style:{color:Pt,fontSize:13,margin:"4px 0 0"},children:"Verify your identity to enable payouts"})]}),"approved"===(null==e?void 0:e.kyc_status)&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:Yt,fontSize:13,fontWeight:600},children:[s.jsx(X,{size:16}),"Verified"]})]}),s.jsx("div",{style:{padding:24},children:s.jsx(ve,{status:(null==e?void 0:e.kyc_status)||null,hasCustomer:(null==e?void 0:e.has_bridge_customer)||!1,onStatusChange:w})})]}),s.jsxs("section",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:16,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${_t}`,display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{style:{width:40,height:40,borderRadius:10,background:n.length>0?Ht:`${Lt}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(f,{size:20,style:{color:n.length>0?Yt:Lt}})}),s.jsxs("div",{style:{flex:1},children:[s.jsx("h2",{style:{color:Ut,fontSize:16,fontWeight:600,margin:0},children:"Step 2: Bank Accounts"}),s.jsx("p",{style:{color:Pt,fontSize:13,margin:"4px 0 0"},children:"Link your bank account for direct deposits"})]}),"approved"===(null==e?void 0:e.kyc_status)&&s.jsxs("button",{onClick:C,disabled:u,style:{display:"flex",alignItems:"center",gap:6,padding:"8px 16px",background:Lt,color:"#000",border:"none",borderRadius:8,fontSize:13,fontWeight:600,cursor:u?"not-allowed":"pointer",opacity:u?.6:1,transition:"all 0.2s"},children:[s.jsx(Q,{size:16}),u?"Linking...":"Link Account"]})]}),s.jsx("div",{style:{padding:24},children:"approved"!==(null==e?void 0:e.kyc_status)?s.jsxs("div",{style:{background:Dt,borderRadius:12,padding:32,textAlign:"center"},children:[s.jsx(A,{size:32,style:{color:Pt,marginBottom:12}}),s.jsx("p",{style:{color:Pt,margin:0,fontSize:14},children:"Complete identity verification first to link bank accounts"})]}):0===n.length?s.jsxs("div",{style:{background:`linear-gradient(135deg, ${Mt} 0%, ${Dt} 100%)`,border:`1px dashed ${Et}`,borderRadius:12,padding:32,textAlign:"center"},children:[s.jsx(J,{size:40,style:{color:Pt,marginBottom:16}}),s.jsx("p",{style:{color:Ft,margin:"0 0 16px",fontSize:15},children:"No bank accounts linked yet"}),s.jsx("p",{style:{color:Pt,margin:"0 0 20px",fontSize:13},children:"Link a bank account to receive direct deposits from your sales"}),s.jsxs("button",{onClick:C,disabled:u,style:{display:"inline-flex",alignItems:"center",gap:8,padding:"12px 24px",background:Lt,color:"#000",border:"none",borderRadius:10,fontSize:14,fontWeight:600,cursor:u?"not-allowed":"pointer",opacity:u?.6:1},children:[s.jsx(Q,{size:18}),u?"Linking...":"Link Your First Bank Account"]})]}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:n.map(e=>s.jsx(De,{account:e,onUpdate:w},e.id))})})]}),"approved"===(null==e?void 0:e.kyc_status)&&n.length>0&&s.jsxs("section",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:16,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${_t}`,display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{style:{width:40,height:40,borderRadius:10,background:(null==e?void 0:e.has_liquidation_address)?Ht:`${Lt}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(V,{size:20,style:{color:(null==e?void 0:e.has_liquidation_address)?Yt:Lt}})}),s.jsxs("div",{style:{flex:1},children:[s.jsx("h2",{style:{color:Ut,fontSize:16,fontWeight:600,margin:0},children:"Step 3: Payout Address"}),s.jsx("p",{style:{color:Pt,fontSize:13,margin:"4px 0 0"},children:"Enable automatic USDC to USD conversion"})]}),(null==e?void 0:e.has_liquidation_address)&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:Yt,fontSize:13,fontWeight:600},children:[s.jsx(X,{size:16}),"Active"]})]}),s.jsx("div",{style:{padding:24},children:(null==e?void 0:e.has_liquidation_address)?s.jsxs("div",{style:{background:Ht,border:`1px solid ${Yt}40`,borderRadius:12,padding:20,display:"flex",alignItems:"flex-start",gap:16},children:[s.jsx(X,{size:24,style:{color:Yt,flexShrink:0,marginTop:2}}),s.jsxs("div",{children:[s.jsx("div",{style:{color:Yt,fontWeight:600,fontSize:15,marginBottom:4},children:"Payout Address Active"}),s.jsx("p",{style:{color:Ft,margin:0,fontSize:13,lineHeight:1.5},children:"Your payout address is set up and ready to receive USDC. Funds will automatically convert to USD and deposit to your bank account."})]})]}):s.jsxs("div",{style:{background:`linear-gradient(135deg, ${Mt} 0%, ${Dt} 100%)`,border:`1px dashed ${Et}`,borderRadius:12,padding:32,textAlign:"center"},children:[s.jsx(se,{size:40,style:{color:Lt,marginBottom:16}}),s.jsx("p",{style:{color:Ft,margin:"0 0 12px",fontSize:15},children:"Create a payout address for automatic conversions"}),s.jsx("p",{style:{color:Pt,margin:"0 0 20px",fontSize:13,maxWidth:400,marginLeft:"auto",marginRight:"auto"},children:"Once created, earnings sent to this address will automatically convert to USD and deposit to your bank account"}),s.jsx("button",{onClick:async()=>{const e=n.find(e=>e.is_default)||n[0];if(e){k(!0);try{await m(e.id),await w()}catch(t){x(t instanceof Error?t.message:"Failed to create payout address")}finally{k(!1)}}else x("Please link a bank account first")},disabled:S,style:{display:"inline-flex",alignItems:"center",gap:8,padding:"12px 24px",background:Yt,color:"#fff",border:"none",borderRadius:10,fontSize:14,fontWeight:600,cursor:S?"not-allowed":"pointer",opacity:S?.6:1},children:S?s.jsxs(s.Fragment,{children:[s.jsx(N,{size:16,style:{animation:"spin 1s linear infinite"}}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Q,{size:18}),"Create Payout Address"]})})]})})]}),r&&s.jsxs("section",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:16,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${_t}`,display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{style:{width:40,height:40,borderRadius:10,background:`${Lt}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(G,{size:20,style:{color:Lt}})}),s.jsxs("div",{style:{flex:1},children:[s.jsx("h2",{style:{color:Ut,fontSize:16,fontWeight:600,margin:0},children:"Transfer USDC"}),s.jsx("p",{style:{color:Pt,fontSize:13,margin:"4px 0 0"},children:"Withdraw to bank or send to external wallet"})]})]}),s.jsxs("div",{style:{display:"flex",borderBottom:`1px solid ${_t}`,padding:"0 24px"},children:[s.jsxs("button",{onClick:()=>z("withdraw"),style:{padding:"12px 20px",background:"none",border:"none",color:"withdraw"===v?Lt:Pt,fontSize:14,fontWeight:600,cursor:"pointer",borderBottom:"withdraw"===v?`2px solid ${Lt}`:"2px solid transparent",marginBottom:-1,display:"flex",alignItems:"center",gap:8},children:[s.jsx(ee,{size:16}),"Withdraw to Bank"]}),s.jsxs("button",{onClick:()=>z("send"),style:{padding:"12px 20px",background:"none",border:"none",color:"send"===v?Ot:Pt,fontSize:14,fontWeight:600,cursor:"pointer",borderBottom:"send"===v?`2px solid ${Ot}`:"2px solid transparent",marginBottom:-1,display:"flex",alignItems:"center",gap:8},children:[s.jsx(G,{size:16}),"Send to Wallet"]})]}),s.jsx("div",{style:{padding:24},children:"withdraw"===v?(null==e?void 0:e.is_fully_setup)?s.jsx(gt,{walletAddress:r,onWithdrawComplete:w}):s.jsxs("div",{style:{background:Dt,borderRadius:12,padding:32,textAlign:"center"},children:[s.jsx(te,{size:40,style:{color:Pt,marginBottom:16}}),s.jsx("p",{style:{color:Ft,margin:"0 0 8px",fontSize:15},children:"Complete Bridge Setup First"}),s.jsx("p",{style:{color:Pt,margin:0,fontSize:13},children:"Finish identity verification, link a bank account, and create a payout address to enable withdrawals."})]}):s.jsx($t,{walletAddress:r,onSendComplete:w})})]}),!r&&s.jsxs("section",{style:{background:Gt,border:`1px solid ${Lt}40`,borderRadius:16,padding:24,display:"flex",alignItems:"flex-start",gap:16},children:[s.jsx(V,{size:24,style:{color:Lt,flexShrink:0}}),s.jsxs("div",{children:[s.jsx("h3",{style:{color:Ut,fontSize:16,fontWeight:600,margin:"0 0 8px"},children:"Wallet Not Connected"}),s.jsxs("p",{style:{color:Ft,margin:0,fontSize:14},children:["You need to connect a Web3Auth wallet to transfer USDC. Go to your"," ",s.jsx(l,{to:"/profile",style:{color:Lt},children:"Profile"})," to set up your wallet."]})]})]}),(null==e?void 0:e.is_fully_setup)&&s.jsxs("section",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:16,overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${_t}`,display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{style:{width:40,height:40,borderRadius:10,background:`${Lt}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(re,{size:20,style:{color:Lt}})}),s.jsxs("div",{children:[s.jsx("h2",{style:{color:Ut,fontSize:16,fontWeight:600,margin:0},children:"Payout History"}),s.jsx("p",{style:{color:Pt,fontSize:13,margin:"4px 0 0"},children:"View your past payouts and transactions"})]})]}),s.jsx("div",{style:{padding:24},children:s.jsx(Qe,{})})]}),s.jsx("section",{style:{background:`linear-gradient(135deg, ${Kt} 0%, rgba(59,130,246,0.05) 100%)`,border:`1px solid ${Ot}30`,borderRadius:16,padding:24},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:16},children:[s.jsx("div",{style:{width:44,height:44,borderRadius:12,background:Kt,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:s.jsx(Z,{size:22,style:{color:Ot}})}),s.jsxs("div",{style:{flex:1},children:[s.jsx("h3",{style:{color:Ut,fontSize:16,fontWeight:600,margin:"0 0 12px"},children:"How Direct Bank Deposits Work"}),s.jsx("div",{style:{display:"grid",gap:10},children:[{num:1,text:"Complete identity verification (KYC) - usually takes a few minutes"},{num:2,text:"Link your bank account securely via Plaid or manual entry"},{num:3,text:"Create a payout address to enable USDC to USD conversion"},{num:4,text:"Transfer USDC from your wallet to withdraw to bank or send externally"},{num:5,text:"Withdrawals convert to USD and deposit within 1-2 business days"}].map(({num:e,text:t})=>s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[s.jsx("div",{style:{width:24,height:24,borderRadius:6,background:Ot,color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,flexShrink:0},children:e}),s.jsx("span",{style:{color:Ft,fontSize:14,lineHeight:1.5},children:t})]},e))}),s.jsx("p",{style:{color:Pt,fontSize:12,margin:"16px 0 0",paddingTop:12,borderTop:`1px solid ${Ot}20`},children:"Powered by Bridge.xyz. Funds typically arrive within 1-2 business days."})]})]})})]})]})})};export{Xt as PayoutSettingsPage,Xt as default};
