import{j as e}from"./web3auth-C90gi1IA.js";import{r,a as t}from"./router-zDWjfnwa.js";import{m as s,n as o,A as i,B as a}from"./index-D5Q4BM4R.js";import{A as n}from"./arrow-left-BWz9aOxQ.js";import{T as l}from"./trash-2-C6hdATr7.js";import{S as d}from"./sparkles-CyI7bm90.js";import{C as c}from"./circle-alert-DJOXlRIH.js";import{C as p}from"./credit-card-DprNcvXK.js";import{H as x}from"./heart-CqEt0qxO.js";import"./vendor-Cfs_Iq82.js";function g(){const{cart:g,loading:u,error:m,removeFromCart:h,clearCart:f,checkout:y,refreshCart:b}=s(),[v,j]=r.useState(!1),[C,w]=r.useState(null),S=t();if(u)return e.jsxs("div",{className:"rb-cart-page rb-cart-page--loading",style:{padding:"60px 20px",textAlign:"center",color:"var(--text-muted, #94a3b8)"},children:[e.jsx(o,{size:48,style:{opacity:.5,marginBottom:"16px"}}),e.jsx("div",{children:"Loading cart..."})]});if(!g||0===g.item_count)return e.jsxs("div",{className:"rb-cart-page rb-cart-page--empty",style:{padding:"60px 20px",textAlign:"center",maxWidth:"500px",margin:"0 auto"},children:[e.jsx(o,{size:64,style:{opacity:.3,marginBottom:"24px"}}),e.jsx("h1",{style:{fontSize:"24px",fontWeight:700,marginBottom:"12px"},children:"Your Cart is Empty"}),e.jsx("p",{style:{color:"var(--text-muted, #94a3b8)",marginBottom:"32px"},children:"Browse chapters and add them to your cart to purchase multiple items at once and save on fees."}),e.jsxs("button",{onClick:()=>S("/"),style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"14px 28px",backgroundColor:"var(--accent, #3b82f6)",color:"white",border:"none",borderRadius:"10px",fontSize:"16px",fontWeight:600,cursor:"pointer"},children:[e.jsx(n,{size:18}),"Browse Marketplace"]})]});const k=parseFloat(g.savings_vs_individual||"0")>0;return e.jsxs("div",{className:"rb-cart-page",style:{maxWidth:"900px",margin:"0 auto",padding:"40px 20px"},children:[e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:700,marginBottom:"8px"},children:"Shopping Cart"}),e.jsxs("p",{style:{color:"var(--text-muted, #94a3b8)"},children:[g.item_count," ",1===g.item_count?"item":"items"," in your cart"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 340px",gap:"32px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[g.items.map(r=>{let t=null;return r.cover_url&&(t=r.cover_url.startsWith("http")?r.cover_url:`${i}${r.cover_url}`),e.jsxs("div",{style:{display:"flex",gap:"16px",padding:"16px",backgroundColor:"var(--bg-secondary, #1e293b)",borderRadius:"12px",border:"1px solid var(--border, #334155)",opacity:C===r.id?.5:1,transition:"opacity 0.2s ease"},children:[e.jsx("div",{style:{width:"80px",height:"100px",flexShrink:0,borderRadius:"8px",overflow:"hidden",backgroundColor:"var(--bg-tertiary, #0f172a)",display:"flex",alignItems:"center",justifyContent:"center"},children:t?e.jsx("img",{src:t,alt:r.title,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(a,{size:32,style:{color:"var(--text-muted, #64748b)",opacity:.5}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.title}),r.book_title&&e.jsxs("p",{style:{fontSize:"13px",color:"var(--text-muted, #94a3b8)",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[r.book_title," â€¢ Chapter ",r.chapter_order]}),e.jsxs("p",{style:{fontSize:"13px",color:"var(--text-muted, #64748b)"},children:["By @",r.creator_username]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"space-between",flexShrink:0},children:[e.jsxs("span",{style:{fontSize:"18px",fontWeight:600,color:"var(--accent, #3b82f6)"},children:["$",r.unit_price]}),e.jsx("button",{onClick:()=>async function(e){w(e),await h(e),w(null)}(r.id),disabled:C===r.id,style:{padding:"8px",backgroundColor:"transparent",color:"var(--text-error, #ef4444)",border:"1px solid var(--text-error, #ef4444)",borderRadius:"8px",cursor:"pointer",opacity:C===r.id?.5:1},title:"Remove from cart",children:e.jsx(l,{size:16})})]})]},r.id)}),e.jsx("button",{onClick:async function(){window.confirm("Remove all items from your cart?")&&await f()},style:{alignSelf:"flex-start",padding:"8px 16px",backgroundColor:"transparent",color:"var(--text-muted, #94a3b8)",border:"1px solid var(--border, #334155)",borderRadius:"6px",fontSize:"13px",cursor:"pointer",marginTop:"8px"},children:"Clear Cart"})]}),e.jsxs("div",{style:{padding:"24px",backgroundColor:"var(--bg-secondary, #1e293b)",borderRadius:"16px",border:"1px solid var(--border, #334155)",height:"fit-content",position:"sticky",top:"100px"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:600,marginBottom:"20px"},children:"Order Summary"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{style:{color:"var(--text-muted, #94a3b8)"},children:["Subtotal (",g.item_count," items)"]}),e.jsxs("span",{children:["$",g.subtotal]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"var(--text-muted, #94a3b8)"},children:"Credit Card Fee"}),e.jsxs("span",{children:["$",g.credit_card_fee]})]}),k&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px 12px",backgroundColor:"var(--bg-success, #052e16)",borderRadius:"8px",border:"1px solid var(--border-success, #16a34a)"},children:[e.jsxs("span",{style:{color:"var(--text-success, #4ade80)",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(d,{size:14}),"Cart Savings"]}),e.jsxs("span",{style:{color:"var(--text-success, #4ade80)",fontWeight:600},children:["-$",g.savings_vs_individual]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"16px",borderTop:"1px solid var(--border, #334155)",fontSize:"20px",fontWeight:700},children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{style:{color:"var(--accent, #3b82f6)"},children:["$",g.total]})]})]}),m&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px",padding:"12px",backgroundColor:"var(--bg-error, #450a0a)",border:"1px solid var(--border-error, #ef4444)",borderRadius:"8px",color:"var(--text-error, #fca5a5)",fontSize:"14px"},children:[e.jsx(c,{size:16}),m]}),e.jsxs("button",{onClick:async function(){j(!0);const e=await y();e&&(window.location.href=e),j(!1)},disabled:v,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"16px 24px",backgroundColor:v?"var(--bg-disabled, #475569)":"#f59e0b",color:v?"#94a3b8":"#000",border:"none",borderRadius:"10px",fontSize:"16px",fontWeight:600,cursor:v?"not-allowed":"pointer",transition:"background-color 0.2s ease"},children:[e.jsx(p,{size:20}),v?"Processing...":`Checkout - $${g.total}`]}),e.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"var(--bg-tertiary, #0f172a)",borderRadius:"10px",fontSize:"13px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(x,{size:16,style:{color:"var(--text-success, #10b981)"}}),e.jsx("span",{style:{fontWeight:600,color:"var(--text-success, #10b981)"},children:"Supporting Creators"})]}),e.jsx("p",{style:{color:"var(--text-muted, #94a3b8)",lineHeight:"1.5"},children:"Creators receive 90% of each item's price. By using cart checkout, you save on credit card fees while supporting the creators you love."})]}),e.jsxs("div",{style:{marginTop:"12px",padding:"10px 12px",backgroundColor:"var(--bg-warning, #422006)",borderRadius:"8px",fontSize:"12px",color:"var(--text-warning, #fcd34d)"},children:[e.jsx("strong",{children:"Test Mode:"})," Use card 4242 4242 4242 4242"]})]})]})]})}export{g as default};
//# sourceMappingURL=CartPage-Du05oupB.js.map
