const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web3auth-BkZxjmxM.js","assets/router-cVcvJ1e3.js","assets/vendor-Cfs_Iq82.js"])))=>i.map(i=>d[i]);
import{j as e,_ as t,c as r}from"./web3auth-BkZxjmxM.js";import{r as o,a as n,L as i,R as a,f as s}from"./router-cVcvJ1e3.js";import{P as l}from"./PreviewModal-C-ZYWLot.js";import{c as d,W as c,e as p,f as g,C as u,a as x,D as b,A as h,U as f,S as y,h as v,g as m,i as j,d as k,B as S,j as w,k as z,F as _,l as C,X as T}from"./index-Clb-55uW.js";import{B as W}from"./BalanceDisplay-Bf6KbNXu.js";import{L as R}from"./loader-CGPtF09_.js";import{G as B,A as I,U as $}from"./user-check-CEs6QxgJ.js";import{I as P,C as M}from"./info-DRgV8fDi.js";import{E as A}from"./external-link-CedBgNxg.js";import{T as F,C as E}from"./triangle-alert-CUyZYc7B.js";import{C as L}from"./circle-alert-qhyYh1Bv.js";import{E as D}from"./eye-Btrj3ogq.js";import{g as N,u as O}from"./socialApi-BnIHOsdv.js";import{A as H}from"./arrow-right-Dl87Bn34.js";import{g as Y,a as U,M as X}from"./tierApi-B4VkWd90.js";import{Z as q}from"./zap-f8R91nxp.js";import{P as V}from"./pen-BozBOA3z.js";import{S as G,a as J}from"./square-C6kX_zTv.js";import{S as K}from"./shield-BwXZwLwT.js";import{B as Z}from"./briefcase-B18fvUlp.js";import{P as Q}from"./plus-D4JJxlft.js";import{F as ee}from"./file-text-Bgv-L30l.js";import{T as te}from"./trash-2-CuRyvxhn.js";import{L as re}from"./loader-circle-Cr8Dfevu.js";import"./vendor-Cfs_Iq82.js";import"./ComicPageRenderer-Efk6rsAs.js";import"./thumbs-up-BVuG1z4M.js";import"./send-CugJyVuD.js";import"./message-circle-B4RTv4xN.js";
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=d("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),ne=d("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ie=d("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ae=d("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);function se({walletAddress:n,walletProvider:i,onWalletUpdate:a}){const[s,l]=o.useState(!1),[d,f]=o.useState(null),[y,v]=o.useState(!1),[m,j]=o.useState(""),[k,S]=o.useState(""),w=async()=>{const e=await fetch(`${h}/api/auth/csrf/`,{credentials:"include"}),t=await e.json();return(null==t?void 0:t.csrfToken)||""},z=async()=>{j(""),v(!0);try{const{Web3Auth:r}=await t(async()=>{const{Web3Auth:e}=await import("./web3auth-BkZxjmxM.js").then(e=>e.f);return{Web3Auth:e}},__vite__mapDeps([0,1,2])),{CHAIN_NAMESPACES:o}=await t(async()=>{const{CHAIN_NAMESPACES:e}=await import("./web3auth-BkZxjmxM.js").then(e=>e.i);return{CHAIN_NAMESPACES:e}},__vite__mapDeps([0,1,2])),{SolanaPrivateKeyProvider:n}=await t(async()=>{const{SolanaPrivateKeyProvider:e}=await import("./web3auth-BkZxjmxM.js").then(e=>e.h);return{SolanaPrivateKeyProvider:e}},__vite__mapDeps([0,1,2])),i="BKECVnfm_tGc5XfDSuwBycgrP0N1sPen30bFwzRxdZFvXSDYzSzJ7tCdYYS3xJ0t_6xU-Qy8Slcr5oBCtK3kNKs",s="mainnet-beta",l="mainnet-beta"===s?"sapphire_mainnet":"sapphire_devnet",d={chainNamespace:o.SOLANA,chainId:"mainnet-beta"===s?"0x1":"0x3",rpcTarget:"https://mainnet.helius-rpc.com/?api-key=6936bb02-0105-492b-b71c-647cff1dc9ea"},c=new r({clientId:i,chainConfig:d,privateKeyProvider:new n({config:{chainConfig:d}}),web3AuthNetwork:l,uiConfig:{appName:"RenaissBlock",mode:"dark",loginMethodsOrder:["google","discord"],defaultLanguage:"en"}});await c.initModal();try{"connected"===c.status&&await c.logout()}catch(e){}await c.connect();const p=await c.getUserInfo(),g=(null==p?void 0:p.idToken)||(null==p?void 0:p.id_token);if(!g)throw new Error("Could not obtain Web3Auth token");const u=await w(),x=await fetch(`${h}/api/wallet/link/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":u,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({web3auth_token:g})});if(!x.ok){const e=await x.json().catch(()=>({})),t=e.error||e.message||"Failed to link wallet";throw new Error(t)}S("Wallet created and linked!"),f(null),a()}catch(e){j((null==e?void 0:e.message)||String(e))}finally{v(!1)}},_=async()=>{var e;j(""),v(!0);try{const e=window.solana;if(!e)throw new Error("No Solana wallet found. Please install Phantom, Backpack, or Solflare.");const t=(await e.connect()).publicKey.toString(),o=`Connect wallet to RenaissBlock\n\nNonce: ${Math.random().toString(36).substring(2,15)}\nTimestamp: ${Date.now()}`,n=(new TextEncoder).encode(o),i=await e.signMessage(n,"utf8"),s=r.from(i.signature).toString("base64"),l=await w(),d=await fetch(`${h}/api/wallet/link/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":l,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({wallet_address:t,signature:s,message:o})});if(!d.ok){const e=await d.json().catch(()=>({})),t=e.error||e.message||"Failed to link wallet";throw new Error(t)}S("External wallet connected!"),f(null),a()}catch(t){4001===(null==t?void 0:t.code)||(null==(e=null==t?void 0:t.message)?void 0:e.includes("User rejected"))?j("Connection cancelled"):j((null==t?void 0:t.message)||String(t))}finally{v(!1)}};if(!n)return e.jsxs("div",{style:{background:"var(--panel)",border:"1px solid var(--panel-border)",borderRadius:12,padding:16,marginBottom:16},children:[e.jsxs("div",{style:{fontWeight:600,color:"#f1f5f9",fontSize:16,marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx(c,{size:20})," Wallet Setup"]}),e.jsx("div",{style:{fontSize:13,color:"#94a3b8",marginBottom:16},children:"Connect a wallet to receive USDC payments and own NFTs."}),m&&e.jsx("div",{style:{background:"#ef444420",border:"1px solid #ef4444",borderRadius:8,padding:12,color:"#fca5a5",fontSize:13,marginBottom:12},children:m}),k&&e.jsx("div",{style:{background:"#10b98120",border:"1px solid #10b981",borderRadius:8,padding:12,color:"#6ee7b7",fontSize:13,marginBottom:12},children:k}),e.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:16},children:[e.jsx("button",{onClick:z,disabled:y,style:{background:y?"#6b7280":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:y?"not-allowed":"pointer",fontSize:14,transition:"all 0.2s"},onMouseOver:e=>{y||(e.currentTarget.style.transform="translateY(-2px)")},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)"},children:y?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(R,{size:16})," Creating..."]}):e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(B,{size:16})," Create Wallet with Web3Auth"]})}),e.jsx("button",{onClick:_,disabled:y,style:{background:"transparent",border:"1px solid #334155",color:"#cbd5e1",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:y?"not-allowed":"pointer",fontSize:14,transition:"all 0.2s"},onMouseOver:e=>{y||(e.currentTarget.style.borderColor="#cbd5e1",e.currentTarget.style.background="rgba(203, 213, 225, 0.05)")},onMouseOut:e=>{e.currentTarget.style.borderColor="#334155",e.currentTarget.style.background="transparent"},children:y?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(R,{size:16})," Connecting..."]}):e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(ie,{size:16})," Connect External Wallet"]})})]}),e.jsxs("div",{style:{fontSize:12,color:"#94a3b8",padding:12,background:"#0b1220",borderRadius:8,border:"1px solid #1f2937"},children:[e.jsxs("div",{style:{marginBottom:6,fontWeight:600,color:"#cbd5e1",display:"flex",alignItems:"center",gap:6},children:[e.jsx(P,{size:14})," Web3Auth (Recommended)"]}),e.jsx("div",{children:"Easiest option - create a wallet with Google/Discord. No browser extension needed. Your wallet is non-custodial and secured by social login."})]})]});const C="web3auth"===i?"Web3Auth":"External Wallet",T="web3auth"===i?e.jsx(B,{size:12}):e.jsx(ie,{size:12});return e.jsxs("div",{style:{background:"var(--panel)",border:"1px solid #10b981",borderRadius:12,padding:16,marginBottom:16,position:"relative"},children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(W,{size:"large",showRefresh:!0,showLabel:!0,compact:!1})}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(p,{size:20,style:{color:"#10b981"}}),e.jsx("span",{style:{fontWeight:600,color:"#f1f5f9",fontSize:16},children:"Wallet Connected"}),e.jsxs("span",{style:{fontSize:11,color:"#6ee7b7",background:"#10b98120",padding:"2px 8px",borderRadius:12,fontWeight:600,display:"flex",alignItems:"center",gap:4},children:[T," ",C]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[e.jsx("div",{style:{fontSize:14,color:"#e5e7eb",fontFamily:"monospace",background:"#0b1220",padding:"6px 12px",borderRadius:6,border:"1px solid #1f2937"},children:(I=n,!I||I.length<12?I:`${I.slice(0,4)}...${I.slice(-4)}`)}),e.jsxs("button",{onClick:async()=>{if(n)try{await navigator.clipboard.writeText(n),S("Address copied!"),setTimeout(()=>S(""),2e3)}catch(e){j("Failed to copy")}},style:{background:"#1f2937",border:"1px solid #374151",color:"#cbd5e1",padding:"6px 12px",borderRadius:6,fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#374151"},onMouseOut:e=>{e.currentTarget.style.background="#1f2937"},children:[e.jsx(M,{size:14,style:{marginRight:4}})," Copy"]}),e.jsxs("a",{href:(e=>`https://solscan.io/account/${e}`)(n),target:"_blank",rel:"noopener noreferrer",style:{background:"#1f2937",border:"1px solid #374151",color:"#cbd5e1",padding:"6px 12px",borderRadius:6,fontSize:12,fontWeight:600,textDecoration:"none",display:"inline-block",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#374151"},onMouseOut:e=>{e.currentTarget.style.background="#1f2937"},children:[e.jsx(A,{size:14,style:{marginRight:4}})," Explorer"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{onClick:()=>l(!s),style:{background:"#1f2937",border:"1px solid #374151",color:"#cbd5e1",padding:"6px 12px",borderRadius:6,fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#374151"},onMouseOut:e=>{e.currentTarget.style.background="#1f2937"},children:e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx(g,{size:14})," Manage ",s?e.jsx(u,{size:14}):e.jsx(x,{size:14})]})}),s&&e.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:8,background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:8,minWidth:220,zIndex:100,boxShadow:"0 10px 25px rgba(0,0,0,0.5)"},children:[e.jsx("button",{onClick:()=>f("switch"),style:{width:"100%",background:"transparent",border:"none",color:"#cbd5e1",padding:"8px 12px",borderRadius:6,fontSize:13,fontWeight:500,cursor:"pointer",textAlign:"left",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#334155"},onMouseOut:e=>{e.currentTarget.style.background="transparent"},children:e.jsx("span",{style:{display:"flex",alignItems:"center",gap:8},children:"web3auth"===i?e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:14})," Switch to External Wallet"]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{size:14})," Switch to Web3Auth"]})})}),e.jsx("div",{style:{height:1,background:"#334155",margin:"8px 0"}}),e.jsx("button",{onClick:()=>f("disconnect"),style:{width:"100%",background:"transparent",border:"none",color:"#fca5a5",padding:"8px 12px",borderRadius:6,fontSize:13,fontWeight:500,cursor:"pointer",textAlign:"left",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#ef444420"},onMouseOut:e=>{e.currentTarget.style.background="transparent"},children:e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(F,{size:14})," Disconnect Wallet"]})})]})]})]})]})}),k&&e.jsx("div",{style:{background:"#10b98120",border:"1px solid #10b981",borderRadius:8,padding:12,color:"#6ee7b7",fontSize:13,marginTop:12},children:k}),m&&e.jsx("div",{style:{background:"#ef444420",border:"1px solid #ef4444",borderRadius:8,padding:12,color:"#fca5a5",fontSize:13,marginTop:12},children:m}),e.jsxs("div",{style:{fontSize:12,color:"#10b981",marginTop:8,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[e.jsx(b,{size:14})," Ready to receive USDC payments and own NFTs"]}),"switch"===d&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",backdropFilter:"blur(4px)",display:"grid",placeItems:"center",zIndex:2e3},children:e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:12,padding:24,maxWidth:500,width:"90%"},children:[e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:"#f59e0b",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(F,{size:20})," Switch Wallet?"]}),e.jsxs("div",{style:{fontSize:14,color:"#cbd5e1",marginBottom:16,lineHeight:1.6},children:[e.jsx("p",{style:{marginBottom:12},children:"Your existing NFTs will remain in your old wallet. You'll need to manually transfer them if you want them in the new wallet."}),e.jsx("p",{style:{marginBottom:12},children:"New purchases and payments will go to the new wallet address."}),e.jsxs("div",{style:{background:"#0b1220",border:"1px solid #334155",borderRadius:8,padding:12,fontSize:12,fontFamily:"monospace",marginTop:12},children:[e.jsx("div",{style:{color:"#94a3b8",marginBottom:4},children:"Current wallet:"}),e.jsx("div",{style:{color:"#e5e7eb"},children:n})]})]}),m&&e.jsx("div",{style:{background:"#ef444420",border:"1px solid #ef4444",borderRadius:8,padding:12,color:"#fca5a5",fontSize:13,marginBottom:16},children:m}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsx("button",{onClick:()=>{f(null),j("")},disabled:y,style:{flex:1,background:"transparent",border:"1px solid #475569",color:"#cbd5e1",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:y?"not-allowed":"pointer",fontSize:14},children:"Cancel"}),e.jsx("button",{onClick:()=>{f(null),l(!1),"web3auth"===i?_():z()},disabled:y,style:{flex:1,background:y?"#6b7280":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:y?"not-allowed":"pointer",fontSize:14},children:y?"Processing...":"Continue"})]})]})}),"disconnect"===d&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",backdropFilter:"blur(4px)",display:"grid",placeItems:"center",zIndex:2e3},children:e.jsxs("div",{style:{background:"#1e293b",border:"2px solid #ef4444",borderRadius:12,padding:24,maxWidth:500,width:"90%"},children:[e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:"#ef4444",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(L,{size:20})," Disconnect Wallet?"]}),e.jsxs("div",{style:{fontSize:14,color:"#cbd5e1",marginBottom:16,lineHeight:1.6},children:[e.jsx("p",{style:{marginBottom:12,fontWeight:600,color:"#fca5a5"},children:"Warning: Without a wallet you CANNOT:"}),e.jsxs("ul",{style:{paddingLeft:20,marginBottom:12},children:[e.jsx("li",{children:"Receive USDC payments from new sales"}),e.jsx("li",{children:"Receive purchased NFTs"}),e.jsx("li",{children:"Purchase content on RenaissBlock"}),e.jsx("li",{children:"Mint new content"})]}),e.jsx("p",{style:{marginBottom:12},children:"Your library of owned NFTs will disappear until you reconnect a wallet."}),e.jsxs("div",{style:{background:"#0b1220",border:"1px solid #334155",borderRadius:8,padding:12,fontSize:12,fontFamily:"monospace",marginTop:12},children:[e.jsx("div",{style:{color:"#94a3b8",marginBottom:4},children:"Your NFTs will remain in:"}),e.jsx("div",{style:{color:"#e5e7eb"},children:n})]})]}),m&&e.jsx("div",{style:{background:"#ef444420",border:"1px solid #ef4444",borderRadius:8,padding:12,color:"#fca5a5",fontSize:13,marginBottom:16},children:m}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsx("button",{onClick:()=>{f(null),j("")},disabled:y,style:{flex:1,background:"transparent",border:"1px solid #475569",color:"#cbd5e1",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:y?"not-allowed":"pointer",fontSize:14},children:"Cancel"}),e.jsx("button",{onClick:async()=>{j(""),v(!0);try{const e=await w(),t=await fetch(`${h}/api/wallet/link/`,{method:"DELETE",headers:{"X-CSRFToken":e,"X-Requested-With":"XMLHttpRequest"},credentials:"include"});if(!t.ok){const e=await t.text();throw new Error(e||"Failed to disconnect wallet")}S("Wallet disconnected"),f(null),l(!1),a()}catch(e){j((null==e?void 0:e.message)||String(e))}finally{v(!1)}},disabled:y,style:{flex:1,background:y?"#6b7280":"#ef4444",border:"none",color:"#fff",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:y?"not-allowed":"pointer",fontSize:14},children:y?"Disconnecting...":"Yes, Disconnect"})]})]})})]});var I}function le({isOpen:t,onClose:r,item:i,onUnpublished:a}){const s=n(),[l,d]=o.useState(!1),[c,p]=o.useState(!1),[g,u]=o.useState(!1),[x,b]=o.useState(""),[y,v]=o.useState("");if(!t)return null;return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},onClick:r,children:e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #334155",borderRadius:"16px",maxWidth:"500px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #334155",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:700,color:"#f8fafc",margin:0},children:"Manage Content"}),e.jsx("button",{onClick:r,style:{background:"transparent",border:"none",color:"#94a3b8",fontSize:"24px",cursor:"pointer",padding:"0",lineHeight:1},children:"×"})]}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("div",{style:{width:"100%",paddingTop:"56.25%",background:i.teaser_link?`url(${i.teaser_link})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:"12px",marginBottom:"16px",position:"relative"}}),e.jsx("h3",{style:{fontSize:"20px",fontWeight:600,color:"#f8fafc",margin:"0 0 8px 0"},children:i.title}),e.jsx("div",{style:{display:"inline-block",background:"#1e293b",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",color:"#94a3b8",textTransform:"capitalize",marginBottom:"20px"},children:i.content_type}),i.is_collaborative&&i.collaborators&&i.collaborators.length>0&&e.jsxs("div",{style:{background:"#1e293b",borderRadius:"10px",padding:"16px",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",color:"#f59e0b",fontSize:"13px",fontWeight:600},children:[e.jsx(f,{size:16}),"Collaborative Content"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:i.collaborators.map(t=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px"},children:[e.jsxs("span",{style:{color:"#e2e8f0"},children:["@",t.username]}),e.jsxs("span",{style:{color:"#64748b"},children:[t.role," • ",t.revenue_percentage,"%"]})]},t.username))})]}),y&&e.jsx("div",{style:{background:"#10b98120",border:"1px solid #10b981",color:"#10b981",padding:"12px",borderRadius:"8px",fontSize:"14px",marginBottom:"16px",textAlign:"center"},children:y}),x&&e.jsx("div",{style:{background:"#ef444420",border:"1px solid #ef4444",color:"#fca5a5",padding:"12px",borderRadius:"8px",fontSize:"14px",marginBottom:"16px"},children:x}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("button",{onClick:()=>{s(`/reader/${i.id}`),r()},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#000",padding:"14px 20px",borderRadius:"10px",fontSize:"15px",fontWeight:700,cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:e=>e.currentTarget.style.transform="translateY(-2px)",onMouseLeave:e=>e.currentTarget.style.transform="translateY(0)",children:[e.jsx(D,{size:18}),"View Content"]}),l?e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:"10px",padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",marginBottom:"16px"},children:[e.jsx(F,{size:20,style:{color:"#f59e0b",flexShrink:0,marginTop:2}}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#f8fafc",fontSize:"14px",fontWeight:600,marginBottom:4},children:i.is_collaborative?"Request Unpublish Approval":"Confirm Unpublish"}),e.jsx("div",{style:{color:"#94a3b8",fontSize:"13px",lineHeight:1.5},children:i.is_collaborative?"This will create a proposal that requires unanimous approval from all collaborators.":"This will remove your content from the marketplace. This action can be undone by republishing."})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>d(!1),disabled:c||g,style:{flex:1,padding:"12px",borderRadius:"8px",border:"1px solid #334155",background:"transparent",color:"#94a3b8",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:i.is_collaborative?async()=>{if(i.source_project_id){u(!0),b("");try{const e=await fetch(`${h}/api/auth/csrf/`,{credentials:"include"}),t=await e.json(),o=(null==t?void 0:t.csrfToken)||"",n=await fetch(`${h}/api/collaborative-projects/${i.source_project_id}/proposals/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":o},credentials:"include",body:JSON.stringify({proposal_type:"unpublish_content",title:`Unpublish "${i.title}"`,description:"Request to remove this content from the marketplace. All collaborators must approve.",voting_threshold:"unanimous",proposal_data:{content_id:i.id,content_title:i.title}})});if(n.ok)v("Unpublish request sent to collaborators"),setTimeout(()=>{r()},2e3);else{const e=await n.json();b(e.error||"Failed to create proposal")}}catch(e){b("Network error. Please try again.")}finally{u(!1)}}else b("Project not found")}:async()=>{p(!0),b("");try{const e=await fetch(`${h}/api/auth/csrf/`,{credentials:"include"}),t=await e.json(),o=(null==t?void 0:t.csrfToken)||"",n=await fetch(`${h}/api/content/${i.id}/unpublish/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":o},credentials:"include"});if(n.ok)v("Content unpublished successfully"),setTimeout(()=>{a(),r()},1500);else{const e=await n.json();b(e.error||"Failed to unpublish content")}}catch(e){b("Network error. Please try again.")}finally{p(!1)}},disabled:c||g,style:{flex:2,padding:"12px",borderRadius:"8px",border:"none",background:"#ef4444",color:"#fff",fontSize:"14px",fontWeight:700,cursor:c||g?"not-allowed":"pointer",opacity:c||g?.6:1},children:c||g?"Processing...":i.is_collaborative?"Request Unpublish":"Confirm Unpublish"})]})]}):e.jsxs("button",{onClick:()=>d(!0),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:"transparent",border:"1px solid #ef4444",color:"#ef4444",padding:"14px 20px",borderRadius:"10px",fontSize:"15px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="#ef444420"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:[e.jsx(A,{size:18}),"Unpublish"]})]})]})]})})}const de=({className:t=""})=>{const[r,n]=o.useState(null),[a,s]=o.useState(!0),[l,d]=o.useState(!1);if(o.useEffect(()=>{(async()=>{try{const e=await async function(){const e=await fetch(`${h}/api/bridge/status/`,{credentials:"include"});if(!e.ok)throw new Error("Failed to get Bridge onboarding status");return e.json()}();n(e)}catch(e){}finally{s(!1)}})()},[]),a||l||(null==r?void 0:r.is_fully_setup))return null;if("wallet"===(null==r?void 0:r.payout_destination)&&(null==r?void 0:r.has_bridge_customer))return null;const c=(null==r?void 0:r.has_bridge_customer)?"pending"===r.kyc_status?{title:"Verification in progress",description:"Your identity verification is being reviewed. This usually takes a few minutes.",actionText:"Check Status",icon:L,variant:"warning"}:"approved"!==r.kyc_status||r.has_bank_account?r.has_bank_account&&!r.has_liquidation_address?{title:"Final step: Create payout address",description:"Create a payment address to start receiving automatic bank deposits.",actionText:"Complete Setup",icon:p,variant:"success"}:{title:"Enable direct bank deposits",description:"Convert your USDC earnings to USD automatically.",actionText:"Get Started",icon:oe,variant:"primary"}:{title:"Almost there! Link your bank account",description:"Your identity is verified. Now link a bank account to receive payouts.",actionText:"Link Bank Account",icon:oe,variant:"success"}:{title:"Get paid directly to your bank account",description:"Set up automatic USDC to USD conversion and receive your earnings as direct deposits.",actionText:"Set Up Payouts",icon:oe,variant:"primary"},g=c.icon;return e.jsx("div",{className:`rounded-lg border p-4 ${{primary:"bg-blue-50 border-blue-200 text-blue-900",warning:"bg-yellow-50 border-yellow-200 text-yellow-900",success:"bg-green-50 border-green-200 text-green-900"}[c.variant]} ${t}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(g,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:c.title}),e.jsx("p",{className:"mt-1 text-sm opacity-80",children:c.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs(i,{to:"/payout-settings",className:`inline-flex items-center gap-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${{primary:"bg-blue-600 hover:bg-blue-700 text-white",warning:"bg-yellow-600 hover:bg-yellow-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white"}[c.variant]}`,children:[c.actionText,e.jsx(H,{className:"h-4 w-4"})]}),e.jsx("button",{onClick:()=>d(!0),className:"text-sm opacity-60 hover:opacity-100 px-2","aria-label":"Dismiss",children:"Dismiss"})]})]})})},ce={founding:{label:"Founding Creator",color:"#f59e0b",bg:"linear-gradient(135deg, rgba(245,158,11,0.15), rgba(217,119,6,0.08))",border:"rgba(245,158,11,0.4)",icon:e.jsx(y,{size:16,fill:"#f59e0b",color:"#f59e0b"})},level_5:{label:"Level 5",color:"#a855f7",bg:"linear-gradient(135deg, rgba(168,85,247,0.15), rgba(139,92,246,0.08))",border:"rgba(168,85,247,0.4)",icon:e.jsx(q,{size:16,color:"#a855f7"})},level_4:{label:"Level 4",color:"#6366f1",bg:"linear-gradient(135deg, rgba(99,102,241,0.15), rgba(79,70,229,0.08))",border:"rgba(99,102,241,0.4)",icon:e.jsx(q,{size:16,color:"#6366f1"})},level_3:{label:"Level 3",color:"#3b82f6",bg:"linear-gradient(135deg, rgba(59,130,246,0.15), rgba(37,99,235,0.08))",border:"rgba(59,130,246,0.4)",icon:e.jsx(ae,{size:16,color:"#3b82f6"})},level_2:{label:"Level 2",color:"#14b8a6",bg:"linear-gradient(135deg, rgba(20,184,166,0.15), rgba(13,148,136,0.08))",border:"rgba(20,184,166,0.4)",icon:e.jsx(ae,{size:16,color:"#14b8a6"})},level_1:{label:"Level 1",color:"#22c55e",bg:"linear-gradient(135deg, rgba(34,197,94,0.15), rgba(22,163,74,0.08))",border:"rgba(34,197,94,0.4)",icon:e.jsx(ae,{size:16,color:"#22c55e"})},standard:{label:"Standard",color:"#94a3b8",bg:"linear-gradient(135deg, rgba(148,163,184,0.1), rgba(100,116,139,0.05))",border:"rgba(148,163,184,0.3)",icon:e.jsx(I,{size:16,color:"#94a3b8"})}},pe=[{key:"standard",threshold:0},{key:"level_1",threshold:500},{key:"level_2",threshold:1e3},{key:"level_3",threshold:2500},{key:"level_4",threshold:5e3},{key:"level_5",threshold:1e4}],ge=()=>{var t,r,n;const[i,s]=o.useState(null),[l,d]=o.useState(null),[c,p]=o.useState(!0);if(o.useEffect(()=>{Promise.all([Y().catch(()=>null),U().catch(()=>null)]).then(([e,t])=>{s(e),d(t),p(!1)})},[]),c)return e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsx("div",{style:{height:20,background:"var(--panel-border-strong)",borderRadius:8,width:"40%",marginBottom:16}}),e.jsx("div",{style:{height:40,background:"var(--panel-border-strong)",borderRadius:8,width:"60%"}})]});if(!i)return null;const g=i.tier in ce?i.tier:"standard",u=ce[g],x=parseFloat(i.lifetime_project_sales),b=i.progress_to_next?parseFloat(i.progress_to_next):null,h=pe.findIndex(e=>e.key===g);return e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:20},children:[e.jsxs("h3",{style:{fontSize:18,fontWeight:700,color:"var(--text)",display:"flex",alignItems:"center",gap:10},children:[e.jsx(I,{size:20,style:{color:u.color}}),"Creator Tier"]}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6,padding:"6px 14px",background:u.bg,border:`1px solid ${u.border}`,borderRadius:20,color:u.color,fontSize:13,fontWeight:700,letterSpacing:"0.02em"},children:[u.icon,u.label]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:16,marginBottom:24},children:[e.jsxs("div",{style:{background:u.bg,border:`1px solid ${u.border}`,borderRadius:12,padding:16},children:[e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)",marginBottom:6,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600},children:"Platform Fee"}),e.jsx("div",{style:{fontSize:28,fontWeight:800,color:u.color},children:i.fee_percent})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid var(--panel-border-strong)",borderRadius:12,padding:16},children:[e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)",marginBottom:6,textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:600},children:"Lifetime Project Sales"}),e.jsxs("div",{style:{fontSize:28,fontWeight:800,color:"var(--text)"},children:["$",x.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),i.next_level&&i.next_threshold&&null!==b&&e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs("span",{style:{fontSize:13,color:"var(--text-muted)",fontWeight:600},children:["Progress to ",((null==(t=ce[i.next_level])?void 0:t.label)||i.next_level).toUpperCase()]}),e.jsxs("span",{style:{fontSize:13,color:(null==(r=ce[i.next_level])?void 0:r.color)||"#94a3b8",fontWeight:700},children:[b.toFixed(1),"%"]})]}),e.jsx("div",{style:{width:"100%",height:10,background:"rgba(255,255,255,0.06)",borderRadius:10,overflow:"hidden",position:"relative"},children:e.jsx("div",{style:{width:`${Math.min(b,100)}%`,height:"100%",background:`linear-gradient(90deg, ${u.color}, ${(null==(n=ce[i.next_level])?void 0:n.color)||u.color})`,borderRadius:10,transition:"width 0.6s ease-out",boxShadow:`0 0 12px ${u.color}40`}})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:6},children:[e.jsxs("span",{style:{fontSize:11,color:"var(--subtle)"},children:["$",x.toLocaleString()]}),e.jsxs("span",{style:{fontSize:11,color:"var(--subtle)"},children:["$",parseFloat(i.next_threshold).toLocaleString()]})]})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:12},children:"Tier Roadmap"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:0,position:"relative"},children:pe.map((t,r)=>{const o=ce[t.key],n=r<=h,i=t.key===g;return e.jsxs(a.Fragment,{children:[r>0&&e.jsx("div",{style:{flex:1,height:3,background:n?`linear-gradient(90deg, ${ce[pe[r-1].key].color}, ${o.color})`:"rgba(255,255,255,0.08)",borderRadius:2}}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},children:[e.jsx("div",{style:{width:i?28:18,height:i?28:18,borderRadius:"50%",background:n?o.color:"rgba(255,255,255,0.08)",border:i?`3px solid ${o.color}`:"none",boxShadow:i?`0 0 16px ${o.color}50`:"none",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s",flexShrink:0},children:i&&e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:"#fff"}})}),e.jsxs("div",{style:{position:"absolute",top:"100%",marginTop:6,fontSize:9,fontWeight:i?700:500,color:n?o.color:"var(--subtle)",whiteSpace:"nowrap",textAlign:"center",letterSpacing:"0.02em"},children:[o.label,t.threshold>0&&e.jsxs("div",{style:{fontSize:8,color:"var(--subtle)",fontWeight:400,marginTop:1},children:["$",t.threshold.toLocaleString()]})]})]})]},t.key)})}),e.jsx("div",{style:{height:36}})]}),i.is_founding&&i.founding_slot&&e.jsxs("div",{style:{padding:16,background:"linear-gradient(135deg, rgba(245,158,11,0.12), rgba(217,119,6,0.06))",border:"1px solid rgba(245,158,11,0.3)",borderRadius:12,marginTop:4},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[e.jsx(y,{size:16,fill:"#f59e0b",color:"#f59e0b"}),e.jsx("span",{style:{fontSize:14,fontWeight:700,color:"#f59e0b"},children:"Founding Creator"})]}),e.jsxs("div",{style:{fontSize:12,color:"#d97706",lineHeight:1.5},children:['Earned via "',i.founding_slot.project,'" — $',i.founding_slot.qualifying_amount," in project sales"]})]}),l&&l.is_open&&!i.is_founding&&e.jsxs("div",{style:{padding:16,background:"linear-gradient(135deg, rgba(59,130,246,0.1), rgba(99,102,241,0.06))",border:"1px solid rgba(59,130,246,0.25)",borderRadius:12,marginTop:4},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(q,{size:16,color:"#3b82f6"}),e.jsx("span",{style:{fontSize:14,fontWeight:700,color:"#3b82f6"},children:"Founding Creator Race"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx("div",{style:{flex:1,height:8,background:"rgba(255,255,255,0.06)",borderRadius:8,overflow:"hidden"},children:e.jsx("div",{style:{width:l.slots_claimed/l.slots_total*100+"%",height:"100%",background:"linear-gradient(90deg, #3b82f6, #f59e0b)",borderRadius:8,transition:"width 0.6s ease-out"}})}),e.jsxs("span",{style:{fontSize:13,fontWeight:700,color:"#3b82f6",whiteSpace:"nowrap"},children:[l.slots_remaining,"/",l.slots_total]})]}),e.jsxs("div",{style:{fontSize:12,color:"var(--text-muted)",lineHeight:1.5},children:[l.slots_remaining," slots remaining. Participate in a project that reaches $",l.threshold," in cumulative sales to unlock ",e.jsx("span",{style:{color:"#f59e0b",fontWeight:600},children:"1% platform fee forever"}),"."]})]})]})};function ue(){const t=n(),[r]=s(),{isMobile:a,isPhone:d}=v(),[y,T]=o.useState(null),[W,R]=o.useState([]),[B,I]=o.useState(""),[P,M]=o.useState({content_count:0,sales:0}),[F,L]=o.useState(null),[H,Y]=o.useState(!0),[U,q]=o.useState(""),oe=o.useRef(null),ie=o.useRef(null),[ce,pe]=o.useState(!1),[ue,je]=o.useState(!1),[ke,Se]=o.useState(""),[we,ze]=o.useState(""),[_e,Ce]=o.useState(""),[Te,We]=o.useState(""),[Re,Be]=o.useState([]),[Ie,$e]=o.useState([]),[Pe,Me]=o.useState(!0),[Ae,Fe]=o.useState(!1),[Ee,Le]=o.useState([]),[De,Ne]=o.useState(!1),[Oe,He]=o.useState(null),[Ye,Ue]=o.useState("content"),[Xe,qe]=o.useState("all"),[Ve,Ge]=o.useState("all"),[Je,Ke]=o.useState([]),[Ze,Qe]=o.useState([]),[et,tt]=o.useState([]),[rt,ot]=o.useState(new Set),[nt,it]=o.useState([]),[at,st]=o.useState(new Set),[lt,dt]=o.useState(!1),[ct,pt]=o.useState(null),[gt,ut]=o.useState(!1),[xt,bt]=o.useState(null),[ht,ft]=o.useState([]),[yt,vt]=o.useState(null),[mt,jt]=o.useState([]),[kt,St]=o.useState(!1),[wt,zt]=o.useState(new Set),[_t,Ct]=o.useState(new Set),[Tt,Wt]=o.useState(null),[Rt,Bt]=o.useState(!1),[It,$t]=o.useState(new Set),[Pt,Mt]=o.useState([]),[At,Ft]=o.useState(!1),[Et,Lt]=o.useState(new Set),Dt=e=>{$t(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})};async function Nt(){const e=await fetch(`${h}/api/auth/csrf/`,{credentials:"include"}),t=await e.json(),r=(null==t?void 0:t.csrfToken)||"";return q(r),r}async function Ot(){try{const e=await m.getPendingInvites();ft(e)}catch(e){ft([])}}async function Ht(){St(!0);try{const e=(await m.getCollaborativeProjects()).filter(e=>!e.is_solo);jt(e)}catch(e){jt([])}finally{St(!1)}}async function Yt(){try{const e=await fetch(`${h}/api/portfolio/`,{credentials:"include"});if(e.ok){const t=await e.json();Le(t)}}catch(e){}}async function Ut(e,t){if(t.stopPropagation(),_t.has(e)){zt(t=>new Set(t).add(e));try{await m.acceptInvitation(e,!0),I("Invitation accepted!"),Ct(t=>{const r=new Set(t);return r.delete(e),r}),await Promise.all([Ot(),Ht()])}catch(r){I(`Failed to accept: ${r.message||"Unknown error"}`)}finally{zt(t=>{const r=new Set(t);return r.delete(e),r})}}else I("Please acknowledge the warranty of originality before accepting")}async function Xt(e,t){t.stopPropagation(),zt(t=>new Set(t).add(e));try{await m.declineInvitation(e),I("Invitation declined"),await Promise.all([Ot(),Ht()])}catch(r){I(`Failed to decline: ${r.message||"Unknown error"}`)}finally{zt(t=>{const r=new Set(t);return r.delete(e),r})}}function qt(t,r=24){switch(t){case"book":return e.jsx(S,{size:r});case"music":return e.jsx(C,{size:r});case"video":return e.jsx(_,{size:r});default:return e.jsx(z,{size:r})}}o.useEffect(()=>{const e=r.get("tab");e&&["content","collaborations","portfolio","analytics","following"].includes(e)&&Ue(e)},[r]),o.useEffect(()=>{const e=new AbortController,t=e.signal;return Promise.all([fetch(`${h}/api/auth/status/`,{credentials:"include",signal:t}).then(e=>e.json()),fetch(`${h}/api/content/`,{credentials:"include",signal:t}).then(e=>e.json()),fetch(`${h}/api/auth/csrf/`,{credentials:"include",signal:t}).then(e=>e.json()),fetch(`${h}/api/users/profile/`,{credentials:"include",signal:t}).then(e=>e.ok?e.json():null),fetch(`${h}/api/dashboard/`,{credentials:"include",signal:t}).then(e=>e.ok?e.json():{content_count:0,sales:0})]).then(([e,t,r,o,n])=>{T(e),Array.isArray(t.results)?R(t.results):Array.isArray(t)&&R(t),q((null==r?void 0:r.csrfToken)||""),L(o),M(n),Y(!1),Ot(),Ht(),Yt(),async function(){Bt(!0);try{const e=await fetch(`${h}/api/sales-analytics/`,{credentials:"include"});if(e.ok){const t=await e.json();Wt(t)}}catch(e){}finally{Bt(!1)}}(),(null==o?void 0:o.username)&&async function(e){const t=e||(null==F?void 0:F.username);if(t){Ft(!0);try{const e=await N(t);Mt(e.results)}catch(r){Mt([])}finally{Ft(!1)}}}(o.username)}).catch(()=>{Y(!1)}),()=>e.abort()},[]),o.useEffect(()=>{fetch(`${h}/api/content/?mine=1`,{credentials:"include"}).then(e=>e.ok?e.json():[]).then(e=>{let t=[];e&&Array.isArray(e.results)?t=e.results:Array.isArray(e)&&(t=e),Ke(t.filter(e=>"book"!==e.content_type&&"comic"!==e.content_type||e.is_collaborative))}).catch(()=>Ke([])),fetch(`${h}/api/book-projects/my-published/`,{credentials:"include"}).then(e=>e.ok?e.json():[]).then(e=>{Array.isArray(e)?Qe(e):Qe([])}).catch(()=>Qe([])),fetch(`${h}/api/comic-projects/my-published/`,{credentials:"include"}).then(e=>e.ok?e.json():[]).then(e=>it(Array.isArray(e)?e:[])).catch(()=>it([])),m.getCollaborativeProjects().then(e=>{const t=e.filter(e=>e.is_solo);tt(t)}).catch(()=>tt([]))},[B]);const Vt=e=>{t(`/reader/${e}`)};return H?e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:a?"16px 12px":"40px 24px"},children:[e.jsx("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:a?12:16,padding:a?16:32,marginBottom:a?16:24},children:e.jsxs("div",{style:{display:"flex",gap:24,alignItems:"flex-start"},children:[e.jsx("div",{style:{width:d?80:100,height:d?80:100,borderRadius:"50%",background:"linear-gradient(90deg, var(--bg-card) 25%, var(--panel-border-strong) 50%, var(--bg-card) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{width:180,height:32,borderRadius:6,marginBottom:12,background:"linear-gradient(90deg, var(--bg-card) 25%, var(--panel-border-strong) 50%, var(--bg-card) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),e.jsx("div",{style:{width:120,height:20,borderRadius:4,background:"linear-gradient(90deg, var(--bg-card) 25%, var(--panel-border-strong) 50%, var(--bg-card) 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}})]})]})}),e.jsx("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:12,padding:"16px 20px",marginBottom:24,height:60}}),e.jsx("style",{children:"\n          @keyframes shimmer {\n            0% { background-position: 200% 0; }\n            100% { background-position: -200% 0; }\n          }\n        "})]}):e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:a?"16px 12px":"40px 24px"},children:[e.jsx("input",{ref:oe,onChange:async e=>{const t=e.target.files&&e.target.files[0];if(!t)return;const r=U||await Nt(),o=new FormData;o.append("avatar",t);const n=await fetch(`${h}/api/users/profile/`,{method:"PATCH",headers:{"X-CSRFToken":r,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:o});if(n.ok){I("Avatar updated"),await async function(){const e=await fetch(`${h}/api/auth/status/`,{credentials:"include"}).then(e=>e.json());T(e)}();const e=await fetch(`${h}/api/users/profile/`,{credentials:"include"});e.ok&&L(await e.json())}else I(`Failed: ${await n.text()}`);e.target.value=""},type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"}}),e.jsx("input",{ref:ie,onChange:async e=>{const t=e.target.files&&e.target.files[0];if(!t)return;const r=U||await Nt(),o=new FormData;o.append("banner",t);const n=await fetch(`${h}/api/users/profile/`,{method:"PATCH",headers:{"X-CSRFToken":r,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:o});if(n.ok){I("Banner updated");const e=await fetch(`${h}/api/users/profile/`,{credentials:"include"});e.ok&&L(await e.json())}else I(`Failed: ${await n.text()}`);e.target.value=""},type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"}}),e.jsxs("div",{onClick:()=>{var e;null==(e=ie.current)||e.click()},style:{background:(null==F?void 0:F.banner)||(null==F?void 0:F.banner_url)?`linear-gradient(rgba(15,23,42,0.7), rgba(15,23,42,0.9)), url(${(null==F?void 0:F.banner)||(null==F?void 0:F.banner_url)}) center/cover`:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:a?12:16,padding:a?16:32,marginBottom:a?16:24,position:"relative",cursor:"pointer"},title:"Click to update banner",children:[e.jsx("div",{style:{position:"absolute",top:a?12:24,right:a?12:24,display:"flex",gap:8},children:e.jsxs(i,{to:`/profile/${(null==F?void 0:F.username)||(null==y?void 0:y.username)}`,onClick:e=>e.stopPropagation(),style:{background:"rgba(245,158,11,0.15)",border:"1px solid rgba(245,158,11,0.3)",color:"#f59e0b",height:a?36:40,padding:a?"0 10px":"0 14px",borderRadius:8,display:"flex",alignItems:"center",gap:6,cursor:"pointer",textDecoration:"none",fontSize:a?12:13,fontWeight:600,transition:"all 0.2s"},children:[e.jsx(D,{size:a?16:18}),d?"Public":"View Public Profile"]})}),e.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?12:24,alignItems:d?"center":"flex-start",marginBottom:16,marginTop:d?32:0},children:[e.jsx("div",{onClick:e=>{var t;e.stopPropagation(),null==(t=oe.current)||t.click()},style:{width:d?80:100,height:d?80:100,borderRadius:"50%",overflow:"hidden",cursor:"pointer",border:"3px solid var(--bg-card)",flexShrink:0,transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-card)"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#f59e0b"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--bg-card)"},title:"Click to upload avatar",children:(null==F?void 0:F.avatar)||(null==F?void 0:F.avatar_url)?e.jsx("img",{src:(null==F?void 0:F.avatar)||(null==F?void 0:F.avatar_url),alt:(null==F?void 0:F.display_name)||(null==y?void 0:y.username)||"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{color:"#f59e0b",fontWeight:700,fontSize:d?32:40},children:((null==y?void 0:y.username)||"?").slice(0,1).toUpperCase()})}),e.jsxs("div",{style:{flex:1,textAlign:d?"center":"left"},children:[e.jsx("div",{style:{fontSize:d?24:32,fontWeight:700,color:"#ffffff",marginBottom:8,textShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:(null==F?void 0:F.display_name)||(null==y?void 0:y.username)||"User"}),(null==F?void 0:F.location)&&e.jsxs("div",{style:{fontSize:d?14:15,color:"rgba(255,255,255,0.8)",marginBottom:8,display:"flex",alignItems:"center",justifyContent:d?"center":"flex-start",gap:6,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:[e.jsx(X,{size:16})," ",F.location]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:d?"center":"flex-start",gap:12,fontSize:14,color:"rgba(255,255,255,0.7)",flexWrap:"wrap",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:[(null==F?void 0:F.status)&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{color:"#10b981",fontSize:12},children:"●"}),F.status]}),e.jsx("span",{style:{color:"rgba(255,255,255,0.5)"},children:"•"})]}),e.jsxs("span",{style:{color:"rgba(255,255,255,0.7)"},children:["@",(null==F?void 0:F.username)||(null==y?void 0:y.username)||""]})]})]})]})]}),e.jsxs("div",{style:{background:(null==F?void 0:F.wallet_address)?"var(--bg-card)":"var(--dropdown-hover)",border:(null==F?void 0:F.wallet_address)?"1px solid #10b981":"1px solid var(--panel-border-strong)",borderRadius:12,padding:"16px 20px",marginBottom:24,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{color:(null==F?void 0:F.wallet_address)?"#10b981":"var(--text-muted)"},children:(null==F?void 0:F.wallet_address)?e.jsx(p,{size:24}):e.jsx(c,{size:24})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"var(--text)",marginBottom:(null==F?void 0:F.wallet_address)?4:0},children:(null==F?void 0:F.wallet_address)?"Wallet Connected":"Wallet Setup Required"}),(null==F?void 0:F.wallet_address)&&e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)",fontFamily:"monospace"},children:(Gt=F.wallet_address,!Gt||Gt.length<12?Gt:`${Gt.slice(0,4)}...${Gt.slice(-4)}`)})]})]}),e.jsx("button",{onClick:()=>pe(!0),style:{background:(null==F?void 0:F.wallet_address)?"transparent":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:(null==F?void 0:F.wallet_address)?"1px solid var(--panel-border-strong)":"none",color:"#fff",padding:"8px 16px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{(null==F?void 0:F.wallet_address)?(e.currentTarget.style.background="var(--dropdown-hover)",e.currentTarget.style.borderColor="var(--border)"):e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{(null==F?void 0:F.wallet_address)?(e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="var(--panel-border-strong)"):e.currentTarget.style.transform="translateY(0)"},children:(null==F?void 0:F.wallet_address)?"Manage":"Connect Wallet"})]}),e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,padding:24,marginBottom:24,overflow:"hidden",boxSizing:"border-box"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsx("h3",{style:{fontSize:18,fontWeight:700,color:"var(--text)",margin:0},children:"About"}),ue?e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:()=>{je(!1)},disabled:Ae,style:{background:"transparent",border:"1px solid var(--panel-border-strong)",color:"var(--text-muted)",padding:"6px 12px",borderRadius:6,fontSize:13,fontWeight:500,cursor:Ae?"not-allowed":"pointer",opacity:Ae?.5:1},children:"Cancel"}),e.jsx("button",{onClick:async()=>{Fe(!0);try{const e=await fetch(`${h}/api/users/profile/`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRFToken":U,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({bio:ke,display_name:we,location:_e,status:Te,roles:Re,genres:Ie,is_private:Pe})});if(e.ok){const t=await e.json();L(t),je(!1),I("Profile updated")}else I("Failed to save profile")}catch(e){I("Failed to save profile")}finally{Fe(!1)}},disabled:Ae,style:{background:Ae?"#6b7280":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"6px 16px",borderRadius:6,fontSize:13,fontWeight:600,cursor:Ae?"not-allowed":"pointer"},children:Ae?"Saving...":"Save"})]}):e.jsxs("button",{onClick:()=>{Se((null==F?void 0:F.bio)||""),ze((null==F?void 0:F.display_name)||""),Ce((null==F?void 0:F.location)||""),We((null==F?void 0:F.status)||"Available"),Be((null==F?void 0:F.roles)||[]),$e((null==F?void 0:F.genres)||[]),Me((null==F?void 0:F.is_private)??!0),je(!0)},style:{background:"transparent",border:"1px solid var(--panel-border-strong)",color:"var(--text-muted)",padding:"6px 12px",borderRadius:6,fontSize:13,fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:6,transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#f59e0b",e.currentTarget.style.color="#f59e0b"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--panel-border-strong)",e.currentTarget.style.color="var(--text-muted)"},children:[e.jsx(V,{size:14}),"Edit"]})]}),ue?e.jsxs("div",{style:{display:"grid",gap:20,maxWidth:"100%",overflow:"hidden"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"Display Name"}),e.jsx("input",{type:"text",value:we,onChange:e=>ze(e.target.value),placeholder:"Your display name",style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"10px 14px",color:"var(--text)",fontSize:14,boxSizing:"border-box"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"Location"}),e.jsx("input",{type:"text",value:_e,onChange:e=>Ce(e.target.value),placeholder:"e.g., New York, NY",style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"10px 14px",color:"var(--text)",fontSize:14,boxSizing:"border-box"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"Availability Status"}),e.jsx("select",{value:Te,onChange:e=>We(e.target.value),style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"10px 14px",color:"var(--text)",fontSize:14,boxSizing:"border-box"},children:[{value:"Available",label:"Available",description:"Ready to start new collaborations"},{value:"Open to Offers",label:"Open to Offers",description:"Will consider interesting projects"},{value:"Selective",label:"Selective",description:"Only taking specific types of work"},{value:"Booked",label:"Booked",description:"Currently busy, booking future work"},{value:"Unavailable",label:"Unavailable",description:"Not accepting collaborations"},{value:"On Hiatus",label:"On Hiatus",description:"Taking a break"}].map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"Profile Visibility"}),e.jsxs("select",{value:Pe?"private":"public",onChange:e=>Me("private"===e.target.value),style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"10px 14px",color:"var(--text)",fontSize:14,boxSizing:"border-box"},children:[e.jsx("option",{value:"private",children:"Private - Hidden from Collaborators page"}),e.jsx("option",{value:"public",children:"Public - Visible on Collaborators page"})]}),e.jsx("div",{style:{fontSize:12,color:"var(--subtle)",marginTop:6},children:"Private profiles won't appear in search results on the Collaborators page."})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:["Your Roles ",e.jsx("span",{style:{color:"var(--subtle)",fontWeight:400},children:"(what you do)"})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,maxWidth:"100%",overflow:"hidden"},children:["Author","Artist","Illustrator","Manga Artist","Comic Artist","Cover Designer","Editor","Proofreader","Narrator","Colorist","Letterer","Writer","Researcher","Analyst"].map(t=>{const r=Re.includes(t);return e.jsx("button",{type:"button",onClick:()=>{Be(r?Re.filter(e=>e!==t):[...Re,t])},style:{background:r?"rgba(245, 158, 11, 0.2)":"var(--bg-card)",border:"1px solid "+(r?"#f59e0b":"var(--panel-border-strong)"),color:r?"#fbbf24":"var(--text-muted)",padding:"6px 12px",borderRadius:6,fontSize:13,fontWeight:500,cursor:"pointer",transition:"all 0.2s"},children:t},t)})}),e.jsx("div",{style:{fontSize:12,color:"var(--subtle)",marginTop:6},children:"Select all roles that apply to you. This helps collaborators find you."})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:["Your Genres ",e.jsx("span",{style:{color:"var(--subtle)",fontWeight:400},children:"(what you create)"})]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,maxWidth:"100%",overflow:"hidden"},children:["Fantasy","Sci-Fi","Romance","Horror","Mystery","Thriller","Manga","Webtoon","Comics","Non-Fiction","Finance","Business","Self-Help","Biography","History","Action","Drama","Comedy","Slice of Life","Isekai","LitRPG"].map(t=>{const r=Ie.includes(t);return e.jsx("button",{type:"button",onClick:()=>{$e(r?Ie.filter(e=>e!==t):[...Ie,t])},style:{background:r?"rgba(59, 130, 246, 0.2)":"var(--bg-card)",border:"1px solid "+(r?"#3b82f6":"var(--panel-border-strong)"),color:r?"#60a5fa":"var(--text-muted)",padding:"6px 12px",borderRadius:6,fontSize:13,fontWeight:500,cursor:"pointer",transition:"all 0.2s"},children:t},t)})}),e.jsx("div",{style:{fontSize:12,color:"var(--subtle)",marginTop:6},children:"Select genres you work in or are interested in."})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"Bio"}),e.jsx("textarea",{value:ke,onChange:e=>Se(e.target.value),placeholder:"Tell the world about yourself, your work, and what you're looking for...",rows:4,style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"10px 14px",color:"var(--text)",fontSize:14,resize:"vertical",minHeight:100,lineHeight:1.6,boxSizing:"border-box"}}),e.jsx("div",{style:{fontSize:12,color:"var(--subtle)",marginTop:6},children:"Describe your experience, interests, and what kind of collaborations you're seeking."})]})]}):e.jsx("div",{children:(null==F?void 0:F.bio)?e.jsx("p",{style:{color:"var(--text-muted)",fontSize:15,lineHeight:1.7,margin:0,whiteSpace:"pre-wrap"},children:F.bio}):e.jsx("p",{style:{color:"var(--subtle)",fontSize:14,fontStyle:"italic",margin:0},children:"No bio yet. Click Edit to add a bio and tell others about yourself."})})]}),ht.length>0&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid #f59e0b40",borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:20},children:[e.jsx("span",{style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",padding:"6px 14px",borderRadius:8,fontSize:14,fontWeight:700,color:"#000"},children:ht.length}),e.jsx("span",{style:{fontSize:18,fontWeight:700,color:"var(--text)"},children:"Collaboration Invites"})]}),e.jsx("div",{style:{display:"grid",gap:16},children:ht.map(({project:t,invite:r})=>{const o=wt.has(t.id);return e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:12,padding:20,opacity:o?.7:1,transition:"all 0.2s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:16},children:[e.jsx("div",{style:{width:56,height:56,borderRadius:12,background:"#f59e0b20",display:"flex",alignItems:"center",justifyContent:"center",color:"#f59e0b",flexShrink:0},children:qt(t.content_type,28)}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:17,fontWeight:700,color:"var(--text)",marginBottom:6},children:t.title}),e.jsxs("div",{style:{fontSize:14,color:"var(--text-muted)",marginBottom:10},children:[e.jsxs("span",{style:{color:"var(--text-muted)"},children:["@",t.created_by_username]})," invited you as"," ",e.jsx("span",{style:{color:"#f59e0b",fontWeight:600},children:r.role})]}),e.jsxs("div",{style:{display:"flex",gap:20,fontSize:13},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--subtle)"},children:"Revenue Split:"})," ",e.jsxs("span",{style:{color:"#10b981",fontWeight:700},children:[r.revenue_percentage,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--subtle)"},children:"Team:"})," ",e.jsxs("span",{style:{color:"#e2e8f0"},children:[t.total_collaborators," people"]})]})]})]})]}),(()=>{if(null!==r.proposed_percentage&&void 0!==r.proposed_percentage&&Math.abs(Number(r.proposed_percentage)-Number(r.revenue_percentage))>.001)return e.jsx("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--panel-border-strong)"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #f59e0b10 0%, #fbbf2410 100%)",border:"1px solid #f59e0b40",borderRadius:10,padding:16,textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:8},children:[e.jsx(j,{size:18,style:{color:"#f59e0b"}}),e.jsx("span",{style:{color:"#f59e0b",fontSize:15,fontWeight:600},children:"Counter-Proposal Pending"})]}),e.jsxs("p",{style:{margin:0,color:"#fbbf24",fontSize:13,lineHeight:1.5},children:["You proposed ",e.jsxs("strong",{children:[r.proposed_percentage,"%"]})," revenue (original offer: ",r.revenue_percentage,"%)"]}),e.jsxs("p",{style:{margin:"6px 0 0",color:"var(--text-muted)",fontSize:12},children:["Waiting for @",t.created_by_username," to respond"]}),e.jsx("button",{onClick:e=>Xt(t.id,e),disabled:o,style:{marginTop:12,background:"transparent",color:"#ef4444",border:"1px solid #ef4444",padding:"8px 16px",borderRadius:8,fontSize:13,fontWeight:600,cursor:o?"not-allowed":"pointer"},children:"Withdraw & Decline"})]})});const n=_t.has(t.id);return e.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--panel-border-strong)"},children:[e.jsxs("div",{onClick:e=>{e.stopPropagation(),Ct(e=>{const r=new Set(e);return r.has(t.id)?r.delete(t.id):r.add(t.id),r})},style:{display:"flex",alignItems:"flex-start",gap:10,padding:"10px 12px",marginBottom:12,background:n?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.05)",border:"1px solid "+(n?"rgba(16, 185, 129, 0.3)":"rgba(239, 68, 68, 0.2)"),borderRadius:8,cursor:"pointer",transition:"all 0.2s"},children:[e.jsx("div",{style:{flexShrink:0,marginTop:2},children:n?e.jsx(G,{size:18,style:{color:"#10b981"}}):e.jsx(J,{size:18,style:{color:"var(--subtle)"}})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[e.jsx(K,{size:14,style:{color:n?"#10b981":"#f59e0b"}}),e.jsx("span",{style:{color:n?"#10b981":"#f59e0b",fontSize:12,fontWeight:600},children:"Warranty of Originality"})]}),e.jsx("div",{style:{color:"var(--text-muted)",fontSize:11,lineHeight:1.4},children:"I acknowledge that my contributions will be original work and do not infringe on any third-party rights."})]})]}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsxs("button",{onClick:e=>Ut(t.id,e),disabled:o||!n,style:{flex:1,background:n?"#10b981":"var(--subtle)",color:"#fff",border:"none",padding:"12px 20px",borderRadius:10,fontSize:14,fontWeight:700,cursor:o||!n?"not-allowed":"pointer",opacity:n?1:.6,display:"flex",alignItems:"center",justifyContent:"center",gap:8},title:n?"Accept invitation":"Please acknowledge the warranty of originality first",children:[e.jsx(k,{size:18}),o?"Processing...":"Accept Invite"]}),e.jsxs("button",{onClick:e=>Xt(t.id,e),disabled:o,style:{background:"transparent",color:"#ef4444",border:"1px solid #ef4444",padding:"12px 20px",borderRadius:10,fontSize:14,fontWeight:600,cursor:o?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx(E,{size:18}),"Decline"]}),e.jsx("button",{onClick:()=>vt(t.id),disabled:o,style:{background:"transparent",color:"var(--text-muted)",border:"1px solid var(--panel-border-strong)",padding:"12px 20px",borderRadius:10,fontSize:14,fontWeight:600,cursor:o?"not-allowed":"pointer"},children:"View Details"})]})]})})()]},t.id)})})]}),e.jsxs("div",{style:{display:"flex",gap:4,borderBottom:"1px solid var(--panel-border-strong)",marginBottom:16,overflowX:a?"auto":"visible",WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:[e.jsx(xe,{icon:e.jsx(S,{size:18}),label:"My Content",count:Je.length+Ze.length+et.filter(e=>"draft"===e.status).length,active:"content"===Ye,onClick:()=>Ue("content")}),e.jsx(xe,{icon:e.jsx(f,{size:18}),label:"Collaborations",count:ht.length+mt.length,active:"collaborations"===Ye,onClick:()=>Ue("collaborations")}),e.jsx(xe,{icon:e.jsx(Z,{size:18}),label:"External Portfolio",active:"portfolio"===Ye,onClick:()=>Ue("portfolio")}),e.jsx(xe,{icon:e.jsx(ne,{size:18}),label:"Analytics",active:"analytics"===Ye,onClick:()=>Ue("analytics")}),e.jsx(xe,{icon:e.jsx($,{size:18}),label:"Following",count:Pt.length,active:"following"===Ye,onClick:()=>Ue("following")})]}),"content"===Ye&&(Je.length>0||Ze.length>0||et.length>0)&&e.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",justifyContent:"space-between",alignItems:d?"stretch":"center",marginBottom:a?16:24,gap:d?12:16},children:[e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",overflowX:d?"auto":"visible",WebkitOverflowScrolling:"touch",paddingBottom:d?4:0},children:[e.jsx(be,{label:"All",count:Je.length+Ze.length+nt.length+et.filter(e=>"draft"===e.status).length,active:"all"===Xe,onClick:()=>qe("all")}),e.jsx(be,{label:"Books",count:Ze.length+et.filter(e=>"book"===e.content_type&&"draft"===e.status).length,active:"book"===Xe,onClick:()=>qe("book")}),e.jsx(be,{label:"Comics",count:nt.length+et.filter(e=>"comic"===e.content_type&&"draft"===e.status).length,active:"comic"===Xe,onClick:()=>qe("comic")}),e.jsx(be,{label:"Art",count:Je.filter(e=>"art"===e.content_type).length+et.filter(e=>"art"===e.content_type&&"draft"===e.status).length,active:"art"===Xe,onClick:()=>qe("art")}),e.jsx("div",{style:{width:1,height:24,background:"var(--dropdown-hover)",margin:"0 8px"}}),e.jsx(be,{label:"Published",count:Je.filter(e=>"minted"===e.inventory_status).length+Ze.filter(e=>e.published_chapters>0||e.is_published).length+nt.filter(e=>e.published_issues>0||e.is_published).length,active:"published"===Ve,onClick:()=>Ge("published"===Ve?"all":"published")}),e.jsx(be,{label:"Drafts",count:Je.filter(e=>"draft"===e.inventory_status).length+Ze.filter(e=>0===e.published_chapters&&!e.is_published).length+nt.filter(e=>0===e.published_issues&&!e.is_published).length+et.filter(e=>"draft"===e.status).length,active:"draft"===Ve,onClick:()=>Ge("draft"===Ve?"all":"draft")}),e.jsx(be,{label:"Unpublished",count:Je.filter(e=>"delisted"===e.inventory_status).length,active:"unpublished"===Ve,onClick:()=>Ge("unpublished"===Ve?"all":"unpublished")})]}),e.jsxs("button",{onClick:()=>t("/studio"),style:{display:"flex",alignItems:"center",gap:8,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#000",border:"none",padding:"10px 18px",borderRadius:10,fontSize:14,fontWeight:700,cursor:"pointer",transition:"all 0.2s",flexShrink:0},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245,158,11,0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[e.jsx(Q,{size:18}),"Create"]})]}),"content"===Ye&&e.jsx("div",{children:0===Je.length&&0===Ze.length&&0===nt.length&&0===et.length?e.jsx(ve,{icon:e.jsx(ee,{size:64}),title:"No content yet",description:"Create your first piece of content to get started",actionLabel:"+ Create Content",onAction:()=>t("/studio")}):(()=>{let r="all"===Xe?Je:"book"===Xe||"comic"===Xe?[]:Je.filter(e=>e.content_type===Xe);"published"===Ve?r=r.filter(e=>"minted"===e.inventory_status):"draft"===Ve?r=r.filter(e=>"draft"===e.inventory_status):"unpublished"===Ve&&(r=r.filter(e=>"delisted"===e.inventory_status));let o="all"===Xe||"book"===Xe?Ze:[];"published"===Ve?o=o.filter(e=>e.published_chapters>0||e.is_published):"draft"===Ve&&(o=o.filter(e=>0===e.published_chapters&&!e.is_published));let n="all"===Xe||"comic"===Xe?nt:[];"published"===Ve?n=n.filter(e=>e.published_issues>0||e.is_published):"draft"===Ve?n=n.filter(e=>0===e.published_issues&&!e.is_published):"unpublished"===Ve&&(n=[]);let i=et.filter(e=>"draft"===e.status);"all"!==Xe&&(i=i.filter(e=>e.content_type===Xe)),"published"!==Ve&&"unpublished"!==Ve||(i=[]);const a=r.length>0||o.length>0||n.length>0||i.length>0,s="all"!==Ve?`${Ve} ${Xe}`:Xe;return a?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:24},children:[o.map(r=>e.jsx(he,{book:r,expanded:rt.has(r.id),onToggleExpand:()=>{ot(e=>{const t=new Set(e);return t.has(r.id)?t.delete(r.id):t.add(r.id),t})},onViewChapter:e=>Vt(e),onEditBook:()=>t(`/studio?editBookProject=${r.id}`)},`book-${r.id}`)),n.map(r=>e.jsx(fe,{comic:r,expanded:at.has(r.id),onToggleExpand:()=>{st(e=>{const t=new Set(e);return t.has(r.id)?t.delete(r.id):t.add(r.id),t})},onViewIssue:e=>Vt(e),onEditComic:()=>t(`/studio/${r.id}`)},`comic-${r.id}`)),i.map(r=>{const o=r.updated_at||r.created_at;let n="Recently";if(o){const e=new Date(o);isNaN(e.getTime())||(n=e.toLocaleDateString())}return e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:12,overflow:"hidden",border:"1px solid var(--panel-border-strong)",cursor:"pointer",transition:"all 0.2s"},onClick:()=>t(`/studio/${r.id}`),onMouseEnter:e=>{e.currentTarget.style.borderColor="#f59e0b",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--panel-border-strong)",e.currentTarget.style.transform="translateY(0)"},children:[e.jsx("div",{style:{height:160,background:"var(--bg-card)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--subtle)",overflow:"hidden"},children:r.cover_image?e.jsx("img",{src:r.cover_image,alt:r.title,style:{width:"100%",height:"100%",objectFit:"cover"}}):(()=>{switch(r.content_type){case"comic":case"art":return e.jsx(z,{size:48});case"book":return e.jsx(S,{size:48});default:return e.jsx(ee,{size:48})}})()}),e.jsxs("div",{style:{padding:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("span",{style:{background:"draft"===r.status?"var(--subtle)":"#22c55e",color:"#fff",fontSize:10,fontWeight:700,padding:"2px 6px",borderRadius:4,textTransform:"uppercase"},children:r.status}),e.jsx("span",{style:{background:"#f59e0b20",color:"#f59e0b",fontSize:10,fontWeight:700,padding:"2px 6px",borderRadius:4,textTransform:"uppercase"},children:r.content_type})]}),e.jsx("h4",{style:{margin:0,fontSize:16,fontWeight:700,color:"#e2e8f0",marginBottom:4},children:r.title}),e.jsxs("div",{style:{fontSize:12,color:"var(--subtle)"},children:["Updated ",n]})]})]},`solo-${r.id}`)}),r.map(r=>e.jsx(ye,{item:r,onView:()=>Vt(r.id),onEdit:()=>{"comic"===r.content_type&&r.source_project_id?t(`/studio/${r.source_project_id}?tab=content`):t(`/studio?editContent=${r.id}`)},onManage:()=>{bt(r),ut(!0)}},r.id))]}):e.jsxs("div",{style:{textAlign:"center",padding:"60px 24px",color:"var(--subtle)"},children:[e.jsx(ee,{size:48,style:{marginBottom:16,opacity:.5}}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:"var(--text-muted)"},children:["No ",s," content yet"]})]})})()}),"collaborations"===Ye&&e.jsxs("div",{children:[kt&&e.jsx("div",{style:{textAlign:"center",padding:40,color:"var(--text-muted)"},children:"Loading collaborations..."}),!kt&&(ht.length>0||mt.length>0)&&e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("h3",{style:{fontSize:16,fontWeight:700,color:"#e2e8f0",marginBottom:16},children:["Active Collaborations (",ht.length+mt.length,")"]}),e.jsxs("div",{style:{display:"grid",gap:12},children:[ht.map(({project:t,invite:r})=>{const o=wt.has(t.id);return e.jsx("div",{style:{background:"var(--bg-card)",border:"1px solid #f59e0b40",borderRadius:12,padding:16,cursor:"pointer",opacity:o?.7:1,transition:"all 0.2s"},onClick:()=>!o&&vt(t.id),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:8,background:"#f59e0b20",display:"flex",alignItems:"center",justifyContent:"center",color:"#f59e0b",flexShrink:0},children:qt(t.content_type,20)}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,color:"var(--text)",marginBottom:2},children:t.title}),e.jsxs("div",{style:{fontSize:13,color:"var(--text-muted)"},children:[t.total_collaborators," collaborator",1!==t.total_collaborators?"s":""," · ",r.revenue_percentage,"% revenue"]})]}),(()=>{if(null!==r.proposed_percentage&&void 0!==r.proposed_percentage&&Math.abs(Number(r.proposed_percentage)-Number(r.revenue_percentage))>.001)return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("div",{style:{background:"#f59e0b20",color:"#f59e0b",padding:"6px 12px",borderRadius:6,fontSize:12,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[e.jsx(j,{size:14}),"Pending (",r.proposed_percentage,"%)"]}),e.jsx("button",{onClick:e=>{e.stopPropagation(),Xt(t.id,e)},disabled:o,style:{background:"transparent",color:"#ef4444",border:"1px solid #ef4444",padding:"6px 10px",borderRadius:6,fontWeight:600,cursor:o?"not-allowed":"pointer",fontSize:12},title:"Withdraw counter-proposal and decline",children:"Withdraw"})]});const n=_t.has(t.id);return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("div",{onClick:e=>{e.stopPropagation(),Ct(e=>{const r=new Set(e);return r.has(t.id)?r.delete(t.id):r.add(t.id),r})},style:{display:"flex",alignItems:"center",gap:4,padding:"6px 10px",background:n?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.05)",border:"1px solid "+(n?"rgba(16, 185, 129, 0.3)":"rgba(100, 116, 139, 0.3)"),borderRadius:6,cursor:"pointer",transition:"all 0.2s"},title:"I acknowledge my contributions will be original work",children:[n?e.jsx(G,{size:14,style:{color:"#10b981"}}):e.jsx(J,{size:14,style:{color:"var(--subtle)"}}),e.jsx(K,{size:12,style:{color:n?"#10b981":"#f59e0b"}})]}),e.jsxs("button",{onClick:e=>Ut(t.id,e),disabled:o||!n,style:{background:n?"#10b981":"var(--subtle)",color:"#fff",border:"none",padding:"8px 12px",borderRadius:6,fontWeight:600,cursor:o||!n?"not-allowed":"pointer",opacity:n?1:.6,display:"flex",alignItems:"center",gap:4,fontSize:13,transition:"all 0.2s"},title:n?"Accept invitation":"Check the warranty box first",children:[e.jsx(k,{size:16}),o?"...":"Accept"]}),e.jsxs("button",{onClick:e=>Xt(t.id,e),disabled:o,style:{background:"transparent",color:"#ef4444",border:"1px solid #ef4444",padding:"8px 12px",borderRadius:6,fontWeight:600,cursor:o?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:4,fontSize:13,transition:"all 0.2s"},title:"Decline invitation",children:[e.jsx(E,{size:16}),"Deny"]}),e.jsx("div",{style:{background:"#f59e0b20",color:"#f59e0b",padding:"4px 12px",borderRadius:12,fontSize:12,fontWeight:600,marginLeft:4},children:"Invite"})]})})()]})},`invite-${t.id}`)}),mt.map(r=>e.jsx("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:12,padding:16,cursor:"pointer",transition:"all 0.2s"},onClick:()=>t(`/studio/${r.id}`),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:8,background:"active"===r.status?"#10b98120":"#64748b20",display:"flex",alignItems:"center",justifyContent:"center",color:"active"===r.status?"#10b981":"var(--text-muted)",flexShrink:0},children:qt(r.content_type,20)}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,color:"var(--text)",marginBottom:2},children:r.title}),e.jsxs("div",{style:{fontSize:13,color:"var(--text-muted)"},children:[r.total_collaborators," collaborator",1!==r.total_collaborators?"s":""," · ",r.status]})]}),e.jsx("div",{style:{background:"active"===r.status?"#10b98120":"#64748b20",color:"active"===r.status?"#10b981":"var(--text-muted)",padding:"4px 12px",borderRadius:12,fontSize:12,fontWeight:600,textTransform:"capitalize"},children:"active"===r.status?"Active":r.status})]})},`collab-${r.id}`))]})]}),!kt&&0===ht.length&&0===mt.length&&e.jsx(ve,{icon:e.jsx(f,{size:64}),title:"No collaborations yet",description:"Find collaborators to work on projects together",actionLabel:"Find Collaborators",onAction:()=>t("/collaborators")}),!kt&&(ht.length>0||mt.length>0)&&e.jsx("div",{style:{textAlign:"center",marginTop:24},children:e.jsx("button",{onClick:()=>t("/collaborators"),style:{background:"transparent",border:"1px solid var(--panel-border-strong)",color:"var(--text-muted)",padding:"10px 24px",borderRadius:8,cursor:"pointer",fontWeight:600},children:"Find More Collaborators"})})]}),"portfolio"===Ye&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{color:"var(--text)",fontSize:18,fontWeight:700,margin:0},children:"External Portfolio"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:14,margin:"4px 0 0"},children:"Showcase your past work and external projects on your public profile"})]}),e.jsxs("button",{onClick:()=>{He(null),Ne(!0)},style:{display:"flex",alignItems:"center",gap:6,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#000",border:"none",padding:"10px 18px",borderRadius:8,fontWeight:600,fontSize:14,cursor:"pointer"},children:[e.jsx(Q,{size:18}),"Add Project"]})]}),0===Ee.length?e.jsx(ve,{icon:e.jsx(Z,{size:64}),title:"No portfolio items yet",description:"Add your past work, side projects, or external collaborations to showcase on your public profile",actionLabel:"+ Add Your First Project",onAction:()=>{He(null),Ne(!0)}}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:20},children:Ee.map(t=>{var r;return e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,overflow:"hidden",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)",e.currentTarget.style.borderColor="var(--panel-border-strong)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none",e.currentTarget.style.borderColor="var(--panel-border-strong)"},children:[e.jsxs("div",{style:{width:"100%",paddingTop:"56.25%",background:t.image_url?`url(${t.image_url}) center/cover`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"relative"},children:[!t.image_url&&e.jsx("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center",color:"rgba(255,255,255,0.3)",fontSize:48,fontWeight:700},children:(null==(r=t.project_type)?void 0:r.charAt(0).toUpperCase())||"P"}),e.jsx("div",{style:{position:"absolute",top:12,left:12,background:"#f59e0b",color:"#000",padding:"4px 10px",borderRadius:6,fontSize:11,fontWeight:700,textTransform:"uppercase"},children:t.project_type||"Project"})]}),e.jsxs("div",{style:{padding:16},children:[e.jsx("div",{style:{fontSize:16,fontWeight:600,color:"var(--text)",marginBottom:4},children:t.title}),t.role&&e.jsx("div",{style:{fontSize:13,color:"#f59e0b",marginBottom:8},children:t.role}),t.description&&e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)",marginBottom:12,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.description}),e.jsxs("div",{style:{display:"flex",gap:8},children:[t.external_url&&e.jsxs("a",{href:t.external_url,target:"_blank",rel:"noopener noreferrer",style:{flex:1,background:"rgba(59,130,246,0.15)",border:"1px solid rgba(59,130,246,0.3)",color:"#60a5fa",padding:"8px 16px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer",textDecoration:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[e.jsx(A,{size:14}),"View"]}),e.jsx("button",{onClick:()=>{He(t),Ne(!0)},style:{background:"transparent",border:"1px solid var(--panel-border-strong)",color:"var(--text-muted)",padding:"8px 12px",borderRadius:8,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(V,{size:14})}),e.jsx("button",{onClick:()=>async function(e){const t=U||await Nt();try{(await fetch(`${h}/api/portfolio/${e}/`,{method:"DELETE",headers:{"X-CSRFToken":t,"X-Requested-With":"XMLHttpRequest"},credentials:"include"})).ok&&(Le(t=>t.filter(t=>t.id!==e)),I("Portfolio item deleted"))}catch(r){I("Failed to delete item")}}(t.id),style:{background:"transparent",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444",padding:"8px 12px",borderRadius:8,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(te,{size:14})})]})]})]},t.id)})})]}),"analytics"===Ye&&e.jsxs("div",{children:[e.jsx(ge,{}),e.jsx("div",{style:{height:24}}),e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:20},children:[e.jsxs("h3",{style:{fontSize:18,fontWeight:700,color:"var(--text)",display:"flex",alignItems:"center",gap:10},children:[e.jsx(b,{size:20,style:{color:"#10b981"}}),"Sales Overview"]}),e.jsxs(i,{to:"/payout-settings",style:{display:"inline-flex",alignItems:"center",gap:6,padding:"8px 16px",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,color:"var(--text-muted)",fontSize:14,textDecoration:"none",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="var(--dropdown-hover)",e.currentTarget.style.color="var(--text)"},onMouseLeave:e=>{e.currentTarget.style.background="var(--dropdown-hover)",e.currentTarget.style.color="var(--text-muted)"},children:[e.jsx(g,{size:16}),"Payout Settings"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:16},children:[e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:12,padding:20},children:[e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Earnings"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#10b981"},children:["$",(null==Tt?void 0:Tt.summary.total_earnings_usdc.toFixed(2))||P.sales.toFixed(2)]}),e.jsx("div",{style:{fontSize:11,color:"var(--subtle)",marginTop:4},children:"USDC"})]}),e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:12,padding:20},children:[e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Solo Content"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#60a5fa"},children:["$",(null==Tt?void 0:Tt.summary.solo_earnings.toFixed(2))||"0.00"]}),e.jsxs("div",{style:{fontSize:11,color:"var(--subtle)",marginTop:4},children:[(null==Tt?void 0:Tt.summary.content_count)||0," items"]})]}),e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:12,padding:20},children:[e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Collaborations"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#f59e0b"},children:["$",(null==Tt?void 0:Tt.summary.collaboration_earnings.toFixed(2))||"0.00"]}),e.jsxs("div",{style:{fontSize:11,color:"var(--subtle)",marginTop:4},children:[(null==Tt?void 0:Tt.summary.collaboration_count)||0," projects"]})]}),e.jsxs("div",{style:{background:"var(--bg-card)",borderRadius:12,padding:20},children:[e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Sales"}),e.jsx("div",{style:{fontSize:28,fontWeight:700,color:"var(--text)"},children:(null==Tt?void 0:Tt.summary.total_sales)||0}),e.jsx("div",{style:{fontSize:11,color:"var(--subtle)",marginTop:4},children:"transactions"})]})]})]}),e.jsx(de,{className:"mb-6"}),Tt&&(Tt.content_sales.length>0||Tt.collaboration_sales.length>0)&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("h3",{style:{fontSize:16,fontWeight:700,color:"var(--text)",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(ae,{size:18,style:{color:"#60a5fa"}}),"Earnings Breakdown"]}),e.jsx("p",{style:{fontSize:12,color:"var(--subtle)",marginBottom:16},children:"Click any item to see individual transactions"}),Tt.content_sales.length>0&&e.jsxs("div",{style:{marginBottom:20},children:[e.jsxs("div",{style:{fontSize:13,color:"#60a5fa",marginBottom:12,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[e.jsx(S,{size:14}),"Solo Content (",Tt.content_sales.length,")"]}),Tt.content_sales.map(t=>{const r=It.has(t.id);return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{onClick:()=>Dt(t.id),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"var(--bg-card)",borderRadius:r?"8px 8px 0 0":8,cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--dropdown-hover)",onMouseLeave:e=>e.currentTarget.style.background="var(--bg-card)",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[qt(t.content_type,18),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"var(--text)"},children:t.title}),e.jsxs("div",{style:{fontSize:12,color:"var(--subtle)"},children:[t.sales_count," sale",1!==t.sales_count?"s":""," • ",t.role," • $",t.price.toFixed(2)," price"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#10b981"},children:["$",t.total_earnings.toFixed(2)]}),e.jsxs("div",{style:{fontSize:11,color:"var(--subtle)"},children:[t.percentage,"% split"]})]}),r?e.jsx(u,{size:18,color:"var(--subtle)"}):e.jsx(x,{size:18,color:"var(--subtle)"})]})]}),r&&t.transactions&&t.transactions.length>0&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"12px 16px"},children:[e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Transaction History"}),t.transactions.map((r,o)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:o<t.transactions.length-1?"1px solid var(--panel-border-strong)":"none"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"var(--text)"},children:["Purchased by ",e.jsxs("span",{style:{color:"#60a5fa"},children:["@",r.buyer]})]}),e.jsxs("div",{style:{fontSize:11,color:"var(--subtle)",display:"flex",alignItems:"center",gap:4},children:[e.jsx(j,{size:10}),new Date(r.date).toLocaleDateString()," ",new Date(r.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),r.tx_signature&&e.jsxs("div",{style:{fontSize:10,color:"#475569",fontFamily:"monospace"},children:["TX: ",r.tx_signature]})]}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#10b981"},children:["+$",r.amount.toFixed(2)]})]},r.id||o))]})]},t.id)})]}),Tt.collaboration_sales.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"#f59e0b",marginBottom:12,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[e.jsx(f,{size:14}),"Collaborations (",Tt.collaboration_sales.length,")"]}),Tt.collaboration_sales.map(t=>{const r=It.has(t.id);return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{onClick:()=>Dt(t.id),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"var(--bg-card)",borderRadius:r?"8px 8px 0 0":8,borderLeft:"3px solid #f59e0b",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--dropdown-hover)",onMouseLeave:e=>e.currentTarget.style.background="var(--bg-card)",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[qt(t.content_type,18),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"var(--text)"},children:t.title}),e.jsxs("div",{style:{fontSize:12,color:"var(--subtle)"},children:[t.role," • ",t.percentage,"% split • ",t.sales_count," sale",1!==t.sales_count?"s":""]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#f59e0b"},children:["$",t.total_earnings.toFixed(2)]}),e.jsx("div",{style:{fontSize:11,color:"var(--subtle)"},children:"your share"})]}),r?e.jsx(u,{size:18,color:"var(--subtle)"}):e.jsx(x,{size:18,color:"var(--subtle)"})]})]}),r&&t.transactions&&t.transactions.length>0&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"12px 16px"},children:[e.jsx("div",{style:{fontSize:11,color:"var(--text-muted)",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Transaction History"}),t.transactions.map((r,o)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:o<t.transactions.length-1?"1px solid var(--panel-border-strong)":"none"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"var(--text)"},children:["Purchased by ",e.jsxs("span",{style:{color:"#60a5fa"},children:["@",r.buyer]})]}),e.jsxs("div",{style:{fontSize:11,color:"var(--subtle)",display:"flex",alignItems:"center",gap:4},children:[e.jsx(j,{size:10}),new Date(r.date).toLocaleDateString()," ",new Date(r.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),r.tx_signature&&e.jsxs("div",{style:{fontSize:10,color:"#475569",fontFamily:"monospace"},children:["TX: ",r.tx_signature]})]}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#f59e0b"},children:["+$",r.amount.toFixed(2)]})]},r.id||o))]})]},t.id)})]})]}),Tt&&Tt.recent_transactions.length>0&&e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,padding:24},children:[e.jsxs("h3",{style:{fontSize:16,fontWeight:700,color:"var(--text)",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(ee,{size:18,style:{color:"#a78bfa"}}),"Recent Transactions"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:Tt.recent_transactions.map(t=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"var(--bg-card)",borderRadius:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"var(--text)"},children:t.title}),e.jsxs("div",{style:{fontSize:12,color:"var(--subtle)"},children:["Bought by @",t.buyer," • ",t.role," (",t.percentage,"%) • ",new Date(t.date).toLocaleDateString()]}),t.tx_signature&&e.jsxs("div",{style:{fontSize:11,color:"#475569",fontFamily:"monospace"},children:["TX: ",t.tx_signature]})]}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"collaboration"===t.type?"#f59e0b":"#10b981"},children:["+$",t.amount.toFixed(2)]})]},t.id))})]}),(!Tt||0===Tt.summary.total_sales)&&!Rt&&e.jsxs("div",{style:{textAlign:"center",padding:"40px 24px",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16},children:[e.jsx(ne,{size:48,style:{color:"#475569",marginBottom:16}}),e.jsx("div",{style:{fontSize:16,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"No sales yet"}),e.jsx("div",{style:{fontSize:14,color:"var(--subtle)"},children:"Once you start making sales, you'll see detailed breakdowns here"})]}),Rt&&e.jsx("div",{style:{textAlign:"center",padding:"40px 24px",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16},children:e.jsx("div",{style:{fontSize:14,color:"var(--text-muted)"},children:"Loading analytics..."})})]}),"following"===Ye&&e.jsx("div",{children:At?e.jsxs("div",{style:{textAlign:"center",padding:"40px 24px",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16},children:[e.jsx(re,{size:32,style:{color:"#f59e0b",animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{fontSize:14,color:"var(--text-muted)",marginTop:12},children:"Loading following..."})]}):0===Pt.length?e.jsxs("div",{style:{textAlign:"center",padding:"40px 24px",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16},children:[e.jsx($,{size:48,style:{color:"#475569",marginBottom:16}}),e.jsx("div",{style:{fontSize:16,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"Not following anyone yet"}),e.jsx("div",{style:{fontSize:14,color:"var(--subtle)"},children:"Explore creators and follow them to see their latest work in your feed"}),e.jsx(i,{to:"/collaborators",style:{display:"inline-block",marginTop:16,padding:"10px 20px",background:"#f59e0b",color:"#111",borderRadius:8,fontWeight:600,textDecoration:"none"},children:"Discover Creators"})]}):e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,overflow:"hidden"},children:[e.jsx("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--panel-border-strong)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("h3",{style:{fontSize:16,fontWeight:700,color:"var(--text)",margin:0},children:["Following (",Pt.length,")"]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:Pt.map((t,r)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:r<Pt.length-1?"1px solid var(--panel-border-strong)":"none",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="var(--dropdown-hover)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[e.jsxs(i,{to:`/profile/${t.username}`,style:{display:"flex",alignItems:"center",gap:12,textDecoration:"none",flex:1},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:"50%",background:t.avatar?`url(${t.avatar}) center/cover`:"#374151",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,fontWeight:700,color:"#f59e0b",flexShrink:0},children:!t.avatar&&(t.username||"?").slice(0,1).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:15,fontWeight:600,color:"var(--text)"},children:t.display_name||t.username}),e.jsxs("div",{style:{fontSize:13,color:"var(--subtle)"},children:["@",t.username]}),t.bio&&e.jsx("div",{style:{fontSize:12,color:"var(--text-muted)",marginTop:4,maxWidth:400},children:t.bio.length>80?t.bio.slice(0,80)+"...":t.bio})]})]}),e.jsxs("button",{onClick:()=>async function(e,t){Lt(e=>new Set(e).add(t));try{await O(e),Mt(e=>e.filter(e=>e.id!==t)),I(`Unfollowed @${e}`)}catch(r){I("Failed to unfollow")}finally{Lt(e=>{const r=new Set(e);return r.delete(t),r})}}(t.username,t.id),disabled:Et.has(t.id),style:{display:"flex",alignItems:"center",gap:6,padding:"8px 16px",background:"transparent",border:"1px solid var(--panel-border-strong)",borderRadius:8,color:"var(--text-muted)",fontSize:13,fontWeight:600,cursor:Et.has(t.id)?"not-allowed":"pointer",opacity:Et.has(t.id)?.5:1,transition:"all 0.2s"},onMouseEnter:e=>{Et.has(t.id)||(e.currentTarget.style.borderColor="#ef4444",e.currentTarget.style.color="#ef4444")},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--panel-border-strong)",e.currentTarget.style.color="var(--text-muted)"},children:[Et.has(t.id)?e.jsx(re,{size:14,style:{animation:"spin 1s linear infinite"}}):e.jsx($,{size:14}),Et.has(t.id)?"Unfollowing...":"Following"]})]},t.id))})]})}),ce&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",backdropFilter:"blur(4px)",display:"grid",placeItems:"center",zIndex:2e3},onClick:()=>pe(!1),children:e.jsx("div",{onClick:e=>e.stopPropagation(),style:{width:"90%",maxWidth:600},children:e.jsx(se,{walletAddress:(null==F?void 0:F.wallet_address)||null,walletProvider:(null==F?void 0:F.wallet_provider)||null,onWalletUpdate:async()=>{pe(!1);const e=await fetch(`${h}/api/users/profile/`,{credentials:"include"});e.ok&&L(await e.json())}})})}),lt&&ct&&e.jsx(l,{open:lt,onClose:()=>dt(!1),teaserUrl:ct.teaser_link,contentType:ct.content_type,contentId:ct.id,price:ct.price_usd,editions:ct.editions}),yt&&e.jsx(w,{open:!0,onClose:()=>{vt(null),Ot()},projectId:yt}),De&&e.jsx(me,{item:Oe,onClose:()=>{Ne(!1),He(null)},onSave:async function(e){const t=U||await Nt(),r=!!Oe,o=r?`${h}/api/portfolio/${Oe.id}/`:`${h}/api/portfolio/`;try{(await fetch(o,{method:r?"PATCH":"POST",headers:{"X-CSRFToken":t,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})).ok&&(await Yt(),Ne(!1),He(null),I(r?"Portfolio item updated":"Portfolio item added"))}catch(n){I("Failed to save item")}}}),gt&&xt&&e.jsx(le,{isOpen:gt,onClose:()=>{ut(!1),bt(null)},item:xt,onUnpublished:()=>{fetch(`${h}/api/content/?mine=1`,{credentials:"include"}).then(e=>e.json()).then(e=>{Ke(e.filter(e=>"book"!==e.content_type||e.is_collaborative))}).catch(()=>{})}}),B&&e.jsx("div",{style:{position:"fixed",bottom:24,right:24,background:"#10b981",color:"#fff",padding:"12px 20px",borderRadius:8,fontSize:14,fontWeight:600,boxShadow:"0 4px 16px rgba(0,0,0,0.3)",zIndex:1e3},children:B})]});var Gt}function xe({icon:t,label:r,count:o,active:n,onClick:i}){return e.jsxs("button",{onClick:i,style:{background:"transparent",border:"none",borderBottom:n?"2px solid #f59e0b":"2px solid transparent",color:n?"#f59e0b":"var(--text-muted)",padding:"12px 16px",fontSize:14,fontWeight:600,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:6,whiteSpace:"nowrap",flexShrink:0,minHeight:44},onMouseEnter:e=>{n||(e.currentTarget.style.color="#cbd5e1")},onMouseLeave:e=>{n||(e.currentTarget.style.color="var(--text-muted)")},children:[t,e.jsx("span",{children:r}),void 0!==o&&o>0&&e.jsx("span",{style:{background:n?"#f59e0b":"var(--dropdown-hover)",color:n?"#000":"var(--text-muted)",padding:"2px 8px",borderRadius:10,fontSize:12,fontWeight:700,marginLeft:4},children:o})]})}function be({label:t,count:r,active:o,onClick:n}){return 0!==r||o||"All"===t?e.jsxs("button",{onClick:n,style:{background:o?"#f59e0b":"var(--bg-card)",border:o?"none":"1px solid var(--panel-border-strong)",color:o?"#000":"var(--text-muted)",padding:"6px 14px",borderRadius:20,fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:6},onMouseEnter:e=>{o||(e.currentTarget.style.borderColor="#475569",e.currentTarget.style.color="#e2e8f0")},onMouseLeave:e=>{o||(e.currentTarget.style.borderColor="var(--panel-border-strong)",e.currentTarget.style.color="var(--text-muted)")},children:[t,e.jsx("span",{style:{background:o?"rgba(0,0,0,0.2)":"var(--dropdown-hover)",padding:"1px 6px",borderRadius:8,fontSize:11},children:r})]}):null}function he({book:t,expanded:r,onToggleExpand:o,onViewChapter:n,onEditBook:i}){const a=t.published_chapters>0||t.is_published,s=t.chapters.find(e=>e.is_published&&e.content_id);return e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,overflow:"hidden",transition:"all 0.2s",position:"relative"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)",e.currentTarget.style.borderColor="var(--panel-border-strong)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none",e.currentTarget.style.borderColor="var(--panel-border-strong)"},children:[e.jsxs("div",{onClick:o,style:{width:"100%",paddingTop:"56.25%",background:t.cover_image_url?`url(${t.cover_image_url})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center",position:"relative",cursor:"pointer",opacity:a?1:.7},children:[!t.cover_image_url&&e.jsx("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center",color:"rgba(255,255,255,0.3)"},children:e.jsx(S,{size:48})}),e.jsx("div",{style:{position:"absolute",top:12,right:12,background:a?"rgba(0,0,0,0.75)":"rgba(100, 116, 139, 0.9)",color:"var(--text)",padding:"4px 10px",borderRadius:a?12:6,fontSize:a?12:11,fontWeight:600,backdropFilter:"blur(4px)",textTransform:a?"none":"uppercase",letterSpacing:a?"normal":"0.5px"},children:a?`${t.published_chapters} chapter${1!==t.published_chapters?"s":""}`:"Draft"})]}),e.jsxs("div",{style:{padding:16},children:[e.jsx("div",{style:{fontSize:16,fontWeight:600,color:"var(--text)",marginBottom:8,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.4},children:t.title}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)",marginBottom:12},children:a?`book • ${t.published_chapters} of ${t.total_chapters} chapter${1!==t.total_chapters?"s":""} published`:`book • ${t.total_chapters} chapter${1!==t.total_chapters?"s":""} (unpublished)`}),a&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,fontSize:13,color:"var(--text-muted)",marginBottom:12},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(D,{size:14})," ",t.total_views]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(b,{size:14})," $",t.total_price.toFixed(2)]})]}),t.total_chapters>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o,style:{width:"100%",background:"var(--bg-card)",border:"none",borderRadius:8,padding:"8px 12px",color:"var(--text-muted)",fontSize:13,fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:r?8:12},children:[e.jsx("span",{children:"Chapters"}),r?e.jsx(u,{size:16}):e.jsx(x,{size:16})]}),r&&e.jsx("div",{style:{background:"var(--bg-input)",borderRadius:8,padding:8,marginBottom:12,maxHeight:200,overflowY:"auto"},children:t.chapters.map((t,r)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 10px",borderRadius:6,background:r%2==0?"transparent":"var(--nav-hover-bg)",opacity:t.is_published?1:.6},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{fontSize:13,color:"var(--text)",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",gap:6},children:["Ch ",t.order+1,": ",t.title,!t.is_published&&e.jsx("span",{style:{fontSize:9,background:"rgba(100, 116, 139, 0.5)",color:"var(--text-muted)",padding:"2px 5px",borderRadius:3,textTransform:"uppercase",letterSpacing:"0.3px"},children:"Draft"})]}),t.is_published&&e.jsxs("div",{style:{fontSize:11,color:"var(--subtle)"},children:["$",t.price_usd.toFixed(2)," • ",t.view_count," views"]})]}),t.is_published&&t.content_id&&e.jsx("button",{onClick:e=>{e.stopPropagation(),n(t.content_id)},style:{background:"transparent",border:"1px solid var(--panel-border-strong)",borderRadius:6,padding:"4px 10px",color:"var(--text-muted)",fontSize:11,fontWeight:500,cursor:"pointer",marginLeft:8,flexShrink:0},children:"View"})]},t.id))})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:i,style:{flex:1,background:"transparent",border:"1px solid var(--panel-border-strong)",borderRadius:10,padding:"10px 16px",color:"var(--text-muted)",fontSize:14,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:"Edit"}),a&&s&&e.jsx("button",{onClick:()=>n(s.content_id),style:{flex:1,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",borderRadius:10,padding:"10px 16px",color:"#000",fontSize:14,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:"View"})]})]})]})}function fe({comic:t,expanded:r,onToggleExpand:o,onViewIssue:n,onEditComic:i}){const a=t.published_issues>0||t.is_published,s=t.issues.find(e=>e.is_published&&e.content_id);return e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,overflow:"hidden",transition:"all 0.2s",position:"relative"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{onClick:o,style:{width:"100%",paddingTop:"56.25%",background:t.cover_image_url?`url(${t.cover_image_url})`:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",backgroundSize:"cover",backgroundPosition:"center",position:"relative",cursor:"pointer",opacity:a?1:.7},children:[!t.cover_image_url&&e.jsx("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center",color:"rgba(255,255,255,0.3)"},children:e.jsx(z,{size:48})}),e.jsx("div",{style:{position:"absolute",top:12,right:12,background:a?"rgba(0,0,0,0.75)":"rgba(100, 116, 139, 0.9)",color:"var(--text)",padding:"4px 10px",borderRadius:a?12:6,fontSize:a?12:11,fontWeight:600,backdropFilter:"blur(4px)",textTransform:a?"none":"uppercase",letterSpacing:a?"normal":"0.5px"},children:a?`${t.published_issues} issue${1!==t.published_issues?"s":""}`:"Draft"})]}),e.jsxs("div",{style:{padding:16},children:[e.jsx("div",{style:{fontSize:16,fontWeight:600,color:"var(--text)",marginBottom:8,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.4},children:t.title}),e.jsx("div",{style:{fontSize:13,color:"var(--text-muted)",marginBottom:12},children:a?`comic • ${t.published_issues} of ${t.total_issues} issue${1!==t.total_issues?"s":""} published`:`comic • ${t.total_issues} issue${1!==t.total_issues?"s":""} (unpublished)`}),a&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,fontSize:13,color:"var(--text-muted)",marginBottom:12},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(D,{size:14})," ",t.total_views]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(b,{size:14})," $",t.total_price.toFixed(2)]})]}),t.total_issues>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o,style:{width:"100%",background:"var(--bg-card)",border:"none",borderRadius:8,padding:"8px 12px",color:"var(--text-muted)",fontSize:13,fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:r?8:12},children:[e.jsx("span",{children:"Issues"}),r?e.jsx(u,{size:16}):e.jsx(x,{size:16})]}),r&&e.jsx("div",{style:{background:"var(--bg-input)",borderRadius:8,padding:8,marginBottom:12,maxHeight:200,overflowY:"auto"},children:t.issues.map((t,r)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 10px",borderRadius:6,background:r%2==0?"transparent":"var(--nav-hover-bg)",opacity:t.is_published?1:.6},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{fontSize:13,color:"var(--text)",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",gap:6},children:["Issue #",t.issue_number,": ",t.title,!t.is_published&&e.jsx("span",{style:{fontSize:9,background:"rgba(100, 116, 139, 0.5)",color:"var(--text-muted)",padding:"2px 5px",borderRadius:3,textTransform:"uppercase",letterSpacing:"0.3px"},children:"Draft"})]}),t.is_published&&e.jsxs("div",{style:{fontSize:11,color:"var(--subtle)"},children:["$",t.price_usd.toFixed(2)," • ",t.view_count," views"]})]}),t.is_published&&t.content_id&&e.jsx("button",{onClick:e=>{e.stopPropagation(),n(t.content_id)},style:{background:"transparent",border:"1px solid var(--panel-border-strong)",borderRadius:6,padding:"4px 10px",color:"var(--text-muted)",fontSize:11,fontWeight:500,cursor:"pointer",marginLeft:8,flexShrink:0},children:"View"})]},t.id))})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:i,style:{flex:1,background:"transparent",border:"1px solid var(--panel-border-strong)",borderRadius:10,padding:"10px 16px",color:"var(--text-muted)",fontSize:14,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:"Edit"}),a&&s&&e.jsx("button",{onClick:()=>n(s.content_id),style:{flex:1,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",borderRadius:10,padding:"10px 16px",color:"#000",fontSize:14,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:"View"})]})]})]})}function ye({item:t,onView:r,onEdit:o,onManage:n}){const i="minted"===t.inventory_status,a="delisted"===t.inventory_status,s="draft"===t.inventory_status,l=i&&"book"!==t.content_type&&"comic"!==t.content_type;return e.jsxs("div",{style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,overflow:"hidden",cursor:"pointer",transition:"all 0.2s",position:"relative"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)",e.currentTarget.style.borderColor="var(--panel-border-strong)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none",e.currentTarget.style.borderColor="var(--panel-border-strong)"},children:[s&&e.jsx("div",{style:{position:"absolute",top:12,right:12,background:"rgba(100, 116, 139, 0.9)",color:"var(--text)",padding:"4px 10px",borderRadius:6,fontSize:11,fontWeight:600,zIndex:1,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Draft"}),a&&e.jsx("div",{style:{position:"absolute",top:12,right:12,background:"rgba(245, 158, 11, 0.9)",color:"#000",padding:"4px 10px",borderRadius:6,fontSize:11,fontWeight:600,zIndex:1,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Unpublished"}),e.jsx("div",{onClick:i||a?r:o,style:{width:"100%",paddingTop:"56.25%",background:t.teaser_link?`url(${t.teaser_link})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center",position:"relative",opacity:s?.7:1},children:!t.teaser_link&&e.jsx("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center",color:"rgba(255,255,255,0.3)"},children:"book"===t.content_type?e.jsx(S,{size:48}):"art"===t.content_type?e.jsx(z,{size:48}):"film"===t.content_type?e.jsx(_,{size:48}):e.jsx(C,{size:48})})}),e.jsxs("div",{style:{padding:16},children:[e.jsx("div",{style:{fontSize:16,fontWeight:600,color:"var(--text)",marginBottom:8,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.4},children:t.title}),e.jsxs("div",{style:{fontSize:13,color:"var(--text-muted)",marginBottom:12},children:[t.content_type," ",t.genre&&`• ${t.genre}`]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,fontSize:13,color:"var(--text-muted)",marginBottom:16},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(D,{size:14})," ",t.view_count||0]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(b,{size:14})," $",t.price_usd||0]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[l?e.jsxs("button",{onClick:e=>{e.stopPropagation(),null==n||n()},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:6,background:"transparent",border:"1px solid var(--panel-border-strong)",color:"var(--text-muted)",padding:"8px 16px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="var(--dropdown-hover)",e.currentTarget.style.borderColor="#475569"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="var(--panel-border-strong)"},children:[e.jsx(g,{size:14}),"Manage"]}):e.jsx("button",{onClick:o,style:{flex:1,background:"transparent",border:"1px solid var(--panel-border-strong)",color:"var(--text-muted)",padding:"8px 16px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="var(--dropdown-hover)",e.currentTarget.style.borderColor="#475569"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="var(--panel-border-strong)"},children:"Edit"}),(i||a)&&e.jsx("button",{onClick:r,style:{flex:1,background:a?"linear-gradient(135deg, #78716c 0%, #57534e 100%)":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"8px 16px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:"View"})]})]})]})}function ve({icon:t,title:r,description:o,actionLabel:n,onAction:i}){return e.jsxs("div",{style:{textAlign:"center",padding:"80px 24px"},children:[e.jsx("div",{style:{color:"#475569",marginBottom:24},children:t}),e.jsx("div",{style:{fontSize:24,fontWeight:600,color:"var(--text)",marginBottom:12},children:r}),e.jsx("div",{style:{fontSize:15,color:"var(--text-muted)",marginBottom:32,maxWidth:400,margin:"0 auto 32px"},children:o}),n&&e.jsx("button",{onClick:i,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"12px 24px",borderRadius:8,fontSize:15,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 16px rgba(245, 158, 11, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:n})]})}function me({item:t,onClose:r,onSave:n}){const[i,a]=o.useState((null==t?void 0:t.title)||""),[s,l]=o.useState((null==t?void 0:t.description)||""),[d,c]=o.useState((null==t?void 0:t.external_url)||""),[p,g]=o.useState((null==t?void 0:t.project_type)||"book"),[u,x]=o.useState((null==t?void 0:t.role)||""),[b,h]=o.useState((null==t?void 0:t.created_date)||"");return e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",backdropFilter:"blur(4px)",display:"grid",placeItems:"center",zIndex:2e3},onClick:r,children:e.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:16,padding:32,width:"90%",maxWidth:500,maxHeight:"90vh",overflow:"auto"},children:[e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:"var(--text)",marginBottom:24,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:t?"Edit Portfolio Item":"Add Portfolio Item"}),e.jsx("button",{onClick:r,style:{background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer",padding:4,display:"grid",placeItems:"center"},children:e.jsx(T,{size:24})})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),n({title:i,description:s,external_url:d,project_type:p,role:u,created_date:b||null})},children:[e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"Title *"}),e.jsx("input",{type:"text",value:i,onChange:e=>a(e.target.value),required:!0,placeholder:"Project title",style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"10px 14px",color:"var(--text)",fontSize:14}})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"Project Type"}),e.jsxs("select",{value:p,onChange:e=>g(e.target.value),style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"10px 14px",color:"var(--text)",fontSize:14},children:[e.jsx("option",{value:"book",children:"Book"}),e.jsx("option",{value:"art",children:"Art"}),e.jsx("option",{value:"music",children:"Music"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"film",children:"Film"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"Your Role"}),e.jsx("input",{type:"text",value:u,onChange:e=>x(e.target.value),placeholder:"e.g., Author, Illustrator, Producer",style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"10px 14px",color:"var(--text)",fontSize:14}})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"Description"}),e.jsx("textarea",{value:s,onChange:e=>l(e.target.value),rows:3,placeholder:"Brief description of the project",style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"10px 14px",color:"var(--text)",fontSize:14,resize:"vertical"}})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"External URL"}),e.jsx("input",{type:"url",value:d,onChange:e=>c(e.target.value),placeholder:"https://...",style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"10px 14px",color:"var(--text)",fontSize:14}})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"var(--text-muted)",marginBottom:8},children:"Date (optional)"}),e.jsx("input",{type:"date",value:b,onChange:e=>h(e.target.value),style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--panel-border-strong)",borderRadius:8,padding:"10px 14px",color:"var(--text)",fontSize:14}})]}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsx("button",{type:"button",onClick:r,style:{flex:1,background:"transparent",border:"1px solid var(--panel-border-strong)",color:"var(--text-muted)",padding:"12px",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer"},children:"Cancel"}),e.jsx("button",{type:"submit",style:{flex:1,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"12px",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer"},children:t?"Save Changes":"Add Project"})]})]})]})})}export{ue as default};
