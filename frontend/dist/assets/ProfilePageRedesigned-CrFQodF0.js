const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web3auth-BGmWjNJV.js","assets/router-CzH47hF_.js","assets/vendor-Cfs_Iq82.js"])))=>i.map(i=>d[i]);
import{j as e,_ as t,a as o}from"./web3auth-BGmWjNJV.js";import{r as n,a as i,L as r}from"./router-CzH47hF_.js";import{T as l,P as s}from"./PreviewModal-DqxEBHbl.js";import{c as a,C as d,D as c,A as p,U as u,a as g,I as x,b as f,X as b}from"./index-CceaTp3C.js";import{L as h,I as y,C as m,T as j,a as v}from"./triangle-alert-C9WQN451.js";import{G as k,U as S,L as w}from"./user-check-B9YCaNI-.js";import{E as z}from"./external-link-Chh4MqLm.js";import{S as C}from"./settings-DcVb-G-F.js";import{C as T,a as _}from"./chevron-up-DKSNEywf.js";import{C as W}from"./circle-alert-pwtqUwkn.js";import{g as R,u as B}from"./socialApi-DW9NOArw.js";import{E as I}from"./eye-BeY39ilT.js";import{M as A,B as M}from"./map-pin-CXz3kyWb.js";import{P as $}from"./pen-Cl9HubNc.js";import{C as F,P}from"./plus-CWIFeIQz.js";import{B as E}from"./book-open-S28DUXtz.js";import{F as L}from"./file-text-BUkKvXvg.js";import{P as D,M as O}from"./palette-CH5Fr53H.js";import{F as N}from"./film-C0tMLN81.js";import"./vendor-Cfs_Iq82.js";import"./sanitize-MG3ZWMPS.js";import"./thumbs-up-C420JFo9.js";import"./send-NTIEAL-d.js";
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=a("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),H=a("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),X=a("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),U=a("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);function q({walletAddress:i,walletProvider:r,onWalletUpdate:l}){const[s,a]=n.useState(!1),[u,g]=n.useState(null),[x,f]=n.useState(!1),[b,v]=n.useState(""),[S,w]=n.useState(""),R=async()=>{const e=await fetch(`${p}/api/auth/csrf/`,{credentials:"include"}),t=await e.json();return(null==t?void 0:t.csrfToken)||""},B=async()=>{v(""),f(!0);try{const{Web3Auth:o}=await t(async()=>{const{Web3Auth:e}=await import("./web3auth-BGmWjNJV.js").then(e=>e.b);return{Web3Auth:e}},__vite__mapDeps([0,1,2])),{CHAIN_NAMESPACES:n}=await t(async()=>{const{CHAIN_NAMESPACES:e}=await import("./web3auth-BGmWjNJV.js").then(e=>e.i);return{CHAIN_NAMESPACES:e}},__vite__mapDeps([0,1,2])),{SolanaPrivateKeyProvider:i}=await t(async()=>{const{SolanaPrivateKeyProvider:e}=await import("./web3auth-BGmWjNJV.js").then(e=>e.c);return{SolanaPrivateKeyProvider:e}},__vite__mapDeps([0,1,2])),r="BKECVnfm_tGc5XfDSuwBycgrP0N1sPen30bFwzRxdZFvXSDYzSzJ7tCdYYS3xJ0t_6xU-Qy8Slcr5oBCtK3kNKs",s={chainNamespace:n.SOLANA,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com"},a=new o({clientId:r,chainConfig:s,privateKeyProvider:new i({config:{chainConfig:s}}),web3AuthNetwork:"sapphire_devnet",uiConfig:{appName:"RenaissBlock",mode:"dark",loginMethodsOrder:["google","discord"],defaultLanguage:"en"}});await a.initModal();try{"connected"===a.status&&await a.logout()}catch(e){}await a.connect();const d=await a.getUserInfo(),c=(null==d?void 0:d.idToken)||(null==d?void 0:d.id_token);if(!c)throw new Error("Could not obtain Web3Auth token");const u=await R(),x=await fetch(`${p}/api/wallet/link/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":u,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({web3auth_token:c})});if(!x.ok){const e=await x.json().catch(()=>({})),t=e.error||e.message||"Failed to link wallet";throw new Error(t)}w("Wallet created and linked!"),g(null),l()}catch(e){v((null==e?void 0:e.message)||String(e))}finally{f(!1)}},I=async()=>{var e;v(""),f(!0);try{const e=window.solana;if(!e)throw new Error("No Solana wallet found. Please install Phantom, Backpack, or Solflare.");const t=(await e.connect()).publicKey.toString(),n=`Connect wallet to RenaissBlock\n\nNonce: ${Math.random().toString(36).substring(2,15)}\nTimestamp: ${Date.now()}`,i=(new TextEncoder).encode(n),r=await e.signMessage(i,"utf8"),s=o.from(r.signature).toString("base64"),a=await R(),d=await fetch(`${p}/api/wallet/link/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({wallet_address:t,signature:s,message:n})});if(!d.ok){const e=await d.json().catch(()=>({})),t=e.error||e.message||"Failed to link wallet";throw new Error(t)}w("External wallet connected!"),g(null),l()}catch(t){4001===(null==t?void 0:t.code)||(null==(e=null==t?void 0:t.message)?void 0:e.includes("User rejected"))?v("Connection cancelled"):v((null==t?void 0:t.message)||String(t))}finally{f(!1)}};if(!i)return e.jsxs("div",{style:{background:"var(--panel)",border:"1px solid var(--panel-border)",borderRadius:12,padding:16,marginBottom:16},children:[e.jsxs("div",{style:{fontWeight:600,color:"#f1f5f9",fontSize:16,marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx(U,{size:20})," Wallet Setup"]}),e.jsx("div",{style:{fontSize:13,color:"#94a3b8",marginBottom:16},children:"Connect a wallet to receive USDC payments and own NFTs."}),b&&e.jsx("div",{style:{background:"#ef444420",border:"1px solid #ef4444",borderRadius:8,padding:12,color:"#fca5a5",fontSize:13,marginBottom:12},children:b}),S&&e.jsx("div",{style:{background:"#10b98120",border:"1px solid #10b981",borderRadius:8,padding:12,color:"#6ee7b7",fontSize:13,marginBottom:12},children:S}),e.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginBottom:16},children:[e.jsx("button",{onClick:B,disabled:x,style:{background:x?"#6b7280":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:x?"not-allowed":"pointer",fontSize:14,transition:"all 0.2s"},onMouseOver:e=>{x||(e.currentTarget.style.transform="translateY(-2px)")},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)"},children:x?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(h,{size:16})," Creating..."]}):e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(k,{size:16})," Create Wallet with Web3Auth"]})}),e.jsx("button",{onClick:I,disabled:x,style:{background:"transparent",border:"1px solid #334155",color:"#cbd5e1",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:x?"not-allowed":"pointer",fontSize:14,transition:"all 0.2s"},onMouseOver:e=>{x||(e.currentTarget.style.borderColor="#cbd5e1",e.currentTarget.style.background="rgba(203, 213, 225, 0.05)")},onMouseOut:e=>{e.currentTarget.style.borderColor="#334155",e.currentTarget.style.background="transparent"},children:x?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(h,{size:16})," Connecting..."]}):e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(H,{size:16})," Connect External Wallet"]})})]}),e.jsxs("div",{style:{fontSize:12,color:"#94a3b8",padding:12,background:"#0b1220",borderRadius:8,border:"1px solid #1f2937"},children:[e.jsxs("div",{style:{marginBottom:6,fontWeight:600,color:"#cbd5e1",display:"flex",alignItems:"center",gap:6},children:[e.jsx(y,{size:14})," Web3Auth (Recommended)"]}),e.jsx("div",{children:"Easiest option - create a wallet with Google/Discord. No browser extension needed. Your wallet is non-custodial and secured by social login."})]})]});const A="web3auth"===r?"Web3Auth":"External Wallet",M="web3auth"===r?e.jsx(k,{size:12}):e.jsx(H,{size:12});return e.jsxs("div",{style:{background:"var(--panel)",border:"1px solid #10b981",borderRadius:12,padding:16,marginBottom:16,position:"relative"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(d,{size:20,style:{color:"#10b981"}}),e.jsx("span",{style:{fontWeight:600,color:"#f1f5f9",fontSize:16},children:"Wallet Connected"}),e.jsxs("span",{style:{fontSize:11,color:"#6ee7b7",background:"#10b98120",padding:"2px 8px",borderRadius:12,fontWeight:600,display:"flex",alignItems:"center",gap:4},children:[M," ",A]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[e.jsx("div",{style:{fontSize:14,color:"#e5e7eb",fontFamily:"monospace",background:"#0b1220",padding:"6px 12px",borderRadius:6,border:"1px solid #1f2937"},children:($=i,!$||$.length<12?$:`${$.slice(0,4)}...${$.slice(-4)}`)}),e.jsxs("button",{onClick:async()=>{if(i)try{await navigator.clipboard.writeText(i),w("Address copied!"),setTimeout(()=>w(""),2e3)}catch(e){v("Failed to copy")}},style:{background:"#1f2937",border:"1px solid #374151",color:"#cbd5e1",padding:"6px 12px",borderRadius:6,fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#374151"},onMouseOut:e=>{e.currentTarget.style.background="#1f2937"},children:[e.jsx(m,{size:14,style:{marginRight:4}})," Copy"]}),e.jsxs("a",{href:(e=>`https://solscan.io/account/${e}?cluster=devnet`)(i),target:"_blank",rel:"noopener noreferrer",style:{background:"#1f2937",border:"1px solid #374151",color:"#cbd5e1",padding:"6px 12px",borderRadius:6,fontSize:12,fontWeight:600,textDecoration:"none",display:"inline-block",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#374151"},onMouseOut:e=>{e.currentTarget.style.background="#1f2937"},children:[e.jsx(z,{size:14,style:{marginRight:4}})," Explorer"]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{onClick:()=>a(!s),style:{background:"#1f2937",border:"1px solid #374151",color:"#cbd5e1",padding:"6px 12px",borderRadius:6,fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#374151"},onMouseOut:e=>{e.currentTarget.style.background="#1f2937"},children:e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx(C,{size:14})," Manage ",s?e.jsx(T,{size:14}):e.jsx(_,{size:14})]})}),s&&e.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:8,background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:8,minWidth:220,zIndex:100,boxShadow:"0 10px 25px rgba(0,0,0,0.5)"},children:[e.jsx("button",{onClick:()=>g("switch"),style:{width:"100%",background:"transparent",border:"none",color:"#cbd5e1",padding:"8px 12px",borderRadius:6,fontSize:13,fontWeight:500,cursor:"pointer",textAlign:"left",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#334155"},onMouseOut:e=>{e.currentTarget.style.background="transparent"},children:e.jsx("span",{style:{display:"flex",alignItems:"center",gap:8},children:"web3auth"===r?e.jsxs(e.Fragment,{children:[e.jsx(H,{size:14})," Switch to External Wallet"]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{size:14})," Switch to Web3Auth"]})})}),e.jsx("div",{style:{height:1,background:"#334155",margin:"8px 0"}}),e.jsx("button",{onClick:()=>g("disconnect"),style:{width:"100%",background:"transparent",border:"none",color:"#fca5a5",padding:"8px 12px",borderRadius:6,fontSize:13,fontWeight:500,cursor:"pointer",textAlign:"left",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.background="#ef444420"},onMouseOut:e=>{e.currentTarget.style.background="transparent"},children:e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(j,{size:14})," Disconnect Wallet"]})})]})]})]})]})}),S&&e.jsx("div",{style:{background:"#10b98120",border:"1px solid #10b981",borderRadius:8,padding:12,color:"#6ee7b7",fontSize:13,marginTop:12},children:S}),b&&e.jsx("div",{style:{background:"#ef444420",border:"1px solid #ef4444",borderRadius:8,padding:12,color:"#fca5a5",fontSize:13,marginTop:12},children:b}),e.jsxs("div",{style:{fontSize:12,color:"#10b981",marginTop:8,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[e.jsx(c,{size:14})," Ready to receive USDC payments and own NFTs"]}),"switch"===u&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",backdropFilter:"blur(4px)",display:"grid",placeItems:"center",zIndex:2e3},children:e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:12,padding:24,maxWidth:500,width:"90%"},children:[e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:"#f59e0b",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(j,{size:20})," Switch Wallet?"]}),e.jsxs("div",{style:{fontSize:14,color:"#cbd5e1",marginBottom:16,lineHeight:1.6},children:[e.jsx("p",{style:{marginBottom:12},children:"Your existing NFTs will remain in your old wallet. You'll need to manually transfer them if you want them in the new wallet."}),e.jsx("p",{style:{marginBottom:12},children:"New purchases and payments will go to the new wallet address."}),e.jsxs("div",{style:{background:"#0b1220",border:"1px solid #334155",borderRadius:8,padding:12,fontSize:12,fontFamily:"monospace",marginTop:12},children:[e.jsx("div",{style:{color:"#94a3b8",marginBottom:4},children:"Current wallet:"}),e.jsx("div",{style:{color:"#e5e7eb"},children:i})]})]}),b&&e.jsx("div",{style:{background:"#ef444420",border:"1px solid #ef4444",borderRadius:8,padding:12,color:"#fca5a5",fontSize:13,marginBottom:16},children:b}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsx("button",{onClick:()=>{g(null),v("")},disabled:x,style:{flex:1,background:"transparent",border:"1px solid #475569",color:"#cbd5e1",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:x?"not-allowed":"pointer",fontSize:14},children:"Cancel"}),e.jsx("button",{onClick:()=>{g(null),a(!1),"web3auth"===r?I():B()},disabled:x,style:{flex:1,background:x?"#6b7280":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:x?"not-allowed":"pointer",fontSize:14},children:x?"Processing...":"Continue"})]})]})}),"disconnect"===u&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",backdropFilter:"blur(4px)",display:"grid",placeItems:"center",zIndex:2e3},children:e.jsxs("div",{style:{background:"#1e293b",border:"2px solid #ef4444",borderRadius:12,padding:24,maxWidth:500,width:"90%"},children:[e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:"#ef4444",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(W,{size:20})," Disconnect Wallet?"]}),e.jsxs("div",{style:{fontSize:14,color:"#cbd5e1",marginBottom:16,lineHeight:1.6},children:[e.jsx("p",{style:{marginBottom:12,fontWeight:600,color:"#fca5a5"},children:"Warning: Without a wallet you CANNOT:"}),e.jsxs("ul",{style:{paddingLeft:20,marginBottom:12},children:[e.jsx("li",{children:"Receive USDC payments from new sales"}),e.jsx("li",{children:"Receive purchased NFTs"}),e.jsx("li",{children:"Purchase content on RenaissBlock"}),e.jsx("li",{children:"Mint new content"})]}),e.jsx("p",{style:{marginBottom:12},children:"Your library of owned NFTs will disappear until you reconnect a wallet."}),e.jsxs("div",{style:{background:"#0b1220",border:"1px solid #334155",borderRadius:8,padding:12,fontSize:12,fontFamily:"monospace",marginTop:12},children:[e.jsx("div",{style:{color:"#94a3b8",marginBottom:4},children:"Your NFTs will remain in:"}),e.jsx("div",{style:{color:"#e5e7eb"},children:i})]})]}),b&&e.jsx("div",{style:{background:"#ef444420",border:"1px solid #ef4444",borderRadius:8,padding:12,color:"#fca5a5",fontSize:13,marginBottom:16},children:b}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsx("button",{onClick:()=>{g(null),v("")},disabled:x,style:{flex:1,background:"transparent",border:"1px solid #475569",color:"#cbd5e1",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:x?"not-allowed":"pointer",fontSize:14},children:"Cancel"}),e.jsx("button",{onClick:async()=>{v(""),f(!0);try{const e=await R(),t=await fetch(`${p}/api/wallet/link/`,{method:"DELETE",headers:{"X-CSRFToken":e,"X-Requested-With":"XMLHttpRequest"},credentials:"include"});if(!t.ok){const e=await t.text();throw new Error(e||"Failed to disconnect wallet")}w("Wallet disconnected"),g(null),a(!1),l()}catch(e){v((null==e?void 0:e.message)||String(e))}finally{f(!1)}},disabled:x,style:{flex:1,background:x?"#6b7280":"#ef4444",border:"none",color:"#fff",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:x?"not-allowed":"pointer",fontSize:14},children:x?"Disconnecting...":"Yes, Disconnect"})]})]})})]});var $}function V(){const t=i(),[o,a]=n.useState(null),[b,h]=n.useState([]),[y,m]=n.useState(""),[j,k]=n.useState({content_count:0,sales:0}),[C,W]=n.useState(null),[H,V]=n.useState(""),te=n.useRef(null),oe=n.useRef(null),[ne,ie]=n.useState(!1),[re,le]=n.useState(!1),[se,ae]=n.useState(""),[de,ce]=n.useState(""),[pe,ue]=n.useState(""),[ge,xe]=n.useState(""),[fe,be]=n.useState(!1),[he,ye]=n.useState([]),[me,je]=n.useState(!1),[ve,ke]=n.useState(null),[Se,we]=n.useState("content"),[ze,Ce]=n.useState("all"),[Te,_e]=n.useState("all"),[We,Re]=n.useState([]),[Be,Ie]=n.useState([]),[Ae,Me]=n.useState(new Set),[$e,Fe]=n.useState(!1),[Pe,Ee]=n.useState(null),[Le,De]=n.useState([]),[Oe,Ne]=n.useState(null),[Ye,He]=n.useState([]),[Xe,Ue]=n.useState(!1),[qe,Ve]=n.useState(new Set),[Ke,Je]=n.useState(null),[Ge,Qe]=n.useState(!1),[Ze,et]=n.useState(new Set),[tt,ot]=n.useState([]),[nt,it]=n.useState(!1),[rt,lt]=n.useState(new Set),st=e=>{et(t=>{const o=new Set(t);return o.has(e)?o.delete(e):o.add(e),o})};async function at(){const e=await fetch(`${p}/api/auth/csrf/`,{credentials:"include"}),t=await e.json(),o=(null==t?void 0:t.csrfToken)||"";return V(o),o}async function dt(){try{const e=await f.getPendingInvites();De(e)}catch(e){De([])}}async function ct(){Ue(!0);try{const e=await f.getCollaborativeProjects();He(e)}catch(e){He([])}finally{Ue(!1)}}async function pt(){try{const e=await fetch(`${p}/api/portfolio/`,{credentials:"include"});if(e.ok){const t=await e.json();ye(t)}}catch(e){}}async function ut(e,t){t.stopPropagation(),Ve(t=>new Set(t).add(e));try{await f.acceptInvitation(e),m("Invitation accepted!"),await Promise.all([dt(),ct()])}catch(o){m(`Failed to accept: ${o.message||"Unknown error"}`)}finally{Ve(t=>{const o=new Set(t);return o.delete(e),o})}}async function gt(e,t){t.stopPropagation(),Ve(t=>new Set(t).add(e));try{await f.declineInvitation(e),m("Invitation declined"),await Promise.all([dt(),ct()])}catch(o){m(`Failed to decline: ${o.message||"Unknown error"}`)}finally{Ve(t=>{const o=new Set(t);return o.delete(e),o})}}function xt(t,o=24){switch(t){case"book":return e.jsx(E,{size:o});case"music":return e.jsx(O,{size:o});case"video":return e.jsx(N,{size:o});default:return e.jsx(D,{size:o})}}n.useEffect(()=>{const e=new AbortController,t=e.signal;return Promise.all([fetch(`${p}/api/auth/status/`,{credentials:"include",signal:t}).then(e=>e.json()),fetch(`${p}/api/content/`,{credentials:"include",signal:t}).then(e=>e.json()),fetch(`${p}/api/auth/csrf/`,{credentials:"include",signal:t}).then(e=>e.json()),fetch(`${p}/api/users/profile/`,{credentials:"include",signal:t}).then(e=>e.ok?e.json():null),fetch(`${p}/api/dashboard/`,{credentials:"include",signal:t}).then(e=>e.ok?e.json():{content_count:0,sales:0})]).then(([e,t,o,n,i])=>{a(e),Array.isArray(t.results)?h(t.results):Array.isArray(t)&&h(t),V((null==o?void 0:o.csrfToken)||""),W(n),k(i),dt(),ct(),pt(),async function(){Qe(!0);try{const e=await fetch(`${p}/api/sales-analytics/`,{credentials:"include"});if(e.ok){const t=await e.json();Je(t)}}catch(e){}finally{Qe(!1)}}(),(null==n?void 0:n.username)&&async function(e){const t=e||(null==C?void 0:C.username);if(t){it(!0);try{const e=await R(t);ot(e.results)}catch(o){ot([])}finally{it(!1)}}}(n.username)}).catch(()=>{}),()=>e.abort()},[]),n.useEffect(()=>{fetch(`${p}/api/content/?mine=1`,{credentials:"include"}).then(e=>e.ok?e.json():[]).then(e=>{let t=[];e&&Array.isArray(e.results)?t=e.results:Array.isArray(e)&&(t=e),Re(t.filter(e=>"book"!==e.content_type||e.is_collaborative))}).catch(()=>Re([])),fetch(`${p}/api/book-projects/my-published/`,{credentials:"include"}).then(e=>e.ok?e.json():[]).then(e=>{Array.isArray(e)?Ie(e):Ie([])}).catch(()=>Ie([]))},[y]);const ft=e=>{t(`/reader/${e}`)};return e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"40px 24px"},children:[e.jsx("input",{ref:te,onChange:async e=>{const t=e.target.files&&e.target.files[0];if(!t)return;const o=H||await at(),n=new FormData;n.append("avatar",t);const i=await fetch(`${p}/api/users/profile/`,{method:"PATCH",headers:{"X-CSRFToken":o,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:n});if(i.ok){m("Avatar updated"),await async function(){const e=await fetch(`${p}/api/auth/status/`,{credentials:"include"}).then(e=>e.json());a(e)}();const e=await fetch(`${p}/api/users/profile/`,{credentials:"include"});e.ok&&W(await e.json())}else m(`Failed: ${await i.text()}`);e.target.value=""},type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"}}),e.jsx("input",{ref:oe,onChange:async e=>{const t=e.target.files&&e.target.files[0];if(!t)return;const o=H||await at(),n=new FormData;n.append("banner",t);const i=await fetch(`${p}/api/users/profile/`,{method:"PATCH",headers:{"X-CSRFToken":o,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:n});if(i.ok){m("Banner updated");const e=await fetch(`${p}/api/users/profile/`,{credentials:"include"});e.ok&&W(await e.json())}else m(`Failed: ${await i.text()}`);e.target.value=""},type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"}}),e.jsxs("div",{onClick:()=>{var e;null==(e=oe.current)||e.click()},style:{background:(null==C?void 0:C.banner)||(null==C?void 0:C.banner_url)?`linear-gradient(rgba(15,23,42,0.7), rgba(15,23,42,0.9)), url(${(null==C?void 0:C.banner)||(null==C?void 0:C.banner_url)}) center/cover`:"#0f172a",border:"1px solid #1e293b",borderRadius:16,padding:32,marginBottom:24,position:"relative",cursor:"pointer"},title:"Click to update banner",children:[e.jsx("div",{style:{position:"absolute",top:24,right:24,display:"flex",gap:8},children:e.jsxs(r,{to:`/profile/${(null==C?void 0:C.username)||(null==o?void 0:o.username)}`,onClick:e=>e.stopPropagation(),style:{background:"rgba(245,158,11,0.15)",border:"1px solid rgba(245,158,11,0.3)",color:"#f59e0b",height:40,padding:"0 14px",borderRadius:8,display:"flex",alignItems:"center",gap:6,cursor:"pointer",textDecoration:"none",fontSize:13,fontWeight:600,transition:"all 0.2s"},children:[e.jsx(I,{size:18}),"View Public Profile"]})}),e.jsxs("div",{style:{display:"flex",gap:24,alignItems:"flex-start",marginBottom:16},children:[e.jsx("div",{onClick:e=>{var t;e.stopPropagation(),null==(t=te.current)||t.click()},style:{width:100,height:100,borderRadius:"50%",overflow:"hidden",cursor:"pointer",border:"3px solid #1e293b",flexShrink:0,transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",background:"#1e293b"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#f59e0b"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#1e293b"},title:"Click to upload avatar",children:(null==C?void 0:C.avatar)||(null==C?void 0:C.avatar_url)?e.jsx("img",{src:(null==C?void 0:C.avatar)||(null==C?void 0:C.avatar_url),alt:(null==C?void 0:C.display_name)||(null==o?void 0:o.username)||"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{color:"#f59e0b",fontWeight:700,fontSize:40},children:((null==o?void 0:o.username)||"?").slice(0,1).toUpperCase()})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:32,fontWeight:700,color:"#f8fafc",marginBottom:8},children:(null==C?void 0:C.display_name)||(null==o?void 0:o.username)||"User"}),(null==C?void 0:C.location)&&e.jsxs("div",{style:{fontSize:15,color:"#94a3b8",marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx(A,{size:16})," ",C.location]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,fontSize:14,color:"#cbd5e1"},children:[(null==C?void 0:C.status)&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{color:"#10b981",fontSize:12},children:"●"}),C.status]}),e.jsx("span",{style:{color:"#475569"},children:"•"})]}),e.jsxs("span",{style:{color:"#94a3b8"},children:["@",(null==C?void 0:C.username)||(null==o?void 0:o.username)||""]})]})]})]})]}),e.jsxs("div",{style:{background:(null==C?void 0:C.wallet_address)?"#0f172a":"#1e293b",border:(null==C?void 0:C.wallet_address)?"1px solid #10b981":"1px solid #334155",borderRadius:12,padding:"16px 20px",marginBottom:24,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{color:(null==C?void 0:C.wallet_address)?"#10b981":"#94a3b8"},children:(null==C?void 0:C.wallet_address)?e.jsx(d,{size:24}):e.jsx(U,{size:24})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#f8fafc",marginBottom:(null==C?void 0:C.wallet_address)?4:0},children:(null==C?void 0:C.wallet_address)?"Wallet Connected":"Wallet Setup Required"}),(null==C?void 0:C.wallet_address)&&e.jsx("div",{style:{fontSize:13,color:"#94a3b8",fontFamily:"monospace"},children:(bt=C.wallet_address,!bt||bt.length<12?bt:`${bt.slice(0,4)}...${bt.slice(-4)}`)})]})]}),e.jsx("button",{onClick:()=>ie(!0),style:{background:(null==C?void 0:C.wallet_address)?"transparent":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:(null==C?void 0:C.wallet_address)?"1px solid #334155":"none",color:"#fff",padding:"8px 16px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{(null==C?void 0:C.wallet_address)?(e.currentTarget.style.background="#1e293b",e.currentTarget.style.borderColor="#475569"):e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{(null==C?void 0:C.wallet_address)?(e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="#334155"):e.currentTarget.style.transform="translateY(0)"},children:(null==C?void 0:C.wallet_address)?"Manage":"Connect Wallet"})]}),e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsx("h3",{style:{fontSize:18,fontWeight:700,color:"#f8fafc",margin:0},children:"About"}),re?e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:()=>{le(!1)},disabled:fe,style:{background:"transparent",border:"1px solid #334155",color:"#94a3b8",padding:"6px 12px",borderRadius:6,fontSize:13,fontWeight:500,cursor:fe?"not-allowed":"pointer",opacity:fe?.5:1},children:"Cancel"}),e.jsx("button",{onClick:async()=>{be(!0);try{const e=await fetch(`${p}/api/users/profile/`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRFToken":H,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({bio:se,display_name:de,location:pe,status:ge})});if(e.ok){const t=await e.json();W(t),le(!1),m("Profile updated")}else m("Failed to save profile")}catch(e){m("Failed to save profile")}finally{be(!1)}},disabled:fe,style:{background:fe?"#6b7280":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"6px 16px",borderRadius:6,fontSize:13,fontWeight:600,cursor:fe?"not-allowed":"pointer"},children:fe?"Saving...":"Save"})]}):e.jsxs("button",{onClick:()=>{ae((null==C?void 0:C.bio)||""),ce((null==C?void 0:C.display_name)||""),ue((null==C?void 0:C.location)||""),xe((null==C?void 0:C.status)||"Available"),le(!0)},style:{background:"transparent",border:"1px solid #334155",color:"#94a3b8",padding:"6px 12px",borderRadius:6,fontSize:13,fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:6,transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#f59e0b",e.currentTarget.style.color="#f59e0b"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#334155",e.currentTarget.style.color="#94a3b8"},children:[e.jsx($,{size:14}),"Edit"]})]}),re?e.jsxs("div",{style:{display:"grid",gap:20},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#cbd5e1",marginBottom:8},children:"Display Name"}),e.jsx("input",{type:"text",value:de,onChange:e=>ce(e.target.value),placeholder:"Your display name",style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:"10px 14px",color:"#f8fafc",fontSize:14}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#cbd5e1",marginBottom:8},children:"Location"}),e.jsx("input",{type:"text",value:pe,onChange:e=>ue(e.target.value),placeholder:"e.g., New York, NY",style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:"10px 14px",color:"#f8fafc",fontSize:14}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#cbd5e1",marginBottom:8},children:"Availability Status"}),e.jsx("select",{value:ge,onChange:e=>xe(e.target.value),style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:"10px 14px",color:"#f8fafc",fontSize:14},children:[{value:"Available",label:"Available",description:"Ready to start new collaborations"},{value:"Open to Offers",label:"Open to Offers",description:"Will consider interesting projects"},{value:"Selective",label:"Selective",description:"Only taking specific types of work"},{value:"Booked",label:"Booked",description:"Currently busy, booking future work"},{value:"Unavailable",label:"Unavailable",description:"Not accepting collaborations"},{value:"On Hiatus",label:"On Hiatus",description:"Taking a break"}].map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#cbd5e1",marginBottom:8},children:"Bio"}),e.jsx("textarea",{value:se,onChange:e=>ae(e.target.value),placeholder:"Tell the world about yourself, your work, and what you're looking for...",rows:4,style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:"10px 14px",color:"#f8fafc",fontSize:14,resize:"vertical",minHeight:100,lineHeight:1.6}}),e.jsx("div",{style:{fontSize:12,color:"#64748b",marginTop:6},children:"Describe your experience, interests, and what kind of collaborations you're seeking."})]})]}):e.jsx("div",{children:(null==C?void 0:C.bio)?e.jsx("p",{style:{color:"#cbd5e1",fontSize:15,lineHeight:1.7,margin:0,whiteSpace:"pre-wrap"},children:C.bio}):e.jsx("p",{style:{color:"#64748b",fontSize:14,fontStyle:"italic",margin:0},children:"No bio yet. Click Edit to add a bio and tell others about yourself."})})]}),Le.length>0&&e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #f59e0b40",borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:20},children:[e.jsx("span",{style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",padding:"6px 14px",borderRadius:8,fontSize:14,fontWeight:700,color:"#000"},children:Le.length}),e.jsx("span",{style:{fontSize:18,fontWeight:700,color:"#f8fafc"},children:"Collaboration Invites"})]}),e.jsx("div",{style:{display:"grid",gap:16},children:Le.map(({project:t,invite:o})=>{const n=qe.has(t.id);return e.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:12,padding:20,opacity:n?.7:1,transition:"all 0.2s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:16},children:[e.jsx("div",{style:{width:56,height:56,borderRadius:12,background:"#f59e0b20",display:"flex",alignItems:"center",justifyContent:"center",color:"#f59e0b",flexShrink:0},children:xt(t.content_type,28)}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:17,fontWeight:700,color:"#f8fafc",marginBottom:6},children:t.title}),e.jsxs("div",{style:{fontSize:14,color:"#94a3b8",marginBottom:10},children:[e.jsxs("span",{style:{color:"#cbd5e1"},children:["@",t.created_by_username]})," invited you as"," ",e.jsx("span",{style:{color:"#f59e0b",fontWeight:600},children:o.role})]}),e.jsxs("div",{style:{display:"flex",gap:20,fontSize:13},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#64748b"},children:"Revenue Split:"})," ",e.jsxs("span",{style:{color:"#10b981",fontWeight:700},children:[o.revenue_percentage,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#64748b"},children:"Team:"})," ",e.jsxs("span",{style:{color:"#e2e8f0"},children:[t.total_collaborators," people"]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:16,paddingTop:16,borderTop:"1px solid #334155"},children:[e.jsxs("button",{onClick:e=>ut(t.id,e),disabled:n,style:{flex:1,background:"#10b981",color:"#fff",border:"none",padding:"12px 20px",borderRadius:10,fontSize:14,fontWeight:700,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx(F,{size:18}),n?"Processing...":"Accept Invite"]}),e.jsxs("button",{onClick:e=>gt(t.id,e),disabled:n,style:{background:"transparent",color:"#ef4444",border:"1px solid #ef4444",padding:"12px 20px",borderRadius:10,fontSize:14,fontWeight:600,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx(v,{size:18}),"Decline"]}),e.jsx("button",{onClick:()=>Ne(t.id),disabled:n,style:{background:"transparent",color:"#94a3b8",border:"1px solid #334155",padding:"12px 20px",borderRadius:10,fontSize:14,fontWeight:600,cursor:n?"not-allowed":"pointer"},children:"View Details"})]})]},t.id)})})]}),e.jsxs("div",{style:{display:"flex",gap:4,borderBottom:"1px solid #1e293b",marginBottom:16},children:[e.jsx(K,{icon:e.jsx(E,{size:18}),label:"My Content",count:We.length+Be.length,active:"content"===Se,onClick:()=>we("content")}),e.jsx(K,{icon:e.jsx(u,{size:18}),label:"Collaborations",count:Le.length+Ye.length,active:"collaborations"===Se,onClick:()=>we("collaborations")}),e.jsx(K,{icon:e.jsx(M,{size:18}),label:"External Portfolio",active:"portfolio"===Se,onClick:()=>we("portfolio")}),e.jsx(K,{icon:e.jsx(Y,{size:18}),label:"Analytics",active:"analytics"===Se,onClick:()=>we("analytics")}),e.jsx(K,{icon:e.jsx(S,{size:18}),label:"Following",count:tt.length,active:"following"===Se,onClick:()=>we("following")})]}),"content"===Se&&(We.length>0||Be.length>0)&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,gap:16},children:[e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx(J,{label:"All",count:We.length+Be.length,active:"all"===ze,onClick:()=>Ce("all")}),e.jsx(J,{label:"Books",count:Be.length,active:"book"===ze,onClick:()=>Ce("book")}),e.jsx(J,{label:"Art",count:We.filter(e=>"art"===e.content_type).length,active:"art"===ze,onClick:()=>Ce("art")}),e.jsx(J,{label:"Music",count:We.filter(e=>"music"===e.content_type).length,active:"music"===ze,onClick:()=>Ce("music")}),e.jsx(J,{label:"Film",count:We.filter(e=>"film"===e.content_type||"video"===e.content_type).length,active:"film"===ze,onClick:()=>Ce("film")}),e.jsx("div",{style:{width:1,height:24,background:"#334155",margin:"0 8px"}}),e.jsx(J,{label:"Published",count:We.filter(e=>"minted"===e.inventory_status).length+Be.filter(e=>e.published_chapters>0).length,active:"published"===Te,onClick:()=>_e("published"===Te?"all":"published")}),e.jsx(J,{label:"Drafts",count:We.filter(e=>"draft"===e.inventory_status).length+Be.filter(e=>0===e.published_chapters).length,active:"draft"===Te,onClick:()=>_e("draft"===Te?"all":"draft")})]}),e.jsxs("button",{onClick:()=>t("/studio"),style:{display:"flex",alignItems:"center",gap:8,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#000",border:"none",padding:"10px 18px",borderRadius:10,fontSize:14,fontWeight:700,cursor:"pointer",transition:"all 0.2s",flexShrink:0},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(245,158,11,0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[e.jsx(P,{size:18}),"Create"]})]}),"content"===Se&&e.jsx("div",{children:0===We.length&&0===Be.length?e.jsx(Z,{icon:e.jsx(L,{size:64}),title:"No content yet",description:"Create your first piece of content to get started",actionLabel:"+ Create Content",onAction:()=>t("/studio")}):(()=>{let o="all"===ze?We:"book"===ze?[]:"film"===ze?We.filter(e=>"film"===e.content_type||"video"===e.content_type):We.filter(e=>e.content_type===ze);"published"===Te?o=o.filter(e=>"minted"===e.inventory_status):"draft"===Te&&(o=o.filter(e=>"draft"===e.inventory_status));let n="all"===ze||"book"===ze?Be:[];"published"===Te?n=n.filter(e=>e.published_chapters>0):"draft"===Te&&(n=n.filter(e=>0===e.published_chapters));const i=o.length>0||n.length>0,r="all"!==Te?`${Te} ${ze}`:ze;return i?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:24},children:[n.map(o=>e.jsx(G,{book:o,expanded:Ae.has(o.id),onToggleExpand:()=>{Me(e=>{const t=new Set(e);return t.has(o.id)?t.delete(o.id):t.add(o.id),t})},onViewChapter:e=>ft(e),onEditBook:()=>t(`/studio?editBookProject=${o.id}`)},`book-${o.id}`)),o.map(o=>e.jsx(Q,{item:o,onView:()=>ft(o.id),onEdit:()=>t(`/studio?editContent=${o.id}`)},o.id))]}):e.jsxs("div",{style:{textAlign:"center",padding:"60px 24px",color:"#64748b"},children:[e.jsx(L,{size:48,style:{marginBottom:16,opacity:.5}}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:"#94a3b8"},children:["No ",r," content yet"]})]})})()}),"collaborations"===Se&&e.jsxs("div",{children:[Xe&&e.jsx("div",{style:{textAlign:"center",padding:40,color:"#94a3b8"},children:"Loading collaborations..."}),!Xe&&(Le.length>0||Ye.length>0)&&e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("h3",{style:{fontSize:16,fontWeight:700,color:"#e2e8f0",marginBottom:16},children:["Active Collaborations (",Le.length+Ye.length,")"]}),e.jsxs("div",{style:{display:"grid",gap:12},children:[Le.map(({project:t,invite:o})=>{const n=qe.has(t.id);return e.jsx("div",{style:{background:"#1e293b",border:"1px solid #f59e0b40",borderRadius:12,padding:16,cursor:"pointer",opacity:n?.7:1,transition:"all 0.2s"},onClick:()=>!n&&Ne(t.id),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:8,background:"#f59e0b20",display:"flex",alignItems:"center",justifyContent:"center",color:"#f59e0b",flexShrink:0},children:xt(t.content_type,20)}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,color:"#f8fafc",marginBottom:2},children:t.title}),e.jsxs("div",{style:{fontSize:13,color:"#94a3b8"},children:[t.total_collaborators," collaborator",1!==t.total_collaborators?"s":""," · ",o.revenue_percentage,"% revenue"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("button",{onClick:e=>ut(t.id,e),disabled:n,style:{background:"#10b981",color:"#fff",border:"none",padding:"8px 12px",borderRadius:6,fontWeight:600,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:4,fontSize:13,transition:"all 0.2s"},title:"Accept invitation",children:[e.jsx(F,{size:16}),n?"...":"Accept"]}),e.jsxs("button",{onClick:e=>gt(t.id,e),disabled:n,style:{background:"transparent",color:"#ef4444",border:"1px solid #ef4444",padding:"8px 12px",borderRadius:6,fontWeight:600,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:4,fontSize:13,transition:"all 0.2s"},title:"Decline invitation",children:[e.jsx(v,{size:16}),"Deny"]}),e.jsx("div",{style:{background:"#f59e0b20",color:"#f59e0b",padding:"4px 12px",borderRadius:12,fontSize:12,fontWeight:600,marginLeft:4},children:"Invite"})]})]})},`invite-${t.id}`)}),Ye.map(o=>e.jsx("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:12,padding:16,cursor:"pointer",transition:"all 0.2s"},onClick:()=>t(`/collaborations/${o.id}`),children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:8,background:"active"===o.status?"#10b98120":"#64748b20",display:"flex",alignItems:"center",justifyContent:"center",color:"active"===o.status?"#10b981":"#94a3b8",flexShrink:0},children:xt(o.content_type,20)}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,color:"#f8fafc",marginBottom:2},children:o.title}),e.jsxs("div",{style:{fontSize:13,color:"#94a3b8"},children:[o.total_collaborators," collaborator",1!==o.total_collaborators?"s":""," · ",o.status]})]}),e.jsx("div",{style:{background:"active"===o.status?"#10b98120":"#64748b20",color:"active"===o.status?"#10b981":"#94a3b8",padding:"4px 12px",borderRadius:12,fontSize:12,fontWeight:600,textTransform:"capitalize"},children:"active"===o.status?"Active":o.status})]})},`collab-${o.id}`))]})]}),!Xe&&0===Le.length&&0===Ye.length&&e.jsx(Z,{icon:e.jsx(u,{size:64}),title:"No collaborations yet",description:"Find collaborators to work on projects together",actionLabel:"Find Collaborators",onAction:()=>t("/collaborators")}),!Xe&&(Le.length>0||Ye.length>0)&&e.jsx("div",{style:{textAlign:"center",marginTop:24},children:e.jsx("button",{onClick:()=>t("/collaborators"),style:{background:"transparent",border:"1px solid #334155",color:"#94a3b8",padding:"10px 24px",borderRadius:8,cursor:"pointer",fontWeight:600},children:"Find More Collaborators"})})]}),"portfolio"===Se&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{color:"#f8fafc",fontSize:18,fontWeight:700,margin:0},children:"External Portfolio"}),e.jsx("p",{style:{color:"#94a3b8",fontSize:14,margin:"4px 0 0"},children:"Showcase your past work and external projects on your public profile"})]}),e.jsxs("button",{onClick:()=>{ke(null),je(!0)},style:{display:"flex",alignItems:"center",gap:6,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#000",border:"none",padding:"10px 18px",borderRadius:8,fontWeight:600,fontSize:14,cursor:"pointer"},children:[e.jsx(P,{size:18}),"Add Project"]})]}),0===he.length?e.jsx(Z,{icon:e.jsx(M,{size:64}),title:"No portfolio items yet",description:"Add your past work, side projects, or external collaborations to showcase on your public profile",actionLabel:"+ Add Your First Project",onAction:()=>{ke(null),je(!0)}}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:20},children:he.map(t=>{var o;return e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:16,overflow:"hidden",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)",e.currentTarget.style.borderColor="#334155"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none",e.currentTarget.style.borderColor="#1e293b"},children:[e.jsxs("div",{style:{width:"100%",paddingTop:"56.25%",background:t.image_url?`url(${t.image_url}) center/cover`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"relative"},children:[!t.image_url&&e.jsx("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center",color:"rgba(255,255,255,0.3)",fontSize:48,fontWeight:700},children:(null==(o=t.project_type)?void 0:o.charAt(0).toUpperCase())||"P"}),e.jsx("div",{style:{position:"absolute",top:12,left:12,background:"#f59e0b",color:"#000",padding:"4px 10px",borderRadius:6,fontSize:11,fontWeight:700,textTransform:"uppercase"},children:t.project_type||"Project"})]}),e.jsxs("div",{style:{padding:16},children:[e.jsx("div",{style:{fontSize:16,fontWeight:600,color:"#f8fafc",marginBottom:4},children:t.title}),t.role&&e.jsx("div",{style:{fontSize:13,color:"#f59e0b",marginBottom:8},children:t.role}),t.description&&e.jsx("div",{style:{fontSize:13,color:"#94a3b8",marginBottom:12,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.description}),e.jsxs("div",{style:{display:"flex",gap:8},children:[t.external_url&&e.jsxs("a",{href:t.external_url,target:"_blank",rel:"noopener noreferrer",style:{flex:1,background:"rgba(59,130,246,0.15)",border:"1px solid rgba(59,130,246,0.3)",color:"#60a5fa",padding:"8px 16px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer",textDecoration:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[e.jsx(z,{size:14}),"View"]}),e.jsx("button",{onClick:()=>{ke(t),je(!0)},style:{background:"transparent",border:"1px solid #334155",color:"#cbd5e1",padding:"8px 12px",borderRadius:8,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx($,{size:14})}),e.jsx("button",{onClick:()=>async function(e){const t=H||await at();try{(await fetch(`${p}/api/portfolio/${e}/`,{method:"DELETE",headers:{"X-CSRFToken":t,"X-Requested-With":"XMLHttpRequest"},credentials:"include"})).ok&&(ye(t=>t.filter(t=>t.id!==e)),m("Portfolio item deleted"))}catch(o){m("Failed to delete item")}}(t.id),style:{background:"transparent",border:"1px solid rgba(239,68,68,0.3)",color:"#ef4444",padding:"8px 12px",borderRadius:8,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(l,{size:14})})]})]})]},t.id)})})]}),"analytics"===Se&&e.jsxs("div",{children:[e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("h3",{style:{fontSize:18,fontWeight:700,color:"#f8fafc",marginBottom:20,display:"flex",alignItems:"center",gap:10},children:[e.jsx(c,{size:20,style:{color:"#10b981"}}),"Sales Overview"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:16},children:[e.jsxs("div",{style:{background:"#1e293b",borderRadius:12,padding:20},children:[e.jsx("div",{style:{fontSize:12,color:"#94a3b8",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Earnings"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#10b981"},children:["$",(null==Ke?void 0:Ke.summary.total_earnings_usdc.toFixed(2))||j.sales.toFixed(2)]}),e.jsx("div",{style:{fontSize:11,color:"#64748b",marginTop:4},children:"USDC"})]}),e.jsxs("div",{style:{background:"#1e293b",borderRadius:12,padding:20},children:[e.jsx("div",{style:{fontSize:12,color:"#94a3b8",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Solo Content"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#60a5fa"},children:["$",(null==Ke?void 0:Ke.summary.solo_earnings.toFixed(2))||"0.00"]}),e.jsxs("div",{style:{fontSize:11,color:"#64748b",marginTop:4},children:[(null==Ke?void 0:Ke.summary.content_count)||0," items"]})]}),e.jsxs("div",{style:{background:"#1e293b",borderRadius:12,padding:20},children:[e.jsx("div",{style:{fontSize:12,color:"#94a3b8",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Collaborations"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#f59e0b"},children:["$",(null==Ke?void 0:Ke.summary.collaboration_earnings.toFixed(2))||"0.00"]}),e.jsxs("div",{style:{fontSize:11,color:"#64748b",marginTop:4},children:[(null==Ke?void 0:Ke.summary.collaboration_count)||0," projects"]})]}),e.jsxs("div",{style:{background:"#1e293b",borderRadius:12,padding:20},children:[e.jsx("div",{style:{fontSize:12,color:"#94a3b8",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Sales"}),e.jsx("div",{style:{fontSize:28,fontWeight:700,color:"#f8fafc"},children:(null==Ke?void 0:Ke.summary.total_sales)||0}),e.jsx("div",{style:{fontSize:11,color:"#64748b",marginTop:4},children:"transactions"})]})]})]}),Ke&&(Ke.content_sales.length>0||Ke.collaboration_sales.length>0)&&e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("h3",{style:{fontSize:16,fontWeight:700,color:"#f8fafc",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(X,{size:18,style:{color:"#60a5fa"}}),"Earnings Breakdown"]}),e.jsx("p",{style:{fontSize:12,color:"#64748b",marginBottom:16},children:"Click any item to see individual transactions"}),Ke.content_sales.length>0&&e.jsxs("div",{style:{marginBottom:20},children:[e.jsxs("div",{style:{fontSize:13,color:"#60a5fa",marginBottom:12,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[e.jsx(E,{size:14}),"Solo Content (",Ke.content_sales.length,")"]}),Ke.content_sales.map(t=>{const o=Ze.has(t.id);return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{onClick:()=>st(t.id),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"#1e293b",borderRadius:o?"8px 8px 0 0":8,cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="#334155",onMouseLeave:e=>e.currentTarget.style.background="#1e293b",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[xt(t.content_type,18),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#f8fafc"},children:t.title}),e.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:[t.sales_count," sale",1!==t.sales_count?"s":""," • ",t.role," • $",t.price.toFixed(2)," price"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#10b981"},children:["$",t.total_earnings.toFixed(2)]}),e.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:[t.percentage,"% split"]})]}),o?e.jsx(T,{size:18,color:"#64748b"}):e.jsx(_,{size:18,color:"#64748b"})]})]}),o&&t.transactions&&t.transactions.length>0&&e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #334155",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"12px 16px"},children:[e.jsx("div",{style:{fontSize:11,color:"#94a3b8",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Transaction History"}),t.transactions.map((o,n)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:n<t.transactions.length-1?"1px solid #1e293b":"none"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"#f8fafc"},children:["Purchased by ",e.jsxs("span",{style:{color:"#60a5fa"},children:["@",o.buyer]})]}),e.jsxs("div",{style:{fontSize:11,color:"#64748b",display:"flex",alignItems:"center",gap:4},children:[e.jsx(g,{size:10}),new Date(o.date).toLocaleDateString()," ",new Date(o.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),o.tx_signature&&e.jsxs("div",{style:{fontSize:10,color:"#475569",fontFamily:"monospace"},children:["TX: ",o.tx_signature]})]}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#10b981"},children:["+$",o.amount.toFixed(2)]})]},o.id||n))]})]},t.id)})]}),Ke.collaboration_sales.length>0&&e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"#f59e0b",marginBottom:12,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[e.jsx(u,{size:14}),"Collaborations (",Ke.collaboration_sales.length,")"]}),Ke.collaboration_sales.map(t=>{const o=Ze.has(t.id);return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{onClick:()=>st(t.id),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"#1e293b",borderRadius:o?"8px 8px 0 0":8,borderLeft:"3px solid #f59e0b",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="#334155",onMouseLeave:e=>e.currentTarget.style.background="#1e293b",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[xt(t.content_type,18),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#f8fafc"},children:t.title}),e.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:[t.role," • ",t.percentage,"% split • ",t.sales_count," sale",1!==t.sales_count?"s":""]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#f59e0b"},children:["$",t.total_earnings.toFixed(2)]}),e.jsx("div",{style:{fontSize:11,color:"#64748b"},children:"your share"})]}),o?e.jsx(T,{size:18,color:"#64748b"}):e.jsx(_,{size:18,color:"#64748b"})]})]}),o&&t.transactions&&t.transactions.length>0&&e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #334155",borderTop:"none",borderRadius:"0 0 8px 8px",padding:"12px 16px"},children:[e.jsx("div",{style:{fontSize:11,color:"#94a3b8",marginBottom:8,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Transaction History"}),t.transactions.map((o,n)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:n<t.transactions.length-1?"1px solid #1e293b":"none"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"#f8fafc"},children:["Purchased by ",e.jsxs("span",{style:{color:"#60a5fa"},children:["@",o.buyer]})]}),e.jsxs("div",{style:{fontSize:11,color:"#64748b",display:"flex",alignItems:"center",gap:4},children:[e.jsx(g,{size:10}),new Date(o.date).toLocaleDateString()," ",new Date(o.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),o.tx_signature&&e.jsxs("div",{style:{fontSize:10,color:"#475569",fontFamily:"monospace"},children:["TX: ",o.tx_signature]})]}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#f59e0b"},children:["+$",o.amount.toFixed(2)]})]},o.id||n))]})]},t.id)})]})]}),Ke&&Ke.recent_transactions.length>0&&e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:16,padding:24},children:[e.jsxs("h3",{style:{fontSize:16,fontWeight:700,color:"#f8fafc",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx(L,{size:18,style:{color:"#a78bfa"}}),"Recent Transactions"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:Ke.recent_transactions.map(t=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"#1e293b",borderRadius:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#f8fafc"},children:t.title}),e.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Bought by @",t.buyer," • ",t.role," (",t.percentage,"%) • ",new Date(t.date).toLocaleDateString()]}),t.tx_signature&&e.jsxs("div",{style:{fontSize:11,color:"#475569",fontFamily:"monospace"},children:["TX: ",t.tx_signature]})]}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"collaboration"===t.type?"#f59e0b":"#10b981"},children:["+$",t.amount.toFixed(2)]})]},t.id))})]}),(!Ke||0===Ke.summary.total_sales)&&!Ge&&e.jsxs("div",{style:{textAlign:"center",padding:"40px 24px",background:"#0f172a",border:"1px solid #1e293b",borderRadius:16},children:[e.jsx(Y,{size:48,style:{color:"#475569",marginBottom:16}}),e.jsx("div",{style:{fontSize:16,fontWeight:600,color:"#94a3b8",marginBottom:8},children:"No sales yet"}),e.jsx("div",{style:{fontSize:14,color:"#64748b"},children:"Once you start making sales, you'll see detailed breakdowns here"})]}),Ge&&e.jsx("div",{style:{textAlign:"center",padding:"40px 24px",background:"#0f172a",border:"1px solid #1e293b",borderRadius:16},children:e.jsx("div",{style:{fontSize:14,color:"#94a3b8"},children:"Loading analytics..."})})]}),"following"===Se&&e.jsx("div",{children:nt?e.jsxs("div",{style:{textAlign:"center",padding:"40px 24px",background:"#0f172a",border:"1px solid #1e293b",borderRadius:16},children:[e.jsx(w,{size:32,style:{color:"#f59e0b",animation:"spin 1s linear infinite"}}),e.jsx("div",{style:{fontSize:14,color:"#94a3b8",marginTop:12},children:"Loading following..."})]}):0===tt.length?e.jsxs("div",{style:{textAlign:"center",padding:"40px 24px",background:"#0f172a",border:"1px solid #1e293b",borderRadius:16},children:[e.jsx(S,{size:48,style:{color:"#475569",marginBottom:16}}),e.jsx("div",{style:{fontSize:16,fontWeight:600,color:"#94a3b8",marginBottom:8},children:"Not following anyone yet"}),e.jsx("div",{style:{fontSize:14,color:"#64748b"},children:"Explore creators and follow them to see their latest work in your feed"}),e.jsx(r,{to:"/collaborators",style:{display:"inline-block",marginTop:16,padding:"10px 20px",background:"#f59e0b",color:"#111",borderRadius:8,fontWeight:600,textDecoration:"none"},children:"Discover Creators"})]}):e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:16,overflow:"hidden"},children:[e.jsx("div",{style:{padding:"16px 20px",borderBottom:"1px solid #1e293b",display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("h3",{style:{fontSize:16,fontWeight:700,color:"#f8fafc",margin:0},children:["Following (",tt.length,")"]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:tt.map((t,o)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:o<tt.length-1?"1px solid #1e293b":"none",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="#1e293b",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[e.jsxs(r,{to:`/profile/${t.username}`,style:{display:"flex",alignItems:"center",gap:12,textDecoration:"none",flex:1},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:"50%",background:t.avatar?`url(${t.avatar}) center/cover`:"#374151",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,fontWeight:700,color:"#f59e0b",flexShrink:0},children:!t.avatar&&(t.username||"?").slice(0,1).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:15,fontWeight:600,color:"#f8fafc"},children:t.display_name||t.username}),e.jsxs("div",{style:{fontSize:13,color:"#64748b"},children:["@",t.username]}),t.bio&&e.jsx("div",{style:{fontSize:12,color:"#94a3b8",marginTop:4,maxWidth:400},children:t.bio.length>80?t.bio.slice(0,80)+"...":t.bio})]})]}),e.jsxs("button",{onClick:()=>async function(e,t){lt(e=>new Set(e).add(t));try{await B(e),ot(e=>e.filter(e=>e.id!==t)),m(`Unfollowed @${e}`)}catch(o){m("Failed to unfollow")}finally{lt(e=>{const o=new Set(e);return o.delete(t),o})}}(t.username,t.id),disabled:rt.has(t.id),style:{display:"flex",alignItems:"center",gap:6,padding:"8px 16px",background:"transparent",border:"1px solid #334155",borderRadius:8,color:"#94a3b8",fontSize:13,fontWeight:600,cursor:rt.has(t.id)?"not-allowed":"pointer",opacity:rt.has(t.id)?.5:1,transition:"all 0.2s"},onMouseEnter:e=>{rt.has(t.id)||(e.currentTarget.style.borderColor="#ef4444",e.currentTarget.style.color="#ef4444")},onMouseLeave:e=>{e.currentTarget.style.borderColor="#334155",e.currentTarget.style.color="#94a3b8"},children:[rt.has(t.id)?e.jsx(w,{size:14,style:{animation:"spin 1s linear infinite"}}):e.jsx(S,{size:14}),rt.has(t.id)?"Unfollowing...":"Following"]})]},t.id))})]})}),ne&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",backdropFilter:"blur(4px)",display:"grid",placeItems:"center",zIndex:2e3},onClick:()=>ie(!1),children:e.jsx("div",{onClick:e=>e.stopPropagation(),style:{width:"90%",maxWidth:600},children:e.jsx(q,{walletAddress:(null==C?void 0:C.wallet_address)||null,walletProvider:(null==C?void 0:C.wallet_provider)||null,onWalletUpdate:async()=>{ie(!1);const e=await fetch(`${p}/api/users/profile/`,{credentials:"include"});e.ok&&W(await e.json())}})})}),$e&&Pe&&e.jsx(s,{open:$e,onClose:()=>Fe(!1),teaserUrl:Pe.teaser_link,contentType:Pe.content_type,contentId:Pe.id,price:Pe.price_usd,editions:Pe.editions}),Oe&&e.jsx(x,{open:!0,onClose:()=>{Ne(null),dt()},projectId:Oe}),me&&e.jsx(ee,{item:ve,onClose:()=>{je(!1),ke(null)},onSave:async function(e){const t=H||await at(),o=!!ve,n=o?`${p}/api/portfolio/${ve.id}/`:`${p}/api/portfolio/`;try{(await fetch(n,{method:o?"PATCH":"POST",headers:{"X-CSRFToken":t,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})).ok&&(await pt(),je(!1),ke(null),m(o?"Portfolio item updated":"Portfolio item added"))}catch(i){m("Failed to save item")}}}),y&&e.jsx("div",{style:{position:"fixed",bottom:24,right:24,background:"#10b981",color:"#fff",padding:"12px 20px",borderRadius:8,fontSize:14,fontWeight:600,boxShadow:"0 4px 16px rgba(0,0,0,0.3)",zIndex:1e3},children:y})]});var bt}function K({icon:t,label:o,count:n,active:i,onClick:r}){return e.jsxs("button",{onClick:r,style:{background:"transparent",border:"none",borderBottom:i?"2px solid #f59e0b":"2px solid transparent",color:i?"#f59e0b":"#94a3b8",padding:"12px 20px",fontSize:15,fontWeight:600,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:8},onMouseEnter:e=>{i||(e.currentTarget.style.color="#cbd5e1")},onMouseLeave:e=>{i||(e.currentTarget.style.color="#94a3b8")},children:[t,e.jsx("span",{children:o}),void 0!==n&&n>0&&e.jsx("span",{style:{background:i?"#f59e0b":"#334155",color:i?"#000":"#94a3b8",padding:"2px 8px",borderRadius:10,fontSize:12,fontWeight:700,marginLeft:4},children:n})]})}function J({label:t,count:o,active:n,onClick:i}){return 0!==o||n||"All"===t?e.jsxs("button",{onClick:i,style:{background:n?"#f59e0b":"#1e293b",border:n?"none":"1px solid #334155",color:n?"#000":"#94a3b8",padding:"6px 14px",borderRadius:20,fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:6},onMouseEnter:e=>{n||(e.currentTarget.style.borderColor="#475569",e.currentTarget.style.color="#e2e8f0")},onMouseLeave:e=>{n||(e.currentTarget.style.borderColor="#334155",e.currentTarget.style.color="#94a3b8")},children:[t,e.jsx("span",{style:{background:n?"rgba(0,0,0,0.2)":"#334155",padding:"1px 6px",borderRadius:8,fontSize:11},children:o})]}):null}function G({book:t,expanded:o,onToggleExpand:n,onViewChapter:i,onEditBook:r}){const l=t.published_chapters>0,s=t.chapters.find(e=>e.is_published&&e.content_id);return e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:16,overflow:"hidden",transition:"all 0.2s",position:"relative"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)",e.currentTarget.style.borderColor="#334155"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none",e.currentTarget.style.borderColor="#1e293b"},children:[e.jsxs("div",{onClick:n,style:{width:"100%",paddingTop:"56.25%",background:t.cover_image_url?`url(${t.cover_image_url})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center",position:"relative",cursor:"pointer",opacity:l?1:.7},children:[!t.cover_image_url&&e.jsx("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center",color:"rgba(255,255,255,0.3)"},children:e.jsx(E,{size:48})}),e.jsx("div",{style:{position:"absolute",top:12,right:12,background:l?"rgba(0,0,0,0.75)":"rgba(100, 116, 139, 0.9)",color:"#f8fafc",padding:"4px 10px",borderRadius:l?12:6,fontSize:l?12:11,fontWeight:600,backdropFilter:"blur(4px)",textTransform:l?"none":"uppercase",letterSpacing:l?"normal":"0.5px"},children:l?`${t.published_chapters} chapter${1!==t.published_chapters?"s":""}`:"Draft"})]}),e.jsxs("div",{style:{padding:16},children:[e.jsx("div",{style:{fontSize:16,fontWeight:600,color:"#f8fafc",marginBottom:8,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.4},children:t.title}),e.jsx("div",{style:{fontSize:13,color:"#94a3b8",marginBottom:12},children:l?`book • ${t.published_chapters} of ${t.total_chapters} chapter${1!==t.total_chapters?"s":""} published`:`book • ${t.total_chapters} chapter${1!==t.total_chapters?"s":""} (unpublished)`}),l&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,fontSize:13,color:"#cbd5e1",marginBottom:12},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(I,{size:14})," ",t.total_views]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(c,{size:14})," $",t.total_price.toFixed(2)]})]}),t.total_chapters>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:n,style:{width:"100%",background:"#1e293b",border:"none",borderRadius:8,padding:"8px 12px",color:"#94a3b8",fontSize:13,fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:o?8:12},children:[e.jsx("span",{children:"Chapters"}),o?e.jsx(T,{size:16}):e.jsx(_,{size:16})]}),o&&e.jsx("div",{style:{background:"#0d1117",borderRadius:8,padding:8,marginBottom:12,maxHeight:200,overflowY:"auto"},children:t.chapters.map((t,o)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 10px",borderRadius:6,background:o%2==0?"transparent":"rgba(255,255,255,0.02)",opacity:t.is_published?1:.6},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{fontSize:13,color:"#e2e8f0",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",gap:6},children:["Ch ",t.order+1,": ",t.title,!t.is_published&&e.jsx("span",{style:{fontSize:9,background:"rgba(100, 116, 139, 0.5)",color:"#cbd5e1",padding:"2px 5px",borderRadius:3,textTransform:"uppercase",letterSpacing:"0.3px"},children:"Draft"})]}),t.is_published&&e.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:["$",t.price_usd.toFixed(2)," • ",t.view_count," views"]})]}),t.is_published&&t.content_id&&e.jsx("button",{onClick:e=>{e.stopPropagation(),i(t.content_id)},style:{background:"transparent",border:"1px solid #334155",borderRadius:6,padding:"4px 10px",color:"#94a3b8",fontSize:11,fontWeight:500,cursor:"pointer",marginLeft:8,flexShrink:0},children:"View"})]},t.id))})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:r,style:{flex:1,background:"transparent",border:"1px solid #334155",borderRadius:10,padding:"10px 16px",color:"#94a3b8",fontSize:14,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:"Edit"}),l&&s&&e.jsx("button",{onClick:()=>i(s.content_id),style:{flex:1,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",borderRadius:10,padding:"10px 16px",color:"#000",fontSize:14,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:"View"})]})]})]})}function Q({item:t,onView:o,onEdit:n}){const i="minted"===t.inventory_status;return e.jsxs("div",{style:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:16,overflow:"hidden",cursor:"pointer",transition:"all 0.2s",position:"relative"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)",e.currentTarget.style.borderColor="#334155"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none",e.currentTarget.style.borderColor="#1e293b"},children:[!i&&e.jsx("div",{style:{position:"absolute",top:12,right:12,background:"rgba(100, 116, 139, 0.9)",color:"#f8fafc",padding:"4px 10px",borderRadius:6,fontSize:11,fontWeight:600,zIndex:1,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Draft"}),e.jsx("div",{onClick:i?o:n,style:{width:"100%",paddingTop:"56.25%",background:t.teaser_link?`url(${t.teaser_link})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center",position:"relative",opacity:i?1:.7},children:!t.teaser_link&&e.jsx("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center",color:"rgba(255,255,255,0.3)"},children:"book"===t.content_type?e.jsx(E,{size:48}):"art"===t.content_type?e.jsx(D,{size:48}):"film"===t.content_type?e.jsx(N,{size:48}):e.jsx(O,{size:48})})}),e.jsxs("div",{style:{padding:16},children:[e.jsx("div",{style:{fontSize:16,fontWeight:600,color:"#f8fafc",marginBottom:8,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:1.4},children:t.title}),e.jsxs("div",{style:{fontSize:13,color:"#94a3b8",marginBottom:12},children:[t.content_type," ",t.genre&&`• ${t.genre}`]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,fontSize:13,color:"#cbd5e1",marginBottom:16},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(I,{size:14})," ",t.view_count||0]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(c,{size:14})," $",t.price_usd||0]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:n,style:{flex:1,background:"transparent",border:"1px solid #334155",color:"#cbd5e1",padding:"8px 16px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="#1e293b",e.currentTarget.style.borderColor="#475569"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="#334155"},children:"Edit"}),i&&e.jsx("button",{onClick:o,style:{flex:1,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"8px 16px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:"View"})]})]})]})}function Z({icon:t,title:o,description:n,actionLabel:i,onAction:r}){return e.jsxs("div",{style:{textAlign:"center",padding:"80px 24px"},children:[e.jsx("div",{style:{color:"#475569",marginBottom:24},children:t}),e.jsx("div",{style:{fontSize:24,fontWeight:600,color:"#f8fafc",marginBottom:12},children:o}),e.jsx("div",{style:{fontSize:15,color:"#94a3b8",marginBottom:32,maxWidth:400,margin:"0 auto 32px"},children:n}),i&&e.jsx("button",{onClick:r,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"12px 24px",borderRadius:8,fontSize:15,fontWeight:600,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 16px rgba(245, 158, 11, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:i})]})}function ee({item:t,onClose:o,onSave:i}){const[r,l]=n.useState((null==t?void 0:t.title)||""),[s,a]=n.useState((null==t?void 0:t.description)||""),[d,c]=n.useState((null==t?void 0:t.external_url)||""),[p,u]=n.useState((null==t?void 0:t.project_type)||"book"),[g,x]=n.useState((null==t?void 0:t.role)||""),[f,h]=n.useState((null==t?void 0:t.created_date)||"");return e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.75)",backdropFilter:"blur(4px)",display:"grid",placeItems:"center",zIndex:2e3},onClick:o,children:e.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:16,padding:32,width:"90%",maxWidth:500,maxHeight:"90vh",overflow:"auto"},children:[e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:"#f8fafc",marginBottom:24,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:t?"Edit Portfolio Item":"Add Portfolio Item"}),e.jsx("button",{onClick:o,style:{background:"transparent",border:"none",color:"#94a3b8",cursor:"pointer",padding:4,display:"grid",placeItems:"center"},children:e.jsx(b,{size:24})})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),i({title:r,description:s,external_url:d,project_type:p,role:g,created_date:f||null})},children:[e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#cbd5e1",marginBottom:8},children:"Title *"}),e.jsx("input",{type:"text",value:r,onChange:e=>l(e.target.value),required:!0,placeholder:"Project title",style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:"10px 14px",color:"#f8fafc",fontSize:14}})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#cbd5e1",marginBottom:8},children:"Project Type"}),e.jsxs("select",{value:p,onChange:e=>u(e.target.value),style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:"10px 14px",color:"#f8fafc",fontSize:14},children:[e.jsx("option",{value:"book",children:"Book"}),e.jsx("option",{value:"art",children:"Art"}),e.jsx("option",{value:"music",children:"Music"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"film",children:"Film"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#cbd5e1",marginBottom:8},children:"Your Role"}),e.jsx("input",{type:"text",value:g,onChange:e=>x(e.target.value),placeholder:"e.g., Author, Illustrator, Producer",style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:"10px 14px",color:"#f8fafc",fontSize:14}})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#cbd5e1",marginBottom:8},children:"Description"}),e.jsx("textarea",{value:s,onChange:e=>a(e.target.value),rows:3,placeholder:"Brief description of the project",style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:"10px 14px",color:"#f8fafc",fontSize:14,resize:"vertical"}})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#cbd5e1",marginBottom:8},children:"External URL"}),e.jsx("input",{type:"url",value:d,onChange:e=>c(e.target.value),placeholder:"https://...",style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:"10px 14px",color:"#f8fafc",fontSize:14}})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#cbd5e1",marginBottom:8},children:"Date (optional)"}),e.jsx("input",{type:"date",value:f,onChange:e=>h(e.target.value),style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:"10px 14px",color:"#f8fafc",fontSize:14}})]}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsx("button",{type:"button",onClick:o,style:{flex:1,background:"transparent",border:"1px solid #334155",color:"#cbd5e1",padding:"12px",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer"},children:"Cancel"}),e.jsx("button",{type:"submit",style:{flex:1,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"#fff",padding:"12px",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer"},children:t?"Save Changes":"Add Project"})]})]})]})})}export{V as default};
//# sourceMappingURL=ProfilePageRedesigned-CrFQodF0.js.map
