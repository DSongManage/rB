{"version":3,"mappings":"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","names":["ChartColumn","createLucideIcon","d","key","Link","TrendingUp","WalletManagementPanel","walletAddress","walletProvider","onWalletUpdate","showManageMenu","setShowManageMenu","useState","activeAction","setActiveAction","loading","setLoading","error","setError","success","setSuccess","getCsrfToken","async","res","fetch","API_URL","credentials","data","json","csrfToken","createWeb3AuthWallet","Web3Auth","__vitePreload","import","then","n","b","__VITE_PRELOAD__","CHAIN_NAMESPACES","i","SolanaPrivateKeyProvider","c","clientId","chainConfig","chainNamespace","SOLANA","chainId","rpcTarget","web3auth","privateKeyProvider","config","web3AuthNetwork","uiConfig","appName","mode","loginMethodsOrder","defaultLanguage","initModal","status","logout","e","connect","userInfo","getUserInfo","idToken","id_token","Error","csrf","method","headers","body","JSON","stringify","web3auth_token","ok","catch","errorMsg","message","String","connectExternalWallet","provider","window","solana","publicKey","toString","Math","random","substring","Date","now","encodedMessage","TextEncoder","encode","signedMessage","signMessage","signature","Buffer","from","wallet_address","code","_a","includes","jsxs","style","background","border","borderRadius","padding","marginBottom","children","fontWeight","color","fontSize","display","alignItems","gap","jsx","Wallet","size","flexWrap","onClick","disabled","cursor","transition","onMouseOver","currentTarget","transform","onMouseOut","Loader","Globe","borderColor","Info","providerLabel","providerIcon","position","justifyContent","flex","CheckCircle","fontFamily","addr","length","slice","navigator","clipboard","writeText","setTimeout","Copy","marginRight","href","getExplorerLink","target","rel","textDecoration","ExternalLink","Settings","ChevronUp","ChevronDown","top","right","marginTop","minWidth","zIndex","boxShadow","width","textAlign","Fragment","height","margin","AlertTriangle","DollarSign","inset","backdropFilter","placeItems","maxWidth","lineHeight","AlertCircle","paddingLeft","text","ArtManageModal","isOpen","onClose","item","onUnpublished","navigate","useNavigate","showConfirm","setShowConfirm","unpublishing","setUnpublishing","requestingUnpublish","setRequestingUnpublish","left","bottom","maxHeight","overflow","stopPropagation","borderBottom","paddingTop","teaser_link","backgroundSize","backgroundPosition","title","textTransform","content_type","is_collaborative","collaborators","Users","flexDirection","map","collab","username","role","revenue_percentage","id","onMouseEnter","onMouseLeave","Eye","flexShrink","source_project_id","csrfResponse","csrfData","response","proposal_type","description","voting_threshold","proposal_data","content_id","content_title","err","opacity","BridgeOnboardingBanner","className","setStatus","dismissed","setDismissed","useEffect","getBridgeOnboardingStatus","fetchStatus","is_fully_setup","payout_destination","has_bridge_customer","content","kyc_status","actionText","icon","variant","has_bank_account","has_liquidation_address","Building2","Icon","primary","warning","to","ArrowRight","ProfilePageRedesigned","user","setUser","setContent","dash","setDash","content_count","sales","profile","setProfile","setCsrf","avatarInputRef","useRef","bannerInputRef","showWalletModal","setShowWalletModal","editingAbout","setEditingAbout","editBio","setEditBio","editDisplayName","setEditDisplayName","editLocation","setEditLocation","editStatus","setEditStatus","editRoles","setEditRoles","editGenres","setEditGenres","savingAbout","setSavingAbout","externalPortfolio","setExternalPortfolio","portfolioModalOpen","setPortfolioModalOpen","editingPortfolioItem","setEditingPortfolioItem","activeTab","setActiveTab","contentFilter","setContentFilter","statusFilter","setStatusFilter","inventory","setInventory","bookProjects","setBookProjects","expandedBooks","setExpandedBooks","Set","showPreview","setShowPreview","previewItem","setPreviewItem","showManageModal","setShowManageModal","manageItem","setManageItem","pendingInvites","setPendingInvites","selectedInviteProjectId","setSelectedInviteProjectId","collaborations","setCollaborations","collaborationsLoading","setCollaborationsLoading","processingInvites","setProcessingInvites","salesAnalytics","setSalesAnalytics","analyticsLoading","setAnalyticsLoading","expandedAnalyticsCards","setExpandedAnalyticsCards","followingList","setFollowingList","followingLoading","setFollowingLoading","unfollowingUsers","setUnfollowingUsers","toggleAnalyticsCard","cardId","prev","newSet","has","delete","add","refreshCsrf","r","j","token","loadPendingInvites","invites","collaborationApi","getPendingInvites","loadCollaborations","projects","getCollaborativeProjects","loadExternalPortfolio","handleAcceptInvite","projectId","acceptInvitation","Promise","all","handleDeclineInvite","declineInvitation","getContentTypeIcon","contentType","BookOpen","Music","Film","Palette","abortController","AbortController","signal","userResp","contentResp","csrfResp","profileResp","dashResp","Array","isArray","results","loadSalesAnalytics","usernameOverride","getFollowing","loadFollowingList","abort","items","filter","openReader","contentId","ref","onChange","file","files","fd","FormData","append","refreshStatus","value","type","accept","current","click","banner","banner_url","avatar","avatar_url","src","alt","display_name","objectFit","toUpperCase","location","MapPin","bio","roles","genres","updatedProfile","Edit2","placeholder","label","opt","isSelected","genre","g","rows","resize","minHeight","whiteSpace","fontStyle","project","invite","isProcessing","created_by_username","total_collaborators","borderTop","Check","XCircle","Tab","count","active","Briefcase","BarChart3","UserCheck","FilterChip","inventory_status","published_chapters","Plus","EmptyState","FileText","actionLabel","onAction","filteredInventory","filteredBooks","hasContent","filterLabel","gridTemplateColumns","book","BookProjectCard","expanded","onToggleExpand","onViewChapter","onEditBook","ContentCard","onView","onEdit","onManage","marginLeft","image_url","project_type","charAt","textOverflow","WebkitLineClamp","WebkitBoxOrient","external_url","deletePortfolioItem","Trash2","letterSpacing","summary","total_earnings_usdc","toFixed","solo_earnings","collaboration_earnings","collaboration_count","total_sales","content_sales","collaboration_sales","isExpanded","sales_count","price","total_earnings","percentage","transactions","tx","idx","buyer","Clock","date","toLocaleDateString","toLocaleTimeString","hour","minute","tx_signature","amount","borderLeft","recent_transactions","Loader2","animation","index","userId","unfollowUser","u","handleUnfollow","wallet_provider","PreviewModal","open","teaserUrl","price_usd","editions","InviteResponseModal","PortfolioItemModal","onSave","isEdit","url","hasPublishedChapters","firstPublishedChapter","chapters","find","ch","is_published","cover_image_url","total_chapters","total_views","total_price","overflowY","chapter","order","view_count","isPublished","isPublishedNonBook","setTitle","setDescription","externalUrl","setExternalUrl","projectType","setProjectType","setRole","createdDate","setCreatedDate","created_date","X","onSubmit","preventDefault","required"],"ignoreList":[0,1,2],"sources":["../../node_modules/lucide-react/dist/esm/icons/chart-column.js","../../node_modules/lucide-react/dist/esm/icons/link.js","../../node_modules/lucide-react/dist/esm/icons/trending-up.js","../../src/components/WalletManagementPanel.tsx","../../src/components/ArtManageModal.tsx","../../src/components/bridge/BridgeOnboardingBanner.tsx","../../src/pages/ProfilePageRedesigned.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 3v16a2 2 0 0 0 2 2h16\", key: \"c24i48\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n];\nconst ChartColumn = createLucideIcon(\"chart-column\", __iconNode);\n\nexport { __iconNode, ChartColumn as default };\n//# sourceMappingURL=chart-column.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\", key: \"1cjeqo\" }],\n  [\"path\", { d: \"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\", key: \"19qd67\" }]\n];\nconst Link = createLucideIcon(\"link\", __iconNode);\n\nexport { __iconNode, Link as default };\n//# sourceMappingURL=link.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 7h6v6\", key: \"box55l\" }],\n  [\"path\", { d: \"m22 7-8.5 8.5-5-5L2 17\", key: \"1t1m79\" }]\n];\nconst TrendingUp = createLucideIcon(\"trending-up\", __iconNode);\n\nexport { __iconNode, TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n","import React, { useState } from 'react';\nimport { API_URL } from '../config';\nimport {\n  Wallet, Globe, Link, Loader, Info, CheckCircle, Copy, ExternalLink,\n  Settings, AlertTriangle, AlertCircle, DollarSign, ChevronDown, ChevronUp\n} from 'lucide-react';\n\ninterface WalletManagementPanelProps {\n  walletAddress: string | null;\n  walletProvider: 'web3auth' | 'external' | null;\n  onWalletUpdate: () => void;\n}\n\ntype WalletAction = 'create_web3auth' | 'connect_external' | 'switch' | 'disconnect' | null;\n\nexport function WalletManagementPanel({\n  walletAddress,\n  walletProvider,\n  onWalletUpdate\n}: WalletManagementPanelProps) {\n  const [showManageMenu, setShowManageMenu] = useState(false);\n  const [activeAction, setActiveAction] = useState<WalletAction>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Helper: Shorten wallet address for display\n  const shortenAddress = (addr: string) => {\n    if (!addr || addr.length < 12) return addr;\n    return `${addr.slice(0, 4)}...${addr.slice(-4)}`;\n  };\n\n  // Helper: Get Solscan explorer link\n  const getExplorerLink = (addr: string) => {\n    // Use devnet for development, mainnet for production\n    const network = import.meta.env.VITE_SOLANA_NETWORK === 'mainnet-beta' ? '' : '?cluster=devnet';\n    return `https://solscan.io/account/${addr}${network}`;\n  };\n\n  // Helper: Copy to clipboard\n  const copyAddress = async () => {\n    if (!walletAddress) return;\n    try {\n      await navigator.clipboard.writeText(walletAddress);\n      setSuccess('Address copied!');\n      setTimeout(() => setSuccess(''), 2000);\n    } catch (e) {\n      setError('Failed to copy');\n    }\n  };\n\n  // Helper: Get CSRF token\n  const getCsrfToken = async () => {\n    const res = await fetch(`${API_URL}/api/auth/csrf/`, { credentials: 'include' });\n    const data = await res.json();\n    return data?.csrfToken || '';\n  };\n\n  // Action: Create Web3Auth wallet\n  const createWeb3AuthWallet = async () => {\n    setError('');\n    setLoading(true);\n\n    try {\n      const { Web3Auth } = await import('@web3auth/modal');\n      const { CHAIN_NAMESPACES } = await import('@web3auth/base');\n      const { SolanaPrivateKeyProvider } = await import('@web3auth/solana-provider');\n\n      const clientId = import.meta.env.VITE_WEB3AUTH_CLIENT_ID || '';\n      if (!clientId) {\n        throw new Error('Web3Auth client ID not configured');\n      }\n\n      const chainConfig = {\n        chainNamespace: CHAIN_NAMESPACES.SOLANA,\n        chainId: \"0x3\", // Solana devnet\n        rpcTarget: \"https://api.devnet.solana.com\",\n      };\n\n      const privateKeyProvider = new SolanaPrivateKeyProvider({\n        config: { chainConfig },\n      });\n\n      const web3auth = new Web3Auth({\n        clientId,\n        chainConfig,\n        privateKeyProvider,\n        web3AuthNetwork: 'sapphire_devnet',\n        uiConfig: {\n          appName: \"RenaissBlock\",\n          mode: \"dark\",\n          loginMethodsOrder: [\"google\", \"discord\"],\n          defaultLanguage: \"en\",\n        },\n      });\n\n      // Initialize the modal\n      await web3auth.initModal();\n\n      // CRITICAL: Clear any cached session to force fresh login\n      // This ensures each user gets a NEW wallet, not reusing a previous one\n      try {\n        if (web3auth.status === 'connected') {\n          console.log('Clearing previous Web3Auth session...');\n          await web3auth.logout();\n        }\n      } catch (e) {\n        console.log('No previous session to clear');\n      }\n\n      // Connect will open the modal for user to select login method\n      const provider = await web3auth.connect();\n\n      const userInfo: any = await web3auth.getUserInfo();\n      const idToken = userInfo?.idToken || userInfo?.id_token;\n\n      if (!idToken) {\n        throw new Error('Could not obtain Web3Auth token');\n      }\n\n      // Link wallet to account\n      const csrf = await getCsrfToken();\n      const res = await fetch(`${API_URL}/api/wallet/link/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrf,\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ web3auth_token: idToken }),\n      });\n\n      if (!res.ok) {\n        const data = await res.json().catch(() => ({}));\n        const errorMsg = data.error || data.message || 'Failed to link wallet';\n\n        // Show more helpful error messages\n        console.error('Wallet link error:', data);\n        throw new Error(errorMsg);\n      }\n\n      setSuccess('Wallet created and linked!');\n      setActiveAction(null);\n      onWalletUpdate();\n    } catch (e: any) {\n      setError(e?.message || String(e));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Action: Connect external wallet with signature verification\n  const connectExternalWallet = async () => {\n    setError('');\n    setLoading(true);\n\n    try {\n      // Check for Solana wallet provider (Phantom, Backpack, Solflare, etc.)\n      const provider = (window as any).solana;\n\n      if (!provider) {\n        throw new Error('No Solana wallet found. Please install Phantom, Backpack, or Solflare.');\n      }\n\n      // Connect to wallet\n      const resp = await provider.connect();\n      const publicKey = resp.publicKey.toString();\n\n      // Generate nonce for signature\n      const nonce = Math.random().toString(36).substring(2, 15);\n      const message = `Connect wallet to RenaissBlock\\n\\nNonce: ${nonce}\\nTimestamp: ${Date.now()}`;\n\n      // Request signature\n      const encodedMessage = new TextEncoder().encode(message);\n      const signedMessage = await provider.signMessage(encodedMessage, 'utf8');\n      const signature = Buffer.from(signedMessage.signature).toString('base64');\n\n      // Link wallet with signature verification\n      const csrf = await getCsrfToken();\n      const res = await fetch(`${API_URL}/api/wallet/link/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrf,\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          wallet_address: publicKey,\n          signature: signature,\n          message: message,\n        }),\n      });\n\n      if (!res.ok) {\n        const data = await res.json().catch(() => ({}));\n        const errorMsg = data.error || data.message || 'Failed to link wallet';\n\n        // Show more helpful error messages\n        console.error('Wallet link error:', data);\n        throw new Error(errorMsg);\n      }\n\n      setSuccess('External wallet connected!');\n      setActiveAction(null);\n      onWalletUpdate();\n    } catch (e: any) {\n      // Handle user rejection gracefully\n      if (e?.code === 4001 || e?.message?.includes('User rejected')) {\n        setError('Connection cancelled');\n      } else {\n        setError(e?.message || String(e));\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Action: Disconnect wallet\n  const disconnectWallet = async () => {\n    setError('');\n    setLoading(true);\n\n    try {\n      const csrf = await getCsrfToken();\n      const res = await fetch(`${API_URL}/api/wallet/link/`, {\n        method: 'DELETE',\n        headers: {\n          'X-CSRFToken': csrf,\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        credentials: 'include',\n      });\n\n      if (!res.ok) {\n        const text = await res.text();\n        throw new Error(text || 'Failed to disconnect wallet');\n      }\n\n      setSuccess('Wallet disconnected');\n      setActiveAction(null);\n      setShowManageMenu(false);\n      onWalletUpdate();\n    } catch (e: any) {\n      setError(e?.message || String(e));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Render: No wallet connected\n  if (!walletAddress) {\n    return (\n      <div style={{\n        background: 'var(--panel)',\n        border: '1px solid var(--panel-border)',\n        borderRadius: 12,\n        padding: 16,\n        marginBottom: 16,\n      }}>\n        <div style={{ fontWeight: 600, color: '#f1f5f9', fontSize: 16, marginBottom: 12, display: 'flex', alignItems: 'center', gap: 8 }}>\n          <Wallet size={20} /> Wallet Setup\n        </div>\n        <div style={{ fontSize: 13, color: '#94a3b8', marginBottom: 16 }}>\n          Connect a wallet to receive USDC payments and own NFTs.\n        </div>\n\n        {error && (\n          <div style={{\n            background: '#ef444420',\n            border: '1px solid #ef4444',\n            borderRadius: 8,\n            padding: 12,\n            color: '#fca5a5',\n            fontSize: 13,\n            marginBottom: 12,\n          }}>\n            {error}\n          </div>\n        )}\n\n        {success && (\n          <div style={{\n            background: '#10b98120',\n            border: '1px solid #10b981',\n            borderRadius: 8,\n            padding: 12,\n            color: '#6ee7b7',\n            fontSize: 13,\n            marginBottom: 12,\n          }}>\n            {success}\n          </div>\n        )}\n\n        <div style={{ display: 'flex', gap: 12, flexWrap: 'wrap', marginBottom: 16 }}>\n          <button\n            onClick={createWeb3AuthWallet}\n            disabled={loading}\n            style={{\n              background: loading ? '#6b7280' : 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n              border: 'none',\n              color: '#fff',\n              padding: '10px 20px',\n              borderRadius: 8,\n              fontWeight: 600,\n              cursor: loading ? 'not-allowed' : 'pointer',\n              fontSize: 14,\n              transition: 'all 0.2s',\n            }}\n            onMouseOver={(e) => {\n              if (!loading) e.currentTarget.style.transform = 'translateY(-2px)';\n            }}\n            onMouseOut={(e) => {\n              e.currentTarget.style.transform = 'translateY(0)';\n            }}\n          >\n            {loading ? (\n              <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                <Loader size={16} /> Creating...\n              </span>\n            ) : (\n              <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                <Globe size={16} /> Create Wallet with Web3Auth\n              </span>\n            )}\n          </button>\n\n          <button\n            onClick={connectExternalWallet}\n            disabled={loading}\n            style={{\n              background: 'transparent',\n              border: '1px solid #334155',\n              color: '#cbd5e1',\n              padding: '10px 20px',\n              borderRadius: 8,\n              fontWeight: 600,\n              cursor: loading ? 'not-allowed' : 'pointer',\n              fontSize: 14,\n              transition: 'all 0.2s',\n            }}\n            onMouseOver={(e) => {\n              if (!loading) {\n                e.currentTarget.style.borderColor = '#cbd5e1';\n                e.currentTarget.style.background = 'rgba(203, 213, 225, 0.05)';\n              }\n            }}\n            onMouseOut={(e) => {\n              e.currentTarget.style.borderColor = '#334155';\n              e.currentTarget.style.background = 'transparent';\n            }}\n          >\n            {loading ? (\n              <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                <Loader size={16} /> Connecting...\n              </span>\n            ) : (\n              <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                <Link size={16} /> Connect External Wallet\n              </span>\n            )}\n          </button>\n        </div>\n\n        <div style={{\n          fontSize: 12,\n          color: '#94a3b8',\n          padding: 12,\n          background: '#0b1220',\n          borderRadius: 8,\n          border: '1px solid #1f2937',\n        }}>\n          <div style={{ marginBottom: 6, fontWeight: 600, color: '#cbd5e1', display: 'flex', alignItems: 'center', gap: 6 }}>\n            <Info size={14} /> Web3Auth (Recommended)\n          </div>\n          <div>\n            Easiest option - create a wallet with Google/Discord. No browser extension needed.\n            Your wallet is non-custodial and secured by social login.\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Render: Wallet connected\n  const providerLabel = walletProvider === 'web3auth' ? 'Web3Auth' : 'External Wallet';\n  const providerIcon = walletProvider === 'web3auth' ? <Globe size={12} /> : <Link size={12} />;\n\n  return (\n    <div style={{\n      background: 'var(--panel)',\n      border: '1px solid #10b981',\n      borderRadius: 12,\n      padding: 16,\n      marginBottom: 16,\n      position: 'relative',\n    }}>\n      <div style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'flex-start',\n        marginBottom: 12,\n      }}>\n        <div style={{ flex: 1 }}>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 8,\n            marginBottom: 8,\n          }}>\n            <CheckCircle size={20} style={{ color: '#10b981' }} />\n            <span style={{ fontWeight: 600, color: '#f1f5f9', fontSize: 16 }}>\n              Wallet Connected\n            </span>\n            <span style={{\n              fontSize: 11,\n              color: '#6ee7b7',\n              background: '#10b98120',\n              padding: '2px 8px',\n              borderRadius: 12,\n              fontWeight: 600,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 4,\n            }}>\n              {providerIcon} {providerLabel}\n            </span>\n          </div>\n\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 8,\n            flexWrap: 'wrap',\n          }}>\n            <div style={{\n              fontSize: 14,\n              color: '#e5e7eb',\n              fontFamily: 'monospace',\n              background: '#0b1220',\n              padding: '6px 12px',\n              borderRadius: 6,\n              border: '1px solid #1f2937',\n            }}>\n              {shortenAddress(walletAddress)}\n            </div>\n\n            <button\n              onClick={copyAddress}\n              style={{\n                background: '#1f2937',\n                border: '1px solid #374151',\n                color: '#cbd5e1',\n                padding: '6px 12px',\n                borderRadius: 6,\n                fontSize: 12,\n                fontWeight: 600,\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.background = '#374151';\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.background = '#1f2937';\n              }}\n            >\n              <Copy size={14} style={{ marginRight: 4 }} /> Copy\n            </button>\n\n            <a\n              href={getExplorerLink(walletAddress)}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              style={{\n                background: '#1f2937',\n                border: '1px solid #374151',\n                color: '#cbd5e1',\n                padding: '6px 12px',\n                borderRadius: 6,\n                fontSize: 12,\n                fontWeight: 600,\n                textDecoration: 'none',\n                display: 'inline-block',\n                transition: 'all 0.2s',\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.background = '#374151';\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.background = '#1f2937';\n              }}\n            >\n              <ExternalLink size={14} style={{ marginRight: 4 }} /> Explorer\n            </a>\n\n            <div style={{ position: 'relative' }}>\n              <button\n                onClick={() => setShowManageMenu(!showManageMenu)}\n                style={{\n                  background: '#1f2937',\n                  border: '1px solid #374151',\n                  color: '#cbd5e1',\n                  padding: '6px 12px',\n                  borderRadius: 6,\n                  fontSize: 12,\n                  fontWeight: 600,\n                  cursor: 'pointer',\n                  transition: 'all 0.2s',\n                }}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.background = '#374151';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.background = '#1f2937';\n                }}\n              >\n                <span style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\n                  <Settings size={14} /> Manage {showManageMenu ? <ChevronUp size={14} /> : <ChevronDown size={14} />}\n                </span>\n              </button>\n\n              {showManageMenu && (\n                <div style={{\n                  position: 'absolute',\n                  top: '100%',\n                  right: 0,\n                  marginTop: 8,\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  padding: 8,\n                  minWidth: 220,\n                  zIndex: 100,\n                  boxShadow: '0 10px 25px rgba(0,0,0,0.5)',\n                }}>\n                  <button\n                    onClick={() => setActiveAction('switch')}\n                    style={{\n                      width: '100%',\n                      background: 'transparent',\n                      border: 'none',\n                      color: '#cbd5e1',\n                      padding: '8px 12px',\n                      borderRadius: 6,\n                      fontSize: 13,\n                      fontWeight: 500,\n                      cursor: 'pointer',\n                      textAlign: 'left',\n                      transition: 'all 0.2s',\n                    }}\n                    onMouseOver={(e) => {\n                      e.currentTarget.style.background = '#334155';\n                    }}\n                    onMouseOut={(e) => {\n                      e.currentTarget.style.background = 'transparent';\n                    }}\n                  >\n                    <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                      {walletProvider === 'web3auth' ? (\n                        <>\n                          <Link size={14} /> Switch to External Wallet\n                        </>\n                      ) : (\n                        <>\n                          <Globe size={14} /> Switch to Web3Auth\n                        </>\n                      )}\n                    </span>\n                  </button>\n\n                  <div style={{\n                    height: 1,\n                    background: '#334155',\n                    margin: '8px 0',\n                  }} />\n\n                  <button\n                    onClick={() => setActiveAction('disconnect')}\n                    style={{\n                      width: '100%',\n                      background: 'transparent',\n                      border: 'none',\n                      color: '#fca5a5',\n                      padding: '8px 12px',\n                      borderRadius: 6,\n                      fontSize: 13,\n                      fontWeight: 500,\n                      cursor: 'pointer',\n                      textAlign: 'left',\n                      transition: 'all 0.2s',\n                    }}\n                    onMouseOver={(e) => {\n                      e.currentTarget.style.background = '#ef444420';\n                    }}\n                    onMouseOut={(e) => {\n                      e.currentTarget.style.background = 'transparent';\n                    }}\n                  >\n                    <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                      <AlertTriangle size={14} /> Disconnect Wallet\n                    </span>\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {success && (\n        <div style={{\n          background: '#10b98120',\n          border: '1px solid #10b981',\n          borderRadius: 8,\n          padding: 12,\n          color: '#6ee7b7',\n          fontSize: 13,\n          marginTop: 12,\n        }}>\n          {success}\n        </div>\n      )}\n\n      {error && (\n        <div style={{\n          background: '#ef444420',\n          border: '1px solid #ef4444',\n          borderRadius: 8,\n          padding: 12,\n          color: '#fca5a5',\n          fontSize: 13,\n          marginTop: 12,\n        }}>\n          {error}\n        </div>\n      )}\n\n      <div style={{\n        fontSize: 12,\n        color: '#10b981',\n        marginTop: 8,\n        fontWeight: 600,\n        display: 'flex',\n        alignItems: 'center',\n        gap: 6,\n      }}>\n        <DollarSign size={14} /> Ready to receive USDC payments and own NFTs\n      </div>\n\n      {/* Switch Wallet Warning Modal */}\n      {activeAction === 'switch' && (\n        <div style={{\n          position: 'fixed',\n          inset: 0,\n          background: 'rgba(0,0,0,0.75)',\n          backdropFilter: 'blur(4px)',\n          display: 'grid',\n          placeItems: 'center',\n          zIndex: 2000,\n        }}>\n          <div style={{\n            background: '#1e293b',\n            border: '1px solid #334155',\n            borderRadius: 12,\n            padding: 24,\n            maxWidth: 500,\n            width: '90%',\n          }}>\n            <div style={{\n              fontSize: 18,\n              fontWeight: 700,\n              color: '#f59e0b',\n              marginBottom: 16,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8,\n            }}>\n              <AlertTriangle size={20} /> Switch Wallet?\n            </div>\n\n            <div style={{\n              fontSize: 14,\n              color: '#cbd5e1',\n              marginBottom: 16,\n              lineHeight: 1.6,\n            }}>\n              <p style={{ marginBottom: 12 }}>\n                Your existing NFTs will remain in your old wallet. You'll need to manually\n                transfer them if you want them in the new wallet.\n              </p>\n              <p style={{ marginBottom: 12 }}>\n                New purchases and payments will go to the new wallet address.\n              </p>\n              <div style={{\n                background: '#0b1220',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: 12,\n                fontSize: 12,\n                fontFamily: 'monospace',\n                marginTop: 12,\n              }}>\n                <div style={{ color: '#94a3b8', marginBottom: 4 }}>Current wallet:</div>\n                <div style={{ color: '#e5e7eb' }}>{walletAddress}</div>\n              </div>\n            </div>\n\n            {error && (\n              <div style={{\n                background: '#ef444420',\n                border: '1px solid #ef4444',\n                borderRadius: 8,\n                padding: 12,\n                color: '#fca5a5',\n                fontSize: 13,\n                marginBottom: 16,\n              }}>\n                {error}\n              </div>\n            )}\n\n            <div style={{ display: 'flex', gap: 12 }}>\n              <button\n                onClick={() => {\n                  setActiveAction(null);\n                  setError('');\n                }}\n                disabled={loading}\n                style={{\n                  flex: 1,\n                  background: 'transparent',\n                  border: '1px solid #475569',\n                  color: '#cbd5e1',\n                  padding: '10px 20px',\n                  borderRadius: 8,\n                  fontWeight: 600,\n                  cursor: loading ? 'not-allowed' : 'pointer',\n                  fontSize: 14,\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={() => {\n                  setActiveAction(null);\n                  setShowManageMenu(false);\n                  // Trigger the appropriate wallet connection flow\n                  if (walletProvider === 'web3auth') {\n                    connectExternalWallet();\n                  } else {\n                    createWeb3AuthWallet();\n                  }\n                }}\n                disabled={loading}\n                style={{\n                  flex: 1,\n                  background: loading ? '#6b7280' : 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                  border: 'none',\n                  color: '#fff',\n                  padding: '10px 20px',\n                  borderRadius: 8,\n                  fontWeight: 600,\n                  cursor: loading ? 'not-allowed' : 'pointer',\n                  fontSize: 14,\n                }}\n              >\n                {loading ? 'Processing...' : 'Continue'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Disconnect Wallet Warning Modal */}\n      {activeAction === 'disconnect' && (\n        <div style={{\n          position: 'fixed',\n          inset: 0,\n          background: 'rgba(0,0,0,0.75)',\n          backdropFilter: 'blur(4px)',\n          display: 'grid',\n          placeItems: 'center',\n          zIndex: 2000,\n        }}>\n          <div style={{\n            background: '#1e293b',\n            border: '2px solid #ef4444',\n            borderRadius: 12,\n            padding: 24,\n            maxWidth: 500,\n            width: '90%',\n          }}>\n            <div style={{\n              fontSize: 18,\n              fontWeight: 700,\n              color: '#ef4444',\n              marginBottom: 16,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8,\n            }}>\n              <AlertCircle size={20} /> Disconnect Wallet?\n            </div>\n\n            <div style={{\n              fontSize: 14,\n              color: '#cbd5e1',\n              marginBottom: 16,\n              lineHeight: 1.6,\n            }}>\n              <p style={{ marginBottom: 12, fontWeight: 600, color: '#fca5a5' }}>\n                Warning: Without a wallet you CANNOT:\n              </p>\n              <ul style={{ paddingLeft: 20, marginBottom: 12 }}>\n                <li>Receive USDC payments from new sales</li>\n                <li>Receive purchased NFTs</li>\n                <li>Purchase content on RenaissBlock</li>\n                <li>Mint new content</li>\n              </ul>\n              <p style={{ marginBottom: 12 }}>\n                Your library of owned NFTs will disappear until you reconnect a wallet.\n              </p>\n              <div style={{\n                background: '#0b1220',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: 12,\n                fontSize: 12,\n                fontFamily: 'monospace',\n                marginTop: 12,\n              }}>\n                <div style={{ color: '#94a3b8', marginBottom: 4 }}>Your NFTs will remain in:</div>\n                <div style={{ color: '#e5e7eb' }}>{walletAddress}</div>\n              </div>\n            </div>\n\n            {error && (\n              <div style={{\n                background: '#ef444420',\n                border: '1px solid #ef4444',\n                borderRadius: 8,\n                padding: 12,\n                color: '#fca5a5',\n                fontSize: 13,\n                marginBottom: 16,\n              }}>\n                {error}\n              </div>\n            )}\n\n            <div style={{ display: 'flex', gap: 12 }}>\n              <button\n                onClick={() => {\n                  setActiveAction(null);\n                  setError('');\n                }}\n                disabled={loading}\n                style={{\n                  flex: 1,\n                  background: 'transparent',\n                  border: '1px solid #475569',\n                  color: '#cbd5e1',\n                  padding: '10px 20px',\n                  borderRadius: 8,\n                  fontWeight: 600,\n                  cursor: loading ? 'not-allowed' : 'pointer',\n                  fontSize: 14,\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={disconnectWallet}\n                disabled={loading}\n                style={{\n                  flex: 1,\n                  background: loading ? '#6b7280' : '#ef4444',\n                  border: 'none',\n                  color: '#fff',\n                  padding: '10px 20px',\n                  borderRadius: 8,\n                  fontWeight: 600,\n                  cursor: loading ? 'not-allowed' : 'pointer',\n                  fontSize: 14,\n                }}\n              >\n                {loading ? 'Disconnecting...' : 'Yes, Disconnect'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { API_URL } from '../config';\nimport { Eye, ExternalLink, Users, AlertTriangle } from 'lucide-react';\n\ninterface Collaborator {\n  username: string;\n  role: string;\n  revenue_percentage: number;\n}\n\ninterface ArtManageModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  item: {\n    id: number;\n    title: string;\n    teaser_link: string;\n    content_type: string;\n    is_collaborative: boolean;\n    source_project_id?: number | null;\n    collaborators?: Collaborator[];\n  };\n  onUnpublished: () => void;\n}\n\nexport function ArtManageModal({ isOpen, onClose, item, onUnpublished }: ArtManageModalProps) {\n  const navigate = useNavigate();\n  const [showConfirm, setShowConfirm] = useState(false);\n  const [unpublishing, setUnpublishing] = useState(false);\n  const [requestingUnpublish, setRequestingUnpublish] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  if (!isOpen) return null;\n\n  const handleView = () => {\n    navigate(`/reader/${item.id}`);\n    onClose();\n  };\n\n  const handleUnpublish = async () => {\n    setUnpublishing(true);\n    setError('');\n\n    try {\n      // Get CSRF token first\n      const csrfResponse = await fetch(`${API_URL}/api/auth/csrf/`, {\n        credentials: 'include',\n      });\n      const csrfData = await csrfResponse.json();\n      const csrfToken = csrfData?.csrfToken || '';\n\n      const response = await fetch(`${API_URL}/api/content/${item.id}/unpublish/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrfToken,\n        },\n        credentials: 'include',\n      });\n\n      if (response.ok) {\n        setSuccess('Content unpublished successfully');\n        setTimeout(() => {\n          onUnpublished();\n          onClose();\n        }, 1500);\n      } else {\n        const data = await response.json();\n        setError(data.error || 'Failed to unpublish content');\n      }\n    } catch (err) {\n      console.error('Unpublish error:', err);\n      setError('Network error. Please try again.');\n    } finally {\n      setUnpublishing(false);\n    }\n  };\n\n  const handleRequestUnpublish = async () => {\n    if (!item.source_project_id) {\n      setError('Project not found');\n      return;\n    }\n\n    setRequestingUnpublish(true);\n    setError('');\n\n    try {\n      // Get CSRF token first\n      const csrfResponse = await fetch(`${API_URL}/api/auth/csrf/`, {\n        credentials: 'include',\n      });\n      const csrfData = await csrfResponse.json();\n      const csrfToken = csrfData?.csrfToken || '';\n\n      const response = await fetch(\n        `${API_URL}/api/collaborative-projects/${item.source_project_id}/proposals/`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'X-CSRFToken': csrfToken,\n          },\n          credentials: 'include',\n          body: JSON.stringify({\n            proposal_type: 'unpublish_content',\n            title: `Unpublish \"${item.title}\"`,\n            description: 'Request to remove this content from the marketplace. All collaborators must approve.',\n            voting_threshold: 'unanimous',\n            proposal_data: {\n              content_id: item.id,\n              content_title: item.title,\n            },\n          }),\n        }\n      );\n\n      if (response.ok) {\n        setSuccess('Unpublish request sent to collaborators');\n        setTimeout(() => {\n          onClose();\n        }, 2000);\n      } else {\n        const data = await response.json();\n        setError(data.error || 'Failed to create proposal');\n      }\n    } catch (err) {\n      console.error('Request unpublish error:', err);\n      setError('Network error. Please try again.');\n    } finally {\n      setRequestingUnpublish(false);\n    }\n  };\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: 'rgba(0, 0, 0, 0.85)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 9999,\n        padding: '20px',\n      }}\n      onClick={onClose}\n    >\n      <div\n        style={{\n          background: '#0f172a',\n          border: '1px solid #334155',\n          borderRadius: '16px',\n          maxWidth: '500px',\n          width: '100%',\n          maxHeight: '90vh',\n          overflow: 'auto',\n          boxShadow: '0 20px 60px rgba(0, 0, 0, 0.5)',\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div\n          style={{\n            padding: '20px',\n            borderBottom: '1px solid #334155',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n          }}\n        >\n          <h2 style={{ fontSize: '18px', fontWeight: 700, color: '#f8fafc', margin: 0 }}>\n            Manage Content\n          </h2>\n          <button\n            onClick={onClose}\n            style={{\n              background: 'transparent',\n              border: 'none',\n              color: '#94a3b8',\n              fontSize: '24px',\n              cursor: 'pointer',\n              padding: '0',\n              lineHeight: 1,\n            }}\n          >\n            \n          </button>\n        </div>\n\n        {/* Content Preview */}\n        <div style={{ padding: '20px' }}>\n          {/* Art Preview */}\n          <div\n            style={{\n              width: '100%',\n              paddingTop: '56.25%',\n              background: item.teaser_link\n                ? `url(${item.teaser_link})`\n                : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n              backgroundSize: 'cover',\n              backgroundPosition: 'center',\n              borderRadius: '12px',\n              marginBottom: '16px',\n              position: 'relative',\n            }}\n          />\n\n          {/* Title and Type */}\n          <h3\n            style={{\n              fontSize: '20px',\n              fontWeight: 600,\n              color: '#f8fafc',\n              margin: '0 0 8px 0',\n            }}\n          >\n            {item.title}\n          </h3>\n          <div\n            style={{\n              display: 'inline-block',\n              background: '#1e293b',\n              padding: '4px 10px',\n              borderRadius: '6px',\n              fontSize: '12px',\n              color: '#94a3b8',\n              textTransform: 'capitalize',\n              marginBottom: '20px',\n            }}\n          >\n            {item.content_type}\n          </div>\n\n          {/* Collaborative Info */}\n          {item.is_collaborative && item.collaborators && item.collaborators.length > 0 && (\n            <div\n              style={{\n                background: '#1e293b',\n                borderRadius: '10px',\n                padding: '16px',\n                marginBottom: '20px',\n              }}\n            >\n              <div\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px',\n                  marginBottom: '12px',\n                  color: '#f59e0b',\n                  fontSize: '13px',\n                  fontWeight: 600,\n                }}\n              >\n                <Users size={16} />\n                Collaborative Content\n              </div>\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\n                {item.collaborators.map((collab) => (\n                  <div\n                    key={collab.username}\n                    style={{\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                      alignItems: 'center',\n                      fontSize: '13px',\n                    }}\n                  >\n                    <span style={{ color: '#e2e8f0' }}>@{collab.username}</span>\n                    <span style={{ color: '#64748b' }}>\n                      {collab.role}  {collab.revenue_percentage}%\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Success Message */}\n          {success && (\n            <div\n              style={{\n                background: '#10b98120',\n                border: '1px solid #10b981',\n                color: '#10b981',\n                padding: '12px',\n                borderRadius: '8px',\n                fontSize: '14px',\n                marginBottom: '16px',\n                textAlign: 'center',\n              }}\n            >\n              {success}\n            </div>\n          )}\n\n          {/* Error Message */}\n          {error && (\n            <div\n              style={{\n                background: '#ef444420',\n                border: '1px solid #ef4444',\n                color: '#fca5a5',\n                padding: '12px',\n                borderRadius: '8px',\n                fontSize: '14px',\n                marginBottom: '16px',\n              }}\n            >\n              {error}\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\n            {/* View Button */}\n            <button\n              onClick={handleView}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '8px',\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                border: 'none',\n                color: '#000',\n                padding: '14px 20px',\n                borderRadius: '10px',\n                fontSize: '15px',\n                fontWeight: 700,\n                cursor: 'pointer',\n                transition: 'transform 0.2s',\n              }}\n              onMouseEnter={(e) => (e.currentTarget.style.transform = 'translateY(-2px)')}\n              onMouseLeave={(e) => (e.currentTarget.style.transform = 'translateY(0)')}\n            >\n              <Eye size={18} />\n              View Content\n            </button>\n\n            {/* Unpublish Section */}\n            {!showConfirm ? (\n              <button\n                onClick={() => setShowConfirm(true)}\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  gap: '8px',\n                  background: 'transparent',\n                  border: '1px solid #ef4444',\n                  color: '#ef4444',\n                  padding: '14px 20px',\n                  borderRadius: '10px',\n                  fontSize: '15px',\n                  fontWeight: 600,\n                  cursor: 'pointer',\n                  transition: 'all 0.2s',\n                }}\n                onMouseEnter={(e) => {\n                  e.currentTarget.style.background = '#ef444420';\n                }}\n                onMouseLeave={(e) => {\n                  e.currentTarget.style.background = 'transparent';\n                }}\n              >\n                <ExternalLink size={18} />\n                Unpublish\n              </button>\n            ) : (\n              <div\n                style={{\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: '10px',\n                  padding: '16px',\n                }}\n              >\n                <div\n                  style={{\n                    display: 'flex',\n                    alignItems: 'flex-start',\n                    gap: '12px',\n                    marginBottom: '16px',\n                  }}\n                >\n                  <AlertTriangle size={20} style={{ color: '#f59e0b', flexShrink: 0, marginTop: 2 }} />\n                  <div>\n                    <div style={{ color: '#f8fafc', fontSize: '14px', fontWeight: 600, marginBottom: 4 }}>\n                      {item.is_collaborative\n                        ? 'Request Unpublish Approval'\n                        : 'Confirm Unpublish'}\n                    </div>\n                    <div style={{ color: '#94a3b8', fontSize: '13px', lineHeight: 1.5 }}>\n                      {item.is_collaborative\n                        ? 'This will create a proposal that requires unanimous approval from all collaborators.'\n                        : 'This will remove your content from the marketplace. This action can be undone by republishing.'}\n                    </div>\n                  </div>\n                </div>\n\n                <div style={{ display: 'flex', gap: '10px' }}>\n                  <button\n                    onClick={() => setShowConfirm(false)}\n                    disabled={unpublishing || requestingUnpublish}\n                    style={{\n                      flex: 1,\n                      padding: '12px',\n                      borderRadius: '8px',\n                      border: '1px solid #334155',\n                      background: 'transparent',\n                      color: '#94a3b8',\n                      fontSize: '14px',\n                      fontWeight: 600,\n                      cursor: 'pointer',\n                    }}\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={item.is_collaborative ? handleRequestUnpublish : handleUnpublish}\n                    disabled={unpublishing || requestingUnpublish}\n                    style={{\n                      flex: 2,\n                      padding: '12px',\n                      borderRadius: '8px',\n                      border: 'none',\n                      background: '#ef4444',\n                      color: '#fff',\n                      fontSize: '14px',\n                      fontWeight: 700,\n                      cursor: unpublishing || requestingUnpublish ? 'not-allowed' : 'pointer',\n                      opacity: unpublishing || requestingUnpublish ? 0.6 : 1,\n                    }}\n                  >\n                    {unpublishing || requestingUnpublish\n                      ? 'Processing...'\n                      : item.is_collaborative\n                      ? 'Request Unpublish'\n                      : 'Confirm Unpublish'}\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ArtManageModal;\n","/**\n * Banner component shown on earnings dashboard to prompt Bridge setup.\n * Shows different states based on onboarding progress.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Building2, CheckCircle, ArrowRight, AlertCircle } from 'lucide-react';\nimport { getBridgeOnboardingStatus } from '../../services/bridgeApi';\nimport type { BridgeOnboardingStatus } from '../../types/bridge';\n\ninterface BridgeOnboardingBannerProps {\n  className?: string;\n}\n\nexport const BridgeOnboardingBanner: React.FC<BridgeOnboardingBannerProps> = ({\n  className = '',\n}) => {\n  const [status, setStatus] = useState<BridgeOnboardingStatus | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [dismissed, setDismissed] = useState(false);\n\n  useEffect(() => {\n    const fetchStatus = async () => {\n      try {\n        const data = await getBridgeOnboardingStatus();\n        setStatus(data);\n      } catch (error) {\n        console.error('Failed to fetch Bridge status:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchStatus();\n  }, []);\n\n  // Don't show if loading, dismissed, or already fully set up\n  if (loading || dismissed || status?.is_fully_setup) {\n    return null;\n  }\n\n  // Don't show if user has already chosen wallet-only payouts\n  if (status?.payout_destination === 'wallet' && status?.has_bridge_customer) {\n    return null;\n  }\n\n  // Determine banner content based on status\n  const getBannerContent = () => {\n    if (!status?.has_bridge_customer) {\n      // Step 1: Not started\n      return {\n        title: 'Get paid directly to your bank account',\n        description: 'Set up automatic USDC to USD conversion and receive your earnings as direct deposits.',\n        actionText: 'Set Up Payouts',\n        icon: Building2,\n        variant: 'primary' as const,\n      };\n    }\n\n    if (status.kyc_status === 'pending') {\n      // Step 2: KYC pending\n      return {\n        title: 'Verification in progress',\n        description: 'Your identity verification is being reviewed. This usually takes a few minutes.',\n        actionText: 'Check Status',\n        icon: AlertCircle,\n        variant: 'warning' as const,\n      };\n    }\n\n    if (status.kyc_status === 'approved' && !status.has_bank_account) {\n      // Step 3: Need bank account\n      return {\n        title: 'Almost there! Link your bank account',\n        description: 'Your identity is verified. Now link a bank account to receive payouts.',\n        actionText: 'Link Bank Account',\n        icon: Building2,\n        variant: 'success' as const,\n      };\n    }\n\n    if (status.has_bank_account && !status.has_liquidation_address) {\n      // Step 4: Need liquidation address\n      return {\n        title: 'Final step: Create payout address',\n        description: 'Create a payment address to start receiving automatic bank deposits.',\n        actionText: 'Complete Setup',\n        icon: CheckCircle,\n        variant: 'success' as const,\n      };\n    }\n\n    // Default: not started\n    return {\n      title: 'Enable direct bank deposits',\n      description: 'Convert your USDC earnings to USD automatically.',\n      actionText: 'Get Started',\n      icon: Building2,\n      variant: 'primary' as const,\n    };\n  };\n\n  const content = getBannerContent();\n  const Icon = content.icon;\n\n  const variantStyles = {\n    primary: 'bg-blue-50 border-blue-200 text-blue-900',\n    warning: 'bg-yellow-50 border-yellow-200 text-yellow-900',\n    success: 'bg-green-50 border-green-200 text-green-900',\n  };\n\n  const buttonStyles = {\n    primary: 'bg-blue-600 hover:bg-blue-700 text-white',\n    warning: 'bg-yellow-600 hover:bg-yellow-700 text-white',\n    success: 'bg-green-600 hover:bg-green-700 text-white',\n  };\n\n  return (\n    <div\n      className={`rounded-lg border p-4 ${variantStyles[content.variant]} ${className}`}\n    >\n      <div className=\"flex items-start justify-between\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"flex-shrink-0\">\n            <Icon className=\"h-6 w-6\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold\">{content.title}</h3>\n            <p className=\"mt-1 text-sm opacity-80\">{content.description}</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2 ml-4\">\n          <Link\n            to=\"/payout-settings\"\n            className={`inline-flex items-center gap-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${buttonStyles[content.variant]}`}\n          >\n            {content.actionText}\n            <ArrowRight className=\"h-4 w-4\" />\n          </Link>\n          <button\n            onClick={() => setDismissed(true)}\n            className=\"text-sm opacity-60 hover:opacity-100 px-2\"\n            aria-label=\"Dismiss\"\n          >\n            Dismiss\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BridgeOnboardingBanner;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport PreviewModal from '../components/PreviewModal';\nimport { WalletManagementPanel } from '../components/WalletManagementPanel';\nimport { InviteResponseModal } from '../components/collaboration/InviteResponseModal';\nimport { collaborationApi, CollaborativeProject, CollaboratorRole } from '../services/collaborationApi';\nimport { API_URL } from '../config';\nimport {\n  MapPin, Wallet, CheckCircle, BookOpen, Users,\n  BarChart3, FileText, Eye, DollarSign, Palette, Film, Music, X,\n  Check, XCircle, Plus, Trash2, ExternalLink, Edit2, Briefcase,\n  ChevronDown, ChevronUp, TrendingUp, Clock, UserCheck, Loader2, Settings\n} from 'lucide-react';\nimport ArtManageModal from '../components/ArtManageModal';\nimport { getFollowing, unfollowUser, FollowUser } from '../services/socialApi';\nimport { BridgeOnboardingBanner } from '../components/bridge';\n\ninterface ExternalPortfolioItem {\n  id: number;\n  title: string;\n  description: string;\n  image: string | null;\n  image_url: string | null;\n  external_url: string;\n  project_type: string;\n  role: string;\n  created_date: string | null;\n  order: number;\n}\n\ntype UserStatus = { user_id: number; username: string; wallet_address?: string } | null;\ntype UserProfile = {\n  id: number;\n  username: string;\n  display_name: string;\n  wallet_address?: string;\n  wallet_provider?: 'web3auth' | 'external' | null;\n  avatar?: string;\n  avatar_url?: string;\n  banner?: string;\n  banner_url?: string;\n  location?: string;\n  roles?: string[];\n  genres?: string[];\n  status?: string;\n  bio?: string;\n};\ntype Dashboard = { content_count: number; sales: number; tier?: string; fee?: number };\n\n// Sales analytics types\ntype SalesSummary = {\n  total_earnings_usdc: number;\n  solo_earnings: number;\n  collaboration_earnings: number;\n  content_count: number;\n  collaboration_count: number;\n  total_sales: number;\n};\n// Transaction within a content sale\ntype SaleTransaction = {\n  id: number;\n  buyer: string;\n  amount: number;\n  percentage: number;\n  date: string;\n  tx_signature: string | null;\n};\n\ntype ContentSale = {\n  id: string;\n  title: string;\n  content_type: string;\n  price: number;\n  editions_remaining: number;\n  role: string;\n  percentage: number;\n  total_earnings: number;\n  sales_count: number;\n  is_collaborative: boolean;\n  transactions: SaleTransaction[];\n};\n\n// CollabSale now has same structure as ContentSale\ntype CollabSale = ContentSale;\n\ntype RecentTransaction = {\n  id: string | number;\n  type: 'collaboration' | 'solo';\n  title: string;\n  buyer: string;\n  amount: number;\n  role: string;\n  percentage: number;\n  date: string;\n  tx_signature: string | null;\n};\ntype SalesAnalytics = {\n  summary: SalesSummary;\n  content_sales: ContentSale[];\n  collaboration_sales: CollabSale[];\n  recent_transactions: RecentTransaction[];\n};\n\ntype TabType = 'content' | 'collaborations' | 'portfolio' | 'analytics' | 'following';\ntype ContentFilterType = 'all' | 'book' | 'art';\n// Note: 'music' and 'film' are coming soon - not included in MVP\ntype StatusFilterType = 'all' | 'published' | 'draft';\n\n// Book project with chapters (from /api/book-projects/my-published/)\ninterface BookChapter {\n  id: number;\n  title: string;\n  order: number;\n  is_published: boolean;\n  content_id: number | null;\n  price_usd: number;\n  view_count: number;\n}\n\ninterface BookProject {\n  id: number;\n  title: string;\n  cover_image_url: string | null;\n  total_chapters: number;\n  published_chapters: number;\n  is_published: boolean;\n  chapters: BookChapter[];\n  total_views: number;\n  total_price: number;\n  updated_at: string;\n}\n\nexport default function ProfilePageRedesigned() {\n  const navigate = useNavigate();\n  const [user, setUser] = useState<UserStatus>(null);\n  const [content, setContent] = useState<any[]>([]);\n  const [status, setStatus] = useState('');\n  const [dash, setDash] = useState<Dashboard>({ content_count: 0, sales: 0 });\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [csrf, setCsrf] = useState('');\n  const avatarInputRef = useRef<HTMLInputElement | null>(null);\n  const bannerInputRef = useRef<HTMLInputElement | null>(null);\n  const [showWalletModal, setShowWalletModal] = useState(false);\n\n  // About section editing state\n  const [editingAbout, setEditingAbout] = useState(false);\n  const [editBio, setEditBio] = useState('');\n  const [editDisplayName, setEditDisplayName] = useState('');\n  const [editLocation, setEditLocation] = useState('');\n  const [editStatus, setEditStatus] = useState('');\n  const [editRoles, setEditRoles] = useState<string[]>([]);\n  const [editGenres, setEditGenres] = useState<string[]>([]);\n  const [savingAbout, setSavingAbout] = useState(false);\n\n  // Predefined options for roles and genres\n  const ROLE_OPTIONS = [\n    'Author', 'Artist', 'Illustrator', 'Manga Artist', 'Comic Artist',\n    'Cover Designer', 'Editor', 'Proofreader', 'Narrator', 'Colorist',\n    'Letterer', 'Writer', 'Researcher', 'Analyst'\n  ];\n  const GENRE_OPTIONS = [\n    'Fantasy', 'Sci-Fi', 'Romance', 'Horror', 'Mystery', 'Thriller',\n    'Manga', 'Webtoon', 'Comics', 'Non-Fiction', 'Finance', 'Business',\n    'Self-Help', 'Biography', 'History', 'Action', 'Drama', 'Comedy',\n    'Slice of Life', 'Isekai', 'LitRPG'\n  ];\n\n  // External portfolio state\n  const [externalPortfolio, setExternalPortfolio] = useState<ExternalPortfolioItem[]>([]);\n  const [portfolioModalOpen, setPortfolioModalOpen] = useState(false);\n  const [editingPortfolioItem, setEditingPortfolioItem] = useState<ExternalPortfolioItem | null>(null);\n  const [activeTab, setActiveTab] = useState<TabType>('content');\n  const [contentFilter, setContentFilter] = useState<ContentFilterType>('all');\n  const [statusFilter, setStatusFilter] = useState<StatusFilterType>('all');\n  const [inventory, setInventory] = useState<any[]>([]);\n  const [bookProjects, setBookProjects] = useState<BookProject[]>([]);\n  const [expandedBooks, setExpandedBooks] = useState<Set<number>>(new Set());\n  const [showPreview, setShowPreview] = useState(false);\n  const [previewItem, setPreviewItem] = useState<any>(null);\n\n  // Art manage modal state\n  const [showManageModal, setShowManageModal] = useState(false);\n  const [manageItem, setManageItem] = useState<any>(null);\n\n  // Collaboration invite state\n  const [pendingInvites, setPendingInvites] = useState<{ project: CollaborativeProject; invite: CollaboratorRole }[]>([]);\n  const [selectedInviteProjectId, setSelectedInviteProjectId] = useState<number | null>(null);\n  // Active collaborations state\n  const [collaborations, setCollaborations] = useState<any[]>([]);\n  const [collaborationsLoading, setCollaborationsLoading] = useState(false);\n  // Processing state for accept/decline buttons\n  const [processingInvites, setProcessingInvites] = useState<Set<number>>(new Set());\n\n  // Sales analytics state\n  const [salesAnalytics, setSalesAnalytics] = useState<SalesAnalytics | null>(null);\n  const [analyticsLoading, setAnalyticsLoading] = useState(false);\n  const [expandedAnalyticsCards, setExpandedAnalyticsCards] = useState<Set<string>>(new Set());\n\n  // Following state\n  const [followingList, setFollowingList] = useState<FollowUser[]>([]);\n  const [followingLoading, setFollowingLoading] = useState(false);\n  const [unfollowingUsers, setUnfollowingUsers] = useState<Set<number>>(new Set());\n\n  // Toggle expanded state for an analytics card\n  const toggleAnalyticsCard = (cardId: string) => {\n    setExpandedAnalyticsCards(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(cardId)) {\n        newSet.delete(cardId);\n      } else {\n        newSet.add(cardId);\n      }\n      return newSet;\n    });\n  };\n\n  async function refreshStatus() {\n    const d = await fetch(`${API_URL}/api/auth/status/`, { credentials: 'include' }).then(r => r.json());\n    setUser(d);\n  }\n\n  async function refreshCsrf() {\n    const r = await fetch(`${API_URL}/api/auth/csrf/`, { credentials: 'include' });\n    const j = await r.json();\n    const token = j?.csrfToken || '';\n    setCsrf(token);\n    return token;\n  }\n\n  async function loadPendingInvites() {\n    try {\n      const invites = await collaborationApi.getPendingInvites();\n      setPendingInvites(invites);\n    } catch (err) {\n      console.error('Failed to load pending invites:', err);\n      setPendingInvites([]);\n    }\n  }\n\n  async function loadCollaborations() {\n    setCollaborationsLoading(true);\n    try {\n      const projects = await collaborationApi.getCollaborativeProjects();\n      setCollaborations(projects);\n    } catch (err) {\n      console.error('Failed to load collaborations:', err);\n      setCollaborations([]);\n    } finally {\n      setCollaborationsLoading(false);\n    }\n  }\n\n  async function loadExternalPortfolio() {\n    try {\n      const res = await fetch(`${API_URL}/api/portfolio/`, { credentials: 'include' });\n      if (res.ok) {\n        const data = await res.json();\n        setExternalPortfolio(data);\n      }\n    } catch (err) {\n      console.error('Failed to load external portfolio:', err);\n    }\n  }\n\n  async function loadSalesAnalytics() {\n    setAnalyticsLoading(true);\n    try {\n      const res = await fetch(`${API_URL}/api/sales-analytics/`, { credentials: 'include' });\n      if (res.ok) {\n        const data = await res.json();\n        setSalesAnalytics(data);\n      }\n    } catch (err) {\n      console.error('Failed to load sales analytics:', err);\n    } finally {\n      setAnalyticsLoading(false);\n    }\n  }\n\n  async function loadFollowingList(usernameOverride?: string) {\n    const username = usernameOverride || profile?.username;\n    if (!username) return;\n    setFollowingLoading(true);\n    try {\n      const response = await getFollowing(username);\n      setFollowingList(response.results);\n    } catch (err) {\n      console.error('Failed to load following list:', err);\n      setFollowingList([]);\n    } finally {\n      setFollowingLoading(false);\n    }\n  }\n\n  async function handleUnfollow(username: string, userId: number) {\n    setUnfollowingUsers(prev => new Set(prev).add(userId));\n    try {\n      await unfollowUser(username);\n      // Remove from the list\n      setFollowingList(prev => prev.filter(u => u.id !== userId));\n      setStatus(`Unfollowed @${username}`);\n    } catch (err) {\n      console.error('Failed to unfollow:', err);\n      setStatus('Failed to unfollow');\n    } finally {\n      setUnfollowingUsers(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(userId);\n        return newSet;\n      });\n    }\n  }\n\n  async function deletePortfolioItem(id: number) {\n    const token = csrf || await refreshCsrf();\n    try {\n      const res = await fetch(`${API_URL}/api/portfolio/${id}/`, {\n        method: 'DELETE',\n        headers: { 'X-CSRFToken': token, 'X-Requested-With': 'XMLHttpRequest' },\n        credentials: 'include'\n      });\n      if (res.ok) {\n        setExternalPortfolio(prev => prev.filter(item => item.id !== id));\n        setStatus('Portfolio item deleted');\n      }\n    } catch (err) {\n      console.error('Failed to delete portfolio item:', err);\n      setStatus('Failed to delete item');\n    }\n  }\n\n  async function savePortfolioItem(item: Partial<ExternalPortfolioItem>) {\n    const token = csrf || await refreshCsrf();\n    const isEdit = !!editingPortfolioItem;\n    const url = isEdit\n      ? `${API_URL}/api/portfolio/${editingPortfolioItem!.id}/`\n      : `${API_URL}/api/portfolio/`;\n\n    try {\n      const res = await fetch(url, {\n        method: isEdit ? 'PATCH' : 'POST',\n        headers: {\n          'X-CSRFToken': token,\n          'X-Requested-With': 'XMLHttpRequest',\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify(item)\n      });\n      if (res.ok) {\n        await loadExternalPortfolio();\n        setPortfolioModalOpen(false);\n        setEditingPortfolioItem(null);\n        setStatus(isEdit ? 'Portfolio item updated' : 'Portfolio item added');\n      }\n    } catch (err) {\n      console.error('Failed to save portfolio item:', err);\n      setStatus('Failed to save item');\n    }\n  }\n\n  // Accept invitation handler\n  async function handleAcceptInvite(projectId: number, e: React.MouseEvent) {\n    e.stopPropagation();\n    setProcessingInvites(prev => new Set(prev).add(projectId));\n    try {\n      await collaborationApi.acceptInvitation(projectId);\n      setStatus('Invitation accepted!');\n      // Refresh both lists\n      await Promise.all([loadPendingInvites(), loadCollaborations()]);\n    } catch (err: any) {\n      console.error('Failed to accept invitation:', err);\n      setStatus(`Failed to accept: ${err.message || 'Unknown error'}`);\n    } finally {\n      setProcessingInvites(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(projectId);\n        return newSet;\n      });\n    }\n  }\n\n  // Decline invitation handler\n  async function handleDeclineInvite(projectId: number, e: React.MouseEvent) {\n    e.stopPropagation();\n    setProcessingInvites(prev => new Set(prev).add(projectId));\n    try {\n      await collaborationApi.declineInvitation(projectId);\n      setStatus('Invitation declined');\n      // Refresh both lists\n      await Promise.all([loadPendingInvites(), loadCollaborations()]);\n    } catch (err: any) {\n      console.error('Failed to decline invitation:', err);\n      setStatus(`Failed to decline: ${err.message || 'Unknown error'}`);\n    } finally {\n      setProcessingInvites(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(projectId);\n        return newSet;\n      });\n    }\n  }\n\n  // Helper function to get content type icon\n  function getContentTypeIcon(contentType: string, size: number = 24) {\n    switch (contentType) {\n      case 'book':\n        return <BookOpen size={size} />;\n      case 'music':\n        return <Music size={size} />;\n      case 'video':\n        return <Film size={size} />;\n      case 'art':\n      default:\n        return <Palette size={size} />;\n    }\n  }\n\n  useEffect(() => {\n    const abortController = new AbortController();\n    const signal = abortController.signal;\n\n    Promise.all([\n      fetch(`${API_URL}/api/auth/status/`, { credentials: 'include', signal }).then(r => r.json()),\n      fetch(`${API_URL}/api/content/`, { credentials: 'include', signal }).then(r => r.json()),\n      fetch(`${API_URL}/api/auth/csrf/`, { credentials: 'include', signal }).then(r => r.json()),\n      fetch(`${API_URL}/api/users/profile/`, { credentials: 'include', signal }).then(r => r.ok ? r.json() : null),\n      fetch(`${API_URL}/api/dashboard/`, { credentials: 'include', signal }).then(r => r.ok ? r.json() : { content_count: 0, sales: 0 }),\n    ])\n      .then(([userResp, contentResp, csrfResp, profileResp, dashResp]) => {\n        setUser(userResp);\n        if (Array.isArray(contentResp.results)) setContent(contentResp.results);\n        else if (Array.isArray(contentResp)) setContent(contentResp);\n        setCsrf(csrfResp?.csrfToken || '');\n        setProfile(profileResp);\n        setDash(dashResp);\n\n        // Load pending collaboration invites, active collaborations, external portfolio, analytics, and following\n        loadPendingInvites();\n        loadCollaborations();\n        loadExternalPortfolio();\n        loadSalesAnalytics();\n        // Pass username directly since profile state won't be updated yet\n        if (profileResp?.username) {\n          loadFollowingList(profileResp.username);\n        }\n      })\n      .catch(() => { });\n\n    return () => abortController.abort();\n  }, []);\n\n  useEffect(() => {\n    // Fetch all user content (both draft and minted) - books are handled separately\n    fetch(`${API_URL}/api/content/?mine=1`, { credentials: 'include' })\n      .then(r => r.ok ? r.json() : [])\n      .then(data => {\n        let items: any[] = [];\n        if (data && Array.isArray(data.results)) {\n          items = data.results;\n        } else if (Array.isArray(data)) {\n          items = data;\n        }\n        // Filter out solo book content - these are fetched separately as book projects\n        // BUT keep collaborative book content (is_collaborative=true) since those aren't in bookProjects\n        setInventory(items.filter(item => item.content_type !== 'book' || item.is_collaborative));\n      })\n      .catch(() => setInventory([]));\n\n    // Fetch published book projects (grouped by book, not individual chapters)\n    fetch(`${API_URL}/api/book-projects/my-published/`, { credentials: 'include' })\n      .then(r => r.ok ? r.json() : [])\n      .then(data => {\n        if (Array.isArray(data)) {\n          setBookProjects(data);\n        } else {\n          setBookProjects([]);\n        }\n      })\n      .catch(() => setBookProjects([]));\n  }, [status]);\n\n  const onAvatarClick = () => {\n    avatarInputRef.current?.click();\n  };\n\n  const onAvatarSelected: React.ChangeEventHandler<HTMLInputElement> = async (e) => {\n    const file = e.target.files && e.target.files[0];\n    if (!file) return;\n    const token = csrf || await refreshCsrf();\n    const fd = new FormData();\n    fd.append('avatar', file);\n    const res = await fetch(`${API_URL}/api/users/profile/`, {\n      method: 'PATCH',\n      headers: { 'X-CSRFToken': token, 'X-Requested-With': 'XMLHttpRequest' },\n      credentials: 'include',\n      body: fd,\n    });\n    if (res.ok) {\n      setStatus('Avatar updated');\n      await refreshStatus();\n      const profileResp = await fetch(`${API_URL}/api/users/profile/`, { credentials: 'include' });\n      if (profileResp.ok) setProfile(await profileResp.json());\n    } else {\n      setStatus(`Failed: ${await res.text()}`);\n    }\n    e.target.value = '';\n  };\n\n  const onBannerClick = () => {\n    bannerInputRef.current?.click();\n  };\n\n  const onBannerSelected: React.ChangeEventHandler<HTMLInputElement> = async (e) => {\n    const file = e.target.files && e.target.files[0];\n    if (!file) return;\n    const token = csrf || await refreshCsrf();\n    const fd = new FormData();\n    fd.append('banner', file);\n    const res = await fetch(`${API_URL}/api/users/profile/`, {\n      method: 'PATCH',\n      headers: { 'X-CSRFToken': token, 'X-Requested-With': 'XMLHttpRequest' },\n      credentials: 'include',\n      body: fd,\n    });\n    if (res.ok) {\n      setStatus('Banner updated');\n      const profileResp = await fetch(`${API_URL}/api/users/profile/`, { credentials: 'include' });\n      if (profileResp.ok) setProfile(await profileResp.json());\n    } else {\n      setStatus(`Failed: ${await res.text()}`);\n    }\n    e.target.value = '';\n  };\n\n  const openReader = (contentId: number) => {\n    // Owner viewing their own content - go directly to reader (full access)\n    navigate(`/reader/${contentId}`);\n  };\n\n  const shortenAddress = (addr: string) => {\n    if (!addr || addr.length < 12) return addr;\n    return `${addr.slice(0, 4)}...${addr.slice(-4)}`;\n  };\n\n  // About section editing handlers\n  const startEditingAbout = () => {\n    setEditBio(profile?.bio || '');\n    setEditDisplayName(profile?.display_name || '');\n    setEditLocation(profile?.location || '');\n    setEditStatus(profile?.status || 'Available');\n    setEditRoles(profile?.roles || []);\n    setEditGenres(profile?.genres || []);\n    setEditingAbout(true);\n  };\n\n  const cancelEditingAbout = () => {\n    setEditingAbout(false);\n  };\n\n  const saveAbout = async () => {\n    setSavingAbout(true);\n    try {\n      const res = await fetch(`${API_URL}/api/users/profile/`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrf,\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          bio: editBio,\n          display_name: editDisplayName,\n          location: editLocation,\n          status: editStatus,\n          roles: editRoles,\n          genres: editGenres,\n        }),\n      });\n\n      if (res.ok) {\n        const updatedProfile = await res.json();\n        setProfile(updatedProfile);\n        setEditingAbout(false);\n        setStatus('Profile updated');\n      } else {\n        setStatus('Failed to save profile');\n      }\n    } catch (e) {\n      console.error('Save failed:', e);\n      setStatus('Failed to save profile');\n    } finally {\n      setSavingAbout(false);\n    }\n  };\n\n  // Availability status options\n  const statusOptions = [\n    { value: 'Available', label: 'Available', description: 'Ready to start new collaborations' },\n    { value: 'Open to Offers', label: 'Open to Offers', description: 'Will consider interesting projects' },\n    { value: 'Selective', label: 'Selective', description: 'Only taking specific types of work' },\n    { value: 'Booked', label: 'Booked', description: 'Currently busy, booking future work' },\n    { value: 'Unavailable', label: 'Unavailable', description: 'Not accepting collaborations' },\n    { value: 'On Hiatus', label: 'On Hiatus', description: 'Taking a break' },\n  ];\n\n  return (\n    <div style={{\n      maxWidth: 1200,\n      margin: '0 auto',\n      padding: '40px 24px',\n    }}>\n      {/* Hidden file inputs for avatar and banner */}\n      <input ref={avatarInputRef} onChange={onAvatarSelected} type=\"file\" accept=\"image/jpeg,image/png,image/webp\" style={{ display: 'none' }} />\n      <input ref={bannerInputRef} onChange={onBannerSelected} type=\"file\" accept=\"image/jpeg,image/png,image/webp\" style={{ display: 'none' }} />\n\n      {/* HERO SECTION */}\n      <div\n        onClick={onBannerClick}\n        style={{\n          background: (profile?.banner || profile?.banner_url)\n            ? `linear-gradient(rgba(15,23,42,0.7), rgba(15,23,42,0.9)), url(${profile?.banner || profile?.banner_url}) center/cover`\n            : '#0f172a',\n          border: '1px solid #1e293b',\n          borderRadius: 16,\n          padding: 32,\n          marginBottom: 24,\n          position: 'relative',\n          cursor: 'pointer',\n        }}\n        title=\"Click to update banner\"\n      >\n        {/* Top Right Buttons */}\n        <div style={{\n          position: 'absolute',\n          top: 24,\n          right: 24,\n          display: 'flex',\n          gap: 8,\n        }}>\n          {/* View Public Profile Button */}\n          <Link\n            to={`/profile/${profile?.username || user?.username}`}\n            onClick={(e) => e.stopPropagation()}\n            style={{\n              background: 'rgba(245,158,11,0.15)',\n              border: '1px solid rgba(245,158,11,0.3)',\n              color: '#f59e0b',\n              height: 40,\n              padding: '0 14px',\n              borderRadius: 8,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 6,\n              cursor: 'pointer',\n              textDecoration: 'none',\n              fontSize: 13,\n              fontWeight: 600,\n              transition: 'all 0.2s',\n            }}\n          >\n            <Eye size={18} />\n            View Public Profile\n          </Link>\n        </div>\n\n        {/* Avatar + User Info */}\n        <div style={{ display: 'flex', gap: 24, alignItems: 'flex-start', marginBottom: 16 }}>\n          <div\n            onClick={(e) => { e.stopPropagation(); onAvatarClick(); }}\n            style={{\n              width: 100,\n              height: 100,\n              borderRadius: '50%',\n              overflow: 'hidden',\n              cursor: 'pointer',\n              border: '3px solid #1e293b',\n              flexShrink: 0,\n              transition: 'all 0.2s',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              background: '#1e293b',\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.borderColor = '#f59e0b';\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.borderColor = '#1e293b';\n            }}\n            title=\"Click to upload avatar\"\n          >\n            {(profile?.avatar || profile?.avatar_url) ? (\n              <img\n                src={profile?.avatar || profile?.avatar_url}\n                alt={profile?.display_name || user?.username || 'Avatar'}\n                style={{\n                  width: '100%',\n                  height: '100%',\n                  objectFit: 'cover',\n                }}\n              />\n            ) : (\n              <span style={{ color: '#f59e0b', fontWeight: 700, fontSize: 40 }}>\n                {(user?.username || '?').slice(0, 1).toUpperCase()}\n              </span>\n            )}\n          </div>\n\n          <div style={{ flex: 1 }}>\n            <div style={{\n              fontSize: 32,\n              fontWeight: 700,\n              color: '#f8fafc',\n              marginBottom: 8,\n            }}>\n              {profile?.display_name || user?.username || 'User'}\n            </div>\n\n            {profile?.location && (\n              <div style={{\n                fontSize: 15,\n                color: '#94a3b8',\n                marginBottom: 8,\n                display: 'flex',\n                alignItems: 'center',\n                gap: 6,\n              }}>\n                <MapPin size={16} /> {profile.location}\n              </div>\n            )}\n\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: 12,\n              fontSize: 14,\n              color: '#cbd5e1',\n            }}>\n              {profile?.status && (\n                <>\n                  <span style={{\n                    display: 'inline-flex',\n                    alignItems: 'center',\n                    gap: 6,\n                  }}>\n                    <span style={{ color: '#10b981', fontSize: 12 }}></span>\n                    {profile.status}\n                  </span>\n                  <span style={{ color: '#475569' }}></span>\n                </>\n              )}\n              <span style={{ color: '#94a3b8' }}>@{profile?.username || user?.username || ''}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* WALLET STATUS CARD - Compact */}\n      <div style={{\n        background: profile?.wallet_address ? '#0f172a' : '#1e293b',\n        border: profile?.wallet_address ? '1px solid #10b981' : '1px solid #334155',\n        borderRadius: 12,\n        padding: '16px 20px',\n        marginBottom: 24,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n      }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n          <div style={{ color: profile?.wallet_address ? '#10b981' : '#94a3b8' }}>\n            {profile?.wallet_address ? <CheckCircle size={24} /> : <Wallet size={24} />}\n          </div>\n          <div>\n            <div style={{\n              fontSize: 14,\n              fontWeight: 600,\n              color: '#f8fafc',\n              marginBottom: profile?.wallet_address ? 4 : 0,\n            }}>\n              {profile?.wallet_address ? 'Wallet Connected' : 'Wallet Setup Required'}\n            </div>\n            {profile?.wallet_address && (\n              <div style={{\n                fontSize: 13,\n                color: '#94a3b8',\n                fontFamily: 'monospace',\n              }}>\n                {shortenAddress(profile.wallet_address)}\n              </div>\n            )}\n          </div>\n        </div>\n\n        <button\n          onClick={() => setShowWalletModal(true)}\n          style={{\n            background: profile?.wallet_address ? 'transparent' : 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n            border: profile?.wallet_address ? '1px solid #334155' : 'none',\n            color: '#fff',\n            padding: '8px 16px',\n            borderRadius: 8,\n            fontSize: 13,\n            fontWeight: 600,\n            cursor: 'pointer',\n            transition: 'all 0.2s',\n          }}\n          onMouseEnter={(e) => {\n            if (profile?.wallet_address) {\n              e.currentTarget.style.background = '#1e293b';\n              e.currentTarget.style.borderColor = '#475569';\n            } else {\n              e.currentTarget.style.transform = 'translateY(-2px)';\n            }\n          }}\n          onMouseLeave={(e) => {\n            if (profile?.wallet_address) {\n              e.currentTarget.style.background = 'transparent';\n              e.currentTarget.style.borderColor = '#334155';\n            } else {\n              e.currentTarget.style.transform = 'translateY(0)';\n            }\n          }}\n        >\n          {profile?.wallet_address ? 'Manage' : 'Connect Wallet'}\n        </button>\n      </div>\n\n      {/* ABOUT SECTION */}\n      <div style={{\n        background: '#0f172a',\n        border: '1px solid #1e293b',\n        borderRadius: 16,\n        padding: 24,\n        marginBottom: 24,\n      }}>\n        <div style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: 20,\n        }}>\n          <h3 style={{ fontSize: 18, fontWeight: 700, color: '#f8fafc', margin: 0 }}>\n            About\n          </h3>\n          {!editingAbout ? (\n            <button\n              onClick={startEditingAbout}\n              style={{\n                background: 'transparent',\n                border: '1px solid #334155',\n                color: '#94a3b8',\n                padding: '6px 12px',\n                borderRadius: 6,\n                fontSize: 13,\n                fontWeight: 500,\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                gap: 6,\n                transition: 'all 0.2s',\n              }}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.borderColor = '#f59e0b';\n                e.currentTarget.style.color = '#f59e0b';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.borderColor = '#334155';\n                e.currentTarget.style.color = '#94a3b8';\n              }}\n            >\n              <Edit2 size={14} />\n              Edit\n            </button>\n          ) : (\n            <div style={{ display: 'flex', gap: 8 }}>\n              <button\n                onClick={cancelEditingAbout}\n                disabled={savingAbout}\n                style={{\n                  background: 'transparent',\n                  border: '1px solid #334155',\n                  color: '#94a3b8',\n                  padding: '6px 12px',\n                  borderRadius: 6,\n                  fontSize: 13,\n                  fontWeight: 500,\n                  cursor: savingAbout ? 'not-allowed' : 'pointer',\n                  opacity: savingAbout ? 0.5 : 1,\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={saveAbout}\n                disabled={savingAbout}\n                style={{\n                  background: savingAbout ? '#6b7280' : 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                  border: 'none',\n                  color: '#fff',\n                  padding: '6px 16px',\n                  borderRadius: 6,\n                  fontSize: 13,\n                  fontWeight: 600,\n                  cursor: savingAbout ? 'not-allowed' : 'pointer',\n                }}\n              >\n                {savingAbout ? 'Saving...' : 'Save'}\n              </button>\n            </div>\n          )}\n        </div>\n\n        {editingAbout ? (\n          /* Edit Mode */\n          <div style={{ display: 'grid', gap: 20 }}>\n            {/* Display Name */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: 13,\n                fontWeight: 600,\n                color: '#cbd5e1',\n                marginBottom: 8,\n              }}>\n                Display Name\n              </label>\n              <input\n                type=\"text\"\n                value={editDisplayName}\n                onChange={(e) => setEditDisplayName(e.target.value)}\n                placeholder=\"Your display name\"\n                style={{\n                  width: '100%',\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  padding: '10px 14px',\n                  color: '#f8fafc',\n                  fontSize: 14,\n                }}\n              />\n            </div>\n\n            {/* Location */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: 13,\n                fontWeight: 600,\n                color: '#cbd5e1',\n                marginBottom: 8,\n              }}>\n                Location\n              </label>\n              <input\n                type=\"text\"\n                value={editLocation}\n                onChange={(e) => setEditLocation(e.target.value)}\n                placeholder=\"e.g., New York, NY\"\n                style={{\n                  width: '100%',\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  padding: '10px 14px',\n                  color: '#f8fafc',\n                  fontSize: 14,\n                }}\n              />\n            </div>\n\n            {/* Availability Status */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: 13,\n                fontWeight: 600,\n                color: '#cbd5e1',\n                marginBottom: 8,\n              }}>\n                Availability Status\n              </label>\n              <select\n                value={editStatus}\n                onChange={(e) => setEditStatus(e.target.value)}\n                style={{\n                  width: '100%',\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  padding: '10px 14px',\n                  color: '#f8fafc',\n                  fontSize: 14,\n                }}\n              >\n                {statusOptions.map((opt) => (\n                  <option key={opt.value} value={opt.value}>{opt.label}</option>\n                ))}\n              </select>\n            </div>\n\n            {/* Roles */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: 13,\n                fontWeight: 600,\n                color: '#cbd5e1',\n                marginBottom: 8,\n              }}>\n                Your Roles <span style={{ color: '#64748b', fontWeight: 400 }}>(what you do)</span>\n              </label>\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: 8 }}>\n                {ROLE_OPTIONS.map((role) => {\n                  const isSelected = editRoles.includes(role);\n                  return (\n                    <button\n                      key={role}\n                      type=\"button\"\n                      onClick={() => {\n                        if (isSelected) {\n                          setEditRoles(editRoles.filter(r => r !== role));\n                        } else {\n                          setEditRoles([...editRoles, role]);\n                        }\n                      }}\n                      style={{\n                        background: isSelected ? 'rgba(245, 158, 11, 0.2)' : '#1e293b',\n                        border: `1px solid ${isSelected ? '#f59e0b' : '#334155'}`,\n                        color: isSelected ? '#fbbf24' : '#94a3b8',\n                        padding: '6px 12px',\n                        borderRadius: 6,\n                        fontSize: 13,\n                        fontWeight: 500,\n                        cursor: 'pointer',\n                        transition: 'all 0.2s',\n                      }}\n                    >\n                      {role}\n                    </button>\n                  );\n                })}\n              </div>\n              <div style={{ fontSize: 12, color: '#64748b', marginTop: 6 }}>\n                Select all roles that apply to you. This helps collaborators find you.\n              </div>\n            </div>\n\n            {/* Genres */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: 13,\n                fontWeight: 600,\n                color: '#cbd5e1',\n                marginBottom: 8,\n              }}>\n                Your Genres <span style={{ color: '#64748b', fontWeight: 400 }}>(what you create)</span>\n              </label>\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: 8 }}>\n                {GENRE_OPTIONS.map((genre) => {\n                  const isSelected = editGenres.includes(genre);\n                  return (\n                    <button\n                      key={genre}\n                      type=\"button\"\n                      onClick={() => {\n                        if (isSelected) {\n                          setEditGenres(editGenres.filter(g => g !== genre));\n                        } else {\n                          setEditGenres([...editGenres, genre]);\n                        }\n                      }}\n                      style={{\n                        background: isSelected ? 'rgba(59, 130, 246, 0.2)' : '#1e293b',\n                        border: `1px solid ${isSelected ? '#3b82f6' : '#334155'}`,\n                        color: isSelected ? '#60a5fa' : '#94a3b8',\n                        padding: '6px 12px',\n                        borderRadius: 6,\n                        fontSize: 13,\n                        fontWeight: 500,\n                        cursor: 'pointer',\n                        transition: 'all 0.2s',\n                      }}\n                    >\n                      {genre}\n                    </button>\n                  );\n                })}\n              </div>\n              <div style={{ fontSize: 12, color: '#64748b', marginTop: 6 }}>\n                Select genres you work in or are interested in.\n              </div>\n            </div>\n\n            {/* Bio */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: 13,\n                fontWeight: 600,\n                color: '#cbd5e1',\n                marginBottom: 8,\n              }}>\n                Bio\n              </label>\n              <textarea\n                value={editBio}\n                onChange={(e) => setEditBio(e.target.value)}\n                placeholder=\"Tell the world about yourself, your work, and what you're looking for...\"\n                rows={4}\n                style={{\n                  width: '100%',\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  padding: '10px 14px',\n                  color: '#f8fafc',\n                  fontSize: 14,\n                  resize: 'vertical',\n                  minHeight: 100,\n                  lineHeight: 1.6,\n                }}\n              />\n              <div style={{ fontSize: 12, color: '#64748b', marginTop: 6 }}>\n                Describe your experience, interests, and what kind of collaborations you're seeking.\n              </div>\n            </div>\n          </div>\n        ) : (\n          /* View Mode */\n          <div>\n            {/* Bio */}\n            {profile?.bio ? (\n              <p style={{\n                color: '#cbd5e1',\n                fontSize: 15,\n                lineHeight: 1.7,\n                margin: 0,\n                whiteSpace: 'pre-wrap',\n              }}>\n                {profile.bio}\n              </p>\n            ) : (\n              <p style={{\n                color: '#64748b',\n                fontSize: 14,\n                fontStyle: 'italic',\n                margin: 0,\n              }}>\n                No bio yet. Click Edit to add a bio and tell others about yourself.\n              </p>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* PENDING COLLABORATION INVITES */}\n      {pendingInvites.length > 0 && (\n        <div style={{\n          background: '#0f172a',\n          border: '1px solid #f59e0b40',\n          borderRadius: 16,\n          padding: 24,\n          marginBottom: 24,\n        }}>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 12,\n            marginBottom: 20,\n          }}>\n            <span style={{\n              background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n              padding: '6px 14px',\n              borderRadius: 8,\n              fontSize: 14,\n              fontWeight: 700,\n              color: '#000',\n            }}>\n              {pendingInvites.length}\n            </span>\n            <span style={{ fontSize: 18, fontWeight: 700, color: '#f8fafc' }}>\n              Collaboration Invites\n            </span>\n          </div>\n\n          <div style={{ display: 'grid', gap: 16 }}>\n            {pendingInvites.map(({ project, invite }) => {\n              const isProcessing = processingInvites.has(project.id);\n              return (\n              <div key={project.id} style={{\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 12,\n                padding: 20,\n                opacity: isProcessing ? 0.7 : 1,\n                transition: 'all 0.2s',\n              }}>\n                <div style={{ display: 'flex', alignItems: 'flex-start', gap: 16 }}>\n                  {/* Project Type Icon */}\n                  <div style={{\n                    width: 56,\n                    height: 56,\n                    borderRadius: 12,\n                    background: '#f59e0b20',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    color: '#f59e0b',\n                    flexShrink: 0,\n                  }}>\n                    {getContentTypeIcon(project.content_type, 28)}\n                  </div>\n\n                  {/* Invite Details */}\n                  <div style={{ flex: 1, minWidth: 0 }}>\n                    <div style={{ fontSize: 17, fontWeight: 700, color: '#f8fafc', marginBottom: 6 }}>\n                      {project.title}\n                    </div>\n                    <div style={{ fontSize: 14, color: '#94a3b8', marginBottom: 10 }}>\n                      <span style={{ color: '#cbd5e1' }}>@{project.created_by_username}</span> invited you as{' '}\n                      <span style={{ color: '#f59e0b', fontWeight: 600 }}>{invite.role}</span>\n                    </div>\n                    <div style={{ display: 'flex', gap: 20, fontSize: 13 }}>\n                      <div>\n                        <span style={{ color: '#64748b' }}>Revenue Split:</span>{' '}\n                        <span style={{ color: '#10b981', fontWeight: 700 }}>{invite.revenue_percentage}%</span>\n                      </div>\n                      <div>\n                        <span style={{ color: '#64748b' }}>Team:</span>{' '}\n                        <span style={{ color: '#e2e8f0' }}>{project.total_collaborators} people</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Actions */}\n                <div style={{\n                  display: 'flex',\n                  gap: 12,\n                  marginTop: 16,\n                  paddingTop: 16,\n                  borderTop: '1px solid #334155',\n                }}>\n                  <button\n                    onClick={(e) => handleAcceptInvite(project.id, e)}\n                    disabled={isProcessing}\n                    style={{\n                      flex: 1,\n                      background: '#10b981',\n                      color: '#fff',\n                      border: 'none',\n                      padding: '12px 20px',\n                      borderRadius: 10,\n                      fontSize: 14,\n                      fontWeight: 700,\n                      cursor: isProcessing ? 'not-allowed' : 'pointer',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      gap: 8,\n                    }}\n                  >\n                    <Check size={18} />\n                    {isProcessing ? 'Processing...' : 'Accept Invite'}\n                  </button>\n                  <button\n                    onClick={(e) => handleDeclineInvite(project.id, e)}\n                    disabled={isProcessing}\n                    style={{\n                      background: 'transparent',\n                      color: '#ef4444',\n                      border: '1px solid #ef4444',\n                      padding: '12px 20px',\n                      borderRadius: 10,\n                      fontSize: 14,\n                      fontWeight: 600,\n                      cursor: isProcessing ? 'not-allowed' : 'pointer',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      gap: 8,\n                    }}\n                  >\n                    <XCircle size={18} />\n                    Decline\n                  </button>\n                  <button\n                    onClick={() => setSelectedInviteProjectId(project.id)}\n                    disabled={isProcessing}\n                    style={{\n                      background: 'transparent',\n                      color: '#94a3b8',\n                      border: '1px solid #334155',\n                      padding: '12px 20px',\n                      borderRadius: 10,\n                      fontSize: 14,\n                      fontWeight: 600,\n                      cursor: isProcessing ? 'not-allowed' : 'pointer',\n                    }}\n                  >\n                    View Details\n                  </button>\n                </div>\n              </div>\n            );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* TABS NAVIGATION */}\n      <div style={{\n        display: 'flex',\n        gap: 4,\n        borderBottom: '1px solid #1e293b',\n        marginBottom: 16,\n      }}>\n        <Tab\n          icon={<BookOpen size={18} />}\n          label=\"My Content\"\n          count={inventory.length + bookProjects.length}\n          active={activeTab === 'content'}\n          onClick={() => setActiveTab('content')}\n        />\n        <Tab\n          icon={<Users size={18} />}\n          label=\"Collaborations\"\n          count={pendingInvites.length + collaborations.length}\n          active={activeTab === 'collaborations'}\n          onClick={() => setActiveTab('collaborations')}\n        />\n        <Tab\n          icon={<Briefcase size={18} />}\n          label=\"External Portfolio\"\n          active={activeTab === 'portfolio'}\n          onClick={() => setActiveTab('portfolio')}\n        />\n        <Tab\n          icon={<BarChart3 size={18} />}\n          label=\"Analytics\"\n          active={activeTab === 'analytics'}\n          onClick={() => setActiveTab('analytics')}\n        />\n        <Tab\n          icon={<UserCheck size={18} />}\n          label=\"Following\"\n          count={followingList.length}\n          active={activeTab === 'following'}\n          onClick={() => setActiveTab('following')}\n        />\n      </div>\n\n      {/* Content Type Sub-filters + Create Button */}\n      {activeTab === 'content' && (inventory.length > 0 || bookProjects.length > 0) && (\n        <div style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: 24,\n          gap: 16,\n        }}>\n          <div style={{\n            display: 'flex',\n            gap: 8,\n            flexWrap: 'wrap',\n          }}>\n            <FilterChip\n              label=\"All\"\n              count={inventory.length + bookProjects.length}\n              active={contentFilter === 'all'}\n              onClick={() => setContentFilter('all')}\n            />\n            <FilterChip\n              label=\"Books\"\n              count={bookProjects.length}\n              active={contentFilter === 'book'}\n              onClick={() => setContentFilter('book')}\n            />\n            <FilterChip\n              label=\"Art\"\n              count={inventory.filter(i => i.content_type === 'art').length}\n              active={contentFilter === 'art'}\n              onClick={() => setContentFilter('art')}\n            />\n            {/* Music & Film coming soon - hidden from filters */}\n            <div style={{ width: 1, height: 24, background: '#334155', margin: '0 8px' }} />\n            <FilterChip\n              label=\"Published\"\n              count={\n                inventory.filter(i => i.inventory_status === 'minted').length +\n                bookProjects.filter(b => b.published_chapters > 0).length\n              }\n              active={statusFilter === 'published'}\n              onClick={() => setStatusFilter(statusFilter === 'published' ? 'all' : 'published')}\n            />\n            <FilterChip\n              label=\"Drafts\"\n              count={\n                inventory.filter(i => i.inventory_status === 'draft').length +\n                bookProjects.filter(b => b.published_chapters === 0).length\n              }\n              active={statusFilter === 'draft'}\n              onClick={() => setStatusFilter(statusFilter === 'draft' ? 'all' : 'draft')}\n            />\n          </div>\n          <button\n            onClick={() => navigate('/studio')}\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8,\n              background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n              color: '#000',\n              border: 'none',\n              padding: '10px 18px',\n              borderRadius: 10,\n              fontSize: 14,\n              fontWeight: 700,\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n              flexShrink: 0,\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.transform = 'translateY(-2px)';\n              e.currentTarget.style.boxShadow = '0 4px 12px rgba(245,158,11,0.3)';\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = 'none';\n            }}\n          >\n            <Plus size={18} />\n            Create\n          </button>\n        </div>\n      )}\n\n      {/* TAB CONTENT */}\n      {activeTab === 'content' && (\n        <div>\n          {inventory.length === 0 && bookProjects.length === 0 ? (\n            <EmptyState\n              icon={<FileText size={64} />}\n              title=\"No content yet\"\n              description=\"Create your first piece of content to get started\"\n              actionLabel=\"+ Create Content\"\n              onAction={() => navigate('/studio')}\n            />\n          ) : (\n            (() => {\n              // Filter non-book inventory based on content type filter\n              // Note: music and film are coming soon, only book and art available\n              let filteredInventory = contentFilter === 'all'\n                ? inventory\n                : contentFilter === 'book'\n                  ? [] // Books are shown via bookProjects\n                  : inventory.filter(i => i.content_type === contentFilter);\n\n              // Apply status filter to inventory\n              if (statusFilter === 'published') {\n                filteredInventory = filteredInventory.filter(i => i.inventory_status === 'minted');\n              } else if (statusFilter === 'draft') {\n                filteredInventory = filteredInventory.filter(i => i.inventory_status === 'draft');\n              }\n\n              // Filter book projects by content type\n              let filteredBooks = contentFilter === 'all' || contentFilter === 'book'\n                ? bookProjects\n                : [];\n\n              // Apply status filter to books\n              if (statusFilter === 'published') {\n                filteredBooks = filteredBooks.filter(b => b.published_chapters > 0);\n              } else if (statusFilter === 'draft') {\n                filteredBooks = filteredBooks.filter(b => b.published_chapters === 0);\n              }\n\n              const hasContent = filteredInventory.length > 0 || filteredBooks.length > 0;\n\n              const filterLabel = statusFilter !== 'all'\n                ? `${statusFilter} ${contentFilter}`\n                : contentFilter;\n\n              return !hasContent ? (\n                <div style={{ textAlign: 'center', padding: '60px 24px', color: '#64748b' }}>\n                  <FileText size={48} style={{ marginBottom: 16, opacity: 0.5 }} />\n                  <div style={{ fontSize: 16, fontWeight: 600, color: '#94a3b8' }}>\n                    No {filterLabel} content yet\n                  </div>\n                </div>\n              ) : (\n                <div style={{\n                  display: 'grid',\n                  gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\n                  gap: 24,\n                }}>\n                  {/* Render book projects as grouped cards */}\n                  {filteredBooks.map((book) => (\n                    <BookProjectCard\n                      key={`book-${book.id}`}\n                      book={book}\n                      expanded={expandedBooks.has(book.id)}\n                      onToggleExpand={() => {\n                        setExpandedBooks(prev => {\n                          const newSet = new Set(prev);\n                          if (newSet.has(book.id)) {\n                            newSet.delete(book.id);\n                          } else {\n                            newSet.add(book.id);\n                          }\n                          return newSet;\n                        });\n                      }}\n                      onViewChapter={(contentId) => openReader(contentId)}\n                      onEditBook={() => navigate(`/studio?editBookProject=${book.id}`)}\n                    />\n                  ))}\n                  {/* Render non-book content */}\n                  {filteredInventory.map((item) => (\n                    <ContentCard\n                      key={item.id}\n                      item={item}\n                      onView={() => openReader(item.id)}\n                      onEdit={() => navigate(`/studio?editContent=${item.id}`)}\n                      onManage={() => {\n                        setManageItem(item);\n                        setShowManageModal(true);\n                      }}\n                    />\n                  ))}\n                </div>\n              );\n            })()\n          )}\n        </div>\n      )}\n\n      {activeTab === 'collaborations' && (\n        <div>\n          {/* Loading state */}\n          {collaborationsLoading && (\n            <div style={{ textAlign: 'center', padding: 40, color: '#94a3b8' }}>\n              Loading collaborations...\n            </div>\n          )}\n\n          {/* Active Collaborations Section - includes both pending invites and active projects */}\n          {!collaborationsLoading && (pendingInvites.length > 0 || collaborations.length > 0) && (\n            <div style={{ marginBottom: 24 }}>\n              <h3 style={{ fontSize: 16, fontWeight: 700, color: '#e2e8f0', marginBottom: 16 }}>\n                Active Collaborations ({pendingInvites.length + collaborations.length})\n              </h3>\n              <div style={{ display: 'grid', gap: 12 }}>\n                {/* Pending Invites - shown first with invite status */}\n                {pendingInvites.map(({ project, invite }) => {\n                  const isProcessing = processingInvites.has(project.id);\n                  return (\n                    <div\n                      key={`invite-${project.id}`}\n                      style={{\n                        background: '#1e293b',\n                        border: '1px solid #f59e0b40',\n                        borderRadius: 12,\n                        padding: 16,\n                        cursor: 'pointer',\n                        opacity: isProcessing ? 0.7 : 1,\n                        transition: 'all 0.2s',\n                      }}\n                      onClick={() => !isProcessing && setSelectedInviteProjectId(project.id)}\n                    >\n                      <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                        <div style={{\n                          width: 40,\n                          height: 40,\n                          borderRadius: 8,\n                          background: '#f59e0b20',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                          color: '#f59e0b',\n                          flexShrink: 0,\n                        }}>\n                          {getContentTypeIcon(project.content_type, 20)}\n                        </div>\n                        <div style={{ flex: 1, minWidth: 0 }}>\n                          <div style={{ fontWeight: 600, color: '#f8fafc', marginBottom: 2 }}>{project.title}</div>\n                          <div style={{ fontSize: 13, color: '#94a3b8' }}>\n                            {project.total_collaborators} collaborator{project.total_collaborators !== 1 ? 's' : ''}  {invite.revenue_percentage}% revenue\n                          </div>\n                        </div>\n                        {/* Action buttons */}\n                        <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                          <button\n                            onClick={(e) => handleAcceptInvite(project.id, e)}\n                            disabled={isProcessing}\n                            style={{\n                              background: '#10b981',\n                              color: '#fff',\n                              border: 'none',\n                              padding: '8px 12px',\n                              borderRadius: 6,\n                              fontWeight: 600,\n                              cursor: isProcessing ? 'not-allowed' : 'pointer',\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 4,\n                              fontSize: 13,\n                              transition: 'all 0.2s',\n                            }}\n                            title=\"Accept invitation\"\n                          >\n                            <Check size={16} />\n                            {isProcessing ? '...' : 'Accept'}\n                          </button>\n                          <button\n                            onClick={(e) => handleDeclineInvite(project.id, e)}\n                            disabled={isProcessing}\n                            style={{\n                              background: 'transparent',\n                              color: '#ef4444',\n                              border: '1px solid #ef4444',\n                              padding: '8px 12px',\n                              borderRadius: 6,\n                              fontWeight: 600,\n                              cursor: isProcessing ? 'not-allowed' : 'pointer',\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 4,\n                              fontSize: 13,\n                              transition: 'all 0.2s',\n                            }}\n                            title=\"Decline invitation\"\n                          >\n                            <XCircle size={16} />\n                            Deny\n                          </button>\n                          <div style={{\n                            background: '#f59e0b20',\n                            color: '#f59e0b',\n                            padding: '4px 12px',\n                            borderRadius: 12,\n                            fontSize: 12,\n                            fontWeight: 600,\n                            marginLeft: 4,\n                          }}>\n                            Invite\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n\n                {/* Active Collaborations */}\n                {collaborations.map((project: any) => (\n                  <div\n                    key={`collab-${project.id}`}\n                    style={{\n                      background: '#1e293b',\n                      border: '1px solid #334155',\n                      borderRadius: 12,\n                      padding: 16,\n                      cursor: 'pointer',\n                      transition: 'all 0.2s',\n                    }}\n                    onClick={() => navigate(`/collaborations/${project.id}`)}\n                  >\n                    <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                      <div style={{\n                        width: 40,\n                        height: 40,\n                        borderRadius: 8,\n                        background: project.status === 'active' ? '#10b98120' : '#64748b20',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        color: project.status === 'active' ? '#10b981' : '#94a3b8',\n                        flexShrink: 0,\n                      }}>\n                        {getContentTypeIcon(project.content_type, 20)}\n                      </div>\n                      <div style={{ flex: 1, minWidth: 0 }}>\n                        <div style={{ fontWeight: 600, color: '#f8fafc', marginBottom: 2 }}>{project.title}</div>\n                        <div style={{ fontSize: 13, color: '#94a3b8' }}>\n                          {project.total_collaborators} collaborator{project.total_collaborators !== 1 ? 's' : ''}  {project.status}\n                        </div>\n                      </div>\n                      <div style={{\n                        background: project.status === 'active' ? '#10b98120' : '#64748b20',\n                        color: project.status === 'active' ? '#10b981' : '#94a3b8',\n                        padding: '4px 12px',\n                        borderRadius: 12,\n                        fontSize: 12,\n                        fontWeight: 600,\n                        textTransform: 'capitalize',\n                      }}>\n                        {project.status === 'active' ? 'Active' : project.status}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Empty State - only show if no invites and no collaborations */}\n          {!collaborationsLoading && pendingInvites.length === 0 && collaborations.length === 0 && (\n            <EmptyState\n              icon={<Users size={64} />}\n              title=\"No collaborations yet\"\n              description=\"Find collaborators to work on projects together\"\n              actionLabel=\"Find Collaborators\"\n              onAction={() => navigate('/collaborators')}\n            />\n          )}\n\n          {/* Find Collaborators button - always show if there are collaborations */}\n          {!collaborationsLoading && (pendingInvites.length > 0 || collaborations.length > 0) && (\n            <div style={{ textAlign: 'center', marginTop: 24 }}>\n              <button\n                onClick={() => navigate('/collaborators')}\n                style={{\n                  background: 'transparent',\n                  border: '1px solid #334155',\n                  color: '#94a3b8',\n                  padding: '10px 24px',\n                  borderRadius: 8,\n                  cursor: 'pointer',\n                  fontWeight: 600,\n                }}\n              >\n                Find More Collaborators\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* External Portfolio Tab */}\n      {activeTab === 'portfolio' && (\n        <div>\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 24 }}>\n            <div>\n              <h3 style={{ color: '#f8fafc', fontSize: 18, fontWeight: 700, margin: 0 }}>External Portfolio</h3>\n              <p style={{ color: '#94a3b8', fontSize: 14, margin: '4px 0 0' }}>\n                Showcase your past work and external projects on your public profile\n              </p>\n            </div>\n            <button\n              onClick={() => { setEditingPortfolioItem(null); setPortfolioModalOpen(true); }}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 6,\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                color: '#000',\n                border: 'none',\n                padding: '10px 18px',\n                borderRadius: 8,\n                fontWeight: 600,\n                fontSize: 14,\n                cursor: 'pointer',\n              }}\n            >\n              <Plus size={18} />\n              Add Project\n            </button>\n          </div>\n\n          {externalPortfolio.length === 0 ? (\n            <EmptyState\n              icon={<Briefcase size={64} />}\n              title=\"No portfolio items yet\"\n              description=\"Add your past work, side projects, or external collaborations to showcase on your public profile\"\n              actionLabel=\"+ Add Your First Project\"\n              onAction={() => { setEditingPortfolioItem(null); setPortfolioModalOpen(true); }}\n            />\n          ) : (\n            <div style={{\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\n              gap: 20,\n            }}>\n              {externalPortfolio.map(item => (\n                <div key={item.id} style={{\n                  background: '#0f172a',\n                  border: '1px solid #1e293b',\n                  borderRadius: 16,\n                  overflow: 'hidden',\n                  transition: 'all 0.2s',\n                }}\n                onMouseEnter={(e) => {\n                  e.currentTarget.style.transform = 'translateY(-4px)';\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.25)';\n                  e.currentTarget.style.borderColor = '#334155';\n                }}\n                onMouseLeave={(e) => {\n                  e.currentTarget.style.transform = 'translateY(0)';\n                  e.currentTarget.style.boxShadow = 'none';\n                  e.currentTarget.style.borderColor = '#1e293b';\n                }}\n                >\n                  {/* Cover Image */}\n                  <div style={{\n                    width: '100%',\n                    paddingTop: '56.25%',\n                    background: item.image_url\n                      ? `url(${item.image_url}) center/cover`\n                      : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                    position: 'relative',\n                  }}>\n                    {!item.image_url && (\n                      <div style={{\n                        position: 'absolute',\n                        inset: 0,\n                        display: 'grid',\n                        placeItems: 'center',\n                        color: 'rgba(255,255,255,0.3)',\n                        fontSize: 48,\n                        fontWeight: 700,\n                      }}>\n                        {item.project_type?.charAt(0).toUpperCase() || 'P'}\n                      </div>\n                    )}\n                    {/* Project Type Badge */}\n                    <div style={{\n                      position: 'absolute',\n                      top: 12,\n                      left: 12,\n                      background: '#f59e0b',\n                      color: '#000',\n                      padding: '4px 10px',\n                      borderRadius: 6,\n                      fontSize: 11,\n                      fontWeight: 700,\n                      textTransform: 'uppercase',\n                    }}>\n                      {item.project_type || 'Project'}\n                    </div>\n                  </div>\n\n                  {/* Card Content */}\n                  <div style={{ padding: 16 }}>\n                    <div style={{\n                      fontSize: 16,\n                      fontWeight: 600,\n                      color: '#f8fafc',\n                      marginBottom: 4,\n                    }}>\n                      {item.title}\n                    </div>\n                    {item.role && (\n                      <div style={{\n                        fontSize: 13,\n                        color: '#f59e0b',\n                        marginBottom: 8,\n                      }}>\n                        {item.role}\n                      </div>\n                    )}\n                    {item.description && (\n                      <div style={{\n                        fontSize: 13,\n                        color: '#94a3b8',\n                        marginBottom: 12,\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                        display: '-webkit-box',\n                        WebkitLineClamp: 2,\n                        WebkitBoxOrient: 'vertical',\n                      }}>\n                        {item.description}\n                      </div>\n                    )}\n\n                    {/* Action Buttons */}\n                    <div style={{ display: 'flex', gap: 8 }}>\n                      {item.external_url && (\n                        <a\n                          href={item.external_url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          style={{\n                            flex: 1,\n                            background: 'rgba(59,130,246,0.15)',\n                            border: '1px solid rgba(59,130,246,0.3)',\n                            color: '#60a5fa',\n                            padding: '8px 16px',\n                            borderRadius: 8,\n                            fontSize: 13,\n                            fontWeight: 600,\n                            cursor: 'pointer',\n                            textDecoration: 'none',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            gap: 6,\n                          }}\n                        >\n                          <ExternalLink size={14} />\n                          View\n                        </a>\n                      )}\n                      <button\n                        onClick={() => { setEditingPortfolioItem(item); setPortfolioModalOpen(true); }}\n                        style={{\n                          background: 'transparent',\n                          border: '1px solid #334155',\n                          color: '#cbd5e1',\n                          padding: '8px 12px',\n                          borderRadius: 8,\n                          cursor: 'pointer',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                        }}\n                      >\n                        <Edit2 size={14} />\n                      </button>\n                      <button\n                        onClick={() => deletePortfolioItem(item.id)}\n                        style={{\n                          background: 'transparent',\n                          border: '1px solid rgba(239,68,68,0.3)',\n                          color: '#ef4444',\n                          padding: '8px 12px',\n                          borderRadius: 8,\n                          cursor: 'pointer',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                        }}\n                      >\n                        <Trash2 size={14} />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {activeTab === 'analytics' && (\n        <div>\n          {/* Sales Overview Card */}\n          <div style={{\n            background: '#0f172a',\n            border: '1px solid #1e293b',\n            borderRadius: 16,\n            padding: 24,\n            marginBottom: 24,\n          }}>\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              marginBottom: 20,\n            }}>\n              <h3 style={{\n                fontSize: 18,\n                fontWeight: 700,\n                color: '#f8fafc',\n                display: 'flex',\n                alignItems: 'center',\n                gap: 10,\n              }}>\n                <DollarSign size={20} style={{ color: '#10b981' }} />\n                Sales Overview\n              </h3>\n              <Link\n                to=\"/payout-settings\"\n                style={{\n                  display: 'inline-flex',\n                  alignItems: 'center',\n                  gap: 6,\n                  padding: '8px 16px',\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  color: '#94a3b8',\n                  fontSize: 14,\n                  textDecoration: 'none',\n                  transition: 'all 0.2s',\n                }}\n                onMouseEnter={(e) => {\n                  e.currentTarget.style.background = '#334155';\n                  e.currentTarget.style.color = '#f8fafc';\n                }}\n                onMouseLeave={(e) => {\n                  e.currentTarget.style.background = '#1e293b';\n                  e.currentTarget.style.color = '#94a3b8';\n                }}\n              >\n                <Settings size={16} />\n                Payout Settings\n              </Link>\n            </div>\n\n            <div style={{\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(180px, 1fr))',\n              gap: 16,\n            }}>\n              <div style={{ background: '#1e293b', borderRadius: 12, padding: 20 }}>\n                <div style={{ fontSize: 12, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                  Total Earnings\n                </div>\n                <div style={{ fontSize: 28, fontWeight: 700, color: '#10b981' }}>\n                  ${salesAnalytics?.summary.total_earnings_usdc.toFixed(2) || dash.sales.toFixed(2)}\n                </div>\n                <div style={{ fontSize: 11, color: '#64748b', marginTop: 4 }}>USDC</div>\n              </div>\n\n              <div style={{ background: '#1e293b', borderRadius: 12, padding: 20 }}>\n                <div style={{ fontSize: 12, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                  Solo Content\n                </div>\n                <div style={{ fontSize: 28, fontWeight: 700, color: '#60a5fa' }}>\n                  ${salesAnalytics?.summary.solo_earnings.toFixed(2) || '0.00'}\n                </div>\n                <div style={{ fontSize: 11, color: '#64748b', marginTop: 4 }}>{salesAnalytics?.summary.content_count || 0} items</div>\n              </div>\n\n              <div style={{ background: '#1e293b', borderRadius: 12, padding: 20 }}>\n                <div style={{ fontSize: 12, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                  Collaborations\n                </div>\n                <div style={{ fontSize: 28, fontWeight: 700, color: '#f59e0b' }}>\n                  ${salesAnalytics?.summary.collaboration_earnings.toFixed(2) || '0.00'}\n                </div>\n                <div style={{ fontSize: 11, color: '#64748b', marginTop: 4 }}>{salesAnalytics?.summary.collaboration_count || 0} projects</div>\n              </div>\n\n              <div style={{ background: '#1e293b', borderRadius: 12, padding: 20 }}>\n                <div style={{ fontSize: 12, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                  Total Sales\n                </div>\n                <div style={{ fontSize: 28, fontWeight: 700, color: '#f8fafc' }}>\n                  {salesAnalytics?.summary.total_sales || 0}\n                </div>\n                <div style={{ fontSize: 11, color: '#64748b', marginTop: 4 }}>transactions</div>\n              </div>\n            </div>\n          </div>\n\n          {/* Bridge Onboarding Banner */}\n          <BridgeOnboardingBanner className=\"mb-6\" />\n\n          {/* Content Performance - Expandable Cards */}\n          {salesAnalytics && (salesAnalytics.content_sales.length > 0 || salesAnalytics.collaboration_sales.length > 0) && (\n            <div style={{\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n              padding: 24,\n              marginBottom: 24,\n            }}>\n              <h3 style={{ fontSize: 16, fontWeight: 700, color: '#f8fafc', marginBottom: 16, display: 'flex', alignItems: 'center', gap: 8 }}>\n                <TrendingUp size={18} style={{ color: '#60a5fa' }} />\n                Earnings Breakdown\n              </h3>\n              <p style={{ fontSize: 12, color: '#64748b', marginBottom: 16 }}>\n                Click any item to see individual transactions\n              </p>\n\n              {/* Solo Content Sales */}\n              {salesAnalytics.content_sales.length > 0 && (\n                <div style={{ marginBottom: 20 }}>\n                  <div style={{ fontSize: 13, color: '#60a5fa', marginBottom: 12, fontWeight: 600, display: 'flex', alignItems: 'center', gap: 6 }}>\n                    <BookOpen size={14} />\n                    Solo Content ({salesAnalytics.content_sales.length})\n                  </div>\n                  {salesAnalytics.content_sales.map((item) => {\n                    const isExpanded = expandedAnalyticsCards.has(item.id);\n                    return (\n                      <div key={item.id} style={{ marginBottom: 8 }}>\n                        <div\n                          onClick={() => toggleAnalyticsCard(item.id)}\n                          style={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            alignItems: 'center',\n                            padding: '12px 16px',\n                            background: '#1e293b',\n                            borderRadius: isExpanded ? '8px 8px 0 0' : 8,\n                            cursor: 'pointer',\n                            transition: 'background 0.2s',\n                          }}\n                          onMouseEnter={e => (e.currentTarget.style.background = '#334155')}\n                          onMouseLeave={e => (e.currentTarget.style.background = '#1e293b')}\n                        >\n                          <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                            {getContentTypeIcon(item.content_type, 18)}\n                            <div>\n                              <div style={{ fontSize: 14, fontWeight: 600, color: '#f8fafc' }}>{item.title}</div>\n                              <div style={{ fontSize: 12, color: '#64748b' }}>\n                                {item.sales_count} sale{item.sales_count !== 1 ? 's' : ''}  {item.role}  ${item.price.toFixed(2)} price\n                              </div>\n                            </div>\n                          </div>\n                          <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                            <div style={{ textAlign: 'right' }}>\n                              <div style={{ fontSize: 16, fontWeight: 700, color: '#10b981' }}>${item.total_earnings.toFixed(2)}</div>\n                              <div style={{ fontSize: 11, color: '#64748b' }}>{item.percentage}% split</div>\n                            </div>\n                            {isExpanded ? <ChevronUp size={18} color=\"#64748b\" /> : <ChevronDown size={18} color=\"#64748b\" />}\n                          </div>\n                        </div>\n                        {/* Expanded transaction list */}\n                        {isExpanded && item.transactions && item.transactions.length > 0 && (\n                          <div style={{\n                            background: '#0f172a',\n                            border: '1px solid #334155',\n                            borderTop: 'none',\n                            borderRadius: '0 0 8px 8px',\n                            padding: '12px 16px',\n                          }}>\n                            <div style={{ fontSize: 11, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                              Transaction History\n                            </div>\n                            {item.transactions.map((tx, idx) => (\n                              <div key={tx.id || idx} style={{\n                                display: 'flex',\n                                justifyContent: 'space-between',\n                                alignItems: 'center',\n                                padding: '8px 0',\n                                borderBottom: idx < item.transactions.length - 1 ? '1px solid #1e293b' : 'none',\n                              }}>\n                                <div>\n                                  <div style={{ fontSize: 13, color: '#f8fafc' }}>\n                                    Purchased by <span style={{ color: '#60a5fa' }}>@{tx.buyer}</span>\n                                  </div>\n                                  <div style={{ fontSize: 11, color: '#64748b', display: 'flex', alignItems: 'center', gap: 4 }}>\n                                    <Clock size={10} />\n                                    {new Date(tx.date).toLocaleDateString()} {new Date(tx.date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                  </div>\n                                  {tx.tx_signature && (\n                                    <div style={{ fontSize: 10, color: '#475569', fontFamily: 'monospace' }}>TX: {tx.tx_signature}</div>\n                                  )}\n                                </div>\n                                <div style={{ fontSize: 14, fontWeight: 600, color: '#10b981' }}>+${tx.amount.toFixed(2)}</div>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n\n              {/* Collaboration Sales */}\n              {salesAnalytics.collaboration_sales.length > 0 && (\n                <div>\n                  <div style={{ fontSize: 13, color: '#f59e0b', marginBottom: 12, fontWeight: 600, display: 'flex', alignItems: 'center', gap: 6 }}>\n                    <Users size={14} />\n                    Collaborations ({salesAnalytics.collaboration_sales.length})\n                  </div>\n                  {salesAnalytics.collaboration_sales.map((item) => {\n                    const isExpanded = expandedAnalyticsCards.has(item.id);\n                    return (\n                      <div key={item.id} style={{ marginBottom: 8 }}>\n                        <div\n                          onClick={() => toggleAnalyticsCard(item.id)}\n                          style={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            alignItems: 'center',\n                            padding: '12px 16px',\n                            background: '#1e293b',\n                            borderRadius: isExpanded ? '8px 8px 0 0' : 8,\n                            borderLeft: '3px solid #f59e0b',\n                            cursor: 'pointer',\n                            transition: 'background 0.2s',\n                          }}\n                          onMouseEnter={e => (e.currentTarget.style.background = '#334155')}\n                          onMouseLeave={e => (e.currentTarget.style.background = '#1e293b')}\n                        >\n                          <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                            {getContentTypeIcon(item.content_type, 18)}\n                            <div>\n                              <div style={{ fontSize: 14, fontWeight: 600, color: '#f8fafc' }}>{item.title}</div>\n                              <div style={{ fontSize: 12, color: '#64748b' }}>\n                                {item.role}  {item.percentage}% split  {item.sales_count} sale{item.sales_count !== 1 ? 's' : ''}\n                              </div>\n                            </div>\n                          </div>\n                          <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                            <div style={{ textAlign: 'right' }}>\n                              <div style={{ fontSize: 16, fontWeight: 700, color: '#f59e0b' }}>${item.total_earnings.toFixed(2)}</div>\n                              <div style={{ fontSize: 11, color: '#64748b' }}>your share</div>\n                            </div>\n                            {isExpanded ? <ChevronUp size={18} color=\"#64748b\" /> : <ChevronDown size={18} color=\"#64748b\" />}\n                          </div>\n                        </div>\n                        {/* Expanded transaction list */}\n                        {isExpanded && item.transactions && item.transactions.length > 0 && (\n                          <div style={{\n                            background: '#0f172a',\n                            border: '1px solid #334155',\n                            borderTop: 'none',\n                            borderRadius: '0 0 8px 8px',\n                            padding: '12px 16px',\n                          }}>\n                            <div style={{ fontSize: 11, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                              Transaction History\n                            </div>\n                            {item.transactions.map((tx, idx) => (\n                              <div key={tx.id || idx} style={{\n                                display: 'flex',\n                                justifyContent: 'space-between',\n                                alignItems: 'center',\n                                padding: '8px 0',\n                                borderBottom: idx < item.transactions.length - 1 ? '1px solid #1e293b' : 'none',\n                              }}>\n                                <div>\n                                  <div style={{ fontSize: 13, color: '#f8fafc' }}>\n                                    Purchased by <span style={{ color: '#60a5fa' }}>@{tx.buyer}</span>\n                                  </div>\n                                  <div style={{ fontSize: 11, color: '#64748b', display: 'flex', alignItems: 'center', gap: 4 }}>\n                                    <Clock size={10} />\n                                    {new Date(tx.date).toLocaleDateString()} {new Date(tx.date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                  </div>\n                                  {tx.tx_signature && (\n                                    <div style={{ fontSize: 10, color: '#475569', fontFamily: 'monospace' }}>TX: {tx.tx_signature}</div>\n                                  )}\n                                </div>\n                                <div style={{ fontSize: 14, fontWeight: 600, color: '#f59e0b' }}>+${tx.amount.toFixed(2)}</div>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Recent Transactions */}\n          {salesAnalytics && salesAnalytics.recent_transactions.length > 0 && (\n            <div style={{\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n              padding: 24,\n            }}>\n              <h3 style={{ fontSize: 16, fontWeight: 700, color: '#f8fafc', marginBottom: 16, display: 'flex', alignItems: 'center', gap: 8 }}>\n                <FileText size={18} style={{ color: '#a78bfa' }} />\n                Recent Transactions\n              </h3>\n              <div style={{ display: 'flex', flexDirection: 'column', gap: 8 }}>\n                {salesAnalytics.recent_transactions.map((tx) => (\n                  <div key={tx.id} style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    padding: '12px 16px',\n                    background: '#1e293b',\n                    borderRadius: 8,\n                  }}>\n                    <div>\n                      <div style={{ fontSize: 14, fontWeight: 600, color: '#f8fafc' }}>{tx.title}</div>\n                      <div style={{ fontSize: 12, color: '#64748b' }}>\n                        Bought by @{tx.buyer}  {tx.role} ({tx.percentage}%)  {new Date(tx.date).toLocaleDateString()}\n                      </div>\n                      {tx.tx_signature && (\n                        <div style={{ fontSize: 11, color: '#475569', fontFamily: 'monospace' }}>TX: {tx.tx_signature}</div>\n                      )}\n                    </div>\n                    <div style={{\n                      fontSize: 16,\n                      fontWeight: 700,\n                      color: tx.type === 'collaboration' ? '#f59e0b' : '#10b981',\n                    }}>\n                      +${tx.amount.toFixed(2)}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* No Sales Yet Notice */}\n          {(!salesAnalytics || salesAnalytics.summary.total_sales === 0) && !analyticsLoading && (\n            <div style={{\n              textAlign: 'center',\n              padding: '40px 24px',\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n            }}>\n              <BarChart3 size={48} style={{ color: '#475569', marginBottom: 16 }} />\n              <div style={{ fontSize: 16, fontWeight: 600, color: '#94a3b8', marginBottom: 8 }}>\n                No sales yet\n              </div>\n              <div style={{ fontSize: 14, color: '#64748b' }}>\n                Once you start making sales, you'll see detailed breakdowns here\n              </div>\n            </div>\n          )}\n\n          {/* Loading State */}\n          {analyticsLoading && (\n            <div style={{\n              textAlign: 'center',\n              padding: '40px 24px',\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n            }}>\n              <div style={{ fontSize: 14, color: '#94a3b8' }}>Loading analytics...</div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Following Tab */}\n      {activeTab === 'following' && (\n        <div>\n          {followingLoading ? (\n            <div style={{\n              textAlign: 'center',\n              padding: '40px 24px',\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n            }}>\n              <Loader2 size={32} style={{ color: '#f59e0b', animation: 'spin 1s linear infinite' }} />\n              <div style={{ fontSize: 14, color: '#94a3b8', marginTop: 12 }}>Loading following...</div>\n            </div>\n          ) : followingList.length === 0 ? (\n            <div style={{\n              textAlign: 'center',\n              padding: '40px 24px',\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n            }}>\n              <UserCheck size={48} style={{ color: '#475569', marginBottom: 16 }} />\n              <div style={{ fontSize: 16, fontWeight: 600, color: '#94a3b8', marginBottom: 8 }}>\n                Not following anyone yet\n              </div>\n              <div style={{ fontSize: 14, color: '#64748b' }}>\n                Explore creators and follow them to see their latest work in your feed\n              </div>\n              <Link\n                to=\"/collaborators\"\n                style={{\n                  display: 'inline-block',\n                  marginTop: 16,\n                  padding: '10px 20px',\n                  background: '#f59e0b',\n                  color: '#111',\n                  borderRadius: 8,\n                  fontWeight: 600,\n                  textDecoration: 'none',\n                }}\n              >\n                Discover Creators\n              </Link>\n            </div>\n          ) : (\n            <div style={{\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n              overflow: 'hidden',\n            }}>\n              <div style={{\n                padding: '16px 20px',\n                borderBottom: '1px solid #1e293b',\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n              }}>\n                <h3 style={{ fontSize: 16, fontWeight: 700, color: '#f8fafc', margin: 0 }}>\n                  Following ({followingList.length})\n                </h3>\n              </div>\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                {followingList.map((user, index) => (\n                  <div\n                    key={user.id}\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between',\n                      padding: '16px 20px',\n                      borderBottom: index < followingList.length - 1 ? '1px solid #1e293b' : 'none',\n                      transition: 'background 0.2s',\n                    }}\n                    onMouseEnter={(e) => (e.currentTarget.style.background = '#1e293b')}\n                    onMouseLeave={(e) => (e.currentTarget.style.background = 'transparent')}\n                  >\n                    <Link\n                      to={`/profile/${user.username}`}\n                      style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: 12,\n                        textDecoration: 'none',\n                        flex: 1,\n                      }}\n                    >\n                      <div style={{\n                        width: 48,\n                        height: 48,\n                        borderRadius: '50%',\n                        background: user.avatar ? `url(${user.avatar}) center/cover` : '#374151',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        fontSize: 18,\n                        fontWeight: 700,\n                        color: '#f59e0b',\n                        flexShrink: 0,\n                      }}>\n                        {!user.avatar && (user.username || '?').slice(0, 1).toUpperCase()}\n                      </div>\n                      <div>\n                        <div style={{ fontSize: 15, fontWeight: 600, color: '#f8fafc' }}>\n                          {user.display_name || user.username}\n                        </div>\n                        <div style={{ fontSize: 13, color: '#64748b' }}>\n                          @{user.username}\n                        </div>\n                        {user.bio && (\n                          <div style={{ fontSize: 12, color: '#94a3b8', marginTop: 4, maxWidth: 400 }}>\n                            {user.bio.length > 80 ? user.bio.slice(0, 80) + '...' : user.bio}\n                          </div>\n                        )}\n                      </div>\n                    </Link>\n                    <button\n                      onClick={() => handleUnfollow(user.username, user.id)}\n                      disabled={unfollowingUsers.has(user.id)}\n                      style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: 6,\n                        padding: '8px 16px',\n                        background: 'transparent',\n                        border: '1px solid #334155',\n                        borderRadius: 8,\n                        color: '#94a3b8',\n                        fontSize: 13,\n                        fontWeight: 600,\n                        cursor: unfollowingUsers.has(user.id) ? 'not-allowed' : 'pointer',\n                        opacity: unfollowingUsers.has(user.id) ? 0.5 : 1,\n                        transition: 'all 0.2s',\n                      }}\n                      onMouseEnter={(e) => {\n                        if (!unfollowingUsers.has(user.id)) {\n                          e.currentTarget.style.borderColor = '#ef4444';\n                          e.currentTarget.style.color = '#ef4444';\n                        }\n                      }}\n                      onMouseLeave={(e) => {\n                        e.currentTarget.style.borderColor = '#334155';\n                        e.currentTarget.style.color = '#94a3b8';\n                      }}\n                    >\n                      {unfollowingUsers.has(user.id) ? (\n                        <Loader2 size={14} style={{ animation: 'spin 1s linear infinite' }} />\n                      ) : (\n                        <UserCheck size={14} />\n                      )}\n                      {unfollowingUsers.has(user.id) ? 'Unfollowing...' : 'Following'}\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Wallet Modal */}\n      {showWalletModal && (\n        <div style={{\n          position: 'fixed',\n          inset: 0,\n          background: 'rgba(0,0,0,0.75)',\n          backdropFilter: 'blur(4px)',\n          display: 'grid',\n          placeItems: 'center',\n          zIndex: 2000,\n        }} onClick={() => setShowWalletModal(false)}>\n          <div onClick={(e) => e.stopPropagation()} style={{ width: '90%', maxWidth: 600 }}>\n            <WalletManagementPanel\n              walletAddress={profile?.wallet_address || null}\n              walletProvider={profile?.wallet_provider || null}\n              onWalletUpdate={async () => {\n                setShowWalletModal(false);\n                const profileResp = await fetch(`${API_URL}/api/users/profile/`, { credentials: 'include' });\n                if (profileResp.ok) setProfile(await profileResp.json());\n              }}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Preview Modal */}\n      {showPreview && previewItem && (\n        <PreviewModal\n          open={showPreview}\n          onClose={() => setShowPreview(false)}\n          teaserUrl={previewItem.teaser_link}\n          contentType={previewItem.content_type}\n          contentId={previewItem.id}\n          price={previewItem.price_usd}\n          editions={previewItem.editions}\n        />\n      )}\n\n      {/* Invite Response Modal */}\n      {selectedInviteProjectId && (\n        <InviteResponseModal\n          open={true}\n          onClose={() => {\n            setSelectedInviteProjectId(null);\n            loadPendingInvites(); // Refresh after closing\n          }}\n          projectId={selectedInviteProjectId}\n        />\n      )}\n\n      {/* Portfolio Item Modal */}\n      {portfolioModalOpen && (\n        <PortfolioItemModal\n          item={editingPortfolioItem}\n          onClose={() => { setPortfolioModalOpen(false); setEditingPortfolioItem(null); }}\n          onSave={savePortfolioItem}\n        />\n      )}\n\n      {/* Art Manage Modal */}\n      {showManageModal && manageItem && (\n        <ArtManageModal\n          isOpen={showManageModal}\n          onClose={() => {\n            setShowManageModal(false);\n            setManageItem(null);\n          }}\n          item={manageItem}\n          onUnpublished={() => {\n            // Refresh inventory after unpublishing\n            fetch(`${API_URL}/api/content/?mine=1`, { credentials: 'include' })\n              .then(res => res.json())\n              .then(items => {\n                setInventory(items.filter((item: any) => item.content_type !== 'book' || item.is_collaborative));\n              })\n              .catch(() => {});\n          }}\n        />\n      )}\n\n      {/* Status Message */}\n      {status && (\n        <div style={{\n          position: 'fixed',\n          bottom: 24,\n          right: 24,\n          background: '#10b981',\n          color: '#fff',\n          padding: '12px 20px',\n          borderRadius: 8,\n          fontSize: 14,\n          fontWeight: 600,\n          boxShadow: '0 4px 16px rgba(0,0,0,0.3)',\n          zIndex: 1000,\n        }}>\n          {status}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Tab Component\nfunction Tab({ icon, label, count, active, onClick }: { icon: React.ReactNode; label: string; count?: number; active: boolean; onClick: () => void }) {\n  return (\n    <button\n      onClick={onClick}\n      style={{\n        background: 'transparent',\n        border: 'none',\n        borderBottom: active ? '2px solid #f59e0b' : '2px solid transparent',\n        color: active ? '#f59e0b' : '#94a3b8',\n        padding: '12px 20px',\n        fontSize: 15,\n        fontWeight: 600,\n        cursor: 'pointer',\n        transition: 'all 0.2s',\n        display: 'flex',\n        alignItems: 'center',\n        gap: 8,\n      }}\n      onMouseEnter={(e) => {\n        if (!active) {\n          e.currentTarget.style.color = '#cbd5e1';\n        }\n      }}\n      onMouseLeave={(e) => {\n        if (!active) {\n          e.currentTarget.style.color = '#94a3b8';\n        }\n      }}\n    >\n      {icon}\n      <span>{label}</span>\n      {count !== undefined && count > 0 && (\n        <span style={{\n          background: active ? '#f59e0b' : '#334155',\n          color: active ? '#000' : '#94a3b8',\n          padding: '2px 8px',\n          borderRadius: 10,\n          fontSize: 12,\n          fontWeight: 700,\n          marginLeft: 4,\n        }}>\n          {count}\n        </span>\n      )}\n    </button>\n  );\n}\n\n// Filter Chip Component\nfunction FilterChip({ label, count, active, onClick }: { label: string; count: number; active: boolean; onClick: () => void }) {\n  if (count === 0 && !active && label !== 'All') return null;\n\n  return (\n    <button\n      onClick={onClick}\n      style={{\n        background: active ? '#f59e0b' : '#1e293b',\n        border: active ? 'none' : '1px solid #334155',\n        color: active ? '#000' : '#94a3b8',\n        padding: '6px 14px',\n        borderRadius: 20,\n        fontSize: 13,\n        fontWeight: 600,\n        cursor: 'pointer',\n        transition: 'all 0.2s',\n        display: 'flex',\n        alignItems: 'center',\n        gap: 6,\n      }}\n      onMouseEnter={(e) => {\n        if (!active) {\n          e.currentTarget.style.borderColor = '#475569';\n          e.currentTarget.style.color = '#e2e8f0';\n        }\n      }}\n      onMouseLeave={(e) => {\n        if (!active) {\n          e.currentTarget.style.borderColor = '#334155';\n          e.currentTarget.style.color = '#94a3b8';\n        }\n      }}\n    >\n      {label}\n      <span style={{\n        background: active ? 'rgba(0,0,0,0.2)' : '#334155',\n        padding: '1px 6px',\n        borderRadius: 8,\n        fontSize: 11,\n      }}>\n        {count}\n      </span>\n    </button>\n  );\n}\n\n// Book Project Card Component - displays a book with its chapters grouped\nfunction BookProjectCard({\n  book,\n  expanded,\n  onToggleExpand,\n  onViewChapter,\n  onEditBook,\n}: {\n  book: BookProject;\n  expanded: boolean;\n  onToggleExpand: () => void;\n  onViewChapter: (contentId: number) => void;\n  onEditBook: () => void;\n}) {\n  const hasPublishedChapters = book.published_chapters > 0;\n  const firstPublishedChapter = book.chapters.find(ch => ch.is_published && ch.content_id);\n\n  return (\n    <div style={{\n      background: '#0f172a',\n      border: '1px solid #1e293b',\n      borderRadius: 16,\n      overflow: 'hidden',\n      transition: 'all 0.2s',\n      position: 'relative',\n    }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.transform = 'translateY(-4px)';\n        e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.25)';\n        e.currentTarget.style.borderColor = '#334155';\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.transform = 'translateY(0)';\n        e.currentTarget.style.boxShadow = 'none';\n        e.currentTarget.style.borderColor = '#1e293b';\n      }}\n    >\n      {/* Cover Image */}\n      <div\n        onClick={onToggleExpand}\n        style={{\n          width: '100%',\n          paddingTop: '56.25%', // 16:9 ratio\n          background: book.cover_image_url ? `url(${book.cover_image_url})` : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          position: 'relative',\n          cursor: 'pointer',\n          opacity: hasPublishedChapters ? 1 : 0.7,\n        }}\n      >\n        {!book.cover_image_url && (\n          <div style={{\n            position: 'absolute',\n            inset: 0,\n            display: 'grid',\n            placeItems: 'center',\n            color: 'rgba(255,255,255,0.3)',\n          }}>\n            <BookOpen size={48} />\n          </div>\n        )}\n        {/* Status badge */}\n        <div style={{\n          position: 'absolute',\n          top: 12,\n          right: 12,\n          background: hasPublishedChapters ? 'rgba(0,0,0,0.75)' : 'rgba(100, 116, 139, 0.9)',\n          color: '#f8fafc',\n          padding: '4px 10px',\n          borderRadius: hasPublishedChapters ? 12 : 6,\n          fontSize: hasPublishedChapters ? 12 : 11,\n          fontWeight: 600,\n          backdropFilter: 'blur(4px)',\n          textTransform: hasPublishedChapters ? 'none' : 'uppercase',\n          letterSpacing: hasPublishedChapters ? 'normal' : '0.5px',\n        }}>\n          {hasPublishedChapters\n            ? `${book.published_chapters} chapter${book.published_chapters !== 1 ? 's' : ''}`\n            : 'Draft'\n          }\n        </div>\n      </div>\n\n      {/* Card Content */}\n      <div style={{ padding: 16 }}>\n        <div style={{\n          fontSize: 16,\n          fontWeight: 600,\n          color: '#f8fafc',\n          marginBottom: 8,\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n          display: '-webkit-box',\n          WebkitLineClamp: 2,\n          WebkitBoxOrient: 'vertical',\n          lineHeight: 1.4,\n        }}>\n          {book.title}\n        </div>\n\n        <div style={{\n          fontSize: 13,\n          color: '#94a3b8',\n          marginBottom: 12,\n        }}>\n          {hasPublishedChapters\n            ? `book  ${book.published_chapters} of ${book.total_chapters} chapter${book.total_chapters !== 1 ? 's' : ''} published`\n            : `book  ${book.total_chapters} chapter${book.total_chapters !== 1 ? 's' : ''} (unpublished)`\n          }\n        </div>\n\n        {hasPublishedChapters && (\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 16,\n            fontSize: 13,\n            color: '#cbd5e1',\n            marginBottom: 12,\n          }}>\n            <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n              <Eye size={14} /> {book.total_views}\n            </span>\n            <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n              <DollarSign size={14} /> ${book.total_price.toFixed(2)}\n            </span>\n          </div>\n        )}\n\n        {/* Expandable chapter list */}\n        {book.total_chapters > 0 && (\n          <>\n            <button\n              onClick={onToggleExpand}\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: 'none',\n                borderRadius: 8,\n                padding: '8px 12px',\n                color: '#94a3b8',\n                fontSize: 13,\n                fontWeight: 500,\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n                marginBottom: expanded ? 8 : 12,\n              }}\n            >\n              <span>Chapters</span>\n              {expanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\n            </button>\n\n            {expanded && (\n              <div style={{\n                background: '#0d1117',\n                borderRadius: 8,\n                padding: 8,\n                marginBottom: 12,\n                maxHeight: 200,\n                overflowY: 'auto',\n              }}>\n                {book.chapters.map((chapter, index) => (\n                  <div\n                    key={chapter.id}\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between',\n                      padding: '8px 10px',\n                      borderRadius: 6,\n                      background: index % 2 === 0 ? 'transparent' : 'rgba(255,255,255,0.02)',\n                      opacity: chapter.is_published ? 1 : 0.6,\n                    }}\n                  >\n                    <div style={{ flex: 1, minWidth: 0 }}>\n                      <div style={{\n                        fontSize: 13,\n                        color: '#e2e8f0',\n                        fontWeight: 500,\n                        whiteSpace: 'nowrap',\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: 6,\n                      }}>\n                        Ch {chapter.order + 1}: {chapter.title}\n                        {!chapter.is_published && (\n                          <span style={{\n                            fontSize: 9,\n                            background: 'rgba(100, 116, 139, 0.5)',\n                            color: '#cbd5e1',\n                            padding: '2px 5px',\n                            borderRadius: 3,\n                            textTransform: 'uppercase',\n                            letterSpacing: '0.3px',\n                          }}>\n                            Draft\n                          </span>\n                        )}\n                      </div>\n                      {chapter.is_published && (\n                        <div style={{ fontSize: 11, color: '#64748b' }}>\n                          ${chapter.price_usd.toFixed(2)}  {chapter.view_count} views\n                        </div>\n                      )}\n                    </div>\n                    {chapter.is_published && chapter.content_id && (\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          onViewChapter(chapter.content_id!);\n                        }}\n                        style={{\n                          background: 'transparent',\n                          border: '1px solid #334155',\n                          borderRadius: 6,\n                          padding: '4px 10px',\n                          color: '#94a3b8',\n                          fontSize: 11,\n                          fontWeight: 500,\n                          cursor: 'pointer',\n                          marginLeft: 8,\n                          flexShrink: 0,\n                        }}\n                      >\n                        View\n                      </button>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </>\n        )}\n\n        {/* Action buttons */}\n        <div style={{ display: 'flex', gap: 8 }}>\n          <button\n            onClick={onEditBook}\n            style={{\n              flex: 1,\n              background: 'transparent',\n              border: '1px solid #334155',\n              borderRadius: 10,\n              padding: '10px 16px',\n              color: '#94a3b8',\n              fontSize: 14,\n              fontWeight: 600,\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n            }}\n          >\n            Edit\n          </button>\n          {hasPublishedChapters && firstPublishedChapter && (\n            <button\n              onClick={() => onViewChapter(firstPublishedChapter.content_id!)}\n              style={{\n                flex: 1,\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                border: 'none',\n                borderRadius: 10,\n                padding: '10px 16px',\n                color: '#000',\n                fontSize: 14,\n                fontWeight: 600,\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n              }}\n            >\n              View\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Content Card Component\nfunction ContentCard({ item, onView, onEdit, onManage }: { item: any; onView: () => void; onEdit: () => void; onManage?: () => void }) {\n  const isPublished = item.inventory_status === 'minted';\n  // Published non-book content (art, music, film) should show Manage instead of Edit\n  const isPublishedNonBook = isPublished && item.content_type !== 'book';\n\n  return (\n    <div style={{\n      background: '#0f172a',\n      border: '1px solid #1e293b',\n      borderRadius: 16,\n      overflow: 'hidden',\n      cursor: 'pointer',\n      transition: 'all 0.2s',\n      position: 'relative',\n    }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.transform = 'translateY(-4px)';\n        e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.25)';\n        e.currentTarget.style.borderColor = '#334155';\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.transform = 'translateY(0)';\n        e.currentTarget.style.boxShadow = 'none';\n        e.currentTarget.style.borderColor = '#1e293b';\n      }}\n    >\n      {/* Draft Badge */}\n      {!isPublished && (\n        <div style={{\n          position: 'absolute',\n          top: 12,\n          right: 12,\n          background: 'rgba(100, 116, 139, 0.9)',\n          color: '#f8fafc',\n          padding: '4px 10px',\n          borderRadius: 6,\n          fontSize: 11,\n          fontWeight: 600,\n          zIndex: 1,\n          textTransform: 'uppercase',\n          letterSpacing: '0.5px',\n        }}>\n          Draft\n        </div>\n      )}\n\n      {/* Cover Image */}\n      <div\n        onClick={isPublished ? onView : onEdit}\n        style={{\n          width: '100%',\n          paddingTop: '56.25%', // 16:9 ratio\n          background: item.teaser_link ? `url(${item.teaser_link})` : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          position: 'relative',\n          opacity: isPublished ? 1 : 0.7,\n        }}\n      >\n        {!item.teaser_link && (\n          <div style={{\n            position: 'absolute',\n            inset: 0,\n            display: 'grid',\n            placeItems: 'center',\n            color: 'rgba(255,255,255,0.3)',\n          }}>\n            {item.content_type === 'book' ? <BookOpen size={48} /> : item.content_type === 'art' ? <Palette size={48} /> : item.content_type === 'film' ? <Film size={48} /> : <Music size={48} />}\n          </div>\n        )}\n      </div>\n\n      {/* Card Content */}\n      <div style={{ padding: 16 }}>\n        <div style={{\n          fontSize: 16,\n          fontWeight: 600,\n          color: '#f8fafc',\n          marginBottom: 8,\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n          display: '-webkit-box',\n          WebkitLineClamp: 2,\n          WebkitBoxOrient: 'vertical',\n          lineHeight: 1.4,\n        }}>\n          {item.title}\n        </div>\n\n        <div style={{\n          fontSize: 13,\n          color: '#94a3b8',\n          marginBottom: 12,\n        }}>\n          {item.content_type} {item.genre && ` ${item.genre}`}\n        </div>\n\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: 16,\n          fontSize: 13,\n          color: '#cbd5e1',\n          marginBottom: 16,\n        }}>\n          <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n            <Eye size={14} /> {item.view_count || 0}\n          </span>\n          <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n            <DollarSign size={14} /> ${item.price_usd || 0}\n          </span>\n        </div>\n\n        {/* Action Buttons */}\n        <div style={{ display: 'flex', gap: 8 }}>\n          {isPublishedNonBook ? (\n            // Published art/music/film: Show Manage button instead of Edit\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                onManage?.();\n              }}\n              style={{\n                flex: 1,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: 6,\n                background: 'transparent',\n                border: '1px solid #334155',\n                color: '#cbd5e1',\n                padding: '8px 16px',\n                borderRadius: 8,\n                fontSize: 13,\n                fontWeight: 600,\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n              }}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.background = '#1e293b';\n                e.currentTarget.style.borderColor = '#475569';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.background = 'transparent';\n                e.currentTarget.style.borderColor = '#334155';\n              }}\n            >\n              <Settings size={14} />\n              Manage\n            </button>\n          ) : (\n            // Drafts or published books: Show Edit button\n            <button\n              onClick={onEdit}\n              style={{\n                flex: 1,\n                background: 'transparent',\n                border: '1px solid #334155',\n                color: '#cbd5e1',\n                padding: '8px 16px',\n                borderRadius: 8,\n                fontSize: 13,\n                fontWeight: 600,\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n              }}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.background = '#1e293b';\n                e.currentTarget.style.borderColor = '#475569';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.background = 'transparent';\n                e.currentTarget.style.borderColor = '#334155';\n              }}\n            >\n              Edit\n            </button>\n          )}\n          {isPublished && (\n            <button\n              onClick={onView}\n              style={{\n                flex: 1,\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                border: 'none',\n                color: '#fff',\n                padding: '8px 16px',\n                borderRadius: 8,\n                fontSize: 13,\n                fontWeight: 600,\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n              }}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.transform = 'translateY(-2px)';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.transform = 'translateY(0)';\n              }}\n            >\n              View\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Empty State Component\nfunction EmptyState({ icon, title, description, actionLabel, onAction }: {\n  icon: React.ReactNode;\n  title: string;\n  description: string;\n  actionLabel: string | null;\n  onAction: () => void;\n}) {\n  return (\n    <div style={{\n      textAlign: 'center',\n      padding: '80px 24px',\n    }}>\n      <div style={{ color: '#475569', marginBottom: 24 }}>{icon}</div>\n      <div style={{\n        fontSize: 24,\n        fontWeight: 600,\n        color: '#f8fafc',\n        marginBottom: 12,\n      }}>\n        {title}\n      </div>\n      <div style={{\n        fontSize: 15,\n        color: '#94a3b8',\n        marginBottom: 32,\n        maxWidth: 400,\n        margin: '0 auto 32px',\n      }}>\n        {description}\n      </div>\n      {actionLabel && (\n        <button\n          onClick={onAction}\n          style={{\n            background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n            border: 'none',\n            color: '#fff',\n            padding: '12px 24px',\n            borderRadius: 8,\n            fontSize: 15,\n            fontWeight: 600,\n            cursor: 'pointer',\n            transition: 'all 0.2s',\n          }}\n          onMouseEnter={(e) => {\n            e.currentTarget.style.transform = 'translateY(-2px)';\n            e.currentTarget.style.boxShadow = '0 4px 16px rgba(245, 158, 11, 0.3)';\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.transform = 'translateY(0)';\n            e.currentTarget.style.boxShadow = 'none';\n          }}\n        >\n          {actionLabel}\n        </button>\n      )}\n    </div>\n  );\n}\n\n// Portfolio Item Modal Component\nfunction PortfolioItemModal({\n  item,\n  onClose,\n  onSave\n}: {\n  item: ExternalPortfolioItem | null;\n  onClose: () => void;\n  onSave: (item: Partial<ExternalPortfolioItem>) => void;\n}) {\n  const [title, setTitle] = useState(item?.title || '');\n  const [description, setDescription] = useState(item?.description || '');\n  const [externalUrl, setExternalUrl] = useState(item?.external_url || '');\n  const [projectType, setProjectType] = useState(item?.project_type || 'book');\n  const [role, setRole] = useState(item?.role || '');\n  const [createdDate, setCreatedDate] = useState(item?.created_date || '');\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSave({\n      title,\n      description,\n      external_url: externalUrl,\n      project_type: projectType,\n      role,\n      created_date: createdDate || null\n    });\n  };\n\n  return (\n    <div style={{\n      position: 'fixed',\n      inset: 0,\n      background: 'rgba(0,0,0,0.75)',\n      backdropFilter: 'blur(4px)',\n      display: 'grid',\n      placeItems: 'center',\n      zIndex: 2000,\n    }} onClick={onClose}>\n      <div onClick={(e) => e.stopPropagation()} style={{\n        background: '#0f172a',\n        border: '1px solid #1e293b',\n        borderRadius: 16,\n        padding: 32,\n        width: '90%',\n        maxWidth: 500,\n        maxHeight: '90vh',\n        overflow: 'auto',\n      }}>\n        <div style={{\n          fontSize: 24,\n          fontWeight: 700,\n          color: '#f8fafc',\n          marginBottom: 24,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}>\n          <span>{item ? 'Edit Portfolio Item' : 'Add Portfolio Item'}</span>\n          <button\n            onClick={onClose}\n            style={{\n              background: 'transparent',\n              border: 'none',\n              color: '#94a3b8',\n              cursor: 'pointer',\n              padding: 4,\n              display: 'grid',\n              placeItems: 'center',\n            }}\n          >\n            <X size={24} />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit}>\n          <div style={{ marginBottom: 20 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              Title *\n            </label>\n            <input\n              type=\"text\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              required\n              placeholder=\"Project title\"\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: 20 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              Project Type\n            </label>\n            <select\n              value={projectType}\n              onChange={(e) => setProjectType(e.target.value)}\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n              }}\n            >\n              <option value=\"book\">Book</option>\n              <option value=\"art\">Art</option>\n              <option value=\"music\">Music</option>\n              <option value=\"video\">Video</option>\n              <option value=\"film\">Film</option>\n              <option value=\"other\">Other</option>\n            </select>\n          </div>\n\n          <div style={{ marginBottom: 20 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              Your Role\n            </label>\n            <input\n              type=\"text\"\n              value={role}\n              onChange={(e) => setRole(e.target.value)}\n              placeholder=\"e.g., Author, Illustrator, Producer\"\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: 20 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              Description\n            </label>\n            <textarea\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              rows={3}\n              placeholder=\"Brief description of the project\"\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n                resize: 'vertical',\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: 20 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              External URL\n            </label>\n            <input\n              type=\"url\"\n              value={externalUrl}\n              onChange={(e) => setExternalUrl(e.target.value)}\n              placeholder=\"https://...\"\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: 24 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              Date (optional)\n            </label>\n            <input\n              type=\"date\"\n              value={createdDate}\n              onChange={(e) => setCreatedDate(e.target.value)}\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n              }}\n            />\n          </div>\n\n          <div style={{ display: 'flex', gap: 12 }}>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              style={{\n                flex: 1,\n                background: 'transparent',\n                border: '1px solid #334155',\n                color: '#cbd5e1',\n                padding: '12px',\n                borderRadius: 8,\n                fontSize: 14,\n                fontWeight: 600,\n                cursor: 'pointer',\n              }}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              style={{\n                flex: 1,\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                border: 'none',\n                color: '#fff',\n                padding: '12px',\n                borderRadius: 8,\n                fontSize: 14,\n                fontWeight: 600,\n                cursor: 'pointer',\n              }}\n            >\n              {item ? 'Save Changes' : 'Add Project'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"file":"assets/ProfilePageRedesigned-DGLkiViv.js"}