var __defProp=Object.defineProperty,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField=(e,t,r)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,r);import{r as reactExports}from"./router-zDWjfnwa.js";import{r as requireReact,a as requireReactDom,g as getDefaultExportFromCjs$2,c as commonjsGlobal,b as getAugmentedNamespace}from"./vendor-Cfs_Iq82.js";var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},hasRequiredReactJsxRuntime_production_min,hasRequiredJsxRuntime;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var e=requireReact(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(e,r,a){var s,u={},l=null,c=null;for(s in void 0!==a&&(l=""+a),void 0!==r.key&&(l=""+r.key),void 0!==r.ref&&(c=r.ref),r)i.call(r,s)&&!o.hasOwnProperty(s)&&(u[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps)void 0===u[s]&&(u[s]=r[s]);return{$$typeof:t,type:e,key:l,ref:c,props:u,_owner:n.current}}return reactJsxRuntime_production_min.Fragment=r,reactJsxRuntime_production_min.jsx=a,reactJsxRuntime_production_min.jsxs=a,reactJsxRuntime_production_min}function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),buffer$1={},base64Js={};base64Js.byteLength=byteLength$1,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray;for(var lookup$2=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i$1=0,len=code.length;i$1<len;++i$1)lookup$2[i$1]=code[i$1],revLookup[code.charCodeAt(i$1)]=i$1;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function byteLength$1(e){var t=getLens(e),r=t[0],i=t[1];return 3*(r+i)/4-i}function _byteLength(e,t,r){return 3*(t+r)/4-r}function toByteArray(e){var t,r,i=getLens(e),n=i[0],o=i[1],a=new Arr(_byteLength(e,n,o)),s=0,u=o>0?n-4:n;for(r=0;r<u;r+=4)t=revLookup[e.charCodeAt(r)]<<18|revLookup[e.charCodeAt(r+1)]<<12|revLookup[e.charCodeAt(r+2)]<<6|revLookup[e.charCodeAt(r+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===o&&(t=revLookup[e.charCodeAt(r)]<<2|revLookup[e.charCodeAt(r+1)]>>4,a[s++]=255&t),1===o&&(t=revLookup[e.charCodeAt(r)]<<10|revLookup[e.charCodeAt(r+1)]<<4|revLookup[e.charCodeAt(r+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a}function tripletToBase64(e){return lookup$2[e>>18&63]+lookup$2[e>>12&63]+lookup$2[e>>6&63]+lookup$2[63&e]}function encodeChunk(e,t,r){for(var i,n=[],o=t;o<r;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),n.push(tripletToBase64(i));return n.join("")}function fromByteArray(e){for(var t,r=e.length,i=r%3,n=[],o=16383,a=0,s=r-i;a<s;a+=o)n.push(encodeChunk(e,a,a+o>s?s:a+o));return 1===i?(t=e[r-1],n.push(lookup$2[t>>2]+lookup$2[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],n.push(lookup$2[t>>10]+lookup$2[t>>4&63]+lookup$2[t<<2&63]+"=")),n.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var ieee754={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,r,i,n){var o,a,s=8*n-i-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?n-1:0,d=r?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+e[t+h],h+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=l}return(f?-1:1)*a*Math.pow(2,o-i)},write:function(e,t,r,i,n,o){var a,s,u,l=8*o-n-1,c=(1<<l)-1,h=c>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*u-1)*Math.pow(2,n),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;e[r+f]=255&s,f+=p,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;e[r+f]=255&a,f+=p,a/=256,l-=8);e[r+f-p]|=128*m}};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
!function(e){const t=base64Js,r=ieee754,i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},e.INSPECT_MAX_BYTES=50;const n=2147483647;e.kMaxLength=n;const{Uint8Array:o,ArrayBuffer:a,SharedArrayBuffer:s}=globalThis;function u(e){if(e>n)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new o(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let i=u(r);const n=i.write(e,t);n!==r&&(i=i.slice(0,n));return i}(e,t);if(a.isView(e))return function(e){if(J(e,o)){const t=new o(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,a)||e&&J(e.buffer,a))return p(e,t,r);if(void 0!==s&&(J(e,s)||e&&J(e.buffer,s)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,r);const n=function(e){if(l.isBuffer(e)){const t=0|m(e.length),r=u(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||Z(e.length)?u(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return h(e),u(e<0?0:0|m(e))}function f(e){const t=e.length<0?0:0|m(e.length),r=u(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===r?new o(e):void 0===r?new o(e,t):new o(e,t,r),Object.setPrototypeOf(i,l.prototype),i}function m(e){if(e>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if(a.isView(e)||J(e,a))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(n)return i?-1:V(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return x(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return R(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function b(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}function w(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Z(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:v(e,t,r,i,n);if("number"==typeof t)return t&=255,"function"==typeof o.prototype.indexOf?n?o.prototype.indexOf.call(e,t,r):o.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,i,n){let o,a=1,s=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){let i=-1;for(o=r;o<s;o++)if(l(e,o)===l(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===u)return i*a}else-1!==i&&(o-=o-i),i=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){let r=!0;for(let i=0;i<u;i++)if(l(e,o+i)!==l(t,i)){r=!1;break}if(r)return o}return-1}function _(e,t,r,i){r=Number(r)||0;const n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;const o=t.length;let a;for(i>o/2&&(i=o/2),a=0;a<i;++a){const i=parseInt(t.substr(2*a,2),16);if(Z(i))return a;e[r+a]=i}return a}function E(e,t,r,i){return Y(V(t,e.length-r),e,r,i)}function S(e,t,r,i){return Y(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function A(e,t,r,i){return Y(G(t),e,r,i)}function M(e,t,r,i){return Y(function(e,t){let r,i,n;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),i=r>>8,n=r%256,o.push(n),o.push(i);return o}(t,e.length-r),e,r,i)}function R(e,r,i){return 0===r&&i===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,i))}function x(e,t,r){r=Math.min(e.length,r);const i=[];let n=t;for(;n<r;){const t=e[n];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(n+a<=r){let r,i,s,u;switch(a){case 1:t<128&&(o=t);break;case 2:r=e[n+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[n+1],i=e[n+2],128==(192&r)&&128==(192&i)&&(u=(15&t)<<12|(63&r)<<6|63&i,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[n+1],i=e[n+2],s=e[n+3],128==(192&r)&&128==(192&i)&&128==(192&s)&&(u=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&s,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),n+=a}return function(e){const t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=k));return r}(i)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new o(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,o.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!l.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(l.prototype,o.prototype),Object.setPrototypeOf(l,o),l.alloc=function(e,t,r){return function(e,t,r){return h(e),e<=0?u(e):void 0!==t?"string"==typeof r?u(e).fill(t,r):u(e).fill(t):u(e)}(e,t,r)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(J(e,o)&&(e=l.from(e,e.offset,e.byteLength)),J(t,o)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const i=l.allocUnsafe(t);let n=0;for(r=0;r<e.length;++r){let t=e[r];if(J(t,o))n+t.length>i.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(i,n)):o.prototype.set.call(i,t,n);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,n)}n+=t.length}return i},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)b(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):y.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},i&&(l.prototype[i]=l.prototype.inspect),l.prototype.compare=function(e,t,r,i,n){if(J(e,o)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;let a=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0);const u=Math.min(a,s),c=this.slice(i,n),h=e.slice(t,r);for(let o=0;o<u;++o)if(c[o]!==h[o]){a=c[o],s=h[o];break}return a<s?-1:s<a?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},l.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}const n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":case"latin1":case"binary":return S(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function T(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function P(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function C(e,t,r){const i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let o=t;o<r;++o)n+=X[e[o]];return n}function I(e,t,r){const i=e.slice(t,r);let n="";for(let o=0;o<i.length-1;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function $(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,i,n,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function O(e,t,r,i,n){W(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function N(e,t,r,i,n){W(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function L(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function q(e,t,i,n,o){return t=+t,i>>>=0,o||L(e,0,i,4),r.write(e,t,i,n,23,4),i+4}function j(e,t,i,n,o){return t=+t,i>>>=0,o||L(e,0,i,8),r.write(e,t,i,n,52,8),i+8}l.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||$(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||$(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||$(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||$(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||$(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Q(function(e){K(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,n=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(i)+(BigInt(n)<<BigInt(32))}),l.prototype.readBigUInt64BE=Q(function(e){K(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],n=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)}),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||$(e,t,this.length);let i=t,n=1,o=this[e+--i];for(;i>0&&(n*=256);)o+=this[e+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||$(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||$(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||$(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||$(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||$(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Q(function(e){K(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),l.prototype.readBigInt64BE=Q(function(e){K(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||$(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||$(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||$(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||$(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){B(this,e,t,r,Math.pow(2,8*r)-1,0)}let n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){B(this,e,t,r,Math.pow(2,8*r)-1,0)}let n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Q(function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Q(function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);B(this,e,t,r,i-1,-i)}let n=0,o=1,a=0;for(this[t]=255&e;++n<r&&(o*=256);)e<0&&0===a&&0!==this[t+n-1]&&(a=1),this[t+n]=(e/o|0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);B(this,e,t,r,i-1,-i)}let n=r-1,o=1,a=0;for(this[t+n]=255&e;--n>=0&&(o*=256);)e<0&&0===a&&0!==this[t+n+1]&&(a=1),this[t+n]=(e/o|0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Q(function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Q(function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,r){return q(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return q(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return j(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return j(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);const n=i-r;return this===e&&"function"==typeof o.prototype.copyWithin?this.copyWithin(t,r,i):o.prototype.set.call(e,this.subarray(r,i),t),n},l.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let n;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{const o=l.isBuffer(e)?e:l.from(e,i),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%a]}return this};const U={};function D(e,t,r){U[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function F(e){let t="",r=e.length;const i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function W(e,t,r,i,n,o){if(e>r||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`,new U.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){K(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||H(t,e.length-(r+1))}(i,n,o)}function K(e,t){if("number"!=typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,r){if(Math.floor(e)!==e)throw K(e,r),new U.ERR_OUT_OF_RANGE("offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}D("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),D("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),D("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=F(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=F(n)),n+="n"),i+=` It must be ${t}. Received ${n}`,i},RangeError);const z=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const i=e.length;let n=null;const o=[];for(let a=0;a<i;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function Q(e){return"undefined"==typeof BigInt?ee:e}function ee(){throw new Error("BigInt not supported")}}(buffer$1);const Buffer=buffer$1.Buffer,Buffer$1=buffer$1.Buffer;function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var browser$f={exports:{}},process=browser$f.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(r){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(r){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop$1(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop$1,process.addListener=noop$1,process.once=noop$1,process.off=noop$1,process.removeListener=noop$1,process.removeAllListeners=noop$1,process.emit=noop$1,process.prependListener=noop$1,process.prependOnceListener=noop$1,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};var browserExports$1=browser$f.exports;const process$1=getDefaultExportFromCjs$1(browserExports$1);var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var e,t="object"==typeof Reflect?Reflect:null,r=t&&"function"==typeof t.apply?t.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function n(){n.init.call(this)}events.exports=n,events.exports.once=function(e,t){return new Promise(function(r,i){function n(r){e.removeListener(t,o),i(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}p(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&p(e,"error",t,r)}(e,n,{once:!0})})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function s(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function u(e,t,r,i){var n,o,u;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),u=o[t]),void 0===u)u=o[t]=r,++e._eventsCount;else if("function"==typeof u?u=o[t]=i?[r,u]:[u,r]:i?u.unshift(r):u.push(r),(n=s(e))>0&&u.length>n&&!u.warned){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=u.length,console&&console.warn}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=l.bind(i);return n.listener=r,i.wrapFn=n,n}function h(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):f(n,n.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function p(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function n(o){i.once&&e.removeEventListener(t,n),r(o)})}}return Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),n.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return s(this)},n.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)r(u,this,t);else{var l=u.length,c=f(u,l);for(i=0;i<l;++i)r(c[i],this,t)}return!0},n.prototype.addListener=function(e,t){return u(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return u(this,e,t,!0)},n.prototype.once=function(e,t){return a(t),this.on(e,c(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,c(this,e,t)),this},n.prototype.removeListener=function(e,t){var r,i,n,o,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,n=o;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,o=Object.keys(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},n.prototype.listeners=function(e){return h(this,e,!0)},n.prototype.rawListeners=function(e){return h(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},n.prototype.listenerCount=d,n.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},events.exports}var eventsExports=requireEvents(),client={},hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var e=requireReactDom();return client.createRoot=e.createRoot,client.hydrateRoot=e.hydrateRoot,client}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs$2(clientExports),scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),n=(null==r?void 0:r.nonce)||(null==r?void 0:r.getAttribute("nonce"));i=e(t.map(e=>{if((e=assetsURL(e))in seen)return;seen[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":scriptRel,t||(i.as="script"),i.crossOrigin="",i.href=e,n&&i.setAttribute("nonce",n),document.head.appendChild(i),t?new Promise((t,r)=>{i.addEventListener("load",t),i.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function toPropertyKey(e){var t=toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _defineProperty(e,t,r){return(t=toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){void 0===t&&(t=e.constructor);var r=Error.captureStackTrace;r&&r(e,t)}var __extends=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),CustomError=function(e){function t(t,r){var i=this.constructor,n=e.call(this,t,r)||this;return Object.defineProperty(n,"name",{value:i.name,enumerable:!1,configurable:!0}),fixProto(n,i.prototype),fixStack(n),n}return __extends(t,e),t}(Error);function serializeError$2(e){const t=e.findIndex(e=>e instanceof Error),r=e.findIndex(e=>"string"==typeof e),i=e.findIndex(e=>e&&"object"==typeof e&&"status"in e&&"type"in e);let n;if(-1!==i){const t=e[i];n=new Error(`${t.status} ${t.type.toString()} ${t.statusText}`)}else n=-1!==t?e.splice(t,1)[0]:-1!==r?new Error(e.splice(r,1)[0]):new Error("Unknown error");return[n,e]}let Web3AuthError$1=class extends CustomError{constructor(e,t,r){super(t),_defineProperty(this,"code",void 0),_defineProperty(this,"message",void 0),_defineProperty(this,"cause",void 0),this.code=e,this.message=t||"",this.cause=r,Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:serializeError$2([this.cause])}}toString(){return JSON.stringify(this.toJSON())}},WalletInitializationError$1=class e extends Web3AuthError$1{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(t,r="",i){return new e(t,`${e.messages[t]}, ${r}`,i)}static notFound(t="",r){return e.fromCode(5001,t,r)}static notInstalled(t="",r){return e.fromCode(5002,t,r)}static notReady(t="",r){return e.fromCode(5003,t,r)}static windowBlocked(t="",r){return e.fromCode(5004,t,r)}static windowClosed(t="",r){return e.fromCode(5005,t,r)}static incompatibleChainNameSpace(t="",r){return e.fromCode(5006,t,r)}static duplicateAdapterError(t="",r){return e.fromCode(5007,t,r)}static invalidProviderConfigError(t="",r){return e.fromCode(5008,t,r)}static providerNotReadyError(t="",r){return e.fromCode(5009,t,r)}static rpcConnectionError(t="",r){return e.fromCode(5010,t,r)}static invalidParams(t="",r){return e.fromCode(5011,t,r)}static invalidNetwork(t="",r){return e.fromCode(5013,t,r)}};_defineProperty(WalletInitializationError$1,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});let WalletLoginError$1=class e extends Web3AuthError$1{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(t,r="",i){return new e(t,`${e.messages[t]}. ${r}`,i)}static connectionError(t="",r){return e.fromCode(5111,t,r)}static disconnectionError(t="",r){return e.fromCode(5112,t,r)}static notConnectedError(t="",r){return e.fromCode(5113,t,r)}static popupClosed(t="",r){return e.fromCode(5114,t,r)}static mfaEnabled(t="",r){return e.fromCode(5115,t,r)}static chainConfigNotAdded(t="",r){return e.fromCode(5116,t,r)}static unsupportedOperation(t="",r){return e.fromCode(5117,t,r)}static coreKitKeyNotFound(t="",r){return e.fromCode(5118,t,r)}static userNotLoggedIn(t="",r){return e.fromCode(5119,t,r)}};_defineProperty(WalletLoginError$1,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa",5116:"Chain config has not been added. Please add the chain config before calling switchChain",5117:"Unsupported operation",5118:"useCoreKitKey flag is enabled but coreKitKey is not available",5119:"User not logged in."});let WalletOperationsError$1=class e extends Web3AuthError$1{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletOperationsError"})}static fromCode(t,r="",i){return new e(t,`${e.messages[t]}, ${r}`,i)}static chainIDNotAllowed(t="",r){return e.fromCode(5201,t,r)}static operationNotAllowed(t="",r){return e.fromCode(5202,t,r)}static chainNamespaceNotAllowed(t="",r){return e.fromCode(5203,t,r)}};_defineProperty(WalletOperationsError$1,"messages",{5e3:"Custom",5201:"Provided chainId is not allowed",5202:"This operation is not allowed"});let WalletProviderError$1=class e extends Web3AuthError$1{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletProviderError"})}static fromCode(t,r="",i){return new WalletOperationsError$1(t,`${e.messages[t]}, ${r}`,i)}static invalidRequestArgs(e="",t){return WalletOperationsError$1.fromCode(5301,e,t)}static invalidRequestMethod(e="",t){return WalletOperationsError$1.fromCode(5302,e,t)}static invalidRequestParams(e="",t){return WalletOperationsError$1.fromCode(5303,e,t)}};_defineProperty(WalletProviderError$1,"messages",{5e3:"Custom",5301:"Expected a single, non-array, object argument.",5302:"'args.method' must be a non-empty string.",5303:"'args.params' must be an object or array if provided."});const CHAIN_NAMESPACES$1={EIP155:"eip155",SOLANA:"solana",CASPER:"casper",XRPL:"xrpl",OTHER:"other"},ADAPTER_NAMESPACES$1={MULTICHAIN:"multichain"},INFURA_PROXY_URL="https://api.web3auth.io/infura-service/v1",getDefaultNetworkId$1=e=>{if(e===CHAIN_NAMESPACES$1.EIP155)return 1;if(e===CHAIN_NAMESPACES$1.SOLANA)return 1;if(e===CHAIN_NAMESPACES$1.XRPL)return 1;throw WalletInitializationError$1.invalidParams(`Chain namespace ${e} is not supported`)},getEvmChainConfig$1=(e,t="")=>{const r=CHAIN_NAMESPACES$1.EIP155,i=`${INFURA_PROXY_URL}/${e}/${t}`;return 1===e?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:r,chainId:"0x1",rpcTarget:i,displayName:"Ethereum Mainnet",blockExplorerUrl:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:10===e?{chainNamespace:CHAIN_NAMESPACES$1.EIP155,decimals:18,blockExplorerUrl:"https://optimistic.etherscan.io",chainId:"0xa",displayName:"Optimism",logo:"optimism.svg",rpcTarget:i,ticker:"ETH",tickerName:"Ethereum"}:8453===e?{chainNamespace:CHAIN_NAMESPACES$1.EIP155,decimals:18,blockExplorerUrl:"https://basescan.org",chainId:"0x2105",displayName:"Base",logo:"base.svg",rpcTarget:i,ticker:"ETH",tickerName:"Ethereum"}:42161===e?{chainNamespace:CHAIN_NAMESPACES$1.EIP155,decimals:18,blockExplorerUrl:"https://arbiscan.io",chainId:"0xa4b1",displayName:"Arbitrum One",logo:"arbitrum.svg",rpcTarget:i,ticker:"ETH",tickerName:"Ethereum"}:59144===e?{chainNamespace:CHAIN_NAMESPACES$1.EIP155,decimals:18,blockExplorerUrl:"https://lineascan.build",chainId:"0xe708",logo:"https://images.toruswallet.io/eth.svg",rpcTarget:i,ticker:"ETH",tickerName:"Ethereum"}:11155111===e?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:r,chainId:"0xaa36a7",rpcTarget:i,displayName:"Sepolia Testnet",blockExplorerUrl:"https://sepolia.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:137===e?{logo:"https://images.toruswallet.io/polygon.svg",chainNamespace:r,chainId:"0x89",rpcTarget:i,displayName:"Polygon Mainnet",blockExplorerUrl:"https://polygonscan.com",ticker:"POL",tickerName:"Polygon Ecosystem Token"}:80002===e?{logo:"https://images.toruswallet.io/polygon.svg",chainNamespace:r,chainId:"0x13882",rpcTarget:i,displayName:"Polygon Amoy Testnet",blockExplorerUrl:"https://www.oklink.com/amoy",ticker:"POL",tickerName:"Polygon Ecosystem Token",decimals:18}:56===e?{logo:"https://images.toruswallet.io/bnb.png",chainNamespace:r,chainId:"0x38",rpcTarget:i,displayName:"Binance SmartChain Mainnet",blockExplorerUrl:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:97===e?{logo:"https://images.toruswallet.io/bnb.png",chainNamespace:r,chainId:"0x61",rpcTarget:i,displayName:"Binance SmartChain Testnet",blockExplorerUrl:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:25===e?{logo:"https://images.toruswallet.io/cro.svg",chainNamespace:r,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorerUrl:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{logo:"https://images.toruswallet.io/cro.svg",chainNamespace:r,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorerUrl:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos",decimals:18}:8217===e?{logo:"https://images.toruswallet.io/klay.svg",chainNamespace:r,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorerUrl:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn",decimals:18}:1946===e?{chainNamespace:CHAIN_NAMESPACES$1.EIP155,chainId:"0x79a",rpcTarget:"https://rpc.minato.soneium.org",displayName:"Soneium Minato Testnet",blockExplorerUrl:"https://explorer-testnet.soneium.org",ticker:"ETH",tickerName:"ETH",logo:"https://iili.io/2i5xce2.png"}:1868===e?{chainNamespace:CHAIN_NAMESPACES$1.EIP155,chainId:"0x74c",rpcTarget:"https://rpc.soneium.org",displayName:"Soneium Mainnet",blockExplorerUrl:"https://soneium.blockscout.com",ticker:"ETH",tickerName:"ETH",logo:"https://iili.io/2i5xce2.png"}:null},getSolanaChainConfig$1=e=>{const t=CHAIN_NAMESPACES$1.SOLANA;return 101===e||1===e?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:t,chainId:"0x65",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorerUrl:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana",decimals:9}:102===e||2===e?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:t,chainId:"0x66",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorerUrl:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana",decimals:9}:103===e||3===e?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:t,chainId:"0x67",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorerUrl:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana",decimals:9}:null},getXrplChainConfig$1=e=>{const t=CHAIN_NAMESPACES$1.XRPL;return 1===e?{chainNamespace:t,decimals:15,chainId:"0x1",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://ripple-node.tor.us",wsTarget:"wss://s2.ripple.com",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl mainnet",blockExplorerUrl:"https://livenet.xrpl.org"}:2===e?{chainNamespace:t,decimals:15,chainId:"0x2",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://testnet-ripple-node.tor.us",wsTarget:"wss://s.altnet.rippletest.net",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl testnet",blockExplorerUrl:"https://testnet.xrpl.org",isTestnet:!0}:3===e?{chainNamespace:t,decimals:15,chainId:"0x3",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://devnet-ripple-node.tor.us",wsTarget:"wss://s.devnet.rippletest.net/",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl devnet",blockExplorerUrl:"https://devnet.xrpl.org",isTestnet:!0}:null},getChainConfig$1=(e,t,r)=>{if(e===CHAIN_NAMESPACES$1.OTHER)return null;const i=t?"number"==typeof t?t:parseInt(t,16):getDefaultNetworkId$1(e);return e===CHAIN_NAMESPACES$1.EIP155?getEvmChainConfig$1(i,r):e===CHAIN_NAMESPACES$1.SOLANA?getSolanaChainConfig$1(i):e===CHAIN_NAMESPACES$1.XRPL?getXrplChainConfig$1(i):null};var loglevel$5={exports:{}},loglevel$4=loglevel$5.exports,hasRequiredLoglevel;function requireLoglevel(){return hasRequiredLoglevel||(hasRequiredLoglevel=1,t=loglevel$4,r=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],n={},o=null;function a(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(i){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function s(){console.log&&(console.log.apply||Function.prototype.apply.apply(console.log,[console,arguments])),console.trace}function u(){for(var r=this.getLevel(),n=0;n<i.length;n++){var o=i[n];this[o]=n<r?e:this.methodFactory(o,r,this.name)}if(this.log=this.debug,typeof console===t&&r<this.levels.SILENT)return"No console available for logging"}function l(e){return function(){typeof console!==t&&(u.call(this),this[e].apply(this,arguments))}}function c(i,n,o){return function(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&r?s:void 0!==console[i]?a(console,i):void 0!==console.log?a(console,"log"):e)}(i)||l.apply(this,arguments)}function h(e,r){var a,s,l,h=this,d="loglevel";function f(){var e;if(typeof window!==t&&d){try{e=window.localStorage[d]}catch(o){}if(typeof e===t)try{var r=window.document.cookie,i=encodeURIComponent(d),n=r.indexOf(i+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n+i.length+1))[1])}catch(o){}return void 0===h.levels[e]&&(e=void 0),e}}function p(e){var t=e;if("string"==typeof t&&void 0!==h.levels[t.toUpperCase()]&&(t=h.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=h.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?d+=":"+e:"symbol"==typeof e&&(d=void 0),h.name=e,h.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},h.methodFactory=r||c,h.getLevel=function(){return null!=l?l:null!=s?s:a},h.setLevel=function(e,r){return l=p(e),!1!==r&&function(e){var r=(i[e]||"silent").toUpperCase();if(typeof window!==t&&d){try{return void(window.localStorage[d]=r)}catch(n){}try{window.document.cookie=encodeURIComponent(d)+"="+r+";"}catch(n){}}}(l),u.call(h)},h.setDefaultLevel=function(e){s=p(e),f()||h.setLevel(e,!1)},h.resetLevel=function(){l=null,function(){if(typeof window!==t&&d){try{window.localStorage.removeItem(d)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),u.call(h)},h.enableAll=function(e){h.setLevel(h.levels.TRACE,e)},h.disableAll=function(e){h.setLevel(h.levels.SILENT,e)},h.rebuild=function(){if(o!==h&&(a=p(o.getLevel())),u.call(h),o===h)for(var e in n)n[e].rebuild()},a=p(o?o.getLevel():"WARN");var m=f();null!=m&&(l=p(m)),u.call(h)}(o=new h).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=n[e];return t||(t=n[e]=new h(e,o.methodFactory)),t};var d=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=d),o},o.getLoggers=function(){return n},o.default=o,o},(e=loglevel$5).exports?e.exports=r():t.log=r()),loglevel$5.exports;var e,t,r}var loglevelExports=requireLoglevel();const loglevel$1$1=getDefaultExportFromCjs$2(loglevelExports);var loglevel$3=loglevel$1$1.getLogger("web3auth-logger");function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var bn$d={exports:{}},dist$2={},hasRequiredDist$2;function requireDist$2(){return hasRequiredDist$2||(hasRequiredDist$2=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});for(var t={},r={byteLength:function(e){var t=u(e),r=t[0],i=t[1];return 3*(r+i)/4-i},toByteArray:function(e){var t,r,i=u(e),a=i[0],s=i[1],l=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),c=0,h=s>0?a-4:a;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[c++]=255&t);1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},fromByteArray:function(e){for(var t,r=e.length,n=r%3,o=[],a=16383,s=0,u=r-n;s<u;s+=a)o.push(c(e,s,s+a>u?u:s+a));1===n?(t=e[r-1],o.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return o.join("")}},i=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)i[s]=a[s],n[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function c(e,t,r){for(var i,n=[],o=t;o<r;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),n.push(l(i));return n.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63;var h={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,r,i,n){var o,a,s=8*n-i-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?n-1:0,d=r?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+e[t+h],h+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=l}return(f?-1:1)*a*Math.pow(2,o-i)},write:function(e,t,r,i,n,o){var a,s,u,l=8*o-n-1,c=(1<<l)-1,h=c>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*u-1)*Math.pow(2,n),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;e[r+f]=255&s,f+=p,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;e[r+f]=255&a,f+=p,a/=256,l-=8);e[r+f-p]|=128*m}};
/*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     */
!function(e){const t=r,i=h,n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o;const{Uint8Array:a,ArrayBuffer:s,SharedArrayBuffer:u}=globalThis;function l(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new a(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return d(e,t,r)}function d(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|b(e,t);let i=l(r);const n=i.write(e,t);n!==r&&(i=i.slice(0,n));return i}(e,t);if(s.isView(e))return function(e){if(X(e,a)){const t=new a(e);return g(t.buffer,t.byteOffset,t.byteLength)}return m(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,s)||e&&X(e.buffer,s))return g(e,t,r);if(void 0!==u&&(X(e,u)||e&&X(e.buffer,u)))return g(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return c.from(i,t,r);const n=function(e){if(c.isBuffer(e)){const t=0|y(e.length),r=l(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||Q(e.length)?l(0):m(e);if("Buffer"===e.type&&Array.isArray(e.data))return m(e.data)}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return f(e),l(e<0?0:0|y(e))}function m(e){const t=e.length<0?0:0|y(e.length),r=l(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function g(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===r?new a(e):void 0===r?new a(e,t):new a(e,t,r),Object.setPrototypeOf(i,c.prototype),i}function y(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function b(e,t){if(c.isBuffer(e))return e.length;if(s.isView(e)||X(e,s))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return J(e).length;default:if(n)return i?-1:Y(e).length;t=(""+t).toLowerCase(),n=!0}}function w(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return $(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}function _(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Q(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:E(e,t,r,i,n);if("number"==typeof t)return t&=255,"function"==typeof a.prototype.indexOf?n?a.prototype.indexOf.call(e,t,r):a.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,i,n){let o,a=1,s=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){let i=-1;for(o=r;o<s;o++)if(l(e,o)===l(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===u)return i*a}else-1!==i&&(o-=o-i),i=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){let r=!0;for(let i=0;i<u;i++)if(l(e,o+i)!==l(t,i)){r=!1;break}if(r)return o}return-1}function S(e,t,r,i){r=Number(r)||0;const n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;const o=t.length;let a;for(i>o/2&&(i=o/2),a=0;a<i;++a){const i=parseInt(t.substr(2*a,2),16);if(Q(i))return a;e[r+a]=i}return a}function A(e,t,r,i){return Z(Y(t,e.length-r),e,r,i)}function M(e,t,r,i){return Z(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function R(e,t,r,i){return Z(J(t),e,r,i)}function x(e,t,r,i){return Z(function(e,t){let r,i,n;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),i=r>>8,n=r%256,o.push(n),o.push(i);return o}(t,e.length-r),e,r,i)}function k(e,r,i){return 0===r&&i===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,i))}function T(e,t,r){r=Math.min(e.length,r);const i=[];let n=t;for(;n<r;){const t=e[n];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(n+a<=r){let r,i,s,u;switch(a){case 1:t<128&&(o=t);break;case 2:r=e[n+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[n+1],i=e[n+2],128==(192&r)&&128==(192&i)&&(u=(15&t)<<12|(63&r)<<6|63&i,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[n+1],i=e[n+2],s=e[n+3],128==(192&r)&&128==(192&i)&&128==(192&s)&&(u=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&s,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),n+=a}return function(e){const t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=P));return r}(i)}c.TYPED_ARRAY_SUPPORT=function(){try{const e=new a(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,a.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!c.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return d(e,t,r)},Object.setPrototypeOf(c.prototype,a.prototype),Object.setPrototypeOf(c,a),c.alloc=function(e,t,r){return function(e,t,r){return f(e),e<=0?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)}(e,t,r)},c.allocUnsafe=function(e){return p(e)},c.allocUnsafeSlow=function(e){return p(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(X(e,a)&&(e=c.from(e,e.offset,e.byteLength)),X(t,a)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const i=c.allocUnsafe(t);let n=0;for(r=0;r<e.length;++r){let t=e[r];if(X(t,a))n+t.length>i.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(i,n)):a.prototype.set.call(i,t,n);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,n)}n+=t.length}return i},c.byteLength=b,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):w.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(e,t,r,i,n){if(X(e,a)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0);const u=Math.min(o,s),l=this.slice(i,n),h=e.slice(t,r);for(let a=0;a<u;++a)if(l[a]!==h[a]){o=l[a],s=h[a];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},c.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}const n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return A(this,e,t,r);case"ascii":case"latin1":case"binary":return M(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function C(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function I(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function $(e,t,r){const i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let o=t;o<r;++o)n+=ee[e[o]];return n}function B(e,t,r){const i=e.slice(t,r);let n="";for(let o=0;o<i.length-1;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,r,i,n,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function L(e,t,r,i,n){H(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function q(e,t,r,i,n){H(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function j(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,o){return t=+t,r>>>=0,o||j(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,o){return t=+t,r>>>=0,o||j(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,c.prototype),i},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=te(function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,n=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(i)+(BigInt(n)<<BigInt(32))}),c.prototype.readBigUInt64BE=te(function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],n=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)}),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=t,n=1,o=this[e+--i];for(;i>0&&(n*=256);)o+=this[e+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=te(function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),c.prototype.readBigInt64BE=te(function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){N(this,e,t,r,Math.pow(2,8*r)-1,0)}let n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){N(this,e,t,r,Math.pow(2,8*r)-1,0)}let n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=te(function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=te(function(e,t=0){return q(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);N(this,e,t,r,i-1,-i)}let n=0,o=1,a=0;for(this[t]=255&e;++n<r&&(o*=256);)e<0&&0===a&&0!==this[t+n-1]&&(a=1),this[t+n]=(e/o|0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);N(this,e,t,r,i-1,-i)}let n=r-1,o=1,a=0;for(this[t+n]=255&e;--n>=0&&(o*=256);)e<0&&0===a&&0!==this[t+n+1]&&(a=1),this[t+n]=(e/o|0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=te(function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=te(function(e,t=0){return q(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,i){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);const n=i-r;return this===e&&"function"==typeof a.prototype.copyWithin?this.copyWithin(t,r,i):a.prototype.set.call(e,this.subarray(r,i),t),n},c.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let n;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{const o=c.isBuffer(e)?e:c.from(e,i),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%a]}return this};const F={};function W(e,t,r){F[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function K(e){let t="",r=e.length;const i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function H(e,t,r,i,n,o){if(e>r||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`,new F.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||V(t,e.length-(r+1))}(i,n,o)}function z(e,t){if("number"!=typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,r){if(Math.floor(e)!==e)throw z(e,r),new F.ERR_OUT_OF_RANGE("offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}W("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),W("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),W("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=K(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=K(n)),n+="n"),i+=` It must be ${t}. Received ${n}`,i},RangeError);const G=/[^+/0-9A-Za-z-_]/g;function Y(e,t){let r;t=t||1/0;const i=e.length;let n=null;const o=[];for(let a=0;a<i;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function J(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const ee=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function te(e){return"undefined"==typeof BigInt?re:e}function re(){throw new Error("BigInt not supported")}}(t);const d=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=d,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(dist$2)),dist$2}var bn$c=bn$d.exports,hasRequiredBn$6;function requireBn$6(){return hasRequiredBn$6||(hasRequiredBn$6=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$2().Buffer}catch(R){}function a(e,t){var i=e.charCodeAt(t);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void r(!1,"Invalid character in "+e)}function s(e,t,r){var i=a(e,r);return r-1>=t&&(i|=a(e,r-1)<<4),i}function u(e,t,i,n){for(var o=0,a=0,s=Math.min(e.length,i),u=t;u<s;u++){var l=e.charCodeAt(u)-48;o*=n,a=l>=49?l-49+10:l>=17?l-17+10:l,r(l>=0&&a<n,"Invalid character"),o+=a}return o}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return e.cmp(t)<0?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,i):(this._parseBase(e,t,n),"le"===i&&this._initArray(this.toArray(),t,i)))},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===i)for(n=e.length-1,o=0;n>=0;n-=3)a=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===i)for(n=0,o=0;n<e.length;n+=3)a=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},n.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o=0,a=0;if("be"===r)for(i=e.length-1;i>=t;i-=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;this._strip()},n.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var o=e.length-r,a=o%i,s=Math.min(o,o-a)+r,l=0,c=r;c<s;c+=i)l=u(e,c,c+i,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var h=1;for(l=u(e,c,e.length,t),c=0;c<a;c++)h*=t;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},n.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype._move=function(e){l(e,this)},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=c}catch(R){n.prototype.inspect=c}else n.prototype.inspect=c;function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],o=0|t.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<i;l++){for(var c=u>>>26,h=67108863&u,d=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=d;f++){var p=l-f|0;c+=(a=(n=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r._strip()}n.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);o=s>>>24-n&16777215,(n+=2)>=26&&(n-=26,a--),i=0!==o||a!==this.length-1?h[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var l=d[e],c=f[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(c).toString(e);i=(p=p.idivn(c)).isZero()?m+i:h[l-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16,2)},o&&(n.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},n.prototype.toArrayLike=function(e,t,i){this._strip();var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,n),a},n.prototype._toArrayLikeLE=function(e,t){for(var r=0,i=0,n=0,o=0;n<this.length;n++){var a=this.words[n]<<o|i;e[r++]=255&a,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),6===o?(r<e.length&&(e[r++]=a>>24&255),i=0,o=0):(i=a>>>24,o+=2)}if(r<e.length)for(e[r++]=i;r<e.length;)e[r++]=0},n.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,i=0,n=0,o=0;n<this.length;n++){var a=this.words[n]<<o|i;e[r--]=255&a,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),6===o?(r>=0&&(e[r--]=a>>24&255),i=0,o=0):(i=a>>>24,o+=2)}if(r>=0)for(e[r--]=i;r>=0;)e[r--]=0},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},n.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},n.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},n.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this._strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,n=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<n:this.words[i]&~(1<<n),this._strip()},n.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++)t=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&t,n=t>>>26;for(;0!==n&&o<r.length;o++)t=(0|r.words[o])+n,this.words[o]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var o=0,a=0;a<i.length;a++)o=(t=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var i,n,o,a=e.words,s=t.words,u=r.words,l=0,c=0|a[0],h=8191&c,d=c>>>13,f=0|a[1],p=8191&f,m=f>>>13,g=0|a[2],y=8191&g,b=g>>>13,w=0|a[3],v=8191&w,_=w>>>13,E=0|a[4],S=8191&E,A=E>>>13,M=0|a[5],R=8191&M,x=M>>>13,k=0|a[6],T=8191&k,P=k>>>13,C=0|a[7],I=8191&C,$=C>>>13,B=0|a[8],O=8191&B,N=B>>>13,L=0|a[9],q=8191&L,j=L>>>13,U=0|s[0],D=8191&U,F=U>>>13,W=0|s[1],K=8191&W,H=W>>>13,z=0|s[2],V=8191&z,G=z>>>13,Y=0|s[3],J=8191&Y,Z=Y>>>13,X=0|s[4],Q=8191&X,ee=X>>>13,te=0|s[5],re=8191&te,ie=te>>>13,ne=0|s[6],oe=8191&ne,ae=ne>>>13,se=0|s[7],ue=8191&se,le=se>>>13,ce=0|s[8],he=8191&ce,de=ce>>>13,fe=0|s[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(l+(i=Math.imul(h,D))|0)+((8191&(n=(n=Math.imul(h,F))+Math.imul(d,D)|0))<<13)|0;l=((o=Math.imul(d,F))+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,D),n=(n=Math.imul(p,F))+Math.imul(m,D)|0,o=Math.imul(m,F);var ye=(l+(i=i+Math.imul(h,K)|0)|0)+((8191&(n=(n=n+Math.imul(h,H)|0)+Math.imul(d,K)|0))<<13)|0;l=((o=o+Math.imul(d,H)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(y,D),n=(n=Math.imul(y,F))+Math.imul(b,D)|0,o=Math.imul(b,F),i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,H)|0;var be=(l+(i=i+Math.imul(h,V)|0)|0)+((8191&(n=(n=n+Math.imul(h,G)|0)+Math.imul(d,V)|0))<<13)|0;l=((o=o+Math.imul(d,G)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(v,D),n=(n=Math.imul(v,F))+Math.imul(_,D)|0,o=Math.imul(_,F),i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(b,K)|0,o=o+Math.imul(b,H)|0,i=i+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,G)|0;var we=(l+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;l=((o=o+Math.imul(d,Z)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(S,D),n=(n=Math.imul(S,F))+Math.imul(A,D)|0,o=Math.imul(A,F),i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,H)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,H)|0,i=i+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(b,V)|0,o=o+Math.imul(b,G)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var ve=(l+(i=i+Math.imul(h,Q)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;l=((o=o+Math.imul(d,ee)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(R,D),n=(n=Math.imul(R,F))+Math.imul(x,D)|0,o=Math.imul(x,F),i=i+Math.imul(S,K)|0,n=(n=n+Math.imul(S,H)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,H)|0,i=i+Math.imul(v,V)|0,n=(n=n+Math.imul(v,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,i=i+Math.imul(y,J)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0;var _e=(l+(i=i+Math.imul(h,re)|0)|0)+((8191&(n=(n=n+Math.imul(h,ie)|0)+Math.imul(d,re)|0))<<13)|0;l=((o=o+Math.imul(d,ie)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(T,D),n=(n=Math.imul(T,F))+Math.imul(P,D)|0,o=Math.imul(P,F),i=i+Math.imul(R,K)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,H)|0,i=i+Math.imul(S,V)|0,n=(n=n+Math.imul(S,G)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,G)|0,i=i+Math.imul(v,J)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0,i=i+Math.imul(p,re)|0,n=(n=n+Math.imul(p,ie)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ie)|0;var Ee=(l+(i=i+Math.imul(h,oe)|0)|0)+((8191&(n=(n=n+Math.imul(h,ae)|0)+Math.imul(d,oe)|0))<<13)|0;l=((o=o+Math.imul(d,ae)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(I,D),n=(n=Math.imul(I,F))+Math.imul($,D)|0,o=Math.imul($,F),i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,H)|0,i=i+Math.imul(R,V)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,G)|0,i=i+Math.imul(S,J)|0,n=(n=n+Math.imul(S,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,i=i+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,i=i+Math.imul(y,re)|0,n=(n=n+Math.imul(y,ie)|0)+Math.imul(b,re)|0,o=o+Math.imul(b,ie)|0,i=i+Math.imul(p,oe)|0,n=(n=n+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(l+(i=i+Math.imul(h,ue)|0)|0)+((8191&(n=(n=n+Math.imul(h,le)|0)+Math.imul(d,ue)|0))<<13)|0;l=((o=o+Math.imul(d,le)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(O,D),n=(n=Math.imul(O,F))+Math.imul(N,D)|0,o=Math.imul(N,F),i=i+Math.imul(I,K)|0,n=(n=n+Math.imul(I,H)|0)+Math.imul($,K)|0,o=o+Math.imul($,H)|0,i=i+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,G)|0,i=i+Math.imul(R,J)|0,n=(n=n+Math.imul(R,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,i=i+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,i=i+Math.imul(v,re)|0,n=(n=n+Math.imul(v,ie)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,n=(n=n+Math.imul(y,ae)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,ae)|0,i=i+Math.imul(p,ue)|0,n=(n=n+Math.imul(p,le)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,le)|0;var Ae=(l+(i=i+Math.imul(h,he)|0)|0)+((8191&(n=(n=n+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;l=((o=o+Math.imul(d,de)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(q,D),n=(n=Math.imul(q,F))+Math.imul(j,D)|0,o=Math.imul(j,F),i=i+Math.imul(O,K)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,H)|0,i=i+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul($,V)|0,o=o+Math.imul($,G)|0,i=i+Math.imul(T,J)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Z)|0,i=i+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,i=i+Math.imul(S,re)|0,n=(n=n+Math.imul(S,ie)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ie)|0,i=i+Math.imul(v,oe)|0,n=(n=n+Math.imul(v,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,i=i+Math.imul(y,ue)|0,n=(n=n+Math.imul(y,le)|0)+Math.imul(b,ue)|0,o=o+Math.imul(b,le)|0,i=i+Math.imul(p,he)|0,n=(n=n+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Me=(l+(i=i+Math.imul(h,pe)|0)|0)+((8191&(n=(n=n+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;l=((o=o+Math.imul(d,me)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(q,K),n=(n=Math.imul(q,H))+Math.imul(j,K)|0,o=Math.imul(j,H),i=i+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,G)|0,i=i+Math.imul(I,J)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul($,J)|0,o=o+Math.imul($,Z)|0,i=i+Math.imul(T,Q)|0,n=(n=n+Math.imul(T,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(R,re)|0,n=(n=n+Math.imul(R,ie)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ie)|0,i=i+Math.imul(S,oe)|0,n=(n=n+Math.imul(S,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,i=i+Math.imul(v,ue)|0,n=(n=n+Math.imul(v,le)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,he)|0,n=(n=n+Math.imul(y,de)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,de)|0;var Re=(l+(i=i+Math.imul(p,pe)|0)|0)+((8191&(n=(n=n+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;l=((o=o+Math.imul(m,me)|0)+(n>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(q,V),n=(n=Math.imul(q,G))+Math.imul(j,V)|0,o=Math.imul(j,G),i=i+Math.imul(O,J)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Z)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,ee)|0)+Math.imul($,Q)|0,o=o+Math.imul($,ee)|0,i=i+Math.imul(T,re)|0,n=(n=n+Math.imul(T,ie)|0)+Math.imul(P,re)|0,o=o+Math.imul(P,ie)|0,i=i+Math.imul(R,oe)|0,n=(n=n+Math.imul(R,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,i=i+Math.imul(S,ue)|0,n=(n=n+Math.imul(S,le)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,le)|0,i=i+Math.imul(v,he)|0,n=(n=n+Math.imul(v,de)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,de)|0;var xe=(l+(i=i+Math.imul(y,pe)|0)|0)+((8191&(n=(n=n+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;l=((o=o+Math.imul(b,me)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(q,J),n=(n=Math.imul(q,Z))+Math.imul(j,J)|0,o=Math.imul(j,Z),i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,i=i+Math.imul(I,re)|0,n=(n=n+Math.imul(I,ie)|0)+Math.imul($,re)|0,o=o+Math.imul($,ie)|0,i=i+Math.imul(T,oe)|0,n=(n=n+Math.imul(T,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,i=i+Math.imul(R,ue)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,le)|0,i=i+Math.imul(S,he)|0,n=(n=n+Math.imul(S,de)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,de)|0;var ke=(l+(i=i+Math.imul(v,pe)|0)|0)+((8191&(n=(n=n+Math.imul(v,me)|0)+Math.imul(_,pe)|0))<<13)|0;l=((o=o+Math.imul(_,me)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(q,Q),n=(n=Math.imul(q,ee))+Math.imul(j,Q)|0,o=Math.imul(j,ee),i=i+Math.imul(O,re)|0,n=(n=n+Math.imul(O,ie)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ie)|0,i=i+Math.imul(I,oe)|0,n=(n=n+Math.imul(I,ae)|0)+Math.imul($,oe)|0,o=o+Math.imul($,ae)|0,i=i+Math.imul(T,ue)|0,n=(n=n+Math.imul(T,le)|0)+Math.imul(P,ue)|0,o=o+Math.imul(P,le)|0,i=i+Math.imul(R,he)|0,n=(n=n+Math.imul(R,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var Te=(l+(i=i+Math.imul(S,pe)|0)|0)+((8191&(n=(n=n+Math.imul(S,me)|0)+Math.imul(A,pe)|0))<<13)|0;l=((o=o+Math.imul(A,me)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(q,re),n=(n=Math.imul(q,ie))+Math.imul(j,re)|0,o=Math.imul(j,ie),i=i+Math.imul(O,oe)|0,n=(n=n+Math.imul(O,ae)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,ae)|0,i=i+Math.imul(I,ue)|0,n=(n=n+Math.imul(I,le)|0)+Math.imul($,ue)|0,o=o+Math.imul($,le)|0,i=i+Math.imul(T,he)|0,n=(n=n+Math.imul(T,de)|0)+Math.imul(P,he)|0,o=o+Math.imul(P,de)|0;var Pe=(l+(i=i+Math.imul(R,pe)|0)|0)+((8191&(n=(n=n+Math.imul(R,me)|0)+Math.imul(x,pe)|0))<<13)|0;l=((o=o+Math.imul(x,me)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(q,oe),n=(n=Math.imul(q,ae))+Math.imul(j,oe)|0,o=Math.imul(j,ae),i=i+Math.imul(O,ue)|0,n=(n=n+Math.imul(O,le)|0)+Math.imul(N,ue)|0,o=o+Math.imul(N,le)|0,i=i+Math.imul(I,he)|0,n=(n=n+Math.imul(I,de)|0)+Math.imul($,he)|0,o=o+Math.imul($,de)|0;var Ce=(l+(i=i+Math.imul(T,pe)|0)|0)+((8191&(n=(n=n+Math.imul(T,me)|0)+Math.imul(P,pe)|0))<<13)|0;l=((o=o+Math.imul(P,me)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(q,ue),n=(n=Math.imul(q,le))+Math.imul(j,ue)|0,o=Math.imul(j,le),i=i+Math.imul(O,he)|0,n=(n=n+Math.imul(O,de)|0)+Math.imul(N,he)|0,o=o+Math.imul(N,de)|0;var Ie=(l+(i=i+Math.imul(I,pe)|0)|0)+((8191&(n=(n=n+Math.imul(I,me)|0)+Math.imul($,pe)|0))<<13)|0;l=((o=o+Math.imul($,me)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(q,he),n=(n=Math.imul(q,de))+Math.imul(j,he)|0,o=Math.imul(j,de);var $e=(l+(i=i+Math.imul(O,pe)|0)|0)+((8191&(n=(n=n+Math.imul(O,me)|0)+Math.imul(N,pe)|0))<<13)|0;l=((o=o+Math.imul(N,me)|0)+(n>>>13)|0)+($e>>>26)|0,$e&=67108863;var Be=(l+(i=Math.imul(q,pe))|0)+((8191&(n=(n=Math.imul(q,me))+Math.imul(j,pe)|0))<<13)|0;return l=((o=Math.imul(j,me))+(n>>>13)|0)+(Be>>>26)|0,Be&=67108863,u[0]=ge,u[1]=ye,u[2]=be,u[3]=we,u[4]=ve,u[5]=_e,u[6]=Ee,u[7]=Se,u[8]=Ae,u[9]=Me,u[10]=Re,u[11]=xe,u[12]=ke,u[13]=Te,u[14]=Pe,u[15]=Ce,u[16]=Ie,u[17]=$e,u[18]=Be,0!==l&&(u[19]=l,r.length++),r};function g(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=u;l++){var c=o-l,h=(0|e.words[c])*(0|t.words[l]),d=67108863&h;s=67108863&(d=d+s|0),n+=(a=(a=a+(h/67108864|0)|0)+(d>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r._strip()}function y(e,t,r){return g(e,t,r)}Math.imul||(m=p),n.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?p(this,e,t):r<1024?g(this,e,t):y(this,e,t)},n.prototype.mul=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),y(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var i=0,n=0;n<this.length;n++){var o=(0|this.words[n])*e,a=(67108863&o)+(67108863&i);i>>=26,i+=o/67108864|0,i+=a>>>26,this.words[n]=67108863&a}return 0!==i&&(this.words[n]=i,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=e.words[i]>>>n&1}return t}(e);if(0===t.length)return new n(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var o=r.sqr();i<t.length;i++,o=o.sqr())0!==t[i]&&(r=r.mul(o));return r},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,n=(e-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<i;this.words[t]=u|a,a=s>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this._strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){var n;r("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=i;if(n-=a,n=Math.max(0,n),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=n);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,n=1<<t;return!(this.length<=i||!(this.words[i]&n))},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this._strip()},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var n,o,a=e.length+i;this._expand(a);var s=0;for(n=0;n<e.length;n++){o=(0|this.words[n+i])+s;var u=(0|e.words[n])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)s=(o=(0|this.words[n+i])+s)>>26,this.words[n+i]=67108863&o;if(0===s)return this._strip();for(r(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this._strip()},n.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),o=e,a=0|o.words[o.length-1];0!=(r=26-this._countBits(a))&&(o=o.ushln(r),i.iushln(r),a=0|o.words[o.length-1]);var s,u=i.length-o.length;if("mod"!==t){(s=new n(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(o,1,u);0===c.negative&&(i=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|i.words[o.length+h])+(0|i.words[o.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(o,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(o,1,h),i.isZero()||(i.negative^=1);s&&(s.words[h]=d)}return s&&s._strip(),i._strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},n.prototype.divmod=function(e,t,i){return r(!e.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modrn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var i=(1<<26)%e,n=0,o=this.length-1;o>=0;o--)n=(i*n+(0|this.words[o]))%e;return t?-n:n},n.prototype.modn=function(e){return this.modrn(e)},n.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var i=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*i;this.words[n]=o/e|0,i=o%e}return this._strip(),t?this.ineg():this},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new n(1),a=new n(0),s=new n(0),u=new n(1),l=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++l;for(var c=i.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(c),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0===(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(i)>=0?(t.isub(i),o.isub(s),a.isub(u)):(i.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:i.iushln(l)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new n(1),s=new n(0),u=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,c=1;0===(t.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(t.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,d=1;0===(i.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(i)>=0?(t.isub(i),a.isub(s)):(i.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var o=t;t=r,r=o}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return!(1&this.words[0])},n.prototype.isOdd=function(){return!(1&~this.words[0])},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,a=i;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return-1===this.cmpn(e)},n.prototype.lt=function(e){return-1===this.cmp(e)},n.prototype.lten=function(e){return this.cmpn(e)<=0},n.prototype.lte=function(e){return this.cmp(e)<=0},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new A(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function M(e){A.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new n(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},i(v,w),v.prototype.split=function(e,t){for(var r=4194303,i=Math.min(e.length,9),n=0;n<i;n++)t.words[n]=e.words[n];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,n=10;n<e.length;n++){var a=0|e.words[n];e.words[n-10]=(a&r)<<4|o>>>22,o=a}o>>>=22,e.words[n-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(_,w),i(E,w),i(S,w),S.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new _;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new S}return b[e]=t,t},A.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},A.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},A.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},A.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},A.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},A.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},A.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},A.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},A.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},A.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},A.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},A.prototype.isqr=function(e){return this.imul(e,e.clone())},A.prototype.sqr=function(e){return this.mul(e,e)},A.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);r(!o.isZero());var s=new n(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,o),d=this.pow(e,o.addn(1).iushrn(1)),f=this.pow(e,o),p=a;0!==f.cmp(s);){for(var m=f,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<p);var y=this.pow(h,new n(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},A.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},A.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new n(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var o=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],c=u-1;c>=0;c--){var h=l>>c&1;o!==r[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===i&&0===c)&&(o=this.mul(o,r[a]),s=0,a=0)):s=0}u=26}return o},A.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},A.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new M(e)},i(M,A),M.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},M.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},M.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(i).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},M.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$d,bn$c)),bn$d.exports}var bnExports=requireBn$6();const BN=getDefaultExportFromCjs$2(bnExports);function number$2(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function isBytes$3(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function bytes$1(e,...t){if(!isBytes$3(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function hash$3(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number$2(e.outputLen),number$2(e.blockLen)}function exists$1(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function output$1(e,t){bytes$1(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const crypto$1="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,createView$1=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rotr$1=(e,t)=>e<<32-t|e>>>t;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function utf8ToBytes$3(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function toBytes$2(e){return"string"==typeof e&&(e=utf8ToBytes$3(e)),bytes$1(e),e}function concatBytes$1(...e){let t=0;for(let i=0;i<e.length;i++){const r=e[i];bytes$1(r),t+=r.length}const r=new Uint8Array(t);for(let i=0,n=0;i<e.length;i++){const t=e[i];r.set(t,n),n+=t.length}return r}new Uint8Array(new Uint32Array([287454020]).buffer)[0];let Hash$2=class{clone(){return this._cloneInto()}};function wrapConstructor$1(e){const t=t=>e().update(toBytes$2(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function randomBytes$3(e=32){if(crypto$1&&"function"==typeof crypto$1.getRandomValues)return crypto$1.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64$1(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);const n=BigInt(32),o=BigInt(4294967295),a=Number(r>>n&o),s=Number(r&o),u=i?4:0,l=i?0:4;e.setUint32(t+u,a,i),e.setUint32(t+l,s,i)}const Chi$1=(e,t,r)=>e&t^~e&r,Maj$1=(e,t,r)=>e&t^e&r^t&r;let HashMD$1=class extends Hash$2{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView$1(this.buffer)}update(e){exists$1(this);const{view:t,buffer:r,blockLen:i}=this,n=(e=toBytes$2(e)).length;for(let o=0;o<n;){const a=Math.min(i-this.pos,n-o);if(a===i){const t=createView$1(e);for(;i<=n-o;o+=i)this.process(t,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){exists$1(this),output$1(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:n}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let c=o;c<i;c++)t[c]=0;setBigUint64$1(r,i-8,BigInt(8*this.length),n),this.process(r,0);const a=createView$1(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=s/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,l[c],n)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:n,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=n,e.destroyed=o,i%t&&e.buffer.set(r),e}};const SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$1=new Uint32Array(64);let SHA256$1=class extends HashMD$1{constructor(){super(64,32,8,!1),this.A=0|SHA256_IV$1[0],this.B=0|SHA256_IV$1[1],this.C=0|SHA256_IV$1[2],this.D=0|SHA256_IV$1[3],this.E=0|SHA256_IV$1[4],this.F=0|SHA256_IV$1[5],this.G=0|SHA256_IV$1[6],this.H=0|SHA256_IV$1[7]}get(){const{A:e,B:t,C:r,D:i,E:n,F:o,G:a,H:s}=this;return[e,t,r,i,n,o,a,s]}set(e,t,r,i,n,o,a,s){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|o,this.G=0|a,this.H=0|s}process(e,t){for(let c=0;c<16;c++,t+=4)SHA256_W$1[c]=e.getUint32(t,!1);for(let c=16;c<64;c++){const e=SHA256_W$1[c-15],t=SHA256_W$1[c-2],r=rotr$1(e,7)^rotr$1(e,18)^e>>>3,i=rotr$1(t,17)^rotr$1(t,19)^t>>>10;SHA256_W$1[c]=i+SHA256_W$1[c-7]+r+SHA256_W$1[c-16]|0}let{A:r,B:i,C:n,D:o,E:a,F:s,G:u,H:l}=this;for(let c=0;c<64;c++){const e=l+(rotr$1(a,6)^rotr$1(a,11)^rotr$1(a,25))+Chi$1(a,s,u)+SHA256_K$1[c]+SHA256_W$1[c]|0,t=(rotr$1(r,2)^rotr$1(r,13)^rotr$1(r,22))+Maj$1(r,i,n)|0;l=u,u=s,s=a,a=o+e|0,o=n,n=i,i=r,r=e+t|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,o=o+this.D|0,a=a+this.E|0,s=s+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,i,n,o,a,s,u,l)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const sha256$4=wrapConstructor$1(()=>new SHA256$1);class HMAC extends Hash$2{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,hash$3(e);const r=toBytes$2(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<n.length;o++)n[o]^=54;this.iHash.update(n),this.oHash=e.create();for(let o=0;o<n.length;o++)n[o]^=106;this.oHash.update(n),n.fill(0)}update(e){return exists$1(this),this.iHash.update(e),this}digestInto(e){exists$1(this),bytes$1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:o,outputLen:a}=this;return e.finished=i,e.destroyed=n,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac$1=(e,t,r)=>new HMAC(e,t).update(r).digest();hmac$1.create=(e,t)=>new HMAC(e,t);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const _0n$5=BigInt(0),_1n$7=BigInt(1),_2n$5=BigInt(2);function isBytes$2(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function abytes$1(e){if(!isBytes$2(e))throw new Error("Uint8Array expected")}const hexes=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function bytesToHex(e){abytes$1(e);let t="";for(let r=0;r<e.length;r++)t+=hexes[e[r]];return t}function numberToHexUnpadded(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function hexToNumber(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const asciis={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(e){return e>=asciis._0&&e<=asciis._9?e-asciis._0:e>=asciis._A&&e<=asciis._F?e-(asciis._A-10):e>=asciis._a&&e<=asciis._f?e-(asciis._a-10):void 0}function hexToBytes(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const i=new Uint8Array(r);for(let n=0,o=0;n<r;n++,o+=2){const t=asciiToBase16(e.charCodeAt(o)),r=asciiToBase16(e.charCodeAt(o+1));if(void 0===t||void 0===r){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}i[n]=16*t+r}return i}function bytesToNumberBE(e){return hexToNumber(bytesToHex(e))}function bytesToNumberLE(e){return abytes$1(e),hexToNumber(bytesToHex(Uint8Array.from(e).reverse()))}function numberToBytesBE(e,t){return hexToBytes(e.toString(16).padStart(2*t,"0"))}function numberToBytesLE(e,t){return numberToBytesBE(e,t).reverse()}function numberToVarBytesBE(e){return hexToBytes(numberToHexUnpadded(e))}function ensureBytes(e,t,r){let i;if("string"==typeof t)try{i=hexToBytes(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else{if(!isBytes$2(t))throw new Error(`${e} must be hex string or Uint8Array`);i=Uint8Array.from(t)}const n=i.length;if("number"==typeof r&&n!==r)throw new Error(`${e} expected ${r} bytes, got ${n}`);return i}function concatBytes(...e){let t=0;for(let i=0;i<e.length;i++){const r=e[i];abytes$1(r),t+=r.length}const r=new Uint8Array(t);for(let i=0,n=0;i<e.length;i++){const t=e[i];r.set(t,n),n+=t.length}return r}function equalBytes(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}function utf8ToBytes$2(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function bitLen(e){let t;for(t=0;e>_0n$5;e>>=_1n$7,t+=1);return t}function bitGet(e,t){return e>>BigInt(t)&_1n$7}function bitSet(e,t,r){return e|(r?_1n$7:_0n$5)<<BigInt(t)}const bitMask=e=>(_2n$5<<BigInt(e-1))-_1n$7,u8n=e=>new Uint8Array(e),u8fr=e=>Uint8Array.from(e);function createHmacDrbg(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let i=u8n(e),n=u8n(e),o=0;const a=()=>{i.fill(1),n.fill(0),o=0},s=(...e)=>r(n,i,...e),u=(e=u8n())=>{n=s(u8fr([0]),e),i=s(),0!==e.length&&(n=s(u8fr([1]),e),i=s())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){i=s();const t=i.slice();r.push(t),e+=i.length}return concatBytes(...r)};return(e,t)=>{let r;for(a(),u(e);!(r=t(l()));)u();return a(),r}}const validatorFns={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||isBytes$2(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function validateObject(e,t,r={}){const i=(t,r,i)=>{const n=validatorFns[r];if("function"!=typeof n)throw new Error(`Invalid validator "${r}", expected function`);const o=e[t];if(!(i&&void 0===o||n(o,e)))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(const[n,o]of Object.entries(t))i(n,o,!1);for(const[n,o]of Object.entries(r))i(n,o,!0);return e}const ut=Object.freeze(Object.defineProperty({__proto__:null,abytes:abytes$1,bitGet:bitGet,bitLen:bitLen,bitMask:bitMask,bitSet:bitSet,bytesToHex:bytesToHex,bytesToNumberBE:bytesToNumberBE,bytesToNumberLE:bytesToNumberLE,concatBytes:concatBytes,createHmacDrbg:createHmacDrbg,ensureBytes:ensureBytes,equalBytes:equalBytes,hexToBytes:hexToBytes,hexToNumber:hexToNumber,isBytes:isBytes$2,numberToBytesBE:numberToBytesBE,numberToBytesLE:numberToBytesLE,numberToHexUnpadded:numberToHexUnpadded,numberToVarBytesBE:numberToVarBytesBE,utf8ToBytes:utf8ToBytes$2,validateObject:validateObject},Symbol.toStringTag,{value:"Module"})),_0n$4=BigInt(0),_1n$6=BigInt(1),_2n$4=BigInt(2),_3n$1=BigInt(3),_4n=BigInt(4),_5n$1=BigInt(5),_8n$2=BigInt(8);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mod(e,t){const r=e%t;return r>=_0n$4?r:t+r}function pow$1(e,t,r){if(r<=_0n$4||t<_0n$4)throw new Error("Expected power/modulo > 0");if(r===_1n$6)return _0n$4;let i=_1n$6;for(;t>_0n$4;)t&_1n$6&&(i=i*e%r),e=e*e%r,t>>=_1n$6;return i}function pow2(e,t,r){let i=e;for(;t-- >_0n$4;)i*=i,i%=r;return i}function invert(e,t){if(e===_0n$4||t<=_0n$4)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=mod(e,t),i=t,n=_0n$4,o=_1n$6;for(;r!==_0n$4;){const e=i%r,t=n-o*(i/r);i=r,r=e,n=o,o=t}if(i!==_1n$6)throw new Error("invert: does not exist");return mod(n,t)}function tonelliShanks(e){const t=(e-_1n$6)/_2n$4;let r,i,n;for(r=e-_1n$6,i=0;r%_2n$4===_0n$4;r/=_2n$4,i++);for(n=_2n$4;n<e&&pow$1(n,t,e)!==e-_1n$6;n++);if(1===i){const t=(e+_1n$6)/_4n;return function(e,r){const i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw new Error("Cannot find square root");return i}}const o=(r+_1n$6)/_2n$4;return function(e,a){if(e.pow(a,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let s=i,u=e.pow(e.mul(e.ONE,n),r),l=e.pow(a,o),c=e.pow(a,r);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let i=e.sqr(c);t<s&&!e.eql(i,e.ONE);t++)i=e.sqr(i);const r=e.pow(u,_1n$6<<BigInt(s-t-1));u=e.sqr(r),l=e.mul(l,r),c=e.mul(c,u),s=t}return l}}function FpSqrt(e){if(e%_4n===_3n$1){const t=(e+_1n$6)/_4n;return function(e,r){const i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw new Error("Cannot find square root");return i}}if(e%_8n$2===_5n$1){const t=(e-_5n$1)/_8n$2;return function(e,r){const i=e.mul(r,_2n$4),n=e.pow(i,t),o=e.mul(r,n),a=e.mul(e.mul(o,_2n$4),n),s=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(s),r))throw new Error("Cannot find square root");return s}}return tonelliShanks(e)}BigInt(9),BigInt(16);const isNegativeLE=(e,t)=>(mod(e,t)&_1n$6)===_1n$6,FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(e){return validateObject(e,FIELD_FIELDS.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function FpPow(e,t,r){if(r<_0n$4)throw new Error("Expected power > 0");if(r===_0n$4)return e.ONE;if(r===_1n$6)return t;let i=e.ONE,n=t;for(;r>_0n$4;)r&_1n$6&&(i=e.mul(i,n)),n=e.sqr(n),r>>=_1n$6;return i}function FpInvertBatch(e,t){const r=new Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r}function nLength(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Field(e,t,r=!1,i={}){if(e<=_0n$4)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:n,nByteLength:o}=nLength(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=FpSqrt(e),s=Object.freeze({ORDER:e,BITS:n,BYTES:o,MASK:bitMask(n),ZERO:_0n$4,ONE:_1n$6,create:t=>mod(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return _0n$4<=t&&t<e},is0:e=>e===_0n$4,isOdd:e=>(e&_1n$6)===_1n$6,neg:t=>mod(-t,e),eql:(e,t)=>e===t,sqr:t=>mod(t*t,e),add:(t,r)=>mod(t+r,e),sub:(t,r)=>mod(t-r,e),mul:(t,r)=>mod(t*r,e),pow:(e,t)=>FpPow(s,e,t),div:(t,r)=>mod(t*invert(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>invert(t,e),sqrt:i.sqrt||(e=>a(s,e)),invertBatch:e=>FpInvertBatch(s,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?numberToBytesLE(e,o):numberToBytesBE(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return r?bytesToNumberLE(e):bytesToNumberBE(e)}});return Object.freeze(s)}function getFieldBytesLength(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function getMinHashLength(e){const t=getFieldBytesLength(e);return t+Math.ceil(t/2)}function mapHashToField(e,t,r=!1){const i=e.length,n=getFieldBytesLength(t),o=getMinHashLength(t);if(i<16||i<o||i>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${i}`);const a=mod(r?bytesToNumberBE(e):bytesToNumberLE(e),t-_1n$6)+_1n$6;return r?numberToBytesLE(a,n):numberToBytesBE(a,n)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$5=BigInt(1);function wNAF(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},i=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let i=e.ZERO,n=t;for(;r>_0n$3;)r&_1n$5&&(i=i.add(n)),n=n.double(),r>>=_1n$5;return i},precomputeWindow(e,t){const{windows:r,windowSize:n}=i(t),o=[];let a=e,s=a;for(let i=0;i<r;i++){s=a,o.push(s);for(let e=1;e<n;e++)s=s.add(a),o.push(s);a=s.double()}return o},wNAF(t,n,o){const{windows:a,windowSize:s}=i(t);let u=e.ZERO,l=e.BASE;const c=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<a;e++){const t=e*s;let i=Number(o&c);o>>=d,i>s&&(i-=h,o+=_1n$5);const a=t,f=t+Math.abs(i)-1,p=e%2!=0,m=i<0;0===i?l=l.add(r(p,n[a])):u=u.add(r(m,n[f]))}return{p:u,f:l}},wNAFCached(e,t,r,i){const n=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,n),1!==n&&t.set(e,i(o))),this.wNAF(n,o,r)}}}function validateBasic(e){return validateField(e.Fp),validateObject(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(e){const t=validateBasic(e);validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:i,a:n}=t;if(r){if(!i.eql(n,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=DER;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const r=e[1],i=e.subarray(2,r+2);if(!r||i.length!==r)throw new t("Invalid signature integer: wrong length");if(128&i[0])throw new t("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:b2n(i),l:e.subarray(r+2)}},toSig(e){const{Err:t}=DER,r="string"==typeof e?h2b(e):e;abytes$1(r);let i=r.length;if(i<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==i-2)throw new t("Invalid signature: incorrect length");const{d:n,l:o}=DER._parseInt(r.subarray(2)),{d:a,l:s}=DER._parseInt(o);if(s.length)throw new t("Invalid signature: left bytes after parsing");return{r:n,s:a}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},i=t(r(e.s)),n=t(r(e.r)),o=i.length/2,a=n.length/2,s=r(o),u=r(a);return`30${r(a+o+4)}02${u}${n}02${s}${i}`}},_0n$2=BigInt(0),_1n$4=BigInt(1);BigInt(2);const _3n=BigInt(3);function weierstrassPoints(e){const t=validatePointOpts(e),{Fp:r}=t,i=t.toBytes||((e,t,i)=>{const n=t.toAffine();return concatBytes(Uint8Array.from([4]),r.toBytes(n.x),r.toBytes(n.y))}),n=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){const{a:i,b:n}=t,o=r.sqr(e),a=r.mul(o,e);return r.add(r.add(a,r.mul(e,i)),n)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){return"bigint"==typeof e&&_0n$2<e&&e<t.n}function s(e){if(!a(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(e){const{allowedPrivateKeyLengths:r,nByteLength:i,wrapPrivateKey:n,n:o}=t;if(r&&"bigint"!=typeof e){if(isBytes$2(e)&&(e=bytesToHex(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*i,"0")}let a;try{a="bigint"==typeof e?e:bytesToNumberBE(ensureBytes("private key",e,i))}catch(u){throw new Error(`private key must be ${i} bytes, hex or bigint, not ${typeof e}`)}return n&&(a=mod(a,o)),s(a),a}const l=new Map;function c(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(e,t,i){if(this.px=e,this.py=t,this.pz=i,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==i||!r.isValid(i))throw new Error("z required")}static fromAffine(e){const{x:t,y:i}=e||{};if(!e||!r.isValid(t)||!r.isValid(i))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const n=e=>r.eql(e,r.ZERO);return n(t)&&n(i)?h.ZERO:new h(t,i,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(n(ensureBytes("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(u(e))}_setWindowSize(e){this._WINDOW_SIZE=e,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:i}=this.toAffine();if(!r.isValid(e)||!r.isValid(i))throw new Error("bad point: x or y not FE");const n=r.sqr(i),a=o(e);if(!r.eql(n,a))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:i,pz:n}=this,{px:o,py:a,pz:s}=e,u=r.eql(r.mul(t,s),r.mul(o,n)),l=r.eql(r.mul(i,s),r.mul(a,n));return u&&l}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:i}=t,n=r.mul(i,_3n),{px:o,py:a,pz:s}=this;let u=r.ZERO,l=r.ZERO,c=r.ZERO,d=r.mul(o,o),f=r.mul(a,a),p=r.mul(s,s),m=r.mul(o,a);return m=r.add(m,m),c=r.mul(o,s),c=r.add(c,c),u=r.mul(e,c),l=r.mul(n,p),l=r.add(u,l),u=r.sub(f,l),l=r.add(f,l),l=r.mul(u,l),u=r.mul(m,u),c=r.mul(n,c),p=r.mul(e,p),m=r.sub(d,p),m=r.mul(e,m),m=r.add(m,c),c=r.add(d,d),d=r.add(c,d),d=r.add(d,p),d=r.mul(d,m),l=r.add(l,d),p=r.mul(a,s),p=r.add(p,p),d=r.mul(p,m),u=r.sub(u,d),c=r.mul(p,f),c=r.add(c,c),c=r.add(c,c),new h(u,l,c)}add(e){c(e);const{px:i,py:n,pz:o}=this,{px:a,py:s,pz:u}=e;let l=r.ZERO,d=r.ZERO,f=r.ZERO;const p=t.a,m=r.mul(t.b,_3n);let g=r.mul(i,a),y=r.mul(n,s),b=r.mul(o,u),w=r.add(i,n),v=r.add(a,s);w=r.mul(w,v),v=r.add(g,y),w=r.sub(w,v),v=r.add(i,o);let _=r.add(a,u);return v=r.mul(v,_),_=r.add(g,b),v=r.sub(v,_),_=r.add(n,o),l=r.add(s,u),_=r.mul(_,l),l=r.add(y,b),_=r.sub(_,l),f=r.mul(p,v),l=r.mul(m,b),f=r.add(l,f),l=r.sub(y,f),f=r.add(y,f),d=r.mul(l,f),y=r.add(g,g),y=r.add(y,g),b=r.mul(p,b),v=r.mul(m,v),y=r.add(y,b),b=r.sub(g,b),b=r.mul(p,b),v=r.add(v,b),g=r.mul(y,v),d=r.add(d,g),g=r.mul(_,v),l=r.mul(w,l),l=r.sub(l,g),g=r.mul(w,y),f=r.mul(_,f),f=r.add(f,g),new h(l,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return f.wNAFCached(this,l,e,e=>{const t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(h.fromAffine)})}multiplyUnsafe(e){const i=h.ZERO;if(e===_0n$2)return i;if(s(e),e===_1n$4)return this;const{endo:n}=t;if(!n)return f.unsafeLadder(this,e);let{k1neg:o,k1:a,k2neg:u,k2:l}=n.splitScalar(e),c=i,d=i,p=this;for(;a>_0n$2||l>_0n$2;)a&_1n$4&&(c=c.add(p)),l&_1n$4&&(d=d.add(p)),p=p.double(),a>>=_1n$4,l>>=_1n$4;return o&&(c=c.negate()),u&&(d=d.negate()),d=new h(r.mul(d.px,n.beta),d.py,d.pz),c.add(d)}multiply(e){s(e);let i,n,o=e;const{endo:a}=t;if(a){const{k1neg:e,k1:t,k2neg:s,k2:u}=a.splitScalar(o);let{p:l,f:c}=this.wNAF(t),{p:d,f:p}=this.wNAF(u);l=f.constTimeNegate(e,l),d=f.constTimeNegate(s,d),d=new h(r.mul(d.px,a.beta),d.py,d.pz),i=l.add(d),n=c.add(p)}else{const{p:e,f:t}=this.wNAF(o);i=e,n=t}return h.normalizeZ([i,n])[0]}multiplyAndAddUnsafe(e,t,r){const i=h.BASE,n=(e,t)=>t!==_0n$2&&t!==_1n$4&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),o=n(this,t).add(n(e,r));return o.is0()?void 0:o}toAffine(e){const{px:t,py:i,pz:n}=this,o=this.is0();null==e&&(e=o?r.ONE:r.inv(n));const a=r.mul(t,e),s=r.mul(i,e),u=r.mul(n,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:s}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===_1n$4)return!0;if(r)return r(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===_1n$4?this:r?r(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),i(h,this,e)}toHex(e=!0){return bytesToHex(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const d=t.nBitLength,f=wNAF(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:a}}function validateOpts$1(e){const t=validateBasic(e);return validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function weierstrass(e){const t=validateOpts$1(e),{Fp:r,n:i}=t,n=r.BYTES+1,o=2*r.BYTES+1;function a(e){return mod(e,i)}function s(e){return invert(e,i)}const{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:h}=weierstrassPoints({...t,toBytes(e,t,i){const n=t.toAffine(),o=r.toBytes(n.x),a=concatBytes;return i?a(Uint8Array.from([t.hasEvenY()?2:3]),o):a(Uint8Array.from([4]),o,r.toBytes(n.y))},fromBytes(e){const t=e.length,i=e[0],a=e.subarray(1);if(t!==n||2!==i&&3!==i){if(t===o&&4===i){return{x:r.fromBytes(a.subarray(0,r.BYTES)),y:r.fromBytes(a.subarray(r.BYTES,2*r.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${n} compressed bytes or ${o} uncompressed bytes`)}{const e=bytesToNumberBE(a);if(!(_0n$2<(s=e)&&s<r.ORDER))throw new Error("Point is not on curve");const t=c(e);let n;try{n=r.sqrt(t)}catch(u){const e=u instanceof Error?": "+u.message:"";throw new Error("Point is not on curve"+e)}return!(1&~i)!==((n&_1n$4)===_1n$4)&&(n=r.neg(n)),{x:e,y:n}}var s}}),d=e=>bytesToHex(numberToBytesBE(e,t.nByteLength));function f(e){return e>i>>_1n$4}const p=(e,t,r)=>bytesToNumberBE(e.slice(t,r));class m{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=ensureBytes("compactSignature",e,2*r),new m(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=DER.toSig(ensureBytes("DER",e));return new m(t,r)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:i,s:n,recovery:o}=this,l=w(ensureBytes("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const c=2===o||3===o?i+t.n:i;if(c>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&o?"03":"02",f=u.fromHex(h+d(c)),p=s(c),m=a(-l*p),g=a(n*p),y=u.BASE.multiplyAndAddUnsafe(f,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const g={isValidPrivateKey(e){try{return l(e),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const e=getMinHashLength(t.n);return mapHashToField(t.randomBytes(e),t.n)},precompute:(e=8,t=u.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=isBytes$2(e),r="string"==typeof e,i=(t||r)&&e.length;return t?i===n||i===o:r?i===2*n||i===2*o:e instanceof u}const b=t.bits2int||function(e){const r=bytesToNumberBE(e),i=8*e.length-t.nBitLength;return i>0?r>>BigInt(i):r},w=t.bits2int_modN||function(e){return a(b(e))},v=bitMask(t.nBitLength);function _(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(_0n$2<=e&&e<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return numberToBytesBE(e,t.nByteLength)}function E(e,i,n=S){if(["recovered","canonical"].some(e=>e in n))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:c}=t;let{lowS:d,prehash:p,extraEntropy:g}=n;null==d&&(d=!0),e=ensureBytes("msgHash",e),p&&(e=ensureBytes("prehashed msgHash",o(e)));const y=w(e),v=l(i),E=[_(v),_(y)];if(null!=g&&!1!==g){const e=!0===g?c(r.BYTES):g;E.push(ensureBytes("extraEntropy",e))}const A=concatBytes(...E),M=y;return{seed:A,k2sig:function(e){const t=b(e);if(!h(t))return;const r=s(t),i=u.BASE.multiply(t).toAffine(),n=a(i.x);if(n===_0n$2)return;const o=a(r*a(M+n*v));if(o===_0n$2)return;let l=(i.x===n?0:2)|Number(i.y&_1n$4),c=o;return d&&f(o)&&(c=function(e){return f(e)?a(-e):e}(o),l^=1),new m(n,c,l)}}}const S={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return u.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return u.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,r,i=S){const{seed:n,k2sig:o}=E(e,r,i),a=t;return createHmacDrbg(a.hash.outputLen,a.nByteLength,a.hmac)(n,o)},verify:function(e,r,i,n=A){var o;const l=e;if(r=ensureBytes("msgHash",r),i=ensureBytes("publicKey",i),"strict"in n)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:h}=n;let d,f;try{if("string"==typeof l||isBytes$2(l))try{d=m.fromDER(l)}catch(S){if(!(S instanceof DER.Err))throw S;d=m.fromCompact(l)}else{if("object"!=typeof l||"bigint"!=typeof l.r||"bigint"!=typeof l.s)throw new Error("PARSE");{const{r:e,s:t}=l;d=new m(e,t)}}f=u.fromHex(i)}catch(M){if("PARSE"===M.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&d.hasHighS())return!1;h&&(r=t.hash(r));const{r:p,s:g}=d,y=w(r),b=s(g),v=a(y*b),_=a(p*b),E=null==(o=u.BASE.multiplyAndAddUnsafe(f,v,_))?void 0:o.toAffine();return!!E&&a(E.x)===p},ProjectivePoint:u,Signature:m,utils:g}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(e){return{hash:e,hmac:(t,...r)=>hmac$1(e,t,concatBytes$1(...r)),randomBytes:randomBytes$3}}function createCurve(e,t){const r=t=>weierstrass({...e,...getHash(t)});return Object.freeze({...r(t),create:r})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(4);const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n$3=BigInt(1),_2n$3=BigInt(2),divNearest=(e,t)=>(e+t/_2n$3)/t;function sqrtMod(e){const t=secp256k1P,r=BigInt(3),i=BigInt(6),n=BigInt(11),o=BigInt(22),a=BigInt(23),s=BigInt(44),u=BigInt(88),l=e*e*e%t,c=l*l*e%t,h=pow2(c,r,t)*c%t,d=pow2(h,r,t)*c%t,f=pow2(d,_2n$3,t)*l%t,p=pow2(f,n,t)*f%t,m=pow2(p,o,t)*p%t,g=pow2(m,s,t)*m%t,y=pow2(g,u,t)*g%t,b=pow2(y,s,t)*m%t,w=pow2(b,r,t)*c%t,v=pow2(w,a,t)*p%t,_=pow2(v,i,t)*l%t,E=pow2(_,_2n$3,t);if(!Fp$1.eql(Fp$1.sqr(E),e))throw new Error("Cannot find square root");return E}const Fp$1=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1$1=createCurve({a:BigInt(0),b:BigInt(7),Fp:Fp$1,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=secp256k1N,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-_1n$3*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),s=divNearest(o*e,t),u=divNearest(-i*e,t);let l=mod(e-s*r-u*n,t),c=mod(-s*i-u*o,t);const h=l>a,d=c>a;if(h&&(l=t-l),d&&(c=t-c),l>a||c>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:d,k2:c}}}},sha256$4);BigInt(0),secp256k1$1.ProjectivePoint;var hash$2={},utils$4={},minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;function e(e,t){if(!e)throw new Error(t||"Assertion failed")}return hasRequiredMinimalisticAssert=1,minimalisticAssert=e,e.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)},minimalisticAssert}var inherits_browser={exports:{}},hasRequiredInherits_browser,hasRequiredUtils$4;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,"function"==typeof Object.create?inherits_browser.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),inherits_browser.exports}function requireUtils$4(){if(hasRequiredUtils$4)return utils$4;hasRequiredUtils$4=1;var e=requireMinimalisticAssert(),t=requireInherits_browser();function r(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function i(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function n(e){return 1===e.length?"0"+e:e}function o(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}return utils$4.inherits=t,utils$4.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),o=0;o<e.length;o+=2)i.push(parseInt(e[o]+e[o+1],16))}else for(var n=0,o=0;o<e.length;o++){var a=e.charCodeAt(o);a<128?i[n++]=a:a<2048?(i[n++]=a>>6|192,i[n++]=63&a|128):r(e,o)?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++o)),i[n++]=a>>18|240,i[n++]=a>>12&63|128,i[n++]=a>>6&63|128,i[n++]=63&a|128):(i[n++]=a>>12|224,i[n++]=a>>6&63|128,i[n++]=63&a|128)}else for(o=0;o<e.length;o++)i[o]=0|e[o];return i},utils$4.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t},utils$4.htonl=i,utils$4.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var a=e[n];"little"===t&&(a=i(a)),r+=o(a.toString(16))}return r},utils$4.zero2=n,utils$4.zero8=o,utils$4.join32=function(t,r,i,n){var o=i-r;e(o%4==0);for(var a=new Array(o/4),s=0,u=r;s<a.length;s++,u+=4){var l;l="big"===n?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],a[s]=l>>>0}return a},utils$4.split32=function(e,t){for(var r=new Array(4*e.length),i=0,n=0;i<e.length;i++,n+=4){var o=e[i];"big"===t?(r[n]=o>>>24,r[n+1]=o>>>16&255,r[n+2]=o>>>8&255,r[n+3]=255&o):(r[n+3]=o>>>24,r[n+2]=o>>>16&255,r[n+1]=o>>>8&255,r[n]=255&o)}return r},utils$4.rotr32=function(e,t){return e>>>t|e<<32-t},utils$4.rotl32=function(e,t){return e<<t|e>>>32-t},utils$4.sum32=function(e,t){return e+t>>>0},utils$4.sum32_3=function(e,t,r){return e+t+r>>>0},utils$4.sum32_4=function(e,t,r,i){return e+t+r+i>>>0},utils$4.sum32_5=function(e,t,r,i,n){return e+t+r+i+n>>>0},utils$4.sum64=function(e,t,r,i){var n=e[t],o=i+e[t+1]>>>0,a=(o<i?1:0)+r+n;e[t]=a>>>0,e[t+1]=o},utils$4.sum64_hi=function(e,t,r,i){return(t+i>>>0<t?1:0)+e+r>>>0},utils$4.sum64_lo=function(e,t,r,i){return t+i>>>0},utils$4.sum64_4_hi=function(e,t,r,i,n,o,a,s){var u=0,l=t;return u+=(l=l+i>>>0)<t?1:0,u+=(l=l+o>>>0)<o?1:0,e+r+n+a+(u+=(l=l+s>>>0)<s?1:0)>>>0},utils$4.sum64_4_lo=function(e,t,r,i,n,o,a,s){return t+i+o+s>>>0},utils$4.sum64_5_hi=function(e,t,r,i,n,o,a,s,u,l){var c=0,h=t;return c+=(h=h+i>>>0)<t?1:0,c+=(h=h+o>>>0)<o?1:0,c+=(h=h+s>>>0)<s?1:0,e+r+n+a+u+(c+=(h=h+l>>>0)<l?1:0)>>>0},utils$4.sum64_5_lo=function(e,t,r,i,n,o,a,s,u,l){return t+i+o+s+l>>>0},utils$4.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},utils$4.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},utils$4.shr64_hi=function(e,t,r){return e>>>r},utils$4.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},utils$4}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var e=requireUtils$4(),t=requireMinimalisticAssert();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=r,r.prototype.update=function(t,r){if(t=e.toArray(t,r),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=e.join32(t,0,t.length-i,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},r.prototype.digest=function(e){return this.update(this._pad()),t(null===this.pending),this._digest(e)},r.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var n=1;n<r;n++)i[n]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=e>>>24&255,i[n++]=e>>>16&255,i[n++]=e>>>8&255,i[n++]=255&e}else for(i[n++]=255&e,i[n++]=e>>>8&255,i[n++]=e>>>16&255,i[n++]=e>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,o=8;o<this.padLength;o++)i[n++]=0;return i},common$1}var sha$1={},common={},hasRequiredCommon,_1,hasRequired_1,_256,hasRequired_256,_224,hasRequired_224,_512,hasRequired_512,_384,hasRequired_384,hasRequiredSha$1;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var e=requireUtils$4().rotr32;function t(e,t,r){return e&t^~e&r}function r(e,t,r){return e&t^e&r^t&r}function i(e,t,r){return e^t^r}return common.ft_1=function(e,n,o,a){return 0===e?t(n,o,a):1===e||3===e?i(n,o,a):2===e?r(n,o,a):void 0},common.ch32=t,common.maj32=r,common.p32=i,common.s0_256=function(t){return e(t,2)^e(t,13)^e(t,22)},common.s1_256=function(t){return e(t,6)^e(t,11)^e(t,25)},common.g0_256=function(t){return e(t,7)^e(t,18)^t>>>3},common.g1_256=function(t){return e(t,17)^e(t,19)^t>>>10},common}function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var e=requireUtils$4(),t=requireCommon$1(),r=requireCommon(),i=e.rotl32,n=e.sum32,o=e.sum32_5,a=r.ft_1,s=t.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;s.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return e.inherits(l,s),_1=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.W,s=0;s<16;s++)r[s]=e[t+s];for(;s<r.length;s++)r[s]=i(r[s-3]^r[s-8]^r[s-14]^r[s-16],1);var l=this.h[0],c=this.h[1],h=this.h[2],d=this.h[3],f=this.h[4];for(s=0;s<r.length;s++){var p=~~(s/20),m=o(i(l,5),a(p,c,h,d),f,r[s],u[p]);f=d,d=h,h=i(c,30),c=l,l=m}this.h[0]=n(this.h[0],l),this.h[1]=n(this.h[1],c),this.h[2]=n(this.h[2],h),this.h[3]=n(this.h[3],d),this.h[4]=n(this.h[4],f)},l.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"big"):e.split32(this.h,"big")},_1}function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var e=requireUtils$4(),t=requireCommon$1(),r=requireCommon(),i=requireMinimalisticAssert(),n=e.sum32,o=e.sum32_4,a=e.sum32_5,s=r.ch32,u=r.maj32,l=r.s0_256,c=r.s1_256,h=r.g0_256,d=r.g1_256,f=t.BlockHash,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;f.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=p,this.W=new Array(64)}return e.inherits(m,f),_256=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(e,t){for(var r=this.W,f=0;f<16;f++)r[f]=e[t+f];for(;f<r.length;f++)r[f]=o(d(r[f-2]),r[f-7],h(r[f-15]),r[f-16]);var p=this.h[0],m=this.h[1],g=this.h[2],y=this.h[3],b=this.h[4],w=this.h[5],v=this.h[6],_=this.h[7];for(i(this.k.length===r.length),f=0;f<r.length;f++){var E=a(_,c(b),s(b,w,v),this.k[f],r[f]),S=n(l(p),u(p,m,g));_=v,v=w,w=b,b=n(y,E),y=g,g=m,m=p,p=n(E,S)}this.h[0]=n(this.h[0],p),this.h[1]=n(this.h[1],m),this.h[2]=n(this.h[2],g),this.h[3]=n(this.h[3],y),this.h[4]=n(this.h[4],b),this.h[5]=n(this.h[5],w),this.h[6]=n(this.h[6],v),this.h[7]=n(this.h[7],_)},m.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"big"):e.split32(this.h,"big")},_256}function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var e=requireUtils$4(),t=require_256();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return e.inherits(r,t),_224=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h.slice(0,7),"big"):e.split32(this.h.slice(0,7),"big")},_224}function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var e=requireUtils$4(),t=requireCommon$1(),r=requireMinimalisticAssert(),i=e.rotr64_hi,n=e.rotr64_lo,o=e.shr64_hi,a=e.shr64_lo,s=e.sum64,u=e.sum64_hi,l=e.sum64_lo,c=e.sum64_4_hi,h=e.sum64_4_lo,d=e.sum64_5_hi,f=e.sum64_5_lo,p=t.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function g(){if(!(this instanceof g))return new g;p.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=new Array(160)}function y(e,t,r,i,n){var o=e&r^~e&n;return o<0&&(o+=4294967296),o}function b(e,t,r,i,n,o){var a=t&i^~t&o;return a<0&&(a+=4294967296),a}function w(e,t,r,i,n){var o=e&r^e&n^r&n;return o<0&&(o+=4294967296),o}function v(e,t,r,i,n,o){var a=t&i^t&o^i&o;return a<0&&(a+=4294967296),a}function _(e,t){var r=i(e,t,28)^i(t,e,2)^i(t,e,7);return r<0&&(r+=4294967296),r}function E(e,t){var r=n(e,t,28)^n(t,e,2)^n(t,e,7);return r<0&&(r+=4294967296),r}function S(e,t){var r=i(e,t,14)^i(e,t,18)^i(t,e,9);return r<0&&(r+=4294967296),r}function A(e,t){var r=n(e,t,14)^n(e,t,18)^n(t,e,9);return r<0&&(r+=4294967296),r}function M(e,t){var r=i(e,t,1)^i(e,t,8)^o(e,t,7);return r<0&&(r+=4294967296),r}function R(e,t){var r=n(e,t,1)^n(e,t,8)^a(e,t,7);return r<0&&(r+=4294967296),r}function x(e,t){var r=i(e,t,19)^i(t,e,29)^o(e,t,6);return r<0&&(r+=4294967296),r}function k(e,t){var r=n(e,t,19)^n(t,e,29)^a(e,t,6);return r<0&&(r+=4294967296),r}return e.inherits(g,p),_512=g,g.blockSize=1024,g.outSize=512,g.hmacStrength=192,g.padLength=128,g.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var n=x(r[i-4],r[i-3]),o=k(r[i-4],r[i-3]),a=r[i-14],s=r[i-13],u=M(r[i-30],r[i-29]),l=R(r[i-30],r[i-29]),d=r[i-32],f=r[i-31];r[i]=c(n,o,a,s,u,l,d,f),r[i+1]=h(n,o,a,s,u,l,d,f)}},g.prototype._update=function(e,t){this._prepareBlock(e,t);var i=this.W,n=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],h=this.h[4],p=this.h[5],m=this.h[6],g=this.h[7],M=this.h[8],R=this.h[9],x=this.h[10],k=this.h[11],T=this.h[12],P=this.h[13],C=this.h[14],I=this.h[15];r(this.k.length===i.length);for(var $=0;$<i.length;$+=2){var B=C,O=I,N=S(M,R),L=A(M,R),q=y(M,R,x,k,T),j=b(M,R,x,k,T,P),U=this.k[$],D=this.k[$+1],F=i[$],W=i[$+1],K=d(B,O,N,L,q,j,U,D,F,W),H=f(B,O,N,L,q,j,U,D,F,W);B=_(n,o),O=E(n,o),N=w(n,o,a,c,h),L=v(n,o,a,c,h,p);var z=u(B,O,N,L),V=l(B,O,N,L);C=T,I=P,T=x,P=k,x=M,k=R,M=u(m,g,K,H),R=l(g,g,K,H),m=h,g=p,h=a,p=c,a=n,c=o,n=u(K,H,z,V),o=l(K,H,z,V)}s(this.h,0,n,o),s(this.h,2,a,c),s(this.h,4,h,p),s(this.h,6,m,g),s(this.h,8,M,R),s(this.h,10,x,k),s(this.h,12,T,P),s(this.h,14,C,I)},g.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"big"):e.split32(this.h,"big")},_512}function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var e=requireUtils$4(),t=require_512();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return e.inherits(r,t),_384=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h.slice(0,12),"big"):e.split32(this.h.slice(0,12),"big")},_384}function requireSha$1(){return hasRequiredSha$1||(hasRequiredSha$1=1,sha$1.sha1=require_1(),sha$1.sha224=require_224(),sha$1.sha256=require_256(),sha$1.sha384=require_384(),sha$1.sha512=require_512()),sha$1}var ripemd={},hasRequiredRipemd,hmac,hasRequiredHmac,hasRequiredHash$1;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var e=requireUtils$4(),t=requireCommon$1(),r=e.rotl32,i=e.sum32,n=e.sum32_3,o=e.sum32_4,a=t.BlockHash;function s(){if(!(this instanceof s))return new s;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}function l(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function c(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}e.inherits(s,a),ripemd.ripemd160=s,s.blockSize=512,s.outSize=160,s.hmacStrength=192,s.padLength=64,s.prototype._update=function(e,t){for(var a=this.h[0],s=this.h[1],m=this.h[2],g=this.h[3],y=this.h[4],b=a,w=s,v=m,_=g,E=y,S=0;S<80;S++){var A=i(r(o(a,u(S,s,m,g),e[h[S]+t],l(S)),f[S]),y);a=y,y=g,g=r(m,10),m=s,s=A,A=i(r(o(b,u(79-S,w,v,_),e[d[S]+t],c(S)),p[S]),E),b=E,E=_,_=r(v,10),v=w,w=A}A=n(this.h[1],m,_),this.h[1]=n(this.h[2],g,E),this.h[2]=n(this.h[3],y,b),this.h[3]=n(this.h[4],a,w),this.h[4]=n(this.h[0],s,v),this.h[0]=A},s.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"little"):e.split32(this.h,"little")};var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}function requireHmac(){if(hasRequiredHmac)return hmac;hasRequiredHmac=1;var e=requireUtils$4(),t=requireMinimalisticAssert();function r(t,i,n){if(!(this instanceof r))return new r(t,i,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(e.toArray(i,n))}return hmac=r,r.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),t(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=(new this.Hash).update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=(new this.Hash).update(e)},r.prototype.update=function(e,t){return this.inner.update(e,t),this},r.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},hmac}function requireHash$1(){return hasRequiredHash$1||(hasRequiredHash$1=1,(e=hash$2).utils=requireUtils$4(),e.common=requireCommon$1(),e.sha=requireSha$1(),e.ripemd=requireRipemd(),e.hmac=requireHmac(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160),hash$2;var e}var util$2={},types={},shams$1,hasRequiredShams$1,shams,hasRequiredShams,esObjectAtoms,hasRequiredEsObjectAtoms,esErrors,hasRequiredEsErrors,_eval,hasRequired_eval,range,hasRequiredRange,ref,hasRequiredRef,syntax,hasRequiredSyntax,type$1,hasRequiredType,uri,hasRequiredUri,abs,hasRequiredAbs,floor,hasRequiredFloor,max,hasRequiredMax,min,hasRequiredMin,pow,hasRequiredPow,round,hasRequiredRound,_isNaN,hasRequired_isNaN,sign$5,hasRequiredSign$1,gOPD,hasRequiredGOPD,gopd,hasRequiredGopd,esDefineProperty,hasRequiredEsDefineProperty,hasSymbols,hasRequiredHasSymbols,Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf,Object_getPrototypeOf,hasRequiredObject_getPrototypeOf,implementation$1,hasRequiredImplementation$1,functionBind,hasRequiredFunctionBind,functionCall,hasRequiredFunctionCall,functionApply,hasRequiredFunctionApply,reflectApply,hasRequiredReflectApply,actualApply,hasRequiredActualApply,callBindApplyHelpers,hasRequiredCallBindApplyHelpers,get$3,hasRequiredGet,getProto,hasRequiredGetProto,hasown,hasRequiredHasown,getIntrinsic,hasRequiredGetIntrinsic,callBound,hasRequiredCallBound,isArguments$1,hasRequiredIsArguments$1,isRegex,hasRequiredIsRegex,safeRegexTest,hasRequiredSafeRegexTest,generatorFunction,hasRequiredGeneratorFunction,isGeneratorFunction,hasRequiredIsGeneratorFunction,isCallable,hasRequiredIsCallable,forEach,hasRequiredForEach,possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames,availableTypedArrays,hasRequiredAvailableTypedArrays;function requireShams$1(){return hasRequiredShams$1?shams$1:(hasRequiredShams$1=1,shams$1=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var i in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0})}function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var e=requireShams$1();return shams=function(){return e()&&!!Symbol.toStringTag}}function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms?esObjectAtoms:(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object)}function requireEsErrors(){return hasRequiredEsErrors?esErrors:(hasRequiredEsErrors=1,esErrors=Error)}function require_eval(){return hasRequired_eval?_eval:(hasRequired_eval=1,_eval=EvalError)}function requireRange(){return hasRequiredRange?range:(hasRequiredRange=1,range=RangeError)}function requireRef(){return hasRequiredRef?ref:(hasRequiredRef=1,ref=ReferenceError)}function requireSyntax(){return hasRequiredSyntax?syntax:(hasRequiredSyntax=1,syntax=SyntaxError)}function requireType(){return hasRequiredType?type$1:(hasRequiredType=1,type$1=TypeError)}function requireUri(){return hasRequiredUri?uri:(hasRequiredUri=1,uri=URIError)}function requireAbs(){return hasRequiredAbs?abs:(hasRequiredAbs=1,abs=Math.abs)}function requireFloor(){return hasRequiredFloor?floor:(hasRequiredFloor=1,floor=Math.floor)}function requireMax(){return hasRequiredMax?max:(hasRequiredMax=1,max=Math.max)}function requireMin(){return hasRequiredMin?min:(hasRequiredMin=1,min=Math.min)}function requirePow(){return hasRequiredPow?pow:(hasRequiredPow=1,pow=Math.pow)}function requireRound(){return hasRequiredRound?round:(hasRequiredRound=1,round=Math.round)}function require_isNaN(){return hasRequired_isNaN?_isNaN:(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(e){return e!=e})}function requireSign$1(){if(hasRequiredSign$1)return sign$5;hasRequiredSign$1=1;var e=require_isNaN();return sign$5=function(t){return e(t)||0===t?t:t<0?-1:1}}function requireGOPD(){return hasRequiredGOPD?gOPD:(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor)}function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var e=requireGOPD();if(e)try{e([],"length")}catch(t){e=null}return gopd=e}function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}return esDefineProperty=e}function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var e="undefined"!=typeof Symbol&&Symbol,t=requireShams$1();return hasSymbols=function(){return"function"==typeof e&&("function"==typeof Symbol&&("symbol"==typeof e("foo")&&("symbol"==typeof Symbol("bar")&&t())))}}function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf?Reflect_getPrototypeOf:(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null)}function requireObject_getPrototypeOf(){return hasRequiredObject_getPrototypeOf?Object_getPrototypeOf:(hasRequiredObject_getPrototypeOf=1,Object_getPrototypeOf=requireEsObjectAtoms().getPrototypeOf||null)}function requireImplementation$1(){if(hasRequiredImplementation$1)return implementation$1;hasRequiredImplementation$1=1;var e=Object.prototype.toString,t=Math.max,r=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var n=0;n<t.length;n+=1)r[n+e.length]=t[n];return r};return implementation$1=function(i){var n=this;if("function"!=typeof n||"[object Function]"!==e.apply(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var o,a=function(e,t){for(var r=[],i=t,n=0;i<e.length;i+=1,n+=1)r[n]=e[i];return r}(arguments,1),s=t(0,n.length-a.length),u=[],l=0;l<s;l++)u[l]="$"+l;if(o=Function("binder","return function ("+function(e,t){for(var r="",i=0;i<e.length;i+=1)r+=e[i],i+1<e.length&&(r+=t);return r}(u,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var e=n.apply(this,r(a,arguments));return Object(e)===e?e:this}return n.apply(i,r(a,arguments))}),n.prototype){var c=function(){};c.prototype=n.prototype,o.prototype=new c,c.prototype=null}return o},implementation$1}function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var e=requireImplementation$1();return functionBind=Function.prototype.bind||e}function requireFunctionCall(){return hasRequiredFunctionCall?functionCall:(hasRequiredFunctionCall=1,functionCall=Function.prototype.call)}function requireFunctionApply(){return hasRequiredFunctionApply?functionApply:(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply)}function requireReflectApply(){return hasRequiredReflectApply?reflectApply:(hasRequiredReflectApply=1,reflectApply="undefined"!=typeof Reflect&&Reflect&&Reflect.apply)}function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var e=requireFunctionBind(),t=requireFunctionApply(),r=requireFunctionCall(),i=requireReflectApply();return actualApply=i||e.call(r,t)}function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var e=requireFunctionBind(),t=requireType(),r=requireFunctionCall(),i=requireActualApply();return callBindApplyHelpers=function(n){if(n.length<1||"function"!=typeof n[0])throw new t("a function is required");return i(e,r,n)}}function requireGet(){if(hasRequiredGet)return get$3;hasRequiredGet=1;var e,t=requireCallBindApplyHelpers(),r=requireGopd();try{e=[].__proto__===Array.prototype}catch(a){if(!a||"object"!=typeof a||!("code"in a)||"ERR_PROTO_ACCESS"!==a.code)throw a}var i=!!e&&r&&r(Object.prototype,"__proto__"),n=Object,o=n.getPrototypeOf;return get$3=i&&"function"==typeof i.get?t([i.get]):"function"==typeof o&&function(e){return o(null==e?e:n(e))}}function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var e=requireReflect_getPrototypeOf(),t=requireObject_getPrototypeOf(),r=requireGet();return getProto=e?function(t){return e(t)}:t?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return t(e)}:r?function(e){return r(e)}:null}function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=requireFunctionBind();return hasown=r.call(e,t)}function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;var e;hasRequiredGetIntrinsic=1;var t=requireEsObjectAtoms(),r=requireEsErrors(),i=require_eval(),n=requireRange(),o=requireRef(),a=requireSyntax(),s=requireType(),u=requireUri(),l=requireAbs(),c=requireFloor(),h=requireMax(),d=requireMin(),f=requirePow(),p=requireRound(),m=requireSign$1(),g=Function,y=function(e){try{return g('"use strict"; return ('+e+").constructor;")()}catch(t){}},b=requireGopd(),w=requireEsDefineProperty(),v=function(){throw new s},_=b?function(){try{return v}catch(e){try{return b(arguments,"callee").get}catch(t){return v}}}():v,E=requireHasSymbols()(),S=requireGetProto(),A=requireObject_getPrototypeOf(),M=requireReflect_getPrototypeOf(),R=requireFunctionApply(),x=requireFunctionCall(),k={},T="undefined"!=typeof Uint8Array&&S?S(Uint8Array):e,P={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?e:ArrayBuffer,"%ArrayIteratorPrototype%":E&&S?S([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":k,"%AsyncGenerator%":k,"%AsyncGeneratorFunction%":k,"%AsyncIteratorPrototype%":k,"%Atomics%":"undefined"==typeof Atomics?e:Atomics,"%BigInt%":"undefined"==typeof BigInt?e:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?e:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":i,"%Float16Array%":"undefined"==typeof Float16Array?e:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?e:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?e:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?e:FinalizationRegistry,"%Function%":g,"%GeneratorFunction%":k,"%Int8Array%":"undefined"==typeof Int8Array?e:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?e:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&S?S(S([][Symbol.iterator]())):e,"%JSON%":"object"==typeof JSON?JSON:e,"%Map%":"undefined"==typeof Map?e:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&E&&S?S((new Map)[Symbol.iterator]()):e,"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?e:Promise,"%Proxy%":"undefined"==typeof Proxy?e:Proxy,"%RangeError%":n,"%ReferenceError%":o,"%Reflect%":"undefined"==typeof Reflect?e:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?e:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&E&&S?S((new Set)[Symbol.iterator]()):e,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&S?S(""[Symbol.iterator]()):e,"%Symbol%":E?Symbol:e,"%SyntaxError%":a,"%ThrowTypeError%":_,"%TypedArray%":T,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?e:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?e:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?e:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?e:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?e:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?e:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?e:WeakSet,"%Function.prototype.call%":x,"%Function.prototype.apply%":R,"%Object.defineProperty%":w,"%Object.getPrototypeOf%":A,"%Math.abs%":l,"%Math.floor%":c,"%Math.max%":h,"%Math.min%":d,"%Math.pow%":f,"%Math.round%":p,"%Math.sign%":m,"%Reflect.getPrototypeOf%":M};if(S)try{null.error}catch(K){var C=S(S(K));P["%Error.prototype%"]=C}var I=function e(t){var r;if("%AsyncFunction%"===t)r=y("async function () {}");else if("%GeneratorFunction%"===t)r=y("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=y("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&S&&(r=S(n.prototype))}return P[t]=r,r},$={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},B=requireFunctionBind(),O=requireHasown(),N=B.call(x,Array.prototype.concat),L=B.call(R,Array.prototype.splice),q=B.call(x,String.prototype.replace),j=B.call(x,String.prototype.slice),U=B.call(x,RegExp.prototype.exec),D=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,F=/\\(\\)?/g,W=function(e,t){var r,i=e;if(O($,i)&&(i="%"+(r=$[i])[0]+"%"),O(P,i)){var n=P[i];if(n===k&&(n=I(i)),void 0===n&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:n}}throw new a("intrinsic "+e+" does not exist!")};return getIntrinsic=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===U(/^%?[^%]*%?$/,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=j(e,0,1),r=j(e,-1);if("%"===t&&"%"!==r)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var i=[];return q(e,D,function(e,t,r,n){i[i.length]=r?q(n,F,"$1"):t||e}),i}(e),i=r.length>0?r[0]:"",n=W("%"+i+"%",t),o=n.name,u=n.value,l=!1,c=n.alias;c&&(i=c[0],L(r,N([0,1],c)));for(var h=1,d=!0;h<r.length;h+=1){var f=r[h],p=j(f,0,1),m=j(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===m||"'"===m||"`"===m)&&p!==m)throw new a("property names with quotes must have matching quotes");if("constructor"!==f&&d||(l=!0),O(P,o="%"+(i+="."+f)+"%"))u=P[o];else if(null!=u){if(!(f in u)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(b&&h+1>=r.length){var g=b(u,f);u=(d=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:u[f]}else d=O(u,f),u=u[f];d&&!l&&(P[o]=u)}}return u},getIntrinsic}function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var e=requireGetIntrinsic(),t=requireCallBindApplyHelpers(),r=t([e("%String.prototype.indexOf%")]);return callBound=function(i,n){var o=e(i,!!n);return"function"==typeof o&&r(i,".prototype.")>-1?t([o]):o}}function requireIsArguments$1(){if(hasRequiredIsArguments$1)return isArguments$1;hasRequiredIsArguments$1=1;var e=requireShams()(),t=requireCallBound()("Object.prototype.toString"),r=function(r){return!(e&&r&&"object"==typeof r&&Symbol.toStringTag in r)&&"[object Arguments]"===t(r)},i=function(e){return!!r(e)||null!==e&&"object"==typeof e&&"length"in e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==t(e)&&"callee"in e&&"[object Function]"===t(e.callee)},n=function(){return r(arguments)}();return r.isLegacyArguments=i,isArguments$1=n?r:i}function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var e,t=requireCallBound(),r=requireShams()(),i=requireHasown(),n=requireGopd();if(r){var o=t("RegExp.prototype.exec"),a={},s=function(){throw a},u={toString:s,valueOf:s};"symbol"==typeof Symbol.toPrimitive&&(u[Symbol.toPrimitive]=s),e=function(e){if(!e||"object"!=typeof e)return!1;var t=n(e,"lastIndex");if(!(t&&i(t,"value")))return!1;try{o(e,u)}catch(r){return r===a}}}else{var l=t("Object.prototype.toString");e=function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===l(e)}}return isRegex=e}function requireSafeRegexTest(){if(hasRequiredSafeRegexTest)return safeRegexTest;hasRequiredSafeRegexTest=1;var e=requireCallBound(),t=requireIsRegex(),r=e("RegExp.prototype.exec"),i=requireType();return safeRegexTest=function(e){if(!t(e))throw new i("`regex` must be a RegExp");return function(t){return null!==r(e,t)}}}function requireGeneratorFunction(){if(hasRequiredGeneratorFunction)return generatorFunction;hasRequiredGeneratorFunction=1;const e=function*(){}.constructor;return generatorFunction=()=>e}function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var e=requireCallBound(),t=requireSafeRegexTest()(/^\s*(?:function)?\*/),r=requireShams()(),i=requireGetProto(),n=e("Object.prototype.toString"),o=e("Function.prototype.toString"),a=requireGeneratorFunction();return isGeneratorFunction=function(e){if("function"!=typeof e)return!1;if(t(o(e)))return!0;if(!r)return"[object GeneratorFunction]"===n(e);if(!i)return!1;var s=a();return s&&i(e)===s.prototype}}function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var e,t,r=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw t}}),t={},i(function(){throw 42},null,e)}catch(d){d!==t&&(i=null)}else i=null;var n=/^\s*class\b/,o=function(e){try{var t=r.call(e);return n.test(t)}catch(i){return!1}},a=function(e){try{return!o(e)&&(r.call(e),!0)}catch(t){return!1}},s=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,l=!(0 in[,]),c=function(){return!1};if("object"==typeof document){var h=document.all;s.call(h)===s.call(document.all)&&(c=function(e){if((l||!e)&&(void 0===e||"object"==typeof e))try{var t=s.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(r){}return!1})}return isCallable=i?function(r){if(c(r))return!0;if(!r)return!1;if("function"!=typeof r&&"object"!=typeof r)return!1;try{i(r,null,e)}catch(n){if(n!==t)return!1}return!o(r)&&a(r)}:function(e){if(c(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(u)return a(e);if(o(e))return!1;var t=s.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&a(e)}}function requireForEach(){if(hasRequiredForEach)return forEach;hasRequiredForEach=1;var e=requireIsCallable(),t=Object.prototype.toString,r=Object.prototype.hasOwnProperty;return forEach=function(i,n,o){if(!e(n))throw new TypeError("iterator must be a function");var a,s;arguments.length>=3&&(a=o),s=i,"[object Array]"===t.call(s)?function(e,t,i){for(var n=0,o=e.length;n<o;n++)r.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))}(i,n,a):"string"==typeof i?function(e,t,r){for(var i=0,n=e.length;i<n;i++)null==r?t(e.charAt(i),i,e):t.call(r,e.charAt(i),i,e)}(i,n,a):function(e,t,i){for(var n in e)r.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))}(i,n,a)},forEach}function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames?possibleTypedArrayNames:(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"])}function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var e=requirePossibleTypedArrayNames(),t="undefined"==typeof globalThis?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var r=[],i=0;i<e.length;i++)"function"==typeof t[e[i]]&&(r[r.length]=e[i]);return r}}var callBind={exports:{}},defineDataProperty,hasRequiredDefineDataProperty,hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors,setFunctionLength,hasRequiredSetFunctionLength,applyBind,hasRequiredApplyBind,hasRequiredCallBind,whichTypedArray,hasRequiredWhichTypedArray,isTypedArray,hasRequiredIsTypedArray,hasRequiredTypes,isBufferBrowser,hasRequiredIsBufferBrowser,hasRequiredUtil$2,isArguments,hasRequiredIsArguments,implementation,hasRequiredImplementation,objectKeys,hasRequiredObjectKeys;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var e=requireEsDefineProperty(),t=requireSyntax(),r=requireType(),i=requireGopd();return defineDataProperty=function(n,o,a){if(!n||"object"!=typeof n&&"function"!=typeof n)throw new r("`obj` must be an object or a function`");if("string"!=typeof o&&"symbol"!=typeof o)throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new r("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],h=!!i&&i(n,o);if(e)e(n,o,{configurable:null===l&&h?h.configurable:!l,enumerable:null===s&&h?h.enumerable:!s,value:a,writable:null===u&&h?h.writable:!u});else{if(!c&&(s||u||l))throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");n[o]=a}},defineDataProperty}function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var e=requireEsDefineProperty(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return 1!==e([],"length",{value:1}).length}catch(t){return!0}},hasPropertyDescriptors_1=t}function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var e=requireGetIntrinsic(),t=requireDefineDataProperty(),r=requireHasPropertyDescriptors()(),i=requireGopd(),n=requireType(),o=e("%Math.floor%");return setFunctionLength=function(e,a){if("function"!=typeof e)throw new n("`fn` is not a function");if("number"!=typeof a||a<0||a>4294967295||o(a)!==a)throw new n("`length` must be a positive 32-bit integer");var s=arguments.length>2&&!!arguments[2],u=!0,l=!0;if("length"in e&&i){var c=i(e,"length");c&&!c.configurable&&(u=!1),c&&!c.writable&&(l=!1)}return(u||l||!s)&&(r?t(e,"length",a,!0,!0):t(e,"length",a)),e},setFunctionLength}function requireApplyBind(){if(hasRequiredApplyBind)return applyBind;hasRequiredApplyBind=1;var e=requireFunctionBind(),t=requireFunctionApply(),r=requireActualApply();return applyBind=function(){return r(e,t,arguments)},applyBind}function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,e=callBind,t=requireSetFunctionLength(),r=requireEsDefineProperty(),i=requireCallBindApplyHelpers(),n=requireApplyBind(),e.exports=function(e){var r=i(arguments),n=e.length-(arguments.length-1);return t(r,1+(n>0?n:0),!0)},r?r(e.exports,"apply",{value:n}):e.exports.apply=n),callBind.exports;var e,t,r,i,n}function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var e=requireForEach(),t=requireAvailableTypedArrays(),r=requireCallBind(),i=requireCallBound(),n=requireGopd(),o=requireGetProto(),a=i("Object.prototype.toString"),s=requireShams()(),u="undefined"==typeof globalThis?commonjsGlobal:globalThis,l=t(),c=i("String.prototype.slice"),h=i("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},d={__proto__:null};e(l,s&&n&&o?function(e){var t=new u[e];if(Symbol.toStringTag in t&&o){var i=o(t),a=n(i,Symbol.toStringTag);if(!a&&i){var s=o(i);a=n(s,Symbol.toStringTag)}d["$"+e]=r(a.get)}}:function(e){var t=new u[e],i=t.slice||t.set;i&&(d["$"+e]=r(i))});return whichTypedArray=function(t){if(!t||"object"!=typeof t)return!1;if(!s){var r=c(a(t),8,-1);return h(l,r)>-1?r:"Object"===r&&function(t){var r=!1;return e(d,function(e,i){if(!r)try{e(t),r=c(i,1)}catch(n){}}),r}(t)}return n?function(t){var r=!1;return e(d,function(e,i){if(!r)try{"$"+e(t)===i&&(r=c(i,1))}catch(n){}}),r}(t):null}}function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var e=requireWhichTypedArray();return isTypedArray=function(t){return!!e(t)}}function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(e){var t=requireIsArguments$1(),r=requireIsGeneratorFunction(),i=requireWhichTypedArray(),n=requireIsTypedArray();function o(e){return e.call.bind(e)}var a="undefined"!=typeof BigInt,s="undefined"!=typeof Symbol,u=o(Object.prototype.toString),l=o(Number.prototype.valueOf),c=o(String.prototype.valueOf),h=o(Boolean.prototype.valueOf);if(a)var d=o(BigInt.prototype.valueOf);if(s)var f=o(Symbol.prototype.valueOf);function p(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(r){return!1}}function m(e){return"[object Map]"===u(e)}function g(e){return"[object Set]"===u(e)}function y(e){return"[object WeakMap]"===u(e)}function b(e){return"[object WeakSet]"===u(e)}function w(e){return"[object ArrayBuffer]"===u(e)}function v(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function _(e){return"[object DataView]"===u(e)}function E(e){return"undefined"!=typeof DataView&&(_.working?_(e):e instanceof DataView)}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=n,e.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},e.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):n(e)||E(e)},e.isUint8Array=function(e){return"Uint8Array"===i(e)},e.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},e.isUint16Array=function(e){return"Uint16Array"===i(e)},e.isUint32Array=function(e){return"Uint32Array"===i(e)},e.isInt8Array=function(e){return"Int8Array"===i(e)},e.isInt16Array=function(e){return"Int16Array"===i(e)},e.isInt32Array=function(e){return"Int32Array"===i(e)},e.isFloat32Array=function(e){return"Float32Array"===i(e)},e.isFloat64Array=function(e){return"Float64Array"===i(e)},e.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},e.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},m.working="undefined"!=typeof Map&&m(new Map),e.isMap=function(e){return"undefined"!=typeof Map&&(m.working?m(e):e instanceof Map)},g.working="undefined"!=typeof Set&&g(new Set),e.isSet=function(e){return"undefined"!=typeof Set&&(g.working?g(e):e instanceof Set)},y.working="undefined"!=typeof WeakMap&&y(new WeakMap),e.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(y.working?y(e):e instanceof WeakMap)},b.working="undefined"!=typeof WeakSet&&b(new WeakSet),e.isWeakSet=function(e){return b(e)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),e.isArrayBuffer=v,_.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&_(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=E;var S="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function A(e){return"[object SharedArrayBuffer]"===u(e)}function M(e){return void 0!==S&&(void 0===A.working&&(A.working=A(new S)),A.working?A(e):e instanceof S)}function R(e){return p(e,l)}function x(e){return p(e,c)}function k(e){return p(e,h)}function T(e){return a&&p(e,d)}function P(e){return s&&p(e,f)}e.isSharedArrayBuffer=M,e.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},e.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},e.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},e.isGeneratorObject=function(e){return"[object Generator]"===u(e)},e.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},e.isNumberObject=R,e.isStringObject=x,e.isBooleanObject=k,e.isBigIntObject=T,e.isSymbolObject=P,e.isBoxedPrimitive=function(e){return R(e)||x(e)||k(e)||T(e)||P(e)},e.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(v(e)||M(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})}(types)),types}function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser?isBufferBrowser:(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8})}function requireUtil$2(){return hasRequiredUtil$2||(hasRequiredUtil$2=1,function(e){var t={},r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++)r[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return r},i=/%[sdj%]/g;e.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),u=n[r];r<o;u=n[++r])m(u)||!v(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(t,r){if(void 0!==process$1&&!0===process$1.noDeprecation)return t;if(void 0===process$1)return function(){return e.deprecate(t,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(process$1.throwDeprecation)throw new Error(r);process$1.traceDeprecation,i=!0}return t.apply(this,arguments)}};var n={},o=/^$/;if(t.NODE_DEBUG){var a=t.NODE_DEBUG;a=a.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+a+"$","i")}function s(t,r){var i={seen:[],stylize:l};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),p(r)?i.showHidden=r:r&&e._extend(i,r),b(i.showHidden)&&(i.showHidden=!1),b(i.depth)&&(i.depth=2),b(i.colors)&&(i.colors=!1),b(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=u),c(i,t,i.depth)}function u(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e}function l(e,t){return e}function c(t,r,i){if(t.customInspect&&r&&S(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(i,t);return y(n)||(n=c(t,n,i)),n}var o=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(g(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(t,r);if(o)return o;var a=Object.keys(r),s=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),E(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(r);if(0===a.length){if(S(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(w(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(_(r))return t.stylize(Date.prototype.toString.call(r),"date");if(E(r))return h(r)}var l,v="",A=!1,R=["{","}"];(f(r)&&(A=!0,R=["[","]"]),S(r))&&(v=" [Function"+(r.name?": "+r.name:"")+"]");return w(r)&&(v=" "+RegExp.prototype.toString.call(r)),_(r)&&(v=" "+Date.prototype.toUTCString.call(r)),E(r)&&(v=" "+h(r)),0!==a.length||A&&0!=r.length?i<0?w(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),l=A?function(e,t,r,i,n){for(var o=[],a=0,s=t.length;a<s;++a)M(t,String(a))?o.push(d(e,t,r,i,String(a),!0)):o.push("");return n.forEach(function(n){n.match(/^\d+$/)||o.push(d(e,t,r,i,n,!0))}),o}(t,r,i,s,a):a.map(function(e){return d(t,r,i,s,e,A)}),t.seen.pop(),function(e,t,r){var i=e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(i>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,v,R)):R[0]+v+R[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,i,n,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),M(i,n)||(a="["+n+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(r)?c(e,u.value,null):c(e,u.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").slice(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),b(a)){if(o&&n.match(/^\d+$/))return s;(a=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function b(e){return void 0===e}function w(e){return v(e)&&"[object RegExp]"===A(e)}function v(e){return"object"==typeof e&&null!==e}function _(e){return v(e)&&"[object Date]"===A(e)}function E(e){return v(e)&&("[object Error]"===A(e)||e instanceof Error)}function S(e){return"function"==typeof e}function A(e){return Object.prototype.toString.call(e)}e.debuglog=function(t){if(t=t.toUpperCase(),!n[t])if(o.test(t)){process$1.pid;n[t]=function(){e.format.apply(e,arguments)}}else n[t]=function(){};return n[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=requireTypes(),e.isArray=f,e.isBoolean=p,e.isNull=m,e.isNullOrUndefined=function(e){return null==e},e.isNumber=g,e.isString=y,e.isSymbol=function(e){return"symbol"==typeof e},e.isUndefined=b,e.isRegExp=w,e.types.isRegExp=w,e.isObject=v,e.isDate=_,e.types.isDate=_,e.isError=E,e.types.isNativeError=E,e.isFunction=S,e.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},e.isBuffer=requireIsBufferBrowser();function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.log=function(){},e.inherits=requireInherits_browser(),e._extend=function(e,t){if(!t||!v(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};var R="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function x(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}e.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var t;if("function"!=typeof(t=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,i=new Promise(function(e,i){t=e,r=i}),n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);n.push(function(e,i){e?r(e):t(i)});try{e.apply(this,n)}catch(a){r(a)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),R&&Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},e.promisify.custom=R,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var n=this,o=function(){return i.apply(n,arguments)};e.apply(this,t).then(function(e){process$1.nextTick(o.bind(null,null,e))},function(e){process$1.nextTick(x.bind(null,e,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}}(util$2)),util$2}function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var e=Object.prototype.toString;return isArguments=function(t){var r=e.call(t),i="[object Arguments]"===r;return i||(i="[object Array]"!==r&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),i}}function requireImplementation(){if(hasRequiredImplementation)return implementation;var e;if(hasRequiredImplementation=1,!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=requireIsArguments(),n=Object.prototype.propertyIsEnumerable,o=!n.call({toString:null},"toString"),a=n.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(e){var t=e.constructor;return t&&t.prototype===e},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},c=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!l["$"+e]&&t.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{u(window[e])}catch(r){return!0}}catch(r){return!0}return!1}();e=function(e){var n=null!==e&&"object"==typeof e,l="[object Function]"===r.call(e),h=i(e),d=n&&"[object String]"===r.call(e),f=[];if(!n&&!l&&!h)throw new TypeError("Object.keys called on a non-object");var p=a&&l;if(d&&e.length>0&&!t.call(e,0))for(var m=0;m<e.length;++m)f.push(String(m));if(h&&e.length>0)for(var g=0;g<e.length;++g)f.push(String(g));else for(var y in e)p&&"prototype"===y||!t.call(e,y)||f.push(String(y));if(o)for(var b=function(e){if("undefined"==typeof window||!c)return u(e);try{return u(e)}catch(t){return!1}}(e),w=0;w<s.length;++w)b&&"constructor"===s[w]||!t.call(e,s[w])||f.push(s[w]);return f}}return implementation=e}function requireObjectKeys(){if(hasRequiredObjectKeys)return objectKeys;hasRequiredObjectKeys=1;var e=Array.prototype.slice,t=requireIsArguments(),r=Object.keys,i=r?function(e){return r(e)}:requireImplementation(),n=Object.keys;return i.shim=function(){if(Object.keys){var r=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);r||(Object.keys=function(r){return t(r)?n(e.call(r)):n(r)})}else Object.keys=i;return Object.keys||i},objectKeys=i}var elliptic={};const version$3="6.6.1",require$$0$1={version:version$3};var utils$3={},bn$b={exports:{}},bn$a=bn$b.exports,hasRequiredBn$5;function requireBn$5(){return hasRequiredBn$5||(hasRequiredBn$5=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$2().Buffer}catch(A){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function s(e,t,r){var i=a(e,r);return r-1>=t&&(i|=a(e,r-1)<<4),i}function u(e,t,r,i){for(var n=0,o=Math.min(e.length,r),a=t;a<o;a++){var s=e.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return e.cmp(t)<0?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,i):(this._parseBase(e,t,n),"le"===i&&this._initArray(this.toArray(),t,i)))},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===i)for(n=e.length-1,o=0;n>=0;n-=3)a=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===i)for(n=0,o=0;n<e.length;n+=3)a=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},n.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o=0,a=0;if("be"===r)for(i=e.length-1;i>=t;i-=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;this.strip()},n.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var o=e.length-r,a=o%i,s=Math.min(o,o-a)+r,l=0,c=r;c<s;c+=i)l=u(e,c,c+i,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var h=1;for(l=u(e,c,e.length,t),c=0;c<a;c++)h*=t;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},n.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],o=0|t.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<i;l++){for(var c=u>>>26,h=67108863&u,d=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=d;f++){var p=l-f|0;c+=(a=(n=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}n.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);o=s>>>24-n&16777215,(n+=2)>=26&&(n-=26,a--),i=0!==o||a!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var d=c[e],f=h[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:l[d-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},n.prototype.toArrayLike=function(e,t,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,l=new e(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-n;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},n.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},n.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},n.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,n=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},n.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++)t=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&t,n=t>>>26;for(;0!==n&&o<r.length;o++)t=(0|r.words[o])+n,this.words[o]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var o=0,a=0;a<i.length;a++)o=(t=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var i,n,o,a=e.words,s=t.words,u=r.words,l=0,c=0|a[0],h=8191&c,d=c>>>13,f=0|a[1],p=8191&f,m=f>>>13,g=0|a[2],y=8191&g,b=g>>>13,w=0|a[3],v=8191&w,_=w>>>13,E=0|a[4],S=8191&E,A=E>>>13,M=0|a[5],R=8191&M,x=M>>>13,k=0|a[6],T=8191&k,P=k>>>13,C=0|a[7],I=8191&C,$=C>>>13,B=0|a[8],O=8191&B,N=B>>>13,L=0|a[9],q=8191&L,j=L>>>13,U=0|s[0],D=8191&U,F=U>>>13,W=0|s[1],K=8191&W,H=W>>>13,z=0|s[2],V=8191&z,G=z>>>13,Y=0|s[3],J=8191&Y,Z=Y>>>13,X=0|s[4],Q=8191&X,ee=X>>>13,te=0|s[5],re=8191&te,ie=te>>>13,ne=0|s[6],oe=8191&ne,ae=ne>>>13,se=0|s[7],ue=8191&se,le=se>>>13,ce=0|s[8],he=8191&ce,de=ce>>>13,fe=0|s[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(l+(i=Math.imul(h,D))|0)+((8191&(n=(n=Math.imul(h,F))+Math.imul(d,D)|0))<<13)|0;l=((o=Math.imul(d,F))+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,D),n=(n=Math.imul(p,F))+Math.imul(m,D)|0,o=Math.imul(m,F);var ye=(l+(i=i+Math.imul(h,K)|0)|0)+((8191&(n=(n=n+Math.imul(h,H)|0)+Math.imul(d,K)|0))<<13)|0;l=((o=o+Math.imul(d,H)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(y,D),n=(n=Math.imul(y,F))+Math.imul(b,D)|0,o=Math.imul(b,F),i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,H)|0;var be=(l+(i=i+Math.imul(h,V)|0)|0)+((8191&(n=(n=n+Math.imul(h,G)|0)+Math.imul(d,V)|0))<<13)|0;l=((o=o+Math.imul(d,G)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(v,D),n=(n=Math.imul(v,F))+Math.imul(_,D)|0,o=Math.imul(_,F),i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(b,K)|0,o=o+Math.imul(b,H)|0,i=i+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,G)|0;var we=(l+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;l=((o=o+Math.imul(d,Z)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(S,D),n=(n=Math.imul(S,F))+Math.imul(A,D)|0,o=Math.imul(A,F),i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,H)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,H)|0,i=i+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(b,V)|0,o=o+Math.imul(b,G)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var ve=(l+(i=i+Math.imul(h,Q)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;l=((o=o+Math.imul(d,ee)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(R,D),n=(n=Math.imul(R,F))+Math.imul(x,D)|0,o=Math.imul(x,F),i=i+Math.imul(S,K)|0,n=(n=n+Math.imul(S,H)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,H)|0,i=i+Math.imul(v,V)|0,n=(n=n+Math.imul(v,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,i=i+Math.imul(y,J)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0;var _e=(l+(i=i+Math.imul(h,re)|0)|0)+((8191&(n=(n=n+Math.imul(h,ie)|0)+Math.imul(d,re)|0))<<13)|0;l=((o=o+Math.imul(d,ie)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(T,D),n=(n=Math.imul(T,F))+Math.imul(P,D)|0,o=Math.imul(P,F),i=i+Math.imul(R,K)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,H)|0,i=i+Math.imul(S,V)|0,n=(n=n+Math.imul(S,G)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,G)|0,i=i+Math.imul(v,J)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0,i=i+Math.imul(p,re)|0,n=(n=n+Math.imul(p,ie)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ie)|0;var Ee=(l+(i=i+Math.imul(h,oe)|0)|0)+((8191&(n=(n=n+Math.imul(h,ae)|0)+Math.imul(d,oe)|0))<<13)|0;l=((o=o+Math.imul(d,ae)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(I,D),n=(n=Math.imul(I,F))+Math.imul($,D)|0,o=Math.imul($,F),i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,H)|0,i=i+Math.imul(R,V)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,G)|0,i=i+Math.imul(S,J)|0,n=(n=n+Math.imul(S,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,i=i+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,i=i+Math.imul(y,re)|0,n=(n=n+Math.imul(y,ie)|0)+Math.imul(b,re)|0,o=o+Math.imul(b,ie)|0,i=i+Math.imul(p,oe)|0,n=(n=n+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(l+(i=i+Math.imul(h,ue)|0)|0)+((8191&(n=(n=n+Math.imul(h,le)|0)+Math.imul(d,ue)|0))<<13)|0;l=((o=o+Math.imul(d,le)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(O,D),n=(n=Math.imul(O,F))+Math.imul(N,D)|0,o=Math.imul(N,F),i=i+Math.imul(I,K)|0,n=(n=n+Math.imul(I,H)|0)+Math.imul($,K)|0,o=o+Math.imul($,H)|0,i=i+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,G)|0,i=i+Math.imul(R,J)|0,n=(n=n+Math.imul(R,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,i=i+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,i=i+Math.imul(v,re)|0,n=(n=n+Math.imul(v,ie)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,n=(n=n+Math.imul(y,ae)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,ae)|0,i=i+Math.imul(p,ue)|0,n=(n=n+Math.imul(p,le)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,le)|0;var Ae=(l+(i=i+Math.imul(h,he)|0)|0)+((8191&(n=(n=n+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;l=((o=o+Math.imul(d,de)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(q,D),n=(n=Math.imul(q,F))+Math.imul(j,D)|0,o=Math.imul(j,F),i=i+Math.imul(O,K)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,H)|0,i=i+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul($,V)|0,o=o+Math.imul($,G)|0,i=i+Math.imul(T,J)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Z)|0,i=i+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,i=i+Math.imul(S,re)|0,n=(n=n+Math.imul(S,ie)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ie)|0,i=i+Math.imul(v,oe)|0,n=(n=n+Math.imul(v,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,i=i+Math.imul(y,ue)|0,n=(n=n+Math.imul(y,le)|0)+Math.imul(b,ue)|0,o=o+Math.imul(b,le)|0,i=i+Math.imul(p,he)|0,n=(n=n+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Me=(l+(i=i+Math.imul(h,pe)|0)|0)+((8191&(n=(n=n+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;l=((o=o+Math.imul(d,me)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(q,K),n=(n=Math.imul(q,H))+Math.imul(j,K)|0,o=Math.imul(j,H),i=i+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,G)|0,i=i+Math.imul(I,J)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul($,J)|0,o=o+Math.imul($,Z)|0,i=i+Math.imul(T,Q)|0,n=(n=n+Math.imul(T,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(R,re)|0,n=(n=n+Math.imul(R,ie)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ie)|0,i=i+Math.imul(S,oe)|0,n=(n=n+Math.imul(S,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,i=i+Math.imul(v,ue)|0,n=(n=n+Math.imul(v,le)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,he)|0,n=(n=n+Math.imul(y,de)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,de)|0;var Re=(l+(i=i+Math.imul(p,pe)|0)|0)+((8191&(n=(n=n+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;l=((o=o+Math.imul(m,me)|0)+(n>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(q,V),n=(n=Math.imul(q,G))+Math.imul(j,V)|0,o=Math.imul(j,G),i=i+Math.imul(O,J)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Z)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,ee)|0)+Math.imul($,Q)|0,o=o+Math.imul($,ee)|0,i=i+Math.imul(T,re)|0,n=(n=n+Math.imul(T,ie)|0)+Math.imul(P,re)|0,o=o+Math.imul(P,ie)|0,i=i+Math.imul(R,oe)|0,n=(n=n+Math.imul(R,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,i=i+Math.imul(S,ue)|0,n=(n=n+Math.imul(S,le)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,le)|0,i=i+Math.imul(v,he)|0,n=(n=n+Math.imul(v,de)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,de)|0;var xe=(l+(i=i+Math.imul(y,pe)|0)|0)+((8191&(n=(n=n+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;l=((o=o+Math.imul(b,me)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(q,J),n=(n=Math.imul(q,Z))+Math.imul(j,J)|0,o=Math.imul(j,Z),i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,i=i+Math.imul(I,re)|0,n=(n=n+Math.imul(I,ie)|0)+Math.imul($,re)|0,o=o+Math.imul($,ie)|0,i=i+Math.imul(T,oe)|0,n=(n=n+Math.imul(T,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,i=i+Math.imul(R,ue)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,le)|0,i=i+Math.imul(S,he)|0,n=(n=n+Math.imul(S,de)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,de)|0;var ke=(l+(i=i+Math.imul(v,pe)|0)|0)+((8191&(n=(n=n+Math.imul(v,me)|0)+Math.imul(_,pe)|0))<<13)|0;l=((o=o+Math.imul(_,me)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(q,Q),n=(n=Math.imul(q,ee))+Math.imul(j,Q)|0,o=Math.imul(j,ee),i=i+Math.imul(O,re)|0,n=(n=n+Math.imul(O,ie)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ie)|0,i=i+Math.imul(I,oe)|0,n=(n=n+Math.imul(I,ae)|0)+Math.imul($,oe)|0,o=o+Math.imul($,ae)|0,i=i+Math.imul(T,ue)|0,n=(n=n+Math.imul(T,le)|0)+Math.imul(P,ue)|0,o=o+Math.imul(P,le)|0,i=i+Math.imul(R,he)|0,n=(n=n+Math.imul(R,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var Te=(l+(i=i+Math.imul(S,pe)|0)|0)+((8191&(n=(n=n+Math.imul(S,me)|0)+Math.imul(A,pe)|0))<<13)|0;l=((o=o+Math.imul(A,me)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(q,re),n=(n=Math.imul(q,ie))+Math.imul(j,re)|0,o=Math.imul(j,ie),i=i+Math.imul(O,oe)|0,n=(n=n+Math.imul(O,ae)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,ae)|0,i=i+Math.imul(I,ue)|0,n=(n=n+Math.imul(I,le)|0)+Math.imul($,ue)|0,o=o+Math.imul($,le)|0,i=i+Math.imul(T,he)|0,n=(n=n+Math.imul(T,de)|0)+Math.imul(P,he)|0,o=o+Math.imul(P,de)|0;var Pe=(l+(i=i+Math.imul(R,pe)|0)|0)+((8191&(n=(n=n+Math.imul(R,me)|0)+Math.imul(x,pe)|0))<<13)|0;l=((o=o+Math.imul(x,me)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(q,oe),n=(n=Math.imul(q,ae))+Math.imul(j,oe)|0,o=Math.imul(j,ae),i=i+Math.imul(O,ue)|0,n=(n=n+Math.imul(O,le)|0)+Math.imul(N,ue)|0,o=o+Math.imul(N,le)|0,i=i+Math.imul(I,he)|0,n=(n=n+Math.imul(I,de)|0)+Math.imul($,he)|0,o=o+Math.imul($,de)|0;var Ce=(l+(i=i+Math.imul(T,pe)|0)|0)+((8191&(n=(n=n+Math.imul(T,me)|0)+Math.imul(P,pe)|0))<<13)|0;l=((o=o+Math.imul(P,me)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(q,ue),n=(n=Math.imul(q,le))+Math.imul(j,ue)|0,o=Math.imul(j,le),i=i+Math.imul(O,he)|0,n=(n=n+Math.imul(O,de)|0)+Math.imul(N,he)|0,o=o+Math.imul(N,de)|0;var Ie=(l+(i=i+Math.imul(I,pe)|0)|0)+((8191&(n=(n=n+Math.imul(I,me)|0)+Math.imul($,pe)|0))<<13)|0;l=((o=o+Math.imul($,me)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(q,he),n=(n=Math.imul(q,de))+Math.imul(j,he)|0,o=Math.imul(j,de);var $e=(l+(i=i+Math.imul(O,pe)|0)|0)+((8191&(n=(n=n+Math.imul(O,me)|0)+Math.imul(N,pe)|0))<<13)|0;l=((o=o+Math.imul(N,me)|0)+(n>>>13)|0)+($e>>>26)|0,$e&=67108863;var Be=(l+(i=Math.imul(q,pe))|0)+((8191&(n=(n=Math.imul(q,me))+Math.imul(j,pe)|0))<<13)|0;return l=((o=Math.imul(j,me))+(n>>>13)|0)+(Be>>>26)|0,Be&=67108863,u[0]=ge,u[1]=ye,u[2]=be,u[3]=we,u[4]=ve,u[5]=_e,u[6]=Ee,u[7]=Se,u[8]=Ae,u[9]=Me,u[10]=Re,u[11]=xe,u[12]=ke,u[13]=Te,u[14]=Pe,u[15]=Ce,u[16]=Ie,u[17]=$e,u[18]=Be,0!==l&&(u[19]=l,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=d),n.prototype.mulTo=function(e,t){var r,i=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):i<63?d(this,e,t):i<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=u;l++){var c=o-l,h=(0|e.words[c])*(0|t.words[l]),d=67108863&h;s=67108863&(d=d+s|0),n+=(a=(a=a+(h/67108864|0)|0)+(d>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=n.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},m.prototype.permute=function(e,t,r,i,n,o){for(var a=0;a<o;a++)i[a]=t[e[a]],n[a]=r[e[a]]},m.prototype.transform=function(e,t,r,i,n,o){this.permute(o,e,t,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<n;c+=s)for(var h=u,d=l,f=0;f<a;f++){var p=r[c+f],m=i[c+f],g=r[c+f+a],y=i[c+f+a],b=h*g-d*y;y=h*y+d*g,g=b,r[c+f]=p+g,i[c+f]=m+y,r[c+f+a]=p-g,i[c+f+a]=m-y,f!==s&&(b=u*h-l*d,d=u*d+l*h,h=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},m.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},m.prototype.convert13b=function(e,t,i,n){for(var o=0,a=0;a<t;a++)o+=0|e[a],i[2*a]=8191&o,o>>>=13,i[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<n;++a)i[a]=0;r(0===o),r(!(-8192&o))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),l=new Array(i),c=new Array(i),h=new Array(i),d=r.words;d.length=i,this.convert13b(e.words,e.length,a,i),this.convert13b(t.words,t.length,l,i),this.transform(a,o,s,u,i,n),this.transform(l,o,c,h,i,n);for(var f=0;f<i;f++){var p=s[f]*c[f]-u[f]*h[f];u[f]=s[f]*h[f]+u[f]*c[f],s[f]=p}return this.conjugate(s,u,i),this.transform(s,u,d,o,i,n),this.conjugate(d,o,i),this.normalize13b(d,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},n.prototype.mul=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),p(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,i=0;i<this.length;i++){var n=(0|this.words[i])*e,o=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=o>>>26,this.words[i]=67108863&o}return 0!==t&&(this.words[i]=t,this.length++),this.length=0===e?1:this.length,this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}(e);if(0===t.length)return new n(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var o=r.sqr();i<t.length;i++,o=o.sqr())0!==t[i]&&(r=r.mul(o));return r},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,n=(e-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<i;this.words[t]=u|a,a=s>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){var n;r("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=i;if(n-=a,n=Math.max(0,n),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=n);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,n=1<<t;return!(this.length<=i||!(this.words[i]&n))},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var n,o,a=e.length+i;this._expand(a);var s=0;for(n=0;n<e.length;n++){o=(0|this.words[n+i])+s;var u=(0|e.words[n])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)s=(o=(0|this.words[n+i])+s)>>26,this.words[n+i]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),o=e,a=0|o.words[o.length-1];0!=(r=26-this._countBits(a))&&(o=o.ushln(r),i.iushln(r),a=0|o.words[o.length-1]);var s,u=i.length-o.length;if("mod"!==t){(s=new n(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(o,1,u);0===c.negative&&(i=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|i.words[o.length+h])+(0|i.words[o.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(o,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(o,1,h),i.isZero()||(i.negative^=1);s&&(s.words[h]=d)}return s&&s.strip(),i.strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},n.prototype.divmod=function(e,t,i){return r(!e.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,i=0,n=this.length-1;n>=0;n--)i=(t*i+(0|this.words[n]))%e;return i},n.prototype.idivn=function(e){r(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*t;this.words[i]=n/e|0,t=n%e}return this.strip()},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new n(1),a=new n(0),s=new n(0),u=new n(1),l=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++l;for(var c=i.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(c),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0===(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(i)>=0?(t.isub(i),o.isub(s),a.isub(u)):(i.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:i.iushln(l)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new n(1),s=new n(0),u=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,c=1;0===(t.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(t.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,d=1;0===(i.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(i)>=0?(t.isub(i),a.isub(s)):(i.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var o=t;t=r,r=o}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return!(1&this.words[0])},n.prototype.isOdd=function(){return!(1&~this.words[0])},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,a=i;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return-1===this.cmpn(e)},n.prototype.lt=function(e){return-1===this.cmp(e)},n.prototype.lten=function(e){return this.cmpn(e)<=0},n.prototype.lte=function(e){return this.cmp(e)<=0},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new E(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new n(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},i(b,y),b.prototype.split=function(e,t){for(var r=4194303,i=Math.min(e.length,9),n=0;n<i;n++)t.words[n]=e.words[n];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,n=10;n<e.length;n++){var a=0|e.words[n];e.words[n-10]=(a&r)<<4|o>>>22,o=a}o>>>=22,e.words[n-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,y),i(v,y),i(_,y),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new v;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return g[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);r(!o.isZero());var s=new n(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,o),d=this.pow(e,o.addn(1).iushrn(1)),f=this.pow(e,o),p=a;0!==f.cmp(s);){for(var m=f,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<p);var y=this.pow(h,new n(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new n(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var o=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],c=u-1;c>=0;c--){var h=l>>c&1;o!==r[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===i&&0===c)&&(o=this.mul(o,r[a]),s=0,a=0)):s=0}u=26}return o},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new S(e)},i(S,E),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(i).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$b,bn$a)),bn$b.exports}var utils$2={},hasRequiredUtils$3,hasRequiredUtils$2;function requireUtils$3(){return hasRequiredUtils$3||(hasRequiredUtils$3=1,function(){var e=utils$2;function t(e){return 1===e.length?"0"+e:e}function r(e){for(var r="",i=0;i<e.length;i++)r+=t(e[i].toString(16));return r}e.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(i=0;i<e.length;i++){var n=e.charCodeAt(i),o=n>>8,a=255&n;o?r.push(o,a):r.push(a)}return r},e.zero2=t,e.toHex=r,e.encode=function(e,t){return"hex"===t?r(e):e}}()),utils$2}function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,e=utils$3,t=requireBn$5(),r=requireMinimalisticAssert(),i=requireUtils$3(),e.assert=r,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode,e.getNAF=function(e,t,r){var i,n=new Array(Math.max(e.bitLength(),r)+1);for(i=0;i<n.length;i+=1)n[i]=0;var o=1<<t+1,a=e.clone();for(i=0;i<n.length;i++){var s,u=a.andln(o-1);a.isOdd()?(s=u>(o>>1)-1?(o>>1)-u:u,a.isubn(s)):s=0,n[i]=s,a.iushrn(1)}return n},e.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i,n=0,o=0;e.cmpn(-n)>0||t.cmpn(-o)>0;){var a,s,u=e.andln(3)+n&3,l=t.andln(3)+o&3;3===u&&(u=-1),3===l&&(l=-1),a=1&u?3!=(i=e.andln(7)+n&7)&&5!==i||2!==l?u:-u:0,r[0].push(a),s=1&l?3!=(i=t.andln(7)+o&7)&&5!==i||2!==u?l:-l:0,r[1].push(s),2*n===a+1&&(n=1-n),2*o===s+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},e.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},e.parseBytes=function(t){return"string"==typeof t?e.toArray(t,"hex"):t},e.intFromLE=function(e){return new t(e,"hex","le")}),utils$3;var e,t,r,i}var brorand={exports:{}},cryptoBrowserify={},browser$e={exports:{}},safeBuffer$2={exports:{}},hasRequiredSafeBuffer$2,hasRequiredBrowser$e,streamBrowser$2,hasRequiredStreamBrowser$2,buffer_list$1,hasRequiredBuffer_list$1,destroy_1$3,hasRequiredDestroy$3;function requireSafeBuffer$2(){return hasRequiredSafeBuffer$2||(hasRequiredSafeBuffer$2=1,function(e,t){var r=requireDist$2(),i=r.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(n(r,t),t.Buffer=o),o.prototype=Object.create(i.prototype),n(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(safeBuffer$2,safeBuffer$2.exports)),safeBuffer$2.exports}function requireBrowser$e(){if(hasRequiredBrowser$e)return browser$e.exports;hasRequiredBrowser$e=1;var e=65536,t=4294967295;var r=requireSafeBuffer$2().Buffer,i=commonjsGlobal.crypto||commonjsGlobal.msCrypto;return i&&i.getRandomValues?browser$e.exports=function(n,o){if(n>t)throw new RangeError("requested too many random bytes");var a=r.allocUnsafe(n);if(n>0)if(n>e)for(var s=0;s<n;s+=e)i.getRandomValues(a.slice(s,s+e));else i.getRandomValues(a);if("function"==typeof o)return process$1.nextTick(function(){o(null,a)});return a}:browser$e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")},browser$e.exports}function requireStreamBrowser$2(){return hasRequiredStreamBrowser$2?streamBrowser$2:(hasRequiredStreamBrowser$2=1,streamBrowser$2=requireEvents().EventEmitter)}function requireBuffer_list$1(){if(hasRequiredBuffer_list$1)return buffer_list$1;function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function t(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function r(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}hasRequiredBuffer_list$1=1;var o=requireDist$2().Buffer,a=requireUtil$2().inspect,s=a&&a.custom||"inspect";function u(e,t,r){o.prototype.copy.call(e,t,r)}return buffer_list$1=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return i(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t=o.allocUnsafe(e>>>0),r=this.head,i=0;r;)u(r.data,t,i),i+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,i=t.data;for(e-=i.length;t=t.next;){var n=t.data,o=e>n.length?n.length:e;if(o===n.length?i+=n:i+=n.slice(0,e),0===(e-=o)){o===n.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(o));break}++r}return this.length-=r,i}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),r=this.head,i=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var n=r.data,a=e>n.length?n.length:e;if(n.copy(t,t.length-e,0,a),0===(e-=a)){a===n.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=n.slice(a));break}++i}return this.length-=i,t}},{key:s,value:function(e,r){return a(this,t(t({},r),{},{depth:0,customInspect:!1}))}}]),e}()}function requireDestroy$3(){if(hasRequiredDestroy$3)return destroy_1$3;function e(e,i){r(e,i),t(e)}function t(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}return hasRequiredDestroy$3=1,destroy_1$3={destroy:function(i,n){var o=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(n?n(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(r,this,i)):process$1.nextTick(r,this,i)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(r){!n&&r?o._writableState?o._writableState.errorEmitted?process$1.nextTick(t,o):(o._writableState.errorEmitted=!0,process$1.nextTick(e,o,r)):process$1.nextTick(e,o,r):n?(process$1.nextTick(t,o),n(r)):process$1.nextTick(t,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}}var errorsBrowser={},hasRequiredErrorsBrowser,state$1,hasRequiredState$1,browser$d,hasRequiredBrowser$d,_stream_writable$2,hasRequired_stream_writable$2,_stream_duplex$2,hasRequired_stream_duplex$2;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;var e={};function t(t,r,i){i||(i=Error);var n=function(e){var t,i;function n(t,i,n){return e.call(this,function(e,t,i){return"string"==typeof r?r:r(e,t,i)}(t,i,n))||this}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,n}(i);n.prototype.name=i.name,n.prototype.code=t,e[t]=n}function r(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(e){return String(e)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}return t("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(e,t,i){var n,o,a;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(r(t,"type"));else{var s=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(s," ").concat(n," ").concat(r(t,"type"))}return a+=". Received type ".concat(typeof i)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}function requireState$1(){if(hasRequiredState$1)return state$1;hasRequiredState$1=1;var e=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;return state$1={getHighWaterMark:function(t,r,i,n){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(r,n,i);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new e(n?i:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}}function requireBrowser$d(){if(hasRequiredBrowser$d)return browser$d;function e(e){try{if(!commonjsGlobal.localStorage)return!1}catch(r){return!1}var t=commonjsGlobal.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}return hasRequiredBrowser$d=1,browser$d=function(t,r){if(e("noDeprecation"))return t;var i=!1;return function(){if(!i){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation"),i=!0}return t.apply(this,arguments)}},browser$d}function require_stream_writable$2(){if(hasRequired_stream_writable$2)return _stream_writable$2;function e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;e.entry=null;for(;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}var t;hasRequired_stream_writable$2=1,_stream_writable$2=_,_.WritableState=v;var r={deprecate:requireBrowser$d()},i=requireStreamBrowser$2(),n=requireDist$2().Buffer,o=(void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var a,s=requireDestroy$3(),u=requireState$1().getHighWaterMark,l=requireErrorsBrowser().codes,c=l.ERR_INVALID_ARG_TYPE,h=l.ERR_METHOD_NOT_IMPLEMENTED,d=l.ERR_MULTIPLE_CALLBACK,f=l.ERR_STREAM_CANNOT_PIPE,p=l.ERR_STREAM_DESTROYED,m=l.ERR_STREAM_NULL_VALUES,g=l.ERR_STREAM_WRITE_AFTER_END,y=l.ERR_UNKNOWN_ENCODING,b=s.errorOrDestroy;function w(){}function v(r,i,n){t=t||require_stream_duplex$2(),r=r||{},"boolean"!=typeof n&&(n=i instanceof t),this.objectMode=!!r.objectMode,n&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=u(this,r,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===r.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if("function"!=typeof n)throw new d;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,n){--t.pendingcb,r?(process$1.nextTick(n,i),process$1.nextTick(x,e,t),e._writableState.errorEmitted=!0,b(e,i)):(n(i),e._writableState.errorEmitted=!0,b(e,i),x(e,t))}(e,r,i,t,n);else{var o=M(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||A(e,r),i?process$1.nextTick(S,e,r,o,n):S(e,r,o,n)}}(i,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function _(e){var r=this instanceof(t=t||require_stream_duplex$2());if(!r&&!a.call(_,this))return new _(e);this._writableState=new v(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),i.call(this)}function E(e,t,r,i,n,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new p("write")):r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function S(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),x(e,t)}function A(t,r){r.bufferProcessing=!0;var i=r.bufferedRequest;if(t._writev&&i&&i.next){var n=r.bufferedRequestCount,o=new Array(n),a=r.corkedRequestsFree;a.entry=i;for(var s=0,u=!0;i;)o[s]=i,i.isBuf||(u=!1),i=i.next,s+=1;o.allBuffers=u,E(t,r,!0,r.length,o,"",a.finish),r.pendingcb++,r.lastBufferedRequest=null,a.next?(r.corkedRequestsFree=a.next,a.next=null):r.corkedRequestsFree=new e(r),r.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,c=i.encoding,h=i.callback;if(E(t,r,!1,r.objectMode?1:l.length,l,c,h),i=i.next,r.bufferedRequestCount--,r.writing)break}null===i&&(r.lastBufferedRequest=null)}r.bufferedRequest=i,r.bufferProcessing=!1}function M(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final(function(r){t.pendingcb--,r&&b(e,r),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function x(e,t){var r=M(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process$1.nextTick(R,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}return requireInherits_browser()(_,i),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===_&&(e&&e._writableState instanceof v)}})):a=function(e){return e instanceof this},_.prototype.pipe=function(){b(this,new f)},_.prototype.write=function(e,t,r){var i,a=this._writableState,s=!1,u=!a.objectMode&&(i=e,n.isBuffer(i)||i instanceof o);return u&&!n.isBuffer(e)&&(e=function(e){return n.from(e)}(e)),"function"==typeof t&&(r=t,t=null),u?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof r&&(r=w),a.ending?function(e,t){var r=new g;b(e,r),process$1.nextTick(t,r)}(this,r):(u||function(e,t,r,i){var n;return null===r?n=new m:"string"==typeof r||t.objectMode||(n=new c("chunk",["string","Buffer"],r)),!n||(b(e,n),process$1.nextTick(i,n),!1)}(this,a,e,r))&&(a.pendingcb++,s=function(e,t,r,i,o,a){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=n.from(t,r));return t}(t,i,o);i!==s&&(r=!0,o="buffer",i=s)}var u=t.objectMode?1:i.length;t.length+=u;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:o,isBuf:r,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else E(e,t,!1,u,i,o,a);return l}(this,a,u,e,t,r)),s},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new y(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,r){r(new h("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,x(e,t),r&&(t.finished?process$1.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=s.destroy,_.prototype._undestroy=s.undestroy,_.prototype._destroy=function(e,t){t(e)},_stream_writable$2}function require_stream_duplex$2(){if(hasRequired_stream_duplex$2)return _stream_duplex$2;hasRequired_stream_duplex$2=1;var e=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};_stream_duplex$2=a;var t=require_stream_readable$2(),r=require_stream_writable$2();requireInherits_browser()(a,t);for(var i=e(r.prototype),n=0;n<i.length;n++){var o=i[n];a.prototype[o]||(a.prototype[o]=r.prototype[o])}function a(e){if(!(this instanceof a))return new a(e);t.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||process$1.nextTick(u,this)}function u(e){e.end()}return Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),_stream_duplex$2}var string_decoder={},hasRequiredString_decoder,endOfStream$2,hasRequiredEndOfStream$2,async_iterator,hasRequiredAsync_iterator,fromBrowser,hasRequiredFromBrowser,_stream_readable$2,hasRequired_stream_readable$2,_stream_transform$2,hasRequired_stream_transform$2,_stream_passthrough$2,hasRequired_stream_passthrough$2,pipeline_1$1,hasRequiredPipeline$1,streamBrowserify,hasRequiredStreamBrowserify,hashBase$1,hasRequiredHashBase$1,md5_js,hasRequiredMd5_js,isarray$2,hasRequiredIsarray$2,typedArrayBuffer,hasRequiredTypedArrayBuffer,toBuffer$1,hasRequiredToBuffer$2,toBuffer_1$1,hasRequiredToBuffer$1;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=requireSafeBuffer$2().Buffer,t=e.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(r){var i;switch(this.encoding=function(r){var i=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(r);if("string"!=typeof i&&(e.isEncoding===t||!t(r)))throw new Error("Unknown encoding: "+r);return i||r}(r),this.encoding){case"utf16le":this.text=o,this.end=a,i=4;break;case"utf8":this.fillLast=n,i=4;break;case"base64":this.text=s,this.end=u,i=3;break;default:return this.write=l,void(this.end=c)}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(i)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function n(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function o(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function a(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function s(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l(e){return e.toString(this.encoding)}function c(e){return e&&e.length?this.write(e):""}return string_decoder.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},r.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=i(t[n]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if(o=i(t[n]),o>=0)return o>0&&(e.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if(o=i(t[n]),o>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},string_decoder}function requireEndOfStream$2(){if(hasRequiredEndOfStream$2)return endOfStream$2;hasRequiredEndOfStream$2=1;var e=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function t(){}return endOfStream$2=function r(i,n,o){if("function"==typeof n)return r(i,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];e.apply(this,i)}}}(o||t);var a=n.readable||!1!==n.readable&&i.readable,s=n.writable||!1!==n.writable&&i.writable,u=function(){i.writable||c()},l=i._writableState&&i._writableState.finished,c=function(){s=!1,l=!0,a||o.call(i)},h=i._readableState&&i._readableState.endEmitted,d=function(){a=!1,h=!0,s||o.call(i)},f=function(e){o.call(i,e)},p=function(){var t;return a&&!h?(i._readableState&&i._readableState.ended||(t=new e),o.call(i,t)):s&&!l?(i._writableState&&i._writableState.ended||(t=new e),o.call(i,t)):void 0},m=function(){i.req.on("finish",c)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(i)?s&&!i._writableState&&(i.on("end",u),i.on("close",u)):(i.on("complete",c),i.on("abort",p),i.req?m():i.on("request",m)),i.on("end",d),i.on("finish",c),!1!==n.error&&i.on("error",f),i.on("close",p),function(){i.removeListener("complete",c),i.removeListener("abort",p),i.removeListener("request",m),i.req&&i.req.removeListener("finish",c),i.removeListener("end",u),i.removeListener("close",u),i.removeListener("finish",c),i.removeListener("end",d),i.removeListener("error",f),i.removeListener("close",p)}},endOfStream$2}function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;var e;function t(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}hasRequiredAsync_iterator=1;var r=requireEndOfStream$2(),i=Symbol("lastResolve"),n=Symbol("lastReject"),o=Symbol("error"),a=Symbol("ended"),s=Symbol("lastPromise"),u=Symbol("handlePromise"),l=Symbol("stream");function c(e,t){return{value:e,done:t}}function h(e){var t=e[i];if(null!==t){var r=e[l].read();null!==r&&(e[s]=null,e[i]=null,e[n]=null,t(c(r,!1)))}}function d(e){process$1.nextTick(h,e)}var f=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((t(e={get stream(){return this[l]},next:function(){var e=this,t=this[o];if(null!==t)return Promise.reject(t);if(this[a])return Promise.resolve(c(void 0,!0));if(this[l].destroyed)return new Promise(function(t,r){process$1.nextTick(function(){e[o]?r(e[o]):t(c(void 0,!0))})});var r,i=this[s];if(i)r=new Promise(function(e,t){return function(r,i){e.then(function(){t[a]?r(c(void 0,!0)):t[u](r,i)},i)}}(i,this));else{var n=this[l].read();if(null!==n)return Promise.resolve(c(n,!1));r=new Promise(this[u])}return this[s]=r,r}},Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var e=this;return new Promise(function(t,r){e[l].destroy(null,function(e){e?r(e):t(c(void 0,!0))})})}),e),f);return async_iterator=function(e){var h,f=Object.create(p,(t(h={},l,{value:e,writable:!0}),t(h,i,{value:null,writable:!0}),t(h,n,{value:null,writable:!0}),t(h,o,{value:null,writable:!0}),t(h,a,{value:e._readableState.endEmitted,writable:!0}),t(h,u,{value:function(e,t){var r=f[l].read();r?(f[s]=null,f[i]=null,f[n]=null,e(c(r,!1))):(f[i]=e,f[n]=t)},writable:!0}),h));return f[s]=null,r(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=f[n];return null!==t&&(f[s]=null,f[i]=null,f[n]=null,t(e)),void(f[o]=e)}var r=f[i];null!==r&&(f[s]=null,f[i]=null,f[n]=null,r(c(void 0,!0))),f[a]=!0}),e.on("readable",d.bind(null,f)),f}}function requireFromBrowser(){return hasRequiredFromBrowser?fromBrowser:(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")})}function require_stream_readable$2(){if(hasRequired_stream_readable$2)return _stream_readable$2;var e;hasRequired_stream_readable$2=1,_stream_readable$2=_,_.ReadableState=v,requireEvents().EventEmitter;var t=function(e,t){return e.listeners(t).length},r=requireStreamBrowser$2(),i=requireDist$2().Buffer,n=(void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var o,a=requireUtil$2();o=a&&a.debuglog?a.debuglog("stream"):function(){};var s,u,l,c=requireBuffer_list$1(),h=requireDestroy$3(),d=requireState$1().getHighWaterMark,f=requireErrorsBrowser().codes,p=f.ERR_INVALID_ARG_TYPE,m=f.ERR_STREAM_PUSH_AFTER_EOF,g=f.ERR_METHOD_NOT_IMPLEMENTED,y=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;requireInherits_browser()(_,r);var b=h.errorOrDestroy,w=["error","close","destroy","pause","resume"];function v(t,r,i){e=e||require_stream_duplex$2(),t=t||{},"boolean"!=typeof i&&(i=r instanceof e),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=d(this,t,"readableHighWaterMark",i),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=requireString_decoder().StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function _(t){if(e=e||require_stream_duplex$2(),!(this instanceof _))return new _(t);var i=this instanceof e;this._readableState=new v(t,this,i),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),r.call(this)}function E(e,t,r,a,s){o("readableAddChunk",t);var u,l=e._readableState;if(null===t)l.reading=!1,function(e,t){if(o("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?R(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,x(e)))}(e,l);else if(s||(u=function(e,t){var r;o=t,i.isBuffer(o)||o instanceof n||"string"==typeof t||void 0===t||e.objectMode||(r=new p("chunk",["string","Buffer","Uint8Array"],t));var o;return r}(l,t)),u)b(e,u);else if(l.objectMode||t&&t.length>0)if("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===i.prototype||(t=function(e){return i.from(e)}(t)),a)l.endEmitted?b(e,new y):S(e,l,t,!0);else if(l.ended)b(e,new m);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!r?(t=l.decoder.write(t),l.objectMode||0!==t.length?S(e,l,t,!1):k(e,l)):S(e,l,t,!1)}else a||(l.reading=!1,k(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function S(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&R(e)),k(e,t)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=h.destroy,_.prototype._undestroy=h.undestroy,_.prototype._destroy=function(e,t){t(e)},_.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=i.from(e,t),t=""),r=!0),E(this,e,t,!1,r)},_.prototype.unshift=function(e){return E(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){s||(s=requireString_decoder().StringDecoder);var t=new s(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var A=1073741824;function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function R(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,process$1.nextTick(x,e))}function x(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,$(e)}function k(e,t){t.readingMore||(t.readingMore=!0,process$1.nextTick(T,e,t))}function T(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function C(e){o("readable nexttick read 0"),e.read(0)}function I(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),$(e),t.flowing&&!t.reading&&e.read(0)}function $(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function O(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process$1.nextTick(N,t,e))}function N(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function L(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}return _.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):R(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&O(this),null;var i,n=t.needReadable;return o("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",n=!0),t.ended||t.reading?o("reading or ended",n=!1):n&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(r,t))),null===(i=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&O(this)),null!==i&&this.emit("data",i),i},_.prototype._read=function(e){b(this,new g("_read()"))},_.prototype.pipe=function(e,r){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,o("pipe count=%d opts=%j",n.pipesCount,r);var a=(!r||!1!==r.end)&&e!==process$1.stdout&&e!==process$1.stderr?u:m;function s(t,r){o("onunpipe"),t===i&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,o("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",s),i.removeListener("end",u),i.removeListener("end",m),i.removeListener("data",h),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){o("onend"),e.end()}n.endEmitted?process$1.nextTick(a):i.once("end",a),e.on("unpipe",s);var l=function(e){return function(){var r=e._readableState;o("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&t(e,"data")&&(r.flowing=!0,$(e))}}(i);e.on("drain",l);var c=!1;function h(t){o("ondata");var r=e.write(t);o("dest.write",r),!1===r&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==L(n.pipes,e))&&!c&&(o("false write response, pause",n.awaitDrain),n.awaitDrain++),i.pause())}function d(r){o("onerror",r),m(),e.removeListener("error",d),0===t(e,"error")&&b(e,r)}function f(){e.removeListener("finish",p),m()}function p(){o("onfinish"),e.removeListener("close",f),m()}function m(){o("unpipe"),i.unpipe(e)}return i.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",f),e.once("finish",p),e.emit("pipe",i),n.flowing||(o("pipe resume"),i.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<n;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=L(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},_.prototype.on=function(e,t){var i=r.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,o("on readable",n.length,n.reading),n.length?R(this):n.reading||process$1.nextTick(C,this))),i},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(e,t){var i=r.prototype.removeListener.call(this,e,t);return"readable"===e&&process$1.nextTick(P,this),i},_.prototype.removeAllListeners=function(e){var t=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process$1.nextTick(P,this),t},_.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process$1.nextTick(I,e,t))}(this,e)),e.paused=!1,this},_.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(n){(o("wrapped data"),r.decoder&&(n=r.decoder.write(n)),r.objectMode&&null==n)||(r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause()))}),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var a=0;a<w.length;a++)e.on(w[a],this.emit.bind(this,w[a]));return this._read=function(t){o("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=requireAsync_iterator()),u(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),_._fromList=B,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_.from=function(e,t){return void 0===l&&(l=requireFromBrowser()),l(_,e,t)}),_stream_readable$2}function require_stream_transform$2(){if(hasRequired_stream_transform$2)return _stream_transform$2;hasRequired_stream_transform$2=1,_stream_transform$2=s;var e=requireErrorsBrowser().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,i=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,n=e.ERR_TRANSFORM_WITH_LENGTH_0,o=require_stream_duplex$2();function a(e,t){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(null===n)return this.emit("error",new r);i.writechunk=null,i.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);o.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?l(this,null,null):this._flush(function(t,r){l(e,t,r)})}function l(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new n;if(e._transformState.transforming)throw new i;return e.push(null)}return requireInherits_browser()(s,o),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,o.prototype.push.call(this,e,t)},s.prototype._transform=function(e,r,i){i(new t("_transform()"))},s.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},s.prototype._destroy=function(e,t){o.prototype._destroy.call(this,e,function(e){t(e)})},_stream_transform$2}function require_stream_passthrough$2(){if(hasRequired_stream_passthrough$2)return _stream_passthrough$2;hasRequired_stream_passthrough$2=1,_stream_passthrough$2=t;var e=require_stream_transform$2();function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return requireInherits_browser()(t,e),t.prototype._transform=function(e,t,r){r(null,e)},_stream_passthrough$2}function requirePipeline$1(){if(hasRequiredPipeline$1)return pipeline_1$1;var e;hasRequiredPipeline$1=1;var t=requireErrorsBrowser().codes,r=t.ERR_MISSING_ARGS,i=t.ERR_STREAM_DESTROYED;function n(e){if(e)throw e}function o(e){e()}function a(e,t){return e.pipe(t)}return pipeline_1$1=function(){for(var t=arguments.length,s=new Array(t),u=0;u<t;u++)s[u]=arguments[u];var l,c=function(e){return e.length?"function"!=typeof e[e.length-1]?n:e.pop():n}(s);if(Array.isArray(s[0])&&(s=s[0]),s.length<2)throw new r("streams");var h=s.map(function(t,r){var n=r<s.length-1;return function(t,r,n,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;t.on("close",function(){a=!0}),void 0===e&&(e=requireEndOfStream$2()),e(t,{readable:r,writable:n},function(e){if(e)return o(e);a=!0,o()});var s=!1;return function(e){if(!a&&!s)return s=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new i("pipe"))}}(t,n,r>0,function(e){l||(l=e),e&&h.forEach(o),n||(h.forEach(o),c(l))})});return s.reduce(a)},pipeline_1$1}function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=t;var e=requireEvents().EventEmitter;function t(){e.call(this)}return requireInherits_browser()(t,e),t.Readable=require_stream_readable$2(),t.Writable=require_stream_writable$2(),t.Duplex=require_stream_duplex$2(),t.Transform=require_stream_transform$2(),t.PassThrough=require_stream_passthrough$2(),t.finished=requireEndOfStream$2(),t.pipeline=requirePipeline$1(),t.Stream=t,t.prototype.pipe=function(t,r){var i=this;function n(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function o(){i.readable&&i.resume&&i.resume()}i.on("data",n),t.on("drain",o),t._isStdio||r&&!1===r.end||(i.on("end",s),i.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(c(),0===e.listenerCount(this,"error"))throw t}function c(){i.removeListener("data",n),t.removeListener("drain",o),i.removeListener("end",s),i.removeListener("close",u),i.removeListener("error",l),t.removeListener("error",l),i.removeListener("end",c),i.removeListener("close",c),t.removeListener("close",c)}return i.on("error",l),t.on("error",l),i.on("end",c),i.on("close",c),t.on("close",c),t.emit("pipe",i),t},streamBrowserify}function requireHashBase$1(){if(hasRequiredHashBase$1)return hashBase$1;hasRequiredHashBase$1=1;var e=requireSafeBuffer$2().Buffer,t=requireStreamBrowserify().Transform;function r(r){t.call(this),this._block=e.allocUnsafe(r),this._blockSize=r,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}requireInherits_browser()(r,t),r.prototype._transform=function(e,t,r){var i=null;try{this.update(e,t)}catch(n){i=n}r(i)},r.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(r){t=r}e(t)};var i="undefined"!=typeof Uint8Array,n="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&ArrayBuffer.isView&&(e.prototype instanceof Uint8Array||e.TYPED_ARRAY_SUPPORT);return r.prototype.update=function(t,r){if(this._finalized)throw new Error("Digest already called");t=function(t,r){if(t instanceof e)return t;if("string"==typeof t)return e.from(t,r);if(n&&ArrayBuffer.isView(t)){if(0===t.byteLength)return e.alloc(0);var o=e.from(t.buffer,t.byteOffset,t.byteLength);if(o.byteLength===t.byteLength)return o}if(i&&t instanceof Uint8Array)return e.from(t);if(e.isBuffer(t)&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return e.from(t);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}(t,r);for(var o=this._block,a=0;this._blockOffset+t.length-a>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)o[s++]=t[a++];this._update(),this._blockOffset=0}for(;a<t.length;)o[this._blockOffset++]=t[a++];for(var u=0,l=8*t.length;l>0;++u)this._length[u]+=l,(l=this._length[u]/4294967296|0)>0&&(this._length[u]-=4294967296*l);return this},r.prototype._update=function(){throw new Error("_update is not implemented")},r.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},r.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase$1=r}function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var e=requireInherits_browser(),t=requireHashBase$1(),r=requireSafeBuffer$2().Buffer,i=new Array(16);function n(){t.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function o(e,t){return e<<t|e>>>32-t}function a(e,t,r,i,n,a,s){return o(e+(t&r|~t&i)+n+a|0,s)+t|0}function s(e,t,r,i,n,a,s){return o(e+(t&i|r&~i)+n+a|0,s)+t|0}function u(e,t,r,i,n,a,s){return o(e+(t^r^i)+n+a|0,s)+t|0}function l(e,t,r,i,n,a,s){return o(e+(r^(t|~i))+n+a|0,s)+t|0}return e(n,t),n.prototype._update=function(){for(var e=i,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,o=this._c,c=this._d;r=a(r,n,o,c,e[0],3614090360,7),c=a(c,r,n,o,e[1],3905402710,12),o=a(o,c,r,n,e[2],606105819,17),n=a(n,o,c,r,e[3],3250441966,22),r=a(r,n,o,c,e[4],4118548399,7),c=a(c,r,n,o,e[5],1200080426,12),o=a(o,c,r,n,e[6],2821735955,17),n=a(n,o,c,r,e[7],4249261313,22),r=a(r,n,o,c,e[8],1770035416,7),c=a(c,r,n,o,e[9],2336552879,12),o=a(o,c,r,n,e[10],4294925233,17),n=a(n,o,c,r,e[11],2304563134,22),r=a(r,n,o,c,e[12],1804603682,7),c=a(c,r,n,o,e[13],4254626195,12),o=a(o,c,r,n,e[14],2792965006,17),r=s(r,n=a(n,o,c,r,e[15],1236535329,22),o,c,e[1],4129170786,5),c=s(c,r,n,o,e[6],3225465664,9),o=s(o,c,r,n,e[11],643717713,14),n=s(n,o,c,r,e[0],3921069994,20),r=s(r,n,o,c,e[5],3593408605,5),c=s(c,r,n,o,e[10],38016083,9),o=s(o,c,r,n,e[15],3634488961,14),n=s(n,o,c,r,e[4],3889429448,20),r=s(r,n,o,c,e[9],568446438,5),c=s(c,r,n,o,e[14],3275163606,9),o=s(o,c,r,n,e[3],4107603335,14),n=s(n,o,c,r,e[8],1163531501,20),r=s(r,n,o,c,e[13],2850285829,5),c=s(c,r,n,o,e[2],4243563512,9),o=s(o,c,r,n,e[7],1735328473,14),r=u(r,n=s(n,o,c,r,e[12],2368359562,20),o,c,e[5],4294588738,4),c=u(c,r,n,o,e[8],2272392833,11),o=u(o,c,r,n,e[11],1839030562,16),n=u(n,o,c,r,e[14],4259657740,23),r=u(r,n,o,c,e[1],2763975236,4),c=u(c,r,n,o,e[4],1272893353,11),o=u(o,c,r,n,e[7],4139469664,16),n=u(n,o,c,r,e[10],3200236656,23),r=u(r,n,o,c,e[13],681279174,4),c=u(c,r,n,o,e[0],3936430074,11),o=u(o,c,r,n,e[3],3572445317,16),n=u(n,o,c,r,e[6],76029189,23),r=u(r,n,o,c,e[9],3654602809,4),c=u(c,r,n,o,e[12],3873151461,11),o=u(o,c,r,n,e[15],530742520,16),r=l(r,n=u(n,o,c,r,e[2],3299628645,23),o,c,e[0],4096336452,6),c=l(c,r,n,o,e[7],1126891415,10),o=l(o,c,r,n,e[14],2878612391,15),n=l(n,o,c,r,e[5],4237533241,21),r=l(r,n,o,c,e[12],1700485571,6),c=l(c,r,n,o,e[3],2399980690,10),o=l(o,c,r,n,e[10],4293915773,15),n=l(n,o,c,r,e[1],2240044497,21),r=l(r,n,o,c,e[8],1873313359,6),c=l(c,r,n,o,e[15],4264355552,10),o=l(o,c,r,n,e[6],2734768916,15),n=l(n,o,c,r,e[13],1309151649,21),r=l(r,n,o,c,e[4],4149444226,6),c=l(c,r,n,o,e[11],3174756917,10),o=l(o,c,r,n,e[2],718787259,15),n=l(n,o,c,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+o|0,this._d=this._d+c|0},n.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=r.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},md5_js=n}function requireIsarray$2(){if(hasRequiredIsarray$2)return isarray$2;hasRequiredIsarray$2=1;var e={}.toString;return isarray$2=Array.isArray||function(t){return"[object Array]"==e.call(t)}}function requireTypedArrayBuffer(){if(hasRequiredTypedArrayBuffer)return typedArrayBuffer;hasRequiredTypedArrayBuffer=1;var e=requireType(),t=requireCallBound()("TypedArray.prototype.buffer",!0),r=requireIsTypedArray();return typedArrayBuffer=t||function(t){if(!r(t))throw new e("Not a Typed Array");return t.buffer}}function requireToBuffer$2(){if(hasRequiredToBuffer$2)return toBuffer$1;hasRequiredToBuffer$2=1;var e=requireSafeBuffer$2().Buffer,t=requireIsarray$2(),r=requireTypedArrayBuffer(),i=ArrayBuffer.isView||function(e){try{return r(e),!0}catch(t){return!1}},n="undefined"!=typeof Uint8Array,o="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,a=o&&(e.prototype instanceof Uint8Array||e.TYPED_ARRAY_SUPPORT);return toBuffer$1=function(r,s){if(e.isBuffer(r))return r.constructor&&!("isBuffer"in r)?e.from(r):r;if("string"==typeof r)return e.from(r,s);if(o&&i(r)){if(0===r.byteLength)return e.alloc(0);if(a){var u=e.from(r.buffer,r.byteOffset,r.byteLength);if(u.byteLength===r.byteLength)return u}var l=r instanceof Uint8Array?r:new Uint8Array(r.buffer,r.byteOffset,r.byteLength),c=e.from(l);if(c.length===r.byteLength)return c}if(n&&r instanceof Uint8Array)return e.from(r);var h=t(r);if(h)for(var d=0;d<r.length;d+=1){var f=r[d];if("number"!=typeof f||f<0||f>255||~~f!==f)throw new RangeError("Array items must be numbers in the range 0-255.")}if(h||e.isBuffer(r)&&r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r))return e.from(r);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')}}function requireToBuffer$1(){if(hasRequiredToBuffer$1)return toBuffer_1$1;hasRequiredToBuffer$1=1;var e=requireSafeBuffer$2().Buffer,t=requireToBuffer$2(),r="undefined"!=typeof Uint8Array,i=r&&"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView;return toBuffer_1$1=function(n,o){if("string"==typeof n||e.isBuffer(n)||r&&n instanceof Uint8Array||i&&i(n))return t(n,o);throw new TypeError('The "data" argument must be a string, a Buffer, a Uint8Array, or a DataView')}}var readableBrowser$1={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs,isarray$1,hasRequiredIsarray$1,streamBrowser$1,hasRequiredStreamBrowser$1;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;return hasRequiredProcessNextickArgs=1,void 0===process$1||!process$1.version||0===process$1.version.indexOf("v0.")||0===process$1.version.indexOf("v1.")&&0!==process$1.version.indexOf("v1.8.")?processNextickArgs.exports={nextTick:function(e,t,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var n,o,a=arguments.length;switch(a){case 0:case 1:return process$1.nextTick(e);case 2:return process$1.nextTick(function(){e.call(null,t)});case 3:return process$1.nextTick(function(){e.call(null,t,r)});case 4:return process$1.nextTick(function(){e.call(null,t,r,i)});default:for(n=new Array(a-1),o=0;o<n.length;)n[o++]=arguments[o];return process$1.nextTick(function(){e.apply(null,n)})}}}:processNextickArgs.exports=process$1,processNextickArgs.exports}function requireIsarray$1(){if(hasRequiredIsarray$1)return isarray$1;hasRequiredIsarray$1=1;var e={}.toString;return isarray$1=Array.isArray||function(t){return"[object Array]"==e.call(t)}}function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1?streamBrowser$1:(hasRequiredStreamBrowser$1=1,streamBrowser$1=requireEvents().EventEmitter)}var safeBuffer$1={exports:{}},hasRequiredSafeBuffer$1;function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,function(e,t){var r=requireDist$2(),i=r.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(n(r,t),t.Buffer=o),n(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}var util$1={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$1;function e(e){return Object.prototype.toString.call(e)}return hasRequiredUtil$1=1,util$1.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},util$1.isBoolean=function(e){return"boolean"==typeof e},util$1.isNull=function(e){return null===e},util$1.isNullOrUndefined=function(e){return null==e},util$1.isNumber=function(e){return"number"==typeof e},util$1.isString=function(e){return"string"==typeof e},util$1.isSymbol=function(e){return"symbol"==typeof e},util$1.isUndefined=function(e){return void 0===e},util$1.isRegExp=function(t){return"[object RegExp]"===e(t)},util$1.isObject=function(e){return"object"==typeof e&&null!==e},util$1.isDate=function(t){return"[object Date]"===e(t)},util$1.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},util$1.isFunction=function(e){return"function"==typeof e},util$1.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},util$1.isBuffer=requireDist$2().Buffer.isBuffer,util$1}var BufferList$1={exports:{}},hasRequiredBufferList$1,destroy_1$2,hasRequiredDestroy$2,_stream_writable$1,hasRequired_stream_writable$1,_stream_duplex$1,hasRequired_stream_duplex$1,_stream_readable$1,hasRequired_stream_readable$1,_stream_transform$1,hasRequired_stream_transform$1,_stream_passthrough$1,hasRequired_stream_passthrough$1,hasRequiredReadableBrowser$1,hashBase,hasRequiredHashBase,ripemd160,hasRequiredRipemd160;function requireBufferList$1(){return hasRequiredBufferList$1||(hasRequiredBufferList$1=1,function(e){var t=requireSafeBuffer$1().Buffer,r=requireUtil$2();function i(e,t,r){e.copy(t,r)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return t.alloc(0);for(var r=t.allocUnsafe(e>>>0),n=this.head,o=0;n;)i(n.data,r,o),o+=n.data.length,n=n.next;return r},e}(),r&&r.inspect&&r.inspect.custom&&(e.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})}(BufferList$1)),BufferList$1.exports}function requireDestroy$2(){if(hasRequiredDestroy$2)return destroy_1$2;hasRequiredDestroy$2=1;var e=requireProcessNextickArgs();function t(e,t){e.emit("error",t)}return destroy_1$2={destroy:function(r,i){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(i?i(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(t,this,r)):e.nextTick(t,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(r){!i&&r?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,e.nextTick(t,n,r)):e.nextTick(t,n,r):i&&i(r)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}}function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1;var e=requireProcessNextickArgs();function t(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;e.entry=null;for(;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}_stream_writable$1=f;var r,i=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:e.nextTick;f.WritableState=d;var n=Object.create(requireUtil$1());n.inherits=requireInherits_browser();var o={deprecate:requireBrowser$d()},a=requireStreamBrowser$1(),s=requireSafeBuffer$1().Buffer,u=(void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,c=requireDestroy$2();function h(){}function d(n,o){r=r||require_stream_duplex$1(),n=n||{};var a=o instanceof r;this.objectMode=!!n.objectMode,a&&(this.objectMode=this.objectMode||!!n.writableObjectMode);var s=n.highWaterMark,u=n.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:a&&(u||0===u)?u:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===n.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=n.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,r){var n=t._writableState,o=n.sync,a=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),r)!function(t,r,i,n,o){--r.pendingcb,i?(e.nextTick(o,n),e.nextTick(w,t,r),t._writableState.errorEmitted=!0,t.emit("error",n)):(o(n),t._writableState.errorEmitted=!0,t.emit("error",n),w(t,r))}(t,n,o,r,a);else{var s=y(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||g(t,n),o?i(m,t,n,s,a):m(t,n,s,a)}}(o,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function f(e){if(r=r||require_stream_duplex$1(),!(l.call(f,this)||this instanceof r))return new f(e);this._writableState=new d(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function p(e,t,r,i,n,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function m(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),w(e,t)}function g(e,r){r.bufferProcessing=!0;var i=r.bufferedRequest;if(e._writev&&i&&i.next){var n=r.bufferedRequestCount,o=new Array(n),a=r.corkedRequestsFree;a.entry=i;for(var s=0,u=!0;i;)o[s]=i,i.isBuf||(u=!1),i=i.next,s+=1;o.allBuffers=u,p(e,r,!0,r.length,o,"",a.finish),r.pendingcb++,r.lastBufferedRequest=null,a.next?(r.corkedRequestsFree=a.next,a.next=null):r.corkedRequestsFree=new t(r),r.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,c=i.encoding,h=i.callback;if(p(e,r,!1,r.objectMode?1:l.length,l,c,h),i=i.next,r.bufferedRequestCount--,r.writing)break}null===i&&(r.lastBufferedRequest=null)}r.bufferedRequest=i,r.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),w(e,t)})}function w(t,r){var i=y(r);return i&&(!function(t,r){r.prefinished||r.finalCalled||("function"==typeof t._final?(r.pendingcb++,r.finalCalled=!0,e.nextTick(b,t,r)):(r.prefinished=!0,t.emit("prefinish")))}(t,r),0===r.pendingcb&&(r.finished=!0,t.emit("finish"))),i}return n.inherits(f,a),d.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(d.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===f&&(e&&e._writableState instanceof d)}})):l=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(t,r,i){var n,o=this._writableState,a=!1,l=!o.objectMode&&(n=t,s.isBuffer(n)||n instanceof u);return l&&!s.isBuffer(t)&&(t=function(e){return s.from(e)}(t)),"function"==typeof r&&(i=r,r=null),l?r="buffer":r||(r=o.defaultEncoding),"function"!=typeof i&&(i=h),o.ended?function(t,r){var i=new Error("write after end");t.emit("error",i),e.nextTick(r,i)}(this,i):(l||function(t,r,i,n){var o=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||r.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),e.nextTick(n,a),o=!1),o}(this,o,t,i))&&(o.pendingcb++,a=function(e,t,r,i,n,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=s.from(t,r));return t}(t,i,n);i!==a&&(r=!0,n="buffer",i=a)}var u=t.objectMode?1:i.length;t.length+=u;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else p(e,t,!1,u,i,n,o);return l}(this,o,l,t,r,i)),a},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||g(this,e))},f.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(t,r,i){var n=this._writableState;"function"==typeof t?(i=t,t=null,r=null):"function"==typeof r&&(i=r,r=null),null!=t&&this.write(t,r),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,r,i){r.ending=!0,w(t,r),i&&(r.finished?e.nextTick(i):t.once("finish",i));r.ended=!0,t.writable=!1}(this,n,i)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=c.destroy,f.prototype._undestroy=c.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)},_stream_writable$1}function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var e=requireProcessNextickArgs(),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};_stream_duplex$1=u;var r=Object.create(requireUtil$1());r.inherits=requireInherits_browser();var i=require_stream_readable$1(),n=require_stream_writable$1();r.inherits(u,i);for(var o=t(n.prototype),a=0;a<o.length;a++){var s=o[a];u.prototype[s]||(u.prototype[s]=n.prototype[s])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),n.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||e.nextTick(c,this)}function c(e){e.end()}return Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),u.prototype._destroy=function(t,r){this.push(null),this.end(),e.nextTick(r,t)},_stream_duplex$1}function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1;var e=requireProcessNextickArgs();_stream_readable$1=m;var t,r=requireIsarray$1();m.ReadableState=p,requireEvents().EventEmitter;var i=function(e,t){return e.listeners(t).length},n=requireStreamBrowser$1(),o=requireSafeBuffer$1().Buffer,a=(void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var s=Object.create(requireUtil$1());s.inherits=requireInherits_browser();var u=requireUtil$2(),l=void 0;l=u&&u.debuglog?u.debuglog("stream"):function(){};var c,h=requireBufferList$1(),d=requireDestroy$2();s.inherits(m,n);var f=["error","close","destroy","pause","resume"];function p(e,r){e=e||{};var i=r instanceof(t=t||require_stream_duplex$1());this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(c||(c=requireString_decoder().StringDecoder),this.decoder=new c(e.encoding),this.encoding=e.encoding)}function m(e){if(t=t||require_stream_duplex$1(),!(this instanceof m))return new m(e);this._readableState=new p(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),n.call(this)}function g(e,t,r,i,n){var s,u=e._readableState;null===t?(u.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,v(e)}(e,u)):(n||(s=function(e,t){var r;i=t,o.isBuffer(i)||i instanceof a||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var i;return r}(u,t)),s?e.emit("error",s):u.objectMode||t&&t.length>0?("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),i?u.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):y(e,u,t,!0):u.ended?e.emit("error",new Error("stream.push() after EOF")):(u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?y(e,u,t,!1):E(e,u)):y(e,u,t,!1))):i||(u.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(u)}function y(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&v(e)),E(e,t)}Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),m.prototype.destroy=d.destroy,m.prototype._undestroy=d.undestroy,m.prototype._destroy=function(e,t){this.push(null),t(e)},m.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=o.from(e,t),t=""),r=!0),g(this,e,t,!1,r)},m.prototype.unshift=function(e){return g(this,e,null,!0,!1)},m.prototype.isPaused=function(){return!1===this._readableState.flowing},m.prototype.setEncoding=function(e){return c||(c=requireString_decoder().StringDecoder),this._readableState.decoder=new c(e),this._readableState.encoding=e,this};var b=8388608;function w(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=b?e=b:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function v(t){var r=t._readableState;r.needReadable=!1,r.emittedReadable||(l("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?e.nextTick(_,t):_(t))}function _(e){l("emit readable"),e.emit("readable"),R(e)}function E(t,r){r.readingMore||(r.readingMore=!0,e.nextTick(S,t,r))}function S(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(l("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function A(e){l("readable nexttick read 0"),e.read(0)}function M(e,t){t.reading||(l("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,i=1,n=r.data;e-=n.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?n+=o:n+=o.slice(0,e),0===(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}(e,t):function(e,t){var r=o.allocUnsafe(e),i=t.head,n=1;i.data.copy(r),e-=i.data.length;for(;i=i.next;){var a=i.data,s=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,s),0===(e-=s)){s===a.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=a.slice(s));break}++n}return t.length-=n,r}(e,t);return i}(e,t.buffer,t.decoder),r);var r}function k(t){var r=t._readableState;if(r.length>0)throw new Error('"endReadable()" called on non-empty stream');r.endEmitted||(r.ended=!0,e.nextTick(T,r,t))}function T(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}return m.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?k(this):v(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&k(this),null;var i,n=t.needReadable;return l("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",n=!0),t.ended||t.reading?l("reading or ended",n=!1):n&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(r,t))),null===(i=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&k(this)),null!==i&&this.emit("data",i),i},m.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},m.prototype.pipe=function(t,n){var o=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,l("pipe count=%d opts=%j",a.pipesCount,n);var s=(!n||!1!==n.end)&&t!==process$1.stdout&&t!==process$1.stderr?c:b;function u(e,r){l("onunpipe"),e===o&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),t.removeListener("close",g),t.removeListener("finish",y),t.removeListener("drain",h),t.removeListener("error",m),t.removeListener("unpipe",u),o.removeListener("end",c),o.removeListener("end",b),o.removeListener("data",p),d=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){l("onend"),t.end()}a.endEmitted?e.nextTick(s):o.once("end",s),t.on("unpipe",u);var h=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,R(e))}}(o);t.on("drain",h);var d=!1;var f=!1;function p(e){l("ondata"),f=!1,!1!==t.write(e)||f||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==P(a.pipes,t))&&!d&&(l("false write response, pause",a.awaitDrain),a.awaitDrain++,f=!0),o.pause())}function m(e){l("onerror",e),b(),t.removeListener("error",m),0===i(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",y),b()}function y(){l("onfinish"),t.removeListener("close",g),b()}function b(){l("unpipe"),o.unpipe(t)}return o.on("data",p),function(e,t,i){if("function"==typeof e.prependListener)return e.prependListener(t,i);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]:e.on(t,i)}(t,"error",m),t.once("close",g),t.once("finish",y),t.emit("pipe",o),a.flowing||(l("pipe resume"),o.resume()),t},m.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<n;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=P(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},m.prototype.on=function(t,r){var i=n.prototype.on.call(this,t,r);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var o=this._readableState;o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.emittedReadable=!1,o.reading?o.length&&v(this):e.nextTick(A,this))}return i},m.prototype.addListener=m.prototype.on,m.prototype.resume=function(){var t=this._readableState;return t.flowing||(l("resume"),t.flowing=!0,function(t,r){r.resumeScheduled||(r.resumeScheduled=!0,e.nextTick(M,t,r))}(this,t)),this},m.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this},m.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",function(){if(l("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(n){(l("wrapped data"),r.decoder&&(n=r.decoder.write(n)),r.objectMode&&null==n)||(r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause()))}),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var o=0;o<f.length;o++)e.on(f[o],this.emit.bind(this,f[o]));return this._read=function(t){l("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(m.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),m._fromList=x,_stream_readable$1}function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=i;var e=require_stream_duplex$1(),t=Object.create(requireUtil$1());function r(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);e.call(this,t),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",n)}function n(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){o(e,t,r)}):o(this,null,null)}function o(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}return t.inherits=requireInherits_browser(),t.inherits(i,e),i.prototype.push=function(t,r){return this._transformState.needTransform=!1,e.prototype.push.call(this,t,r)},i.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(t,r){var i=this;e.prototype._destroy.call(this,t,function(e){r(e),i.emit("close")})},_stream_transform$1}function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=r;var e=require_stream_transform$1(),t=Object.create(requireUtil$1());function r(t){if(!(this instanceof r))return new r(t);e.call(this,t)}return t.inherits=requireInherits_browser(),t.inherits(r,e),r.prototype._transform=function(e,t,r){r(null,e)},_stream_passthrough$1}function requireReadableBrowser$1(){return hasRequiredReadableBrowser$1||(hasRequiredReadableBrowser$1=1,e=readableBrowser$1,t=readableBrowser$1.exports,(t=e.exports=require_stream_readable$1()).Stream=t,t.Readable=t,t.Writable=require_stream_writable$1(),t.Duplex=require_stream_duplex$1(),t.Transform=require_stream_transform$1(),t.PassThrough=require_stream_passthrough$1()),readableBrowser$1.exports;var e,t}function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var e=requireSafeBuffer$2().Buffer,t=requireToBuffer$1(),r=requireReadableBrowser$1().Transform;function i(t){r.call(this),this._block=e.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return requireInherits_browser()(i,r),i.prototype._transform=function(e,t,r){var i=null;try{this.update(e,t)}catch(n){i=n}r(i)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(r){t=r}e(t)},i.prototype.update=function(e,r){if(this._finalized)throw new Error("Digest already called");for(var i=t(e,r),n=this._block,o=0;this._blockOffset+i.length-o>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)n[a]=i[o],a+=1,o+=1;this._update(),this._blockOffset=0}for(;o<i.length;)n[this._blockOffset]=i[o],this._blockOffset+=1,o+=1;for(var s=0,u=8*i.length;u>0;++s)this._length[s]+=u,(u=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*u);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=i}function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var e=requireDist$2().Buffer,t=requireInherits_browser(),r=requireHashBase(),i=new Array(16),n=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],o=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],a=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],s=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],u=[0,1518500249,1859775393,2400959708,2840853838],l=[1352829926,1548603684,1836072691,2053994217,0];function c(e,t){return e<<t|e>>>32-t}function h(e,t,r,i,n,o,a,s){return c(e+(t^r^i)+o+a|0,s)+n|0}function d(e,t,r,i,n,o,a,s){return c(e+(t&r|~t&i)+o+a|0,s)+n|0}function f(e,t,r,i,n,o,a,s){return c(e+((t|~r)^i)+o+a|0,s)+n|0}function p(e,t,r,i,n,o,a,s){return c(e+(t&i|r&~i)+o+a|0,s)+n|0}function m(e,t,r,i,n,o,a,s){return c(e+(t^(r|~i))+o+a|0,s)+n|0}function g(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}return t(g,r),g.prototype._update=function(){for(var e=i,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,g=0|this._b,y=0|this._c,b=0|this._d,w=0|this._e,v=0|this._a,_=0|this._b,E=0|this._c,S=0|this._d,A=0|this._e,M=0;M<80;M+=1){var R,x;M<16?(R=h(r,g,y,b,w,e[n[M]],u[0],a[M]),x=m(v,_,E,S,A,e[o[M]],l[0],s[M])):M<32?(R=d(r,g,y,b,w,e[n[M]],u[1],a[M]),x=p(v,_,E,S,A,e[o[M]],l[1],s[M])):M<48?(R=f(r,g,y,b,w,e[n[M]],u[2],a[M]),x=f(v,_,E,S,A,e[o[M]],l[2],s[M])):M<64?(R=p(r,g,y,b,w,e[n[M]],u[3],a[M]),x=d(v,_,E,S,A,e[o[M]],l[3],s[M])):(R=m(r,g,y,b,w,e[n[M]],u[4],a[M]),x=h(v,_,E,S,A,e[o[M]],l[4],s[M])),r=w,w=b,b=c(y,10),y=g,g=R,v=A,A=S,S=c(E,10),E=_,_=x}var k=this._b+y+S|0;this._b=this._c+b+A|0,this._c=this._d+w+v|0,this._d=this._e+r+_|0,this._e=this._a+g+E|0,this._a=k},g.prototype._digest=function(){this._block[this._blockOffset]=128,this._blockOffset+=1,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=e.alloc?e.alloc(20):new e(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},ripemd160=g}var sha_js={exports:{}},hash$1,hasRequiredHash,sha,hasRequiredSha,sha1$1,hasRequiredSha1,sha256$3,hasRequiredSha256,sha224$1,hasRequiredSha224,sha512$5,hasRequiredSha512,sha384$1,hasRequiredSha384,hasRequiredSha_js,cipherBase,hasRequiredCipherBase,browser$c,hasRequiredBrowser$c,legacy$1,hasRequiredLegacy$1,md5$1,hasRequiredMd5,browser$b,hasRequiredBrowser$b;function requireHash(){if(hasRequiredHash)return hash$1;hasRequiredHash=1;var e=requireSafeBuffer$2().Buffer,t=requireToBuffer$2();function r(t,r){this._block=e.alloc(t),this._finalSize=r,this._blockSize=t,this._len=0}return r.prototype.update=function(e,r){e=t(e,r||"utf8");for(var i=this._block,n=this._blockSize,o=e.length,a=this._len,s=0;s<o;){for(var u=a%n,l=Math.min(o-s,n-u),c=0;c<l;c++)i[u+c]=e[s+c];s+=l,(a+=l)%n===0&&this._update(i)}return this._len+=o,this},r.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var i=(4294967295&r)>>>0,n=(r-i)/4294967296;this._block.writeUInt32BE(n,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$1=r}function requireSha(){if(hasRequiredSha)return sha;hasRequiredSha=1;var e=requireInherits_browser(),t=requireHash(),r=requireSafeBuffer$2().Buffer,i=[1518500249,1859775393,-1894007588,-899497514],n=new Array(80);function o(){this.init(),this._w=n,t.call(this,64,56)}function a(e){return e<<5|e>>>27}function s(e){return e<<30|e>>>2}function u(e,t,r,i){return 0===e?t&r|~t&i:2===e?t&r|t&i|r&i:t^r^i}return e(o,t),o.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},o.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,o=0|this._c,l=0|this._d,c=0|this._e,h=0;h<16;++h)t[h]=e.readInt32BE(4*h);for(;h<80;++h)t[h]=t[h-3]^t[h-8]^t[h-14]^t[h-16];for(var d=0;d<80;++d){var f=~~(d/20),p=a(r)+u(f,n,o,l)+c+t[d]+i[f]|0;c=l,l=o,o=s(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=o+this._c|0,this._d=l+this._d|0,this._e=c+this._e|0},o.prototype._hash=function(){var e=r.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},sha=o}function requireSha1(){if(hasRequiredSha1)return sha1$1;hasRequiredSha1=1;var e=requireInherits_browser(),t=requireHash(),r=requireSafeBuffer$2().Buffer,i=[1518500249,1859775393,-1894007588,-899497514],n=new Array(80);function o(){this.init(),this._w=n,t.call(this,64,56)}function a(e){return e<<1|e>>>31}function s(e){return e<<5|e>>>27}function u(e){return e<<30|e>>>2}function l(e,t,r,i){return 0===e?t&r|~t&i:2===e?t&r|t&i|r&i:t^r^i}return e(o,t),o.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},o.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,o=0|this._c,c=0|this._d,h=0|this._e,d=0;d<16;++d)t[d]=e.readInt32BE(4*d);for(;d<80;++d)t[d]=a(t[d-3]^t[d-8]^t[d-14]^t[d-16]);for(var f=0;f<80;++f){var p=~~(f/20),m=s(r)+l(p,n,o,c)+h+t[f]+i[p]|0;h=c,c=o,o=u(n),n=r,r=m}this._a=r+this._a|0,this._b=n+this._b|0,this._c=o+this._c|0,this._d=c+this._d|0,this._e=h+this._e|0},o.prototype._hash=function(){var e=r.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},sha1$1=o}function requireSha256(){if(hasRequiredSha256)return sha256$3;hasRequiredSha256=1;var e=requireInherits_browser(),t=requireHash(),r=requireSafeBuffer$2().Buffer,i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=new Array(64);function o(){this.init(),this._w=n,t.call(this,64,56)}function a(e,t,r){return r^e&(t^r)}function s(e,t,r){return e&t|r&(e|t)}function u(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function l(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function c(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function h(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}return e(o,t),o.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},o.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,o=0|this._c,d=0|this._d,f=0|this._e,p=0|this._f,m=0|this._g,g=0|this._h,y=0;y<16;++y)t[y]=e.readInt32BE(4*y);for(;y<64;++y)t[y]=h(t[y-2])+t[y-7]+c(t[y-15])+t[y-16]|0;for(var b=0;b<64;++b){var w=g+l(f)+a(f,p,m)+i[b]+t[b]|0,v=u(r)+s(r,n,o)|0;g=m,m=p,p=f,f=d+w|0,d=o,o=n,n=r,r=w+v|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=o+this._c|0,this._d=d+this._d|0,this._e=f+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},o.prototype._hash=function(){var e=r.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},sha256$3=o}function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var e=requireInherits_browser(),t=requireSha256(),r=requireHash(),i=requireSafeBuffer$2().Buffer,n=new Array(64);function o(){this.init(),this._w=n,r.call(this,64,56)}return e(o,t),o.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},o.prototype._hash=function(){var e=i.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},sha224$1=o}function requireSha512(){if(hasRequiredSha512)return sha512$5;hasRequiredSha512=1;var e=requireInherits_browser(),t=requireHash(),r=requireSafeBuffer$2().Buffer,i=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],n=new Array(160);function o(){this.init(),this._w=n,t.call(this,128,112)}function a(e,t,r){return r^e&(t^r)}function s(e,t,r){return e&t|r&(e|t)}function u(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function l(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function c(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function h(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function d(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function f(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function p(e,t){return e>>>0<t>>>0?1:0}return e(o,t),o.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},o.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,o=0|this._ch,m=0|this._dh,g=0|this._eh,y=0|this._fh,b=0|this._gh,w=0|this._hh,v=0|this._al,_=0|this._bl,E=0|this._cl,S=0|this._dl,A=0|this._el,M=0|this._fl,R=0|this._gl,x=0|this._hl,k=0;k<32;k+=2)t[k]=e.readInt32BE(4*k),t[k+1]=e.readInt32BE(4*k+4);for(;k<160;k+=2){var T=t[k-30],P=t[k-30+1],C=c(T,P),I=h(P,T),$=d(T=t[k-4],P=t[k-4+1]),B=f(P,T),O=t[k-14],N=t[k-14+1],L=t[k-32],q=t[k-32+1],j=I+N|0,U=C+O+p(j,I)|0;U=(U=U+$+p(j=j+B|0,B)|0)+L+p(j=j+q|0,q)|0,t[k]=U,t[k+1]=j}for(var D=0;D<160;D+=2){U=t[D],j=t[D+1];var F=s(r,n,o),W=s(v,_,E),K=u(r,v),H=u(v,r),z=l(g,A),V=l(A,g),G=i[D],Y=i[D+1],J=a(g,y,b),Z=a(A,M,R),X=x+V|0,Q=w+z+p(X,x)|0;Q=(Q=(Q=Q+J+p(X=X+Z|0,Z)|0)+G+p(X=X+Y|0,Y)|0)+U+p(X=X+j|0,j)|0;var ee=H+W|0,te=K+F+p(ee,H)|0;w=b,x=R,b=y,R=M,y=g,M=A,g=m+Q+p(A=S+X|0,S)|0,m=o,S=E,o=n,E=_,n=r,_=v,r=Q+te+p(v=X+ee|0,X)|0}this._al=this._al+v|0,this._bl=this._bl+_|0,this._cl=this._cl+E|0,this._dl=this._dl+S|0,this._el=this._el+A|0,this._fl=this._fl+M|0,this._gl=this._gl+R|0,this._hl=this._hl+x|0,this._ah=this._ah+r+p(this._al,v)|0,this._bh=this._bh+n+p(this._bl,_)|0,this._ch=this._ch+o+p(this._cl,E)|0,this._dh=this._dh+m+p(this._dl,S)|0,this._eh=this._eh+g+p(this._el,A)|0,this._fh=this._fh+y+p(this._fl,M)|0,this._gh=this._gh+b+p(this._gl,R)|0,this._hh=this._hh+w+p(this._hl,x)|0},o.prototype._hash=function(){var e=r.allocUnsafe(64);function t(t,r,i){e.writeInt32BE(t,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},sha512$5=o}function requireSha384(){if(hasRequiredSha384)return sha384$1;hasRequiredSha384=1;var e=requireInherits_browser(),t=requireSha512(),r=requireHash(),i=requireSafeBuffer$2().Buffer,n=new Array(160);function o(){this.init(),this._w=n,r.call(this,128,112)}return e(o,t),o.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},o.prototype._hash=function(){var e=i.allocUnsafe(48);function t(t,r,i){e.writeInt32BE(t,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},sha384$1=o}function requireSha_js(){return hasRequiredSha_js||(hasRequiredSha_js=1,(e=sha_js).exports=function(t){var r=t.toLowerCase(),i=e.exports[r];if(!i)throw new Error(r+" is not supported (we accept pull requests)");return new i},e.exports.sha=requireSha(),e.exports.sha1=requireSha1(),e.exports.sha224=requireSha224(),e.exports.sha256=requireSha256(),e.exports.sha384=requireSha384(),e.exports.sha512=requireSha512()),sha_js.exports;var e}function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var e=requireSafeBuffer$2().Buffer,t=requireStreamBrowserify().Transform,r=requireString_decoder().StringDecoder,i=requireInherits_browser(),n=requireToBuffer$2();function o(e){t.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return i(o,t),o.prototype.update=function(e,t,r){var i=n(e,t),o=this._update(i);return this.hashMode?this:(r&&(o=this._toString(o,r)),o)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(e,t,r){var i;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(n){i=n}finally{r(i)}},o.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(r){t=r}e(t)},o.prototype._finalOrDigest=function(t){var r=this.__final()||e.alloc(0);return t&&(r=this._toString(r,t,!0)),r},o.prototype._toString=function(e,t,i){if(this._decoder||(this._decoder=new r(t),this._encoding=t),this._encoding!==t)throw new Error("cant switch encodings");var n=this._decoder.write(e);return i&&(n+=this._decoder.end()),n},cipherBase=o}function requireBrowser$c(){if(hasRequiredBrowser$c)return browser$c;hasRequiredBrowser$c=1;var e=requireInherits_browser(),t=requireMd5_js(),r=requireRipemd160(),i=requireSha_js(),n=requireCipherBase();function o(e){n.call(this,"digest"),this._hash=e}return e(o,n),o.prototype._update=function(e){this._hash.update(e)},o.prototype._final=function(){return this._hash.digest()},browser$c=function(e){return"md5"===(e=e.toLowerCase())?new t:"rmd160"===e||"ripemd160"===e?new r:new o(i(e))}}function requireLegacy$1(){if(hasRequiredLegacy$1)return legacy$1;hasRequiredLegacy$1=1;var e=requireInherits_browser(),t=requireSafeBuffer$2().Buffer,r=requireCipherBase(),i=t.alloc(128),n=64;function o(e,o){r.call(this,"digest"),"string"==typeof o&&(o=t.from(o)),this._alg=e,this._key=o,o.length>n?o=e(o):o.length<n&&(o=t.concat([o,i],n));for(var a=this._ipad=t.allocUnsafe(n),s=this._opad=t.allocUnsafe(n),u=0;u<n;u++)a[u]=54^o[u],s[u]=92^o[u];this._hash=[a]}return e(o,r),o.prototype._update=function(e){this._hash.push(e)},o.prototype._final=function(){var e=this._alg(t.concat(this._hash));return this._alg(t.concat([this._opad,e]))},legacy$1=o}function requireMd5(){if(hasRequiredMd5)return md5$1;hasRequiredMd5=1;var e=requireMd5_js();return md5$1=function(t){return(new e).update(t).digest()}}function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$b;hasRequiredBrowser$b=1;var e=requireInherits_browser(),t=requireLegacy$1(),r=requireCipherBase(),i=requireSafeBuffer$2().Buffer,n=requireMd5(),o=requireRipemd160(),a=requireSha_js(),s=i.alloc(128);function u(e,t){r.call(this,"digest"),"string"==typeof t&&(t=i.from(t));var n="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>n)?t=("rmd160"===e?new o:a(e)).update(t).digest():t.length<n&&(t=i.concat([t,s],n));for(var u=this._ipad=i.allocUnsafe(n),l=this._opad=i.allocUnsafe(n),c=0;c<n;c++)u[c]=54^t[c],l[c]=92^t[c];this._hash="rmd160"===e?new o:a(e),this._hash.update(u)}return e(u,r),u.prototype._update=function(e){this._hash.update(e)},u.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new o:a(this._alg)).update(this._opad).update(e).digest()},browser$b=function(e,r){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new u("rmd160",r):"md5"===e?new t(n,r):new u(e,r)}}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$2={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512$4={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption:sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$2,sha224:sha224,sha384:sha384,sha512:sha512$4,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos?algos:(hasRequiredAlgos=1,algos=require$$6)}var browser$a={},precondition,hasRequiredPrecondition,defaultEncoding_1,hasRequiredDefaultEncoding,toBuffer_1,hasRequiredToBuffer,syncBrowser,hasRequiredSyncBrowser,async,hasRequiredAsync,hasRequiredBrowser$a;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var e=isFinite,t=Math.pow(2,30)-1;return precondition=function(r,i){if("number"!=typeof r)throw new TypeError("Iterations not a number");if(r<0||!e(r))throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(i<0||i>t||i!=i)throw new TypeError("Bad key length")}}function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;var e;if(hasRequiredDefaultEncoding=1,commonjsGlobal.process&&commonjsGlobal.process.browser)e="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){e=parseInt(process$1.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else e="utf-8";return defaultEncoding_1=e}function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer_1;hasRequiredToBuffer=1;var e=requireSafeBuffer$2().Buffer,t=requireToBuffer$2(),r="undefined"!=typeof Uint8Array,i=r&&"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView;return toBuffer_1=function(n,o,a){if("string"==typeof n||e.isBuffer(n)||r&&n instanceof Uint8Array||i&&i(n))return t(n,o);throw new TypeError(a+" must be a string, a Buffer, a Uint8Array, or a DataView")}}function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var e=requireMd5(),t=requireRipemd160(),r=requireSha_js(),i=requireSafeBuffer$2().Buffer,n=requirePrecondition(),o=requireDefaultEncoding(),a=requireToBuffer(),s=i.alloc(128),u={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,ripemd160:20,rmd160:20},l={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"};function c(e){return(new t).update(e).digest()}function h(t,n,o){var a=function(t){return"rmd160"===t||"ripemd160"===t?c:"md5"===t?e:function(e){return r(t).update(e).digest()}}(t),l="sha512"===t||"sha384"===t?128:64;n.length>l?n=a(n):n.length<l&&(n=i.concat([n,s],l));for(var h=i.allocUnsafe(l+u[t]),d=i.allocUnsafe(l+u[t]),f=0;f<l;f++)h[f]=54^n[f],d[f]=92^n[f];var p=i.allocUnsafe(l+o+4);h.copy(p,0,0,l),this.ipad1=p,this.ipad2=h,this.opad=d,this.alg=t,this.blocksize=l,this.hash=a,this.size=u[t]}return h.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},syncBrowser=function(e,t,r,s,c){n(r,s),e=a(e,o,"Password"),t=a(t,o,"Salt");var d=(c||"sha1").toLowerCase(),f=l[d]||d,p=u[f];if("number"!=typeof p||!p)throw new TypeError("Digest algorithm not supported: "+c);var m=new h(f,e,t.length),g=i.allocUnsafe(s),y=i.allocUnsafe(t.length+4);t.copy(y,0,0,t.length);for(var b=0,w=p,v=Math.ceil(s/w),_=1;_<=v;_++){y.writeUInt32BE(_,t.length);for(var E=m.run(y,m.ipad1),S=E,A=1;A<r;A++){S=m.run(S,m.ipad2);for(var M=0;M<w;M++)E[M]^=S[M]}E.copy(g,b),b+=w}return g}}function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var e,t,r=requireSafeBuffer$2().Buffer,i=requirePrecondition(),n=requireDefaultEncoding(),o=requireSyncBrowser(),a=requireToBuffer(),s=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,u={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},l=[];function c(){return t||(t=commonjsGlobal.process&&commonjsGlobal.process.nextTick?commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?commonjsGlobal.setImmediate:commonjsGlobal.setTimeout)}function h(e,t,i,n,o){return s.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return s.deriveBits({name:"PBKDF2",salt:t,iterations:i,hash:{name:o}},e,n<<3)}).then(function(e){return r.from(e)})}return async=function(t,d,f,p,m,g){if("function"==typeof m&&(g=m,m=void 0),i(f,p),t=a(t,n,"Password"),d=a(d,n,"Salt"),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");var y=u[(m=m||"sha1").toLowerCase()];y&&"function"==typeof commonjsGlobal.Promise?function(e,t){e.then(function(e){c()(function(){t(null,e)})},function(e){c()(function(){t(e)})})}(function(t){if(commonjsGlobal.process&&!commonjsGlobal.process.browser)return Promise.resolve(!1);if(!s||!s.importKey||!s.deriveBits)return Promise.resolve(!1);if(void 0!==l[t])return l[t];var i=h(e=e||r.alloc(8),e,10,128,t).then(function(){return!0},function(){return!1});return l[t]=i,i}(y).then(function(e){return e?h(t,d,f,p,y):o(t,d,f,p,m)}),g):c()(function(){var e;try{e=o(t,d,f,p,m)}catch(r){return void g(r)}g(null,e)})}}function requireBrowser$a(){return hasRequiredBrowser$a||(hasRequiredBrowser$a=1,browser$a.pbkdf2=requireAsync(),browser$a.pbkdf2Sync=requireSyncBrowser()),browser$a}var browser$9={},des$1={},utils$1={},hasRequiredUtils$1,cipher,hasRequiredCipher,des,hasRequiredDes$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1,utils$1.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},utils$1.writeUInt32BE=function(e,t,r){e[0+r]=t>>>24,e[1+r]=t>>>16&255,e[2+r]=t>>>8&255,e[3+r]=255&t},utils$1.ip=function(e,t,r,i){for(var n=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)n<<=1,n|=t>>>s+a&1;for(s=0;s<=24;s+=8)n<<=1,n|=e>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1}r[i+0]=n>>>0,r[i+1]=o>>>0},utils$1.rip=function(e,t,r,i){for(var n=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)n<<=1,n|=t>>>s+a&1,n<<=1,n|=e>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=t>>>s+a&1,o<<=1,o|=e>>>s+a&1;r[i+0]=n>>>0,r[i+1]=o>>>0},utils$1.pc1=function(e,t,r,i){for(var n=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)n<<=1,n|=t>>s+a&1;for(s=0;s<=24;s+=8)n<<=1,n|=e>>s+a&1}for(s=0;s<=24;s+=8)n<<=1,n|=t>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1}for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;r[i+0]=n>>>0,r[i+1]=o>>>0},utils$1.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var e=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$1.pc2=function(t,r,i,n){for(var o=0,a=0,s=e.length>>>1,u=0;u<s;u++)o<<=1,o|=t>>>e[u]&1;for(u=s;u<e.length;u++)a<<=1,a|=r>>>e[u]&1;i[n+0]=o>>>0,i[n+1]=a>>>0},utils$1.expand=function(e,t,r){var i=0,n=0;i=(1&e)<<5|e>>>27;for(var o=23;o>=15;o-=4)i<<=6,i|=e>>>o&63;for(o=11;o>=3;o-=4)n|=e>>>o&63,n<<=6;n|=(31&e)<<1|e>>>31,t[r+0]=i>>>0,t[r+1]=n>>>0};var t=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$1.substitute=function(e,r){for(var i=0,n=0;n<4;n++){i<<=4,i|=t[64*n+(e>>>18-6*n&63)]}for(n=0;n<4;n++){i<<=4,i|=t[256+64*n+(r>>>18-6*n&63)]}return i>>>0};var r=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$1.permute=function(e){for(var t=0,i=0;i<r.length;i++)t<<=1,t|=e>>>r[i]&1;return t>>>0},utils$1.padSplit=function(e,t,r){for(var i=e.toString(2);i.length<t;)i="0"+i;for(var n=[],o=0;o<t;o+=r)n.push(i.slice(o,o+r));return n.join(" ")},utils$1}function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var e=requireMinimalisticAssert();function t(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=!1!==e.padding}return cipher=t,t.prototype._init=function(){},t.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},t.prototype._buffer=function(e,t){for(var r=Math.min(this.buffer.length-this.bufferOff,e.length-t),i=0;i<r;i++)this.buffer[this.bufferOff+i]=e[t+i];return this.bufferOff+=r,r},t.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},t.prototype._updateEncrypt=function(e){var t=0,r=0,i=(this.bufferOff+e.length)/this.blockSize|0,n=new Array(i*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(n,r)));for(var o=e.length-(e.length-t)%this.blockSize;t<o;t+=this.blockSize)this._update(e,t,n,r),r+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return n},t.prototype._updateDecrypt=function(e){for(var t=0,r=0,i=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,n=new Array(i*this.blockSize);i>0;i--)t+=this._buffer(e,t),r+=this._flushBuffer(n,r);return t+=this._buffer(e,t),n},t.prototype.final=function(e){var t,r;return e&&(t=this.update(e)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(r):r},t.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},t.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},t.prototype._unpad=function(e){return e},t.prototype._finalDecrypt=function(){e.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)},cipher}function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var e=requireMinimalisticAssert(),t=requireInherits_browser(),r=requireUtils$1(),i=requireCipher();function n(){this.tmp=new Array(2),this.keys=null}function o(e){i.call(this,e);var t=new n;this._desState=t,this.deriveKeys(t,e.key)}t(o,i),des=o,o.create=function(e){return new o(e)};var a=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return o.prototype.deriveKeys=function(t,i){t.keys=new Array(32),e.equal(i.length,this.blockSize,"Invalid key length");var n=r.readUInt32BE(i,0),o=r.readUInt32BE(i,4);r.pc1(n,o,t.tmp,0),n=t.tmp[0],o=t.tmp[1];for(var s=0;s<t.keys.length;s+=2){var u=a[s>>>1];n=r.r28shl(n,u),o=r.r28shl(o,u),r.pc2(n,o,t.keys,s)}},o.prototype._update=function(e,t,i,n){var o=this._desState,a=r.readUInt32BE(e,t),s=r.readUInt32BE(e,t+4);r.ip(a,s,o.tmp,0),a=o.tmp[0],s=o.tmp[1],"encrypt"===this.type?this._encrypt(o,a,s,o.tmp,0):this._decrypt(o,a,s,o.tmp,0),a=o.tmp[0],s=o.tmp[1],r.writeUInt32BE(i,a,n),r.writeUInt32BE(i,s,n+4)},o.prototype._pad=function(e,t){if(!1===this.padding)return!1;for(var r=e.length-t,i=t;i<e.length;i++)e[i]=r;return!0},o.prototype._unpad=function(t){if(!1===this.padding)return t;for(var r=t[t.length-1],i=t.length-r;i<t.length;i++)e.equal(t[i],r);return t.slice(0,t.length-r)},o.prototype._encrypt=function(e,t,i,n,o){for(var a=t,s=i,u=0;u<e.keys.length;u+=2){var l=e.keys[u],c=e.keys[u+1];r.expand(s,e.tmp,0),l^=e.tmp[0],c^=e.tmp[1];var h=r.substitute(l,c),d=s;s=(a^r.permute(h))>>>0,a=d}r.rip(s,a,n,o)},o.prototype._decrypt=function(e,t,i,n,o){for(var a=i,s=t,u=e.keys.length-2;u>=0;u-=2){var l=e.keys[u],c=e.keys[u+1];r.expand(a,e.tmp,0),l^=e.tmp[0],c^=e.tmp[1];var h=r.substitute(l,c),d=a;a=(s^r.permute(h))>>>0,s=d}r.rip(a,s,n,o)},des}var cbc$1={},hasRequiredCbc$1,ede,hasRequiredEde,hasRequiredDes,browserifyDes,hasRequiredBrowserifyDes;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var e=requireMinimalisticAssert(),t=requireInherits_browser(),r={};function i(t){e.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var r=0;r<this.iv.length;r++)this.iv[r]=t[r]}return cbc$1.instantiate=function(e){function i(t){e.call(this,t),this._cbcInit()}t(i,e);for(var n=Object.keys(r),o=0;o<n.length;o++){var a=n[o];i.prototype[a]=r[a]}return i.create=function(e){return new i(e)},i},r._cbcInit=function(){var e=new i(this.options.iv);this._cbcState=e},r._update=function(e,t,r,i){var n=this._cbcState,o=this.constructor.super_.prototype,a=n.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=e[t+s];o._update.call(this,a,0,r,i);for(s=0;s<this.blockSize;s++)a[s]=r[i+s]}else{o._update.call(this,e,t,r,i);for(s=0;s<this.blockSize;s++)r[i+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=e[t+s]}},cbc$1}function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var e=requireMinimalisticAssert(),t=requireInherits_browser(),r=requireCipher(),i=requireDes$1();function n(t,r){e.equal(r.length,24,"Invalid key length");var n=r.slice(0,8),o=r.slice(8,16),a=r.slice(16,24);this.ciphers="encrypt"===t?[i.create({type:"encrypt",key:n}),i.create({type:"decrypt",key:o}),i.create({type:"encrypt",key:a})]:[i.create({type:"decrypt",key:a}),i.create({type:"encrypt",key:o}),i.create({type:"decrypt",key:n})]}function o(e){r.call(this,e);var t=new n(this.type,this.options.key);this._edeState=t}return t(o,r),ede=o,o.create=function(e){return new o(e)},o.prototype._update=function(e,t,r,i){var n=this._edeState;n.ciphers[0]._update(e,t,r,i),n.ciphers[1]._update(r,i,r,i),n.ciphers[2]._update(r,i,r,i)},o.prototype._pad=i.prototype._pad,o.prototype._unpad=i.prototype._unpad,ede}function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$1(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var e=requireCipherBase(),t=requireDes(),r=requireInherits_browser(),i=requireSafeBuffer$2().Buffer,n={"des-ede3-cbc":t.CBC.instantiate(t.EDE),"des-ede3":t.EDE,"des-ede-cbc":t.CBC.instantiate(t.EDE),"des-ede":t.EDE,"des-cbc":t.CBC.instantiate(t.DES),"des-ecb":t.DES};function o(t){e.call(this);var r,o=t.mode.toLowerCase(),a=n[o];r=t.decrypt?"decrypt":"encrypt";var s=t.key;i.isBuffer(s)||(s=i.from(s)),"des-ede"!==o&&"des-ede-cbc"!==o||(s=i.concat([s,s.slice(0,8)]));var u=t.iv;i.isBuffer(u)||(u=i.from(u)),this._des=a.create({key:s,iv:u,type:r})}return n.des=n["des-cbc"],n.des3=n["des-ede3-cbc"],browserifyDes=o,r(o,e),o.prototype._update=function(e){return i.from(this._des.update(e))},o.prototype._final=function(){return i.from(this._des.final())},browserifyDes}var browser$8={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(e,t){return e._cipher.encryptBlock(t)},ecb.decrypt=function(e,t){return e._cipher.decryptBlock(t)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor,hasRequiredCbc;function requireBufferXor(){return hasRequiredBufferXor?bufferXor:(hasRequiredBufferXor=1,bufferXor=function(e,t){for(var r=Math.min(e.length,t.length),i=new Buffer(r),n=0;n<r;++n)i[n]=e[n]^t[n];return i})}function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var e=requireBufferXor();return cbc.encrypt=function(t,r){var i=e(r,t._prev);return t._prev=t._cipher.encryptBlock(i),t._prev},cbc.decrypt=function(t,r){var i=t._prev;t._prev=r;var n=t._cipher.decryptBlock(r);return e(n,i)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var e=requireSafeBuffer$2().Buffer,t=requireBufferXor();function r(r,i,n){var o=i.length,a=t(i,r._cache);return r._cache=r._cache.slice(o),r._prev=e.concat([r._prev,n?i:a]),a}return cfb.encrypt=function(t,i,n){for(var o,a=e.allocUnsafe(0);i.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=e.allocUnsafe(0)),!(t._cache.length<=i.length)){a=e.concat([a,r(t,i,n)]);break}o=t._cache.length,a=e.concat([a,r(t,i.slice(0,o),n)]),i=i.slice(o)}return a},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var e=requireSafeBuffer$2().Buffer;function t(t,r,i){var n=t._cipher.encryptBlock(t._prev)[0]^r;return t._prev=e.concat([t._prev.slice(1),e.from([i?r:n])]),n}return cfb8.encrypt=function(r,i,n){for(var o=i.length,a=e.allocUnsafe(o),s=-1;++s<o;)a[s]=t(r,i[s],n);return a},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var e=requireSafeBuffer$2().Buffer;function t(e,t,i){for(var n,o,a=-1,s=0;++a<8;)n=t&1<<7-a?128:0,s+=(128&(o=e._cipher.encryptBlock(e._prev)[0]^n))>>a%8,e._prev=r(e._prev,i?n:o);return s}function r(t,r){var i=t.length,n=-1,o=e.allocUnsafe(t.length);for(t=e.concat([t,e.from([r])]);++n<i;)o[n]=t[n]<<1|t[n+1]>>7;return o}return cfb1.encrypt=function(r,i,n){for(var o=i.length,a=e.allocUnsafe(o),s=-1;++s<o;)a[s]=t(r,i[s],n);return a},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var e=requireBufferXor();function t(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}return ofb.encrypt=function(r,i){for(;r._cache.length<i.length;)r._cache=Buffer.concat([r._cache,t(r)]);var n=r._cache.slice(0,i.length);return r._cache=r._cache.slice(i.length),e(i,n)},ofb}var ctr={},incr32_1,hasRequiredIncr32,hasRequiredCtr;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;return hasRequiredIncr32=1,incr32_1=function(e){for(var t,r=e.length;r--;){if(255!==(t=e.readUInt8(r))){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}}function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var e=requireBufferXor(),t=requireSafeBuffer$2().Buffer,r=requireIncr32();function i(e){var t=e._cipher.encryptBlockRaw(e._prev);return r(e._prev),t}return ctr.encrypt=function(r,n){var o=Math.ceil(n.length/16),a=r._cache.length;r._cache=t.concat([r._cache,t.allocUnsafe(16*o)]);for(var s=0;s<o;s++){var u=i(r),l=a+16*s;r._cache.writeUInt32BE(u[0],l+0),r._cache.writeUInt32BE(u[1],l+4),r._cache.writeUInt32BE(u[2],l+8),r._cache.writeUInt32BE(u[3],l+12)}var c=r._cache.slice(0,n.length);return r._cache=r._cache.slice(n.length),e(n,c)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:aes128,aes192:aes192,aes256:aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var e={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},t=require$$2$2;for(var r in t)t[r].module=e[t[r].mode];return modes_1=t}var aes={},hasRequiredAes,ghash,hasRequiredGhash,authCipher,hasRequiredAuthCipher,streamCipher,hasRequiredStreamCipher,evp_bytestokey,hasRequiredEvp_bytestokey,hasRequiredEncrypter;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var e=requireSafeBuffer$2().Buffer;function t(t){e.isBuffer(t)||(t=e.from(t));for(var r=t.length/4|0,i=new Array(r),n=0;n<r;n++)i[n]=t.readUInt32BE(4*n);return i}function r(e){for(;0<e.length;e++)e[0]=0}function i(e,t,r,i,n){for(var o,a,s,u,l=r[0],c=r[1],h=r[2],d=r[3],f=e[0]^t[0],p=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],y=4,b=1;b<n;b++)o=l[f>>>24]^c[p>>>16&255]^h[m>>>8&255]^d[255&g]^t[y++],a=l[p>>>24]^c[m>>>16&255]^h[g>>>8&255]^d[255&f]^t[y++],s=l[m>>>24]^c[g>>>16&255]^h[f>>>8&255]^d[255&p]^t[y++],u=l[g>>>24]^c[f>>>16&255]^h[p>>>8&255]^d[255&m]^t[y++],f=o,p=a,m=s,g=u;return o=(i[f>>>24]<<24|i[p>>>16&255]<<16|i[m>>>8&255]<<8|i[255&g])^t[y++],a=(i[p>>>24]<<24|i[m>>>16&255]<<16|i[g>>>8&255]<<8|i[255&f])^t[y++],s=(i[m>>>24]<<24|i[g>>>16&255]<<16|i[f>>>8&255]<<8|i[255&p])^t[y++],u=(i[g>>>24]<<24|i[f>>>16&255]<<16|i[p>>>8&255]<<8|i[255&m])^t[y++],[o>>>=0,a>>>=0,s>>>=0,u>>>=0]}var n=[0,1,2,4,8,16,32,64,128,27,54],o=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=[],i=[],n=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,u=0;u<256;++u){var l=s^s<<1^s<<2^s<<3^s<<4;l=l>>>8^255&l^99,r[a]=l,i[l]=a;var c=e[a],h=e[c],d=e[h],f=257*e[l]^16843008*l;n[0][a]=f<<24|f>>>8,n[1][a]=f<<16|f>>>16,n[2][a]=f<<8|f>>>24,n[3][a]=f,f=16843009*d^65537*h^257*c^16843008*a,o[0][l]=f<<24|f>>>8,o[1][l]=f<<16|f>>>16,o[2][l]=f<<8|f>>>24,o[3][l]=f,0===a?a=s=1:(a=c^e[e[e[d^c]]],s^=e[e[s]])}return{SBOX:r,INV_SBOX:i,SUB_MIX:n,INV_SUB_MIX:o}}();function a(e){this._key=t(e),this._reset()}return a.blockSize=16,a.keySize=32,a.prototype.blockSize=a.blockSize,a.prototype.keySize=a.keySize,a.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,i=4*(r+1),a=[],s=0;s<t;s++)a[s]=e[s];for(s=t;s<i;s++){var u=a[s-1];s%t===0?(u=u<<8|u>>>24,u=o.SBOX[u>>>24]<<24|o.SBOX[u>>>16&255]<<16|o.SBOX[u>>>8&255]<<8|o.SBOX[255&u],u^=n[s/t|0]<<24):t>6&&s%t===4&&(u=o.SBOX[u>>>24]<<24|o.SBOX[u>>>16&255]<<16|o.SBOX[u>>>8&255]<<8|o.SBOX[255&u]),a[s]=a[s-t]^u}for(var l=[],c=0;c<i;c++){var h=i-c,d=a[h-(c%4?0:4)];l[c]=c<4||h<=4?d:o.INV_SUB_MIX[0][o.SBOX[d>>>24]]^o.INV_SUB_MIX[1][o.SBOX[d>>>16&255]]^o.INV_SUB_MIX[2][o.SBOX[d>>>8&255]]^o.INV_SUB_MIX[3][o.SBOX[255&d]]}this._nRounds=r,this._keySchedule=a,this._invKeySchedule=l},a.prototype.encryptBlockRaw=function(e){return i(e=t(e),this._keySchedule,o.SUB_MIX,o.SBOX,this._nRounds)},a.prototype.encryptBlock=function(t){var r=this.encryptBlockRaw(t),i=e.allocUnsafe(16);return i.writeUInt32BE(r[0],0),i.writeUInt32BE(r[1],4),i.writeUInt32BE(r[2],8),i.writeUInt32BE(r[3],12),i},a.prototype.decryptBlock=function(r){var n=(r=t(r))[1];r[1]=r[3],r[3]=n;var a=i(r,this._invKeySchedule,o.INV_SUB_MIX,o.INV_SBOX,this._nRounds),s=e.allocUnsafe(16);return s.writeUInt32BE(a[0],0),s.writeUInt32BE(a[3],4),s.writeUInt32BE(a[2],8),s.writeUInt32BE(a[1],12),s},a.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},aes.AES=a,aes}function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var e=requireSafeBuffer$2().Buffer,t=e.alloc(16,0);function r(t){var r=e.allocUnsafe(16);return r.writeUInt32BE(t[0]>>>0,0),r.writeUInt32BE(t[1]>>>0,4),r.writeUInt32BE(t[2]>>>0,8),r.writeUInt32BE(t[3]>>>0,12),r}function i(t){this.h=t,this.state=e.alloc(16,0),this.cache=e.allocUnsafe(0)}return i.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},i.prototype._multiply=function(){for(var e,t,i,n=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],o=[0,0,0,0],a=-1;++a<128;){for(!!(this.state[~~(a/8)]&1<<7-a%8)&&(o[0]^=n[0],o[1]^=n[1],o[2]^=n[2],o[3]^=n[3]),i=!!(1&n[3]),t=3;t>0;t--)n[t]=n[t]>>>1|(1&n[t-1])<<31;n[0]=n[0]>>>1,i&&(n[0]=n[0]^225<<24)}this.state=r(o)},i.prototype.update=function(t){var r;for(this.cache=e.concat([this.cache,t]);this.cache.length>=16;)r=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(r)},i.prototype.final=function(i,n){return this.cache.length&&this.ghash(e.concat([this.cache,t],16)),this.ghash(r([0,i,0,n])),this.state},ghash=i}function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var e=requireAes(),t=requireSafeBuffer$2().Buffer,r=requireCipherBase(),i=requireInherits_browser(),n=requireGhash(),o=requireBufferXor(),a=requireIncr32();function s(i,o,s,u){r.call(this);var l=t.alloc(4,0);this._cipher=new e.AES(o);var c=this._cipher.encryptBlock(l);this._ghash=new n(c),s=function(e,r,i){if(12===r.length)return e._finID=t.concat([r,t.from([0,0,0,1])]),t.concat([r,t.from([0,0,0,2])]);var o=new n(i),s=r.length,u=s%16;o.update(r),u&&(u=16-u,o.update(t.alloc(u,0))),o.update(t.alloc(8,0));var l=8*s,c=t.alloc(8);c.writeUIntBE(l,0,8),o.update(c),e._finID=o.state;var h=t.from(e._finID);return a(h),h}(this,s,c),this._prev=t.from(s),this._cache=t.allocUnsafe(0),this._secCache=t.allocUnsafe(0),this._decrypt=u,this._alen=0,this._len=0,this._mode=i,this._authTag=null,this._called=!1}return i(s,r),s.prototype._update=function(e){if(!this._called&&this._alen){var r=16-this._alen%16;r<16&&(r=t.alloc(r,0),this._ghash.update(r))}this._called=!0;var i=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(i),this._len+=e.length,i},s.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=o(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var r=0;e.length!==t.length&&r++;for(var i=Math.min(e.length,t.length),n=0;n<i;++n)r+=e[n]^t[n];return r}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},s.prototype.getAuthTag=function(){if(this._decrypt||!t.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},s.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},s.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},authCipher=s}function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var e=requireAes(),t=requireSafeBuffer$2().Buffer,r=requireCipherBase();function i(i,n,o,a){r.call(this),this._cipher=new e.AES(n),this._prev=t.from(o),this._cache=t.allocUnsafe(0),this._secCache=t.allocUnsafe(0),this._decrypt=a,this._mode=i}return requireInherits_browser()(i,r),i.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},i.prototype._final=function(){this._cipher.scrub()},streamCipher=i}function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var e=requireSafeBuffer$2().Buffer,t=requireMd5_js();return evp_bytestokey=function(r,i,n,o){if(e.isBuffer(r)||(r=e.from(r,"binary")),i&&(e.isBuffer(i)||(i=e.from(i,"binary")),8!==i.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=n/8,s=e.alloc(a),u=e.alloc(o||0),l=e.alloc(0);a>0||o>0;){var c=new t;c.update(l),c.update(r),i&&c.update(i),l=c.digest();var h=0;if(a>0){var d=s.length-a;h=Math.min(a,l.length),l.copy(s,d,0,h),a-=h}if(h<l.length&&o>0){var f=u.length-o,p=Math.min(o,l.length-h);l.copy(u,f,h,h+p),o-=p}}return l.fill(0),{key:s,iv:u}}}function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var e=requireModes$1(),t=requireAuthCipher(),r=requireSafeBuffer$2().Buffer,i=requireStreamCipher(),n=requireCipherBase(),o=requireAes(),a=requireEvp_bytestokey();function s(e,t,i){n.call(this),this._cache=new l,this._cipher=new o.AES(t),this._prev=r.from(i),this._mode=e,this._autopadding=!0}requireInherits_browser()(s,n),s.prototype._update=function(e){var t,i;this._cache.add(e);for(var n=[];t=this._cache.get();)i=this._mode.encrypt(this,t),n.push(i);return r.concat(n)};var u=r.alloc(16,16);function l(){this.cache=r.allocUnsafe(0)}function c(n,o,a){var u=e[n.toLowerCase()];if(!u)throw new TypeError("invalid suite type");if("string"==typeof o&&(o=r.from(o)),o.length!==u.key/8)throw new TypeError("invalid key length "+o.length);if("string"==typeof a&&(a=r.from(a)),"GCM"!==u.mode&&a.length!==u.iv)throw new TypeError("invalid iv length "+a.length);return"stream"===u.type?new i(u.module,o,a):"auth"===u.type?new t(u.module,o,a):new s(u.module,o,a)}return s.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(u))throw this._cipher.scrub(),new Error("data not multiple of block length")},s.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},l.prototype.add=function(e){this.cache=r.concat([this.cache,e])},l.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},l.prototype.flush=function(){for(var e=16-this.cache.length,t=r.allocUnsafe(e),i=-1;++i<e;)t.writeUInt8(e,i);return r.concat([this.cache,t])},encrypter.createCipheriv=c,encrypter.createCipher=function(t,r){var i=e[t.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var n=a(r,!1,i.key,i.iv);return c(t,n.key,n.iv)},encrypter}var decrypter={},hasRequiredDecrypter,hasRequiredBrowser$9;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var e=requireAuthCipher(),t=requireSafeBuffer$2().Buffer,r=requireModes$1(),i=requireStreamCipher(),n=requireCipherBase(),o=requireAes(),a=requireEvp_bytestokey();function s(e,r,i){n.call(this),this._cache=new u,this._last=void 0,this._cipher=new o.AES(r),this._prev=t.from(i),this._mode=e,this._autopadding=!0}function u(){this.cache=t.allocUnsafe(0)}function l(n,o,a){var u=r[n.toLowerCase()];if(!u)throw new TypeError("invalid suite type");if("string"==typeof a&&(a=t.from(a)),"GCM"!==u.mode&&a.length!==u.iv)throw new TypeError("invalid iv length "+a.length);if("string"==typeof o&&(o=t.from(o)),o.length!==u.key/8)throw new TypeError("invalid key length "+o.length);return"stream"===u.type?new i(u.module,o,a,!0):"auth"===u.type?new e(u.module,o,a,!0):new s(u.module,o,a)}return requireInherits_browser()(s,n),s.prototype._update=function(e){var r,i;this._cache.add(e);for(var n=[];r=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,r),n.push(i);return t.concat(n)},s.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},s.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},u.prototype.add=function(e){this.cache=t.concat([this.cache,e])},u.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},u.prototype.flush=function(){if(this.cache.length)return this.cache},decrypter.createDecipher=function(e,t){var i=r[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var n=a(t,!1,i.key,i.iv);return l(e,n.key,n.iv)},decrypter.createDecipheriv=l,decrypter}function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$8;hasRequiredBrowser$9=1;var e=requireEncrypter(),t=requireDecrypter(),r=require$$2$2;return browser$8.createCipher=browser$8.Cipher=e.createCipher,browser$8.createCipheriv=browser$8.Cipheriv=e.createCipheriv,browser$8.createDecipher=browser$8.Decipher=t.createDecipher,browser$8.createDecipheriv=browser$8.Decipheriv=t.createDecipheriv,browser$8.listCiphers=browser$8.getCiphers=function(){return Object.keys(r)},browser$8}var modes={},hasRequiredModes,hasRequiredBrowser$8;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,(e=modes)["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}),modes;var e}function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$9;hasRequiredBrowser$8=1;var e=requireBrowserifyDes(),t=requireBrowser$9(),r=requireModes$1(),i=requireModes(),n=requireEvp_bytestokey();function o(n,o,a){if(n=n.toLowerCase(),r[n])return t.createCipheriv(n,o,a);if(i[n])return new e({key:o,iv:a,mode:n});throw new TypeError("invalid suite type")}function a(n,o,a){if(n=n.toLowerCase(),r[n])return t.createDecipheriv(n,o,a);if(i[n])return new e({key:o,iv:a,mode:n,decrypt:!0});throw new TypeError("invalid suite type")}return browser$9.createCipher=browser$9.Cipher=function(e,t){var a,s;if(e=e.toLowerCase(),r[e])a=r[e].key,s=r[e].iv;else{if(!i[e])throw new TypeError("invalid suite type");a=8*i[e].key,s=i[e].iv}var u=n(t,!1,a,s);return o(e,u.key,u.iv)},browser$9.createCipheriv=browser$9.Cipheriv=o,browser$9.createDecipher=browser$9.Decipher=function(e,t){var o,s;if(e=e.toLowerCase(),r[e])o=r[e].key,s=r[e].iv;else{if(!i[e])throw new TypeError("invalid suite type");o=8*i[e].key,s=i[e].iv}var u=n(t,!1,o,s);return a(e,u.key,u.iv)},browser$9.createDecipheriv=browser$9.Decipheriv=a,browser$9.listCiphers=browser$9.getCiphers=function(){return Object.keys(i).concat(t.getCiphers())},browser$9}var browser$7={},bn$9={exports:{}},bn$8=bn$9.exports,hasRequiredBn$4;function requireBn$4(){return hasRequiredBn$4||(hasRequiredBn$4=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$2().Buffer}catch(A){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function s(e,t,r){var i=a(e,r);return r-1>=t&&(i|=a(e,r-1)<<4),i}function u(e,t,r,i){for(var n=0,o=Math.min(e.length,r),a=t;a<o;a++){var s=e.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return e.cmp(t)<0?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,i):(this._parseBase(e,t,n),"le"===i&&this._initArray(this.toArray(),t,i)))},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===i)for(n=e.length-1,o=0;n>=0;n-=3)a=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===i)for(n=0,o=0;n<e.length;n+=3)a=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},n.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o=0,a=0;if("be"===r)for(i=e.length-1;i>=t;i-=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;this.strip()},n.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var o=e.length-r,a=o%i,s=Math.min(o,o-a)+r,l=0,c=r;c<s;c+=i)l=u(e,c,c+i,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var h=1;for(l=u(e,c,e.length,t),c=0;c<a;c++)h*=t;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},n.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],o=0|t.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<i;l++){for(var c=u>>>26,h=67108863&u,d=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=d;f++){var p=l-f|0;c+=(a=(n=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}n.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);o=s>>>24-n&16777215,(n+=2)>=26&&(n-=26,a--),i=0!==o||a!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var d=c[e],f=h[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:l[d-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},n.prototype.toArrayLike=function(e,t,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,l=new e(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-n;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},n.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},n.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},n.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,n=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},n.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++)t=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&t,n=t>>>26;for(;0!==n&&o<r.length;o++)t=(0|r.words[o])+n,this.words[o]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var o=0,a=0;a<i.length;a++)o=(t=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var i,n,o,a=e.words,s=t.words,u=r.words,l=0,c=0|a[0],h=8191&c,d=c>>>13,f=0|a[1],p=8191&f,m=f>>>13,g=0|a[2],y=8191&g,b=g>>>13,w=0|a[3],v=8191&w,_=w>>>13,E=0|a[4],S=8191&E,A=E>>>13,M=0|a[5],R=8191&M,x=M>>>13,k=0|a[6],T=8191&k,P=k>>>13,C=0|a[7],I=8191&C,$=C>>>13,B=0|a[8],O=8191&B,N=B>>>13,L=0|a[9],q=8191&L,j=L>>>13,U=0|s[0],D=8191&U,F=U>>>13,W=0|s[1],K=8191&W,H=W>>>13,z=0|s[2],V=8191&z,G=z>>>13,Y=0|s[3],J=8191&Y,Z=Y>>>13,X=0|s[4],Q=8191&X,ee=X>>>13,te=0|s[5],re=8191&te,ie=te>>>13,ne=0|s[6],oe=8191&ne,ae=ne>>>13,se=0|s[7],ue=8191&se,le=se>>>13,ce=0|s[8],he=8191&ce,de=ce>>>13,fe=0|s[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(l+(i=Math.imul(h,D))|0)+((8191&(n=(n=Math.imul(h,F))+Math.imul(d,D)|0))<<13)|0;l=((o=Math.imul(d,F))+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,D),n=(n=Math.imul(p,F))+Math.imul(m,D)|0,o=Math.imul(m,F);var ye=(l+(i=i+Math.imul(h,K)|0)|0)+((8191&(n=(n=n+Math.imul(h,H)|0)+Math.imul(d,K)|0))<<13)|0;l=((o=o+Math.imul(d,H)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(y,D),n=(n=Math.imul(y,F))+Math.imul(b,D)|0,o=Math.imul(b,F),i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,H)|0;var be=(l+(i=i+Math.imul(h,V)|0)|0)+((8191&(n=(n=n+Math.imul(h,G)|0)+Math.imul(d,V)|0))<<13)|0;l=((o=o+Math.imul(d,G)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(v,D),n=(n=Math.imul(v,F))+Math.imul(_,D)|0,o=Math.imul(_,F),i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(b,K)|0,o=o+Math.imul(b,H)|0,i=i+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,G)|0;var we=(l+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;l=((o=o+Math.imul(d,Z)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(S,D),n=(n=Math.imul(S,F))+Math.imul(A,D)|0,o=Math.imul(A,F),i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,H)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,H)|0,i=i+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(b,V)|0,o=o+Math.imul(b,G)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var ve=(l+(i=i+Math.imul(h,Q)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;l=((o=o+Math.imul(d,ee)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(R,D),n=(n=Math.imul(R,F))+Math.imul(x,D)|0,o=Math.imul(x,F),i=i+Math.imul(S,K)|0,n=(n=n+Math.imul(S,H)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,H)|0,i=i+Math.imul(v,V)|0,n=(n=n+Math.imul(v,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,i=i+Math.imul(y,J)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0;var _e=(l+(i=i+Math.imul(h,re)|0)|0)+((8191&(n=(n=n+Math.imul(h,ie)|0)+Math.imul(d,re)|0))<<13)|0;l=((o=o+Math.imul(d,ie)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(T,D),n=(n=Math.imul(T,F))+Math.imul(P,D)|0,o=Math.imul(P,F),i=i+Math.imul(R,K)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,H)|0,i=i+Math.imul(S,V)|0,n=(n=n+Math.imul(S,G)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,G)|0,i=i+Math.imul(v,J)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0,i=i+Math.imul(p,re)|0,n=(n=n+Math.imul(p,ie)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ie)|0;var Ee=(l+(i=i+Math.imul(h,oe)|0)|0)+((8191&(n=(n=n+Math.imul(h,ae)|0)+Math.imul(d,oe)|0))<<13)|0;l=((o=o+Math.imul(d,ae)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(I,D),n=(n=Math.imul(I,F))+Math.imul($,D)|0,o=Math.imul($,F),i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,H)|0,i=i+Math.imul(R,V)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,G)|0,i=i+Math.imul(S,J)|0,n=(n=n+Math.imul(S,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,i=i+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,i=i+Math.imul(y,re)|0,n=(n=n+Math.imul(y,ie)|0)+Math.imul(b,re)|0,o=o+Math.imul(b,ie)|0,i=i+Math.imul(p,oe)|0,n=(n=n+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(l+(i=i+Math.imul(h,ue)|0)|0)+((8191&(n=(n=n+Math.imul(h,le)|0)+Math.imul(d,ue)|0))<<13)|0;l=((o=o+Math.imul(d,le)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(O,D),n=(n=Math.imul(O,F))+Math.imul(N,D)|0,o=Math.imul(N,F),i=i+Math.imul(I,K)|0,n=(n=n+Math.imul(I,H)|0)+Math.imul($,K)|0,o=o+Math.imul($,H)|0,i=i+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,G)|0,i=i+Math.imul(R,J)|0,n=(n=n+Math.imul(R,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,i=i+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,i=i+Math.imul(v,re)|0,n=(n=n+Math.imul(v,ie)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,n=(n=n+Math.imul(y,ae)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,ae)|0,i=i+Math.imul(p,ue)|0,n=(n=n+Math.imul(p,le)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,le)|0;var Ae=(l+(i=i+Math.imul(h,he)|0)|0)+((8191&(n=(n=n+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;l=((o=o+Math.imul(d,de)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(q,D),n=(n=Math.imul(q,F))+Math.imul(j,D)|0,o=Math.imul(j,F),i=i+Math.imul(O,K)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,H)|0,i=i+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul($,V)|0,o=o+Math.imul($,G)|0,i=i+Math.imul(T,J)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Z)|0,i=i+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,i=i+Math.imul(S,re)|0,n=(n=n+Math.imul(S,ie)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ie)|0,i=i+Math.imul(v,oe)|0,n=(n=n+Math.imul(v,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,i=i+Math.imul(y,ue)|0,n=(n=n+Math.imul(y,le)|0)+Math.imul(b,ue)|0,o=o+Math.imul(b,le)|0,i=i+Math.imul(p,he)|0,n=(n=n+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Me=(l+(i=i+Math.imul(h,pe)|0)|0)+((8191&(n=(n=n+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;l=((o=o+Math.imul(d,me)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(q,K),n=(n=Math.imul(q,H))+Math.imul(j,K)|0,o=Math.imul(j,H),i=i+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,G)|0,i=i+Math.imul(I,J)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul($,J)|0,o=o+Math.imul($,Z)|0,i=i+Math.imul(T,Q)|0,n=(n=n+Math.imul(T,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(R,re)|0,n=(n=n+Math.imul(R,ie)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ie)|0,i=i+Math.imul(S,oe)|0,n=(n=n+Math.imul(S,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,i=i+Math.imul(v,ue)|0,n=(n=n+Math.imul(v,le)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,he)|0,n=(n=n+Math.imul(y,de)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,de)|0;var Re=(l+(i=i+Math.imul(p,pe)|0)|0)+((8191&(n=(n=n+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;l=((o=o+Math.imul(m,me)|0)+(n>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(q,V),n=(n=Math.imul(q,G))+Math.imul(j,V)|0,o=Math.imul(j,G),i=i+Math.imul(O,J)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Z)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,ee)|0)+Math.imul($,Q)|0,o=o+Math.imul($,ee)|0,i=i+Math.imul(T,re)|0,n=(n=n+Math.imul(T,ie)|0)+Math.imul(P,re)|0,o=o+Math.imul(P,ie)|0,i=i+Math.imul(R,oe)|0,n=(n=n+Math.imul(R,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,i=i+Math.imul(S,ue)|0,n=(n=n+Math.imul(S,le)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,le)|0,i=i+Math.imul(v,he)|0,n=(n=n+Math.imul(v,de)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,de)|0;var xe=(l+(i=i+Math.imul(y,pe)|0)|0)+((8191&(n=(n=n+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;l=((o=o+Math.imul(b,me)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(q,J),n=(n=Math.imul(q,Z))+Math.imul(j,J)|0,o=Math.imul(j,Z),i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,i=i+Math.imul(I,re)|0,n=(n=n+Math.imul(I,ie)|0)+Math.imul($,re)|0,o=o+Math.imul($,ie)|0,i=i+Math.imul(T,oe)|0,n=(n=n+Math.imul(T,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,i=i+Math.imul(R,ue)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,le)|0,i=i+Math.imul(S,he)|0,n=(n=n+Math.imul(S,de)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,de)|0;var ke=(l+(i=i+Math.imul(v,pe)|0)|0)+((8191&(n=(n=n+Math.imul(v,me)|0)+Math.imul(_,pe)|0))<<13)|0;l=((o=o+Math.imul(_,me)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(q,Q),n=(n=Math.imul(q,ee))+Math.imul(j,Q)|0,o=Math.imul(j,ee),i=i+Math.imul(O,re)|0,n=(n=n+Math.imul(O,ie)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ie)|0,i=i+Math.imul(I,oe)|0,n=(n=n+Math.imul(I,ae)|0)+Math.imul($,oe)|0,o=o+Math.imul($,ae)|0,i=i+Math.imul(T,ue)|0,n=(n=n+Math.imul(T,le)|0)+Math.imul(P,ue)|0,o=o+Math.imul(P,le)|0,i=i+Math.imul(R,he)|0,n=(n=n+Math.imul(R,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var Te=(l+(i=i+Math.imul(S,pe)|0)|0)+((8191&(n=(n=n+Math.imul(S,me)|0)+Math.imul(A,pe)|0))<<13)|0;l=((o=o+Math.imul(A,me)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(q,re),n=(n=Math.imul(q,ie))+Math.imul(j,re)|0,o=Math.imul(j,ie),i=i+Math.imul(O,oe)|0,n=(n=n+Math.imul(O,ae)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,ae)|0,i=i+Math.imul(I,ue)|0,n=(n=n+Math.imul(I,le)|0)+Math.imul($,ue)|0,o=o+Math.imul($,le)|0,i=i+Math.imul(T,he)|0,n=(n=n+Math.imul(T,de)|0)+Math.imul(P,he)|0,o=o+Math.imul(P,de)|0;var Pe=(l+(i=i+Math.imul(R,pe)|0)|0)+((8191&(n=(n=n+Math.imul(R,me)|0)+Math.imul(x,pe)|0))<<13)|0;l=((o=o+Math.imul(x,me)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(q,oe),n=(n=Math.imul(q,ae))+Math.imul(j,oe)|0,o=Math.imul(j,ae),i=i+Math.imul(O,ue)|0,n=(n=n+Math.imul(O,le)|0)+Math.imul(N,ue)|0,o=o+Math.imul(N,le)|0,i=i+Math.imul(I,he)|0,n=(n=n+Math.imul(I,de)|0)+Math.imul($,he)|0,o=o+Math.imul($,de)|0;var Ce=(l+(i=i+Math.imul(T,pe)|0)|0)+((8191&(n=(n=n+Math.imul(T,me)|0)+Math.imul(P,pe)|0))<<13)|0;l=((o=o+Math.imul(P,me)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(q,ue),n=(n=Math.imul(q,le))+Math.imul(j,ue)|0,o=Math.imul(j,le),i=i+Math.imul(O,he)|0,n=(n=n+Math.imul(O,de)|0)+Math.imul(N,he)|0,o=o+Math.imul(N,de)|0;var Ie=(l+(i=i+Math.imul(I,pe)|0)|0)+((8191&(n=(n=n+Math.imul(I,me)|0)+Math.imul($,pe)|0))<<13)|0;l=((o=o+Math.imul($,me)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(q,he),n=(n=Math.imul(q,de))+Math.imul(j,he)|0,o=Math.imul(j,de);var $e=(l+(i=i+Math.imul(O,pe)|0)|0)+((8191&(n=(n=n+Math.imul(O,me)|0)+Math.imul(N,pe)|0))<<13)|0;l=((o=o+Math.imul(N,me)|0)+(n>>>13)|0)+($e>>>26)|0,$e&=67108863;var Be=(l+(i=Math.imul(q,pe))|0)+((8191&(n=(n=Math.imul(q,me))+Math.imul(j,pe)|0))<<13)|0;return l=((o=Math.imul(j,me))+(n>>>13)|0)+(Be>>>26)|0,Be&=67108863,u[0]=ge,u[1]=ye,u[2]=be,u[3]=we,u[4]=ve,u[5]=_e,u[6]=Ee,u[7]=Se,u[8]=Ae,u[9]=Me,u[10]=Re,u[11]=xe,u[12]=ke,u[13]=Te,u[14]=Pe,u[15]=Ce,u[16]=Ie,u[17]=$e,u[18]=Be,0!==l&&(u[19]=l,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=d),n.prototype.mulTo=function(e,t){var r,i=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):i<63?d(this,e,t):i<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=u;l++){var c=o-l,h=(0|e.words[c])*(0|t.words[l]),d=67108863&h;s=67108863&(d=d+s|0),n+=(a=(a=a+(h/67108864|0)|0)+(d>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=n.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},m.prototype.permute=function(e,t,r,i,n,o){for(var a=0;a<o;a++)i[a]=t[e[a]],n[a]=r[e[a]]},m.prototype.transform=function(e,t,r,i,n,o){this.permute(o,e,t,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<n;c+=s)for(var h=u,d=l,f=0;f<a;f++){var p=r[c+f],m=i[c+f],g=r[c+f+a],y=i[c+f+a],b=h*g-d*y;y=h*y+d*g,g=b,r[c+f]=p+g,i[c+f]=m+y,r[c+f+a]=p-g,i[c+f+a]=m-y,f!==s&&(b=u*h-l*d,d=u*d+l*h,h=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},m.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},m.prototype.convert13b=function(e,t,i,n){for(var o=0,a=0;a<t;a++)o+=0|e[a],i[2*a]=8191&o,o>>>=13,i[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<n;++a)i[a]=0;r(0===o),r(!(-8192&o))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),l=new Array(i),c=new Array(i),h=new Array(i),d=r.words;d.length=i,this.convert13b(e.words,e.length,a,i),this.convert13b(t.words,t.length,l,i),this.transform(a,o,s,u,i,n),this.transform(l,o,c,h,i,n);for(var f=0;f<i;f++){var p=s[f]*c[f]-u[f]*h[f];u[f]=s[f]*h[f]+u[f]*c[f],s[f]=p}return this.conjugate(s,u,i),this.transform(s,u,d,o,i,n),this.conjugate(d,o,i),this.normalize13b(d,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},n.prototype.mul=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),p(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,i=0;i<this.length;i++){var n=(0|this.words[i])*e,o=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=o>>>26,this.words[i]=67108863&o}return 0!==t&&(this.words[i]=t,this.length++),this.length=0===e?1:this.length,this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}(e);if(0===t.length)return new n(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var o=r.sqr();i<t.length;i++,o=o.sqr())0!==t[i]&&(r=r.mul(o));return r},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,n=(e-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<i;this.words[t]=u|a,a=s>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){var n;r("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=i;if(n-=a,n=Math.max(0,n),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=n);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,n=1<<t;return!(this.length<=i||!(this.words[i]&n))},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var n,o,a=e.length+i;this._expand(a);var s=0;for(n=0;n<e.length;n++){o=(0|this.words[n+i])+s;var u=(0|e.words[n])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)s=(o=(0|this.words[n+i])+s)>>26,this.words[n+i]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),o=e,a=0|o.words[o.length-1];0!=(r=26-this._countBits(a))&&(o=o.ushln(r),i.iushln(r),a=0|o.words[o.length-1]);var s,u=i.length-o.length;if("mod"!==t){(s=new n(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(o,1,u);0===c.negative&&(i=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|i.words[o.length+h])+(0|i.words[o.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(o,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(o,1,h),i.isZero()||(i.negative^=1);s&&(s.words[h]=d)}return s&&s.strip(),i.strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},n.prototype.divmod=function(e,t,i){return r(!e.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,i=0,n=this.length-1;n>=0;n--)i=(t*i+(0|this.words[n]))%e;return i},n.prototype.idivn=function(e){r(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*t;this.words[i]=n/e|0,t=n%e}return this.strip()},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new n(1),a=new n(0),s=new n(0),u=new n(1),l=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++l;for(var c=i.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(c),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0===(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(i)>=0?(t.isub(i),o.isub(s),a.isub(u)):(i.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:i.iushln(l)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new n(1),s=new n(0),u=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,c=1;0===(t.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(t.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,d=1;0===(i.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(i)>=0?(t.isub(i),a.isub(s)):(i.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var o=t;t=r,r=o}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return!(1&this.words[0])},n.prototype.isOdd=function(){return!(1&~this.words[0])},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,a=i;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return-1===this.cmpn(e)},n.prototype.lt=function(e){return-1===this.cmp(e)},n.prototype.lten=function(e){return this.cmpn(e)<=0},n.prototype.lte=function(e){return this.cmp(e)<=0},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new E(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new n(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},i(b,y),b.prototype.split=function(e,t){for(var r=4194303,i=Math.min(e.length,9),n=0;n<i;n++)t.words[n]=e.words[n];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,n=10;n<e.length;n++){var a=0|e.words[n];e.words[n-10]=(a&r)<<4|o>>>22,o=a}o>>>=22,e.words[n-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,y),i(v,y),i(_,y),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new v;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return g[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);r(!o.isZero());var s=new n(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,o),d=this.pow(e,o.addn(1).iushrn(1)),f=this.pow(e,o),p=a;0!==f.cmp(s);){for(var m=f,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<p);var y=this.pow(h,new n(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new n(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var o=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],c=u-1;c>=0;c--){var h=l>>c&1;o!==r[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===i&&0===c)&&(o=this.mul(o,r[a]),s=0,a=0)):s=0}u=26}return o},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new S(e)},i(S,E),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(i).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$9,bn$8)),bn$9.exports}var bn$7={exports:{}},bn$6=bn$7.exports,hasRequiredBn$3,mr,hasRequiredMr,generatePrime,hasRequiredGeneratePrime;function requireBn$3(){return hasRequiredBn$3||(hasRequiredBn$3=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$2().Buffer}catch(A){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function s(e,t,r){var i=a(e,r);return r-1>=t&&(i|=a(e,r-1)<<4),i}function u(e,t,r,i){for(var n=0,o=Math.min(e.length,r),a=t;a<o;a++){var s=e.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return e.cmp(t)<0?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,i):(this._parseBase(e,t,n),"le"===i&&this._initArray(this.toArray(),t,i)))},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===i)for(n=e.length-1,o=0;n>=0;n-=3)a=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===i)for(n=0,o=0;n<e.length;n+=3)a=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},n.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o=0,a=0;if("be"===r)for(i=e.length-1;i>=t;i-=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;this.strip()},n.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var o=e.length-r,a=o%i,s=Math.min(o,o-a)+r,l=0,c=r;c<s;c+=i)l=u(e,c,c+i,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var h=1;for(l=u(e,c,e.length,t),c=0;c<a;c++)h*=t;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},n.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],o=0|t.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<i;l++){for(var c=u>>>26,h=67108863&u,d=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=d;f++){var p=l-f|0;c+=(a=(n=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}n.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);o=s>>>24-n&16777215,(n+=2)>=26&&(n-=26,a--),i=0!==o||a!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var d=c[e],f=h[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:l[d-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},n.prototype.toArrayLike=function(e,t,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,l=new e(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-n;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},n.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},n.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},n.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,n=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},n.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++)t=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&t,n=t>>>26;for(;0!==n&&o<r.length;o++)t=(0|r.words[o])+n,this.words[o]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var o=0,a=0;a<i.length;a++)o=(t=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var i,n,o,a=e.words,s=t.words,u=r.words,l=0,c=0|a[0],h=8191&c,d=c>>>13,f=0|a[1],p=8191&f,m=f>>>13,g=0|a[2],y=8191&g,b=g>>>13,w=0|a[3],v=8191&w,_=w>>>13,E=0|a[4],S=8191&E,A=E>>>13,M=0|a[5],R=8191&M,x=M>>>13,k=0|a[6],T=8191&k,P=k>>>13,C=0|a[7],I=8191&C,$=C>>>13,B=0|a[8],O=8191&B,N=B>>>13,L=0|a[9],q=8191&L,j=L>>>13,U=0|s[0],D=8191&U,F=U>>>13,W=0|s[1],K=8191&W,H=W>>>13,z=0|s[2],V=8191&z,G=z>>>13,Y=0|s[3],J=8191&Y,Z=Y>>>13,X=0|s[4],Q=8191&X,ee=X>>>13,te=0|s[5],re=8191&te,ie=te>>>13,ne=0|s[6],oe=8191&ne,ae=ne>>>13,se=0|s[7],ue=8191&se,le=se>>>13,ce=0|s[8],he=8191&ce,de=ce>>>13,fe=0|s[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(l+(i=Math.imul(h,D))|0)+((8191&(n=(n=Math.imul(h,F))+Math.imul(d,D)|0))<<13)|0;l=((o=Math.imul(d,F))+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,D),n=(n=Math.imul(p,F))+Math.imul(m,D)|0,o=Math.imul(m,F);var ye=(l+(i=i+Math.imul(h,K)|0)|0)+((8191&(n=(n=n+Math.imul(h,H)|0)+Math.imul(d,K)|0))<<13)|0;l=((o=o+Math.imul(d,H)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(y,D),n=(n=Math.imul(y,F))+Math.imul(b,D)|0,o=Math.imul(b,F),i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,H)|0;var be=(l+(i=i+Math.imul(h,V)|0)|0)+((8191&(n=(n=n+Math.imul(h,G)|0)+Math.imul(d,V)|0))<<13)|0;l=((o=o+Math.imul(d,G)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(v,D),n=(n=Math.imul(v,F))+Math.imul(_,D)|0,o=Math.imul(_,F),i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(b,K)|0,o=o+Math.imul(b,H)|0,i=i+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,G)|0;var we=(l+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;l=((o=o+Math.imul(d,Z)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(S,D),n=(n=Math.imul(S,F))+Math.imul(A,D)|0,o=Math.imul(A,F),i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,H)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,H)|0,i=i+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(b,V)|0,o=o+Math.imul(b,G)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var ve=(l+(i=i+Math.imul(h,Q)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;l=((o=o+Math.imul(d,ee)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(R,D),n=(n=Math.imul(R,F))+Math.imul(x,D)|0,o=Math.imul(x,F),i=i+Math.imul(S,K)|0,n=(n=n+Math.imul(S,H)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,H)|0,i=i+Math.imul(v,V)|0,n=(n=n+Math.imul(v,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,i=i+Math.imul(y,J)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0;var _e=(l+(i=i+Math.imul(h,re)|0)|0)+((8191&(n=(n=n+Math.imul(h,ie)|0)+Math.imul(d,re)|0))<<13)|0;l=((o=o+Math.imul(d,ie)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(T,D),n=(n=Math.imul(T,F))+Math.imul(P,D)|0,o=Math.imul(P,F),i=i+Math.imul(R,K)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,H)|0,i=i+Math.imul(S,V)|0,n=(n=n+Math.imul(S,G)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,G)|0,i=i+Math.imul(v,J)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0,i=i+Math.imul(p,re)|0,n=(n=n+Math.imul(p,ie)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ie)|0;var Ee=(l+(i=i+Math.imul(h,oe)|0)|0)+((8191&(n=(n=n+Math.imul(h,ae)|0)+Math.imul(d,oe)|0))<<13)|0;l=((o=o+Math.imul(d,ae)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(I,D),n=(n=Math.imul(I,F))+Math.imul($,D)|0,o=Math.imul($,F),i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,H)|0,i=i+Math.imul(R,V)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,G)|0,i=i+Math.imul(S,J)|0,n=(n=n+Math.imul(S,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,i=i+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,i=i+Math.imul(y,re)|0,n=(n=n+Math.imul(y,ie)|0)+Math.imul(b,re)|0,o=o+Math.imul(b,ie)|0,i=i+Math.imul(p,oe)|0,n=(n=n+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(l+(i=i+Math.imul(h,ue)|0)|0)+((8191&(n=(n=n+Math.imul(h,le)|0)+Math.imul(d,ue)|0))<<13)|0;l=((o=o+Math.imul(d,le)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(O,D),n=(n=Math.imul(O,F))+Math.imul(N,D)|0,o=Math.imul(N,F),i=i+Math.imul(I,K)|0,n=(n=n+Math.imul(I,H)|0)+Math.imul($,K)|0,o=o+Math.imul($,H)|0,i=i+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,G)|0,i=i+Math.imul(R,J)|0,n=(n=n+Math.imul(R,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,i=i+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,i=i+Math.imul(v,re)|0,n=(n=n+Math.imul(v,ie)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,n=(n=n+Math.imul(y,ae)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,ae)|0,i=i+Math.imul(p,ue)|0,n=(n=n+Math.imul(p,le)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,le)|0;var Ae=(l+(i=i+Math.imul(h,he)|0)|0)+((8191&(n=(n=n+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;l=((o=o+Math.imul(d,de)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(q,D),n=(n=Math.imul(q,F))+Math.imul(j,D)|0,o=Math.imul(j,F),i=i+Math.imul(O,K)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,H)|0,i=i+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul($,V)|0,o=o+Math.imul($,G)|0,i=i+Math.imul(T,J)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Z)|0,i=i+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,i=i+Math.imul(S,re)|0,n=(n=n+Math.imul(S,ie)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ie)|0,i=i+Math.imul(v,oe)|0,n=(n=n+Math.imul(v,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,i=i+Math.imul(y,ue)|0,n=(n=n+Math.imul(y,le)|0)+Math.imul(b,ue)|0,o=o+Math.imul(b,le)|0,i=i+Math.imul(p,he)|0,n=(n=n+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Me=(l+(i=i+Math.imul(h,pe)|0)|0)+((8191&(n=(n=n+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;l=((o=o+Math.imul(d,me)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(q,K),n=(n=Math.imul(q,H))+Math.imul(j,K)|0,o=Math.imul(j,H),i=i+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,G)|0,i=i+Math.imul(I,J)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul($,J)|0,o=o+Math.imul($,Z)|0,i=i+Math.imul(T,Q)|0,n=(n=n+Math.imul(T,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(R,re)|0,n=(n=n+Math.imul(R,ie)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ie)|0,i=i+Math.imul(S,oe)|0,n=(n=n+Math.imul(S,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,i=i+Math.imul(v,ue)|0,n=(n=n+Math.imul(v,le)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,he)|0,n=(n=n+Math.imul(y,de)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,de)|0;var Re=(l+(i=i+Math.imul(p,pe)|0)|0)+((8191&(n=(n=n+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;l=((o=o+Math.imul(m,me)|0)+(n>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(q,V),n=(n=Math.imul(q,G))+Math.imul(j,V)|0,o=Math.imul(j,G),i=i+Math.imul(O,J)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Z)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,ee)|0)+Math.imul($,Q)|0,o=o+Math.imul($,ee)|0,i=i+Math.imul(T,re)|0,n=(n=n+Math.imul(T,ie)|0)+Math.imul(P,re)|0,o=o+Math.imul(P,ie)|0,i=i+Math.imul(R,oe)|0,n=(n=n+Math.imul(R,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,i=i+Math.imul(S,ue)|0,n=(n=n+Math.imul(S,le)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,le)|0,i=i+Math.imul(v,he)|0,n=(n=n+Math.imul(v,de)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,de)|0;var xe=(l+(i=i+Math.imul(y,pe)|0)|0)+((8191&(n=(n=n+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;l=((o=o+Math.imul(b,me)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(q,J),n=(n=Math.imul(q,Z))+Math.imul(j,J)|0,o=Math.imul(j,Z),i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,i=i+Math.imul(I,re)|0,n=(n=n+Math.imul(I,ie)|0)+Math.imul($,re)|0,o=o+Math.imul($,ie)|0,i=i+Math.imul(T,oe)|0,n=(n=n+Math.imul(T,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,i=i+Math.imul(R,ue)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,le)|0,i=i+Math.imul(S,he)|0,n=(n=n+Math.imul(S,de)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,de)|0;var ke=(l+(i=i+Math.imul(v,pe)|0)|0)+((8191&(n=(n=n+Math.imul(v,me)|0)+Math.imul(_,pe)|0))<<13)|0;l=((o=o+Math.imul(_,me)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(q,Q),n=(n=Math.imul(q,ee))+Math.imul(j,Q)|0,o=Math.imul(j,ee),i=i+Math.imul(O,re)|0,n=(n=n+Math.imul(O,ie)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ie)|0,i=i+Math.imul(I,oe)|0,n=(n=n+Math.imul(I,ae)|0)+Math.imul($,oe)|0,o=o+Math.imul($,ae)|0,i=i+Math.imul(T,ue)|0,n=(n=n+Math.imul(T,le)|0)+Math.imul(P,ue)|0,o=o+Math.imul(P,le)|0,i=i+Math.imul(R,he)|0,n=(n=n+Math.imul(R,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var Te=(l+(i=i+Math.imul(S,pe)|0)|0)+((8191&(n=(n=n+Math.imul(S,me)|0)+Math.imul(A,pe)|0))<<13)|0;l=((o=o+Math.imul(A,me)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(q,re),n=(n=Math.imul(q,ie))+Math.imul(j,re)|0,o=Math.imul(j,ie),i=i+Math.imul(O,oe)|0,n=(n=n+Math.imul(O,ae)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,ae)|0,i=i+Math.imul(I,ue)|0,n=(n=n+Math.imul(I,le)|0)+Math.imul($,ue)|0,o=o+Math.imul($,le)|0,i=i+Math.imul(T,he)|0,n=(n=n+Math.imul(T,de)|0)+Math.imul(P,he)|0,o=o+Math.imul(P,de)|0;var Pe=(l+(i=i+Math.imul(R,pe)|0)|0)+((8191&(n=(n=n+Math.imul(R,me)|0)+Math.imul(x,pe)|0))<<13)|0;l=((o=o+Math.imul(x,me)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(q,oe),n=(n=Math.imul(q,ae))+Math.imul(j,oe)|0,o=Math.imul(j,ae),i=i+Math.imul(O,ue)|0,n=(n=n+Math.imul(O,le)|0)+Math.imul(N,ue)|0,o=o+Math.imul(N,le)|0,i=i+Math.imul(I,he)|0,n=(n=n+Math.imul(I,de)|0)+Math.imul($,he)|0,o=o+Math.imul($,de)|0;var Ce=(l+(i=i+Math.imul(T,pe)|0)|0)+((8191&(n=(n=n+Math.imul(T,me)|0)+Math.imul(P,pe)|0))<<13)|0;l=((o=o+Math.imul(P,me)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(q,ue),n=(n=Math.imul(q,le))+Math.imul(j,ue)|0,o=Math.imul(j,le),i=i+Math.imul(O,he)|0,n=(n=n+Math.imul(O,de)|0)+Math.imul(N,he)|0,o=o+Math.imul(N,de)|0;var Ie=(l+(i=i+Math.imul(I,pe)|0)|0)+((8191&(n=(n=n+Math.imul(I,me)|0)+Math.imul($,pe)|0))<<13)|0;l=((o=o+Math.imul($,me)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(q,he),n=(n=Math.imul(q,de))+Math.imul(j,he)|0,o=Math.imul(j,de);var $e=(l+(i=i+Math.imul(O,pe)|0)|0)+((8191&(n=(n=n+Math.imul(O,me)|0)+Math.imul(N,pe)|0))<<13)|0;l=((o=o+Math.imul(N,me)|0)+(n>>>13)|0)+($e>>>26)|0,$e&=67108863;var Be=(l+(i=Math.imul(q,pe))|0)+((8191&(n=(n=Math.imul(q,me))+Math.imul(j,pe)|0))<<13)|0;return l=((o=Math.imul(j,me))+(n>>>13)|0)+(Be>>>26)|0,Be&=67108863,u[0]=ge,u[1]=ye,u[2]=be,u[3]=we,u[4]=ve,u[5]=_e,u[6]=Ee,u[7]=Se,u[8]=Ae,u[9]=Me,u[10]=Re,u[11]=xe,u[12]=ke,u[13]=Te,u[14]=Pe,u[15]=Ce,u[16]=Ie,u[17]=$e,u[18]=Be,0!==l&&(u[19]=l,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=d),n.prototype.mulTo=function(e,t){var r,i=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):i<63?d(this,e,t):i<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=u;l++){var c=o-l,h=(0|e.words[c])*(0|t.words[l]),d=67108863&h;s=67108863&(d=d+s|0),n+=(a=(a=a+(h/67108864|0)|0)+(d>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=n.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},m.prototype.permute=function(e,t,r,i,n,o){for(var a=0;a<o;a++)i[a]=t[e[a]],n[a]=r[e[a]]},m.prototype.transform=function(e,t,r,i,n,o){this.permute(o,e,t,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<n;c+=s)for(var h=u,d=l,f=0;f<a;f++){var p=r[c+f],m=i[c+f],g=r[c+f+a],y=i[c+f+a],b=h*g-d*y;y=h*y+d*g,g=b,r[c+f]=p+g,i[c+f]=m+y,r[c+f+a]=p-g,i[c+f+a]=m-y,f!==s&&(b=u*h-l*d,d=u*d+l*h,h=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},m.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},m.prototype.convert13b=function(e,t,i,n){for(var o=0,a=0;a<t;a++)o+=0|e[a],i[2*a]=8191&o,o>>>=13,i[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<n;++a)i[a]=0;r(0===o),r(!(-8192&o))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),l=new Array(i),c=new Array(i),h=new Array(i),d=r.words;d.length=i,this.convert13b(e.words,e.length,a,i),this.convert13b(t.words,t.length,l,i),this.transform(a,o,s,u,i,n),this.transform(l,o,c,h,i,n);for(var f=0;f<i;f++){var p=s[f]*c[f]-u[f]*h[f];u[f]=s[f]*h[f]+u[f]*c[f],s[f]=p}return this.conjugate(s,u,i),this.transform(s,u,d,o,i,n),this.conjugate(d,o,i),this.normalize13b(d,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},n.prototype.mul=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),p(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,i=0;i<this.length;i++){var n=(0|this.words[i])*e,o=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=o>>>26,this.words[i]=67108863&o}return 0!==t&&(this.words[i]=t,this.length++),this.length=0===e?1:this.length,this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}(e);if(0===t.length)return new n(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var o=r.sqr();i<t.length;i++,o=o.sqr())0!==t[i]&&(r=r.mul(o));return r},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,n=(e-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<i;this.words[t]=u|a,a=s>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){var n;r("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=i;if(n-=a,n=Math.max(0,n),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=n);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,n=1<<t;return!(this.length<=i||!(this.words[i]&n))},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var n,o,a=e.length+i;this._expand(a);var s=0;for(n=0;n<e.length;n++){o=(0|this.words[n+i])+s;var u=(0|e.words[n])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)s=(o=(0|this.words[n+i])+s)>>26,this.words[n+i]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),o=e,a=0|o.words[o.length-1];0!=(r=26-this._countBits(a))&&(o=o.ushln(r),i.iushln(r),a=0|o.words[o.length-1]);var s,u=i.length-o.length;if("mod"!==t){(s=new n(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(o,1,u);0===c.negative&&(i=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|i.words[o.length+h])+(0|i.words[o.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(o,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(o,1,h),i.isZero()||(i.negative^=1);s&&(s.words[h]=d)}return s&&s.strip(),i.strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},n.prototype.divmod=function(e,t,i){return r(!e.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,i=0,n=this.length-1;n>=0;n--)i=(t*i+(0|this.words[n]))%e;return i},n.prototype.idivn=function(e){r(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*t;this.words[i]=n/e|0,t=n%e}return this.strip()},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new n(1),a=new n(0),s=new n(0),u=new n(1),l=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++l;for(var c=i.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(c),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0===(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(i)>=0?(t.isub(i),o.isub(s),a.isub(u)):(i.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:i.iushln(l)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new n(1),s=new n(0),u=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,c=1;0===(t.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(t.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,d=1;0===(i.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(i)>=0?(t.isub(i),a.isub(s)):(i.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var o=t;t=r,r=o}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return!(1&this.words[0])},n.prototype.isOdd=function(){return!(1&~this.words[0])},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,a=i;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return-1===this.cmpn(e)},n.prototype.lt=function(e){return-1===this.cmp(e)},n.prototype.lten=function(e){return this.cmpn(e)<=0},n.prototype.lte=function(e){return this.cmp(e)<=0},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new E(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new n(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},i(b,y),b.prototype.split=function(e,t){for(var r=4194303,i=Math.min(e.length,9),n=0;n<i;n++)t.words[n]=e.words[n];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,n=10;n<e.length;n++){var a=0|e.words[n];e.words[n-10]=(a&r)<<4|o>>>22,o=a}o>>>=22,e.words[n-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,y),i(v,y),i(_,y),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new v;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return g[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);r(!o.isZero());var s=new n(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,o),d=this.pow(e,o.addn(1).iushrn(1)),f=this.pow(e,o),p=a;0!==f.cmp(s);){for(var m=f,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<p);var y=this.pow(h,new n(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new n(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var o=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],c=u-1;c>=0;c--){var h=l>>c&1;o!==r[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===i&&0===c)&&(o=this.mul(o,r[a]),s=0,a=0)):s=0}u=26}return o},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new S(e)},i(S,E),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(i).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$7,bn$6)),bn$7.exports}function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var e=requireBn$3(),t=requireBrorand();function r(e){this.rand=e||new t.Rand}return mr=r,r.create=function(e){return new r(e)},r.prototype._randbelow=function(t){var r=t.bitLength(),i=Math.ceil(r/8);do{var n=new e(this.rand.generate(i))}while(n.cmp(t)>=0);return n},r.prototype._randrange=function(e,t){var r=t.sub(e);return e.add(this._randbelow(r))},r.prototype.test=function(t,r,i){var n=t.bitLength(),o=e.mont(t),a=new e(1).toRed(o);r||(r=Math.max(1,n/48|0));for(var s=t.subn(1),u=0;!s.testn(u);u++);for(var l=t.shrn(u),c=s.toRed(o);r>0;r--){var h=this._randrange(new e(2),s);i&&i(h);var d=h.toRed(o).redPow(l);if(0!==d.cmp(a)&&0!==d.cmp(c)){for(var f=1;f<u;f++){if(0===(d=d.redSqr()).cmp(a))return!1;if(0===d.cmp(c))break}if(f===u)return!1}}return!0},r.prototype.getDivisor=function(t,r){var i=t.bitLength(),n=e.mont(t),o=new e(1).toRed(n);r||(r=Math.max(1,i/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var u=t.shrn(s),l=a.toRed(n);r>0;r--){var c=this._randrange(new e(2),a),h=t.gcd(c);if(0!==h.cmpn(1))return h;var d=c.toRed(n).redPow(u);if(0!==d.cmp(o)&&0!==d.cmp(l)){for(var f=1;f<s;f++){if(0===(d=d.redSqr()).cmp(o))return d.fromRed().subn(1).gcd(t);if(0===d.cmp(l))break}if(f===s)return(d=d.redSqr()).fromRed().subn(1).gcd(t)}}return!1},mr}function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var e=requireBrowser$e();generatePrime=p,p.simpleSieve=d,p.fermatTest=f;var t=requireBn$4(),r=new t(24),i=new(requireMr()),n=new t(1),o=new t(2),a=new t(5);new t(16),new t(8);var s=new t(10),u=new t(3);new t(7);var l=new t(11),c=new t(4);new t(12);var h=null;function d(e){for(var t=function(){if(null!==h)return h;var e=[];e[0]=2;for(var t=1,r=3;r<1048576;r+=2){for(var i=Math.ceil(Math.sqrt(r)),n=0;n<t&&e[n]<=i&&r%e[n]!==0;n++);t!==n&&e[n]<=i||(e[t++]=r)}return h=e,e}(),r=0;r<t.length;r++)if(0===e.modn(t[r]))return 0===e.cmpn(t[r]);return!0}function f(e){var r=t.mont(e);return 0===o.toRed(r).redPow(e.subn(1)).fromRed().cmpn(1)}function p(h,p){if(h<16)return new t(2===p||5===p?[140,123]:[140,39]);var m,g;for(p=new t(p);;){for(m=new t(e(Math.ceil(h/8)));m.bitLength()>h;)m.ishrn(1);if(m.isEven()&&m.iadd(n),m.testn(1)||m.iadd(o),p.cmp(o)){if(!p.cmp(a))for(;m.mod(s).cmp(u);)m.iadd(c)}else for(;m.mod(r).cmp(l);)m.iadd(c);if(d(g=m.shrn(1))&&d(m)&&f(g)&&f(m)&&i.test(g)&&i.test(m))return m}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1:modp1,modp2:modp2,modp5:modp5,modp14:modp14,modp15:modp15,modp16:modp16,modp17:modp17,modp18:modp18};var dh,hasRequiredDh,hasRequiredBrowser$7;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var e=requireBn$4(),t=new(requireMr()),r=new e(24),i=new e(11),n=new e(10),o=new e(3),a=new e(7),s=requireGeneratePrime(),u=requireBrowser$e();function l(t,r){return r=r||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,r)),this._pub=new e(t),this}function c(t,r){return r=r||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,r)),this._priv=new e(t),this}dh=d;var h={};function d(t,r,i){this.setGenerator(r),this.__prime=new e(t),this._prime=e.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=l,this.setPrivateKey=c):this._primeCode=8}function f(e,t){var r=new Buffer(e.toArray());return t?r.toString(t):r}return Object.defineProperty(d.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,u){var l=u.toString("hex"),c=[l,e.toString(16)].join("_");if(c in h)return h[c];var d,f=0;if(e.isEven()||!s.simpleSieve||!s.fermatTest(e)||!t.test(e))return f+=1,f+="02"===l||"05"===l?8:4,h[c]=f,f;switch(t.test(e.shrn(1))||(f+=2),l){case"02":e.mod(r).cmp(i)&&(f+=8);break;case"05":(d=e.mod(n)).cmp(o)&&d.cmp(a)&&(f+=8);break;default:f+=4}return h[c]=f,f}(this.__prime,this.__gen)),this._primeCode}}),d.prototype.generateKeys=function(){return this._priv||(this._priv=new e(u(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},d.prototype.computeSecret=function(t){var r=(t=(t=new e(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new Buffer(r.toArray()),n=this.getPrime();if(i.length<n.length){var o=new Buffer(n.length-i.length);o.fill(0),i=Buffer.concat([o,i])}return i},d.prototype.getPublicKey=function(e){return f(this._pub,e)},d.prototype.getPrivateKey=function(e){return f(this._priv,e)},d.prototype.getPrime=function(e){return f(this.__prime,e)},d.prototype.getGenerator=function(e){return f(this._gen,e)},d.prototype.setGenerator=function(t,r){return r=r||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,r)),this.__gen=t,this._gen=new e(t),this},dh}function requireBrowser$7(){if(hasRequiredBrowser$7)return browser$7;hasRequiredBrowser$7=1;var e=requireGeneratePrime(),t=require$$1$1,r=requireDh();var i={binary:!0,hex:!0,base64:!0};return browser$7.DiffieHellmanGroup=browser$7.createDiffieHellmanGroup=browser$7.getDiffieHellman=function(e){var i=new Buffer(t[e].prime,"hex"),n=new Buffer(t[e].gen,"hex");return new r(i,n)},browser$7.createDiffieHellman=browser$7.DiffieHellman=function t(n,o,a,s){return Buffer.isBuffer(o)||void 0===i[o]?t(n,"binary",o,a):(o=o||"binary",s=s||"binary",a=a||new Buffer([2]),Buffer.isBuffer(a)||(a=new Buffer(a,s)),"number"==typeof n?new r(e(n,a),a,!0):(Buffer.isBuffer(n)||(n=new Buffer(n,o)),new r(n,a,!0)))},browser$7}var readableBrowser={exports:{}},isarray,hasRequiredIsarray,streamBrowser,hasRequiredStreamBrowser;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var e={}.toString;return isarray=Array.isArray||function(t){return"[object Array]"==e.call(t)}}function requireStreamBrowser(){return hasRequiredStreamBrowser?streamBrowser:(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter)}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(e,t){var r=requireDist$2(),i=r.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(n(r,t),t.Buffer=o),n(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var BufferList={exports:{}},hasRequiredBufferList,destroy_1$1,hasRequiredDestroy$1,_stream_writable,hasRequired_stream_writable,_stream_duplex,hasRequired_stream_duplex,_stream_readable,hasRequired_stream_readable,_stream_transform,hasRequired_stream_transform,_stream_passthrough,hasRequired_stream_passthrough,hasRequiredReadableBrowser;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(e){var t=requireSafeBuffer().Buffer,r=requireUtil$2();function i(e,t,r){e.copy(t,r)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return t.alloc(0);for(var r=t.allocUnsafe(e>>>0),n=this.head,o=0;n;)i(n.data,r,o),o+=n.data.length,n=n.next;return r},e}(),r&&r.inspect&&r.inspect.custom&&(e.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})}(BufferList)),BufferList.exports}function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;var e=requireProcessNextickArgs();function t(e,t){e.emit("error",t)}return destroy_1$1={destroy:function(r,i){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(i?i(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(t,this,r)):e.nextTick(t,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(r){!i&&r?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,e.nextTick(t,n,r)):e.nextTick(t,n,r):i&&i(r)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}}function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var e=requireProcessNextickArgs();function t(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;e.entry=null;for(;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}_stream_writable=f;var r,i=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:e.nextTick;f.WritableState=d;var n=Object.create(requireUtil$1());n.inherits=requireInherits_browser();var o={deprecate:requireBrowser$d()},a=requireStreamBrowser(),s=requireSafeBuffer().Buffer,u=(void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,c=requireDestroy$1();function h(){}function d(n,o){r=r||require_stream_duplex(),n=n||{};var a=o instanceof r;this.objectMode=!!n.objectMode,a&&(this.objectMode=this.objectMode||!!n.writableObjectMode);var s=n.highWaterMark,u=n.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:a&&(u||0===u)?u:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===n.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=n.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,r){var n=t._writableState,o=n.sync,a=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),r)!function(t,r,i,n,o){--r.pendingcb,i?(e.nextTick(o,n),e.nextTick(w,t,r),t._writableState.errorEmitted=!0,t.emit("error",n)):(o(n),t._writableState.errorEmitted=!0,t.emit("error",n),w(t,r))}(t,n,o,r,a);else{var s=y(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||g(t,n),o?i(m,t,n,s,a):m(t,n,s,a)}}(o,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function f(e){if(r=r||require_stream_duplex(),!(l.call(f,this)||this instanceof r))return new f(e);this._writableState=new d(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function p(e,t,r,i,n,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function m(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),w(e,t)}function g(e,r){r.bufferProcessing=!0;var i=r.bufferedRequest;if(e._writev&&i&&i.next){var n=r.bufferedRequestCount,o=new Array(n),a=r.corkedRequestsFree;a.entry=i;for(var s=0,u=!0;i;)o[s]=i,i.isBuf||(u=!1),i=i.next,s+=1;o.allBuffers=u,p(e,r,!0,r.length,o,"",a.finish),r.pendingcb++,r.lastBufferedRequest=null,a.next?(r.corkedRequestsFree=a.next,a.next=null):r.corkedRequestsFree=new t(r),r.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,c=i.encoding,h=i.callback;if(p(e,r,!1,r.objectMode?1:l.length,l,c,h),i=i.next,r.bufferedRequestCount--,r.writing)break}null===i&&(r.lastBufferedRequest=null)}r.bufferedRequest=i,r.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),w(e,t)})}function w(t,r){var i=y(r);return i&&(!function(t,r){r.prefinished||r.finalCalled||("function"==typeof t._final?(r.pendingcb++,r.finalCalled=!0,e.nextTick(b,t,r)):(r.prefinished=!0,t.emit("prefinish")))}(t,r),0===r.pendingcb&&(r.finished=!0,t.emit("finish"))),i}return n.inherits(f,a),d.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(d.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===f&&(e&&e._writableState instanceof d)}})):l=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(t,r,i){var n,o=this._writableState,a=!1,l=!o.objectMode&&(n=t,s.isBuffer(n)||n instanceof u);return l&&!s.isBuffer(t)&&(t=function(e){return s.from(e)}(t)),"function"==typeof r&&(i=r,r=null),l?r="buffer":r||(r=o.defaultEncoding),"function"!=typeof i&&(i=h),o.ended?function(t,r){var i=new Error("write after end");t.emit("error",i),e.nextTick(r,i)}(this,i):(l||function(t,r,i,n){var o=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||r.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),e.nextTick(n,a),o=!1),o}(this,o,t,i))&&(o.pendingcb++,a=function(e,t,r,i,n,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=s.from(t,r));return t}(t,i,n);i!==a&&(r=!0,n="buffer",i=a)}var u=t.objectMode?1:i.length;t.length+=u;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else p(e,t,!1,u,i,n,o);return l}(this,o,l,t,r,i)),a},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||g(this,e))},f.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(t,r,i){var n=this._writableState;"function"==typeof t?(i=t,t=null,r=null):"function"==typeof r&&(i=r,r=null),null!=t&&this.write(t,r),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,r,i){r.ending=!0,w(t,r),i&&(r.finished?e.nextTick(i):t.once("finish",i));r.ended=!0,t.writable=!1}(this,n,i)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=c.destroy,f.prototype._undestroy=c.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)},_stream_writable}function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var e=requireProcessNextickArgs(),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};_stream_duplex=u;var r=Object.create(requireUtil$1());r.inherits=requireInherits_browser();var i=require_stream_readable(),n=require_stream_writable();r.inherits(u,i);for(var o=t(n.prototype),a=0;a<o.length;a++){var s=o[a];u.prototype[s]||(u.prototype[s]=n.prototype[s])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),n.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||e.nextTick(c,this)}function c(e){e.end()}return Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),u.prototype._destroy=function(t,r){this.push(null),this.end(),e.nextTick(r,t)},_stream_duplex}function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var e=requireProcessNextickArgs();_stream_readable=m;var t,r=requireIsarray();m.ReadableState=p,requireEvents().EventEmitter;var i=function(e,t){return e.listeners(t).length},n=requireStreamBrowser(),o=requireSafeBuffer().Buffer,a=(void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var s=Object.create(requireUtil$1());s.inherits=requireInherits_browser();var u=requireUtil$2(),l=void 0;l=u&&u.debuglog?u.debuglog("stream"):function(){};var c,h=requireBufferList(),d=requireDestroy$1();s.inherits(m,n);var f=["error","close","destroy","pause","resume"];function p(e,r){e=e||{};var i=r instanceof(t=t||require_stream_duplex());this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(c||(c=requireString_decoder().StringDecoder),this.decoder=new c(e.encoding),this.encoding=e.encoding)}function m(e){if(t=t||require_stream_duplex(),!(this instanceof m))return new m(e);this._readableState=new p(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),n.call(this)}function g(e,t,r,i,n){var s,u=e._readableState;null===t?(u.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,v(e)}(e,u)):(n||(s=function(e,t){var r;i=t,o.isBuffer(i)||i instanceof a||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var i;return r}(u,t)),s?e.emit("error",s):u.objectMode||t&&t.length>0?("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),i?u.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):y(e,u,t,!0):u.ended?e.emit("error",new Error("stream.push() after EOF")):(u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?y(e,u,t,!1):E(e,u)):y(e,u,t,!1))):i||(u.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(u)}function y(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&v(e)),E(e,t)}Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),m.prototype.destroy=d.destroy,m.prototype._undestroy=d.undestroy,m.prototype._destroy=function(e,t){this.push(null),t(e)},m.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=o.from(e,t),t=""),r=!0),g(this,e,t,!1,r)},m.prototype.unshift=function(e){return g(this,e,null,!0,!1)},m.prototype.isPaused=function(){return!1===this._readableState.flowing},m.prototype.setEncoding=function(e){return c||(c=requireString_decoder().StringDecoder),this._readableState.decoder=new c(e),this._readableState.encoding=e,this};var b=8388608;function w(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=b?e=b:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function v(t){var r=t._readableState;r.needReadable=!1,r.emittedReadable||(l("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?e.nextTick(_,t):_(t))}function _(e){l("emit readable"),e.emit("readable"),R(e)}function E(t,r){r.readingMore||(r.readingMore=!0,e.nextTick(S,t,r))}function S(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(l("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function A(e){l("readable nexttick read 0"),e.read(0)}function M(e,t){t.reading||(l("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,i=1,n=r.data;e-=n.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?n+=o:n+=o.slice(0,e),0===(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}(e,t):function(e,t){var r=o.allocUnsafe(e),i=t.head,n=1;i.data.copy(r),e-=i.data.length;for(;i=i.next;){var a=i.data,s=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,s),0===(e-=s)){s===a.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=a.slice(s));break}++n}return t.length-=n,r}(e,t);return i}(e,t.buffer,t.decoder),r);var r}function k(t){var r=t._readableState;if(r.length>0)throw new Error('"endReadable()" called on non-empty stream');r.endEmitted||(r.ended=!0,e.nextTick(T,r,t))}function T(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}return m.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?k(this):v(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&k(this),null;var i,n=t.needReadable;return l("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",n=!0),t.ended||t.reading?l("reading or ended",n=!1):n&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(r,t))),null===(i=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&k(this)),null!==i&&this.emit("data",i),i},m.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},m.prototype.pipe=function(t,n){var o=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,l("pipe count=%d opts=%j",a.pipesCount,n);var s=(!n||!1!==n.end)&&t!==process$1.stdout&&t!==process$1.stderr?c:b;function u(e,r){l("onunpipe"),e===o&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),t.removeListener("close",g),t.removeListener("finish",y),t.removeListener("drain",h),t.removeListener("error",m),t.removeListener("unpipe",u),o.removeListener("end",c),o.removeListener("end",b),o.removeListener("data",p),d=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){l("onend"),t.end()}a.endEmitted?e.nextTick(s):o.once("end",s),t.on("unpipe",u);var h=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,R(e))}}(o);t.on("drain",h);var d=!1;var f=!1;function p(e){l("ondata"),f=!1,!1!==t.write(e)||f||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==P(a.pipes,t))&&!d&&(l("false write response, pause",a.awaitDrain),a.awaitDrain++,f=!0),o.pause())}function m(e){l("onerror",e),b(),t.removeListener("error",m),0===i(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",y),b()}function y(){l("onfinish"),t.removeListener("close",g),b()}function b(){l("unpipe"),o.unpipe(t)}return o.on("data",p),function(e,t,i){if("function"==typeof e.prependListener)return e.prependListener(t,i);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]:e.on(t,i)}(t,"error",m),t.once("close",g),t.once("finish",y),t.emit("pipe",o),a.flowing||(l("pipe resume"),o.resume()),t},m.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<n;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=P(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},m.prototype.on=function(t,r){var i=n.prototype.on.call(this,t,r);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var o=this._readableState;o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.emittedReadable=!1,o.reading?o.length&&v(this):e.nextTick(A,this))}return i},m.prototype.addListener=m.prototype.on,m.prototype.resume=function(){var t=this._readableState;return t.flowing||(l("resume"),t.flowing=!0,function(t,r){r.resumeScheduled||(r.resumeScheduled=!0,e.nextTick(M,t,r))}(this,t)),this},m.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this},m.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",function(){if(l("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(n){(l("wrapped data"),r.decoder&&(n=r.decoder.write(n)),r.objectMode&&null==n)||(r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause()))}),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var o=0;o<f.length;o++)e.on(f[o],this.emit.bind(this,f[o]));return this._read=function(t){l("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(m.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),m._fromList=x,_stream_readable}function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=i;var e=require_stream_duplex(),t=Object.create(requireUtil$1());function r(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);e.call(this,t),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",n)}function n(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){o(e,t,r)}):o(this,null,null)}function o(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}return t.inherits=requireInherits_browser(),t.inherits(i,e),i.prototype.push=function(t,r){return this._transformState.needTransform=!1,e.prototype.push.call(this,t,r)},i.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(t,r){var i=this;e.prototype._destroy.call(this,t,function(e){r(e),i.emit("close")})},_stream_transform}function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=r;var e=require_stream_transform(),t=Object.create(requireUtil$1());function r(t){if(!(this instanceof r))return new r(t);e.call(this,t)}return t.inherits=requireInherits_browser(),t.inherits(r,e),r.prototype._transform=function(e,t,r){r(null,e)},_stream_passthrough}function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,e=readableBrowser,t=readableBrowser.exports,(t=e.exports=require_stream_readable()).Stream=t,t.Readable=t,t.Writable=require_stream_writable(),t.Duplex=require_stream_duplex(),t.Transform=require_stream_transform(),t.PassThrough=require_stream_passthrough()),readableBrowser.exports;var e,t}var sign$4={exports:{}},browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var e=requireBn$6(),t=requireBrowser$e(),r=requireSafeBuffer$2().Buffer;function i(r){var i,n=r.modulus.byteLength();do{i=new e(t(n))}while(i.cmp(r.modulus)>=0||!i.umod(r.prime1)||!i.umod(r.prime2));return i}function n(t,n){var o=function(t){var r=i(t);return{blinder:r.toRed(e.mont(t.modulus)).redPow(new e(t.publicExponent)).fromRed(),unblinder:r.invm(t.modulus)}}(n),a=n.modulus.byteLength(),s=new e(t).mul(o.blinder).umod(n.modulus),u=s.toRed(e.mont(n.prime1)),l=s.toRed(e.mont(n.prime2)),c=n.coefficient,h=n.prime1,d=n.prime2,f=u.redPow(n.exponent1).fromRed(),p=l.redPow(n.exponent2).fromRed(),m=f.isub(p).imul(c).umod(h).imul(d);return p.iadd(m).imul(o.unblinder).umod(n.modulus).toArrayLike(r,"be",a)}return n.getr=i,browserifyRsa=n}var asn1$1={},asn1={},bn$5={exports:{}},bn$4=bn$5.exports,hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$2().Buffer}catch(A){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function s(e,t,r){var i=a(e,r);return r-1>=t&&(i|=a(e,r-1)<<4),i}function u(e,t,r,i){for(var n=0,o=Math.min(e.length,r),a=t;a<o;a++){var s=e.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return e.cmp(t)<0?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,i):(this._parseBase(e,t,n),"le"===i&&this._initArray(this.toArray(),t,i)))},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===i)for(n=e.length-1,o=0;n>=0;n-=3)a=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===i)for(n=0,o=0;n<e.length;n+=3)a=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},n.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o=0,a=0;if("be"===r)for(i=e.length-1;i>=t;i-=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;this.strip()},n.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var o=e.length-r,a=o%i,s=Math.min(o,o-a)+r,l=0,c=r;c<s;c+=i)l=u(e,c,c+i,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var h=1;for(l=u(e,c,e.length,t),c=0;c<a;c++)h*=t;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},n.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],o=0|t.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<i;l++){for(var c=u>>>26,h=67108863&u,d=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=d;f++){var p=l-f|0;c+=(a=(n=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}n.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);o=s>>>24-n&16777215,(n+=2)>=26&&(n-=26,a--),i=0!==o||a!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var d=c[e],f=h[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:l[d-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},n.prototype.toArrayLike=function(e,t,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,l=new e(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-n;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},n.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},n.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},n.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,n=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},n.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++)t=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&t,n=t>>>26;for(;0!==n&&o<r.length;o++)t=(0|r.words[o])+n,this.words[o]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var o=0,a=0;a<i.length;a++)o=(t=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var i,n,o,a=e.words,s=t.words,u=r.words,l=0,c=0|a[0],h=8191&c,d=c>>>13,f=0|a[1],p=8191&f,m=f>>>13,g=0|a[2],y=8191&g,b=g>>>13,w=0|a[3],v=8191&w,_=w>>>13,E=0|a[4],S=8191&E,A=E>>>13,M=0|a[5],R=8191&M,x=M>>>13,k=0|a[6],T=8191&k,P=k>>>13,C=0|a[7],I=8191&C,$=C>>>13,B=0|a[8],O=8191&B,N=B>>>13,L=0|a[9],q=8191&L,j=L>>>13,U=0|s[0],D=8191&U,F=U>>>13,W=0|s[1],K=8191&W,H=W>>>13,z=0|s[2],V=8191&z,G=z>>>13,Y=0|s[3],J=8191&Y,Z=Y>>>13,X=0|s[4],Q=8191&X,ee=X>>>13,te=0|s[5],re=8191&te,ie=te>>>13,ne=0|s[6],oe=8191&ne,ae=ne>>>13,se=0|s[7],ue=8191&se,le=se>>>13,ce=0|s[8],he=8191&ce,de=ce>>>13,fe=0|s[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(l+(i=Math.imul(h,D))|0)+((8191&(n=(n=Math.imul(h,F))+Math.imul(d,D)|0))<<13)|0;l=((o=Math.imul(d,F))+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,D),n=(n=Math.imul(p,F))+Math.imul(m,D)|0,o=Math.imul(m,F);var ye=(l+(i=i+Math.imul(h,K)|0)|0)+((8191&(n=(n=n+Math.imul(h,H)|0)+Math.imul(d,K)|0))<<13)|0;l=((o=o+Math.imul(d,H)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(y,D),n=(n=Math.imul(y,F))+Math.imul(b,D)|0,o=Math.imul(b,F),i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,H)|0;var be=(l+(i=i+Math.imul(h,V)|0)|0)+((8191&(n=(n=n+Math.imul(h,G)|0)+Math.imul(d,V)|0))<<13)|0;l=((o=o+Math.imul(d,G)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(v,D),n=(n=Math.imul(v,F))+Math.imul(_,D)|0,o=Math.imul(_,F),i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(b,K)|0,o=o+Math.imul(b,H)|0,i=i+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,G)|0;var we=(l+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;l=((o=o+Math.imul(d,Z)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(S,D),n=(n=Math.imul(S,F))+Math.imul(A,D)|0,o=Math.imul(A,F),i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,H)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,H)|0,i=i+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(b,V)|0,o=o+Math.imul(b,G)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var ve=(l+(i=i+Math.imul(h,Q)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;l=((o=o+Math.imul(d,ee)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(R,D),n=(n=Math.imul(R,F))+Math.imul(x,D)|0,o=Math.imul(x,F),i=i+Math.imul(S,K)|0,n=(n=n+Math.imul(S,H)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,H)|0,i=i+Math.imul(v,V)|0,n=(n=n+Math.imul(v,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,i=i+Math.imul(y,J)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0;var _e=(l+(i=i+Math.imul(h,re)|0)|0)+((8191&(n=(n=n+Math.imul(h,ie)|0)+Math.imul(d,re)|0))<<13)|0;l=((o=o+Math.imul(d,ie)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(T,D),n=(n=Math.imul(T,F))+Math.imul(P,D)|0,o=Math.imul(P,F),i=i+Math.imul(R,K)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,H)|0,i=i+Math.imul(S,V)|0,n=(n=n+Math.imul(S,G)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,G)|0,i=i+Math.imul(v,J)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0,i=i+Math.imul(p,re)|0,n=(n=n+Math.imul(p,ie)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ie)|0;var Ee=(l+(i=i+Math.imul(h,oe)|0)|0)+((8191&(n=(n=n+Math.imul(h,ae)|0)+Math.imul(d,oe)|0))<<13)|0;l=((o=o+Math.imul(d,ae)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(I,D),n=(n=Math.imul(I,F))+Math.imul($,D)|0,o=Math.imul($,F),i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,H)|0,i=i+Math.imul(R,V)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,G)|0,i=i+Math.imul(S,J)|0,n=(n=n+Math.imul(S,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,i=i+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,i=i+Math.imul(y,re)|0,n=(n=n+Math.imul(y,ie)|0)+Math.imul(b,re)|0,o=o+Math.imul(b,ie)|0,i=i+Math.imul(p,oe)|0,n=(n=n+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(l+(i=i+Math.imul(h,ue)|0)|0)+((8191&(n=(n=n+Math.imul(h,le)|0)+Math.imul(d,ue)|0))<<13)|0;l=((o=o+Math.imul(d,le)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(O,D),n=(n=Math.imul(O,F))+Math.imul(N,D)|0,o=Math.imul(N,F),i=i+Math.imul(I,K)|0,n=(n=n+Math.imul(I,H)|0)+Math.imul($,K)|0,o=o+Math.imul($,H)|0,i=i+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,G)|0,i=i+Math.imul(R,J)|0,n=(n=n+Math.imul(R,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,i=i+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,i=i+Math.imul(v,re)|0,n=(n=n+Math.imul(v,ie)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,n=(n=n+Math.imul(y,ae)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,ae)|0,i=i+Math.imul(p,ue)|0,n=(n=n+Math.imul(p,le)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,le)|0;var Ae=(l+(i=i+Math.imul(h,he)|0)|0)+((8191&(n=(n=n+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;l=((o=o+Math.imul(d,de)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(q,D),n=(n=Math.imul(q,F))+Math.imul(j,D)|0,o=Math.imul(j,F),i=i+Math.imul(O,K)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,H)|0,i=i+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul($,V)|0,o=o+Math.imul($,G)|0,i=i+Math.imul(T,J)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Z)|0,i=i+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,i=i+Math.imul(S,re)|0,n=(n=n+Math.imul(S,ie)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ie)|0,i=i+Math.imul(v,oe)|0,n=(n=n+Math.imul(v,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,i=i+Math.imul(y,ue)|0,n=(n=n+Math.imul(y,le)|0)+Math.imul(b,ue)|0,o=o+Math.imul(b,le)|0,i=i+Math.imul(p,he)|0,n=(n=n+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Me=(l+(i=i+Math.imul(h,pe)|0)|0)+((8191&(n=(n=n+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;l=((o=o+Math.imul(d,me)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(q,K),n=(n=Math.imul(q,H))+Math.imul(j,K)|0,o=Math.imul(j,H),i=i+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,G)|0,i=i+Math.imul(I,J)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul($,J)|0,o=o+Math.imul($,Z)|0,i=i+Math.imul(T,Q)|0,n=(n=n+Math.imul(T,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(R,re)|0,n=(n=n+Math.imul(R,ie)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ie)|0,i=i+Math.imul(S,oe)|0,n=(n=n+Math.imul(S,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,i=i+Math.imul(v,ue)|0,n=(n=n+Math.imul(v,le)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,he)|0,n=(n=n+Math.imul(y,de)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,de)|0;var Re=(l+(i=i+Math.imul(p,pe)|0)|0)+((8191&(n=(n=n+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;l=((o=o+Math.imul(m,me)|0)+(n>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(q,V),n=(n=Math.imul(q,G))+Math.imul(j,V)|0,o=Math.imul(j,G),i=i+Math.imul(O,J)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Z)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,ee)|0)+Math.imul($,Q)|0,o=o+Math.imul($,ee)|0,i=i+Math.imul(T,re)|0,n=(n=n+Math.imul(T,ie)|0)+Math.imul(P,re)|0,o=o+Math.imul(P,ie)|0,i=i+Math.imul(R,oe)|0,n=(n=n+Math.imul(R,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,i=i+Math.imul(S,ue)|0,n=(n=n+Math.imul(S,le)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,le)|0,i=i+Math.imul(v,he)|0,n=(n=n+Math.imul(v,de)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,de)|0;var xe=(l+(i=i+Math.imul(y,pe)|0)|0)+((8191&(n=(n=n+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;l=((o=o+Math.imul(b,me)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(q,J),n=(n=Math.imul(q,Z))+Math.imul(j,J)|0,o=Math.imul(j,Z),i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,i=i+Math.imul(I,re)|0,n=(n=n+Math.imul(I,ie)|0)+Math.imul($,re)|0,o=o+Math.imul($,ie)|0,i=i+Math.imul(T,oe)|0,n=(n=n+Math.imul(T,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,i=i+Math.imul(R,ue)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,le)|0,i=i+Math.imul(S,he)|0,n=(n=n+Math.imul(S,de)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,de)|0;var ke=(l+(i=i+Math.imul(v,pe)|0)|0)+((8191&(n=(n=n+Math.imul(v,me)|0)+Math.imul(_,pe)|0))<<13)|0;l=((o=o+Math.imul(_,me)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(q,Q),n=(n=Math.imul(q,ee))+Math.imul(j,Q)|0,o=Math.imul(j,ee),i=i+Math.imul(O,re)|0,n=(n=n+Math.imul(O,ie)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ie)|0,i=i+Math.imul(I,oe)|0,n=(n=n+Math.imul(I,ae)|0)+Math.imul($,oe)|0,o=o+Math.imul($,ae)|0,i=i+Math.imul(T,ue)|0,n=(n=n+Math.imul(T,le)|0)+Math.imul(P,ue)|0,o=o+Math.imul(P,le)|0,i=i+Math.imul(R,he)|0,n=(n=n+Math.imul(R,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var Te=(l+(i=i+Math.imul(S,pe)|0)|0)+((8191&(n=(n=n+Math.imul(S,me)|0)+Math.imul(A,pe)|0))<<13)|0;l=((o=o+Math.imul(A,me)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(q,re),n=(n=Math.imul(q,ie))+Math.imul(j,re)|0,o=Math.imul(j,ie),i=i+Math.imul(O,oe)|0,n=(n=n+Math.imul(O,ae)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,ae)|0,i=i+Math.imul(I,ue)|0,n=(n=n+Math.imul(I,le)|0)+Math.imul($,ue)|0,o=o+Math.imul($,le)|0,i=i+Math.imul(T,he)|0,n=(n=n+Math.imul(T,de)|0)+Math.imul(P,he)|0,o=o+Math.imul(P,de)|0;var Pe=(l+(i=i+Math.imul(R,pe)|0)|0)+((8191&(n=(n=n+Math.imul(R,me)|0)+Math.imul(x,pe)|0))<<13)|0;l=((o=o+Math.imul(x,me)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(q,oe),n=(n=Math.imul(q,ae))+Math.imul(j,oe)|0,o=Math.imul(j,ae),i=i+Math.imul(O,ue)|0,n=(n=n+Math.imul(O,le)|0)+Math.imul(N,ue)|0,o=o+Math.imul(N,le)|0,i=i+Math.imul(I,he)|0,n=(n=n+Math.imul(I,de)|0)+Math.imul($,he)|0,o=o+Math.imul($,de)|0;var Ce=(l+(i=i+Math.imul(T,pe)|0)|0)+((8191&(n=(n=n+Math.imul(T,me)|0)+Math.imul(P,pe)|0))<<13)|0;l=((o=o+Math.imul(P,me)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(q,ue),n=(n=Math.imul(q,le))+Math.imul(j,ue)|0,o=Math.imul(j,le),i=i+Math.imul(O,he)|0,n=(n=n+Math.imul(O,de)|0)+Math.imul(N,he)|0,o=o+Math.imul(N,de)|0;var Ie=(l+(i=i+Math.imul(I,pe)|0)|0)+((8191&(n=(n=n+Math.imul(I,me)|0)+Math.imul($,pe)|0))<<13)|0;l=((o=o+Math.imul($,me)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(q,he),n=(n=Math.imul(q,de))+Math.imul(j,he)|0,o=Math.imul(j,de);var $e=(l+(i=i+Math.imul(O,pe)|0)|0)+((8191&(n=(n=n+Math.imul(O,me)|0)+Math.imul(N,pe)|0))<<13)|0;l=((o=o+Math.imul(N,me)|0)+(n>>>13)|0)+($e>>>26)|0,$e&=67108863;var Be=(l+(i=Math.imul(q,pe))|0)+((8191&(n=(n=Math.imul(q,me))+Math.imul(j,pe)|0))<<13)|0;return l=((o=Math.imul(j,me))+(n>>>13)|0)+(Be>>>26)|0,Be&=67108863,u[0]=ge,u[1]=ye,u[2]=be,u[3]=we,u[4]=ve,u[5]=_e,u[6]=Ee,u[7]=Se,u[8]=Ae,u[9]=Me,u[10]=Re,u[11]=xe,u[12]=ke,u[13]=Te,u[14]=Pe,u[15]=Ce,u[16]=Ie,u[17]=$e,u[18]=Be,0!==l&&(u[19]=l,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=d),n.prototype.mulTo=function(e,t){var r,i=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):i<63?d(this,e,t):i<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=u;l++){var c=o-l,h=(0|e.words[c])*(0|t.words[l]),d=67108863&h;s=67108863&(d=d+s|0),n+=(a=(a=a+(h/67108864|0)|0)+(d>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=n.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},m.prototype.permute=function(e,t,r,i,n,o){for(var a=0;a<o;a++)i[a]=t[e[a]],n[a]=r[e[a]]},m.prototype.transform=function(e,t,r,i,n,o){this.permute(o,e,t,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<n;c+=s)for(var h=u,d=l,f=0;f<a;f++){var p=r[c+f],m=i[c+f],g=r[c+f+a],y=i[c+f+a],b=h*g-d*y;y=h*y+d*g,g=b,r[c+f]=p+g,i[c+f]=m+y,r[c+f+a]=p-g,i[c+f+a]=m-y,f!==s&&(b=u*h-l*d,d=u*d+l*h,h=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},m.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},m.prototype.convert13b=function(e,t,i,n){for(var o=0,a=0;a<t;a++)o+=0|e[a],i[2*a]=8191&o,o>>>=13,i[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<n;++a)i[a]=0;r(0===o),r(!(-8192&o))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),l=new Array(i),c=new Array(i),h=new Array(i),d=r.words;d.length=i,this.convert13b(e.words,e.length,a,i),this.convert13b(t.words,t.length,l,i),this.transform(a,o,s,u,i,n),this.transform(l,o,c,h,i,n);for(var f=0;f<i;f++){var p=s[f]*c[f]-u[f]*h[f];u[f]=s[f]*h[f]+u[f]*c[f],s[f]=p}return this.conjugate(s,u,i),this.transform(s,u,d,o,i,n),this.conjugate(d,o,i),this.normalize13b(d,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},n.prototype.mul=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),p(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,i=0;i<this.length;i++){var n=(0|this.words[i])*e,o=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=o>>>26,this.words[i]=67108863&o}return 0!==t&&(this.words[i]=t,this.length++),this.length=0===e?1:this.length,this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}(e);if(0===t.length)return new n(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var o=r.sqr();i<t.length;i++,o=o.sqr())0!==t[i]&&(r=r.mul(o));return r},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,n=(e-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<i;this.words[t]=u|a,a=s>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){var n;r("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=i;if(n-=a,n=Math.max(0,n),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=n);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,n=1<<t;return!(this.length<=i||!(this.words[i]&n))},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var n,o,a=e.length+i;this._expand(a);var s=0;for(n=0;n<e.length;n++){o=(0|this.words[n+i])+s;var u=(0|e.words[n])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)s=(o=(0|this.words[n+i])+s)>>26,this.words[n+i]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),o=e,a=0|o.words[o.length-1];0!=(r=26-this._countBits(a))&&(o=o.ushln(r),i.iushln(r),a=0|o.words[o.length-1]);var s,u=i.length-o.length;if("mod"!==t){(s=new n(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(o,1,u);0===c.negative&&(i=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|i.words[o.length+h])+(0|i.words[o.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(o,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(o,1,h),i.isZero()||(i.negative^=1);s&&(s.words[h]=d)}return s&&s.strip(),i.strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},n.prototype.divmod=function(e,t,i){return r(!e.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,i=0,n=this.length-1;n>=0;n--)i=(t*i+(0|this.words[n]))%e;return i},n.prototype.idivn=function(e){r(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*t;this.words[i]=n/e|0,t=n%e}return this.strip()},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new n(1),a=new n(0),s=new n(0),u=new n(1),l=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++l;for(var c=i.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(c),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0===(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(i)>=0?(t.isub(i),o.isub(s),a.isub(u)):(i.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:i.iushln(l)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new n(1),s=new n(0),u=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,c=1;0===(t.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(t.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,d=1;0===(i.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(i)>=0?(t.isub(i),a.isub(s)):(i.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var o=t;t=r,r=o}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return!(1&this.words[0])},n.prototype.isOdd=function(){return!(1&~this.words[0])},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,a=i;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return-1===this.cmpn(e)},n.prototype.lt=function(e){return-1===this.cmp(e)},n.prototype.lten=function(e){return this.cmpn(e)<=0},n.prototype.lte=function(e){return this.cmp(e)<=0},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new E(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new n(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},i(b,y),b.prototype.split=function(e,t){for(var r=4194303,i=Math.min(e.length,9),n=0;n<i;n++)t.words[n]=e.words[n];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,n=10;n<e.length;n++){var a=0|e.words[n];e.words[n-10]=(a&r)<<4|o>>>22,o=a}o>>>=22,e.words[n-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,y),i(v,y),i(_,y),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new v;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return g[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);r(!o.isZero());var s=new n(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,o),d=this.pow(e,o.addn(1).iushrn(1)),f=this.pow(e,o),p=a;0!==f.cmp(s);){for(var m=f,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<p);var y=this.pow(h,new n(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new n(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var o=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],c=u-1;c>=0;c--){var h=l>>c&1;o!==r[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===i&&0===c)&&(o=this.mul(o,r[a]),s=0,a=0)):s=0}u=26}return o},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new S(e)},i(S,E),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(i).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$5,bn$4)),bn$5.exports}var api={},vmBrowserify={},hasRequiredVmBrowserify,hasRequiredApi;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,i=r.eval,n=r.execScript;!i&&n&&(n.call(r,"null"),i=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var o=Object_keys(r),a=i.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(o,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return e&&forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}}(vmBrowserify)),vmBrowserify}function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(e){var t=requireAsn1$1(),r=requireInherits_browser();function i(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}e.define=function(e,t){return new i(e,t)},i.prototype._createNamed=function(e){var t;try{t=requireVmBrowserify().runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(i){t=function(e){this._initNamed(e)}}return r(t,e),t.prototype._initNamed=function(t){e.call(this,t)},new t(this)},i.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(t.decoders[e])),this.decoders[e]},i.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},i.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(t.encoders[e])),this.encoders[e]},i.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}}(api)),api}var base$1={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var e=requireInherits_browser();function t(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function r(e,t){this.path=e,this.rethrow(t)}return reporter.Reporter=t,t.prototype.isError=function(e){return e instanceof r},t.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},t.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},t.prototype.enterKey=function(e){return this._reporterState.path.push(e)},t.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},t.prototype.leaveKey=function(e,t,r){var i=this._reporterState;this.exitKey(e),null!==i.obj&&(i.obj[t]=r)},t.prototype.path=function(){return this._reporterState.path.join("/")},t.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},t.prototype.leaveObject=function(e){var t=this._reporterState,r=t.obj;return t.obj=e,r},t.prototype.error=function(e){var t,i=this._reporterState,n=e instanceof r;if(t=n?e:new r(i.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!i.options.partial)throw t;return n||i.errors.push(t),t},t.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},e(r,Error),r.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this},reporter}var buffer={},hasRequiredBuffer,node,hasRequiredNode,hasRequiredBase$1;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var e=requireInherits_browser(),t=requireBase$1().Reporter,r=requireDist$2().Buffer;function i(e,i){t.call(this,i),r.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function n(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof n||(e=new n(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=r.byteLength(e);else{if(!r.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}return e(i,t),buffer.DecoderBuffer=i,i.prototype.save=function(){return{offset:this.offset,reporter:t.prototype.save.call(this)}},i.prototype.restore=function(e){var r=new i(this.base);return r.offset=e.offset,r.length=this.offset,this.offset=e.offset,t.prototype.restore.call(this,e.reporter),r},i.prototype.isEmpty=function(){return this.offset===this.length},i.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},i.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new i(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},i.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},buffer.EncoderBuffer=n,n.prototype.join=function(e,t){return e||(e=new r(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,t),t+=r.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):r.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e},buffer}function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var e=requireBase$1().Reporter,t=requireBase$1().EncoderBuffer,r=requireBase$1().DecoderBuffer,i=requireMinimalisticAssert(),n=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],o=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(n);function a(e,t){var r={};this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}node=a;var s=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return a.prototype.clone=function(){var e=this._baseState,t={};s.forEach(function(r){t[r]=e[r]});var r=new this.constructor(t.parent);return r._baseState=t,r},a.prototype._wrap=function(){var e=this._baseState;o.forEach(function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},a.prototype._init=function(e){var t=this._baseState;i(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),i.equal(t.children.length,1,"Root node can have only one child")},a.prototype._useArgs=function(e){var t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(i(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(i(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0);var i=e[r];t[i]=r}),t}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(e){a.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),n.forEach(function(e){a.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return i(null===t.tag),t.tag=e,this._useArgs(r),this}}),a.prototype.use=function(e){i(e);var t=this._baseState;return i(null===t.use),t.use=e,this},a.prototype.optional=function(){return this._baseState.optional=!0,this},a.prototype.def=function(e){var t=this._baseState;return i(null===t.default),t.default=e,t.optional=!0,this},a.prototype.explicit=function(e){var t=this._baseState;return i(null===t.explicit&&null===t.implicit),t.explicit=e,this},a.prototype.implicit=function(e){var t=this._baseState;return i(null===t.explicit&&null===t.implicit),t.implicit=e,this},a.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},a.prototype.key=function(e){var t=this._baseState;return i(null===t.key),t.key=e,this},a.prototype.any=function(){return this._baseState.any=!0,this},a.prototype.choice=function(e){var t=this._baseState;return i(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},a.prototype.contains=function(e){var t=this._baseState;return i(null===t.use),t.contains=e,this},a.prototype._decode=function(e,t){var i=this._baseState;if(null===i.parent)return e.wrapResult(i.children[0]._decode(e,t));var n,o=i.default,a=!0,s=null;if(null!==i.key&&(s=e.enterKey(i.key)),i.optional){var u=null;if(null!==i.explicit?u=i.explicit:null!==i.implicit?u=i.implicit:null!==i.tag&&(u=i.tag),null!==u||i.any){if(a=this._peekTag(e,u,i.any),e.isError(a))return a}else{var l=e.save();try{null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t),a=!0}catch(p){a=!1}e.restore(l)}}if(i.obj&&a&&(n=e.enterObject()),a){if(null!==i.explicit){var c=this._decodeTag(e,i.explicit);if(e.isError(c))return c;e=c}var h=e.offset;if(null===i.use&&null===i.choice){if(i.any)l=e.save();var d=this._decodeTag(e,null!==i.implicit?i.implicit:i.tag,i.any);if(e.isError(d))return d;i.any?o=e.raw(l):e=d}if(t&&t.track&&null!==i.tag&&t.track(e.path(),h,e.length,"tagged"),t&&t.track&&null!==i.tag&&t.track(e.path(),e.offset,e.length,"content"),i.any||(o=null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t)),e.isError(o))return o;if(i.any||null!==i.choice||null===i.children||i.children.forEach(function(r){r._decode(e,t)}),i.contains&&("octstr"===i.tag||"bitstr"===i.tag)){var f=new r(o);o=this._getUse(i.contains,e._reporterState.obj)._decode(f,t)}}return i.obj&&a&&(o=e.leaveObject(n)),null===i.key||null===o&&!0!==a?null!==s&&e.exitKey(s):e.leaveKey(s,i.key,o),o},a.prototype._decodeGeneric=function(e,t,r){var i=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,i.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&i.args?this._decodeObjid(t,i.args[0],i.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,i.args&&i.args[0],r):null!==i.use?this._getUse(i.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},a.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),i(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},a.prototype._decodeChoice=function(e,t){var r=this._baseState,i=null,n=!1;return Object.keys(r.choice).some(function(o){var a=e.save(),s=r.choice[o];try{var u=s._decode(e,t);if(e.isError(u))return!1;i={type:o,value:u},n=!0}catch(l){return e.restore(a),!1}return!0},this),n?i:e.error("Choice not matched")},a.prototype._createEncoderBuffer=function(e){return new t(e,this.reporter)},a.prototype._encode=function(e,t,r){var i=this._baseState;if(null===i.default||i.default!==e){var n=this._encodeValue(e,t,r);if(void 0!==n&&!this._skipDefault(n,t,r))return n}},a.prototype._encodeValue=function(t,r,i){var n=this._baseState;if(null===n.parent)return n.children[0]._encode(t,r||new e);var o=null;if(this.reporter=r,n.optional&&void 0===t){if(null===n.default)return;t=n.default}var a=null,s=!1;if(n.any)o=this._createEncoderBuffer(t);else if(n.choice)o=this._encodeChoice(t,r);else if(n.contains)a=this._getUse(n.contains,i)._encode(t,r),s=!0;else if(n.children)a=n.children.map(function(e){if("null_"===e._baseState.tag)return e._encode(null,r,t);if(null===e._baseState.key)return r.error("Child should have a key");var i=r.enterKey(e._baseState.key);if("object"!=typeof t)return r.error("Child expected, but input is not object");var n=e._encode(t[e._baseState.key],r,t);return r.leaveKey(i),n},this).filter(function(e){return e}),a=this._createEncoderBuffer(a);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return r.error("Too many args for : "+n.tag);if(!Array.isArray(t))return r.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,a=this._createEncoderBuffer(t.map(function(e){var i=this._baseState;return this._getUse(i.args[0],t)._encode(e,r)},u))}else null!==n.use?o=this._getUse(n.use,i)._encode(t,r):(a=this._encodePrimitive(n.tag,t),s=!0);if(!n.any&&null===n.choice){var l=null!==n.implicit?n.implicit:n.tag,c=null===n.implicit?"universal":"context";null===l?null===n.use&&r.error("Tag could be omitted only for .use()"):null===n.use&&(o=this._encodeComposite(l,s,c,a))}return null!==n.explicit&&(o=this._encodeComposite(n.explicit,!1,"context",o)),o},a.prototype._encodeChoice=function(e,t){var r=this._baseState,n=r.choice[e.type];return n||i(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},a.prototype._encodePrimitive=function(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},a.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},a.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)},node}function requireBase$1(){return hasRequiredBase$1||(hasRequiredBase$1=1,(e=base$1).Reporter=requireReporter().Reporter,e.DecoderBuffer=requireBuffer().DecoderBuffer,e.EncoderBuffer=requireBuffer().EncoderBuffer,e.Node=requireNode()),base$1;var e}var constants={},der={},hasRequiredDer$2,hasRequiredConstants;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,e=der,t=requireConstants(),e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=t._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=t._reverse(e.tag)),der;var e,t}function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,(e=constants)._reverse=function(e){var t={};return Object.keys(e).forEach(function(r){(0|r)==r&&(r|=0);var i=e[r];t[i]=r}),t},e.der=requireDer$2()),constants;var e}var decoders={},der_1$1,hasRequiredDer$1,pem$1,hasRequiredPem$1,hasRequiredDecoders;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var e=requireInherits_browser(),t=requireAsn1$1(),r=t.base,i=t.bignum,n=t.constants.der;function o(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new a,this.tree._init(e.body)}function a(e){r.Node.call(this,"der",e)}function s(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var i=n.tagClass[r>>6],o=!(32&r);if(31&~r)r&=31;else{var a=r;for(r=0;!(128&~a);){if(a=e.readUInt8(t),e.isError(a))return a;r<<=7,r|=127&a}}return{cls:i,primitive:o,tag:r,tagStr:n.tag[r]}}function u(e,t,r){var i=e.readUInt8(r);if(e.isError(i))return i;if(!t&&128===i)return null;if(!(128&i))return i;var n=127&i;if(n>4)return e.error("length octect is too long");i=0;for(var o=0;o<n;o++){i<<=8;var a=e.readUInt8(r);if(e.isError(a))return a;i|=a}return i}return der_1$1=o,o.prototype.decode=function(e,t){return e instanceof r.DecoderBuffer||(e=new r.DecoderBuffer(e,t)),this.tree._decode(e,t)},e(a,r.Node),a.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;var i=e.save(),n=s(e,'Failed to peek tag: "'+t+'"');return e.isError(n)?n:(e.restore(i),n.tag===t||n.tagStr===t||n.tagStr+"of"===t||r)},a.prototype._decodeTag=function(e,t,r){var i=s(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;var n=u(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(n))return n;if(!r&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||null!==n)return e.skip(n,'Failed to match body of: "'+t+'"');var o=e.save(),a=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(a)?a:(n=e.offset-o.offset,e.restore(o),e.skip(n,'Failed to match body of: "'+t+'"'))},a.prototype._skipUntilEnd=function(e,t){for(;;){var r=s(e,t);if(e.isError(r))return r;var i,n=u(e,r.primitive,t);if(e.isError(n))return n;if(i=r.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===r.tagStr)break}},a.prototype._decodeList=function(e,t,r,i){for(var n=[];!e.isEmpty();){var o=this._peekTag(e,"end");if(e.isError(o))return o;var a=r.decode(e,"der",i);if(e.isError(a)&&o)break;n.push(a)}return n},a.prototype._decodeStr=function(e,t){if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}if("bmpstr"===t){var i=e.raw();if(i.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");for(var n="",o=0;o<i.length/2;o++)n+=String.fromCharCode(i.readUInt16BE(2*o));return n}if("numstr"===t){var a=e.raw().toString("ascii");return this._isNumstr(a)?a:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var s=e.raw().toString("ascii");return this._isPrintstr(s)?s:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},a.prototype._decodeObjid=function(e,t,r){for(var i,n=[],o=0;!e.isEmpty();){var a=e.readUInt8();o<<=7,o|=127&a,128&a||(n.push(o),o=0)}128&a&&n.push(o);var s=n[0]/40|0,u=n[0]%40;if(i=r?n:[s,u].concat(n.slice(1)),t){var l=t[i.join(" ")];void 0===l&&(l=t[i.join(".")]),void 0!==l&&(i=l)}return i},a.prototype._decodeTime=function(e,t){var r=e.raw().toString();if("gentime"===t)var i=0|r.slice(0,4),n=0|r.slice(4,6),o=0|r.slice(6,8),a=0|r.slice(8,10),s=0|r.slice(10,12),u=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");i=0|r.slice(0,2),n=0|r.slice(2,4),o=0|r.slice(4,6),a=0|r.slice(6,8),s=0|r.slice(8,10),u=0|r.slice(10,12);i=i<70?2e3+i:1900+i}return Date.UTC(i,n-1,o,a,s,u,0)},a.prototype._decodeNull=function(e){return null},a.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},a.prototype._decodeInt=function(e,t){var r=e.raw(),n=new i(r);return t&&(n=t[n.toString(10)]||n),n},a.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree},der_1$1}function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var e=requireInherits_browser(),t=requireDist$2().Buffer,r=requireDer$1();function i(e){r.call(this,e),this.enc="pem"}return e(i,r),pem$1=i,i.prototype.decode=function(e,i){for(var n=e.toString().split(/[\r\n]+/g),o=i.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,u=-1,l=0;l<n.length;l++){var c=n[l].match(a);if(null!==c&&c[2]===o){if(-1!==s){if("END"!==c[1])break;u=l;break}if("BEGIN"!==c[1])break;s=l}}if(-1===s||-1===u)throw new Error("PEM section not found for: "+o);var h=n.slice(s+1,u).join("");h.replace(/[^a-z0-9\+\/=]+/gi,"");var d=new t(h,"base64");return r.prototype.decode.call(this,d,i)},pem$1}function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,(e=decoders).der=requireDer$1(),e.pem=requirePem$1()),decoders;var e}var encoders={},der_1,hasRequiredDer,pem,hasRequiredPem,hasRequiredEncoders,hasRequiredAsn1$1,certificate,hasRequiredCertificate,hasRequiredAsn1;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var e=requireInherits_browser(),t=requireDist$2().Buffer,r=requireAsn1$1(),i=r.base,n=r.constants.der;function o(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new a,this.tree._init(e.body)}function a(e){i.Node.call(this,"der",e)}function s(e){return e<10?"0"+e:e}return der_1=o,o.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},e(a,i.Node),a.prototype._encodeComposite=function(e,r,i,o){var a,s=function(e,t,r,i){var o;"seqof"===e?e="seq":"setof"===e&&(e="set");if(n.tagByName.hasOwnProperty(e))o=n.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return i.error("Unknown tag: "+e);o=e}if(o>=31)return i.error("Multi-octet tag encoding unsupported");t||(o|=32);return o|=n.tagClassByName[r||"universal"]<<6,o}(e,r,i,this.reporter);if(o.length<128)return(a=new t(2))[0]=s,a[1]=o.length,this._createEncoderBuffer([a,o]);for(var u=1,l=o.length;l>=256;l>>=8)u++;(a=new t(2+u))[0]=s,a[1]=128|u;l=1+u;for(var c=o.length;c>0;l--,c>>=8)a[l]=255&c;return this._createEncoderBuffer([a,o])},a.prototype._encodeStr=function(e,r){if("bitstr"===r)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===r){for(var i=new t(2*e.length),n=0;n<e.length;n++)i.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(i)}return"numstr"===r?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===r?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(r)||"objDesc"===r?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+r+" unsupported")},a.prototype._encodeObjid=function(e,r,i){if("string"==typeof e){if(!r)return this.reporter.error("string objid given, but no values map found");if(!r.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=r[e].split(/[\s\.]+/g);for(var n=0;n<e.length;n++)e[n]|=0}else if(Array.isArray(e)){e=e.slice();for(n=0;n<e.length;n++)e[n]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!i){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}var o=0;for(n=0;n<e.length;n++){var a=e[n];for(o++;a>=128;a>>=7)o++}var s=new t(o),u=s.length-1;for(n=e.length-1;n>=0;n--){a=e[n];for(s[u--]=127&a;(a>>=7)>0;)s[u--]=128|127&a}return this._createEncoderBuffer(s)},a.prototype._encodeTime=function(e,t){var r,i=new Date(e);return"gentime"===t?r=[s(i.getFullYear()),s(i.getUTCMonth()+1),s(i.getUTCDate()),s(i.getUTCHours()),s(i.getUTCMinutes()),s(i.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[s(i.getFullYear()%100),s(i.getUTCMonth()+1),s(i.getUTCDate()),s(i.getUTCHours()),s(i.getUTCMinutes()),s(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},a.prototype._encodeNull=function(){return this._createEncoderBuffer("")},a.prototype._encodeInt=function(e,r){if("string"==typeof e){if(!r)return this.reporter.error("String int or enum given, but no values map");if(!r.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=r[e]}if("number"!=typeof e&&!t.isBuffer(e)){var i=e.toArray();!e.sign&&128&i[0]&&i.unshift(0),e=new t(i)}if(t.isBuffer(e)){var n=e.length;0===e.length&&n++;var o=new t(n);return e.copy(o),0===e.length&&(o[0]=0),this._createEncoderBuffer(o)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);n=1;for(var a=e;a>=256;a>>=8)n++;for(a=(o=new Array(n)).length-1;a>=0;a--)o[a]=255&e,e>>=8;return 128&o[0]&&o.unshift(0),this._createEncoderBuffer(new t(o))},a.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},a.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},a.prototype._skipDefault=function(e,t,r){var i,n=this._baseState;if(null===n.default)return!1;var o=e.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,t,r).join()),o.length!==n.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return!1;return!0},der_1}function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var e=requireInherits_browser(),t=requireDer();function r(e){t.call(this,e),this.enc="pem"}return e(r,t),pem=r,r.prototype.encode=function(e,r){for(var i=t.prototype.encode.call(this,e).toString("base64"),n=["-----BEGIN "+r.label+"-----"],o=0;o<i.length;o+=64)n.push(i.slice(o,o+64));return n.push("-----END "+r.label+"-----"),n.join("\n")},pem}function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,(e=encoders).der=requireDer(),e.pem=requirePem()),encoders;var e}function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,(e=asn1).bignum=requireBn$2(),e.define=requireApi().define,e.base=requireBase$1(),e.constants=requireConstants(),e.decoders=requireDecoders(),e.encoders=requireEncoders()),asn1;var e}function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var e=requireAsn1$1(),t=e.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),r=e.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),i=e.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),n=e.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(i),this.key("subjectPublicKey").bitstr())}),o=e.define("RelativeDistinguishedName",function(){this.setof(r)}),a=e.define("RDNSequence",function(){this.seqof(o)}),s=e.define("Name",function(){this.choice({rdnSequence:this.use(a)})}),u=e.define("Validity",function(){this.seq().obj(this.key("notBefore").use(t),this.key("notAfter").use(t))}),l=e.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),c=e.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(i),this.key("issuer").use(s),this.key("validity").use(u),this.key("subject").use(s),this.key("subjectPublicKeyInfo").use(n),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(l).optional())}),h=e.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(c),this.key("signatureAlgorithm").use(i),this.key("signatureValue").bitstr())});return certificate=h}function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var e=requireAsn1$1();asn1$1.certificate=requireCertificate();var t=e.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=t;var r=e.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=r;var i=e.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),n=e.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(i),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=n;var o=e.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(i),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=o;var a=e.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=a;var s=e.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=s,asn1$1.DSAparam=e.define("DSAparam",function(){this.int()});var u=e.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),l=e.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(u),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=l,asn1$1.signature=e.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc,parseAsn1,hasRequiredParseAsn1;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var e=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,t=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,i=requireEvp_bytestokey(),n=requireBrowser$9(),o=requireSafeBuffer$2().Buffer;return fixProc=function(a,s){var u,l=a.toString(),c=l.match(e);if(c){var h="aes"+c[1],d=o.from(c[2],"hex"),f=o.from(c[3].replace(/[\r\n]/g,""),"base64"),p=i(s,d.slice(0,8),parseInt(c[1],10)).key,m=[],g=n.createDecipheriv(h,p,d);m.push(g.update(f)),m.push(g.final()),u=o.concat(m)}else{var y=l.match(r);u=o.from(y[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(t)[1],data:u}}}function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var e=requireAsn1(),t=require$$1,r=requireFixProc(),i=requireBrowser$9(),n=requireBrowser$a().pbkdf2Sync,o=requireSafeBuffer$2().Buffer;function a(a){var s;"object"!=typeof a||o.isBuffer(a)||(s=a.passphrase,a=a.key),"string"==typeof a&&(a=o.from(a));var u,l,c=r(a,s),h=c.tag,d=c.data;switch(h){case"CERTIFICATE":l=e.certificate.decode(d,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=e.PublicKey.decode(d,"der")),u=l.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return e.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=e.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+u)}case"ENCRYPTED PRIVATE KEY":d=function(e,r){var a=e.algorithm.decrypt.kde.kdeparams.salt,s=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),u=t[e.algorithm.decrypt.cipher.algo.join(".")],l=e.algorithm.decrypt.cipher.iv,c=e.subjectPrivateKey,h=parseInt(u.split("-")[1],10)/8,d=n(r,a,s,h,"sha1"),f=i.createDecipheriv(u,d,l),p=[];return p.push(f.update(c)),p.push(f.final()),o.concat(p)}(d=e.EncryptedPrivateKey.decode(d,"der"),s);case"PRIVATE KEY":switch(u=(l=e.PrivateKey.decode(d,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return e.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:e.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=e.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+u)}case"RSA PUBLIC KEY":return e.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return e.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:e.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return{curve:(d=e.ECPrivateKey.decode(d,"der")).parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+h)}}return a.signature=e.signature,parseAsn1=a}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign,verify_1,hasRequiredVerify,browser$6,hasRequiredBrowser$6;function requireSign(){if(hasRequiredSign)return sign$4.exports;hasRequiredSign=1;var e=requireSafeBuffer$2().Buffer,t=requireBrowser$b(),r=requireBrowserifyRsa(),i=requireElliptic().ec,n=requireBn$6(),o=requireParseAsn1(),a=require$$4;function s(r,i,n,o){if((r=e.from(r.toArray())).length<i.byteLength()){var a=e.alloc(i.byteLength()-r.length);r=e.concat([a,r])}var s=n.length,l=function(t,r){t=u(t,r),t=t.mod(r);var i=e.from(t.toArray());if(i.length<r.byteLength()){var n=e.alloc(r.byteLength()-i.length);i=e.concat([n,i])}return i}(n,i),c=e.alloc(s);c.fill(1);var h=e.alloc(s);return h=t(o,h).update(c).update(e.from([0])).update(r).update(l).digest(),c=t(o,h).update(c).digest(),{k:h=t(o,h).update(c).update(e.from([1])).update(r).update(l).digest(),v:c=t(o,h).update(c).digest()}}function u(e,t){var r=new n(e),i=(e.length<<3)-t.bitLength();return i>0&&r.ishrn(i),r}function l(r,i,n){var o,a;do{for(o=e.alloc(0);8*o.length<r.bitLength();)i.v=t(n,i.k).update(i.v).digest(),o=e.concat([o,i.v]);a=u(o,r),i.k=t(n,i.k).update(i.v).update(e.from([0])).digest(),i.v=t(n,i.k).update(i.v).digest()}while(-1!==a.cmp(r));return a}function c(e,t,r,i){return e.toRed(n.mont(r)).redPow(t).fromRed().mod(i)}return sign$4.exports=function(t,h,d,f,p){var m=o(h);if(m.curve){if("ecdsa"!==f&&"ecdsa/rsa"!==f)throw new Error("wrong private key type");return function(t,r){var n=a[r.curve.join(".")];if(!n)throw new Error("unknown curve "+r.curve.join("."));var o=new i(n).keyFromPrivate(r.privateKey),s=o.sign(t);return e.from(s.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==f)throw new Error("wrong private key type");return function(t,r,i){var o,a=r.params.priv_key,h=r.params.p,d=r.params.q,f=r.params.g,p=new n(0),m=u(t,d).mod(d),g=!1,y=s(a,d,t,i);for(;!1===g;)p=c(f,o=l(d,y,i),h,d),0===(g=o.invm(d).imul(m.add(a.mul(p))).mod(d)).cmpn(0)&&(g=!1,p=new n(0));return function(t,r){t=t.toArray(),r=r.toArray(),128&t[0]&&(t=[0].concat(t));128&r[0]&&(r=[0].concat(r));var i=t.length+r.length+4,n=[48,i,2,t.length];return n=n.concat(t,[2,r.length],r),e.from(n)}(p,g)}(t,m,d)}if("rsa"!==f&&"ecdsa/rsa"!==f)throw new Error("wrong private key type");if(void 0!==h.padding&&1!==h.padding)throw new Error("illegal or unsupported padding mode");t=e.concat([p,t]);for(var g=m.modulus.byteLength(),y=[0,1];t.length+y.length+1<g;)y.push(255);y.push(0);for(var b=-1;++b<t.length;)y.push(t[b]);return r(y,m)},sign$4.exports.getKey=s,sign$4.exports.makeKey=l,sign$4.exports}function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var e=requireSafeBuffer$2().Buffer,t=requireBn$6(),r=requireElliptic().ec,i=requireParseAsn1(),n=require$$4;function o(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=0)throw new Error("invalid sig")}return verify_1=function(a,s,u,l,c){var h=i(u);if("ec"===h.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(e,t,i){var o=n[i.data.algorithm.curve.join(".")];if(!o)throw new Error("unknown curve "+i.data.algorithm.curve.join("."));var a=new r(o),s=i.data.subjectPrivateKey.data;return a.verify(t,e,s)}(a,s,h)}if("dsa"===h.type){if("dsa"!==l)throw new Error("wrong public key type");return function(e,r,n){var a=n.data.p,s=n.data.q,u=n.data.g,l=n.data.pub_key,c=i.signature.decode(e,"der"),h=c.s,d=c.r;o(h,s),o(d,s);var f=t.mont(a),p=h.invm(s),m=u.toRed(f).redPow(new t(r).mul(p).mod(s)).fromRed().mul(l.toRed(f).redPow(d.mul(p).mod(s)).fromRed()).mod(a).mod(s);return 0===m.cmp(d)}(a,s,h)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");s=e.concat([c,s]);for(var d=h.modulus.byteLength(),f=[1],p=0;s.length+f.length+2<d;)f.push(255),p+=1;f.push(0);for(var m=-1;++m<s.length;)f.push(s[m]);f=e.from(f);var g=t.mont(h.modulus);a=(a=new t(a).toRed(g)).redPow(new t(h.publicExponent)),a=e.from(a.fromRed().toArray());var y=p<8?1:0;for(d=Math.min(a.length,f.length),a.length!==f.length&&(y=1),m=-1;++m<d;)y|=a[m]^f[m];return 0===y}}function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$6;hasRequiredBrowser$6=1;var e=requireSafeBuffer$2().Buffer,t=requireBrowser$c(),r=requireReadableBrowser(),i=requireInherits_browser(),n=requireSign(),o=requireVerify(),a=require$$6;function s(e){r.Writable.call(this);var i=a[e];if(!i)throw new Error("Unknown message digest");this._hashType=i.hash,this._hash=t(i.hash),this._tag=i.id,this._signType=i.sign}function u(e){r.Writable.call(this);var i=a[e];if(!i)throw new Error("Unknown message digest");this._hash=t(i.hash),this._tag=i.id,this._signType=i.sign}function l(e){return new s(e)}function c(e){return new u(e)}return Object.keys(a).forEach(function(t){a[t].id=e.from(a[t].id,"hex"),a[t.toLowerCase()]=a[t]}),i(s,r.Writable),s.prototype._write=function(e,t,r){this._hash.update(e),r()},s.prototype.update=function(t,r){return this._hash.update("string"==typeof t?e.from(t,r):t),this},s.prototype.sign=function(e,t){this.end();var r=this._hash.digest(),i=n(r,e,this._hashType,this._signType,this._tag);return t?i.toString(t):i},i(u,r.Writable),u.prototype._write=function(e,t,r){this._hash.update(e),r()},u.prototype.update=function(t,r){return this._hash.update("string"==typeof t?e.from(t,r):t),this},u.prototype.verify=function(t,r,i){var n="string"==typeof r?e.from(r,i):r;this.end();var a=this._hash.digest();return o(n,a,t,this._signType,this._tag)},browser$6={Sign:l,Verify:c,createSign:l,createVerify:c}}var bn$3={exports:{}},bn$2=bn$3.exports,hasRequiredBn$1,browser$5,hasRequiredBrowser$5;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$2().Buffer}catch(A){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function s(e,t,r){var i=a(e,r);return r-1>=t&&(i|=a(e,r-1)<<4),i}function u(e,t,r,i){for(var n=0,o=Math.min(e.length,r),a=t;a<o;a++){var s=e.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return e.cmp(t)<0?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,i):(this._parseBase(e,t,n),"le"===i&&this._initArray(this.toArray(),t,i)))},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===i)for(n=e.length-1,o=0;n>=0;n-=3)a=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===i)for(n=0,o=0;n<e.length;n+=3)a=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},n.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o=0,a=0;if("be"===r)for(i=e.length-1;i>=t;i-=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;this.strip()},n.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var o=e.length-r,a=o%i,s=Math.min(o,o-a)+r,l=0,c=r;c<s;c+=i)l=u(e,c,c+i,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var h=1;for(l=u(e,c,e.length,t),c=0;c<a;c++)h*=t;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},n.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],o=0|t.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<i;l++){for(var c=u>>>26,h=67108863&u,d=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=d;f++){var p=l-f|0;c+=(a=(n=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}n.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);o=s>>>24-n&16777215,(n+=2)>=26&&(n-=26,a--),i=0!==o||a!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var d=c[e],f=h[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:l[d-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},n.prototype.toArrayLike=function(e,t,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,l=new e(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-n;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},n.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},n.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},n.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,n=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},n.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++)t=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&t,n=t>>>26;for(;0!==n&&o<r.length;o++)t=(0|r.words[o])+n,this.words[o]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var o=0,a=0;a<i.length;a++)o=(t=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var i,n,o,a=e.words,s=t.words,u=r.words,l=0,c=0|a[0],h=8191&c,d=c>>>13,f=0|a[1],p=8191&f,m=f>>>13,g=0|a[2],y=8191&g,b=g>>>13,w=0|a[3],v=8191&w,_=w>>>13,E=0|a[4],S=8191&E,A=E>>>13,M=0|a[5],R=8191&M,x=M>>>13,k=0|a[6],T=8191&k,P=k>>>13,C=0|a[7],I=8191&C,$=C>>>13,B=0|a[8],O=8191&B,N=B>>>13,L=0|a[9],q=8191&L,j=L>>>13,U=0|s[0],D=8191&U,F=U>>>13,W=0|s[1],K=8191&W,H=W>>>13,z=0|s[2],V=8191&z,G=z>>>13,Y=0|s[3],J=8191&Y,Z=Y>>>13,X=0|s[4],Q=8191&X,ee=X>>>13,te=0|s[5],re=8191&te,ie=te>>>13,ne=0|s[6],oe=8191&ne,ae=ne>>>13,se=0|s[7],ue=8191&se,le=se>>>13,ce=0|s[8],he=8191&ce,de=ce>>>13,fe=0|s[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(l+(i=Math.imul(h,D))|0)+((8191&(n=(n=Math.imul(h,F))+Math.imul(d,D)|0))<<13)|0;l=((o=Math.imul(d,F))+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,D),n=(n=Math.imul(p,F))+Math.imul(m,D)|0,o=Math.imul(m,F);var ye=(l+(i=i+Math.imul(h,K)|0)|0)+((8191&(n=(n=n+Math.imul(h,H)|0)+Math.imul(d,K)|0))<<13)|0;l=((o=o+Math.imul(d,H)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(y,D),n=(n=Math.imul(y,F))+Math.imul(b,D)|0,o=Math.imul(b,F),i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,H)|0;var be=(l+(i=i+Math.imul(h,V)|0)|0)+((8191&(n=(n=n+Math.imul(h,G)|0)+Math.imul(d,V)|0))<<13)|0;l=((o=o+Math.imul(d,G)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(v,D),n=(n=Math.imul(v,F))+Math.imul(_,D)|0,o=Math.imul(_,F),i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(b,K)|0,o=o+Math.imul(b,H)|0,i=i+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,G)|0;var we=(l+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;l=((o=o+Math.imul(d,Z)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(S,D),n=(n=Math.imul(S,F))+Math.imul(A,D)|0,o=Math.imul(A,F),i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,H)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,H)|0,i=i+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(b,V)|0,o=o+Math.imul(b,G)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var ve=(l+(i=i+Math.imul(h,Q)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;l=((o=o+Math.imul(d,ee)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(R,D),n=(n=Math.imul(R,F))+Math.imul(x,D)|0,o=Math.imul(x,F),i=i+Math.imul(S,K)|0,n=(n=n+Math.imul(S,H)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,H)|0,i=i+Math.imul(v,V)|0,n=(n=n+Math.imul(v,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,i=i+Math.imul(y,J)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0;var _e=(l+(i=i+Math.imul(h,re)|0)|0)+((8191&(n=(n=n+Math.imul(h,ie)|0)+Math.imul(d,re)|0))<<13)|0;l=((o=o+Math.imul(d,ie)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(T,D),n=(n=Math.imul(T,F))+Math.imul(P,D)|0,o=Math.imul(P,F),i=i+Math.imul(R,K)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,H)|0,i=i+Math.imul(S,V)|0,n=(n=n+Math.imul(S,G)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,G)|0,i=i+Math.imul(v,J)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0,i=i+Math.imul(p,re)|0,n=(n=n+Math.imul(p,ie)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ie)|0;var Ee=(l+(i=i+Math.imul(h,oe)|0)|0)+((8191&(n=(n=n+Math.imul(h,ae)|0)+Math.imul(d,oe)|0))<<13)|0;l=((o=o+Math.imul(d,ae)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(I,D),n=(n=Math.imul(I,F))+Math.imul($,D)|0,o=Math.imul($,F),i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,H)|0,i=i+Math.imul(R,V)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,G)|0,i=i+Math.imul(S,J)|0,n=(n=n+Math.imul(S,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,i=i+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,i=i+Math.imul(y,re)|0,n=(n=n+Math.imul(y,ie)|0)+Math.imul(b,re)|0,o=o+Math.imul(b,ie)|0,i=i+Math.imul(p,oe)|0,n=(n=n+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(l+(i=i+Math.imul(h,ue)|0)|0)+((8191&(n=(n=n+Math.imul(h,le)|0)+Math.imul(d,ue)|0))<<13)|0;l=((o=o+Math.imul(d,le)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(O,D),n=(n=Math.imul(O,F))+Math.imul(N,D)|0,o=Math.imul(N,F),i=i+Math.imul(I,K)|0,n=(n=n+Math.imul(I,H)|0)+Math.imul($,K)|0,o=o+Math.imul($,H)|0,i=i+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,G)|0,i=i+Math.imul(R,J)|0,n=(n=n+Math.imul(R,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,i=i+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,i=i+Math.imul(v,re)|0,n=(n=n+Math.imul(v,ie)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,n=(n=n+Math.imul(y,ae)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,ae)|0,i=i+Math.imul(p,ue)|0,n=(n=n+Math.imul(p,le)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,le)|0;var Ae=(l+(i=i+Math.imul(h,he)|0)|0)+((8191&(n=(n=n+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;l=((o=o+Math.imul(d,de)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(q,D),n=(n=Math.imul(q,F))+Math.imul(j,D)|0,o=Math.imul(j,F),i=i+Math.imul(O,K)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,H)|0,i=i+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul($,V)|0,o=o+Math.imul($,G)|0,i=i+Math.imul(T,J)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Z)|0,i=i+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,i=i+Math.imul(S,re)|0,n=(n=n+Math.imul(S,ie)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ie)|0,i=i+Math.imul(v,oe)|0,n=(n=n+Math.imul(v,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,i=i+Math.imul(y,ue)|0,n=(n=n+Math.imul(y,le)|0)+Math.imul(b,ue)|0,o=o+Math.imul(b,le)|0,i=i+Math.imul(p,he)|0,n=(n=n+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Me=(l+(i=i+Math.imul(h,pe)|0)|0)+((8191&(n=(n=n+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;l=((o=o+Math.imul(d,me)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(q,K),n=(n=Math.imul(q,H))+Math.imul(j,K)|0,o=Math.imul(j,H),i=i+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,G)|0,i=i+Math.imul(I,J)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul($,J)|0,o=o+Math.imul($,Z)|0,i=i+Math.imul(T,Q)|0,n=(n=n+Math.imul(T,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(R,re)|0,n=(n=n+Math.imul(R,ie)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ie)|0,i=i+Math.imul(S,oe)|0,n=(n=n+Math.imul(S,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,i=i+Math.imul(v,ue)|0,n=(n=n+Math.imul(v,le)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,he)|0,n=(n=n+Math.imul(y,de)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,de)|0;var Re=(l+(i=i+Math.imul(p,pe)|0)|0)+((8191&(n=(n=n+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;l=((o=o+Math.imul(m,me)|0)+(n>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(q,V),n=(n=Math.imul(q,G))+Math.imul(j,V)|0,o=Math.imul(j,G),i=i+Math.imul(O,J)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Z)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,ee)|0)+Math.imul($,Q)|0,o=o+Math.imul($,ee)|0,i=i+Math.imul(T,re)|0,n=(n=n+Math.imul(T,ie)|0)+Math.imul(P,re)|0,o=o+Math.imul(P,ie)|0,i=i+Math.imul(R,oe)|0,n=(n=n+Math.imul(R,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,i=i+Math.imul(S,ue)|0,n=(n=n+Math.imul(S,le)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,le)|0,i=i+Math.imul(v,he)|0,n=(n=n+Math.imul(v,de)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,de)|0;var xe=(l+(i=i+Math.imul(y,pe)|0)|0)+((8191&(n=(n=n+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;l=((o=o+Math.imul(b,me)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(q,J),n=(n=Math.imul(q,Z))+Math.imul(j,J)|0,o=Math.imul(j,Z),i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,i=i+Math.imul(I,re)|0,n=(n=n+Math.imul(I,ie)|0)+Math.imul($,re)|0,o=o+Math.imul($,ie)|0,i=i+Math.imul(T,oe)|0,n=(n=n+Math.imul(T,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,i=i+Math.imul(R,ue)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,le)|0,i=i+Math.imul(S,he)|0,n=(n=n+Math.imul(S,de)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,de)|0;var ke=(l+(i=i+Math.imul(v,pe)|0)|0)+((8191&(n=(n=n+Math.imul(v,me)|0)+Math.imul(_,pe)|0))<<13)|0;l=((o=o+Math.imul(_,me)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(q,Q),n=(n=Math.imul(q,ee))+Math.imul(j,Q)|0,o=Math.imul(j,ee),i=i+Math.imul(O,re)|0,n=(n=n+Math.imul(O,ie)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ie)|0,i=i+Math.imul(I,oe)|0,n=(n=n+Math.imul(I,ae)|0)+Math.imul($,oe)|0,o=o+Math.imul($,ae)|0,i=i+Math.imul(T,ue)|0,n=(n=n+Math.imul(T,le)|0)+Math.imul(P,ue)|0,o=o+Math.imul(P,le)|0,i=i+Math.imul(R,he)|0,n=(n=n+Math.imul(R,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var Te=(l+(i=i+Math.imul(S,pe)|0)|0)+((8191&(n=(n=n+Math.imul(S,me)|0)+Math.imul(A,pe)|0))<<13)|0;l=((o=o+Math.imul(A,me)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(q,re),n=(n=Math.imul(q,ie))+Math.imul(j,re)|0,o=Math.imul(j,ie),i=i+Math.imul(O,oe)|0,n=(n=n+Math.imul(O,ae)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,ae)|0,i=i+Math.imul(I,ue)|0,n=(n=n+Math.imul(I,le)|0)+Math.imul($,ue)|0,o=o+Math.imul($,le)|0,i=i+Math.imul(T,he)|0,n=(n=n+Math.imul(T,de)|0)+Math.imul(P,he)|0,o=o+Math.imul(P,de)|0;var Pe=(l+(i=i+Math.imul(R,pe)|0)|0)+((8191&(n=(n=n+Math.imul(R,me)|0)+Math.imul(x,pe)|0))<<13)|0;l=((o=o+Math.imul(x,me)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(q,oe),n=(n=Math.imul(q,ae))+Math.imul(j,oe)|0,o=Math.imul(j,ae),i=i+Math.imul(O,ue)|0,n=(n=n+Math.imul(O,le)|0)+Math.imul(N,ue)|0,o=o+Math.imul(N,le)|0,i=i+Math.imul(I,he)|0,n=(n=n+Math.imul(I,de)|0)+Math.imul($,he)|0,o=o+Math.imul($,de)|0;var Ce=(l+(i=i+Math.imul(T,pe)|0)|0)+((8191&(n=(n=n+Math.imul(T,me)|0)+Math.imul(P,pe)|0))<<13)|0;l=((o=o+Math.imul(P,me)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(q,ue),n=(n=Math.imul(q,le))+Math.imul(j,ue)|0,o=Math.imul(j,le),i=i+Math.imul(O,he)|0,n=(n=n+Math.imul(O,de)|0)+Math.imul(N,he)|0,o=o+Math.imul(N,de)|0;var Ie=(l+(i=i+Math.imul(I,pe)|0)|0)+((8191&(n=(n=n+Math.imul(I,me)|0)+Math.imul($,pe)|0))<<13)|0;l=((o=o+Math.imul($,me)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(q,he),n=(n=Math.imul(q,de))+Math.imul(j,he)|0,o=Math.imul(j,de);var $e=(l+(i=i+Math.imul(O,pe)|0)|0)+((8191&(n=(n=n+Math.imul(O,me)|0)+Math.imul(N,pe)|0))<<13)|0;l=((o=o+Math.imul(N,me)|0)+(n>>>13)|0)+($e>>>26)|0,$e&=67108863;var Be=(l+(i=Math.imul(q,pe))|0)+((8191&(n=(n=Math.imul(q,me))+Math.imul(j,pe)|0))<<13)|0;return l=((o=Math.imul(j,me))+(n>>>13)|0)+(Be>>>26)|0,Be&=67108863,u[0]=ge,u[1]=ye,u[2]=be,u[3]=we,u[4]=ve,u[5]=_e,u[6]=Ee,u[7]=Se,u[8]=Ae,u[9]=Me,u[10]=Re,u[11]=xe,u[12]=ke,u[13]=Te,u[14]=Pe,u[15]=Ce,u[16]=Ie,u[17]=$e,u[18]=Be,0!==l&&(u[19]=l,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=d),n.prototype.mulTo=function(e,t){var r,i=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):i<63?d(this,e,t):i<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=u;l++){var c=o-l,h=(0|e.words[c])*(0|t.words[l]),d=67108863&h;s=67108863&(d=d+s|0),n+=(a=(a=a+(h/67108864|0)|0)+(d>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=n.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},m.prototype.permute=function(e,t,r,i,n,o){for(var a=0;a<o;a++)i[a]=t[e[a]],n[a]=r[e[a]]},m.prototype.transform=function(e,t,r,i,n,o){this.permute(o,e,t,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<n;c+=s)for(var h=u,d=l,f=0;f<a;f++){var p=r[c+f],m=i[c+f],g=r[c+f+a],y=i[c+f+a],b=h*g-d*y;y=h*y+d*g,g=b,r[c+f]=p+g,i[c+f]=m+y,r[c+f+a]=p-g,i[c+f+a]=m-y,f!==s&&(b=u*h-l*d,d=u*d+l*h,h=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},m.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},m.prototype.convert13b=function(e,t,i,n){for(var o=0,a=0;a<t;a++)o+=0|e[a],i[2*a]=8191&o,o>>>=13,i[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<n;++a)i[a]=0;r(0===o),r(!(-8192&o))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),l=new Array(i),c=new Array(i),h=new Array(i),d=r.words;d.length=i,this.convert13b(e.words,e.length,a,i),this.convert13b(t.words,t.length,l,i),this.transform(a,o,s,u,i,n),this.transform(l,o,c,h,i,n);for(var f=0;f<i;f++){var p=s[f]*c[f]-u[f]*h[f];u[f]=s[f]*h[f]+u[f]*c[f],s[f]=p}return this.conjugate(s,u,i),this.transform(s,u,d,o,i,n),this.conjugate(d,o,i),this.normalize13b(d,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},n.prototype.mul=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),p(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,i=0;i<this.length;i++){var n=(0|this.words[i])*e,o=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=o>>>26,this.words[i]=67108863&o}return 0!==t&&(this.words[i]=t,this.length++),this.length=0===e?1:this.length,this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}(e);if(0===t.length)return new n(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var o=r.sqr();i<t.length;i++,o=o.sqr())0!==t[i]&&(r=r.mul(o));return r},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,n=(e-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<i;this.words[t]=u|a,a=s>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){var n;r("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=i;if(n-=a,n=Math.max(0,n),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=n);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,n=1<<t;return!(this.length<=i||!(this.words[i]&n))},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var n,o,a=e.length+i;this._expand(a);var s=0;for(n=0;n<e.length;n++){o=(0|this.words[n+i])+s;var u=(0|e.words[n])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)s=(o=(0|this.words[n+i])+s)>>26,this.words[n+i]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),o=e,a=0|o.words[o.length-1];0!=(r=26-this._countBits(a))&&(o=o.ushln(r),i.iushln(r),a=0|o.words[o.length-1]);var s,u=i.length-o.length;if("mod"!==t){(s=new n(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(o,1,u);0===c.negative&&(i=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|i.words[o.length+h])+(0|i.words[o.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(o,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(o,1,h),i.isZero()||(i.negative^=1);s&&(s.words[h]=d)}return s&&s.strip(),i.strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},n.prototype.divmod=function(e,t,i){return r(!e.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,i=0,n=this.length-1;n>=0;n--)i=(t*i+(0|this.words[n]))%e;return i},n.prototype.idivn=function(e){r(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*t;this.words[i]=n/e|0,t=n%e}return this.strip()},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new n(1),a=new n(0),s=new n(0),u=new n(1),l=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++l;for(var c=i.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(c),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0===(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(i)>=0?(t.isub(i),o.isub(s),a.isub(u)):(i.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:i.iushln(l)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new n(1),s=new n(0),u=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,c=1;0===(t.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(t.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,d=1;0===(i.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(i)>=0?(t.isub(i),a.isub(s)):(i.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var o=t;t=r,r=o}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return!(1&this.words[0])},n.prototype.isOdd=function(){return!(1&~this.words[0])},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,a=i;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return-1===this.cmpn(e)},n.prototype.lt=function(e){return-1===this.cmp(e)},n.prototype.lten=function(e){return this.cmpn(e)<=0},n.prototype.lte=function(e){return this.cmp(e)<=0},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new E(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new n(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},i(b,y),b.prototype.split=function(e,t){for(var r=4194303,i=Math.min(e.length,9),n=0;n<i;n++)t.words[n]=e.words[n];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,n=10;n<e.length;n++){var a=0|e.words[n];e.words[n-10]=(a&r)<<4|o>>>22,o=a}o>>>=22,e.words[n-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,y),i(v,y),i(_,y),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new v;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return g[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);r(!o.isZero());var s=new n(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,o),d=this.pow(e,o.addn(1).iushrn(1)),f=this.pow(e,o),p=a;0!==f.cmp(s);){for(var m=f,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<p);var y=this.pow(h,new n(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new n(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var o=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],c=u-1;c>=0;c--){var h=l>>c&1;o!==r[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===i&&0===c)&&(o=this.mul(o,r[a]),s=0,a=0)):s=0}u=26}return o},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new S(e)},i(S,E),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(i).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$3,bn$2)),bn$3.exports}function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$5;hasRequiredBrowser$5=1;var e=requireElliptic(),t=requireBn$1();browser$5=function(e){return new i(e)};var r={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function i(t){this.curveType=r[t],this.curveType||(this.curveType={name:t}),this.curve=new e.ec(this.curveType.name),this.keys=void 0}function n(e,t,r){Array.isArray(e)||(e=e.toArray());var i=new Buffer(e);if(r&&i.length<r){var n=new Buffer(r-i.length);n.fill(0),i=Buffer.concat([n,i])}return t?i.toString(t):i}return r.p224=r.secp224r1,r.p256=r.secp256r1=r.prime256v1,r.p192=r.secp192r1=r.prime192v1,r.p384=r.secp384r1,r.p521=r.secp521r1,i.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},i.prototype.computeSecret=function(e,t,r){return t=t||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,t)),n(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},i.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),n(r,e)},i.prototype.getPrivateKey=function(e){return n(this.keys.getPrivate(),e)},i.prototype.setPublicKey=function(e,t){return t=t||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,t)),this.keys._importPublic(e),this},i.prototype.setPrivateKey=function(e,r){r=r||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,r));var i=new t(e);return i=i.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(i),this},browser$5}var browser$4={},mgf,hasRequiredMgf,xor,hasRequiredXor;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var e=requireBrowser$c(),t=requireSafeBuffer$2().Buffer;function r(e){var r=t.allocUnsafe(4);return r.writeUInt32BE(e,0),r}return mgf=function(i,n){for(var o,a=t.alloc(0),s=0;a.length<n;)o=r(s++),a=t.concat([a,e("sha1").update(i).update(o).digest()]);return a.slice(0,n)}}function requireXor(){return hasRequiredXor?xor:(hasRequiredXor=1,xor=function(e,t){for(var r=e.length,i=-1;++i<r;)e[i]^=t[i];return e})}var bn$1={exports:{}},bn=bn$1.exports,hasRequiredBn,withPublic_1,hasRequiredWithPublic,publicEncrypt,hasRequiredPublicEncrypt,privateDecrypt,hasRequiredPrivateDecrypt,hasRequiredBrowser$4;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$2().Buffer}catch(A){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function s(e,t,r){var i=a(e,r);return r-1>=t&&(i|=a(e,r-1)<<4),i}function u(e,t,r,i){for(var n=0,o=Math.min(e.length,r),a=t;a<o;a++){var s=e.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return e.cmp(t)<0?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,i):(this._parseBase(e,t,n),"le"===i&&this._initArray(this.toArray(),t,i)))},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===i)for(n=e.length-1,o=0;n>=0;n-=3)a=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===i)for(n=0,o=0;n<e.length;n+=3)a=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},n.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o=0,a=0;if("be"===r)for(i=e.length-1;i>=t;i-=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)n=s(e,t,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;this.strip()},n.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var o=e.length-r,a=o%i,s=Math.min(o,o-a)+r,l=0,c=r;c<s;c+=i)l=u(e,c,c+i,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var h=1;for(l=u(e,c,e.length,t),c=0;c<a;c++)h*=t;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},n.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],o=0|t.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var l=1;l<i;l++){for(var c=u>>>26,h=67108863&u,d=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=d;f++){var p=l-f|0;c+=(a=(n=0|e.words[p])*(o=0|t.words[f])+h)/67108864|0,h=67108863&a}r.words[l]=0|h,u=0|c}return 0!==u?r.words[l]=0|u:r.length--,r.strip()}n.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);o=s>>>24-n&16777215,(n+=2)>=26&&(n-=26,a--),i=0!==o||a!==this.length-1?l[6-u.length]+u+i:u+i}for(0!==o&&(i=o.toString(16)+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var d=c[e],f=h[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);i=(p=p.idivn(f)).isZero()?m+i:l[d-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},n.prototype.toArrayLike=function(e,t,i){var n=this.byteLength(),o=i||Math.max(1,n);r(n<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,l=new e(o),c=this.clone();if(u){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-n;s++)l[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),l[o-s-1]=a}return l},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},n.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},n.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},n.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,n=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},n.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++)t=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&t,n=t>>>26;for(;0!==n&&o<r.length;o++)t=(0|r.words[o])+n,this.words[o]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var o=0,a=0;a<i.length;a++)o=(t=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<r.length;a++)o=(t=(0|r.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var i,n,o,a=e.words,s=t.words,u=r.words,l=0,c=0|a[0],h=8191&c,d=c>>>13,f=0|a[1],p=8191&f,m=f>>>13,g=0|a[2],y=8191&g,b=g>>>13,w=0|a[3],v=8191&w,_=w>>>13,E=0|a[4],S=8191&E,A=E>>>13,M=0|a[5],R=8191&M,x=M>>>13,k=0|a[6],T=8191&k,P=k>>>13,C=0|a[7],I=8191&C,$=C>>>13,B=0|a[8],O=8191&B,N=B>>>13,L=0|a[9],q=8191&L,j=L>>>13,U=0|s[0],D=8191&U,F=U>>>13,W=0|s[1],K=8191&W,H=W>>>13,z=0|s[2],V=8191&z,G=z>>>13,Y=0|s[3],J=8191&Y,Z=Y>>>13,X=0|s[4],Q=8191&X,ee=X>>>13,te=0|s[5],re=8191&te,ie=te>>>13,ne=0|s[6],oe=8191&ne,ae=ne>>>13,se=0|s[7],ue=8191&se,le=se>>>13,ce=0|s[8],he=8191&ce,de=ce>>>13,fe=0|s[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(l+(i=Math.imul(h,D))|0)+((8191&(n=(n=Math.imul(h,F))+Math.imul(d,D)|0))<<13)|0;l=((o=Math.imul(d,F))+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,D),n=(n=Math.imul(p,F))+Math.imul(m,D)|0,o=Math.imul(m,F);var ye=(l+(i=i+Math.imul(h,K)|0)|0)+((8191&(n=(n=n+Math.imul(h,H)|0)+Math.imul(d,K)|0))<<13)|0;l=((o=o+Math.imul(d,H)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(y,D),n=(n=Math.imul(y,F))+Math.imul(b,D)|0,o=Math.imul(b,F),i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,H)|0)+Math.imul(m,K)|0,o=o+Math.imul(m,H)|0;var be=(l+(i=i+Math.imul(h,V)|0)|0)+((8191&(n=(n=n+Math.imul(h,G)|0)+Math.imul(d,V)|0))<<13)|0;l=((o=o+Math.imul(d,G)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(v,D),n=(n=Math.imul(v,F))+Math.imul(_,D)|0,o=Math.imul(_,F),i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,H)|0)+Math.imul(b,K)|0,o=o+Math.imul(b,H)|0,i=i+Math.imul(p,V)|0,n=(n=n+Math.imul(p,G)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,G)|0;var we=(l+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,Z)|0)+Math.imul(d,J)|0))<<13)|0;l=((o=o+Math.imul(d,Z)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(S,D),n=(n=Math.imul(S,F))+Math.imul(A,D)|0,o=Math.imul(A,F),i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,H)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,H)|0,i=i+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(b,V)|0,o=o+Math.imul(b,G)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var ve=(l+(i=i+Math.imul(h,Q)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;l=((o=o+Math.imul(d,ee)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(R,D),n=(n=Math.imul(R,F))+Math.imul(x,D)|0,o=Math.imul(x,F),i=i+Math.imul(S,K)|0,n=(n=n+Math.imul(S,H)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,H)|0,i=i+Math.imul(v,V)|0,n=(n=n+Math.imul(v,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,i=i+Math.imul(y,J)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,ee)|0;var _e=(l+(i=i+Math.imul(h,re)|0)|0)+((8191&(n=(n=n+Math.imul(h,ie)|0)+Math.imul(d,re)|0))<<13)|0;l=((o=o+Math.imul(d,ie)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(T,D),n=(n=Math.imul(T,F))+Math.imul(P,D)|0,o=Math.imul(P,F),i=i+Math.imul(R,K)|0,n=(n=n+Math.imul(R,H)|0)+Math.imul(x,K)|0,o=o+Math.imul(x,H)|0,i=i+Math.imul(S,V)|0,n=(n=n+Math.imul(S,G)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,G)|0,i=i+Math.imul(v,J)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0,i=i+Math.imul(p,re)|0,n=(n=n+Math.imul(p,ie)|0)+Math.imul(m,re)|0,o=o+Math.imul(m,ie)|0;var Ee=(l+(i=i+Math.imul(h,oe)|0)|0)+((8191&(n=(n=n+Math.imul(h,ae)|0)+Math.imul(d,oe)|0))<<13)|0;l=((o=o+Math.imul(d,ae)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(I,D),n=(n=Math.imul(I,F))+Math.imul($,D)|0,o=Math.imul($,F),i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,H)|0)+Math.imul(P,K)|0,o=o+Math.imul(P,H)|0,i=i+Math.imul(R,V)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,G)|0,i=i+Math.imul(S,J)|0,n=(n=n+Math.imul(S,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,i=i+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,i=i+Math.imul(y,re)|0,n=(n=n+Math.imul(y,ie)|0)+Math.imul(b,re)|0,o=o+Math.imul(b,ie)|0,i=i+Math.imul(p,oe)|0,n=(n=n+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(l+(i=i+Math.imul(h,ue)|0)|0)+((8191&(n=(n=n+Math.imul(h,le)|0)+Math.imul(d,ue)|0))<<13)|0;l=((o=o+Math.imul(d,le)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(O,D),n=(n=Math.imul(O,F))+Math.imul(N,D)|0,o=Math.imul(N,F),i=i+Math.imul(I,K)|0,n=(n=n+Math.imul(I,H)|0)+Math.imul($,K)|0,o=o+Math.imul($,H)|0,i=i+Math.imul(T,V)|0,n=(n=n+Math.imul(T,G)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,G)|0,i=i+Math.imul(R,J)|0,n=(n=n+Math.imul(R,Z)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Z)|0,i=i+Math.imul(S,Q)|0,n=(n=n+Math.imul(S,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,i=i+Math.imul(v,re)|0,n=(n=n+Math.imul(v,ie)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,n=(n=n+Math.imul(y,ae)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,ae)|0,i=i+Math.imul(p,ue)|0,n=(n=n+Math.imul(p,le)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,le)|0;var Ae=(l+(i=i+Math.imul(h,he)|0)|0)+((8191&(n=(n=n+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;l=((o=o+Math.imul(d,de)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(q,D),n=(n=Math.imul(q,F))+Math.imul(j,D)|0,o=Math.imul(j,F),i=i+Math.imul(O,K)|0,n=(n=n+Math.imul(O,H)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,H)|0,i=i+Math.imul(I,V)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul($,V)|0,o=o+Math.imul($,G)|0,i=i+Math.imul(T,J)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Z)|0,i=i+Math.imul(R,Q)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,i=i+Math.imul(S,re)|0,n=(n=n+Math.imul(S,ie)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ie)|0,i=i+Math.imul(v,oe)|0,n=(n=n+Math.imul(v,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,i=i+Math.imul(y,ue)|0,n=(n=n+Math.imul(y,le)|0)+Math.imul(b,ue)|0,o=o+Math.imul(b,le)|0,i=i+Math.imul(p,he)|0,n=(n=n+Math.imul(p,de)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,de)|0;var Me=(l+(i=i+Math.imul(h,pe)|0)|0)+((8191&(n=(n=n+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;l=((o=o+Math.imul(d,me)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(q,K),n=(n=Math.imul(q,H))+Math.imul(j,K)|0,o=Math.imul(j,H),i=i+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,G)|0,i=i+Math.imul(I,J)|0,n=(n=n+Math.imul(I,Z)|0)+Math.imul($,J)|0,o=o+Math.imul($,Z)|0,i=i+Math.imul(T,Q)|0,n=(n=n+Math.imul(T,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(R,re)|0,n=(n=n+Math.imul(R,ie)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ie)|0,i=i+Math.imul(S,oe)|0,n=(n=n+Math.imul(S,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,i=i+Math.imul(v,ue)|0,n=(n=n+Math.imul(v,le)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,he)|0,n=(n=n+Math.imul(y,de)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,de)|0;var Re=(l+(i=i+Math.imul(p,pe)|0)|0)+((8191&(n=(n=n+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;l=((o=o+Math.imul(m,me)|0)+(n>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(q,V),n=(n=Math.imul(q,G))+Math.imul(j,V)|0,o=Math.imul(j,G),i=i+Math.imul(O,J)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Z)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,ee)|0)+Math.imul($,Q)|0,o=o+Math.imul($,ee)|0,i=i+Math.imul(T,re)|0,n=(n=n+Math.imul(T,ie)|0)+Math.imul(P,re)|0,o=o+Math.imul(P,ie)|0,i=i+Math.imul(R,oe)|0,n=(n=n+Math.imul(R,ae)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,ae)|0,i=i+Math.imul(S,ue)|0,n=(n=n+Math.imul(S,le)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,le)|0,i=i+Math.imul(v,he)|0,n=(n=n+Math.imul(v,de)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,de)|0;var xe=(l+(i=i+Math.imul(y,pe)|0)|0)+((8191&(n=(n=n+Math.imul(y,me)|0)+Math.imul(b,pe)|0))<<13)|0;l=((o=o+Math.imul(b,me)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(q,J),n=(n=Math.imul(q,Z))+Math.imul(j,J)|0,o=Math.imul(j,Z),i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,i=i+Math.imul(I,re)|0,n=(n=n+Math.imul(I,ie)|0)+Math.imul($,re)|0,o=o+Math.imul($,ie)|0,i=i+Math.imul(T,oe)|0,n=(n=n+Math.imul(T,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,i=i+Math.imul(R,ue)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(x,ue)|0,o=o+Math.imul(x,le)|0,i=i+Math.imul(S,he)|0,n=(n=n+Math.imul(S,de)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,de)|0;var ke=(l+(i=i+Math.imul(v,pe)|0)|0)+((8191&(n=(n=n+Math.imul(v,me)|0)+Math.imul(_,pe)|0))<<13)|0;l=((o=o+Math.imul(_,me)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(q,Q),n=(n=Math.imul(q,ee))+Math.imul(j,Q)|0,o=Math.imul(j,ee),i=i+Math.imul(O,re)|0,n=(n=n+Math.imul(O,ie)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ie)|0,i=i+Math.imul(I,oe)|0,n=(n=n+Math.imul(I,ae)|0)+Math.imul($,oe)|0,o=o+Math.imul($,ae)|0,i=i+Math.imul(T,ue)|0,n=(n=n+Math.imul(T,le)|0)+Math.imul(P,ue)|0,o=o+Math.imul(P,le)|0,i=i+Math.imul(R,he)|0,n=(n=n+Math.imul(R,de)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,de)|0;var Te=(l+(i=i+Math.imul(S,pe)|0)|0)+((8191&(n=(n=n+Math.imul(S,me)|0)+Math.imul(A,pe)|0))<<13)|0;l=((o=o+Math.imul(A,me)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(q,re),n=(n=Math.imul(q,ie))+Math.imul(j,re)|0,o=Math.imul(j,ie),i=i+Math.imul(O,oe)|0,n=(n=n+Math.imul(O,ae)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,ae)|0,i=i+Math.imul(I,ue)|0,n=(n=n+Math.imul(I,le)|0)+Math.imul($,ue)|0,o=o+Math.imul($,le)|0,i=i+Math.imul(T,he)|0,n=(n=n+Math.imul(T,de)|0)+Math.imul(P,he)|0,o=o+Math.imul(P,de)|0;var Pe=(l+(i=i+Math.imul(R,pe)|0)|0)+((8191&(n=(n=n+Math.imul(R,me)|0)+Math.imul(x,pe)|0))<<13)|0;l=((o=o+Math.imul(x,me)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(q,oe),n=(n=Math.imul(q,ae))+Math.imul(j,oe)|0,o=Math.imul(j,ae),i=i+Math.imul(O,ue)|0,n=(n=n+Math.imul(O,le)|0)+Math.imul(N,ue)|0,o=o+Math.imul(N,le)|0,i=i+Math.imul(I,he)|0,n=(n=n+Math.imul(I,de)|0)+Math.imul($,he)|0,o=o+Math.imul($,de)|0;var Ce=(l+(i=i+Math.imul(T,pe)|0)|0)+((8191&(n=(n=n+Math.imul(T,me)|0)+Math.imul(P,pe)|0))<<13)|0;l=((o=o+Math.imul(P,me)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(q,ue),n=(n=Math.imul(q,le))+Math.imul(j,ue)|0,o=Math.imul(j,le),i=i+Math.imul(O,he)|0,n=(n=n+Math.imul(O,de)|0)+Math.imul(N,he)|0,o=o+Math.imul(N,de)|0;var Ie=(l+(i=i+Math.imul(I,pe)|0)|0)+((8191&(n=(n=n+Math.imul(I,me)|0)+Math.imul($,pe)|0))<<13)|0;l=((o=o+Math.imul($,me)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(q,he),n=(n=Math.imul(q,de))+Math.imul(j,he)|0,o=Math.imul(j,de);var $e=(l+(i=i+Math.imul(O,pe)|0)|0)+((8191&(n=(n=n+Math.imul(O,me)|0)+Math.imul(N,pe)|0))<<13)|0;l=((o=o+Math.imul(N,me)|0)+(n>>>13)|0)+($e>>>26)|0,$e&=67108863;var Be=(l+(i=Math.imul(q,pe))|0)+((8191&(n=(n=Math.imul(q,me))+Math.imul(j,pe)|0))<<13)|0;return l=((o=Math.imul(j,me))+(n>>>13)|0)+(Be>>>26)|0,Be&=67108863,u[0]=ge,u[1]=ye,u[2]=be,u[3]=we,u[4]=ve,u[5]=_e,u[6]=Ee,u[7]=Se,u[8]=Ae,u[9]=Me,u[10]=Re,u[11]=xe,u[12]=ke,u[13]=Te,u[14]=Pe,u[15]=Ce,u[16]=Ie,u[17]=$e,u[18]=Be,0!==l&&(u[19]=l,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=d),n.prototype.mulTo=function(e,t){var r,i=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):i<63?d(this,e,t):i<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=u;l++){var c=o-l,h=(0|e.words[c])*(0|t.words[l]),d=67108863&h;s=67108863&(d=d+s|0),n+=(a=(a=a+(h/67108864|0)|0)+(d>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=n.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},m.prototype.permute=function(e,t,r,i,n,o){for(var a=0;a<o;a++)i[a]=t[e[a]],n[a]=r[e[a]]},m.prototype.transform=function(e,t,r,i,n,o){this.permute(o,e,t,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<n;c+=s)for(var h=u,d=l,f=0;f<a;f++){var p=r[c+f],m=i[c+f],g=r[c+f+a],y=i[c+f+a],b=h*g-d*y;y=h*y+d*g,g=b,r[c+f]=p+g,i[c+f]=m+y,r[c+f+a]=p-g,i[c+f+a]=m-y,f!==s&&(b=u*h-l*d,d=u*d+l*h,h=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},m.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},m.prototype.convert13b=function(e,t,i,n){for(var o=0,a=0;a<t;a++)o+=0|e[a],i[2*a]=8191&o,o>>>=13,i[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<n;++a)i[a]=0;r(0===o),r(!(-8192&o))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),l=new Array(i),c=new Array(i),h=new Array(i),d=r.words;d.length=i,this.convert13b(e.words,e.length,a,i),this.convert13b(t.words,t.length,l,i),this.transform(a,o,s,u,i,n),this.transform(l,o,c,h,i,n);for(var f=0;f<i;f++){var p=s[f]*c[f]-u[f]*h[f];u[f]=s[f]*h[f]+u[f]*c[f],s[f]=p}return this.conjugate(s,u,i),this.transform(s,u,d,o,i,n),this.conjugate(d,o,i),this.normalize13b(d,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},n.prototype.mul=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),p(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,i=0;i<this.length;i++){var n=(0|this.words[i])*e,o=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=o>>>26,this.words[i]=67108863&o}return 0!==t&&(this.words[i]=t,this.length++),this.length=0===e?1:this.length,this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}(e);if(0===t.length)return new n(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var o=r.sqr();i<t.length;i++,o=o.sqr())0!==t[i]&&(r=r.mul(o));return r},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,n=(e-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<i;this.words[t]=u|a,a=s>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){var n;r("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=i;if(n-=a,n=Math.max(0,n),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=n);l--){var h=0|this.words[l];this.words[l]=c<<26-o|h>>>o,c=h&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,n=1<<t;return!(this.length<=i||!(this.words[i]&n))},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var n,o,a=e.length+i;this._expand(a);var s=0;for(n=0;n<e.length;n++){o=(0|this.words[n+i])+s;var u=(0|e.words[n])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+i]=67108863&o}for(;n<this.length-i;n++)s=(o=(0|this.words[n+i])+s)>>26,this.words[n+i]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},n.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),o=e,a=0|o.words[o.length-1];0!=(r=26-this._countBits(a))&&(o=o.ushln(r),i.iushln(r),a=0|o.words[o.length-1]);var s,u=i.length-o.length;if("mod"!==t){(s=new n(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(o,1,u);0===c.negative&&(i=c,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var d=67108864*(0|i.words[o.length+h])+(0|i.words[o.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(o,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(o,1,h),i.isZero()||(i.negative^=1);s&&(s.words[h]=d)}return s&&s.strip(),i.strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},n.prototype.divmod=function(e,t,i){return r(!e.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),i&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,i=0,n=this.length-1;n>=0;n--)i=(t*i+(0|this.words[n]))%e;return i},n.prototype.idivn=function(e){r(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*t;this.words[i]=n/e|0,t=n%e}return this.strip()},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new n(1),a=new n(0),s=new n(0),u=new n(1),l=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++l;for(var c=i.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(c),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0===(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(i)>=0?(t.isub(i),o.isub(s),a.isub(u)):(i.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:i.iushln(l)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new n(1),s=new n(0),u=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,c=1;0===(t.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(t.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,d=1;0===(i.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(i)>=0?(t.isub(i),a.isub(s)):(i.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var o=t;t=r,r=o}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return!(1&this.words[0])},n.prototype.isOdd=function(){return!(1&~this.words[0])},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,n=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var o=n,a=i;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return-1===this.cmpn(e)},n.prototype.lt=function(e){return-1===this.cmp(e)},n.prototype.lten=function(e){return this.cmpn(e)<=0},n.prototype.lte=function(e){return this.cmp(e)<=0},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new E(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new n(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},i(b,y),b.prototype.split=function(e,t){for(var r=4194303,i=Math.min(e.length,9),n=0;n<i;n++)t.words[n]=e.words[n];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,n=10;n<e.length;n++){var a=0|e.words[n];e.words[n-10]=(a&r)<<4|o>>>22,o=a}o>>>=22,e.words[n-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,y),i(v,y),i(_,y),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new v;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return g[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);r(!o.isZero());var s=new n(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var h=this.pow(c,o),d=this.pow(e,o.addn(1).iushrn(1)),f=this.pow(e,o),p=a;0!==f.cmp(s);){for(var m=f,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<p);var y=this.pow(h,new n(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new n(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var o=r[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],c=u-1;c>=0;c--){var h=l>>c&1;o!==r[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===i&&0===c)&&(o=this.mul(o,r[a]),s=0,a=0)):s=0}u=26}return o},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new S(e)},i(S,E),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(i).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$1,bn)),bn$1.exports}function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var e=requireBn(),t=requireSafeBuffer$2().Buffer;return withPublic_1=function(r,i){return t.from(r.toRed(e.mont(i.modulus)).redPow(new e(i.publicExponent)).fromRed().toArray())}}function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var e=requireParseAsn1(),t=requireBrowser$e(),r=requireBrowser$c(),i=requireMgf(),n=requireXor(),o=requireBn(),a=requireWithPublic(),s=requireBrowserifyRsa(),u=requireSafeBuffer$2().Buffer;return publicEncrypt=function(l,c,h){var d;d=l.padding?l.padding:h?1:4;var f,p=e(l);if(4===d)f=function(e,a){var s=e.modulus.byteLength(),l=a.length,c=r("sha1").update(u.alloc(0)).digest(),h=c.length,d=2*h;if(l>s-d-2)throw new Error("message too long");var f=u.alloc(s-l-d-2),p=s-h-1,m=t(h),g=n(u.concat([c,f,u.alloc(1,1),a],p),i(m,p)),y=n(m,i(g,h));return new o(u.concat([u.alloc(1),y,g],s))}(p,c);else if(1===d)f=function(e,r,i){var n,a=r.length,s=e.modulus.byteLength();if(a>s-11)throw new Error("message too long");n=i?u.alloc(s-a-3,255):function(e){var r,i=u.allocUnsafe(e),n=0,o=t(2*e),a=0;for(;n<e;)a===o.length&&(o=t(2*e),a=0),(r=o[a++])&&(i[n++]=r);return i}(s-a-3);return new o(u.concat([u.from([0,i?1:2]),n,u.alloc(1),r],s))}(p,c,h);else{if(3!==d)throw new Error("unknown padding");if((f=new o(c)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return h?s(f,p):a(f,p)}}function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var e=requireParseAsn1(),t=requireMgf(),r=requireXor(),i=requireBn(),n=requireBrowserifyRsa(),o=requireBrowser$c(),a=requireWithPublic(),s=requireSafeBuffer$2().Buffer;return privateDecrypt=function(u,l,c){var h;h=u.padding?u.padding:c?1:4;var d,f=e(u),p=f.modulus.byteLength();if(l.length>p||new i(l).cmp(f.modulus)>=0)throw new Error("decryption error");d=c?a(new i(l),f):n(l,f);var m=s.alloc(p-d.length);if(d=s.concat([m,d],p),4===h)return function(e,i){var n=e.modulus.byteLength(),a=o("sha1").update(s.alloc(0)).digest(),u=a.length;if(0!==i[0])throw new Error("decryption error");var l=i.slice(1,u+1),c=i.slice(u+1),h=r(l,t(c,u)),d=r(c,t(h,n-u-1));if(function(e,t){e=s.from(e),t=s.from(t);var r=0,i=e.length;e.length!==t.length&&(r++,i=Math.min(e.length,t.length));var n=-1;for(;++n<i;)r+=e[n]^t[n];return r}(a,d.slice(0,u)))throw new Error("decryption error");var f=u;for(;0===d[f];)f++;if(1!==d[f++])throw new Error("decryption error");return d.slice(f)}(f,d);if(1===h)return function(e,t,r){var i=t.slice(0,2),n=2,o=0;for(;0!==t[n++];)if(n>=t.length){o++;break}var a=t.slice(2,n-1);("0002"!==i.toString("hex")&&!r||"0001"!==i.toString("hex")&&r)&&o++;a.length<8&&o++;if(o)throw new Error("decryption error");return t.slice(n)}(0,d,c);if(3===h)return d;throw new Error("unknown padding")}}function requireBrowser$4(){return hasRequiredBrowser$4||(hasRequiredBrowser$4=1,(e=browser$4).publicEncrypt=requirePublicEncrypt(),e.privateDecrypt=requirePrivateDecrypt(),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}),browser$4;var e}var browser$3={},hasRequiredBrowser$3,hasRequiredCryptoBrowserify,hasRequiredBrorand;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$3;function e(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}hasRequiredBrowser$3=1;var t=requireSafeBuffer$2(),r=requireBrowser$e(),i=t.Buffer,n=t.kMaxLength,o=commonjsGlobal.crypto||commonjsGlobal.msCrypto,a=Math.pow(2,32)-1;function s(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>a||e<0)throw new TypeError("offset must be a uint32");if(e>n||e>t)throw new RangeError("offset out of range")}function u(e,t,r){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>a||e<0)throw new TypeError("size must be a uint32");if(e+t>r||e>n)throw new RangeError("buffer too small")}function l(e,t,i,n){if(process$1.browser){var a=e.buffer,s=new Uint8Array(a,t,i);return o.getRandomValues(s),n?void process$1.nextTick(function(){n(null,e)}):e}if(!n)return r(i).copy(e,t),e;r(i,function(r,i){if(r)return n(r);i.copy(e,t),n(null,e)})}return o&&o.getRandomValues||!process$1.browser?(browser$3.randomFill=function(e,t,r,n){if(!(i.isBuffer(e)||e instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)n=t,t=0,r=e.length;else if("function"==typeof r)n=r,r=e.length-t;else if("function"!=typeof n)throw new TypeError('"cb" argument must be a function');return s(t,e.length),u(r,t,e.length),l(e,t,r,n)},browser$3.randomFillSync=function(e,t,r){void 0===t&&(t=0);if(!(i.isBuffer(e)||e instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');s(t,e.length),void 0===r&&(r=e.length-t);return u(r,t,e.length),l(e,t,r)}):(browser$3.randomFill=e,browser$3.randomFillSync=e),browser$3}function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$e(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$c(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$b();var e=requireAlgos(),t=Object.keys(e),r=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(t);cryptoBrowserify.getHashes=function(){return r};var i=requireBrowser$a();cryptoBrowserify.pbkdf2=i.pbkdf2,cryptoBrowserify.pbkdf2Sync=i.pbkdf2Sync;var n=requireBrowser$8();cryptoBrowserify.Cipher=n.Cipher,cryptoBrowserify.createCipher=n.createCipher,cryptoBrowserify.Cipheriv=n.Cipheriv,cryptoBrowserify.createCipheriv=n.createCipheriv,cryptoBrowserify.Decipher=n.Decipher,cryptoBrowserify.createDecipher=n.createDecipher,cryptoBrowserify.Decipheriv=n.Decipheriv,cryptoBrowserify.createDecipheriv=n.createDecipheriv,cryptoBrowserify.getCiphers=n.getCiphers,cryptoBrowserify.listCiphers=n.listCiphers;var o=requireBrowser$7();cryptoBrowserify.DiffieHellmanGroup=o.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=o.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=o.getDiffieHellman,cryptoBrowserify.createDiffieHellman=o.createDiffieHellman,cryptoBrowserify.DiffieHellman=o.DiffieHellman;var a=requireBrowser$6();cryptoBrowserify.createSign=a.createSign,cryptoBrowserify.Sign=a.Sign,cryptoBrowserify.createVerify=a.createVerify,cryptoBrowserify.Verify=a.Verify,cryptoBrowserify.createECDH=requireBrowser$5();var s=requireBrowser$4();cryptoBrowserify.publicEncrypt=s.publicEncrypt,cryptoBrowserify.privateEncrypt=s.privateEncrypt,cryptoBrowserify.publicDecrypt=s.publicDecrypt,cryptoBrowserify.privateDecrypt=s.privateDecrypt;var u=requireBrowser$3();return cryptoBrowserify.randomFill=u.randomFill,cryptoBrowserify.randomFillSync=u.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/browserify/crypto-browserify")},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;var e;function t(e){this.rand=e}if(hasRequiredBrorand=1,brorand.exports=function(r){return e||(e=new t(null)),e.generate(r)},brorand.exports.Rand=t,t.prototype.generate=function(e){return this._rand(e)},t.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?t.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?t.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(t.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=requireCryptoBrowserify();if("function"!=typeof r.randomBytes)throw new Error("Not supported");t.prototype._rand=function(e){return r.randomBytes(e)}}catch(i){}return brorand.exports}var curve={},base,hasRequiredBase,short,hasRequiredShort,mont,hasRequiredMont,edwards,hasRequiredEdwards,hasRequiredCurve;function requireBase(){if(hasRequiredBase)return base;hasRequiredBase=1;var e=requireBn$5(),t=requireUtils$2(),r=t.getNAF,i=t.getJSF,n=t.assert;function o(t,r){this.type=t,this.p=new e(r.p,16),this.red=r.prime?e.red(r.prime):e.mont(this.p),this.zero=new e(0).toRed(this.red),this.one=new e(1).toRed(this.red),this.two=new e(2).toRed(this.red),this.n=r.n&&new e(r.n,16),this.g=r.g&&this.pointFromJSON(r.g,r.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function a(e,t){this.curve=e,this.type=t,this.precomputed=null}return base=o,o.prototype.point=function(){throw new Error("Not implemented")},o.prototype.validate=function(){throw new Error("Not implemented")},o.prototype._fixedNafMul=function(e,t){n(e.precomputed);var i=e._getDoubles(),o=r(t,1,this._bitLength),a=(1<<i.step+1)-(i.step%2==0?2:1);a/=3;var s,u,l=[];for(s=0;s<o.length;s+=i.step){u=0;for(var c=s+i.step-1;c>=s;c--)u=(u<<1)+o[c];l.push(u)}for(var h=this.jpoint(null,null,null),d=this.jpoint(null,null,null),f=a;f>0;f--){for(s=0;s<l.length;s++)(u=l[s])===f?d=d.mixedAdd(i.points[s]):u===-f&&(d=d.mixedAdd(i.points[s].neg()));h=h.add(d)}return h.toP()},o.prototype._wnafMul=function(e,t){var i=4,o=e._getNAFPoints(i);i=o.wnd;for(var a=o.points,s=r(t,i,this._bitLength),u=this.jpoint(null,null,null),l=s.length-1;l>=0;l--){for(var c=0;l>=0&&0===s[l];l--)c++;if(l>=0&&c++,u=u.dblp(c),l<0)break;var h=s[l];n(0!==h),u="affine"===e.type?h>0?u.mixedAdd(a[h-1>>1]):u.mixedAdd(a[-h-1>>1].neg()):h>0?u.add(a[h-1>>1]):u.add(a[-h-1>>1].neg())}return"affine"===e.type?u.toP():u},o.prototype._wnafMulAdd=function(e,t,n,o,a){var s,u,l,c=this._wnafT1,h=this._wnafT2,d=this._wnafT3,f=0;for(s=0;s<o;s++){var p=(l=t[s])._getNAFPoints(e);c[s]=p.wnd,h[s]=p.points}for(s=o-1;s>=1;s-=2){var m=s-1,g=s;if(1===c[m]&&1===c[g]){var y=[t[m],null,null,t[g]];0===t[m].y.cmp(t[g].y)?(y[1]=t[m].add(t[g]),y[2]=t[m].toJ().mixedAdd(t[g].neg())):0===t[m].y.cmp(t[g].y.redNeg())?(y[1]=t[m].toJ().mixedAdd(t[g]),y[2]=t[m].add(t[g].neg())):(y[1]=t[m].toJ().mixedAdd(t[g]),y[2]=t[m].toJ().mixedAdd(t[g].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],w=i(n[m],n[g]);for(f=Math.max(w[0].length,f),d[m]=new Array(f),d[g]=new Array(f),u=0;u<f;u++){var v=0|w[0][u],_=0|w[1][u];d[m][u]=b[3*(v+1)+(_+1)],d[g][u]=0,h[m]=y}}else d[m]=r(n[m],c[m],this._bitLength),d[g]=r(n[g],c[g],this._bitLength),f=Math.max(d[m].length,f),f=Math.max(d[g].length,f)}var E=this.jpoint(null,null,null),S=this._wnafT4;for(s=f;s>=0;s--){for(var A=0;s>=0;){var M=!0;for(u=0;u<o;u++)S[u]=0|d[u][s],0!==S[u]&&(M=!1);if(!M)break;A++,s--}if(s>=0&&A++,E=E.dblp(A),s<0)break;for(u=0;u<o;u++){var R=S[u];0!==R&&(R>0?l=h[u][R-1>>1]:R<0&&(l=h[u][-R-1>>1].neg()),E="affine"===l.type?E.mixedAdd(l):E.add(l))}}for(s=0;s<o;s++)h[s]=null;return a?E:E.toP()},o.BasePoint=a,a.prototype.eq=function(){throw new Error("Not implemented")},a.prototype.validate=function(){return this.curve.validate(this)},o.prototype.decodePoint=function(e,r){e=t.toArray(e,r);var i=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*i)return 6===e[0]?n(e[e.length-1]%2==0):7===e[0]&&n(e[e.length-1]%2==1),this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));if((2===e[0]||3===e[0])&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),3===e[0]);throw new Error("Unknown point format")},a.prototype.encodeCompressed=function(e){return this.encode(e,!0)},a.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},a.prototype.encode=function(e,r){return t.encode(this._encode(r),e)},a.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},a.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},a.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}},a.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},a.prototype._getBeta=function(){return null},a.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t},base}function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var e=requireUtils$2(),t=requireBn$5(),r=requireInherits_browser(),i=requireBase(),n=e.assert;function o(e){i.call(this,"short",e),this.a=new t(e.a,16).toRed(this.red),this.b=new t(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function a(e,r,n,o){i.BasePoint.call(this,e,"affine"),null===r&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new t(r,16),this.y=new t(n,16),o&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function s(e,r,n,o){i.BasePoint.call(this,e,"jacobian"),null===r&&null===n&&null===o?(this.x=this.curve.one,this.y=this.curve.one,this.z=new t(0)):(this.x=new t(r,16),this.y=new t(n,16),this.z=new t(o,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return r(o,i),short=o,o.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var r,i;if(e.beta)r=new t(e.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);r=(r=o[0].cmp(o[1])<0?o[0]:o[1]).toRed(this.red)}if(e.lambda)i=new t(e.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(r))?i=a[0]:(i=a[1],n(0===this.g.mul(i).x.cmp(this.g.x.redMul(r))))}return{beta:r,lambda:i,basis:e.basis?e.basis.map(function(e){return{a:new t(e.a,16),b:new t(e.b,16)}}):this._getEndoBasis(i)}}},o.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:t.mont(e),i=new t(2).toRed(r).redInvm(),n=i.redNeg(),o=new t(3).toRed(r).redNeg().redSqrt().redMul(i);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},o.prototype._getEndoBasis=function(e){for(var r,i,n,o,a,s,u,l,c,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=e,f=this.n.clone(),p=new t(1),m=new t(0),g=new t(0),y=new t(1),b=0;0!==d.cmpn(0);){var w=f.div(d);l=f.sub(w.mul(d)),c=g.sub(w.mul(p));var v=y.sub(w.mul(m));if(!n&&l.cmp(h)<0)r=u.neg(),i=p,n=l.neg(),o=c;else if(n&&2===++b)break;u=l,f=d,d=l,g=p,p=c,y=m,m=v}a=l.neg(),s=c;var _=n.sqr().add(o.sqr());return a.sqr().add(s.sqr()).cmp(_)>=0&&(a=r,s=i),n.negative&&(n=n.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:n,b:o},{a:a,b:s}]},o.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=n.mul(r.a),s=o.mul(i.a),u=n.mul(r.b),l=o.mul(i.b);return{k1:e.sub(a).sub(s),k2:u.add(l).neg()}},o.prototype.pointFromX=function(e,r){(e=new t(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(0!==n.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(r&&!o||!r&&o)&&(n=n.redNeg()),this.point(e,n)},o.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},o.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),s=e[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),i[2*o]=s,i[2*o+1]=u,n[2*o]=a.k1,n[2*o+1]=a.k2}for(var l=this._wnafMulAdd(1,i,n,2*o,r),c=0;c<2*o;c++)i[c]=null,n[c]=null;return l},r(a,i.BasePoint),o.prototype.point=function(e,t,r){return new a(this,e,t,r)},o.prototype.pointFromJSON=function(e,t){return a.fromJSON(this,e,t)},a.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},a.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},a.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(t){return e.point(t[0],t[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(n))}},i},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return this.inf},a.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},a.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=n.redSqr().redISub(this.x.redAdd(this.x)),a=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},a.prototype.getX=function(){return this.x.fromRed()},a.prototype.getY=function(){return this.y.fromRed()},a.prototype.mul=function(e){return e=new t(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},a.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},a.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},a.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},a.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},a.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},r(s,i.BasePoint),o.prototype.jpoint=function(e,t,r){return new s(this,e,t,r)},s.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},s.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},s.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),s=i.redSub(n),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),c=l.redMul(s),h=i.redMul(l),d=u.redSqr().redIAdd(c).redISub(h).redISub(h),f=u.redMul(h.redISub(d)).redISub(o.redMul(c)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(d,f,p)},s.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(i),s=n.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),c=r.redMul(u),h=s.redSqr().redIAdd(l).redISub(c).redISub(c),d=s.redMul(c.redISub(h)).redISub(n.redMul(l)),f=this.z.redMul(a);return this.curve.jpoint(h,d,f)},s.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,n=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),l=a.redAdd(a);for(t=0;t<e;t++){var c=o.redSqr(),h=l.redSqr(),d=h.redSqr(),f=c.redAdd(c).redIAdd(c).redIAdd(i.redMul(u)),p=o.redMul(h),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=f.redMul(g);y=y.redIAdd(y).redISub(d);var b=l.redMul(s);t+1<e&&(u=u.redMul(d)),o=m,s=b,l=y}return this.curve.jpoint(o,l.redMul(n),s)},s.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},s.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var s=i.redAdd(i).redIAdd(i),u=s.redSqr().redISub(a).redISub(a),l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),e=u,t=s.redMul(a.redISub(u)).redISub(l),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(c).redISub(d);f=f.redIAdd(f);var p=c.redAdd(c).redIAdd(c),m=p.redSqr(),g=d.redIAdd(d);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},s.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var s=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);e=u;var l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),t=s.redMul(a.redISub(u)).redISub(l),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),f=this.x.redSub(c).redMul(this.x.redAdd(c));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(c);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},s.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(n)),u=t.redAdd(t),l=(u=u.redIAdd(u)).redMul(a),c=s.redSqr().redISub(l.redAdd(l)),h=l.redISub(c),d=a.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=s.redMul(h).redISub(d),p=r.redAdd(r).redMul(i);return this.curve.jpoint(c,f,p)},s.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),o=n.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=i.redIAdd(i);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var l=n.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),c=t.redMul(l);c=(c=c.redIAdd(c)).redIAdd(c);var h=this.x.redMul(s).redISub(c);h=(h=h.redIAdd(h)).redIAdd(h);var d=this.y.redMul(l.redMul(u.redISub(l)).redISub(a.redMul(s)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(h,d,f)},s.prototype.mul=function(e,r){return e=new t(e,r),this.curve._wnafMul(this,e)},s.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)},s.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}},s.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},s.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},short}function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var e=requireBn$5(),t=requireInherits_browser(),r=requireBase(),i=requireUtils$2();function n(t){r.call(this,"mont",t),this.a=new e(t.a,16).toRed(this.red),this.b=new e(t.b,16).toRed(this.red),this.i4=new e(4).toRed(this.red).redInvm(),this.two=new e(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function o(t,i,n){r.BasePoint.call(this,t,"projective"),null===i&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new e(i,16),this.z=new e(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return t(n,r),mont=n,n.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),i=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},t(o,r.BasePoint),n.prototype.decodePoint=function(e,t){return this.point(i.toArray(e,t),1)},n.prototype.point=function(e,t){return new o(this,e,t)},n.prototype.pointFromJSON=function(e){return o.fromJSON(this,e)},o.prototype.precompute=function(){},o.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},o.fromJSON=function(e,t){return new o(e,t[0],t[1]||e.one)},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},o.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),n=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,n)},o.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},o.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(r),a=n.redMul(i),s=t.z.redMul(o.redAdd(a).redSqr()),u=t.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,u)},o.prototype.mul=function(e){for(var t=e.clone(),r=this,i=this.curve.point(null,null),n=[];0!==t.cmpn(0);t.iushrn(1))n.push(t.andln(1));for(var o=n.length-1;o>=0;o--)0===n[o]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},o.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},o.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},o.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},o.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var e=requireUtils$2(),t=requireBn$5(),r=requireInherits_browser(),i=requireBase(),n=e.assert;function o(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,i.call(this,"edwards",e),this.a=new t(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new t(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new t(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),n(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function a(e,r,n,o,a){i.BasePoint.call(this,e,"projective"),null===r&&null===n&&null===o?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new t(r,16),this.y=new t(n,16),this.z=o?new t(o,16):this.curve.one,this.t=a&&new t(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return r(o,i),edwards=o,o.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},o.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},o.prototype.jpoint=function(e,t,r,i){return this.point(e,t,r,i)},o.prototype.pointFromX=function(e,r){(e=new t(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),o=this.one.redSub(this.c2.redMul(this.d).redMul(i)),a=n.redMul(o.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var u=s.fromRed().isOdd();return(r&&!u||!r&&u)&&(s=s.redNeg()),this.point(e,s)},o.prototype.pointFromY=function(e,r){(e=new t(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),o=i.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(o.redInvm());if(0===a.cmp(this.zero)){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==r&&(s=s.redNeg()),this.point(s,e)},o.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),i=t.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===i.cmp(n)},r(a,i.BasePoint),o.prototype.pointFromJSON=function(e){return a.fromJSON(this,e)},o.prototype.point=function(e,t,r,i){return new a(this,e,t,r,i)},a.fromJSON=function(e,t){return new a(e,t[0],t[1],t[2])},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},a.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=i.redAdd(t),a=o.redSub(r),s=i.redSub(t),u=n.redMul(a),l=o.redMul(s),c=n.redMul(s),h=a.redMul(o);return this.curve.point(u,l,h,c)},a.prototype._projDbl=function(){var e,t,r,i,n,o,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var l=(i=this.curve._mulA(s)).redAdd(u);this.zOne?(e=a.redSub(s).redSub(u).redMul(l.redSub(this.curve.two)),t=l.redMul(i.redSub(u)),r=l.redSqr().redSub(l).redSub(l)):(n=this.z.redSqr(),o=l.redSub(n).redISub(n),e=a.redSub(s).redISub(u).redMul(o),t=l.redMul(i.redSub(u)),r=l.redMul(o))}else i=s.redAdd(u),n=this.curve._mulC(this.z).redSqr(),o=i.redSub(n).redSub(n),e=this.curve._mulC(a.redISub(i)).redMul(o),t=this.curve._mulC(i).redMul(s.redISub(u)),r=i.redMul(o);return this.curve.point(e,t,r)},a.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},a.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),a=n.redSub(i),s=n.redAdd(i),u=r.redAdd(t),l=o.redMul(a),c=s.redMul(u),h=o.redMul(u),d=a.redMul(s);return this.curve.point(l,c,d,h)},a.prototype._projAdd=function(e){var t,r,i=this.z.redMul(e.z),n=i.redSqr(),o=this.x.redMul(e.x),a=this.y.redMul(e.y),s=this.curve.d.redMul(o).redMul(a),u=n.redSub(s),l=n.redAdd(s),c=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(a),h=i.redMul(u).redMul(c);return this.curve.twisted?(t=i.redMul(l).redMul(a.redSub(this.curve._mulA(o))),r=u.redMul(l)):(t=i.redMul(l).redMul(a.redSub(o)),r=this.curve._mulC(u).redMul(l)),this.curve.point(h,t,r)},a.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},a.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},a.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},a.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},a.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},a.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},a.prototype.getX=function(){return this.normalize(),this.x.fromRed()},a.prototype.getY=function(){return this.normalize(),this.y.fromRed()},a.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},a.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}},a.prototype.toP=a.prototype.normalize,a.prototype.mixedAdd=a.prototype.add,edwards}function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,(e=curve).base=requireBase(),e.short=requireShort(),e.mont=requireMont(),e.edwards=requireEdwards()),curve;var e}var curves={},secp256k1,hasRequiredSecp256k1,hasRequiredCurves,hmacDrbg,hasRequiredHmacDrbg,key$1,hasRequiredKey$1,signature$2,hasRequiredSignature$1,ec$6,hasRequiredEc,key,hasRequiredKey,signature$1,hasRequiredSignature,eddsa,hasRequiredEddsa,hasRequiredElliptic;function requireSecp256k1(){return hasRequiredSecp256k1?secp256k1:(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}})}function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(){var e,t=curves,r=requireHash$1(),i=requireCurve(),n=requireUtils$2().assert;function o(e){"short"===e.type?this.curve=new i.short(e):"edwards"===e.type?this.curve=new i.edwards(e):this.curve=new i.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(e,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){var i=new o(r);return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:i}),i}})}t.PresetCurve=o,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{e=requireSecp256k1()}catch(s){e=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",e]})}()),curves}function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var e=requireHash$1(),t=requireUtils$3(),r=requireMinimalisticAssert();function i(e){if(!(this instanceof i))return new i(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var n=t.toArray(e.entropy,e.entropyEnc||"hex"),o=t.toArray(e.nonce,e.nonceEnc||"hex"),a=t.toArray(e.pers,e.persEnc||"hex");r(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(n,o,a)}return hmacDrbg=i,i.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},i.prototype._hmac=function(){return new e.hmac(this.hash,this.K)},i.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},i.prototype.reseed=function(e,i,n,o){"string"!=typeof i&&(o=n,n=i,i=null),e=t.toArray(e,i),n=t.toArray(n,o),r(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},i.prototype.generate=function(e,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof r&&(n=i,i=r,r=null),i&&(i=t.toArray(i,n||"hex"),this._update(i));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,e);return this._update(i),this._reseed++,t.encode(a,r)},hmacDrbg}function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var e=requireBn$5(),t=requireUtils$2().assert;function r(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}return key$1=r,r.fromPublic=function(e,t,i){return t instanceof r?t:new r(e,{pub:t,pubEnc:i})},r.fromPrivate=function(e,t,i){return t instanceof r?t:new r(e,{priv:t,privEnc:i})},r.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},r.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(t,r){this.priv=new e(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)},r.prototype._importPublic=function(e,r){if(e.x||e.y)return"mont"===this.ec.curve.type?t(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||t(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,r)},r.prototype.derive=function(e){return e.validate()||t(e.validate(),"public point not validated"),e.mul(this.priv).getX()},r.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},r.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}function requireSignature$1(){if(hasRequiredSignature$1)return signature$2;hasRequiredSignature$1=1;var e=requireBn$5(),t=requireUtils$2(),r=t.assert;function i(t,n){if(t instanceof i)return t;this._importDER(t,n)||(r(t.r&&t.s,"Signature without r or s"),this.r=new e(t.r,16),this.s=new e(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function n(){this.place=0}function o(e,t){var r=e[t.place++];if(!(128&r))return r;var i=15&r;if(0===i||i>4)return!1;if(0===e[t.place])return!1;for(var n=0,o=0,a=t.place;o<i;o++,a++)n<<=8,n|=e[a],n>>>=0;return!(n<=127)&&(t.place=a,n)}function a(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function s(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}return signature$2=i,i.prototype._importDER=function(r,i){r=t.toArray(r,i);var a=new n;if(48!==r[a.place++])return!1;var s=o(r,a);if(!1===s)return!1;if(s+a.place!==r.length)return!1;if(2!==r[a.place++])return!1;var u=o(r,a);if(!1===u)return!1;if(128&r[a.place])return!1;var l=r.slice(a.place,u+a.place);if(a.place+=u,2!==r[a.place++])return!1;var c=o(r,a);if(!1===c)return!1;if(r.length!==c+a.place)return!1;if(128&r[a.place])return!1;var h=r.slice(a.place,c+a.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new e(l),this.s=new e(h),this.recoveryParam=null,!0},i.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(128&r[0]&&(r=[0].concat(r)),128&i[0]&&(i=[0].concat(i)),r=a(r),i=a(i);!(i[0]||128&i[1]);)i=i.slice(1);var n=[2];s(n,r.length),(n=n.concat(r)).push(2),s(n,i.length);var o=n.concat(i),u=[48];return s(u,o.length),u=u.concat(o),t.encode(u,e)},signature$2}function requireEc(){if(hasRequiredEc)return ec$6;hasRequiredEc=1;var e=requireBn$5(),t=requireHmacDrbg(),r=requireUtils$2(),i=requireCurves(),n=requireBrorand(),o=r.assert,a=requireKey$1(),s=requireSignature$1();function u(e){if(!(this instanceof u))return new u(e);"string"==typeof e&&(o(Object.prototype.hasOwnProperty.call(i,e),"Unknown curve "+e),e=i[e]),e instanceof i.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}return ec$6=u,u.prototype.keyPair=function(e){return new a(this,e)},u.prototype.keyFromPrivate=function(e,t){return a.fromPrivate(this,e,t)},u.prototype.keyFromPublic=function(e,t){return a.fromPublic(this,e,t)},u.prototype.genKeyPair=function(r){r||(r={});for(var i=new t({hash:this.hash,pers:r.pers,persEnc:r.persEnc||"utf8",entropy:r.entropy||n(this.hash.hmacStrength),entropyEnc:r.entropy&&r.entropyEnc||"utf8",nonce:this.n.toArray()}),o=this.n.byteLength(),a=this.n.sub(new e(2));;){var s=new e(i.generate(o));if(!(s.cmp(a)>0))return s.iaddn(1),this.keyFromPrivate(s)}},u.prototype._truncateToN=function(t,r,i){var n;if(e.isBN(t)||"number"==typeof t)n=(t=new e(t,16)).byteLength();else if("object"==typeof t)n=t.length,t=new e(t,16);else{var o=t.toString();n=o.length+1>>>1,t=new e(o,16)}"number"!=typeof i&&(i=8*n);var a=i-this.n.bitLength();return a>0&&(t=t.ushrn(a)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t},u.prototype.sign=function(r,i,n,a){if("object"==typeof n&&(a=n,n=null),a||(a={}),"string"!=typeof r&&"number"!=typeof r&&!e.isBN(r)){o("object"==typeof r&&r&&"number"==typeof r.length,"Expected message to be an array-like, a hex string, or a BN instance"),o(r.length>>>0===r.length);for(var u=0;u<r.length;u++)o((255&r[u])===r[u])}i=this.keyFromPrivate(i,n),r=this._truncateToN(r,!1,a.msgBitLength),o(!r.isNeg(),"Can not sign a negative message");var l=this.n.byteLength(),c=i.getPrivate().toArray("be",l),h=r.toArray("be",l);o(new e(h).eq(r),"Can not sign message");for(var d=new t({hash:this.hash,entropy:c,nonce:h,pers:a.pers,persEnc:a.persEnc||"utf8"}),f=this.n.sub(new e(1)),p=0;;p++){var m=a.k?a.k(p):new e(d.generate(this.n.byteLength()));if(!((m=this._truncateToN(m,!0)).cmpn(1)<=0||m.cmp(f)>=0)){var g=this.g.mul(m);if(!g.isInfinity()){var y=g.getX(),b=y.umod(this.n);if(0!==b.cmpn(0)){var w=m.invm(this.n).mul(b.mul(i.getPrivate()).iadd(r));if(0!==(w=w.umod(this.n)).cmpn(0)){var v=(g.getY().isOdd()?1:0)|(0!==y.cmp(b)?2:0);return a.canonical&&w.cmp(this.nh)>0&&(w=this.n.sub(w),v^=1),new s({r:b,s:w,recoveryParam:v})}}}}}},u.prototype.verify=function(e,t,r,i,n){n||(n={}),e=this._truncateToN(e,!1,n.msgBitLength),r=this.keyFromPublic(r,i);var o=(t=new s(t,"hex")).r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var u,l=a.invm(this.n),c=l.mul(e).umod(this.n),h=l.mul(o).umod(this.n);return this.curve._maxwellTrick?!(u=this.g.jmulAdd(c,r.getPublic(),h)).isInfinity()&&u.eqXToP(o):!(u=this.g.mulAdd(c,r.getPublic(),h)).isInfinity()&&0===u.getX().umod(this.n).cmp(o)},u.prototype.recoverPubKey=function(t,r,i,n){o((3&i)===i,"The recovery param is more than two bits"),r=new s(r,n);var a=this.n,u=new e(t),l=r.r,c=r.s,h=1&i,d=i>>1;if(l.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");l=d?this.curve.pointFromX(l.add(this.curve.n),h):this.curve.pointFromX(l,h);var f=r.r.invm(a),p=a.sub(u).mul(f).umod(a),m=c.mul(f).umod(a);return this.g.mulAdd(p,l,m)},u.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new s(t,i)).recoveryParam)return t.recoveryParam;for(var n=0;n<4;n++){var o;try{o=this.recoverPubKey(e,t,n)}catch(a){continue}if(o.eq(r))return n}throw new Error("Unable to find valid recovery factor")},ec$6}function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var e=requireUtils$2(),t=e.assert,r=e.parseBytes,i=e.cachedProperty;function n(e,t){this.eddsa=e,this._secret=r(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=r(t.pub)}return n.fromPublic=function(e,t){return t instanceof n?t:new n(e,{pub:t})},n.fromSecret=function(e,t){return t instanceof n?t:new n(e,{secret:t})},n.prototype.secret=function(){return this._secret},i(n,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),i(n,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),i(n,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i}),i(n,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),i(n,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),i(n,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),n.prototype.sign=function(e){return t(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},n.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},n.prototype.getSecret=function(r){return t(this._secret,"KeyPair is public only"),e.encode(this.secret(),r)},n.prototype.getPublic=function(t){return e.encode(this.pubBytes(),t)},key=n}function requireSignature(){if(hasRequiredSignature)return signature$1;hasRequiredSignature=1;var e=requireBn$5(),t=requireUtils$2(),r=t.assert,i=t.cachedProperty,n=t.parseBytes;function o(t,i){this.eddsa=t,"object"!=typeof i&&(i=n(i)),Array.isArray(i)&&(r(i.length===2*t.encodingLength,"Signature has invalid size"),i={R:i.slice(0,t.encodingLength),S:i.slice(t.encodingLength)}),r(i.R&&i.S,"Signature without R or S"),t.isPoint(i.R)&&(this._R=i.R),i.S instanceof e&&(this._S=i.S),this._Rencoded=Array.isArray(i.R)?i.R:i.Rencoded,this._Sencoded=Array.isArray(i.S)?i.S:i.Sencoded}return i(o,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),i(o,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),i(o,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),i(o,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),o.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},o.prototype.toHex=function(){return t.encode(this.toBytes(),"hex").toUpperCase()},signature$1=o}function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var e=requireHash$1(),t=requireCurves(),r=requireUtils$2(),i=r.assert,n=r.parseBytes,o=requireKey(),a=requireSignature();function s(r){if(i("ed25519"===r,"only tested with ed25519 so far"),!(this instanceof s))return new s(r);r=t[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=e.sha512}return eddsa=s,s.prototype.sign=function(e,t){e=n(e);var r=this.keyFromSecret(t),i=this.hashInt(r.messagePrefix(),e),o=this.g.mul(i),a=this.encodePoint(o),s=this.hashInt(a,r.pubBytes(),e).mul(r.priv()),u=i.add(s).umod(this.curve.n);return this.makeSignature({R:o,S:u,Rencoded:a})},s.prototype.verify=function(e,t,r){if(e=n(e),(t=this.makeSignature(t)).S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var i=this.keyFromPublic(r),o=this.hashInt(t.Rencoded(),i.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(i.pub().mul(o)).eq(a)},s.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return r.intFromLE(e.digest()).umod(this.curve.n)},s.prototype.keyFromPublic=function(e){return o.fromPublic(this,e)},s.prototype.keyFromSecret=function(e){return o.fromSecret(this,e)},s.prototype.makeSignature=function(e){return e instanceof a?e:new a(this,e)},s.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},s.prototype.decodePoint=function(e){var t=(e=r.parseBytes(e)).length-1,i=e.slice(0,t).concat(-129&e[t]),n=!!(128&e[t]),o=r.intFromLE(i);return this.curve.pointFromY(o,n)},s.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},s.prototype.decodeInt=function(e){return r.intFromLE(e)},s.prototype.isPoint=function(e){return e instanceof this.pointClass},eddsa}function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,(e=elliptic).version=require$$0$1.version,e.utils=requireUtils$2(),e.rand=requireBrorand(),e.curve=requireCurve(),e.curves=requireCurves(),e.ec=requireEc(),e.eddsa=requireEddsa()),elliptic;var e}var ellipticExports=requireElliptic();const loglevel$2=loglevel$1$1.getLogger("auth");loglevel$2.setLevel("error");const TORUS_LEGACY_NETWORK$1={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},TORUS_SAPPHIRE_NETWORK$1={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};TORUS_LEGACY_NETWORK$1.MAINNET,TORUS_LEGACY_NETWORK$1.TESTNET,TORUS_LEGACY_NETWORK$1.CYAN,TORUS_LEGACY_NETWORK$1.AQUA,TORUS_LEGACY_NETWORK$1.CELESTE,TORUS_LEGACY_NETWORK$1.AQUA,TORUS_SAPPHIRE_NETWORK$1.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK$1.CELESTE,TORUS_SAPPHIRE_NETWORK$1.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK$1.CYAN,TORUS_SAPPHIRE_NETWORK$1.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK$1.MAINNET,TORUS_SAPPHIRE_NETWORK$1.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK$1.TESTNET,TORUS_SAPPHIRE_NETWORK$1.SAPPHIRE_DEVNET,TORUS_LEGACY_NETWORK$1.MAINNET,TORUS_LEGACY_NETWORK$1.TESTNET,TORUS_LEGACY_NETWORK$1.CYAN,TORUS_LEGACY_NETWORK$1.AQUA,TORUS_LEGACY_NETWORK$1.CELESTE;const SIGNER_MAP={[TORUS_SAPPHIRE_NETWORK$1.SAPPHIRE_MAINNET]:"https://api.web3auth.io/signer-service",[TORUS_SAPPHIRE_NETWORK$1.SAPPHIRE_DEVNET]:"https://api.web3auth.io/signer-service",[TORUS_LEGACY_NETWORK$1.MAINNET]:"https://api.web3auth.io/signer-service",[TORUS_LEGACY_NETWORK$1.TESTNET]:"https://api.web3auth.io/signer-service",[TORUS_LEGACY_NETWORK$1.CYAN]:"https://api.web3auth.io/signer-polygon-service",[TORUS_LEGACY_NETWORK$1.AQUA]:"https://api.web3auth.io/signer-polygon-service",[TORUS_LEGACY_NETWORK$1.CELESTE]:"https://api.web3auth.io/signer-polygon-service"};TORUS_LEGACY_NETWORK$1.MAINNET,TORUS_LEGACY_NETWORK$1.TESTNET,TORUS_LEGACY_NETWORK$1.CYAN,TORUS_LEGACY_NETWORK$1.AQUA,TORUS_LEGACY_NETWORK$1.CELESTE;const SESSION_SERVER_API_URL="https://api.web3auth.io/session-service",SESSION_SERVER_SOCKET_URL="https://session.web3auth.io";var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var e=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var r=Object.prototype.toString.call(e);return"[object RegExp]"===r||"[object Date]"===r||function(e){return e.$$typeof===t}(e)}(e)};var t="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function i(e,t,i){return e.concat(t).map(function(e){return r(e,i)})}function n(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}(e))}function o(e,t){try{return t in e}catch(r){return!1}}function a(e,t,i){var a={};return i.isMergeableObject(e)&&n(e).forEach(function(t){a[t]=r(e[t],i)}),n(t).forEach(function(n){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,n)||(o(e,n)&&i.isMergeableObject(t[n])?a[n]=function(e,t){if(!t.customMerge)return s;var r=t.customMerge(e);return"function"==typeof r?r:s}(n,i)(e[n],t[n],i):a[n]=r(t[n],i))}),a}function s(t,n,o){(o=o||{}).arrayMerge=o.arrayMerge||i,o.isMergeableObject=o.isMergeableObject||e,o.cloneUnlessOtherwiseSpecified=r;var s=Array.isArray(n);return s===Array.isArray(t)?s?o.arrayMerge(t,n,o):a(t,n,o):r(n,o)}return s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,r){return s(e,r,t)},{})},cjs=s}var cjsExports=requireCjs();const deepmerge=getDefaultExportFromCjs$2(cjsExports),log$6=loglevel$1$1.getLogger("http-helpers");log$6.setLevel(loglevelExports.levels.INFO);let apiKey$2="torus-default";const gatewayAuthHeader$2="x-api-key";function setLogLevel$1(e){log$6.setLevel(e)}async function fetchAndTrace$2(e,t){let r=null;try{r=new URL(e)}catch{}return fetch(e,t)}function getApiKeyHeaders$2(){const e={};return e[gatewayAuthHeader$2]=apiKey$2,e}function debugLogResponse$2(e){log$6.info(`Response: ${e.status} ${e.statusText}`),log$6.info(`Url: ${e.url}`)}function logTracingHeader$2(e){const t=e.headers.get("x-web3-correlation-id");t&&log$6.info(`Request tracing with traceID = ${t}`)}const promiseTimeout$2=async(e,t)=>{let r=null;try{const i=new Promise((t,i)=>{r=setTimeout(()=>{i(new Error(`Timed out in ${e}ms`))},e)}),n=await Promise.race([t,i]);return null!=r&&clearTimeout(r),n}catch(i){throw null!=r&&clearTimeout(r),i}},get$2=async(e,t={},r={})=>{const i={mode:"cors",headers:{}};r.useAPIKey&&(i.headers=_objectSpread2(_objectSpread2({},i.headers),getApiKeyHeaders$2())),t.method="GET";const n=deepmerge(i,t),o=await fetchAndTrace$2(e,n);if(o.ok){const e=o.headers.get("content-type");return null!=e&&e.includes("application/json")?o.json():o.text()}throw debugLogResponse$2(o),o},post$2=(e,t={},r={},i={})=>{const n={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};i.useAPIKey&&(n.headers=_objectSpread2(_objectSpread2({},n.headers),getApiKeyHeaders$2())),r.method="POST";const o=deepmerge(n,r);return i.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t),promiseTimeout$2(i.timeout||6e4,fetchAndTrace$2(e,o).then(e=>{if(i.logTracingHeader&&logTracingHeader$2(e),e.ok){const t=e.headers.get("content-type");return null!=t&&t.includes("application/json")?e.json():e.text()}throw debugLogResponse$2(e),e}))},patch$1=async(e,t={},r={},i={})=>{const n={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};i.useAPIKey&&(n.headers=_objectSpread2(_objectSpread2({},n.headers),getApiKeyHeaders$2())),r.method="PATCH";const o=deepmerge(n,r);i.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t);const a=await fetchAndTrace$2(e,o);if(a.ok){const e=a.headers.get("content-type");return null!=e&&e.includes("application/json")?a.json():a.text()}throw debugLogResponse$2(a),a},put$1=async(e,t={},r={},i={})=>{const n={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};i.useAPIKey&&(n.headers=_objectSpread2(_objectSpread2({},n.headers),getApiKeyHeaders$2())),r.method="PUT";const o=deepmerge(n,r);i.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t);const a=await fetchAndTrace$2(e,o);if(a.ok){const e=a.headers.get("content-type");return null!=e&&e.includes("application/json")?a.json():a.text()}throw debugLogResponse$2(a),a},padHexString=e=>e.padStart(64,"0").slice(0,64);let BaseSessionManager$1=class{constructor(){_defineProperty(this,"sessionId",void 0)}checkSessionParams(){if(!this.sessionId)throw new Error("Session id is required");this.sessionId=padHexString(this.sessionId)}request({method:e="GET",url:t,data:r={},headers:i={}}){const n={headers:i};switch(e){case"GET":return get$2(t,n);case"POST":return post$2(t,r,n);case"PUT":return put$1(t,r,n);case"PATCH":return patch$1(t,r,n)}throw new Error("Invalid method type")}};const ec$5=new ellipticExports.ec("secp256k1"),browserCrypto$2=globalThis.crypto||globalThis.msCrypto||{},subtle$2=browserCrypto$2.subtle||browserCrypto$2.webkitSubtle,EC_GROUP_ORDER$2=Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),ZERO32$2=Buffer.alloc(32,0);function assert$5(e,t){if(!e)throw new Error(t||"Assertion failed")}function isScalar$2(e){return Buffer.isBuffer(e)&&32===e.length}function isValidPrivateKey$2(e){return!!isScalar$2(e)&&(e.compare(ZERO32$2)>0&&e.compare(EC_GROUP_ORDER$2)<0)}function equalConstTime$2(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}function randomBytes$2(e){if(void 0===browserCrypto$2.getRandomValues)return Buffer.from(browserCrypto$2.randomBytes(e));const t=new Uint8Array(e);return browserCrypto$2.getRandomValues(t),Buffer.from(t)}async function sha512$3(e){if(!browserCrypto$2.createHash){const t=await subtle$2.digest("SHA-512",e);return new Uint8Array(t)}const t=browserCrypto$2.createHash("sha512").update(e).digest();return new Uint8Array(t)}function getAes$2(e){return async function(t,r,i){if(subtle$2&&subtle$2[e]&&subtle$2.importKey){const n={name:"AES-CBC"},o=await subtle$2.importKey("raw",r,n,!1,[e]),a={name:"AES-CBC",iv:t},s=await subtle$2[e](a,o,i);return Buffer.from(new Uint8Array(s))}if("encrypt"===e&&browserCrypto$2.createCipheriv){const e=browserCrypto$2.createCipheriv("aes-256-cbc",r,t),n=e.update(i),o=e.final();return Buffer.concat([n,o])}if("decrypt"===e&&browserCrypto$2.createDecipheriv){const e=browserCrypto$2.createDecipheriv("aes-256-cbc",r,t),n=e.update(i),o=e.final();return Buffer.concat([n,o])}throw new Error(`Unsupported operation: ${e}`)}}const aesCbcEncrypt$2=getAes$2("encrypt"),aesCbcDecrypt$2=getAes$2("decrypt");async function hmacSha256Sign$2(e,t){if(!browserCrypto$2.createHmac){const r={name:"HMAC",hash:{name:"SHA-256"}},i=await subtle$2.importKey("raw",new Uint8Array(e),r,!1,["sign","verify"]),n=await subtle$2.sign("HMAC",i,t);return Buffer.from(new Uint8Array(n))}const r=browserCrypto$2.createHmac("sha256",Buffer.from(e));r.update(t);return r.digest()}async function hmacSha256Verify$2(e,t,r){return equalConstTime$2(await hmacSha256Sign$2(e,t),r)}const generatePrivate$1=function(){let e=randomBytes$2(32);for(;!isValidPrivateKey$2(e);)e=randomBytes$2(32);return e},getPublic$2=function(e){return assert$5(32===e.length,"Bad private key"),assert$5(isValidPrivateKey$2(e),"Bad private key"),Buffer.from(ec$5.keyFromPrivate(e).getPublic("array"))},sign$3=async function(e,t){return assert$5(32===e.length,"Bad private key"),assert$5(isValidPrivateKey$2(e),"Bad private key"),assert$5(t.length>0,"Message should not be empty"),assert$5(t.length<=32,"Message is too long"),Buffer.from(ec$5.sign(t,e,{canonical:!0}).toDER())},derive$2=async function(e,t){assert$5(Buffer.isBuffer(e),"Bad private key"),assert$5(Buffer.isBuffer(t),"Bad public key"),assert$5(32===e.length,"Bad private key"),assert$5(isValidPrivateKey$2(e),"Bad private key"),assert$5(65===t.length||33===t.length,"Bad public key"),65===t.length&&assert$5(4===t[0],"Bad public key"),33===t.length&&assert$5(2===t[0]||3===t[0],"Bad public key");const r=ec$5.keyFromPrivate(e),i=ec$5.keyFromPublic(t),n=r.derive(i.getPublic());return Buffer.from(n.toArray())},deriveUnpadded$2=derive$2,derivePadded$2=async function(e,t){assert$5(Buffer.isBuffer(e),"Bad private key"),assert$5(Buffer.isBuffer(t),"Bad public key"),assert$5(32===e.length,"Bad private key"),assert$5(isValidPrivateKey$2(e),"Bad private key"),assert$5(65===t.length||33===t.length,"Bad public key"),65===t.length&&assert$5(4===t[0],"Bad public key"),33===t.length&&assert$5(2===t[0]||3===t[0],"Bad public key");const r=ec$5.keyFromPrivate(e),i=ec$5.keyFromPublic(t),n=r.derive(i.getPublic());return Buffer.from(n.toString(16,64),"hex")},encrypt$2=async function(e,t,r){let i=(r=r||{}).ephemPrivateKey||randomBytes$2(32);for(;!isValidPrivateKey$2(i);)i=r.ephemPrivateKey||randomBytes$2(32);const n=getPublic$2(i),o=await deriveUnpadded$2(i,e),a=await sha512$3(o),s=r.iv||randomBytes$2(16),u=a.slice(0,32),l=a.slice(32),c=await aesCbcEncrypt$2(s,Buffer.from(u),t),h=Buffer.concat([s,n,c]);return{iv:s,ephemPublicKey:n,ciphertext:c,mac:await hmacSha256Sign$2(Buffer.from(l),h)}},decrypt$2=async function(e,t,r){const i=null!=r&&r,n=i?derivePadded$2:deriveUnpadded$2,o=await n(e,t.ephemPublicKey),a=await sha512$3(o),s=a.slice(0,32),u=a.slice(32),l=Buffer.concat([t.iv,t.ephemPublicKey,t.ciphertext]),c=await hmacSha256Verify$2(Buffer.from(u),l,t.mac);if(!c&&!1===i)return decrypt$2(e,t,!0);if(!c&&!0===i)throw new Error("bad MAC after trying padded");const h=await aesCbcDecrypt$2(t.iv,Buffer.from(s),t.ciphertext);return Buffer.from(new Uint8Array(h))};var jsonify={},parse$2,hasRequiredParse,stringify$2,hasRequiredStringify,hasRequiredJsonify,jsonStableStringify,hasRequiredJsonStableStringify;function requireParse(){if(hasRequiredParse)return parse$2;var e,t;hasRequiredParse=1;var r,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function n(t){throw{name:"SyntaxError",message:t,at:e,text:r}}function o(i){return i&&i!==t&&n("Expected '"+i+"' instead of '"+t+"'"),t=r.charAt(e),e+=1,t}function a(){var e,r="";for("-"===t&&(r="-",o("-"));t>="0"&&t<="9";)r+=t,o();if("."===t)for(r+=".";o()&&t>="0"&&t<="9";)r+=t;if("e"===t||"E"===t)for(r+=t,o(),"-"!==t&&"+"!==t||(r+=t,o());t>="0"&&t<="9";)r+=t,o();return e=Number(r),isFinite(e)||n("Bad number"),e}function s(){var e,r,a,s="";if('"'===t)for(;o();){if('"'===t)return o(),s;if("\\"===t)if(o(),"u"===t){for(a=0,r=0;r<4&&(e=parseInt(o(),16),isFinite(e));r+=1)a=16*a+e;s+=String.fromCharCode(a)}else{if("string"!=typeof i[t])break;s+=i[t]}else s+=t}n("Bad string")}function u(){for(;t&&t<=" ";)o()}function l(){switch(u(),t){case"{":return function(){var e,r={};if("{"===t){if(o("{"),u(),"}"===t)return o("}"),r;for(;t;){if(e=s(),u(),o(":"),Object.prototype.hasOwnProperty.call(r,e)&&n('Duplicate key "'+e+'"'),r[e]=l(),u(),"}"===t)return o("}"),r;o(","),u()}}n("Bad object")}();case"[":return function(){var e=[];if("["===t){if(o("["),u(),"]"===t)return o("]"),e;for(;t;){if(e.push(l()),u(),"]"===t)return o("]"),e;o(","),u()}}n("Bad array")}();case'"':return s();case"-":return a();default:return t>="0"&&t<="9"?a():function(){switch(t){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null;default:n("Unexpected '"+t+"'")}}()}}return parse$2=function(i,o){var a;return r=i,e=0,t=" ",a=l(),u(),t&&n("Syntax error"),"function"==typeof o?function e(t,r){var i,n,a=t[r];if(a&&"object"==typeof a)for(i in l)Object.prototype.hasOwnProperty.call(a,i)&&(void 0===(n=e(a,i))?delete a[i]:a[i]=n);return o.call(t,r,a)}({"":a},""):a}}function requireStringify(){if(hasRequiredStringify)return stringify$2;hasRequiredStringify=1;var e,t,r,i=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function o(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function a(i,n){var s,u,l,c,h,d=e,f=n[i];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(i)),"function"==typeof r&&(f=r.call(n,i,f)),typeof f){case"string":return o(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(e+=t,h=[],"[object Array]"===Object.prototype.toString.apply(f)){for(c=f.length,s=0;s<c;s+=1)h[s]=a(s,f)||"null";return l=0===h.length?"[]":e?"[\n"+e+h.join(",\n"+e)+"\n"+d+"]":"["+h.join(",")+"]",e=d,l}if(r&&"object"==typeof r)for(c=r.length,s=0;s<c;s+=1)"string"==typeof(u=r[s])&&(l=a(u,f))&&h.push(o(u)+(e?": ":":")+l);else for(u in f)Object.prototype.hasOwnProperty.call(f,u)&&(l=a(u,f))&&h.push(o(u)+(e?": ":":")+l);return l=0===h.length?"{}":e?"{\n"+e+h.join(",\n"+e)+"\n"+d+"}":"{"+h.join(",")+"}",e=d,l}}return stringify$2=function(i,n,o){var s;if(e="",t="","number"==typeof o)for(s=0;s<o;s+=1)t+=" ";else"string"==typeof o&&(t=o);if(r=n,n&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON.stringify");return a("",{"":i})}}function requireJsonify(){return hasRequiredJsonify||(hasRequiredJsonify=1,jsonify.parse=requireParse(),jsonify.stringify=requireStringify()),jsonify}function requireJsonStableStringify(){if(hasRequiredJsonStableStringify)return jsonStableStringify;hasRequiredJsonStableStringify=1;var e=("undefined"!=typeof JSON?JSON:requireJsonify()).stringify,t=requireIsarray$2(),r=requireObjectKeys(),i=requireCallBind(),n=requireCallBound(),o=n("Array.prototype.join"),a=n("Array.prototype.indexOf"),s=n("Array.prototype.splice"),u=n("Array.prototype.sort"),l=function(e,t){for(var r="",i=0;i<e;i+=1)r+=t;return r},c=function(e,t,r){return r};return jsonStableStringify=function(n){var h=arguments.length>1?arguments[1]:void 0,d=h&&h.space||"";"number"==typeof d&&(d=l(d," "));var f=!!h&&"boolean"==typeof h.cycles&&h.cycles,p=h&&h.replacer?i(h.replacer):c;if(h&&void 0!==h.collapseEmpty&&"boolean"!=typeof h.collapseEmpty)throw new TypeError("`collapseEmpty` must be a boolean, if provided");var m=!!h&&h.collapseEmpty,g="function"==typeof h?h:h&&h.cmp,y=g&&function(e){var t=g.length>2&&function(t){return e[t]};return function(r,i){return g({key:r,value:e[r]},{key:i,value:e[i]},t?{__proto__:null,get:t}:void 0)}},b=[];return function i(n,c,h,g){var w=d?"\n"+l(g,d):"",v=d?": ":":";if(h&&h.toJSON&&"function"==typeof h.toJSON&&(h=h.toJSON()),void 0!==(h=p(n,c,h))){if("object"!=typeof h||null===h)return e(h);var _=function(e,t){return m&&0===e.length?t:("[]"===t?"[":"{")+o(e,",")+w+("[]"===t?"]":"}")};if(t(h)){for(var E=[],S=0;S<h.length;S++){var A=i(h,S,h[S],g+1)||e(null);E[E.length]=w+d+A}return _(E,"[]")}if(-1!==a(b,h)){if(f)return e("__cycle__");throw new TypeError("Converting circular structure to JSON")}b[b.length]=h;var M=u(r(h),y&&y(h));for(E=[],S=0;S<M.length;S++){var R=i(h,c=M[S],h[c],g+1);if(R){var x=e(c)+v+R;E[E.length]=w+d+x}}return s(b,a(b,h),1),_(E,"{}")}}({"":n},"",n,0)},jsonStableStringify}var jsonStableStringifyExports=requireJsonStableStringify();const stringify$1=getDefaultExportFromCjs$2(jsonStableStringifyExports);function number$1(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function bool(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function isBytes$1(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function bytes(e,...t){if(!isBytes$1(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function hash(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number$1(e.outputLen),number$1(e.blockLen)}function exists(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function output(e,t){bytes(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const assert$4={number:number$1,bool:bool,bytes:bytes,hash:hash,exists:exists,output:output},U32_MASK64$1=BigInt(2**32-1),_32n$1=BigInt(32);function fromBig$1(e,t=!1){return t?{h:Number(e&U32_MASK64$1),l:Number(e>>_32n$1&U32_MASK64$1)}:{h:0|Number(e>>_32n$1&U32_MASK64$1),l:0|Number(e&U32_MASK64$1)}}function split$1(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){const{h:o,l:a}=fromBig$1(e[n],t);[r[n],i[n]]=[o,a]}return[r,i]}const rotlSH$1=(e,t,r)=>e<<r|t>>>32-r,rotlSL$1=(e,t,r)=>t<<r|e>>>32-r,rotlBH$1=(e,t,r)=>t<<r-32|e>>>64-r,rotlBL$1=(e,t,r)=>e<<r-32|t>>>64-r,u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function byteSwap32(e){for(let t=0;t<e.length;t++)e[t]=byteSwap(e[t])}function utf8ToBytes$1(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function toBytes$1(e){return"string"==typeof e&&(e=utf8ToBytes$1(e)),bytes(e),e}let Hash$1=class{clone(){return this._cloneInto()}};function wrapConstructor(e){const t=t=>e().update(toBytes$1(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}const SHA3_PI=[],SHA3_ROTL=[],_SHA3_IOTA=[],_0n$1=BigInt(0),_1n$2=BigInt(1),_2n$2=BigInt(2),_7n=BigInt(7),_256n=BigInt(256),_0x71n=BigInt(113);for(let e=0,t=_1n$2,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],SHA3_PI.push(2*(5*n+r)),SHA3_ROTL.push((e+1)*(e+2)/2%64);let i=_0n$1;for(let e=0;e<7;e++)t=(t<<_1n$2^(t>>_7n)*_0x71n)%_256n,t&_2n$2&&(i^=_1n$2<<(_1n$2<<BigInt(e))-_1n$2);_SHA3_IOTA.push(i)}const[SHA3_IOTA_H,SHA3_IOTA_L]=split$1(_SHA3_IOTA,!0),rotlH=(e,t,r)=>r>32?rotlBH$1(e,t,r):rotlSH$1(e,t,r),rotlL=(e,t,r)=>r>32?rotlBL$1(e,t,r):rotlSL$1(e,t,r);function keccakP(e,t=24){const r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let i=0;i<10;i++)r[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const t=(i+8)%10,n=(i+2)%10,o=r[n],a=r[n+1],s=rotlH(o,a,1)^r[t],u=rotlL(o,a,1)^r[t+1];for(let r=0;r<50;r+=10)e[i+r]^=s,e[i+r+1]^=u}let t=e[2],n=e[3];for(let r=0;r<24;r++){const i=SHA3_ROTL[r],o=rotlH(t,n,i),a=rotlL(t,n,i),s=SHA3_PI[r];t=e[s],n=e[s+1],e[s]=o,e[s+1]=a}for(let i=0;i<50;i+=10){for(let t=0;t<10;t++)r[t]=e[i+t];for(let t=0;t<10;t++)e[i+t]^=~r[(t+2)%10]&r[(t+4)%10]}e[0]^=SHA3_IOTA_H[i],e[1]^=SHA3_IOTA_L[i]}r.fill(0)}class Keccak extends Hash$1{constructor(e,t,r,i=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,number$1(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=u32(this.state)}keccak(){isLE||byteSwap32(this.state32),keccakP(this.state32,this.rounds),isLE||byteSwap32(this.state32),this.posOut=0,this.pos=0}update(e){exists(this);const{blockLen:t,state:r}=this,i=(e=toBytes$1(e)).length;for(let n=0;n<i;){const o=Math.min(t-this.pos,i-n);for(let t=0;t<o;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,128&t&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){exists(this,!1),bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return number$1(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:o}=this;return e||(e=new Keccak(t,r,i,o,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const gen=(e,t,r)=>wrapConstructor(()=>new Keccak(t,e,r)),keccak_256=gen(1,136,32);function wrapHash(e){return t=>(assert$4.bytes(t),e(t))}(()=>{const e="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,t="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);t&&!e&&t("crypto")})();const keccak256$3=(()=>{const e=wrapHash(keccak_256);return e.create=keccak_256.create,e})();function keccak256$2(e){return Buffer.from(keccak256$3(e))}const ec$4=new ellipticExports.ec("secp256k1");function encParamsHexToBuf$2(e){return{iv:Buffer.from(e.iv,"hex"),ephemPublicKey:Buffer.from(e.ephemPublicKey,"hex"),ciphertext:Buffer.from(e.ciphertext,"hex"),mac:Buffer.from(e.mac,"hex")}}function encParamsBufToHex$2(e){return{iv:Buffer.from(e.iv).toString("hex"),ephemPublicKey:Buffer.from(e.ephemPublicKey).toString("hex"),ciphertext:Buffer.from(e.ciphertext).toString("hex"),mac:Buffer.from(e.mac).toString("hex")}}async function encryptData$2(e,t){const r=JSON.stringify(t),i=Buffer.from(r,"utf-8"),n=encParamsBufToHex$2(await encrypt$2(getPublic$2(Buffer.from(e,"hex")),i));return JSON.stringify(n)}async function decryptData$2(e,t){const r=encParamsHexToBuf$2(JSON.parse(t)),i=ec$4.keyFromPrivate(e),n=(await decrypt$2(Buffer.from(i.getPrivate().toString("hex",64),"hex"),r)).toString("utf-8");return JSON.parse(n)}const DEFAULT_SESSION_TIMEOUT$1=86400;class SessionManager extends BaseSessionManager$1{constructor({sessionServerBaseUrl:e,sessionNamespace:t,sessionTime:r,sessionId:i,allowedOrigin:n}={}){super(),_defineProperty(this,"sessionServerBaseUrl",SESSION_SERVER_API_URL),_defineProperty(this,"sessionNamespace",void 0),_defineProperty(this,"allowedOrigin",void 0),_defineProperty(this,"sessionTime",DEFAULT_SESSION_TIMEOUT$1),_defineProperty(this,"sessionId",""),e&&(this.sessionServerBaseUrl=e),t&&(this.sessionNamespace=t),r&&(this.sessionTime=r),i&&(this.sessionId=padHexString(i)),this.allowedOrigin=n||"*"}static generateRandomSessionKey(){return padHexString(generatePrivate$1().toString("hex"))}async createSession(e,t={}){super.checkSessionParams();const r=Buffer.from(this.sessionId,"hex"),i=getPublic$2(r).toString("hex"),n=await encryptData$2(this.sessionId,e),o={key:i,data:n,signature:(await sign$3(r,keccak256$2(Buffer.from(n,"utf8")))).toString("hex"),namespace:this.sessionNamespace,timeout:this.sessionTime,allowedOrigin:this.allowedOrigin};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:o,headers:t}),this.sessionId}async authorizeSession({headers:e}={headers:{}}){super.checkSessionParams();const t={key:getPublic$2(Buffer.from(this.sessionId,"hex")).toString("hex"),namespace:this.sessionNamespace},r=await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/get`,data:t,headers:e});if(!r.message)throw new Error("Session Expired or Invalid public key");const i=await decryptData$2(this.sessionId,r.message);if(i.error)throw new Error("There was an error decrypting data.");return i}async updateSession(e,t={}){super.checkSessionParams();const r=Buffer.from(this.sessionId,"hex"),i=getPublic$2(r).toString("hex"),n=await encryptData$2(this.sessionId,e),o={key:i,data:n,signature:(await sign$3(r,keccak256$2(Buffer.from(n,"utf8")))).toString("hex"),namespace:this.sessionNamespace,allowedOrigin:this.allowedOrigin};await super.request({method:"PUT",url:`${this.sessionServerBaseUrl}/v2/store/update`,data:o,headers:t})}async invalidateSession(e={}){super.checkSessionParams();const t=Buffer.from(this.sessionId,"hex"),r=getPublic$2(t).toString("hex"),i=await encryptData$2(this.sessionId,{}),n={key:r,data:i,signature:(await sign$3(t,keccak256$2(Buffer.from(i,"utf8")))).toString("hex"),namespace:this.sessionNamespace,timeout:1};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:n,headers:e}),this.sessionId="",!0}}class AuthError extends CustomError{constructor(e,t){super(t),_defineProperty(this,"code",void 0),_defineProperty(this,"message",void 0),this.code=e,this.message=t||"",Object.defineProperty(this,"name",{value:"AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}let InitializationError$1=class e extends AuthError{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"InitializationError"})}static fromCode(t,r=""){return new e(t,`${e.messages[t]}, ${r}`)}static invalidParams(t=""){return e.fromCode(5001,t)}static notInitialized(t=""){return e.fromCode(5002,t)}};_defineProperty(InitializationError$1,"messages",{5e3:"Custom",5001:"Invalid constructor params",5002:"SDK not initialized. please call init first"});let LoginError$1=class e extends AuthError{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"LoginError"})}static fromCode(t,r=""){return new e(t,`${e.messages[t]}, ${r}`)}static invalidLoginParams(t=""){return e.fromCode(5111,t)}static userNotLoggedIn(t=""){return e.fromCode(5112,t)}static popupClosed(t=""){return e.fromCode(5113,t)}static loginFailed(t=""){return e.fromCode(5114,t)}static popupBlocked(t=""){return e.fromCode(5115,t)}static mfaAlreadyEnabled(t=""){return e.fromCode(5116,t)}static mfaNotEnabled(t=""){return e.fromCode(5117,t)}};_defineProperty(LoginError$1,"messages",{5e3:"Custom",5111:"Invalid login params",5112:"User not logged in.",5113:"login popup has been closed by the user",5114:"Login failed",5115:"Popup was blocked. Please call this function as soon as user clicks button or use redirect mode",5116:"MFA already enabled",5117:"MFA not yet enabled. Please call `enableMFA` first"});const PACKET_TYPES=Object.create(null);PACKET_TYPES.open="0",PACKET_TYPES.close="1",PACKET_TYPES.ping="2",PACKET_TYPES.pong="3",PACKET_TYPES.message="4",PACKET_TYPES.upgrade="5",PACKET_TYPES.noop="6";const PACKET_TYPES_REVERSE=Object.create(null);Object.keys(PACKET_TYPES).forEach(e=>{PACKET_TYPES_REVERSE[PACKET_TYPES[e]]=e});const ERROR_PACKET={type:"error",data:"parser error"},withNativeBlob$1="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),withNativeArrayBuffer$2="function"==typeof ArrayBuffer,isView$1=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,encodePacket=({type:e,data:t},r,i)=>withNativeBlob$1&&t instanceof Blob?r?i(t):encodeBlobAsBase64(t,i):withNativeArrayBuffer$2&&(t instanceof ArrayBuffer||isView$1(t))?r?i(t):encodeBlobAsBase64(new Blob([t]),i):i(PACKET_TYPES[e]+(t||"")),encodeBlobAsBase64=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function toArray(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let TEXT_ENCODER;function encodePacketToBinary(e,t){return withNativeBlob$1&&e.data instanceof Blob?e.data.arrayBuffer().then(toArray).then(t):withNativeArrayBuffer$2&&(e.data instanceof ArrayBuffer||isView$1(e.data))?t(toArray(e.data)):void encodePacket(e,!1,e=>{TEXT_ENCODER||(TEXT_ENCODER=new TextEncoder),t(TEXT_ENCODER.encode(e))})}const chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<chars$1.length;e++)lookup$1[chars$1.charCodeAt(e)]=e;const decode$1=e=>{let t,r,i,n,o,a=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);const l=new ArrayBuffer(a),c=new Uint8Array(l);for(t=0;t<s;t+=4)r=lookup$1[e.charCodeAt(t)],i=lookup$1[e.charCodeAt(t+1)],n=lookup$1[e.charCodeAt(t+2)],o=lookup$1[e.charCodeAt(t+3)],c[u++]=r<<2|i>>4,c[u++]=(15&i)<<4|n>>2,c[u++]=(3&n)<<6|63&o;return l},withNativeArrayBuffer$1="function"==typeof ArrayBuffer,decodePacket=(e,t)=>{if("string"!=typeof e)return{type:"message",data:mapBinary(e,t)};const r=e.charAt(0);if("b"===r)return{type:"message",data:decodeBase64Packet(e.substring(1),t)};return PACKET_TYPES_REVERSE[r]?e.length>1?{type:PACKET_TYPES_REVERSE[r],data:e.substring(1)}:{type:PACKET_TYPES_REVERSE[r]}:ERROR_PACKET},decodeBase64Packet=(e,t)=>{if(withNativeArrayBuffer$1){const r=decode$1(e);return mapBinary(r,t)}return{base64:!0,data:e}},mapBinary=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,SEPARATOR=String.fromCharCode(30),encodePayload=(e,t)=>{const r=e.length,i=new Array(r);let n=0;e.forEach((e,o)=>{encodePacket(e,!1,e=>{i[o]=e,++n===r&&t(i.join(SEPARATOR))})})},decodePayload=(e,t)=>{const r=e.split(SEPARATOR),i=[];for(let n=0;n<r.length;n++){const e=decodePacket(r[n],t);if(i.push(e),"error"===e.type)break}return i};function createPacketEncoderStream(){return new TransformStream({transform(e,t){encodePacketToBinary(e,r=>{const i=r.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const e=new DataView(n.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{n=new Uint8Array(9);const e=new DataView(n.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!=typeof e.data&&(n[0]|=128),t.enqueue(n),t.enqueue(r)})}})}let TEXT_DECODER;function totalLength(e){return e.reduce((e,t)=>e+t.length,0)}function concatChunks(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let i=0;for(let n=0;n<t;n++)r[n]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),r}function createPacketDecoderStream(e,t){TEXT_DECODER||(TEXT_DECODER=new TextDecoder);const r=[];let i=0,n=-1,o=!1;return new TransformStream({transform(a,s){for(r.push(a);;){if(0===i){if(totalLength(r)<1)break;const e=concatChunks(r,1);o=!(128&~e[0]),n=127&e[0],i=n<126?3:126===n?1:2}else if(1===i){if(totalLength(r)<2)break;const e=concatChunks(r,2);n=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(totalLength(r)<8)break;const e=concatChunks(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),o=t.getUint32(0);if(o>Math.pow(2,21)-1){s.enqueue(ERROR_PACKET);break}n=o*Math.pow(2,32)+t.getUint32(4),i=3}else{if(totalLength(r)<n)break;const e=concatChunks(r,n);s.enqueue(decodePacket(o?e:TEXT_DECODER.decode(e),t)),i=0}if(0===n||n>e){s.enqueue(ERROR_PACKET);break}}}})}const protocol$1=4;function Emitter(e){if(e)return mixin(e)}function mixin(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}Emitter.prototype.on=Emitter.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Emitter.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<i.length;n++)if((r=i[n])===t||r.fn===t){i.splice(n,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(r){i=0;for(var n=(r=r.slice(0)).length;i<n;++i)r[i].apply(this,t)}return this},Emitter.prototype.emitReserved=Emitter.prototype.emit,Emitter.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length};const nextTick="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),globalThisShim="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),defaultBinaryType="arraybuffer";function createCookieJar(){}function pick(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}const NATIVE_SET_TIMEOUT=globalThisShim.setTimeout,NATIVE_CLEAR_TIMEOUT=globalThisShim.clearTimeout;function installTimerFunctions(e,t){t.useNativeTimers?(e.setTimeoutFn=NATIVE_SET_TIMEOUT.bind(globalThisShim),e.clearTimeoutFn=NATIVE_CLEAR_TIMEOUT.bind(globalThisShim)):(e.setTimeoutFn=globalThisShim.setTimeout.bind(globalThisShim),e.clearTimeoutFn=globalThisShim.clearTimeout.bind(globalThisShim))}const BASE64_OVERHEAD=1.33;function byteLength(e){return"string"==typeof e?utf8Length(e):Math.ceil((e.byteLength||e.size)*BASE64_OVERHEAD)}function utf8Length(e){let t=0,r=0;for(let i=0,n=e.length;i<n;i++)t=e.charCodeAt(i),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(i++,r+=4);return r}function randomString(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function encode(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function decode(e){let t={},r=e.split("&");for(let i=0,n=r.length;i<n;i++){let e=r[i].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}class TransportError extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class Transport extends Emitter{constructor(e){super(),this.writable=!1,installTimerFunctions(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new TransportError(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=decodePacket(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=encode(e);return t.length?"?"+t:""}}class Polling extends Transport{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){decodePayload(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,encodePayload(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=randomString()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let value=!1;try{value="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(err){}const hasCORS=value;function empty$2(){}class BaseXHR extends Polling{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class Request extends Emitter{constructor(e,t,r){super(),this.createRequest=e,installTimerFunctions(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var e;const t=pick(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(i){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{r.setRequestHeader("Accept","*/*")}catch(i){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(i){return void this.setTimeoutFn(()=>{this._onError(i)},0)}"undefined"!=typeof document&&(this._index=Request.requestsCount++,Request.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=empty$2,e)try{this._xhr.abort()}catch(t){}"undefined"!=typeof document&&delete Request.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(Request.requestsCount=0,Request.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",unloadHandler);else if("function"==typeof addEventListener){const e="onpagehide"in globalThisShim?"pagehide":"unload";addEventListener(e,unloadHandler,!1)}function unloadHandler(){for(let e in Request.requests)Request.requests.hasOwnProperty(e)&&Request.requests[e].abort()}const hasXHR2=function(){const e=newRequest({xdomain:!1});return e&&null!==e.responseType}();class XHR extends BaseXHR{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=hasXHR2&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Request(newRequest,this.uri(),e)}}function newRequest(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||hasCORS))return new XMLHttpRequest}catch(r){}if(!t)try{return new(globalThisShim[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(r){}}const isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class BaseWS extends Transport{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=isReactNative?{}:pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(err){return this.emitReserved("error",err)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;encodePacket(r,this.supportsBinary,e=>{try{this.doWrite(r,e)}catch(t){}i&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=randomString()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const WebSocketCtor=globalThisShim.WebSocket||globalThisShim.MozWebSocket;class WS extends BaseWS{createSocket(e,t,r){return isReactNative?new WebSocketCtor(e,t,r):t?new WebSocketCtor(e,t):new WebSocketCtor(e)}doWrite(e,t){this.ws.send(t)}}class WT extends Transport{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(err){return this.emitReserved("error",err)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=createPacketDecoderStream(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),i=createPacketEncoderStream();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const n=()=>{r.read().then(({done:e,value:t})=>{e||(this.onPacket(t),n())}).catch(e=>{})};n();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;this._writer.write(r).then(()=>{i&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}}const transports={websocket:WS,webtransport:WT,polling:XHR},re=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function parse$1(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),i=e.indexOf("]");-1!=r&&-1!=i&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));let n=re.exec(e||""),o={},a=14;for(;a--;)o[parts[a]]=n[a]||"";return-1!=r&&-1!=i&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=pathNames(o,o.path),o.queryKey=queryKey(o,o.query),o}function pathNames(e,t){const r=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}function queryKey(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,i){t&&(r[t]=i)}),r}const withEventListeners="function"==typeof addEventListener&&"function"==typeof removeEventListener,OFFLINE_EVENT_LISTENERS=[];withEventListeners&&addEventListener("offline",()=>{OFFLINE_EVENT_LISTENERS.forEach(e=>e())},!1);class SocketWithoutUpgrade extends Emitter{constructor(e,t){if(super(),this.binaryType=defaultBinaryType,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const r=parse$1(e);t.hostname=r.host,t.secure="https"===r.protocol||"wss"===r.protocol,t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=parse$1(t.host).host);installTimerFunctions(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=decode(this.opts.query)),withEventListeners&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=createCookieJar()),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=protocol$1,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&SocketWithoutUpgrade.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",SocketWithoutUpgrade.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const r=this.writeBuffer[t].data;if(r&&(e+=byteLength(r)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,nextTick(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof r&&(i=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const n={type:e,data:t,options:r};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(SocketWithoutUpgrade.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),withEventListeners&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);-1!==e&&OFFLINE_EVENT_LISTENERS.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}SocketWithoutUpgrade.protocol=protocol$1;class SocketWithUpgrade extends SocketWithoutUpgrade{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;SocketWithoutUpgrade.priorWebsocketSuccess=!1;const i=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!r)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;SocketWithoutUpgrade.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{r||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function n(){r||(r=!0,l(),t.close(),t=null)}const o=e=>{const r=new Error("probe error: "+e);r.transport=t.name,n(),this.emitReserved("upgradeError",r)};function a(){o("transport closed")}function s(){o("socket closed")}function u(e){t&&e.name!==t.name&&n()}const l=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",a),this.off("close",s),this.off("upgrading",u)};t.once("open",i),t.once("error",o),t.once("close",a),this.once("close",s),this.once("upgrading",u),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let Socket$1=class extends SocketWithUpgrade{constructor(e,t={}){const r="object"==typeof e?e:t;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(e=>transports[e]).filter(e=>!!e)),super(e,r)}};function url(e,t="",r){let i=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),i=parse$1(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const n=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+n+":"+i.port+t,i.href=i.protocol+"://"+n+(r&&r.port===i.port?"":":"+i.port),i}const withNativeArrayBuffer="function"==typeof ArrayBuffer,isView=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,toString=Object.prototype.toString,withNativeBlob="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===toString.call(Blob),withNativeFile="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===toString.call(File);function isBinary(e){return withNativeArrayBuffer&&(e instanceof ArrayBuffer||isView(e))||withNativeBlob&&e instanceof Blob||withNativeFile&&e instanceof File}function hasBinary(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(hasBinary(e[t]))return!0;return!1}if(isBinary(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return hasBinary(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&hasBinary(e[r]))return!0;return!1}function deconstructPacket(e){const t=[],r=e.data,i=e;return i.data=_deconstructPacket(r,t),i.attachments=t.length,{packet:i,buffers:t}}function _deconstructPacket(e,t){if(!e)return e;if(isBinary(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=_deconstructPacket(e[i],t);return r}if("object"==typeof e&&!(e instanceof Date)){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=_deconstructPacket(e[i],t));return r}return e}function reconstructPacket(e,t){return e.data=_reconstructPacket(e.data,t),delete e.attachments,e}function _reconstructPacket(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=_reconstructPacket(e[r],t);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=_reconstructPacket(e[r],t));return e}const RESERVED_EVENTS$1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],protocol=5;var PacketType,PacketType2;PacketType2=PacketType||(PacketType={}),PacketType2[PacketType2.CONNECT=0]="CONNECT",PacketType2[PacketType2.DISCONNECT=1]="DISCONNECT",PacketType2[PacketType2.EVENT=2]="EVENT",PacketType2[PacketType2.ACK=3]="ACK",PacketType2[PacketType2.CONNECT_ERROR=4]="CONNECT_ERROR",PacketType2[PacketType2.BINARY_EVENT=5]="BINARY_EVENT",PacketType2[PacketType2.BINARY_ACK=6]="BINARY_ACK";class Encoder{constructor(e){this.replacer=e}encode(e){return e.type!==PacketType.EVENT&&e.type!==PacketType.ACK||!hasBinary(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===PacketType.EVENT?PacketType.BINARY_EVENT:PacketType.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==PacketType.BINARY_EVENT&&e.type!==PacketType.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=deconstructPacket(e),r=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(r),i}}function isObject$3(e){return"[object Object]"===Object.prototype.toString.call(e)}class Decoder extends Emitter{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===PacketType.BINARY_EVENT;r||t.type===PacketType.BINARY_ACK?(t.type=r?PacketType.EVENT:PacketType.ACK,this.reconstructor=new BinaryReconstructor(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(void 0===PacketType[r.type])throw new Error("unknown packet type "+r.type);if(r.type===PacketType.BINARY_EVENT||r.type===PacketType.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const n=e.substring(i,t);if(n!=Number(n)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(n)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(i,t)}else r.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!Decoder.isPayloadValid(r.type,i))throw new Error("invalid payload");r.data=i}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case PacketType.CONNECT:return isObject$3(t);case PacketType.DISCONNECT:return void 0===t;case PacketType.CONNECT_ERROR:return"string"==typeof t||isObject$3(t);case PacketType.EVENT:case PacketType.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===RESERVED_EVENTS$1.indexOf(t[0]));case PacketType.ACK:case PacketType.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class BinaryReconstructor{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const parser=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Decoder,Encoder:Encoder,get PacketType(){return PacketType},protocol:protocol},Symbol.toStringTag,{value:"Module"}));function on(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const RESERVED_EVENTS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Socket extends Emitter{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[on(e,"open",this.onopen.bind(this)),on(e,"packet",this.onpacket.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,i,n;if(RESERVED_EVENTS.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:PacketType.EVENT,data:t,options:{}};if(o.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,r=t.pop();this._registerAckCallback(e,r),o.id=e}const a=null===(i=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===i?void 0:i.writable,s=this.connected&&!(null===(n=this.io.engine)||void 0===n?void 0:n._hasPingExpired());return this.flags.volatile&&!a||(s?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var r;const i=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===i)return void(this.acks[e]=t);const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},i),o=(...e)=>{this.io.clearTimeoutFn(n),t.apply(this,e)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((r,i)=>{const n=(e,t)=>e?i(e):r(t);n.withError=!0,t.push(n),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...i)=>{if(r!==this._queue[0])return;return null!==e?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...i)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case PacketType.EVENT:case PacketType.BINARY_EVENT:this.onevent(e);break;case PacketType.ACK:case PacketType.BINARY_ACK:this.onack(e);break;case PacketType.DISCONNECT:this.ondisconnect();break;case PacketType.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...i){r||(r=!0,t.packet({type:PacketType.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function Backoff(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+r:e-r}return 0|Math.min(e,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(e){this.ms=e},Backoff.prototype.setMax=function(e){this.max=e},Backoff.prototype.setJitter=function(e){this.jitter=e};class Manager extends Emitter{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,installTimerFunctions(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||parser;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Socket$1(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=on(t,"open",function(){r.onopen(),e&&e()}),n=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=on(t,"error",n);if(!1!==this._timeout){const e=this._timeout,r=this.setTimeoutFn(()=>{i(),n(new Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(on(e,"ping",this.onping.bind(this)),on(e,"data",this.ondata.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this)),on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){nextTick(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Socket(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t){if(this.nsps[r].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const cache={};function lookup(e,t){"object"==typeof e&&(t=e,e=void 0);const r=url(e,(t=t||{}).path||"/socket.io"),i=r.source,n=r.id,o=r.path,a=cache[n]&&o in cache[n].nsps;let s;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?s=new Manager(i,t):(cache[n]||(cache[n]=new Manager(i,t)),s=cache[n]),r.query&&!t.query&&(t.query=r.queryKey),s.socket(r.path,t)}Object.assign(lookup,{Manager:Manager,Socket:Socket,io:lookup,connect:lookup});var log$5=loglevel$1$1.getLogger("SecurePubSub");let SecurePubSub$1=class{constructor(e={}){_defineProperty(this,"options",void 0),_defineProperty(this,"SOCKET_CONN",null),this.options=e,this.options.timeout=e.timeout||600,this.options.serverUrl=e.serverUrl||SESSION_SERVER_API_URL,this.options.socketUrl=e.socketUrl||SESSION_SERVER_SOCKET_URL,this.options.enableLogging=e.enableLogging||!1,this.options.namespace=e.namespace||"",this.options.sameIpCheck=e.sameIpCheck||!1,this.options.sameOriginCheck=e.sameOriginCheck||!1,this.options.enableLogging?log$5.enableAll():log$5.disableAll()}static setLogLevel(e){log$5.setLevel(e),setLogLevel$1(e)}async publish(e,t){const r=keccak256$2(Buffer.from(e,"utf8")),i=await encryptData$2(r.toString("hex"),t),n=await sign$3(r,keccak256$2(Buffer.from(i,"utf8"))),o={key:getPublic$2(r).toString("hex"),data:i,signature:n.toString("hex"),timeout:this.options.timeout,namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck};return post$2(`${this.options.serverUrl}/channel/set`,o)}async subscribe(e){let t=!0;const r=keccak256$2(Buffer.from(e,"utf8")),i=getPublic$2(r).toString("hex"),n=this.getSocketConnection();n.connected?(log$5.debug("already connected with socket"),n.emit("check_auth_status",i,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})):n.once("connect",()=>{log$5.debug("connected with socket"),n.emit("check_auth_status",i,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})});const o=()=>{n.once("connect",async()=>{log$5.debug("connected with socket using reconnect"),t&&n.emit("check_auth_status",i,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})})},a=()=>{t||document.removeEventListener("visibilitychange",a),n.connected||"visible"!==document.visibilityState||o()},s=()=>{log$5.debug("socket disconnected",t),t?(log$5.error("socket disconnected unexpectedly, reconnecting socket"),o()):n.removeListener("disconnect",s)};n.on("disconnect",s);const u=new Promise((e,o)=>{log$5.info("listening to",`${i}_success`),n.once(`${i}_success`,async i=>{try{const t=await decryptData$2(r.toString("hex"),i);log$5.info("got data",t),e(t)}catch(n){log$5.error(n),o(n)}finally{t=!1,document.removeEventListener("visibilitychange",a)}})});return"undefined"!=typeof document&&document.addEventListener("visibilitychange",a),u}cleanup(){this.SOCKET_CONN&&(this.SOCKET_CONN.disconnect(),this.SOCKET_CONN=null)}getSocketConnection(){if(this.SOCKET_CONN)return this.SOCKET_CONN;const e=lookup(this.options.socketUrl,{transports:["websocket","polling"],withCredentials:!0,reconnectionDelayMax:1e4,reconnectionAttempts:10});return e.on("connect_error",t=>{e.io.opts.transports=["polling","websocket"],log$5.error("connect error",t)}),e.on("connect",async()=>{const{engine:t}=e.io;log$5.debug("initially connected to",t.transport.name),t.once("upgrade",()=>{log$5.debug("upgraded",t.transport.name)}),t.once("close",e=>{log$5.debug("connection closed",e)})}),e.on("error",t=>{log$5.error("socket errored",t),e.disconnect()}),this.SOCKET_CONN=e,this.SOCKET_CONN}};const BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast","Pale Moon":"pale_moon",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",pale_moon:"Pale Moon",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv",bot:"bot"},OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Utils{static getFirstMatch(e,t){const r=t.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,t){const r=t.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,t,r){if(e.test(t))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,r=!1){const i=Utils.getVersionPrecision(e),n=Utils.getVersionPrecision(t);let o=Math.max(i,n),a=0;const s=Utils.map([e,t],e=>{const t=o-Utils.getVersionPrecision(e),r=e+new Array(t+1).join(".0");return Utils.map(r.split("."),e=>new Array(20-e.length).join("0")+e).reverse()});for(r&&(a=o-Math.min(i,n)),o-=1;o>=a;){if(s[0][o]>s[1][o])return 1;if(s[0][o]===s[1][o]){if(o===a)return 0;o-=1}else if(s[0][o]<s[1][o])return-1}}static map(e,t){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(i=0;i<e.length;i+=1)r.push(t(e[i]));return r}static find(e,t){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,i=e.length;r<i;r+=1){const i=e[r];if(t(i,r))return i}}static assign(e,...t){const r=e;let i,n;if(Object.assign)return Object.assign(e,...t);for(i=0,n=t.length;i<n;i+=1){const e=t[i];if("object"==typeof e&&null!==e){Object.keys(e).forEach(t=>{r[t]=e[t]})}}return e}static getBrowserAlias(e){return BROWSER_ALIASES_MAP[e]}static getBrowserTypeByAlias(e){return BROWSER_MAP[e]||""}}const commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i,browsersList=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=Utils.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=Utils.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/PaleMoon/i],describe(e){const t={name:"Pale Moon"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:PaleMoon)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=Utils.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=Utils.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=Utils.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=Utils.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=Utils.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=Utils.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=Utils.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=Utils.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=Utils.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=Utils.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=Utils.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=Utils.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=Utils.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=Utils.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=Utils.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=Utils.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=Utils.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=Utils.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=Utils.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=Utils.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=Utils.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=Utils.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=Utils.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=Utils.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=Utils.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:Utils.getFirstMatch(t,e),version:Utils.getSecondMatch(t,e)}}}],osParsersList=[{test:[/Roku\/DVP/],describe(e){const t=Utils.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=Utils.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=Utils.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=Utils.getWindowsVersionName(t);return{name:OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:OS_MAP.iOS},r=Utils.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=Utils.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=Utils.getMacOSVersionName(t),i={name:OS_MAP.MacOS,version:t};return r&&(i.versionName=r),i}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=Utils.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:OS_MAP.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=Utils.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=Utils.getAndroidVersionName(t),i={name:OS_MAP.Android,version:t};return r&&(i.versionName=r),i}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=Utils.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=Utils.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||Utils.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||Utils.getFirstMatch(/\bbb(\d+)/i,e);return{name:OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=Utils.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=Utils.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:OS_MAP.Linux})},{test:[/CrOS/],describe:()=>({name:OS_MAP.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=Utils.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:OS_MAP.PlayStation4,version:t}}}],platformParsersList=[{test:[/googlebot/i],describe:()=>({type:PLATFORMS_MAP.bot,vendor:"Google"})},{test:[/huawei/i],describe(e){const t=Utils.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:PLATFORMS_MAP.tablet})},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=Utils.getFirstMatch(/(ipod|iphone)/i,e);return{type:PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:PLATFORMS_MAP.mobile,vendor:"Nexus"})},{test:[/Nokia/i],describe(e){const t=Utils.getFirstMatch(/Nokia\s+([0-9]+(\.[0-9]+)?)/i,e),r={type:PLATFORMS_MAP.mobile,vendor:"Nokia"};return t&&(r.model=t),r}},{test:[/[^-]mobi/i],describe:()=>({type:PLATFORMS_MAP.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:PLATFORMS_MAP.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:PLATFORMS_MAP.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:PLATFORMS_MAP.mobile,vendor:"Microsoft"})},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:PLATFORMS_MAP.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.tv})}],enginesParsersList=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:ENGINE_MAP.Blink};const t=Utils.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:ENGINE_MAP.Trident},r=Utils.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:ENGINE_MAP.Presto},r=Utils.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:ENGINE_MAP.Gecko},r=Utils.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:ENGINE_MAP.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:ENGINE_MAP.WebKit},r=Utils.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class Parser{constructor(e,t=!1){if(null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=Utils.find(browsersList,e=>{if("function"==typeof e.test)return e.test(this);if(Array.isArray(e.test))return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=Utils.find(osParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(Array.isArray(e.test))return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=Utils.find(platformParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(Array.isArray(e.test))return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=Utils.find(enginesParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(Array.isArray(e.test))return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Utils.assign({},this.parsedResult)}satisfies(e){const t={};let r=0;const i={};let n=0;if(Object.keys(e).forEach(o=>{const a=e[o];"string"==typeof a?(i[o]=a,n+=1):"object"==typeof a&&(t[o]=a,r+=1)}),r>0){const e=Object.keys(t),r=Utils.find(e,e=>this.isOS(e));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}const i=Utils.find(e,e=>this.isPlatform(e));if(i){const e=this.satisfies(t[i]);if(void 0!==e)return e}}if(n>0){const e=Object.keys(i),t=Utils.find(e,e=>this.isBrowser(e,!0));if(void 0!==t)return this.compareVersion(i[t])}}isBrowser(e,t=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const n=Utils.getBrowserTypeByAlias(i);return t&&n&&(i=n.toLowerCase()),i===r}compareVersion(e){let t=[0],r=e,i=!1;const n=this.getBrowserVersion();if("string"==typeof n)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(i=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(i=!0,r=e.substr(1)),t.indexOf(Utils.compareVersions(n,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(e=>this.is(e))}}
/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Bowser{static getParser(e,t=!1){if("string"!=typeof e)throw new Error("UserAgent should be a string");return new Parser(e,t)}static parse(e){return new Parser(e).getResult()}static get BROWSER_MAP(){return BROWSER_MAP}static get ENGINE_MAP(){return ENGINE_MAP}static get OS_MAP(){return OS_MAP}static get PLATFORMS_MAP(){return PLATFORMS_MAP}}var base64url$3={exports:{}},base64url$2={},padString={},hasRequiredPadString,hasRequiredBase64url$1,hasRequiredBase64url;function requirePadString(){if(hasRequiredPadString)return padString;return hasRequiredPadString=1,Object.defineProperty(padString,"__esModule",{value:!0}),padString.default=function(e){var t=e.length,r=t%4;if(!r)return e;var i=t,n=4-r,o=t+n,a=Buffer.alloc(o);for(a.write(e);n--;)a.write("=",i++);return a.toString()},padString}function requireBase64url$1(){if(hasRequiredBase64url$1)return base64url$2;hasRequiredBase64url$1=1,Object.defineProperty(base64url$2,"__esModule",{value:!0});var e=requirePadString();function t(e,t){return void 0===t&&(t="utf8"),Buffer.isBuffer(e)?i(e.toString("base64")):i(Buffer.from(e,t).toString("base64"))}function r(t){return t=t.toString(),e.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function i(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var n=t;return n.encode=t,n.decode=function(e,t){return void 0===t&&(t="utf8"),Buffer.from(r(e),"base64").toString(t)},n.toBase64=r,n.fromBase64=i,n.toBuffer=function(e){return Buffer.from(r(e),"base64")},base64url$2.default=n,base64url$2}function requireBase64url(){return hasRequiredBase64url||(hasRequiredBase64url=1,(e=base64url$3).exports=requireBase64url$1().default,e.exports.default=e.exports),base64url$3.exports;var e}var base64urlExports=requireBase64url();const base64urlLib=getDefaultExportFromCjs$2(base64urlExports),base64url$1=base64urlLib;function safeatob$1(e){return base64url$1.decode(e)}function jsonToBase64$1(e){return base64url$1.encode(JSON.stringify(e))}function storageAvailable$2(e){let t,r=!1,i=0;try{t=window[e],r=!0,i=t.length;const n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(err){const t=err;return t&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&r&&0!==i}}const WEB3AUTH_LEGACY_NETWORK=TORUS_LEGACY_NETWORK$1,WEB3AUTH_SAPPHIRE_NETWORK=TORUS_SAPPHIRE_NETWORK$1,UX_MODE$1={POPUP:"popup",REDIRECT:"redirect"},WEB3AUTH_NETWORK=_objectSpread2(_objectSpread2({},WEB3AUTH_SAPPHIRE_NETWORK),WEB3AUTH_LEGACY_NETWORK),SUPPORTED_KEY_CURVES$1={OTHER:"other"},LOGIN_PROVIDER$1={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",FARCASTER:"farcaster",EMAIL_PASSWORDLESS:"email_passwordless",SMS_PASSWORDLESS:"sms_passwordless",WEBAUTHN:"webauthn",JWT:"jwt",PASSKEYS:"passkeys",AUTHENTICATOR:"authenticator"},AUTH_ACTIONS={LOGIN:"login",ENABLE_MFA:"enable_mfa",MANAGE_MFA:"manage_mfa",ADD_AUTHENTICATOR_FACTOR:"add_authenticator_factor",ADD_PASSKEY_FACTOR:"add_passkey_factor"},BUILD_ENV$1={PRODUCTION:"production",DEVELOPMENT:"development",STAGING:"staging",TESTING:"testing"},version$2="9.6.4";function getHashQueryParams$1(e=!1){const t={},r=new URLSearchParams(window.location.search.slice(1));r.forEach((e,r)=>{"b64Params"!==r&&(t[r]=e)});const i=r.get("b64Params");if(i)try{const e=JSON.parse(safeatob$1(i));Object.keys(e).forEach(r=>{t[r]=e[r]})}catch(a){loglevel$2.error(a)}const n=new URLSearchParams(window.location.hash.substring(1));n.forEach((e,r)=>{"b64Params"!==r&&(t[r]=e)});const o=n.get("b64Params");if(o)try{const e=JSON.parse(safeatob$1(o));Object.keys(e).forEach(r=>{t[r]=e[r]})}catch(a){loglevel$2.error(a)}if(e){const e=new URL(window.location.origin+window.location.pathname);0!==r.size&&(r.delete("error"),r.delete("state"),r.delete("b64Params"),r.delete("sessionNamespace"),e.search=r.toString()),0!==n.size&&(n.delete("error"),n.delete("state"),n.delete("b64Params"),n.delete("sessionNamespace"),e.hash=n.toString()),window.history.replaceState(_objectSpread2(_objectSpread2({},window.history.state),{},{as:e.href,url:e.href}),"",e.href)}return t}function constructURL$1(e){const{baseURL:t,query:r,hash:i}=e,n=new URL(t);if(r&&Object.keys(r).forEach(e=>{n.searchParams.append(e,r[e])}),i){const e=new URL(constructURL$1({baseURL:t,query:i})).searchParams.toString();n.hash=e}return n.toString()}function getPopupFeatures$1(){if("undefined"==typeof window)return"";const e=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,i=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,n=Math.abs((r-1200)/2/1+e);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=1200,top=${Math.abs((i-700)/2/1+t)},left=${n}`}function isMobileOrTablet$1(){if("undefined"==typeof window)return!1;const e=Bowser.getParser(window.navigator.userAgent).getPlatform();return e.type===Bowser.PLATFORMS_MAP.tablet||e.type===Bowser.PLATFORMS_MAP.mobile}function getTimeout$1(e){return e!==LOGIN_PROVIDER$1.FACEBOOK&&e!==LOGIN_PROVIDER$1.LINE||!isMobileOrTablet$1()?1e4:3e5}let PopupHandler$1=class extends eventsExports.EventEmitter{constructor({url:e,target:t,features:r,timeout:i=3e4,sessionSocketUrl:n,sessionServerUrl:o}){super(),_defineProperty(this,"url",void 0),_defineProperty(this,"target",void 0),_defineProperty(this,"features",void 0),_defineProperty(this,"window",void 0),_defineProperty(this,"windowTimer",void 0),_defineProperty(this,"iClosedWindow",void 0),_defineProperty(this,"timeout",void 0),_defineProperty(this,"sessionSocketUrl",void 0),_defineProperty(this,"sessionServerUrl",void 0),this.url=e,this.target=t||"_blank",this.features=r||getPopupFeatures$1(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=i,this.sessionServerUrl=o||SESSION_SERVER_API_URL,this.sessionSocketUrl=n||SESSION_SERVER_SOCKET_URL,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),void 0===this.window&&clearInterval(this.windowTimer)},500))}open(){var e;if(this.window=window.open(this.url,this.target,this.features),!this.window)throw LoginError$1.popupBlocked();null!==(e=this.window)&&void 0!==e&&e.focus&&this.window.focus()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url):window.location.href=this.url}async listenOnChannel(e){const t=new SecurePubSub$1({serverUrl:this.sessionServerUrl,socketUrl:this.sessionSocketUrl}),r=await t.subscribe(e);this.close(),t.cleanup();const i=JSON.parse(r);return i.error?{error:i.error,state:i.state}:i.data}},MemoryStore$1=class{constructor(){_defineProperty(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}},BrowserStorage$1=class{constructor(e,t){_defineProperty(this,"storage",void 0),_defineProperty(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch(r){}}static getInstance(e,t="local"){if(!this.instanceMap.has(e)){let r;r="local"===t&&storageAvailable$2("localStorage")?window.localStorage:"session"===t&&storageAvailable$2("sessionStorage")?window.sessionStorage:new MemoryStore$1,this.instanceMap.set(e,new this(e,r))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(r))}};_defineProperty(BrowserStorage$1,"instanceMap",new Map);class Auth{constructor(e){if(_defineProperty(this,"state",{}),_defineProperty(this,"options",void 0),_defineProperty(this,"sessionManager",void 0),_defineProperty(this,"currentStorage",void 0),_defineProperty(this,"_storageBaseKey","auth_store"),_defineProperty(this,"dappState",void 0),_defineProperty(this,"addVersionInUrls",!0),!e.clientId)throw InitializationError$1.invalidParams("clientId is required");if(e.network||(e.network=WEB3AUTH_NETWORK.SAPPHIRE_MAINNET),e.buildEnv||(e.buildEnv=BUILD_ENV$1.PRODUCTION),(e.buildEnv===BUILD_ENV$1.DEVELOPMENT||e.buildEnv===BUILD_ENV$1.TESTING||e.sdkUrl)&&(this.addVersionInUrls=!1),e.sdkUrl||e.useMpc||(e.buildEnv===BUILD_ENV$1.DEVELOPMENT?(e.sdkUrl="http://localhost:3000",e.dashboardUrl="http://localhost:5173"):e.buildEnv===BUILD_ENV$1.STAGING?(e.sdkUrl="https://staging-auth.web3auth.io",e.dashboardUrl="https://staging-account.web3auth.io"):e.buildEnv===BUILD_ENV$1.TESTING?(e.sdkUrl="https://develop-auth.web3auth.io",e.dashboardUrl="https://develop-account.web3auth.io"):(e.sdkUrl="https://auth.web3auth.io",e.dashboardUrl="https://account.web3auth.io")),e.useMpc&&!e.sdkUrl){if(Object.values(WEB3AUTH_LEGACY_NETWORK).includes(e.network))throw InitializationError$1.invalidParams("MPC is not supported on legacy networks, please use sapphire_devnet or sapphire_mainnet.");e.buildEnv===BUILD_ENV$1.DEVELOPMENT?e.sdkUrl="http://localhost:3000":e.buildEnv===BUILD_ENV$1.STAGING?e.sdkUrl="https://staging-mpc-auth.web3auth.io":e.buildEnv===BUILD_ENV$1.TESTING?e.sdkUrl="https://develop-mpc-auth.web3auth.io":e.sdkUrl="https://mpc-auth.web3auth.io"}e.redirectUrl||"undefined"==typeof window||(e.redirectUrl=`${window.location.protocol}//${window.location.host}${window.location.pathname}`),e.uxMode||(e.uxMode=UX_MODE$1.REDIRECT),"boolean"!=typeof e.replaceUrlOnRedirect&&(e.replaceUrlOnRedirect=!0),e.originData||(e.originData={}),e.whiteLabel||(e.whiteLabel={}),e.loginConfig||(e.loginConfig={}),e.mfaSettings||(e.mfaSettings={}),e.storageServerUrl||(e.storageServerUrl=SESSION_SERVER_API_URL),e.sessionSocketUrl||(e.sessionSocketUrl=SESSION_SERVER_SOCKET_URL),e.storageKey||(e.storageKey="local"),e.webauthnTransports||(e.webauthnTransports=["internal"]),e.sessionTime||(e.sessionTime=86400),this.options=e}get privKey(){return this.options.useMpc?this.state.factorKey||"":this.state.privKey?this.state.privKey.padStart(64,"0"):""}get coreKitKey(){return this.state.coreKitKey?this.state.coreKitKey.padStart(64,"0"):""}get ed25519PrivKey(){return this.state.ed25519PrivKey?this.state.ed25519PrivKey.padStart(128,"0"):""}get coreKitEd25519Key(){return this.state.coreKitEd25519PrivKey?this.state.coreKitEd25519PrivKey.padStart(128,"0"):""}get sessionId(){return this.state.sessionId||""}get sessionNamespace(){return this.options.sessionNamespace||""}get appState(){return this.state.userInfo.appState||this.dappState||""}get baseUrl(){return this.addVersionInUrls?`${this.options.sdkUrl}/v${version$2.split(".")[0]}`:`${this.options.sdkUrl}`}get dashboardUrl(){return this.addVersionInUrls?`${this.options.dashboardUrl}/v${version$2.split(".")[0]}`:`${this.options.dashboardUrl}`}async init(){const e=getHashQueryParams$1(this.options.replaceUrlOnRedirect);e.sessionNamespace&&(this.options.sessionNamespace=e.sessionNamespace);const t=this.options.sessionNamespace?`${this._storageBaseKey}_${this.options.sessionNamespace}`:this._storageBaseKey;this.currentStorage=BrowserStorage$1.getInstance(t,this.options.storageKey);const r=this.currentStorage.get("sessionId");if(this.sessionManager=new SessionManager({sessionServerBaseUrl:this.options.storageServerUrl,sessionNamespace:this.options.sessionNamespace,sessionTime:this.options.sessionTime,sessionId:r,allowedOrigin:this.options.sdkUrl}),this.options.network===WEB3AUTH_NETWORK.TESTNET||(this.options.network,WEB3AUTH_NETWORK.SAPPHIRE_DEVNET),this.options.buildEnv,BUILD_ENV$1.PRODUCTION,e.error)throw this.dappState=e.state,LoginError$1.loginFailed(e.error);if(e.sessionId&&(this.currentStorage.set("sessionId",e.sessionId),this.sessionManager.sessionId=e.sessionId),this.sessionManager.sessionId){const e=await this._authorizeSession();this.updateState(e),0===Object.keys(e).length?this.currentStorage.set("sessionId",""):this.updateState({sessionId:this.sessionManager.sessionId})}}async login(e){if(!e.loginProvider)throw LoginError$1.invalidLoginParams("loginProvider is required");const t={redirectUrl:this.options.redirectUrl},r=_objectSpread2(_objectSpread2({loginProvider:e.loginProvider},t),e),i={actionType:AUTH_ACTIONS.LOGIN,options:this.options,params:r},n=await this.authHandler(`${this.baseUrl}/start`,i,getTimeout$1(e.loginProvider));if(this.options.uxMode===UX_MODE$1.REDIRECT)return null;if(n.error)throw this.dappState=n.state,LoginError$1.loginFailed(n.error);return this.sessionManager.sessionId=n.sessionId,this.options.sessionNamespace=n.sessionNamespace,this.currentStorage.set("sessionId",n.sessionId),await this.rehydrateSession(),{privKey:this.privKey}}async logout(){if(!this.sessionManager.sessionId)throw LoginError$1.userNotLoggedIn();await this.sessionManager.invalidateSession(),this.updateState({privKey:"",coreKitKey:"",coreKitEd25519PrivKey:"",ed25519PrivKey:"",walletKey:"",oAuthPrivateKey:"",tKey:"",metadataNonce:"",keyMode:void 0,userInfo:{name:"",profileImage:"",dappShare:"",idToken:"",oAuthIdToken:"",oAuthAccessToken:"",appState:"",email:"",verifier:"",verifierId:"",aggregateVerifier:"",typeOfLogin:"",isMfaEnabled:!1},authToken:"",sessionId:"",factorKey:"",signatures:[],tssShareIndex:-1,tssPubKey:"",tssShare:"",tssNonce:-1}),this.currentStorage.set("sessionId","")}async enableMFA(e){var t;if(!this.sessionId)throw LoginError$1.userNotLoggedIn();if(this.state.userInfo.isMfaEnabled)throw LoginError$1.mfaAlreadyEnabled();const r={redirectUrl:this.options.redirectUrl},i={actionType:AUTH_ACTIONS.ENABLE_MFA,options:this.options,params:_objectSpread2(_objectSpread2(_objectSpread2({},r),e),{},{loginProvider:this.state.userInfo.typeOfLogin,extraLoginOptions:{login_hint:this.state.userInfo.verifierId},mfaLevel:"mandatory"}),sessionId:this.sessionId},n=await this.authHandler(`${this.baseUrl}/start`,i,getTimeout$1(i.params.loginProvider));if(this.options.uxMode===UX_MODE$1.REDIRECT)return null;if(n.error)throw this.dappState=n.state,LoginError$1.loginFailed(n.error);return this.sessionManager.sessionId=n.sessionId,this.options.sessionNamespace=n.sessionNamespace,this.currentStorage.set("sessionId",n.sessionId),await this.rehydrateSession(),Boolean(null===(t=this.state.userInfo)||void 0===t?void 0:t.isMfaEnabled)}async manageMFA(e){if(!this.sessionId)throw LoginError$1.userNotLoggedIn();if(!this.state.userInfo.isMfaEnabled)throw LoginError$1.mfaNotEnabled();const t={redirectUrl:`${this.dashboardUrl}/wallet/account`,dappUrl:`${window.location.origin}${window.location.pathname}`},r=SessionManager.generateRandomSessionKey(),i={actionType:AUTH_ACTIONS.MANAGE_MFA,options:_objectSpread2(_objectSpread2({},this.options),{},{uxMode:"redirect"}),params:_objectSpread2(_objectSpread2(_objectSpread2({},t),e),{},{loginProvider:this.state.userInfo.typeOfLogin,extraLoginOptions:{login_hint:this.state.userInfo.verifierId},appState:jsonToBase64$1({loginId:r})}),sessionId:this.sessionId};this.createLoginSession(r,i,i.options.sessionTime,!0);const n={loginId:r,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl},o=constructURL$1({baseURL:`${this.baseUrl}/start`,hash:{b64Params:jsonToBase64$1(n)}});window.open(o,"_blank")}async manageSocialFactor(e,t){if(!this.sessionId)throw LoginError$1.userNotLoggedIn();const r={redirectUrl:this.options.redirectUrl},i={actionType:e,options:this.options,params:_objectSpread2(_objectSpread2({},r),t),sessionId:this.sessionId},n=await this.authHandler(`${this.baseUrl}/start`,i);if(this.options.uxMode!==UX_MODE$1.REDIRECT)return!n.error}async addAuthenticatorFactor(e){if(!this.sessionId)throw LoginError$1.userNotLoggedIn();const t={redirectUrl:this.options.redirectUrl},r={actionType:AUTH_ACTIONS.ADD_AUTHENTICATOR_FACTOR,options:this.options,params:_objectSpread2(_objectSpread2(_objectSpread2({},t),e),{},{loginProvider:LOGIN_PROVIDER$1.AUTHENTICATOR}),sessionId:this.sessionId},i=await this.authHandler(`${this.baseUrl}/start`,r);if(this.options.uxMode!==UX_MODE$1.REDIRECT)return!i.error}async addPasskeyFactor(e){if(!this.sessionId)throw LoginError$1.userNotLoggedIn();const t={redirectUrl:this.options.redirectUrl},r={actionType:AUTH_ACTIONS.ADD_PASSKEY_FACTOR,options:this.options,params:_objectSpread2(_objectSpread2(_objectSpread2({},t),e),{},{loginProvider:LOGIN_PROVIDER$1.PASSKEYS}),sessionId:this.sessionId},i=await this.authHandler(`${this.baseUrl}/start`,r);if(this.options.uxMode!==UX_MODE$1.REDIRECT)return!i.error}getUserInfo(){if(!this.sessionManager.sessionId)throw LoginError$1.userNotLoggedIn();return this.state.userInfo}async createLoginSession(e,t,r=600,i=!1){if(!this.sessionManager)throw InitializationError$1.notInitialized();const n=new SessionManager({sessionServerBaseUrl:t.options.storageServerUrl,sessionNamespace:t.options.sessionNamespace,sessionTime:r,sessionId:e,allowedOrigin:this.options.sdkUrl}).createSession(JSON.parse(JSON.stringify(t)));t.options.uxMode!==UX_MODE$1.REDIRECT||i||await n}async _authorizeSession(){try{if(!this.sessionManager.sessionId)return{};return await this.sessionManager.authorizeSession()}catch(err){return loglevel$2.error("authorization failed",err),{}}}updateState(e){this.state=_objectSpread2(_objectSpread2({},this.state),e)}async rehydrateSession(){const e=await this._authorizeSession();this.updateState(e)}async authHandler(e,t,r=1e4){const i=SessionManager.generateRandomSessionKey();await this.createLoginSession(i,t);const n={loginId:i,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl};if(this.options.uxMode===UX_MODE$1.REDIRECT){const t=constructURL$1({baseURL:e,hash:{b64Params:jsonToBase64$1(n)}});return void(window.location.href=t)}const o=constructURL$1({baseURL:e,hash:{b64Params:jsonToBase64$1(n)}}),a=new PopupHandler$1({url:o,timeout:r,sessionServerUrl:this.options.storageServerUrl,sessionSocketUrl:this.options.sessionSocketUrl});return new Promise((e,t)=>{a.on("close",()=>{t(LoginError$1.popupClosed())}),a.listenOnChannel(i).then(e).catch(t);try{a.open()}catch(r){t(r)}})}}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var naclFast={exports:{}},hasRequiredNaclFast;function requireNaclFast(){return hasRequiredNaclFast||(hasRequiredNaclFast=1,function(e){var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=function(){throw new Error("no PRNG")},i=new Uint8Array(16),n=new Uint8Array(32);n[0]=9;var o=t(),a=t([1]),s=t([56129,1]),u=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),c=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,r,i){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=i>>24&255,e[t+5]=i>>16&255,e[t+6]=i>>8&255,e[t+7]=255&i}function p(e,t,r,i,n){var o,a=0;for(o=0;o<n;o++)a|=e[t+o]^r[i+o];return(1&a-1>>>8)-1}function m(e,t,r,i){return p(e,t,r,i,16)}function g(e,t,r,i){return p(e,t,r,i,32)}function y(e,t,r,i){!function(e,t,r,i){for(var n,o=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,a=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,c=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,v=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,_=o,E=a,S=s,A=u,M=l,R=c,x=h,k=d,T=f,P=p,C=m,I=g,$=y,B=b,O=w,N=v,L=0;L<20;L+=2)_^=(n=($^=(n=(T^=(n=(M^=(n=_+$|0)<<7|n>>>25)+_|0)<<9|n>>>23)+M|0)<<13|n>>>19)+T|0)<<18|n>>>14,R^=(n=(E^=(n=(B^=(n=(P^=(n=R+E|0)<<7|n>>>25)+R|0)<<9|n>>>23)+P|0)<<13|n>>>19)+B|0)<<18|n>>>14,C^=(n=(x^=(n=(S^=(n=(O^=(n=C+x|0)<<7|n>>>25)+C|0)<<9|n>>>23)+O|0)<<13|n>>>19)+S|0)<<18|n>>>14,N^=(n=(I^=(n=(k^=(n=(A^=(n=N+I|0)<<7|n>>>25)+N|0)<<9|n>>>23)+A|0)<<13|n>>>19)+k|0)<<18|n>>>14,_^=(n=(A^=(n=(S^=(n=(E^=(n=_+A|0)<<7|n>>>25)+_|0)<<9|n>>>23)+E|0)<<13|n>>>19)+S|0)<<18|n>>>14,R^=(n=(M^=(n=(k^=(n=(x^=(n=R+M|0)<<7|n>>>25)+R|0)<<9|n>>>23)+x|0)<<13|n>>>19)+k|0)<<18|n>>>14,C^=(n=(P^=(n=(T^=(n=(I^=(n=C+P|0)<<7|n>>>25)+C|0)<<9|n>>>23)+I|0)<<13|n>>>19)+T|0)<<18|n>>>14,N^=(n=(O^=(n=(B^=(n=($^=(n=N+O|0)<<7|n>>>25)+N|0)<<9|n>>>23)+$|0)<<13|n>>>19)+B|0)<<18|n>>>14;_=_+o|0,E=E+a|0,S=S+s|0,A=A+u|0,M=M+l|0,R=R+c|0,x=x+h|0,k=k+d|0,T=T+f|0,P=P+p|0,C=C+m|0,I=I+g|0,$=$+y|0,B=B+b|0,O=O+w|0,N=N+v|0,e[0]=_>>>0&255,e[1]=_>>>8&255,e[2]=_>>>16&255,e[3]=_>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=S>>>0&255,e[9]=S>>>8&255,e[10]=S>>>16&255,e[11]=S>>>24&255,e[12]=A>>>0&255,e[13]=A>>>8&255,e[14]=A>>>16&255,e[15]=A>>>24&255,e[16]=M>>>0&255,e[17]=M>>>8&255,e[18]=M>>>16&255,e[19]=M>>>24&255,e[20]=R>>>0&255,e[21]=R>>>8&255,e[22]=R>>>16&255,e[23]=R>>>24&255,e[24]=x>>>0&255,e[25]=x>>>8&255,e[26]=x>>>16&255,e[27]=x>>>24&255,e[28]=k>>>0&255,e[29]=k>>>8&255,e[30]=k>>>16&255,e[31]=k>>>24&255,e[32]=T>>>0&255,e[33]=T>>>8&255,e[34]=T>>>16&255,e[35]=T>>>24&255,e[36]=P>>>0&255,e[37]=P>>>8&255,e[38]=P>>>16&255,e[39]=P>>>24&255,e[40]=C>>>0&255,e[41]=C>>>8&255,e[42]=C>>>16&255,e[43]=C>>>24&255,e[44]=I>>>0&255,e[45]=I>>>8&255,e[46]=I>>>16&255,e[47]=I>>>24&255,e[48]=$>>>0&255,e[49]=$>>>8&255,e[50]=$>>>16&255,e[51]=$>>>24&255,e[52]=B>>>0&255,e[53]=B>>>8&255,e[54]=B>>>16&255,e[55]=B>>>24&255,e[56]=O>>>0&255,e[57]=O>>>8&255,e[58]=O>>>16&255,e[59]=O>>>24&255,e[60]=N>>>0&255,e[61]=N>>>8&255,e[62]=N>>>16&255,e[63]=N>>>24&255}(e,t,r,i)}function b(e,t,r,i){!function(e,t,r,i){for(var n,o=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,a=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,c=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,d=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,v=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,_=0;_<20;_+=2)o^=(n=(y^=(n=(f^=(n=(l^=(n=o+y|0)<<7|n>>>25)+o|0)<<9|n>>>23)+l|0)<<13|n>>>19)+f|0)<<18|n>>>14,c^=(n=(a^=(n=(b^=(n=(p^=(n=c+a|0)<<7|n>>>25)+c|0)<<9|n>>>23)+p|0)<<13|n>>>19)+b|0)<<18|n>>>14,m^=(n=(h^=(n=(s^=(n=(w^=(n=m+h|0)<<7|n>>>25)+m|0)<<9|n>>>23)+w|0)<<13|n>>>19)+s|0)<<18|n>>>14,v^=(n=(g^=(n=(d^=(n=(u^=(n=v+g|0)<<7|n>>>25)+v|0)<<9|n>>>23)+u|0)<<13|n>>>19)+d|0)<<18|n>>>14,o^=(n=(u^=(n=(s^=(n=(a^=(n=o+u|0)<<7|n>>>25)+o|0)<<9|n>>>23)+a|0)<<13|n>>>19)+s|0)<<18|n>>>14,c^=(n=(l^=(n=(d^=(n=(h^=(n=c+l|0)<<7|n>>>25)+c|0)<<9|n>>>23)+h|0)<<13|n>>>19)+d|0)<<18|n>>>14,m^=(n=(p^=(n=(f^=(n=(g^=(n=m+p|0)<<7|n>>>25)+m|0)<<9|n>>>23)+g|0)<<13|n>>>19)+f|0)<<18|n>>>14,v^=(n=(w^=(n=(b^=(n=(y^=(n=v+w|0)<<7|n>>>25)+v|0)<<9|n>>>23)+y|0)<<13|n>>>19)+b|0)<<18|n>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=c>>>0&255,e[5]=c>>>8&255,e[6]=c>>>16&255,e[7]=c>>>24&255,e[8]=m>>>0&255,e[9]=m>>>8&255,e[10]=m>>>16&255,e[11]=m>>>24&255,e[12]=v>>>0&255,e[13]=v>>>8&255,e[14]=v>>>16&255,e[15]=v>>>24&255,e[16]=h>>>0&255,e[17]=h>>>8&255,e[18]=h>>>16&255,e[19]=h>>>24&255,e[20]=d>>>0&255,e[21]=d>>>8&255,e[22]=d>>>16&255,e[23]=d>>>24&255,e[24]=f>>>0&255,e[25]=f>>>8&255,e[26]=f>>>16&255,e[27]=f>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,r,i)}var w=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function v(e,t,r,i,n,o,a){var s,u,l=new Uint8Array(16),c=new Uint8Array(64);for(u=0;u<16;u++)l[u]=0;for(u=0;u<8;u++)l[u]=o[u];for(;n>=64;){for(y(c,l,a,w),u=0;u<64;u++)e[t+u]=r[i+u]^c[u];for(s=1,u=8;u<16;u++)s=s+(255&l[u])|0,l[u]=255&s,s>>>=8;n-=64,t+=64,i+=64}if(n>0)for(y(c,l,a,w),u=0;u<n;u++)e[t+u]=r[i+u]^c[u];return 0}function _(e,t,r,i,n){var o,a,s=new Uint8Array(16),u=new Uint8Array(64);for(a=0;a<16;a++)s[a]=0;for(a=0;a<8;a++)s[a]=i[a];for(;r>=64;){for(y(u,s,n,w),a=0;a<64;a++)e[t+a]=u[a];for(o=1,a=8;a<16;a++)o=o+(255&s[a])|0,s[a]=255&o,o>>>=8;r-=64,t+=64}if(r>0)for(y(u,s,n,w),a=0;a<r;a++)e[t+a]=u[a];return 0}function E(e,t,r,i,n){var o=new Uint8Array(32);b(o,i,n,w);for(var a=new Uint8Array(8),s=0;s<8;s++)a[s]=i[s+16];return _(e,t,r,a,o)}function S(e,t,r,i,n,o,a){var s=new Uint8Array(32);b(s,o,a,w);for(var u=new Uint8Array(8),l=0;l<8;l++)u[l]=o[l+16];return v(e,t,r,i,n,u,s)}var A=function(e){var t,r,i,n,o,a,s,u;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),i=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|i<<6),n=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(i>>>7|n<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(n>>>4|o<<12),this.r[5]=o>>>1&8190,a=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|a<<2),s=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(a>>>11|s<<5),u=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(s>>>8|u<<8),this.r[9]=u>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function M(e,t,r,i,n,o){var a=new A(o);return a.update(r,i,n),a.finish(e,t),0}function R(e,t,r,i,n,o){var a=new Uint8Array(16);return M(a,0,r,i,n,o),m(e,t,a,0)}function x(e,t,r,i,n){var o;if(r<32)return-1;for(S(e,0,t,0,r,i,n),M(e,16,e,32,r-32,e),o=0;o<16;o++)e[o]=0;return 0}function k(e,t,r,i,n){var o,a=new Uint8Array(32);if(r<32)return-1;if(E(a,0,32,i,n),0!==R(t,16,t,32,r-32,a))return-1;for(S(e,0,t,0,r,i,n),o=0;o<32;o++)e[o]=0;return 0}function T(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function P(e){var t,r,i=1;for(t=0;t<16;t++)r=e[t]+i+65535,i=Math.floor(r/65536),e[t]=r-65536*i;e[0]+=i-1+37*(i-1)}function C(e,t,r){for(var i,n=~(r-1),o=0;o<16;o++)i=n&(e[o]^t[o]),e[o]^=i,t[o]^=i}function I(e,r){var i,n,o,a=t(),s=t();for(i=0;i<16;i++)s[i]=r[i];for(P(s),P(s),P(s),n=0;n<2;n++){for(a[0]=s[0]-65517,i=1;i<15;i++)a[i]=s[i]-65535-(a[i-1]>>16&1),a[i-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),o=a[15]>>16&1,a[14]&=65535,C(s,a,1-o)}for(i=0;i<16;i++)e[2*i]=255&s[i],e[2*i+1]=s[i]>>8}function $(e,t){var r=new Uint8Array(32),i=new Uint8Array(32);return I(r,e),I(i,t),g(r,0,i,0)}function B(e){var t=new Uint8Array(32);return I(t,e),1&t[0]}function O(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function N(e,t,r){for(var i=0;i<16;i++)e[i]=t[i]+r[i]}function L(e,t,r){for(var i=0;i<16;i++)e[i]=t[i]-r[i]}function q(e,t,r){var i,n,o=0,a=0,s=0,u=0,l=0,c=0,h=0,d=0,f=0,p=0,m=0,g=0,y=0,b=0,w=0,v=0,_=0,E=0,S=0,A=0,M=0,R=0,x=0,k=0,T=0,P=0,C=0,I=0,$=0,B=0,O=0,N=r[0],L=r[1],q=r[2],j=r[3],U=r[4],D=r[5],F=r[6],W=r[7],K=r[8],H=r[9],z=r[10],V=r[11],G=r[12],Y=r[13],J=r[14],Z=r[15];o+=(i=t[0])*N,a+=i*L,s+=i*q,u+=i*j,l+=i*U,c+=i*D,h+=i*F,d+=i*W,f+=i*K,p+=i*H,m+=i*z,g+=i*V,y+=i*G,b+=i*Y,w+=i*J,v+=i*Z,a+=(i=t[1])*N,s+=i*L,u+=i*q,l+=i*j,c+=i*U,h+=i*D,d+=i*F,f+=i*W,p+=i*K,m+=i*H,g+=i*z,y+=i*V,b+=i*G,w+=i*Y,v+=i*J,_+=i*Z,s+=(i=t[2])*N,u+=i*L,l+=i*q,c+=i*j,h+=i*U,d+=i*D,f+=i*F,p+=i*W,m+=i*K,g+=i*H,y+=i*z,b+=i*V,w+=i*G,v+=i*Y,_+=i*J,E+=i*Z,u+=(i=t[3])*N,l+=i*L,c+=i*q,h+=i*j,d+=i*U,f+=i*D,p+=i*F,m+=i*W,g+=i*K,y+=i*H,b+=i*z,w+=i*V,v+=i*G,_+=i*Y,E+=i*J,S+=i*Z,l+=(i=t[4])*N,c+=i*L,h+=i*q,d+=i*j,f+=i*U,p+=i*D,m+=i*F,g+=i*W,y+=i*K,b+=i*H,w+=i*z,v+=i*V,_+=i*G,E+=i*Y,S+=i*J,A+=i*Z,c+=(i=t[5])*N,h+=i*L,d+=i*q,f+=i*j,p+=i*U,m+=i*D,g+=i*F,y+=i*W,b+=i*K,w+=i*H,v+=i*z,_+=i*V,E+=i*G,S+=i*Y,A+=i*J,M+=i*Z,h+=(i=t[6])*N,d+=i*L,f+=i*q,p+=i*j,m+=i*U,g+=i*D,y+=i*F,b+=i*W,w+=i*K,v+=i*H,_+=i*z,E+=i*V,S+=i*G,A+=i*Y,M+=i*J,R+=i*Z,d+=(i=t[7])*N,f+=i*L,p+=i*q,m+=i*j,g+=i*U,y+=i*D,b+=i*F,w+=i*W,v+=i*K,_+=i*H,E+=i*z,S+=i*V,A+=i*G,M+=i*Y,R+=i*J,x+=i*Z,f+=(i=t[8])*N,p+=i*L,m+=i*q,g+=i*j,y+=i*U,b+=i*D,w+=i*F,v+=i*W,_+=i*K,E+=i*H,S+=i*z,A+=i*V,M+=i*G,R+=i*Y,x+=i*J,k+=i*Z,p+=(i=t[9])*N,m+=i*L,g+=i*q,y+=i*j,b+=i*U,w+=i*D,v+=i*F,_+=i*W,E+=i*K,S+=i*H,A+=i*z,M+=i*V,R+=i*G,x+=i*Y,k+=i*J,T+=i*Z,m+=(i=t[10])*N,g+=i*L,y+=i*q,b+=i*j,w+=i*U,v+=i*D,_+=i*F,E+=i*W,S+=i*K,A+=i*H,M+=i*z,R+=i*V,x+=i*G,k+=i*Y,T+=i*J,P+=i*Z,g+=(i=t[11])*N,y+=i*L,b+=i*q,w+=i*j,v+=i*U,_+=i*D,E+=i*F,S+=i*W,A+=i*K,M+=i*H,R+=i*z,x+=i*V,k+=i*G,T+=i*Y,P+=i*J,C+=i*Z,y+=(i=t[12])*N,b+=i*L,w+=i*q,v+=i*j,_+=i*U,E+=i*D,S+=i*F,A+=i*W,M+=i*K,R+=i*H,x+=i*z,k+=i*V,T+=i*G,P+=i*Y,C+=i*J,I+=i*Z,b+=(i=t[13])*N,w+=i*L,v+=i*q,_+=i*j,E+=i*U,S+=i*D,A+=i*F,M+=i*W,R+=i*K,x+=i*H,k+=i*z,T+=i*V,P+=i*G,C+=i*Y,I+=i*J,$+=i*Z,w+=(i=t[14])*N,v+=i*L,_+=i*q,E+=i*j,S+=i*U,A+=i*D,M+=i*F,R+=i*W,x+=i*K,k+=i*H,T+=i*z,P+=i*V,C+=i*G,I+=i*Y,$+=i*J,B+=i*Z,v+=(i=t[15])*N,a+=38*(E+=i*q),s+=38*(S+=i*j),u+=38*(A+=i*U),l+=38*(M+=i*D),c+=38*(R+=i*F),h+=38*(x+=i*W),d+=38*(k+=i*K),f+=38*(T+=i*H),p+=38*(P+=i*z),m+=38*(C+=i*V),g+=38*(I+=i*G),y+=38*($+=i*Y),b+=38*(B+=i*J),w+=38*(O+=i*Z),o=(i=(o+=38*(_+=i*L))+(n=1)+65535)-65536*(n=Math.floor(i/65536)),a=(i=a+n+65535)-65536*(n=Math.floor(i/65536)),s=(i=s+n+65535)-65536*(n=Math.floor(i/65536)),u=(i=u+n+65535)-65536*(n=Math.floor(i/65536)),l=(i=l+n+65535)-65536*(n=Math.floor(i/65536)),c=(i=c+n+65535)-65536*(n=Math.floor(i/65536)),h=(i=h+n+65535)-65536*(n=Math.floor(i/65536)),d=(i=d+n+65535)-65536*(n=Math.floor(i/65536)),f=(i=f+n+65535)-65536*(n=Math.floor(i/65536)),p=(i=p+n+65535)-65536*(n=Math.floor(i/65536)),m=(i=m+n+65535)-65536*(n=Math.floor(i/65536)),g=(i=g+n+65535)-65536*(n=Math.floor(i/65536)),y=(i=y+n+65535)-65536*(n=Math.floor(i/65536)),b=(i=b+n+65535)-65536*(n=Math.floor(i/65536)),w=(i=w+n+65535)-65536*(n=Math.floor(i/65536)),v=(i=v+n+65535)-65536*(n=Math.floor(i/65536)),o=(i=(o+=n-1+37*(n-1))+(n=1)+65535)-65536*(n=Math.floor(i/65536)),a=(i=a+n+65535)-65536*(n=Math.floor(i/65536)),s=(i=s+n+65535)-65536*(n=Math.floor(i/65536)),u=(i=u+n+65535)-65536*(n=Math.floor(i/65536)),l=(i=l+n+65535)-65536*(n=Math.floor(i/65536)),c=(i=c+n+65535)-65536*(n=Math.floor(i/65536)),h=(i=h+n+65535)-65536*(n=Math.floor(i/65536)),d=(i=d+n+65535)-65536*(n=Math.floor(i/65536)),f=(i=f+n+65535)-65536*(n=Math.floor(i/65536)),p=(i=p+n+65535)-65536*(n=Math.floor(i/65536)),m=(i=m+n+65535)-65536*(n=Math.floor(i/65536)),g=(i=g+n+65535)-65536*(n=Math.floor(i/65536)),y=(i=y+n+65535)-65536*(n=Math.floor(i/65536)),b=(i=b+n+65535)-65536*(n=Math.floor(i/65536)),w=(i=w+n+65535)-65536*(n=Math.floor(i/65536)),v=(i=v+n+65535)-65536*(n=Math.floor(i/65536)),o+=n-1+37*(n-1),e[0]=o,e[1]=a,e[2]=s,e[3]=u,e[4]=l,e[5]=c,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=m,e[11]=g,e[12]=y,e[13]=b,e[14]=w,e[15]=v}function j(e,t){q(e,t,t)}function U(e,r){var i,n=t();for(i=0;i<16;i++)n[i]=r[i];for(i=253;i>=0;i--)j(n,n),2!==i&&4!==i&&q(n,n,r);for(i=0;i<16;i++)e[i]=n[i]}function D(e,r){var i,n=t();for(i=0;i<16;i++)n[i]=r[i];for(i=250;i>=0;i--)j(n,n),1!==i&&q(n,n,r);for(i=0;i<16;i++)e[i]=n[i]}function F(e,r,i){var n,o,a=new Uint8Array(32),u=new Float64Array(80),l=t(),c=t(),h=t(),d=t(),f=t(),p=t();for(o=0;o<31;o++)a[o]=r[o];for(a[31]=127&r[31]|64,a[0]&=248,O(u,i),o=0;o<16;o++)c[o]=u[o],d[o]=l[o]=h[o]=0;for(l[0]=d[0]=1,o=254;o>=0;--o)C(l,c,n=a[o>>>3]>>>(7&o)&1),C(h,d,n),N(f,l,h),L(l,l,h),N(h,c,d),L(c,c,d),j(d,f),j(p,l),q(l,h,l),q(h,c,f),N(f,l,h),L(l,l,h),j(c,l),L(h,d,p),q(l,h,s),N(l,l,d),q(h,h,l),q(l,d,p),q(d,c,u),j(c,f),C(l,c,n),C(h,d,n);for(o=0;o<16;o++)u[o+16]=l[o],u[o+32]=h[o],u[o+48]=c[o],u[o+64]=d[o];var m=u.subarray(32),g=u.subarray(16);return U(m,m),q(g,g,m),I(e,g),0}function W(e,t){return F(e,t,n)}function K(e,t){return r(t,32),W(e,t)}function H(e,t,r){var n=new Uint8Array(32);return F(n,r,t),b(e,i,n,w)}A.prototype.blocks=function(e,t,r){for(var i,n,o,a,s,u,l,c,h,d,f,p,m,g,y,b,w,v,_,E=this.fin?0:2048,S=this.h[0],A=this.h[1],M=this.h[2],R=this.h[3],x=this.h[4],k=this.h[5],T=this.h[6],P=this.h[7],C=this.h[8],I=this.h[9],$=this.r[0],B=this.r[1],O=this.r[2],N=this.r[3],L=this.r[4],q=this.r[5],j=this.r[6],U=this.r[7],D=this.r[8],F=this.r[9];r>=16;)d=h=0,d+=(S+=8191&(i=255&e[t+0]|(255&e[t+1])<<8))*$,d+=(A+=8191&(i>>>13|(n=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*F),d+=(M+=8191&(n>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*D),d+=(R+=8191&(o>>>7|(a=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*U),h=(d+=(x+=8191&(a>>>4|(s=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*j))>>>13,d&=8191,d+=(k+=s>>>1&8191)*(5*q),d+=(T+=8191&(s>>>14|(u=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*L),d+=(P+=8191&(u>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*N),d+=(C+=8191&(l>>>8|(c=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*O),f=h+=(d+=(I+=c>>>5|E)*(5*B))>>>13,f+=S*B,f+=A*$,f+=M*(5*F),f+=R*(5*D),h=(f+=x*(5*U))>>>13,f&=8191,f+=k*(5*j),f+=T*(5*q),f+=P*(5*L),f+=C*(5*N),h+=(f+=I*(5*O))>>>13,f&=8191,p=h,p+=S*O,p+=A*B,p+=M*$,p+=R*(5*F),h=(p+=x*(5*D))>>>13,p&=8191,p+=k*(5*U),p+=T*(5*j),p+=P*(5*q),p+=C*(5*L),m=h+=(p+=I*(5*N))>>>13,m+=S*N,m+=A*O,m+=M*B,m+=R*$,h=(m+=x*(5*F))>>>13,m&=8191,m+=k*(5*D),m+=T*(5*U),m+=P*(5*j),m+=C*(5*q),g=h+=(m+=I*(5*L))>>>13,g+=S*L,g+=A*N,g+=M*O,g+=R*B,h=(g+=x*$)>>>13,g&=8191,g+=k*(5*F),g+=T*(5*D),g+=P*(5*U),g+=C*(5*j),y=h+=(g+=I*(5*q))>>>13,y+=S*q,y+=A*L,y+=M*N,y+=R*O,h=(y+=x*B)>>>13,y&=8191,y+=k*$,y+=T*(5*F),y+=P*(5*D),y+=C*(5*U),b=h+=(y+=I*(5*j))>>>13,b+=S*j,b+=A*q,b+=M*L,b+=R*N,h=(b+=x*O)>>>13,b&=8191,b+=k*B,b+=T*$,b+=P*(5*F),b+=C*(5*D),w=h+=(b+=I*(5*U))>>>13,w+=S*U,w+=A*j,w+=M*q,w+=R*L,h=(w+=x*N)>>>13,w&=8191,w+=k*O,w+=T*B,w+=P*$,w+=C*(5*F),v=h+=(w+=I*(5*D))>>>13,v+=S*D,v+=A*U,v+=M*j,v+=R*q,h=(v+=x*L)>>>13,v&=8191,v+=k*N,v+=T*O,v+=P*B,v+=C*$,_=h+=(v+=I*(5*F))>>>13,_+=S*F,_+=A*D,_+=M*U,_+=R*j,h=(_+=x*q)>>>13,_&=8191,_+=k*L,_+=T*N,_+=P*O,_+=C*B,S=d=8191&(h=(h=((h+=(_+=I*$)>>>13)<<2)+h|0)+(d&=8191)|0),A=f+=h>>>=13,M=p&=8191,R=m&=8191,x=g&=8191,k=y&=8191,T=b&=8191,P=w&=8191,C=v&=8191,I=_&=8191,t+=16,r-=16;this.h[0]=S,this.h[1]=A,this.h[2]=M,this.h[3]=R,this.h[4]=x,this.h[5]=k,this.h[6]=T,this.h[7]=P,this.h[8]=C,this.h[9]=I},A.prototype.finish=function(e,t){var r,i,n,o,a=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,a[0]=this.h[0]+5,r=a[0]>>>13,a[0]&=8191,o=1;o<10;o++)a[o]=this.h[o]+r,r=a[o]>>>13,a[o]&=8191;for(a[9]-=8192,i=(1^r)-1,o=0;o<10;o++)a[o]&=i;for(i=~i,o=0;o<10;o++)this.h[o]=this.h[o]&i|a[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),n=this.h[0]+this.pad[0],this.h[0]=65535&n,o=1;o<8;o++)n=(this.h[o]+this.pad[o]|0)+(n>>>16)|0,this.h[o]=65535&n;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},A.prototype.update=function(e,t,r){var i,n;if(this.leftover){for((n=16-this.leftover)>r&&(n=r),i=0;i<n;i++)this.buffer[this.leftover+i]=e[t+i];if(r-=n,t+=n,this.leftover+=n,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(n=r-r%16,this.blocks(e,t,n),t+=n,r-=n),r){for(i=0;i<r;i++)this.buffer[this.leftover+i]=e[t+i];this.leftover+=r}};var z=x,V=k,G=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Y(e,t,r,i){for(var n,o,a,s,u,l,c,h,d,f,p,m,g,y,b,w,v,_,E,S,A,M,R,x,k,T,P=new Int32Array(16),C=new Int32Array(16),I=e[0],$=e[1],B=e[2],O=e[3],N=e[4],L=e[5],q=e[6],j=e[7],U=t[0],D=t[1],F=t[2],W=t[3],K=t[4],H=t[5],z=t[6],V=t[7],Y=0;i>=128;){for(E=0;E<16;E++)S=8*E+Y,P[E]=r[S+0]<<24|r[S+1]<<16|r[S+2]<<8|r[S+3],C[E]=r[S+4]<<24|r[S+5]<<16|r[S+6]<<8|r[S+7];for(E=0;E<80;E++)if(n=I,o=$,a=B,s=O,u=N,l=L,c=q,d=U,f=D,p=F,m=W,g=K,y=H,b=z,R=65535&(M=V),x=M>>>16,k=65535&(A=j),T=A>>>16,R+=65535&(M=(K>>>14|N<<18)^(K>>>18|N<<14)^(N>>>9|K<<23)),x+=M>>>16,k+=65535&(A=(N>>>14|K<<18)^(N>>>18|K<<14)^(K>>>9|N<<23)),T+=A>>>16,R+=65535&(M=K&H^~K&z),x+=M>>>16,k+=65535&(A=N&L^~N&q),T+=A>>>16,R+=65535&(M=G[2*E+1]),x+=M>>>16,k+=65535&(A=G[2*E]),T+=A>>>16,A=P[E%16],x+=(M=C[E%16])>>>16,k+=65535&A,T+=A>>>16,k+=(x+=(R+=65535&M)>>>16)>>>16,R=65535&(M=_=65535&R|x<<16),x=M>>>16,k=65535&(A=v=65535&k|(T+=k>>>16)<<16),T=A>>>16,R+=65535&(M=(U>>>28|I<<4)^(I>>>2|U<<30)^(I>>>7|U<<25)),x+=M>>>16,k+=65535&(A=(I>>>28|U<<4)^(U>>>2|I<<30)^(U>>>7|I<<25)),T+=A>>>16,x+=(M=U&D^U&F^D&F)>>>16,k+=65535&(A=I&$^I&B^$&B),T+=A>>>16,h=65535&(k+=(x+=(R+=65535&M)>>>16)>>>16)|(T+=k>>>16)<<16,w=65535&R|x<<16,R=65535&(M=m),x=M>>>16,k=65535&(A=s),T=A>>>16,x+=(M=_)>>>16,k+=65535&(A=v),T+=A>>>16,$=n,B=o,O=a,N=s=65535&(k+=(x+=(R+=65535&M)>>>16)>>>16)|(T+=k>>>16)<<16,L=u,q=l,j=c,I=h,D=d,F=f,W=p,K=m=65535&R|x<<16,H=g,z=y,V=b,U=w,E%16==15)for(S=0;S<16;S++)A=P[S],R=65535&(M=C[S]),x=M>>>16,k=65535&A,T=A>>>16,A=P[(S+9)%16],R+=65535&(M=C[(S+9)%16]),x+=M>>>16,k+=65535&A,T+=A>>>16,v=P[(S+1)%16],R+=65535&(M=((_=C[(S+1)%16])>>>1|v<<31)^(_>>>8|v<<24)^(_>>>7|v<<25)),x+=M>>>16,k+=65535&(A=(v>>>1|_<<31)^(v>>>8|_<<24)^v>>>7),T+=A>>>16,v=P[(S+14)%16],x+=(M=((_=C[(S+14)%16])>>>19|v<<13)^(v>>>29|_<<3)^(_>>>6|v<<26))>>>16,k+=65535&(A=(v>>>19|_<<13)^(_>>>29|v<<3)^v>>>6),T+=A>>>16,T+=(k+=(x+=(R+=65535&M)>>>16)>>>16)>>>16,P[S]=65535&k|T<<16,C[S]=65535&R|x<<16;R=65535&(M=U),x=M>>>16,k=65535&(A=I),T=A>>>16,A=e[0],x+=(M=t[0])>>>16,k+=65535&A,T+=A>>>16,T+=(k+=(x+=(R+=65535&M)>>>16)>>>16)>>>16,e[0]=I=65535&k|T<<16,t[0]=U=65535&R|x<<16,R=65535&(M=D),x=M>>>16,k=65535&(A=$),T=A>>>16,A=e[1],x+=(M=t[1])>>>16,k+=65535&A,T+=A>>>16,T+=(k+=(x+=(R+=65535&M)>>>16)>>>16)>>>16,e[1]=$=65535&k|T<<16,t[1]=D=65535&R|x<<16,R=65535&(M=F),x=M>>>16,k=65535&(A=B),T=A>>>16,A=e[2],x+=(M=t[2])>>>16,k+=65535&A,T+=A>>>16,T+=(k+=(x+=(R+=65535&M)>>>16)>>>16)>>>16,e[2]=B=65535&k|T<<16,t[2]=F=65535&R|x<<16,R=65535&(M=W),x=M>>>16,k=65535&(A=O),T=A>>>16,A=e[3],x+=(M=t[3])>>>16,k+=65535&A,T+=A>>>16,T+=(k+=(x+=(R+=65535&M)>>>16)>>>16)>>>16,e[3]=O=65535&k|T<<16,t[3]=W=65535&R|x<<16,R=65535&(M=K),x=M>>>16,k=65535&(A=N),T=A>>>16,A=e[4],x+=(M=t[4])>>>16,k+=65535&A,T+=A>>>16,T+=(k+=(x+=(R+=65535&M)>>>16)>>>16)>>>16,e[4]=N=65535&k|T<<16,t[4]=K=65535&R|x<<16,R=65535&(M=H),x=M>>>16,k=65535&(A=L),T=A>>>16,A=e[5],x+=(M=t[5])>>>16,k+=65535&A,T+=A>>>16,T+=(k+=(x+=(R+=65535&M)>>>16)>>>16)>>>16,e[5]=L=65535&k|T<<16,t[5]=H=65535&R|x<<16,R=65535&(M=z),x=M>>>16,k=65535&(A=q),T=A>>>16,A=e[6],x+=(M=t[6])>>>16,k+=65535&A,T+=A>>>16,T+=(k+=(x+=(R+=65535&M)>>>16)>>>16)>>>16,e[6]=q=65535&k|T<<16,t[6]=z=65535&R|x<<16,R=65535&(M=V),x=M>>>16,k=65535&(A=j),T=A>>>16,A=e[7],x+=(M=t[7])>>>16,k+=65535&A,T+=A>>>16,T+=(k+=(x+=(R+=65535&M)>>>16)>>>16)>>>16,e[7]=j=65535&k|T<<16,t[7]=V=65535&R|x<<16,Y+=128,i-=128}return i}function J(e,t,r){var i,n=new Int32Array(8),o=new Int32Array(8),a=new Uint8Array(256),s=r;for(n[0]=1779033703,n[1]=3144134277,n[2]=1013904242,n[3]=2773480762,n[4]=1359893119,n[5]=2600822924,n[6]=528734635,n[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,Y(n,o,t,r),r%=128,i=0;i<r;i++)a[i]=t[s-r+i];for(a[r]=128,a[(r=256-128*(r<112?1:0))-9]=0,f(a,r-8,s/536870912|0,s<<3),Y(n,o,a,r),i=0;i<8;i++)f(e,8*i,n[i],o[i]);return 0}function Z(e,r){var i=t(),n=t(),o=t(),a=t(),s=t(),u=t(),c=t(),h=t(),d=t();L(i,e[1],e[0]),L(d,r[1],r[0]),q(i,i,d),N(n,e[0],e[1]),N(d,r[0],r[1]),q(n,n,d),q(o,e[3],r[3]),q(o,o,l),q(a,e[2],r[2]),N(a,a,a),L(s,n,i),L(u,a,o),N(c,a,o),N(h,n,i),q(e[0],s,u),q(e[1],h,c),q(e[2],c,u),q(e[3],s,h)}function X(e,t,r){var i;for(i=0;i<4;i++)C(e[i],t[i],r)}function Q(e,r){var i=t(),n=t(),o=t();U(o,r[2]),q(i,r[0],o),q(n,r[1],o),I(e,n),e[31]^=B(i)<<7}function ee(e,t,r){var i,n;for(T(e[0],o),T(e[1],a),T(e[2],a),T(e[3],o),n=255;n>=0;--n)X(e,t,i=r[n/8|0]>>(7&n)&1),Z(t,e),Z(e,e),X(e,t,i)}function te(e,r){var i=[t(),t(),t(),t()];T(i[0],c),T(i[1],h),T(i[2],a),q(i[3],c,h),ee(e,i,r)}function re(e,i,n){var o,a=new Uint8Array(64),s=[t(),t(),t(),t()];for(n||r(i,32),J(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64,te(s,a),Q(e,s),o=0;o<32;o++)i[o+32]=e[o];return 0}var ie=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ne(e,t){var r,i,n,o;for(i=63;i>=32;--i){for(r=0,n=i-32,o=i-12;n<o;++n)t[n]+=r-16*t[i]*ie[n-(i-32)],r=Math.floor((t[n]+128)/256),t[n]-=256*r;t[n]+=r,t[i]=0}for(r=0,n=0;n<32;n++)t[n]+=r-(t[31]>>4)*ie[n],r=t[n]>>8,t[n]&=255;for(n=0;n<32;n++)t[n]-=r*ie[n];for(i=0;i<32;i++)t[i+1]+=t[i]>>8,e[i]=255&t[i]}function oe(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ne(e,r)}function ae(e,r,i,n){var o,a,s=new Uint8Array(64),u=new Uint8Array(64),l=new Uint8Array(64),c=new Float64Array(64),h=[t(),t(),t(),t()];J(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64;var d=i+64;for(o=0;o<i;o++)e[64+o]=r[o];for(o=0;o<32;o++)e[32+o]=s[32+o];for(J(l,e.subarray(32),i+32),oe(l),te(h,l),Q(e,h),o=32;o<64;o++)e[o]=n[o];for(J(u,e,i+64),oe(u),o=0;o<64;o++)c[o]=0;for(o=0;o<32;o++)c[o]=l[o];for(o=0;o<32;o++)for(a=0;a<32;a++)c[o+a]+=u[o]*s[a];return ne(e.subarray(32),c),d}function se(e,r,i,n){var s,l=new Uint8Array(32),c=new Uint8Array(64),h=[t(),t(),t(),t()],f=[t(),t(),t(),t()];if(i<64)return-1;if(function(e,r){var i=t(),n=t(),s=t(),l=t(),c=t(),h=t(),f=t();return T(e[2],a),O(e[1],r),j(s,e[1]),q(l,s,u),L(s,s,e[2]),N(l,e[2],l),j(c,l),j(h,c),q(f,h,c),q(i,f,s),q(i,i,l),D(i,i),q(i,i,s),q(i,i,l),q(i,i,l),q(e[0],i,l),j(n,e[0]),q(n,n,l),$(n,s)&&q(e[0],e[0],d),j(n,e[0]),q(n,n,l),$(n,s)?-1:(B(e[0])===r[31]>>7&&L(e[0],o,e[0]),q(e[3],e[0],e[1]),0)}(f,n))return-1;for(s=0;s<i;s++)e[s]=r[s];for(s=0;s<32;s++)e[s+32]=n[s];if(J(c,e,i),oe(c),ee(h,f,c),te(f,r.subarray(32)),Z(h,f),Q(l,h),i-=64,g(r,0,l,0)){for(s=0;s<i;s++)e[s]=0;return-1}for(s=0;s<i;s++)e[s]=r[s+64];return i}var ue,le=16,ce=64,he=32,de=64;function fe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function pe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function me(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:S,crypto_stream:E,crypto_stream_salsa20_xor:v,crypto_stream_salsa20:_,crypto_onetimeauth:M,crypto_onetimeauth_verify:R,crypto_verify_16:m,crypto_verify_32:g,crypto_secretbox:x,crypto_secretbox_open:k,crypto_scalarmult:F,crypto_scalarmult_base:W,crypto_box_beforenm:H,crypto_box_afternm:z,crypto_box:function(e,t,r,i,n,o){var a=new Uint8Array(32);return H(a,n,o),z(e,t,r,i,a)},crypto_box_open:function(e,t,r,i,n,o){var a=new Uint8Array(32);return H(a,n,o),V(e,t,r,i,a)},crypto_box_keypair:K,crypto_hash:J,crypto_sign:ae,crypto_sign_keypair:re,crypto_sign_open:se,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:le,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ce,crypto_sign_PUBLICKEYBYTES:he,crypto_sign_SECRETKEYBYTES:de,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:u,L:ie,pack:Q,pack25519:I,unpack25519:O,M:q,A:N,S:j,Z:L,pow2523:D,add:Z,set25519:T,modL:ne,scalarmult:ee,scalarbase:te},e.randomBytes=function(e){var t=new Uint8Array(e);return r(t,e),t},e.secretbox=function(e,t,r){pe(e,t,r),fe(r,t);for(var i=new Uint8Array(32+e.length),n=new Uint8Array(i.length),o=0;o<e.length;o++)i[o+32]=e[o];return x(n,i,i.length,t,r),n.subarray(le)},e.secretbox.open=function(e,t,r){pe(e,t,r),fe(r,t);for(var i=new Uint8Array(le+e.length),n=new Uint8Array(i.length),o=0;o<e.length;o++)i[o+le]=e[o];return i.length<32||0!==k(n,i,i.length,t,r)?null:n.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=le,e.scalarMult=function(e,t){if(pe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return F(r,e,t),r},e.scalarMult.base=function(e){if(pe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return W(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,i,n){var o=e.box.before(i,n);return e.secretbox(t,r,o)},e.box.before=function(e,t){pe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return H(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,i,n){var o=e.box.before(i,n);return e.secretbox.open(t,r,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return K(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(pe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return W(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(pe(e,t),t.length!==de)throw new Error("bad secret key size");var r=new Uint8Array(ce+e.length);return ae(r,e,e.length,t),r},e.sign.open=function(e,t){if(pe(e,t),t.length!==he)throw new Error("bad public key size");var r=new Uint8Array(e.length),i=se(r,e,e.length,t);if(i<0)return null;for(var n=new Uint8Array(i),o=0;o<n.length;o++)n[o]=r[o];return n},e.sign.detached=function(t,r){for(var i=e.sign(t,r),n=new Uint8Array(ce),o=0;o<n.length;o++)n[o]=i[o];return n},e.sign.detached.verify=function(e,t,r){if(pe(e,t,r),t.length!==ce)throw new Error("bad signature size");if(r.length!==he)throw new Error("bad public key size");var i,n=new Uint8Array(ce+e.length),o=new Uint8Array(ce+e.length);for(i=0;i<ce;i++)n[i]=t[i];for(i=0;i<e.length;i++)n[i+ce]=e[i];return se(o,n,n.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(he),t=new Uint8Array(de);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(pe(e),e.length!==de)throw new Error("bad secret key size");for(var t=new Uint8Array(he),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(pe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(he),r=new Uint8Array(de),i=0;i<32;i++)r[i]=e[i];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=he,e.sign.secretKeyLength=de,e.sign.seedLength=32,e.sign.signatureLength=ce,e.hash=function(e){pe(e);var t=new Uint8Array(64);return J(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return pe(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===p(e,0,t,0,e.length)},e.setPRNG=function(e){r=e},(ue="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&ue.getRandomValues?e.setPRNG(function(e,t){var r,i=new Uint8Array(t);for(r=0;r<t;r+=65536)ue.getRandomValues(i.subarray(r,r+Math.min(t-r,65536)));for(r=0;r<t;r++)e[r]=i[r];me(i)}):void 0!==commonjsRequire&&(ue=requireCryptoBrowserify())&&ue.randomBytes&&e.setPRNG(function(e,t){var r,i=ue.randomBytes(t);for(r=0;r<t;r++)e[r]=i[r];me(i)})}((e=naclFast).exports?e.exports:self.nacl=self.nacl||{})),naclFast.exports;var e}var naclFastExports=requireNaclFast();const nacl=getDefaultExportFromCjs$2(naclFastExports),l=nacl.lowlevel;function getED25519Key(e){let t;t="string"==typeof e?Buffer.from(e,"hex"):e;const r=new Uint8Array(64),i=[l.gf(),l.gf(),l.gf(),l.gf()],n=new Uint8Array([...new Uint8Array(t),...new Uint8Array(32)]),o=new Uint8Array(32);l.crypto_hash(r,n,32),r[0]&=248,r[31]&=127,r[31]|=64,l.scalarbase(i,r),l.pack(o,i);for(let a=0;a<32;a+=1)n[a+32]=o[a];return{sk:Buffer.from(n),pk:Buffer.from(o)}}var browser$2={exports:{}},stream={exports:{}},primordials,hasRequiredPrimordials;function requirePrimordials(){if(hasRequiredPrimordials)return primordials;hasRequiredPrimordials=1;class e extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}return primordials={AggregateError:e,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error:Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise:Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String:String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean:Boolean,Uint8Array:Uint8Array}}var util={exports:{}},inspect,hasRequiredInspect,errors,hasRequiredErrors;function requireInspect(){return hasRequiredInspect?inspect:(hasRequiredInspect=1,inspect={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,r]){const i=t.shift();if("f"===r)return i.toFixed(6);if("j"===r)return JSON.stringify(i);if("s"===r&&"object"==typeof i){return`${i.constructor!==Object?i.constructor.name:""} {}`.trim()}return i.toString()}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}})}function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1;const{format:e,inspect:t}=requireInspect(),{AggregateError:r}=requirePrimordials(),i=globalThis.AggregateError||r,n=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,s={};function u(e,t){if(!e)throw new s.ERR_INTERNAL_ASSERTION(t)}function l(e){let t="",r=e.length;const i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function c(t,r,i){i||(i=Error);class o extends i{constructor(...i){super(function(t,r,i){if("function"==typeof r)return u(r.length<=i.length,`Code: ${t}; The provided arguments length (${i.length}) does not match the required ones (${r.length}).`),r(...i);const n=(r.match(/%[dfijoOs]/g)||[]).length;return u(n===i.length,`Code: ${t}; The provided arguments length (${i.length}) does not match the required ones (${n}).`),0===i.length?r:e(r,...i)}(t,r,i))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(o.prototype,{name:{value:i.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),o.prototype.code=t,o.prototype[n]=!0,s[t]=o}function h(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class d extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new s.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}return c("ERR_ASSERTION","%s",Error),c("ERR_INVALID_ARG_TYPE",(e,r,i)=>{u("string"==typeof e,"'name' must be a string"),Array.isArray(r)||(r=[r]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const s=[],l=[],c=[];for(const t of r)u("string"==typeof t,"All expected entries have to be of type string"),o.includes(t)?s.push(t.toLowerCase()):a.test(t)?l.push(t):(u("object"!==t,'The value "object" should be written as "Object"'),c.push(t));if(l.length>0){const e=s.indexOf("object");-1!==e&&(s.splice(s,e,1),l.push("Object"))}if(s.length>0){switch(s.length){case 1:n+=`of type ${s[0]}`;break;case 2:n+=`one of type ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();n+=`one of type ${s.join(", ")}, or ${e}`}}(l.length>0||c.length>0)&&(n+=" or ")}if(l.length>0){switch(l.length){case 1:n+=`an instance of ${l[0]}`;break;case 2:n+=`an instance of ${l[0]} or ${l[1]}`;break;default:{const e=l.pop();n+=`an instance of ${l.join(", ")}, or ${e}`}}c.length>0&&(n+=" or ")}switch(c.length){case 0:break;case 1:c[0].toLowerCase()!==c[0]&&(n+="an "),n+=`${c[0]}`;break;case 2:n+=`one of ${c[0]} or ${c[1]}`;break;default:{const e=c.pop();n+=`one of ${c.join(", ")}, or ${e}`}}if(null==i)n+=`. Received ${i}`;else if("function"==typeof i&&i.name)n+=`. Received function ${i.name}`;else if("object"==typeof i){var h;if(null!==(h=i.constructor)&&void 0!==h&&h.name)n+=`. Received an instance of ${i.constructor.name}`;else{n+=`. Received ${t(i,{depth:-1})}`}}else{let e=t(i,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof i} (${e})`}return n},TypeError),c("ERR_INVALID_ARG_VALUE",(e,r,i="is invalid")=>{let n=t(r);n.length>128&&(n=n.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${i}. Received ${n}`},TypeError),c("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var i;return`Expected ${e} to be returned from the "${t}" function but got ${null!=r&&null!==(i=r.constructor)&&void 0!==i&&i.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`},TypeError),c("ERR_MISSING_ARGS",(...e)=>{let t;u(e.length>0,"At least one arg needs to be specified");const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`},TypeError),c("ERR_OUT_OF_RANGE",(e,r,i)=>{let n;if(u(r,'Missing "range" argument'),Number.isInteger(i)&&Math.abs(i)>2**32)n=l(String(i));else if("bigint"==typeof i){n=String(i);const e=BigInt(2)**BigInt(32);(i>e||i<-e)&&(n=l(n)),n+="n"}else n=t(i);return`The value of "${e}" is out of range. It must be ${r}. Received ${n}`},RangeError),c("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),c("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),c("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),c("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),c("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),c("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),c("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),c("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),c("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),c("ERR_STREAM_WRITE_AFTER_END","write after end",Error),c("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),errors={AbortError:d,aggregateTwoErrors:h(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new i([t,e],t.message);return r.code=t.code,r}return e||t}),hideStackFrames:h,codes:s}}var browser$1={exports:{}},hasRequiredBrowser$2,hasRequiredUtil;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$1.exports;hasRequiredBrowser$2=1;const{AbortController:e,AbortSignal:t}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;return browser$1.exports=e,browser$1.exports.AbortSignal=t,browser$1.exports.default=e,browser$1.exports}function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(e){const t=requireDist$2(),{format:r,inspect:i}=requireInspect(),{codes:{ERR_INVALID_ARG_TYPE:n}}=requireErrors(),{kResistStopPropagation:o,AggregateError:a,SymbolDispose:s}=requirePrimordials(),u=globalThis.AbortSignal||requireBrowser$2().AbortSignal,l=globalThis.AbortController||requireBrowser$2().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,d=void 0!==h?function(e){return e instanceof h}:function(e){return!1},f=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new n(t,"AbortSignal",e)};e.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...i)=>e?r(e):t(...i))}),debuglog:()=>function(){},format:r,inspect:i,types:{isAsyncFunction:e=>e instanceof c,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:d,deprecate:(e,t)=>e,addAbortListener:requireEvents().addAbortListener||function(e,t){if(void 0===e)throw new n("signal","AbortSignal",e);let r;return f(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new n(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[o]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[s](){var e;null===(e=r)||void 0===e||e()}}},AbortSignalAny:u.any||function(e){if(1===e.length)return e[0];const t=new l,r=()=>t.abort();return e.forEach(e=>{f(e,"signals"),e.addEventListener("abort",r,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",r))},{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(util)),util.exports}var operators={},validators,hasRequiredValidators;function requireValidators(){if(hasRequiredValidators)return validators;hasRequiredValidators=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:r,ArrayPrototypeMap:i,NumberIsInteger:n,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:l,RegExpPrototypeExec:c,String:h,StringPrototypeToUpperCase:d,StringPrototypeTrim:f}=requirePrimordials(),{hideStackFrames:p,codes:{ERR_SOCKET_BAD_PORT:m,ERR_INVALID_ARG_TYPE:g,ERR_INVALID_ARG_VALUE:y,ERR_OUT_OF_RANGE:b,ERR_UNKNOWN_SIGNAL:w}}=requireErrors(),{normalizeEncoding:v}=requireUtil(),{isAsyncFunction:_,isArrayBufferView:E}=requireUtil().types,S={};const A=/^[0-7]+$/;const M=p((e,t,r=s,i=a)=>{if("number"!=typeof e)throw new g(t,"number",e);if(!n(e))throw new b(t,"an integer",e);if(e<r||e>i)throw new b(t,`>= ${r} && <= ${i}`,e)}),R=p((e,t,r=-2147483648,i=2147483647)=>{if("number"!=typeof e)throw new g(t,"number",e);if(!n(e))throw new b(t,"an integer",e);if(e<r||e>i)throw new b(t,`>= ${r} && <= ${i}`,e)}),x=p((e,t,r=!1)=>{if("number"!=typeof e)throw new g(t,"number",e);if(!n(e))throw new b(t,"an integer",e);const i=r?1:0,o=4294967295;if(e<i||e>o)throw new b(t,`>= ${i} && <= ${o}`,e)});function k(e,t){if("string"!=typeof e)throw new g(t,"string",e)}const T=p((e,n,o)=>{if(!t(o,e)){const t=r(i(o,e=>"string"==typeof e?`'${e}'`:h(e)),", ");throw new y(n,e,"must be one of: "+t)}});function P(e,t){if("boolean"!=typeof e)throw new g(t,"boolean",e)}function C(e,t,r){return null!=e&&l(e,t)?e[t]:r}const I=p((t,r,i=null)=>{const n=C(i,"allowArray",!1),o=C(i,"allowFunction",!1);if(!C(i,"nullable",!1)&&null===t||!n&&e(t)||"object"!=typeof t&&(!o||"function"!=typeof t))throw new g(r,"Object",t)}),$=p((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new g(t,"a dictionary",e)}),B=p((t,r,i=0)=>{if(!e(t))throw new g(r,"Array",t);if(t.length<i){throw new y(r,t,`must be longer than ${i}`)}});const O=p((e,t="buffer")=>{if(!E(e))throw new g(t,["Buffer","TypedArray","DataView"],e)});const N=p((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new g(t,"AbortSignal",e)}),L=p((e,t)=>{if("function"!=typeof e)throw new g(t,"Function",e)}),q=p((e,t)=>{if("function"!=typeof e||_(e))throw new g(t,"Function",e)}),j=p((e,t)=>{if(void 0!==e)throw new g(t,"undefined",e)});const U=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function D(e,t){if(void 0===e||!c(U,e))throw new y(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return validators={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(void 0===e&&(e=r),"string"==typeof e){if(null===c(A,e))throw new y(t,e,"must be a 32-bit unsigned integer or an octal string");e=u(e,8)}return x(e,t),e},validateArray:B,validateStringArray:function(e,t){B(e,t);for(let r=0;r<e.length;r++)k(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){B(e,t);for(let r=0;r<e.length;r++)P(e[r],`${t}[${r}]`)},validateAbortSignalArray:function(e,t){B(e,t);for(let r=0;r<e.length;r++){const i=e[r],n=`${t}[${r}]`;if(null==i)throw new g(n,"AbortSignal",i);N(i,n)}},validateBoolean:P,validateBuffer:O,validateDictionary:$,validateEncoding:function(e,t){const r=v(t),i=e.length;if("hex"===r&&i%2!=0)throw new y("encoding",t,`is invalid for data of length ${i}`)},validateFunction:L,validateInt32:R,validateInteger:M,validateNumber:function(e,t,r=void 0,i){if("number"!=typeof e)throw new g(t,"number",e);if(null!=r&&e<r||null!=i&&e>i||(null!=r||null!=i)&&o(e))throw new b(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=i?" && ":""}${null!=i?`<= ${i}`:""}`,e)},validateObject:I,validateOneOf:T,validatePlainFunction:q,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===f(e).length||+e!==+e>>>0||e>65535||0===e&&!r)throw new m(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(k(e,t),void 0===S[e]){if(void 0!==S[d(e)])throw new w(e+" (signals must use all capital letters)");throw new w(e)}},validateString:k,validateUint32:x,validateUndefined:j,validateUnion:function(e,i,n){if(!t(n,e))throw new g(i,`('${r(n,"|")}')`,e)},validateAbortSignal:N,validateLinkHeaderValue:function(t){if("string"==typeof t)return D(t,"hints"),t;if(e(t)){const e=t.length;let r="";if(0===e)return r;for(let i=0;i<e;i++){const n=t[i];D(n,"hints"),r+=n,i!==e-1&&(r+=", ")}return r}throw new y("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}}var endOfStream$1={exports:{}},dist$1={},hasRequiredDist$1,utils,hasRequiredUtils,hasRequiredEndOfStream$1,destroy_1,hasRequiredDestroy,legacy,hasRequiredLegacy;function requireDist$1(){return hasRequiredDist$1||(hasRequiredDist$1=1,function(e){function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var r,i,n={exports:{}},o=n.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(i){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,c=[],h=!1,d=-1;function f(){h&&l&&(h=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!h){var e=u(f);h=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(r){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||h||u(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0};const y=t(n.exports);e.default=y,e.process=y}(dist$1)),dist$1}function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:r}=requirePrimordials(),i=r("nodejs.stream.destroyed"),n=r("nodejs.stream.errored"),o=r("nodejs.stream.readable"),a=r("nodejs.stream.writable"),s=r("nodejs.stream.disturbed"),u=r("nodejs.webstream.isClosedPromise"),l=r("nodejs.webstream.controllerErrorFunction");function c(e,t=!1){var r;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function h(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function d(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function f(e){return!(!e||d(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function p(e){return!(!e||d(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function m(e){return!(!e||d(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function g(e){if(!d(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[i]||null!=n&&n.destroyed)}function y(e){if(!h(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function b(e,t){if(!c(e))return null;const r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function w(e){return e&&null!=e[o]?e[o]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!g(e)&&(c(e)&&e.readable&&!b(e))}function v(e){return e&&null!=e[a]?e[a]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!g(e)&&(h(e)&&e.writable&&!y(e))}function _(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function E(e){return"boolean"==typeof e._sent100&&_(e)}return utils={isDestroyed:g,kIsDestroyed:i,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[s])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:s,isErrored:function(e){var t,r,i,o,a,s,u,l,c,h;return!(!e||!(null!==(t=null!==(r=null!==(i=null!==(o=null!==(a=null!==(s=e[n])&&void 0!==s?s:e.readableErrored)&&void 0!==a?a:e.writableErrored)&&void 0!==o?o:null===(u=e._readableState)||void 0===u?void 0:u.errorEmitted)&&void 0!==i?i:null===(l=e._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==r?r:null===(c=e._readableState)||void 0===c?void 0:c.errored)&&void 0!==t?t:null===(h=e._writableState)||void 0===h?void 0:h.errored))},kIsErrored:n,isReadable:w,kIsReadable:o,kIsClosedPromise:u,kControllerErrorFunction:l,kIsWritable:a,isClosed:function(e){if(!d(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&_(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return d(e)?!!g(e)||(!1===(null==t?void 0:t.readable)||!w(e))&&(!1===(null==t?void 0:t.writable)||!v(e)):null},isIterable:function(r,i){return null!=r&&(!0===i?"function"==typeof r[e]:!1===i?"function"==typeof r[t]:"function"==typeof r[e]||"function"==typeof r[t])},isReadableNodeStream:c,isReadableStream:f,isReadableEnded:function(e){if(!c(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:b,isReadableErrored:function(e){var t,r;return d(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:d,isWebStream:function(e){return f(e)||p(e)||m(e)},isWritable:v,isWritableNodeStream:h,isWritableStream:p,isWritableEnded:y,isWritableFinished:function(e,t){if(!h(e))return null;if(!0===e.writableFinished)return!0;const r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return d(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:E,willEmitClose:function(e){if(!d(e))return null;const t=e._writableState,r=e._readableState,i=t||r;return!i&&E(e)||!!(i&&i.autoDestroy&&i.emitClose&&!1===i.closed)},isTransformStream:m}}function requireEndOfStream$1(){if(hasRequiredEndOfStream$1)return endOfStream$1.exports;hasRequiredEndOfStream$1=1;const e=requireDist$1(),{AbortError:t,codes:r}=requireErrors(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:n}=r,{kEmptyObject:o,once:a}=requireUtil(),{validateAbortSignal:s,validateFunction:u,validateObject:l,validateBoolean:c}=requireValidators(),{Promise:h,PromisePrototypeThen:d,SymbolDispose:f}=requirePrimordials(),{isClosed:p,isReadable:m,isReadableNodeStream:g,isReadableStream:y,isReadableFinished:b,isReadableErrored:w,isWritable:v,isWritableNodeStream:_,isWritableStream:E,isWritableFinished:S,isWritableErrored:A,isNodeStream:M,willEmitClose:R,kIsClosedPromise:x}=requireUtils();let k;const T=()=>{};function P(r,c,h){var P,C;if(2===arguments.length?(h=c,c=o):null==c?c=o:l(c,"options"),u(h,"callback"),s(c.signal,"options.signal"),h=a(h),y(r)||E(r))return function(r,i,n){let o=!1,s=T;if(i.signal)if(s=()=>{o=!0,n.call(r,new t(void 0,{cause:i.signal.reason}))},i.signal.aborted)e.nextTick(s);else{k=k||requireUtil().addAbortListener;const e=k(i.signal,s),t=n;n=a((...i)=>{e[f](),t.apply(r,i)})}const u=(...t)=>{o||e.nextTick(()=>n.apply(r,t))};return d(r[x].promise,u,u),T}(r,c,h);if(!M(r))throw new i("stream",["ReadableStream","WritableStream","Stream"],r);const I=null!==(P=c.readable)&&void 0!==P?P:g(r),$=null!==(C=c.writable)&&void 0!==C?C:_(r),B=r._writableState,O=r._readableState,N=()=>{r.writable||j()};let L=R(r)&&g(r)===I&&_(r)===$,q=S(r,!1);const j=()=>{q=!0,r.destroyed&&(L=!1),(!L||r.readable&&!I)&&(I&&!U||h.call(r))};let U=b(r,!1);const D=()=>{U=!0,r.destroyed&&(L=!1),(!L||r.writable&&!$)&&($&&!q||h.call(r))},F=e=>{h.call(r,e)};let W=p(r);const K=()=>{W=!0;const e=A(r)||w(r);return e&&"boolean"!=typeof e?h.call(r,e):I&&!U&&g(r,!0)&&!b(r,!1)?h.call(r,new n):!$||q||S(r,!1)?void h.call(r):h.call(r,new n)},H=()=>{W=!0;const e=A(r)||w(r);if(e&&"boolean"!=typeof e)return h.call(r,e);h.call(r)},z=()=>{r.req.on("finish",j)};!function(e){return e.setHeader&&"function"==typeof e.abort}(r)?$&&!B&&(r.on("end",N),r.on("close",N)):(r.on("complete",j),L||r.on("abort",K),r.req?z():r.on("request",z)),L||"boolean"!=typeof r.aborted||r.on("aborted",K),r.on("end",D),r.on("finish",j),!1!==c.error&&r.on("error",F),r.on("close",K),W?e.nextTick(K):null!=B&&B.errorEmitted||null!=O&&O.errorEmitted?L||e.nextTick(H):(I||L&&!m(r)||!q&&!1!==v(r))&&($||L&&!v(r)||!U&&!1!==m(r))?O&&r.req&&r.aborted&&e.nextTick(H):e.nextTick(H);const V=()=>{h=T,r.removeListener("aborted",K),r.removeListener("complete",j),r.removeListener("abort",K),r.removeListener("request",z),r.req&&r.req.removeListener("finish",j),r.removeListener("end",N),r.removeListener("close",N),r.removeListener("finish",j),r.removeListener("end",D),r.removeListener("error",F),r.removeListener("close",K)};if(c.signal&&!W){const i=()=>{const e=h;V(),e.call(r,new t(void 0,{cause:c.signal.reason}))};if(c.signal.aborted)e.nextTick(i);else{k=k||requireUtil().addAbortListener;const e=k(c.signal,i),t=h;h=a((...i)=>{e[f](),t.apply(r,i)})}}return V}return endOfStream$1.exports=P,endOfStream$1.exports.finished=function(e,t){var r;let i=!1;return null===t&&(t=o),null!==(r=t)&&void 0!==r&&r.cleanup&&(c(t.cleanup,"cleanup"),i=t.cleanup),new h((r,n)=>{const o=P(e,t,e=>{i&&o(),e?n(e):r()})})},endOfStream$1.exports}function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;const e=requireDist$1(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:r},AbortError:i}=requireErrors(),{Symbol:n}=requirePrimordials(),{kIsDestroyed:o,isDestroyed:a,isFinished:s,isServerRequest:u}=requireUtils(),l=n("kDestroy"),c=n("kConstruct");function h(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function d(t,r,i){let n=!1;function o(r){if(n)return;n=!0;const o=t._readableState,a=t._writableState;h(r,a,o),a&&(a.closed=!0),o&&(o.closed=!0),"function"==typeof i&&i(r),r?e.nextTick(f,t,r):e.nextTick(p,t)}try{t._destroy(r||null,o)}catch(a){o(a)}}function f(e,t){m(e,t),p(e)}function p(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function m(e,t){const r=e._readableState,i=e._writableState;null!=i&&i.errorEmitted||null!=r&&r.errorEmitted||(i&&(i.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function g(t,r,i){const n=t._readableState,o=t._writableState;if(null!=o&&o.destroyed||null!=n&&n.destroyed)return this;null!=n&&n.autoDestroy||null!=o&&o.autoDestroy?t.destroy(r):r&&(r.stack,o&&!o.errored&&(o.errored=r),n&&!n.errored&&(n.errored=r),i?e.nextTick(m,t,r):m(t,r))}function y(t){let i=!1;function n(n){if(i)return void g(t,null!=n?n:new r);i=!0;const o=t._readableState,a=t._writableState,s=a||o;o&&(o.constructed=!0),a&&(a.constructed=!0),s.destroyed?t.emit(l,n):n?g(t,n,!0):e.nextTick(b,t)}try{t._construct(t=>{e.nextTick(n,t)})}catch(err){e.nextTick(n,err)}}function b(e){e.emit(c)}function w(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function v(e){e.emit("close")}function _(t,r){t.emit("error",r),e.nextTick(v,t)}return destroy_1={construct:function(t,r){if("function"!=typeof t._construct)return;const i=t._readableState,n=t._writableState;i&&(i.constructed=!1),n&&(n.constructed=!1),t.once(c,r),t.listenerCount(c)>1||e.nextTick(y,t)},destroyer:function(t,r){t&&!a(t)&&(r||s(t)||(r=new i),u(t)?(t.socket=null,t.destroy(r)):w(t)?t.abort():w(t.req)?t.req.abort():"function"==typeof t.destroy?t.destroy(r):"function"==typeof t.close?t.close():r?e.nextTick(_,t,r):e.nextTick(v,t),t.destroyed||(t[o]=!0))},destroy:function(e,r){const i=this._readableState,n=this._writableState,o=n||i;return null!=n&&n.destroyed||null!=i&&i.destroyed?("function"==typeof r&&r(),this):(h(e,n,i),n&&(n.destroyed=!0),i&&(i.destroyed=!0),o.constructed?d(this,e,r):this.once(l,function(i){d(this,t(i,e),r)}),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:g}}function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=requirePrimordials(),{EventEmitter:r}=requireEvents();function i(e){r.call(this,e)}function n(t,r,i){if("function"==typeof t.prependListener)return t.prependListener(r,i);t._events&&t._events[r]?e(t._events[r])?t._events[r].unshift(i):t._events[r]=[i,t._events[r]]:t.on(r,i)}return t(i.prototype,r.prototype),t(i,r),i.prototype.pipe=function(e,t){const i=this;function o(t){e.writable&&!1===e.write(t)&&i.pause&&i.pause()}function a(){i.readable&&i.resume&&i.resume()}i.on("data",o),e.on("drain",a),e._isStdio||t&&!1===t.end||(i.on("end",u),i.on("close",l));let s=!1;function u(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){h(),0===r.listenerCount(this,"error")&&this.emit("error",e)}function h(){i.removeListener("data",o),e.removeListener("drain",a),i.removeListener("end",u),i.removeListener("close",l),i.removeListener("error",c),e.removeListener("error",c),i.removeListener("end",h),i.removeListener("close",h),e.removeListener("close",h)}return n(i,"error",c),n(e,"error",c),i.on("end",h),i.on("close",h),e.on("close",h),e.emit("pipe",i),e},legacy={Stream:i,prependListener:n}}var addAbortSignal={exports:{}},hasRequiredAddAbortSignal,buffer_list,hasRequiredBuffer_list,state,hasRequiredState,from_1,hasRequiredFrom,readable,hasRequiredReadable,writable,hasRequiredWritable,duplexify,hasRequiredDuplexify,duplex,hasRequiredDuplex,transform,hasRequiredTransform,passthrough,hasRequiredPassthrough,pipeline_1,hasRequiredPipeline,compose,hasRequiredCompose,hasRequiredOperators,promises,hasRequiredPromises,hasRequiredStream,hasRequiredBrowser$1;function requireAddAbortSignal(){return hasRequiredAddAbortSignal||(hasRequiredAddAbortSignal=1,function(e){const{SymbolDispose:t}=requirePrimordials(),{AbortError:r,codes:i}=requireErrors(),{isNodeStream:n,isWebStream:o,kControllerErrorFunction:a}=requireUtils(),s=requireEndOfStream$1(),{ERR_INVALID_ARG_TYPE:u}=i;let l;e.exports.addAbortSignal=function(t,r){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new u(t,"AbortSignal",e)})(t,"signal"),!n(r)&&!o(r))throw new u("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,i){if("object"!=typeof e||!("aborted"in e))return i;const o=n(i)?()=>{i.destroy(new r(void 0,{cause:e.reason}))}:()=>{i[a](new r(void 0,{cause:e.reason}))};if(e.aborted)o();else{l=l||requireUtil().addAbortListener;const r=l(e,o);s(i,r[t])}return i}}(addAbortSignal)),addAbortSignal.exports}function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:r,Uint8Array:i}=requirePrimordials(),{Buffer:n}=requireDist$2(),{inspect:o}=requireUtil();return buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return n.alloc(0);const t=n.allocUnsafe(e>>>0);let i=this.head,o=0;for(;i;)r(t,i.data,o),o+=i.data.length,i=i.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[t](){for(let e=this.head;e;e=e.next)yield e.data}_getString(t){let r="",i=this.head,n=0;do{const o=i.data;if(!(t>o.length)){t===o.length?(r+=o,++n,i.next?this.head=i.next:this.head=this.tail=null):(r+=e(o,0,t),this.head=i,i.data=e(o,t));break}r+=o,t-=o.length,++n}while(null!==(i=i.next));return this.length-=n,r}_getBuffer(e){const t=n.allocUnsafe(e),o=e;let a=this.head,s=0;do{const n=a.data;if(!(e>n.length)){e===n.length?(r(t,n,o-e),++s,a.next?this.head=a.next:this.head=this.tail=null):(r(t,new i(n.buffer,n.byteOffset,e),o-e),this.head=a,a.data=n.slice(e));break}r(t,n,o-e),e-=n.length,++s}while(null!==(a=a.next));return this.length-=s,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return o(this,{...t,depth:0,customInspect:!1})}}}function requireState(){if(hasRequiredState)return state;hasRequiredState=1;const{MathFloor:e,NumberIsInteger:t}=requirePrimordials(),{validateInteger:r}=requireValidators(),{ERR_INVALID_ARG_VALUE:i}=requireErrors().codes;let n=16384,o=16;function a(e){return e?o:n}return state={getHighWaterMark:function(r,n,o,s){const u=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(n,s,o);if(null!=u){if(!t(u)||u<0){throw new i(s?`options.${o}`:"options.highWaterMark",u)}return e(u)}return a(r.objectMode)},getDefaultHighWaterMark:a,setDefaultHighWaterMark:function(e,t){r(t,"value",0),e?o=t:n=t}}}function requireFrom(){if(hasRequiredFrom)return from_1;hasRequiredFrom=1;const e=requireDist$1(),{PromisePrototypeThen:t,SymbolAsyncIterator:r,SymbolIterator:i}=requirePrimordials(),{Buffer:n}=requireDist$2(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:a}=requireErrors().codes;return from_1=function(s,u,l){let c,h;if("string"==typeof u||u instanceof n)return new s({objectMode:!0,...l,read(){this.push(u),this.push(null)}});if(u&&u[r])h=!0,c=u[r]();else{if(!u||!u[i])throw new o("iterable",["Iterable"],u);h=!1,c=u[i]()}const d=new s({objectMode:!0,highWaterMark:1,...l});let f=!1;return d._read=function(){f||(f=!0,async function(){for(;;){try{const{value:e,done:t}=h?await c.next():c.next();if(t)d.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw f=!1,new a;if(d.push(t))continue;f=!1}}catch(err){d.destroy(err)}break}}())},d._destroy=function(r,i){t(async function(e){const t=null!=e,r="function"==typeof c.throw;if(t&&r){const{value:t,done:r}=await c.throw(e);if(await t,r)return}if("function"==typeof c.return){const{value:e}=await c.return();await e}}(r),()=>e.nextTick(i,r),t=>e.nextTick(i,t||r))},d}}function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const e=requireDist$1(),{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:i,NumberParseInt:n,ObjectDefineProperties:o,ObjectKeys:a,ObjectSetPrototypeOf:s,Promise:u,SafeSet:l,SymbolAsyncDispose:c,SymbolAsyncIterator:h,Symbol:d}=requirePrimordials();readable=K,K.ReadableState=W;const{EventEmitter:f}=requireEvents(),{Stream:p,prependListener:m}=requireLegacy(),{Buffer:g}=requireDist$2(),{addAbortSignal:y}=requireAddAbortSignal(),b=requireEndOfStream$1();let w=requireUtil().debuglog("stream",e=>{w=e});const v=requireBuffer_list(),_=requireDestroy(),{getHighWaterMark:E,getDefaultHighWaterMark:S}=requireState(),{aggregateTwoErrors:A,codes:{ERR_INVALID_ARG_TYPE:M,ERR_METHOD_NOT_IMPLEMENTED:R,ERR_OUT_OF_RANGE:x,ERR_STREAM_PUSH_AFTER_EOF:k,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:T},AbortError:P}=requireErrors(),{validateObject:C}=requireValidators(),I=d("kPaused"),{StringDecoder:$}=requireString_decoder(),B=requireFrom();s(K.prototype,p.prototype),s(K,p);const O=()=>{},{errorOrDestroy:N}=_,L=1,q=16,j=32,U=2048,D=4096;function F(e){return{enumerable:!1,get(){return 0!==(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function W(e,t,r){"boolean"!=typeof r&&(r=t instanceof requireDuplex()),this.state=U|D|q|j,e&&e.objectMode&&(this.state|=L),r&&e&&e.readableObjectMode&&(this.state|=L),this.highWaterMark=e?E(this,e,"readableHighWaterMark",r):S(!1),this.buffer=new v,this.length=0,this.pipes=[],this.flowing=null,this[I]=null,e&&!1===e.emitClose&&(this.state&=~U),e&&!1===e.autoDestroy&&(this.state&=~D),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new $(e.encoding),this.encoding=e.encoding)}function K(e){if(!(this instanceof K))return new K(e);const t=this instanceof requireDuplex();this._readableState=new W(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&y(e.signal,this)),p.call(this,e),_.construct(this,()=>{this._readableState.needReadable&&J(this,this._readableState)})}function H(e,t,r,i){w("readableAddChunk",t);const n=e._readableState;let o;if(0===(n.state&L)&&("string"==typeof t?(r=r||n.defaultEncoding,n.encoding!==r&&(i&&n.encoding?t=g.from(t,r).toString(n.encoding):(t=g.from(t,r),r=""))):t instanceof g?r="":p._isUint8Array(t)?(t=p._uint8ArrayToBuffer(t),r=""):null!=t&&(o=new M("chunk",["string","Buffer","Uint8Array"],t))),o)N(e,o);else if(null===t)n.state&=-9,function(e,t){if(w("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?G(e):(t.needReadable=!1,t.emittedReadable=!0,Y(e))}(e,n);else if(0!==(n.state&L)||t&&t.length>0)if(i)if(4&n.state)N(e,new T);else{if(n.destroyed||n.errored)return!1;z(e,n,t,!0)}else if(n.ended)N(e,new k);else{if(n.destroyed||n.errored)return!1;n.state&=-9,n.decoder&&!r?(t=n.decoder.write(t),n.objectMode||0!==t.length?z(e,n,t,!1):J(e,n)):z(e,n,t,!1)}else i||(n.state&=-9,J(e,n));return!n.ended&&(n.length<n.highWaterMark||0===n.length)}function z(e,t,r,i){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),64&t.state&&G(e)),J(e,t)}o(W.prototype,{objectMode:F(L),ended:F(2),endEmitted:F(4),reading:F(8),constructed:F(q),sync:F(j),needReadable:F(64),emittedReadable:F(128),readableListening:F(256),resumeScheduled:F(512),errorEmitted:F(1024),emitClose:F(U),autoDestroy:F(D),destroyed:F(8192),closed:F(16384),closeEmitted:F(32768),multiAwaitDrain:F(65536),readingMore:F(1<<17),dataEmitted:F(1<<18)}),K.prototype.destroy=_.destroy,K.prototype._undestroy=_.undestroy,K.prototype._destroy=function(e,t){t(e)},K.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},K.prototype[c]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new P,this.destroy(e)),new u((t,r)=>b(this,i=>i&&i!==e?r(i):t(null)))},K.prototype.push=function(e,t){return H(this,e,t,!1)},K.prototype.unshift=function(e,t){return H(this,e,t,!0)},K.prototype.isPaused=function(){const e=this._readableState;return!0===e[I]||!1===e.flowing},K.prototype.setEncoding=function(e){const t=new $(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const r=this._readableState.buffer;let i="";for(const n of r)i+=t.write(n);return r.clear(),""!==i&&r.push(i),this._readableState.length=i.length,this};function V(e,t){return e<=0||0===t.length&&t.ended?0:0!==(t.state&L)?1:i(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function G(t){const r=t._readableState;w("emitReadable",r.needReadable,r.emittedReadable),r.needReadable=!1,r.emittedReadable||(w("emitReadable",r.flowing),r.emittedReadable=!0,e.nextTick(Y,t))}function Y(e){const t=e._readableState;w("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,te(e)}function J(t,r){!r.readingMore&&r.constructed&&(r.readingMore=!0,e.nextTick(Z,t,r))}function Z(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const r=t.length;if(w("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function X(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[I]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function Q(e){w("readable nexttick read 0"),e.read(0)}function ee(e,t){w("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),te(e),t.flowing&&!t.reading&&e.read(0)}function te(e){const t=e._readableState;for(w("flow",t.flowing);t.flowing&&null!==e.read(););}function re(e,t){"function"!=typeof e.read&&(e=K.wrap(e,{objectMode:!0}));const r=async function*(e,t){let r,i=O;function n(t){this===e?(i(),i=O):i=t}e.on("readable",n);const o=b(e,{writable:!1},e=>{r=e?A(r,e):null,i(),i=O});try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(r)throw r;if(null===r)return;await new u(n)}}}catch(err){throw r=A(r,err),r}finally{!r&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==r&&!e._readableState.autoDestroy?(e.off("readable",n),o()):_.destroyer(e,null)}}(e,t);return r.stream=e,r}function ie(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function ne(t){const r=t._readableState;w("endReadable",r.endEmitted),r.endEmitted||(r.ended=!0,e.nextTick(oe,r,t))}function oe(t,r){if(w("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&0===t.length)if(t.endEmitted=!0,r.emit("end"),r.writable&&!1===r.allowHalfOpen)e.nextTick(ae,r);else if(t.autoDestroy){const e=r._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&r.destroy()}}function ae(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let se;function ue(){return void 0===se&&(se={}),se}return K.prototype.read=function(e){w("read",e),void 0===e?e=NaN:r(e)||(e=n(e,10));const t=this._readableState,i=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new x("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return w("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ne(this):G(this),null;if(0===(e=V(e,t))&&t.ended)return 0===t.length&&ne(this),null;let o,a=!!(64&t.state);if(w("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&(a=!0,w("length less than watermark",a)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)a=!1,w("reading, ended or constructing",a);else if(a){w("do read"),t.state|=8|j,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(err){N(this,err)}t.state&=~j,t.reading||(e=V(i,t))}return o=e>0?ie(e,t):null,null===o?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&ne(this)),null===o||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",o)),o},K.prototype._read=function(e){throw new R("_read()")},K.prototype.pipe=function(t,r){const i=this,n=this._readableState;1===n.pipes.length&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new l(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),w("pipe count=%d opts=%j",n.pipes.length,r);const o=(!r||!1!==r.end)&&t!==e.stdout&&t!==e.stderr?s:y;function a(e,r){w("onunpipe"),e===i&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,function(){w("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),u&&t.removeListener("drain",u);t.removeListener("error",f),t.removeListener("unpipe",a),i.removeListener("end",s),i.removeListener("end",y),i.removeListener("data",d),c=!0,u&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}())}function s(){w("onend"),t.end()}let u;n.endEmitted?e.nextTick(o):i.once("end",o),t.on("unpipe",a);let c=!1;function h(){c||(1===n.pipes.length&&n.pipes[0]===t?(w("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(w("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),i.pause()),u||(u=function(e,t){return function(){const r=e._readableState;r.awaitDrainWriters===t?(w("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(w("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),r.awaitDrainWriters&&0!==r.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(i,t),t.on("drain",u))}function d(e){w("ondata");const r=t.write(e);w("dest.write",r),!1===r&&h()}function f(e){if(w("onerror",e),y(),t.removeListener("error",f),0===t.listenerCount("error")){const r=t._writableState||t._readableState;r&&!r.errorEmitted?N(t,e):t.emit("error",e)}}function p(){t.removeListener("finish",g),y()}function g(){w("onfinish"),t.removeListener("close",p),y()}function y(){w("unpipe"),i.unpipe(t)}return i.on("data",d),m(t,"error",f),t.once("close",p),t.once("finish",g),t.emit("pipe",i),!0===t.writableNeedDrain?h():n.flowing||(w("pipe resume"),i.resume()),t},K.prototype.unpipe=function(e){const r=this._readableState;if(0===r.pipes.length)return this;if(!e){const e=r.pipes;r.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const i=t(r.pipes,e);return-1===i||(r.pipes.splice(i,1),0===r.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},K.prototype.on=function(t,r){const i=p.prototype.on.call(this,t,r),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,w("on readable",n.length,n.reading),n.length?G(this):n.reading||e.nextTick(Q,this))),i},K.prototype.addListener=K.prototype.on,K.prototype.removeListener=function(t,r){const i=p.prototype.removeListener.call(this,t,r);return"readable"===t&&e.nextTick(X,this),i},K.prototype.off=K.prototype.removeListener,K.prototype.removeAllListeners=function(t){const r=p.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||e.nextTick(X,this),r},K.prototype.resume=function(){const t=this._readableState;return t.flowing||(w("resume"),t.flowing=!t.readableListening,function(t,r){r.resumeScheduled||(r.resumeScheduled=!0,e.nextTick(ee,t,r))}(this,t)),t[I]=!1,this},K.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[I]=!0,this},K.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{N(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const r=a(e);for(let i=1;i<r.length;i++){const t=r[i];void 0===this[t]&&"function"==typeof e[t]&&(this[t]=e[t].bind(e))}return this},K.prototype[h]=function(){return re(this)},K.prototype.iterator=function(e){return void 0!==e&&C(e,"options"),re(this,e)},o(K.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),o(W.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[I]},set(e){this[I]=!!e}}}),K._fromList=ie,K.from=function(e,t){return B(K,e,t)},K.fromWeb=function(e,t){return ue().newStreamReadableFromReadableStream(e,t)},K.toWeb=function(e,t){return ue().newReadableStreamFromStreamReadable(e,t)},K.wrap=function(e,t){var r,i;return new K({objectMode:null===(r=null!==(i=e.readableObjectMode)&&void 0!==i?i:e.objectMode)||void 0===r||r,...t,destroy(t,r){_.destroyer(e,t),r(t)}}).wrap(e)},readable}function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const e=requireDist$1(),{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:n,ObjectDefineProperties:o,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:l}=requirePrimordials();writable=C,C.WritableState=T;const{EventEmitter:c}=requireEvents(),h=requireLegacy().Stream,{Buffer:d}=requireDist$2(),f=requireDestroy(),{addAbortSignal:p}=requireAddAbortSignal(),{getHighWaterMark:m,getDefaultHighWaterMark:g}=requireState(),{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:w,ERR_STREAM_CANNOT_PIPE:v,ERR_STREAM_DESTROYED:_,ERR_STREAM_ALREADY_FINISHED:E,ERR_STREAM_NULL_VALUES:S,ERR_STREAM_WRITE_AFTER_END:A,ERR_UNKNOWN_ENCODING:M}=requireErrors().codes,{errorOrDestroy:R}=f;function x(){}a(C.prototype,h.prototype),a(C,h);const k=u("kOnFinished");function T(e,t,r){"boolean"!=typeof r&&(r=t instanceof requireDuplex()),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?m(this,e,"writableHighWaterMark",r):g(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=O.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,P(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[k]=[]}function P(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function C(e){const t=this instanceof requireDuplex();if(!t&&!i(C,this))return new C(e);this._writableState=new T(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&p(e.signal,this)),h.call(this,e),f.construct(this,()=>{const e=this._writableState;e.writing||j(this,e),F(this,e)})}function I(t,r,i,n){const o=t._writableState;if("function"==typeof i)n=i,i=o.defaultEncoding;else{if(i){if("buffer"!==i&&!d.isEncoding(i))throw new M(i)}else i=o.defaultEncoding;"function"!=typeof n&&(n=x)}if(null===r)throw new S;if(!o.objectMode)if("string"==typeof r)!1!==o.decodeStrings&&(r=d.from(r,i),i="buffer");else if(r instanceof d)i="buffer";else{if(!h._isUint8Array(r))throw new y("chunk",["string","Buffer","Uint8Array"],r);r=h._uint8ArrayToBuffer(r),i="buffer"}let a;return o.ending?a=new A:o.destroyed&&(a=new _("write")),a?(e.nextTick(n,a),R(t,a,!0),a):(o.pendingcb++,function(e,t,r,i,n){const o=t.objectMode?1:r.length;t.length+=o;const a=t.length<t.highWaterMark;a||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:i,callback:n}),t.allBuffers&&"buffer"!==i&&(t.allBuffers=!1),t.allNoop&&n!==x&&(t.allNoop=!1)):(t.writelen=o,t.writecb=n,t.writing=!0,t.sync=!0,e._write(r,i,t.onwrite),t.sync=!1);return a&&!t.errored&&!t.destroyed}(t,o,r,i,n))}function $(e,t,r,i,n,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new _("write")):r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function B(e,t,r,i){--t.pendingcb,i(r),q(t),R(e,r)}function O(t,r){const i=t._writableState,n=i.sync,o=i.writecb;"function"==typeof o?(i.writing=!1,i.writecb=null,i.length-=i.writelen,i.writelen=0,r?(r.stack,i.errored||(i.errored=r),t._readableState&&!t._readableState.errored&&(t._readableState.errored=r),n?e.nextTick(B,t,i,r,o):B(t,i,r,o)):(i.buffered.length>i.bufferedIndex&&j(t,i),n?null!==i.afterWriteTickInfo&&i.afterWriteTickInfo.cb===o?i.afterWriteTickInfo.count++:(i.afterWriteTickInfo={count:1,cb:o,stream:t,state:i},e.nextTick(N,i.afterWriteTickInfo)):L(t,i,1,o))):R(t,new w)}function N({stream:e,state:t,count:r,cb:i}){return t.afterWriteTickInfo=null,L(e,t,r,i)}function L(e,t,r,i){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,i();t.destroyed&&q(t),F(e,t)}function q(e){if(e.writing)return;for(let n=e.bufferedIndex;n<e.buffered.length;++n){var t;const{chunk:r,callback:i}=e.buffered[n],o=e.objectMode?1:r.length;e.length-=o,i(null!==(t=e.errored)&&void 0!==t?t:new _("write"))}const r=e[k].splice(0);for(let n=0;n<r.length;n++){var i;r[n](null!==(i=e.errored)&&void 0!==i?i:new _("end"))}P(e)}function j(e,r){if(r.corked||r.bufferProcessing||r.destroyed||!r.constructed)return;const{buffered:i,bufferedIndex:n,objectMode:o}=r,a=i.length-n;if(!a)return;let s=n;if(r.bufferProcessing=!0,a>1&&e._writev){r.pendingcb-=a-1;const n=r.allNoop?x:e=>{for(let t=s;t<i.length;++t)i[t].callback(e)},o=r.allNoop&&0===s?i:t(i,s);o.allBuffers=r.allBuffers,$(e,r,!0,r.length,o,"",n),P(r)}else{do{const{chunk:t,encoding:n,callback:a}=i[s];i[s++]=null;$(e,r,!1,o?1:t.length,t,n,a)}while(s<i.length&&!r.writing);s===i.length?P(r):s>256?(i.splice(0,s),r.bufferedIndex=0):r.bufferedIndex=s}r.bufferProcessing=!1}function U(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function D(t,r){r.prefinished||r.finalCalled||("function"!=typeof t._final||r.destroyed?(r.prefinished=!0,t.emit("prefinish")):(r.finalCalled=!0,function(t,r){let i=!1;function n(n){if(i)R(t,null!=n?n:w());else if(i=!0,r.pendingcb--,n){const e=r[k].splice(0);for(let t=0;t<e.length;t++)e[t](n);R(t,n,r.sync)}else U(r)&&(r.prefinished=!0,t.emit("prefinish"),r.pendingcb++,e.nextTick(W,t,r))}r.sync=!0,r.pendingcb++;try{t._final(n)}catch(err){n(err)}r.sync=!1}(t,r)))}function F(t,r,i){U(r)&&(D(t,r),0===r.pendingcb&&(i?(r.pendingcb++,e.nextTick((e,t)=>{U(t)?W(e,t):t.pendingcb--},t,r)):U(r)&&(r.pendingcb++,W(t,r))))}function W(e,t){t.pendingcb--,t.finished=!0;const r=t[k].splice(0);for(let i=0;i<r.length;i++)r[i]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}T.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},n(T.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),n(C,l,{__proto__:null,value:function(e){return!!i(this,e)||this===C&&(e&&e._writableState instanceof T)}}),C.prototype.pipe=function(){R(this,new v)},C.prototype.write=function(e,t,r){return!0===I(this,e,t,r)},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||j(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=s(e)),!d.isEncoding(e))throw new M(e);return this._writableState.defaultEncoding=e,this},C.prototype._write=function(e,t,r){if(!this._writev)throw new b("_write()");this._writev([{chunk:e,encoding:t}],r)},C.prototype._writev=null,C.prototype.end=function(t,i,n){const o=this._writableState;let a;if("function"==typeof t?(n=t,t=null,i=null):"function"==typeof i&&(n=i,i=null),null!=t){const e=I(this,t,i);e instanceof r&&(a=e)}return o.corked&&(o.corked=1,this.uncork()),a||(o.errored||o.ending?o.finished?a=new E("end"):o.destroyed&&(a=new _("end")):(o.ending=!0,F(this,o,!0),o.ended=!0)),"function"==typeof n&&(a||o.finished?e.nextTick(n,a):o[k].push(n)),this},o(C.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const K=f.destroy;let H;function z(){return void 0===H&&(H={}),H}return C.prototype.destroy=function(t,r){const i=this._writableState;return!i.destroyed&&(i.bufferedIndex<i.buffered.length||i[k].length)&&e.nextTick(q,i),K.call(this,t,r),this},C.prototype._undestroy=f.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype[c.captureRejectionSymbol]=function(e){this.destroy(e)},C.fromWeb=function(e,t){return z().newStreamWritableFromWritableStream(e,t)},C.toWeb=function(e){return z().newWritableStreamFromStreamWritable(e)},writable}function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const e=requireDist$1(),t=requireDist$2(),{isReadable:r,isWritable:i,isIterable:n,isNodeStream:o,isReadableNodeStream:a,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:l,isWritableStream:c}=requireUtils(),h=requireEndOfStream$1(),{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:p}}=requireErrors(),{destroyer:m}=requireDestroy(),g=requireDuplex(),y=requireReadable(),b=requireWritable(),{createDeferredPromise:w}=requireUtil(),v=requireFrom(),_=globalThis.Blob||t.Blob,E=void 0!==_?function(e){return e instanceof _}:function(e){return!1},S=globalThis.AbortController||requireBrowser$2().AbortController,{FunctionPrototypeCall:A}=requirePrimordials();class M extends g{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function R(e){const t=e.readable&&"function"!=typeof e.readable.read?y.wrap(e.readable):e.readable,n=e.writable;let o,a,s,u,l,c=!!r(t),f=!!i(n);function p(e){const t=u;u=null,t?t(e):e&&l.destroy(e)}return l=new M({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==n||!n.writableObjectMode),readable:c,writable:f}),f&&(h(n,e=>{f=!1,e&&m(t,e),p(e)}),l._write=function(e,t,r){n.write(e,t)?r():o=r},l._final=function(e){n.end(),a=e},n.on("drain",function(){if(o){const e=o;o=null,e()}}),n.on("finish",function(){if(a){const e=a;a=null,e()}})),c&&(h(t,e=>{c=!1,e&&m(t,e),p(e)}),t.on("readable",function(){if(s){const e=s;s=null,e()}}),t.on("end",function(){l.push(null)}),l._read=function(){for(;;){const e=t.read();if(null===e)return void(s=l._read);if(!l.push(e))return}}),l._destroy=function(e,r){e||null===u||(e=new d),s=null,o=null,a=null,null===u?r(e):(u=r,m(n,e),m(t,e))},l}return duplexify=function t(r,i){if(u(r))return r;if(a(r))return R({readable:r});if(s(r))return R({writable:r});if(o(r))return R({writable:!1,readable:!1});if(l(r))return R({readable:y.fromWeb(r)});if(c(r))return R({writable:b.fromWeb(r)});if("function"==typeof r){const{value:t,write:o,final:a,destroy:s}=function(t){let{promise:r,resolve:i}=w();const n=new S,o=n.signal,a=t(async function*(){for(;;){const t=r;r=null;const{chunk:n,done:a,cb:s}=await t;if(e.nextTick(s),a)return;if(o.aborted)throw new d(void 0,{cause:o.reason});({promise:r,resolve:i}=w()),yield n}}(),{signal:o});return{value:a,write(e,t,r){const n=i;i=null,n({chunk:e,done:!1,cb:r})},final(e){const t=i;i=null,t({done:!0,cb:e})},destroy(e,t){n.abort(),t(e)}}}(r);if(n(t))return v(M,t,{objectMode:!0,write:o,final:a,destroy:s});const u=null==t?void 0:t.then;if("function"==typeof u){let r;const i=A(u,t,e=>{if(null!=e)throw new p("nully","body",e)},e=>{m(r,e)});return r=new M({objectMode:!0,readable:!1,write:o,final(t){a(async()=>{try{await i,e.nextTick(t,null)}catch(err){e.nextTick(t,err)}})},destroy:s})}throw new p("Iterable, AsyncIterable or AsyncFunction",i,t)}if(E(r))return t(r.arrayBuffer());if(n(r))return v(M,r,{objectMode:!0,writable:!1});if(l(null==r?void 0:r.readable)&&c(null==r?void 0:r.writable))return M.fromWeb(r);if("object"==typeof(null==r?void 0:r.writable)||"object"==typeof(null==r?void 0:r.readable)){return R({readable:null!=r&&r.readable?a(null==r?void 0:r.readable)?null==r?void 0:r.readable:t(r.readable):void 0,writable:null!=r&&r.writable?s(null==r?void 0:r.writable)?null==r?void 0:r.writable:t(r.writable):void 0})}const h=null==r?void 0:r.then;if("function"==typeof h){let e;return A(h,r,t=>{null!=t&&e.push(t),e.push(null)},t=>{m(e,t)}),e=new M({objectMode:!0,writable:!1,read(){}})}throw new f(i,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],r)}}function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:i}=requirePrimordials();duplex=a;const n=requireReadable(),o=requireWritable();i(a.prototype,n.prototype),i(a,n);{const e=r(o.prototype);for(let t=0;t<e.length;t++){const r=e[t];a.prototype[r]||(a.prototype[r]=o.prototype[r])}}function a(e){if(!(this instanceof a))return new a(e);n.call(this,e),o.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let s,u;function l(){return void 0===s&&(s={}),s}return e(a.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),a.fromWeb=function(e,t){return l().newStreamDuplexFromReadableWritablePair(e,t)},a.toWeb=function(e){return l().newReadableWritablePairFromDuplex(e)},a.from=function(e){return u||(u=requireDuplexify()),u(e,"body")},duplex}function requireTransform(){if(hasRequiredTransform)return transform;hasRequiredTransform=1;const{ObjectSetPrototypeOf:e,Symbol:t}=requirePrimordials();transform=a;const{ERR_METHOD_NOT_IMPLEMENTED:r}=requireErrors().codes,i=requireDuplex(),{getHighWaterMark:n}=requireState();e(a.prototype,i.prototype),e(a,i);const o=t("kCallback");function a(e){if(!(this instanceof a))return new a(e);const t=e?n(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),i.call(this,e),this._readableState.sync=!1,this[o]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function s(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())})}function u(){this._final!==s&&s.call(this)}return a.prototype._final=s,a.prototype._transform=function(e,t,i){throw new r("_transform()")},a.prototype._write=function(e,t,r){const i=this._readableState,n=this._writableState,a=i.length;this._transform(e,t,(e,t)=>{e?r(e):(null!=t&&this.push(t),n.ended||a===i.length||i.length<i.highWaterMark?r():this[o]=r)})},a.prototype._read=function(){if(this[o]){const e=this[o];this[o]=null,e()}},transform}function requirePassthrough(){if(hasRequiredPassthrough)return passthrough;hasRequiredPassthrough=1;const{ObjectSetPrototypeOf:e}=requirePrimordials();passthrough=r;const t=requireTransform();function r(e){if(!(this instanceof r))return new r(e);t.call(this,e)}return e(r.prototype,t.prototype),e(r,t),r.prototype._transform=function(e,t,r){r(null,e)},passthrough}function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;const e=requireDist$1(),{ArrayIsArray:t,Promise:r,SymbolAsyncIterator:i,SymbolDispose:n}=requirePrimordials(),o=requireEndOfStream$1(),{once:a}=requireUtil(),s=requireDestroy(),u=requireDuplex(),{aggregateTwoErrors:l,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:d,ERR_STREAM_DESTROYED:f,ERR_STREAM_PREMATURE_CLOSE:p},AbortError:m}=requireErrors(),{validateFunction:g,validateAbortSignal:y}=requireValidators(),{isIterable:b,isReadable:w,isReadableNodeStream:v,isNodeStream:_,isTransformStream:E,isWebStream:S,isReadableStream:A,isReadableFinished:M}=requireUtils(),R=globalThis.AbortController||requireBrowser$2().AbortController;let x,k,T;function P(e,t,r){let i=!1;e.on("close",()=>{i=!0});return{destroy:t=>{i||(i=!0,s.destroyer(e,t||new f("pipe")))},cleanup:o(e,{readable:t,writable:r},e=>{i=!e})}}function C(e){if(b(e))return e;if(v(e))return async function*(e){k||(k=requireReadable());yield*k.prototype[i].call(e)}(e);throw new c("val",["Readable","Iterable","AsyncIterable"],e)}async function I(e,t,i,{end:n}){let a,s=null;const u=e=>{if(e&&(a=e),s){const e=s;s=null,e()}},c=()=>new r((e,t)=>{a?t(a):s=()=>{a?t(a):e()}});t.on("drain",u);const h=o(t,{readable:!1},u);try{t.writableNeedDrain&&await c();for await(const r of e)t.write(r)||await c();n&&(t.end(),await c()),i()}catch(err){i(a!==err?l(a,err):err)}finally{h(),t.off("drain",u)}}async function $(e,t,r,{end:i}){E(t)&&(t=t.writable);const n=t.getWriter();try{for await(const t of e)await n.ready,n.write(t).catch(()=>{});await n.ready,i&&await n.close(),r()}catch(err){try{await n.abort(err),r(err)}catch(o){r(o)}}}function B(r,i,o){if(1===r.length&&t(r[0])&&(r=r[0]),r.length<2)throw new d("streams");const a=new R,s=a.signal,l=null==o?void 0:o.signal,f=[];function p(){j(new m)}let g,M,k;y(l,"options.signal"),T=T||requireUtil().addAbortListener,l&&(g=T(l,p));const B=[];let N,L=0;function q(e){j(e,0===--L)}function j(t,r){var o;if(!t||M&&"ERR_STREAM_PREMATURE_CLOSE"!==M.code||(M=t),M||r){for(;B.length;)B.shift()(M);null===(o=g)||void 0===o||o[n](),a.abort(),r&&(M||f.forEach(e=>e()),e.nextTick(i,M,k))}}for(let t=0;t<r.length;t++){const i=r[t],n=t<r.length-1,a=t>0,l=n||!1!==(null==o?void 0:o.end),d=t===r.length-1;if(_(i)){let e=function(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&q(e)};if(l){const{destroy:e,cleanup:t}=P(i,n,a);B.push(e),w(i)&&d&&f.push(t)}i.on("error",e),w(i)&&d&&f.push(()=>{i.removeListener("error",e)})}if(0===t)if("function"==typeof i){if(N=i({signal:s}),!b(N))throw new h("Iterable, AsyncIterable or Stream","source",N)}else N=b(i)||v(i)||E(i)?i:u.from(i);else if("function"==typeof i){var U;if(E(N))N=C(null===(U=N)||void 0===U?void 0:U.readable);else N=C(N);if(N=i(N,{signal:s}),n){if(!b(N,!0))throw new h("AsyncIterable",`transform[${t-1}]`,N)}else{var D;x||(x=requirePassthrough());const t=new x({objectMode:!0}),r=null===(D=N)||void 0===D?void 0:D.then;if("function"==typeof r)L++,r.call(N,r=>{k=r,null!=r&&t.write(r),l&&t.end(),e.nextTick(q)},r=>{t.destroy(r),e.nextTick(q,r)});else if(b(N,!0))L++,I(N,t,q,{end:l});else{if(!A(N)&&!E(N))throw new h("AsyncIterable or Promise","destination",N);{const e=N.readable||N;L++,I(e,t,q,{end:l})}}N=t;const{destroy:i,cleanup:n}=P(N,!1,!0);B.push(i),d&&f.push(n)}}else if(_(i)){if(v(N)){L+=2;const e=O(N,i,q,{end:l});w(i)&&d&&f.push(e)}else if(E(N)||A(N)){const e=N.readable||N;L++,I(e,i,q,{end:l})}else{if(!b(N))throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],N);L++,I(N,i,q,{end:l})}N=i}else if(S(i)){if(v(N))L++,$(C(N),i,q,{end:l});else if(A(N)||b(N))L++,$(N,i,q,{end:l});else{if(!E(N))throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],N);L++,$(N.readable,i,q,{end:l})}N=i}else N=u.from(i)}return(null!=s&&s.aborted||null!=l&&l.aborted)&&e.nextTick(p),N}function O(t,r,i,{end:n}){let a=!1;if(r.on("close",()=>{a||i(new p)}),t.pipe(r,{end:!1}),n){let i=function(){a=!0,r.end()};M(t)?e.nextTick(i):t.once("end",i)}else i();return o(t,{readable:!0,writable:!1},e=>{const r=t._readableState;e&&"ERR_STREAM_PREMATURE_CLOSE"===e.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?t.once("end",i).once("error",i):i(e)}),o(r,{readable:!1,writable:!0},i)}return pipeline_1={pipelineImpl:B,pipeline:function(...e){return B(e,a(function(e){return g(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}}function requireCompose(){if(hasRequiredCompose)return compose;hasRequiredCompose=1;const{pipeline:e}=requirePipeline(),t=requireDuplex(),{destroyer:r}=requireDestroy(),{isNodeStream:i,isReadable:n,isWritable:o,isWebStream:a,isTransformStream:s,isWritableStream:u,isReadableStream:l}=requireUtils(),{AbortError:c,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:d}}=requireErrors(),f=requireEndOfStream$1();return compose=function(...p){if(0===p.length)throw new d("streams");if(1===p.length)return t.from(p[0]);const m=[...p];if("function"==typeof p[0]&&(p[0]=t.from(p[0])),"function"==typeof p[p.length-1]){const e=p.length-1;p[e]=t.from(p[e])}for(let e=0;e<p.length;++e)if(i(p[e])||a(p[e])){if(e<p.length-1&&!(n(p[e])||l(p[e])||s(p[e])))throw new h(`streams[${e}]`,m[e],"must be readable");if(e>0&&!(o(p[e])||u(p[e])||s(p[e])))throw new h(`streams[${e}]`,m[e],"must be writable")}let g,y,b,w,v;const _=p[0],E=e(p,function(e){const t=w;w=null,t?t(e):e?v.destroy(e):A||S||v.destroy()}),S=!!(o(_)||u(_)||s(_)),A=!!(n(E)||l(E)||s(E));if(v=new t({writableObjectMode:!(null==_||!_.writableObjectMode),readableObjectMode:!(null==E||!E.readableObjectMode),writable:S,readable:A}),S){if(i(_))v._write=function(e,t,r){_.write(e,t)?r():g=r},v._final=function(e){_.end(),y=e},_.on("drain",function(){if(g){const e=g;g=null,e()}});else if(a(_)){const e=(s(_)?_.writable:_).getWriter();v._write=async function(t,r,i){try{await e.ready,e.write(t).catch(()=>{}),i()}catch(err){i(err)}},v._final=async function(t){try{await e.ready,e.close().catch(()=>{}),y=t}catch(err){t(err)}}}const e=s(E)?E.readable:E;f(e,()=>{if(y){const e=y;y=null,e()}})}if(A)if(i(E))E.on("readable",function(){if(b){const e=b;b=null,e()}}),E.on("end",function(){v.push(null)}),v._read=function(){for(;;){const e=E.read();if(null===e)return void(b=v._read);if(!v.push(e))return}};else if(a(E)){const e=(s(E)?E.readable:E).getReader();v._read=async function(){for(;;)try{const{value:t,done:r}=await e.read();if(!v.push(t))return;if(r)return void v.push(null)}catch{return}}}return v._destroy=function(e,t){e||null===w||(e=new c),b=null,g=null,y=null,null===w?t(e):(w=t,i(E)&&r(E,e))},v}}function requireOperators(){if(hasRequiredOperators)return operators;hasRequiredOperators=1;const e=globalThis.AbortController||requireBrowser$2().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:r,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:n},AbortError:o}=requireErrors(),{validateAbortSignal:a,validateInteger:s,validateObject:u}=requireValidators(),l=requirePrimordials().Symbol("kWeak"),c=requirePrimordials().Symbol("kResistStopPropagation"),{finished:h}=requireEndOfStream$1(),d=requireCompose(),{addAbortSignalNoValidate:f}=requireAddAbortSignal(),{isWritable:p,isNodeStream:m}=requireUtils(),{deprecate:g}=requireUtil(),{ArrayPrototypePush:y,Boolean:b,MathFloor:w,Number:v,NumberIsNaN:_,Promise:E,PromiseReject:S,PromiseResolve:A,PromisePrototypeThen:M,Symbol:R}=requirePrimordials(),x=R("kEmpty"),k=R("kEof");function T(e,t){if("function"!=typeof e)throw new r("fn",["Function","AsyncFunction"],e);null!=t&&u(t,"options"),null!=(null==t?void 0:t.signal)&&a(t.signal,"options.signal");let i=1;null!=(null==t?void 0:t.concurrency)&&(i=w(t.concurrency));let n=i-1;return null!=(null==t?void 0:t.highWaterMark)&&(n=w(t.highWaterMark)),s(i,"options.concurrency",1),s(n,"options.highWaterMark",0),n+=i,async function*(){const r=requireUtil().AbortSignalAny([null==t?void 0:t.signal].filter(b)),a=this,s=[],u={signal:r};let l,c,h=!1,d=0;function f(){h=!0,p()}function p(){d-=1,m()}function m(){c&&!h&&d<i&&s.length<n&&(c(),c=null)}!async function(){try{for await(let t of a){if(h)return;if(r.aborted)throw new o;try{if(t=e(t,u),t===x)continue;t=A(t)}catch(err){t=S(err)}d+=1,M(t,p,f),s.push(t),l&&(l(),l=null),!h&&(s.length>=n||d>=i)&&await new E(e=>{c=e})}s.push(k)}catch(err){const t=S(err);M(t,p,f),s.push(t)}finally{h=!0,l&&(l(),l=null)}}();try{for(;;){for(;s.length>0;){const e=await s[0];if(e===k)return;if(r.aborted)throw new o;e!==x&&(yield e),s.shift(),m()}await new E(e=>{l=e})}}finally{h=!0,c&&(c(),c=null)}}.call(this)}async function P(e,t=void 0){for await(const r of C.call(this,e,t))return!0;return!1}function C(e,t){if("function"!=typeof e)throw new r("fn",["Function","AsyncFunction"],e);return T.call(this,async function(t,r){return await e(t,r)?t:x},t)}class I extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function $(e){if(e=v(e),_(e))return 0;if(e<0)throw new n("number",">= 0",e);return e}return operators.streamReturningOperators={asIndexedPairs:g(function(e=void 0){return null!=e&&u(e,"options"),null!=(null==e?void 0:e.signal)&&a(e.signal,"options.signal"),async function*(){let t=0;for await(const i of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new o({cause:e.signal.reason});yield[t++,i]}}.call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&u(t,"options"),null!=(null==t?void 0:t.signal)&&a(t.signal,"options.signal"),e=$(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new o;for await(const n of this){var i;if(null!=t&&null!==(i=t.signal)&&void 0!==i&&i.aborted)throw new o;e--<=0&&(yield n)}}.call(this)},filter:C,flatMap:function(e,t){const r=T.call(this,e,t);return async function*(){for await(const e of r)yield*e}.call(this)},map:T,take:function(e,t=void 0){return null!=t&&u(t,"options"),null!=(null==t?void 0:t.signal)&&a(t.signal,"options.signal"),e=$(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new o;for await(const n of this){var i;if(null!=t&&null!==(i=t.signal)&&void 0!==i&&i.aborted)throw new o;if(e-- >0&&(yield n),e<=0)return}}.call(this)},compose:function(e,r){if(null!=r&&u(r,"options"),null!=(null==r?void 0:r.signal)&&a(r.signal,"options.signal"),m(e)&&!p(e))throw new t("stream",e,"must be writable");const i=d(this,e);return null!=r&&r.signal&&f(r.signal,i),i}},operators.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new r("fn",["Function","AsyncFunction"],e);return!(await P.call(this,async(...t)=>!(await e(...t)),t))},forEach:async function(e,t){if("function"!=typeof e)throw new r("fn",["Function","AsyncFunction"],e);for await(const r of T.call(this,async function(t,r){return await e(t,r),x},t));},reduce:async function(t,i,n){var s;if("function"!=typeof t)throw new r("reducer",["Function","AsyncFunction"],t);null!=n&&u(n,"options"),null!=(null==n?void 0:n.signal)&&a(n.signal,"options.signal");let d=arguments.length>1;if(null!=n&&null!==(s=n.signal)&&void 0!==s&&s.aborted){const e=new o(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(e)),e}const f=new e,p=f.signal;if(null!=n&&n.signal){const e={once:!0,[l]:this,[c]:!0};n.signal.addEventListener("abort",()=>f.abort(),e)}let m=!1;try{for await(const e of this){var g;if(m=!0,null!=n&&null!==(g=n.signal)&&void 0!==g&&g.aborted)throw new o;d?i=await t(i,e,{signal:p}):(i=e,d=!0)}if(!m&&!d)throw new I}finally{f.abort()}return i},toArray:async function(e){null!=e&&u(e,"options"),null!=(null==e?void 0:e.signal)&&a(e.signal,"options.signal");const t=[];for await(const i of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new o(void 0,{cause:e.signal.reason});y(t,i)}return t},some:P,find:async function(e,t){for await(const r of C.call(this,e,t))return r}},operators}function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:e,Promise:t}=requirePrimordials(),{isIterable:r,isNodeStream:i,isWebStream:n}=requireUtils(),{pipelineImpl:o}=requirePipeline(),{finished:a}=requireEndOfStream$1();return requireStream(),promises={finished:a,pipeline:function(...a){return new t((t,s)=>{let u,l;const c=a[a.length-1];if(c&&"object"==typeof c&&!i(c)&&!r(c)&&!n(c)){const t=e(a);u=t.signal,l=t.end}o(a,(e,r)=>{e?s(e):t(r)},{signal:u,end:l})})}}}function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:e}=requireDist$2(),{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:i}=requirePrimordials(),{promisify:{custom:n}}=requireUtil(),{streamReturningOperators:o,promiseReturningOperators:a}=requireOperators(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=requireErrors(),u=requireCompose(),{setDefaultHighWaterMark:l,getDefaultHighWaterMark:c}=requireState(),{pipeline:h}=requirePipeline(),{destroyer:d}=requireDestroy(),f=requireEndOfStream$1(),p=requirePromises(),m=requireUtils(),g=stream.exports=requireLegacy().Stream;g.isDestroyed=m.isDestroyed,g.isDisturbed=m.isDisturbed,g.isErrored=m.isErrored,g.isReadable=m.isReadable,g.isWritable=m.isWritable,g.Readable=requireReadable();for(const b of r(o)){let e=function(...e){if(new.target)throw s();return g.Readable.from(i(r,this,e))};const r=o[b];t(e,"name",{__proto__:null,value:r.name}),t(e,"length",{__proto__:null,value:r.length}),t(g.Readable.prototype,b,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}for(const b of r(a)){let e=function(...e){if(new.target)throw s();return i(r,this,e)};const r=a[b];t(e,"name",{__proto__:null,value:r.name}),t(e,"length",{__proto__:null,value:r.length}),t(g.Readable.prototype,b,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}g.Writable=requireWritable(),g.Duplex=requireDuplex(),g.Transform=requireTransform(),g.PassThrough=requirePassthrough(),g.pipeline=h;const{addAbortSignal:y}=requireAddAbortSignal();return g.addAbortSignal=y,g.finished=f,g.destroy=d,g.compose=u,g.setDefaultHighWaterMark=l,g.getDefaultHighWaterMark=c,t(g,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>p}),t(h,n,{__proto__:null,enumerable:!0,get:()=>p.pipeline}),t(f,n,{__proto__:null,enumerable:!0,get:()=>p.finished}),g.Stream=g,g._isUint8Array=function(e){return e instanceof Uint8Array},g._uint8ArrayToBuffer=function(t){return e.from(t.buffer,t.byteOffset,t.byteLength)},stream.exports}function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(e){const t=requireStream(),r=requirePromises(),i=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=i,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get:()=>r}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(browser$2)),browser$2.exports}function safeApply$1(e,t,r){try{Reflect.apply(e,t,r)}catch(err){setTimeout(()=>{throw err})}}function arrayClone$1(e){const t=e.length,r=new Array(t);for(let i=0;i<t;i+=1)r[i]=e[i];return r}requireBrowser$1();let SafeEventEmitter$1=class extends eventsExports.EventEmitter{emit(e,...t){let r="error"===e;const i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const n=i[e];if(void 0===n)return!1;if("function"==typeof n)safeApply$1(n,this,t);else{const e=n.length,r=arrayClone$1(n);for(let i=0;i<e;i+=1)safeApply$1(r[i],this,t)}return!0}};class SerializableError extends Error{constructor({code:e,message:t,data:r}){if(!Number.isInteger(e))throw new Error("code must be an integer");if(!t||"string"!=typeof t)throw new Error("message must be string");super(t),_defineProperty(this,"code",void 0),_defineProperty(this,"data",void 0),this.code=e,void 0!==r&&(this.data=r)}toString(){return stringify$1({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const errorCodes$1={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},errorValues$1={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},FALLBACK_ERROR_CODE$1=errorCodes$1.rpc.internal,FALLBACK_MESSAGE$1="Unspecified error message. This is a bug, please report it.",JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function isValidCode$1(e){return Number.isInteger(e)}function isValidString(e){return"string"==typeof e&&e.length>0}function isObject$2(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)}function isPlainObject(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(t){return!1}}function isJsonRpcServerError(e){return e>=-32099&&e<=-32e3}function isJsonRpcError(e){const t=e;return!!t&&(!(!isValidCode$1(t.code)||!isValidString(t.message))&&!(t.stack&&!isValidString(t.stack)))}function getMessageFromCode$1(e,t=FALLBACK_MESSAGE$1){if(isValidCode$1(e)){const t=e.toString();if(Object.hasOwn(errorValues$1,t))return errorValues$1[t].message;if(isJsonRpcServerError(e))return JSON_RPC_SERVER_ERROR_MESSAGE}return t}const FALLBACK_ERROR={code:FALLBACK_ERROR_CODE$1,message:getMessageFromCode$1(FALLBACK_ERROR_CODE$1)};function isValidJson(e){try{JSON.parse(JSON.stringify(e,(e,t)=>{if("__proto__"===e||"constructor"===e)throw new Error("Not valid json");if("function"==typeof t||"symbol"==typeof t)throw new Error("Not valid json");return t}),(e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t})}catch(t){return!1}return!0}function serializeObject(e){return Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return isValidJson(i)&&(t[r]=i),t},{})}function serializeCause(e){return Array.isArray(e)?e.map(e=>isValidJson(e)?e:isObject$2(e)?serializeObject(e):null):isObject$2(e)?serializeObject(e):isValidJson(e)?e:null}function buildError(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if(isJsonRpcError(e))return e;const r=serializeCause(e);return _objectSpread2(_objectSpread2({},t),{},{data:{cause:r}})}function serializeError$1(e,{fallbackError:t=FALLBACK_ERROR,shouldIncludeStack:r=!0}={}){if(!isJsonRpcError(t))throw new Error("Must provide fallback error with integer number code and string message.");const i=buildError(e,t);return r||delete i.stack,i}function dataHasCause(e){return isObject$2(e)&&Object.hasOwn(e,"cause")&&isObject$2(e.cause)}function isValidEthProviderCode(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function stringifyReplacer(e,t){if("[Circular]"!==t)return t}class JsonRpcError extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a non-empty string.');dataHasCause(r)?(super(t,{cause:r.cause}),_defineProperty(this,"cause",void 0),_defineProperty(this,"code",void 0),_defineProperty(this,"data",void 0),Object.hasOwn(this,"cause")||Object.assign(this,{cause:r.cause})):(super(t),_defineProperty(this,"cause",void 0),_defineProperty(this,"code",void 0),_defineProperty(this,"data",void 0)),void 0!==r&&(this.data=r),this.code=e,this.cause=null==r?void 0:r.cause}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,isPlainObject(this.data)&&(e.data.cause=serializeCause(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return stringify$1(this.serialize(),{replacer:stringifyReplacer,space:2})}}class EthereumProviderError extends JsonRpcError{constructor(e,t,r){if(!isValidEthProviderCode(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}function parseOpts(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[null!=t?t:void 0,r]}}return[]}function getJsonRpcError(e,t){const[r,i]=parseOpts(t);return new JsonRpcError(e,null!=r?r:getMessageFromCode$1(e),i)}function getEthProviderError(e,t){const[r,i]=parseOpts(t);return new EthereumProviderError(e,null!=r?r:getMessageFromCode$1(e),i)}const rpcErrors={parse:e=>getJsonRpcError(errorCodes$1.rpc.parse,e),invalidRequest:e=>getJsonRpcError(errorCodes$1.rpc.invalidRequest,e),invalidParams:e=>getJsonRpcError(errorCodes$1.rpc.invalidParams,e),methodNotFound:e=>getJsonRpcError(errorCodes$1.rpc.methodNotFound,e),internal:e=>getJsonRpcError(errorCodes$1.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return getJsonRpcError(t,e)},invalidInput:e=>getJsonRpcError(errorCodes$1.rpc.invalidInput,e),resourceNotFound:e=>getJsonRpcError(errorCodes$1.rpc.resourceNotFound,e),resourceUnavailable:e=>getJsonRpcError(errorCodes$1.rpc.resourceUnavailable,e),transactionRejected:e=>getJsonRpcError(errorCodes$1.rpc.transactionRejected,e),methodNotSupported:e=>getJsonRpcError(errorCodes$1.rpc.methodNotSupported,e),limitExceeded:e=>getJsonRpcError(errorCodes$1.rpc.limitExceeded,e)},providerErrors={userRejectedRequest:e=>getEthProviderError(errorCodes$1.provider.userRejectedRequest,e),unauthorized:e=>getEthProviderError(errorCodes$1.provider.unauthorized,e),unsupportedMethod:e=>getEthProviderError(errorCodes$1.provider.unsupportedMethod,e),disconnected:e=>getEthProviderError(errorCodes$1.provider.disconnected,e),chainDisconnected:e=>getEthProviderError(errorCodes$1.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:i}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new EthereumProviderError(t,r,i)}};function createAsyncMiddleware(e){return async(t,r,i,n)=>{let o;const a=new Promise(e=>{o=e});let s=null,u=!1;const l=async()=>{u=!0,i(e=>{s=e,o()}),await a};try{await e(t,r,l),u?(await a,s(null)):n(null)}catch(err){const t=err;s?s(t):n(t)}}}function constructFallbackError(e){const{message:t="",code:r=-32603,stack:i="Stack trace is not available.",data:n=""}=e,o=parseInt((null==r?void 0:r.toString())||"-32603");return{message:t||(null==e?void 0:e.toString())||getMessageFromCode$1(o),code:o,stack:i,data:n||t||(null==e?void 0:e.toString())}}class JRPCEngine extends SafeEventEmitter$1{constructor(){super(),_defineProperty(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,r){const i=[];let n=null,o=!1;for(const a of r)if([n,o]=await JRPCEngine._runMiddleware(e,t,a,i),o)break;return[n,o,i.reverse()]}static _runMiddleware(e,t,r,i){return new Promise(n=>{const o=e=>{const r=e||t.error;r&&("object"==typeof r&&!1===Object.keys(r).includes("stack")&&(r.stack="Stack trace is not available."),loglevel$2.error(r),t.error=serializeError$1(r,{shouldIncludeStack:!0,fallbackError:constructFallbackError(r)})),n([r,!0])},a=e=>{t.error?o(t.error):(e&&("function"!=typeof e&&o(new SerializableError({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(e)),n([null,!1]))};try{r(e,t,a,o)}catch(s){o(s)}})}static async _runReturnHandlers(e){for(const t of e)await new Promise((e,r)=>{t(t=>t?r(t):e())})}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new SerializableError({code:-32603,message:"Response has no error or result for request"});if(!r)throw new SerializableError({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,i)=>{try{const[n,o,a]=await JRPCEngine._runAllMiddleware(e,t,this._middleware);return o?(await JRPCEngine._runReturnHandlers(a),i(n)):r(async e=>{try{await JRPCEngine._runReturnHandlers(a)}catch(t){return e(t)}return e()})}catch(n){return i(n)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(r){if(t)return t(r);throw r}}_promiseHandle(e){return new Promise((t,r)=>{this._handle(e,(e,i)=>{e&&void 0===i?r(e):t(i)}).catch(r)})}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const e=new SerializableError({code:-32603,message:"request must be plain object"});return t(e,{id:void 0,jsonrpc:"2.0",error:e})}if("string"!=typeof e.method){const r=new SerializableError({code:-32603,message:"method must be string"});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=_objectSpread2({},e),i={id:r.id,jsonrpc:r.jsonrpc};let n=null;try{await this._processRequest(r,i)}catch(o){n=o}return n&&(delete i.result,i.error||("object"==typeof n&&!1===Object.keys(n).includes("stack")&&(n.stack="Stack trace is not available."),loglevel$2.error(n),i.error=serializeError$1(n,{shouldIncludeStack:!0,fallbackError:constructFallbackError(n)}))),t(n,i)}async _processRequest(e,t){const[r,i,n]=await JRPCEngine._runAllMiddleware(e,t,this._middleware);if(JRPCEngine._checkForCompletion(e,t,i),await JRPCEngine._runReturnHandlers(n),r)throw r}}function mergeMiddleware(e){const t=new JRPCEngine;return e.forEach(e=>{t.push(e)}),t.asMiddleware()}function providerFromEngine(e){const t=new SafeEventEmitter$1;return t.sendAsync=async t=>{const r=await e.handle(t);if(r.error){"object"==typeof r.error&&!1===Object.keys(r.error).includes("stack")&&(r.error.stack="Stack trace is not available."),loglevel$2.error(r.error);const e=serializeError$1(r.error,{fallbackError:constructFallbackError(r.error),shouldIncludeStack:!0});throw rpcErrors.internal(e)}return r.result},t.send=(t,r)=>{if("function"!=typeof r)throw new Error('Must provide callback to "send" method.');e.handle(t,r)},e.on&&e.on("notification",e=>{t.emit("data",null,e)}),t.request=async e=>{const r=_objectSpread2(_objectSpread2({},e),{},{id:Math.random().toString(36).slice(2),jsonrpc:"2.0"});return await t.sendAsync(r)},t}var once={exports:{}},wrappy_1,hasRequiredWrappy,hasRequiredOnce,endOfStream,hasRequiredEndOfStream;function requireWrappy(){if(hasRequiredWrappy)return wrappy_1;return hasRequiredWrappy=1,wrappy_1=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(e){i[e]=t[e]}),i;function i(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var i=t.apply(this,e),n=e[e.length-1];return"function"==typeof i&&i!==n&&Object.keys(n).forEach(function(e){i[e]=n[e]}),i}},wrappy_1}function requireOnce(){if(hasRequiredOnce)return once.exports;hasRequiredOnce=1;var e=requireWrappy();function t(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function r(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}return once.exports=e(t),once.exports.strict=e(r),t.proto=t(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return t(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return r(this)},configurable:!0})}),once.exports}function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var e=requireOnce(),t=function(){},r=commonjsGlobal.Bare?queueMicrotask:process$1.nextTick.bind(process$1),i=function(n,o,a){if("function"==typeof o)return i(n,null,o);o||(o={}),a=e(a||t);var s=n._writableState,u=n._readableState,l=o.readable||!1!==o.readable&&n.readable,c=o.writable||!1!==o.writable&&n.writable,h=!1,d=function(){n.writable||f()},f=function(){c=!1,l||a.call(n)},p=function(){l=!1,c||a.call(n)},m=function(e){a.call(n,e?new Error("exited with error code: "+e):null)},g=function(e){a.call(n,e)},y=function(){r(b)},b=function(){if(!h)return(!l||u&&u.ended&&!u.destroyed)&&(!c||s&&s.ended&&!s.destroyed)?void 0:a.call(n,new Error("premature close"))},w=function(){n.req.on("finish",f)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(n)?c&&!s&&(n.on("end",d),n.on("close",d)):(n.on("complete",f),n.on("abort",y),n.req?w():n.on("request",w)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(n)&&n.on("exit",m),n.on("end",p),n.on("finish",f),!1!==o.error&&n.on("error",g),n.on("close",y),function(){h=!0,n.removeListener("complete",f),n.removeListener("abort",y),n.removeListener("request",w),n.req&&n.req.removeListener("finish",f),n.removeListener("end",d),n.removeListener("close",d),n.removeListener("finish",f),n.removeListener("exit",m),n.removeListener("end",p),n.removeListener("error",g),n.removeListener("close",y)}};return endOfStream=i}requireEndOfStream(),requireOnce();var empty=null;const empty$1=Object.freeze(Object.defineProperty({__proto__:null,default:empty},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(empty$1);var pump_1,hasRequiredPump;function requirePump(){if(hasRequiredPump)return pump_1;hasRequiredPump=1;var e,t=requireOnce(),r=requireEndOfStream();try{e=require$$2$1}catch(l){}var i=function(){},n=void 0!==process$1&&/^v?\.0/.test(process$1.version),o=function(e){return"function"==typeof e},a=function(a,s,u,l){l=t(l);var c=!1;a.on("close",function(){c=!0}),r(a,{readable:s,writable:u},function(e){if(e)return l(e);c=!0,l()});var h=!1;return function(t){if(!c&&!h)return h=!0,function(t){return!!n&&!!e&&(t instanceof(e.ReadStream||i)||t instanceof(e.WriteStream||i))&&o(t.close)}(a)?a.close(i):function(e){return e.setHeader&&o(e.abort)}(a)?a.abort():o(a.destroy)?a.destroy():void l(t||new Error("stream was destroyed"))}},s=function(e){e()},u=function(e,t){return e.pipe(t)};return pump_1=function(){var e,t=Array.prototype.slice.call(arguments),r=o(t[t.length-1]||i)&&t.pop()||i;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map(function(i,o){var u=o<t.length-1;return a(i,u,o>0,function(t){e||(e=t),t&&n.forEach(s),u||(n.forEach(s),r(e))})});return t.reduce(u)},pump_1}requirePump();const LANGUAGES={en:"en",ja:"ja",ko:"ko",de:"de",zh:"zh",es:"es",fr:"fr",pt:"pt",nl:"nl",tr:"tr"},LANGUAGE_MAP={en:"english",ja:"japanese",ko:"korean",de:"german",zh:"mandarin",es:"spanish",fr:"french",pt:"portuguese",nl:"dutch",tr:"turkish"};var colorString={exports:{}},colorName,hasRequiredColorName;function requireColorName(){return hasRequiredColorName?colorName:(hasRequiredColorName=1,colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]})}var simpleSwizzle={exports:{}},isArrayish,hasRequiredIsArrayish,hasRequiredSimpleSwizzle,hasRequiredColorString,conversions,hasRequiredConversions,route,hasRequiredRoute,colorConvert,hasRequiredColorConvert,color,hasRequiredColor;function requireIsArrayish(){return hasRequiredIsArrayish?isArrayish:(hasRequiredIsArrayish=1,isArrayish=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))})}function requireSimpleSwizzle(){if(hasRequiredSimpleSwizzle)return simpleSwizzle.exports;hasRequiredSimpleSwizzle=1;var e=requireIsArrayish(),t=Array.prototype.concat,r=Array.prototype.slice,i=simpleSwizzle.exports=function(i){for(var n=[],o=0,a=i.length;o<a;o++){var s=i[o];e(s)?n=t.call(n,r.call(s)):n.push(s)}return n};return i.wrap=function(e){return function(){return e(i(arguments))}},simpleSwizzle.exports}function requireColorString(){if(hasRequiredColorString)return colorString.exports;hasRequiredColorString=1;var e=requireColorName(),t=requireSimpleSwizzle(),r=Object.hasOwnProperty,i=Object.create(null);for(var n in e)r.call(e,n)&&(i[e[n]]=n);var o=colorString.exports={to:{},get:{}};function a(e,t,r){return Math.min(Math.max(t,e),r)}function s(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}return o.get=function(e){var t,r;switch(e.substring(0,3).toLowerCase()){case"hsl":t=o.get.hsl(e),r="hsl";break;case"hwb":t=o.get.hwb(e),r="hwb";break;default:t=o.get.rgb(e),r="rgb"}return t?{model:r,value:t}:null},o.get.rgb=function(t){if(!t)return null;var i,n,o,s=[0,0,0,1];if(i=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(o=i[2],i=i[1],n=0;n<3;n++){var u=2*n;s[n]=parseInt(i.slice(u,u+2),16)}o&&(s[3]=parseInt(o,16)/255)}else if(i=t.match(/^#([a-f0-9]{3,4})$/i)){for(o=(i=i[1])[3],n=0;n<3;n++)s[n]=parseInt(i[n]+i[n],16);o&&(s[3]=parseInt(o+o,16)/255)}else if(i=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)s[n]=parseInt(i[n+1],0);i[4]&&(i[5]?s[3]=.01*parseFloat(i[4]):s[3]=parseFloat(i[4]))}else{if(!(i=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(i=t.match(/^(\w+)$/))?"transparent"===i[1]?[0,0,0,0]:r.call(e,i[1])?((s=e[i[1]])[3]=1,s):null:null;for(n=0;n<3;n++)s[n]=Math.round(2.55*parseFloat(i[n+1]));i[4]&&(i[5]?s[3]=.01*parseFloat(i[4]):s[3]=parseFloat(i[4]))}for(n=0;n<3;n++)s[n]=a(s[n],0,255);return s[3]=a(s[3],0,1),s},o.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,a(parseFloat(t[2]),0,100),a(parseFloat(t[3]),0,100),a(isNaN(r)?1:r,0,1)]}return null},o.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,a(parseFloat(t[2]),0,100),a(parseFloat(t[3]),0,100),a(isNaN(r)?1:r,0,1)]}return null},o.to.hex=function(){var e=t(arguments);return"#"+s(e[0])+s(e[1])+s(e[2])+(e[3]<1?s(Math.round(255*e[3])):"")},o.to.rgb=function(){var e=t(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},o.to.rgb.percent=function(){var e=t(arguments),r=Math.round(e[0]/255*100),i=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+r+"%, "+i+"%, "+n+"%)":"rgba("+r+"%, "+i+"%, "+n+"%, "+e[3]+")"},o.to.hsl=function(){var e=t(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},o.to.hwb=function(){var e=t(arguments),r="";return e.length>=4&&1!==e[3]&&(r=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+r+")"},o.to.keyword=function(e){return i[e.slice(0,3)]},colorString.exports}function requireConversions(){if(hasRequiredConversions)return conversions;hasRequiredConversions=1;const e=requireColorName(),t={};for(const n of Object.keys(e))t[e[n]]=n;const r={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};conversions=r;for(const n of Object.keys(r)){if(!("channels"in r[n]))throw new Error("missing channels property: "+n);if(!("labels"in r[n]))throw new Error("missing channel labels property: "+n);if(r[n].labels.length!==r[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=r[n];delete r[n].channels,delete r[n].labels,Object.defineProperty(r[n],"channels",{value:e}),Object.defineProperty(r[n],"labels",{value:t})}function i(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}return r.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.min(t,r,i),o=Math.max(t,r,i),a=o-n;let s,u;o===n?s=0:t===o?s=(r-i)/a:r===o?s=2+(i-t)/a:i===o&&(s=4+(t-r)/a),s=Math.min(60*s,360),s<0&&(s+=360);const l=(n+o)/2;return u=o===n?0:l<=.5?a/(o+n):a/(2-o-n),[s,100*u,100*l]},r.rgb.hsv=function(e){let t,r,i,n,o;const a=e[0]/255,s=e[1]/255,u=e[2]/255,l=Math.max(a,s,u),c=l-Math.min(a,s,u),h=function(e){return(l-e)/6/c+.5};return 0===c?(n=0,o=0):(o=c/l,t=h(a),r=h(s),i=h(u),a===l?n=i-r:s===l?n=1/3+t-i:u===l&&(n=2/3+r-t),n<0?n+=1:n>1&&(n-=1)),[360*n,100*o,100*l]},r.rgb.hwb=function(e){const t=e[0],i=e[1];let n=e[2];const o=r.rgb.hsl(e)[0],a=1/255*Math.min(t,Math.min(i,n));return n=1-1/255*Math.max(t,Math.max(i,n)),[o,100*a,100*n]},r.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.min(1-t,1-r,1-i);return[100*((1-t-n)/(1-n)||0),100*((1-r-n)/(1-n)||0),100*((1-i-n)/(1-n)||0),100*n]},r.rgb.keyword=function(r){const n=t[r];if(n)return n;let o,a=1/0;for(const t of Object.keys(e)){const n=i(r,e[t]);n<a&&(a=n,o=t)}return o},r.keyword.rgb=function(t){return e[t]},r.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,i=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;return[100*(.4124*t+.3576*r+.1805*i),100*(.2126*t+.7152*r+.0722*i),100*(.0193*t+.1192*r+.9505*i)]},r.rgb.lab=function(e){const t=r.rgb.xyz(e);let i=t[0],n=t[1],o=t[2];i/=95.047,n/=100,o/=108.883,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;return[116*n-16,500*(i-n),200*(n-o)]},r.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,i=e[2]/100;let n,o,a;if(0===r)return a=255*i,[a,a,a];n=i<.5?i*(1+r):i+r-i*r;const s=2*i-n,u=[0,0,0];for(let l=0;l<3;l++)o=t+1/3*-(l-1),o<0&&o++,o>1&&o--,a=6*o<1?s+6*(n-s)*o:2*o<1?n:3*o<2?s+(n-s)*(2/3-o)*6:s,u[l]=255*a;return u},r.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,i=e[2]/100,n=r;const o=Math.max(i,.01);i*=2,r*=i<=1?i:2-i,n*=o<=1?o:2-o;return[t,100*(0===i?2*n/(o+n):2*r/(i+r)),100*((i+r)/2)]},r.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let i=e[2]/100;const n=Math.floor(t)%6,o=t-Math.floor(t),a=255*i*(1-r),s=255*i*(1-r*o),u=255*i*(1-r*(1-o));switch(i*=255,n){case 0:return[i,u,a];case 1:return[s,i,a];case 2:return[a,i,u];case 3:return[a,s,i];case 4:return[u,a,i];case 5:return[i,a,s]}},r.hsv.hsl=function(e){const t=e[0],r=e[1]/100,i=e[2]/100,n=Math.max(i,.01);let o,a;a=(2-r)*i;const s=(2-r)*n;return o=r*n,o/=s<=1?s:2-s,o=o||0,a/=2,[t,100*o,100*a]},r.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,i=e[2]/100;const n=r+i;let o;n>1&&(r/=n,i/=n);const a=Math.floor(6*t),s=1-i;o=6*t-a,1&a&&(o=1-o);const u=r+o*(s-r);let l,c,h;switch(a){default:case 6:case 0:l=s,c=u,h=r;break;case 1:l=u,c=s,h=r;break;case 2:l=r,c=s,h=u;break;case 3:l=r,c=u,h=s;break;case 4:l=u,c=r,h=s;break;case 5:l=s,c=r,h=u}return[255*l,255*c,255*h]},r.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,i=e[2]/100,n=e[3]/100;return[255*(1-Math.min(1,t*(1-n)+n)),255*(1-Math.min(1,r*(1-n)+n)),255*(1-Math.min(1,i*(1-n)+n))]},r.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,i=e[2]/100;let n,o,a;return n=3.2406*t+-1.5372*r+-.4986*i,o=-.9689*t+1.8758*r+.0415*i,a=.0557*t+-.204*r+1.057*i,n=n>.0031308?1.055*n**(1/2.4)-.055:12.92*n,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,n=Math.min(Math.max(0,n),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[255*n,255*o,255*a]},r.xyz.lab=function(e){let t=e[0],r=e[1],i=e[2];t/=95.047,r/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;return[116*r-16,500*(t-r),200*(r-i)]},r.lab.xyz=function(e){let t,r,i;r=(e[0]+16)/116,t=e[1]/500+r,i=r-e[2]/200;const n=r**3,o=t**3,a=i**3;return r=n>.008856?n:(r-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,i=a>.008856?a:(i-16/116)/7.787,t*=95.047,r*=100,i*=108.883,[t,r,i]},r.lab.lch=function(e){const t=e[0],r=e[1],i=e[2];let n;n=360*Math.atan2(i,r)/2/Math.PI,n<0&&(n+=360);return[t,Math.sqrt(r*r+i*i),n]},r.lch.lab=function(e){const t=e[0],r=e[1],i=e[2]/360*2*Math.PI;return[t,r*Math.cos(i),r*Math.sin(i)]},r.rgb.ansi16=function(e,t=null){const[i,n,o]=e;let a=null===t?r.rgb.hsv(e)[2]:t;if(a=Math.round(a/50),0===a)return 30;let s=30+(Math.round(o/255)<<2|Math.round(n/255)<<1|Math.round(i/255));return 2===a&&(s+=60),s},r.hsv.ansi16=function(e){return r.rgb.ansi16(r.hsv.rgb(e),e[2])},r.rgb.ansi256=function(e){const t=e[0],r=e[1],i=e[2];if(t===r&&r===i)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(i/255*5)},r.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},r.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},r.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},r.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];3===t[0].length&&(r=r.split("").map(e=>e+e).join(""));const i=parseInt(r,16);return[i>>16&255,i>>8&255,255&i]},r.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.max(Math.max(t,r),i),o=Math.min(Math.min(t,r),i),a=n-o;let s,u;return s=a<1?o/(1-a):0,u=a<=0?0:n===t?(r-i)/a%6:n===r?2+(i-t)/a:4+(t-r)/a,u/=6,u%=1,[360*u,100*a,100*s]},r.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,i=r<.5?2*t*r:2*t*(1-r);let n=0;return i<1&&(n=(r-.5*i)/(1-i)),[e[0],100*i,100*n]},r.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,i=t*r;let n=0;return i<1&&(n=(r-i)/(1-i)),[e[0],100*i,100*n]},r.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,i=e[2]/100;if(0===r)return[255*i,255*i,255*i];const n=[0,0,0],o=t%1*6,a=o%1,s=1-a;let u=0;switch(Math.floor(o)){case 0:n[0]=1,n[1]=a,n[2]=0;break;case 1:n[0]=s,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=a;break;case 3:n[0]=0,n[1]=s,n[2]=1;break;case 4:n[0]=a,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=s}return u=(1-r)*i,[255*(r*n[0]+u),255*(r*n[1]+u),255*(r*n[2]+u)]},r.hcg.hsv=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);let i=0;return r>0&&(i=t/r),[e[0],100*i,100*r]},r.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let i=0;return r>0&&r<.5?i=t/(2*r):r>=.5&&r<1&&(i=t/(2*(1-r))),[e[0],100*i,100*r]},r.hcg.hwb=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},r.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,i=r-t;let n=0;return i<1&&(n=(r-i)/(1-i)),[e[0],100*i,100*n]},r.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},r.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},r.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},r.gray.hsl=function(e){return[0,0,e[0]]},r.gray.hsv=r.gray.hsl,r.gray.hwb=function(e){return[0,100,e[0]]},r.gray.cmyk=function(e){return[0,0,0,e[0]]},r.gray.lab=function(e){return[e[0],0,0]},r.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},r.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]},conversions}function requireRoute(){if(hasRequiredRoute)return route;hasRequiredRoute=1;const e=requireConversions();function t(t){const r=function(){const t={},r=Object.keys(e);for(let e=r.length,i=0;i<e;i++)t[r[i]]={distance:-1,parent:null};return t}(),i=[t];for(r[t].distance=0;i.length;){const t=i.pop(),n=Object.keys(e[t]);for(let e=n.length,o=0;o<e;o++){const e=n[o],a=r[e];-1===a.distance&&(a.distance=r[t].distance+1,a.parent=t,i.unshift(e))}}return r}function r(e,t){return function(r){return t(e(r))}}function i(t,i){const n=[i[t].parent,t];let o=e[i[t].parent][t],a=i[t].parent;for(;i[a].parent;)n.unshift(i[a].parent),o=r(e[i[a].parent][a],o),a=i[a].parent;return o.conversion=n,o}return route=function(e){const r=t(e),n={},o=Object.keys(r);for(let t=o.length,a=0;a<t;a++){const e=o[a];null!==r[e].parent&&(n[e]=i(e,r))}return n}}function requireColorConvert(){if(hasRequiredColorConvert)return colorConvert;hasRequiredColorConvert=1;const e=requireConversions(),t=requireRoute(),r={};return Object.keys(e).forEach(i=>{r[i]={},Object.defineProperty(r[i],"channels",{value:e[i].channels}),Object.defineProperty(r[i],"labels",{value:e[i].labels});const n=t(i);Object.keys(n).forEach(e=>{const t=n[e];r[i][e]=function(e){const t=function(...t){const r=t[0];if(null==r)return r;r.length>1&&(t=r);const i=e(t);if("object"==typeof i)for(let e=i.length,n=0;n<e;n++)i[n]=Math.round(i[n]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}(t),r[i][e].raw=function(e){const t=function(...t){const r=t[0];return null==r?r:(r.length>1&&(t=r),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(t)})}),colorConvert=r}function requireColor(){if(hasRequiredColor)return color;hasRequiredColor=1;const e=requireColorString(),t=requireColorConvert(),r=["keyword","gray","hex"],i={};for(const c of Object.keys(t))i[[...t[c].labels].sort().join("")]=c;const n={};function o(a,s){if(!(this instanceof o))return new o(a,s);if(s&&s in r&&(s=null),s&&!(s in t))throw new Error("Unknown model: "+s);let u,c;if(null==a)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(a instanceof o)this.model=a.model,this.color=[...a.color],this.valpha=a.valpha;else if("string"==typeof a){const r=e.get(a);if(null===r)throw new Error("Unable to parse color from string: "+a);this.model=r.model,c=t[this.model].channels,this.color=r.value.slice(0,c),this.valpha="number"==typeof r.value[c]?r.value[c]:1}else if(a.length>0){this.model=s||"rgb",c=t[this.model].channels;const e=Array.prototype.slice.call(a,0,c);this.color=l(e,c),this.valpha="number"==typeof a[c]?a[c]:1}else if("number"==typeof a)this.model="rgb",this.color=[a>>16&255,a>>8&255,255&a],this.valpha=1;else{this.valpha=1;const e=Object.keys(a);"alpha"in a&&(e.splice(e.indexOf("alpha"),1),this.valpha="number"==typeof a.alpha?a.alpha:0);const r=e.sort().join("");if(!(r in i))throw new Error("Unable to parse color from object: "+JSON.stringify(a));this.model=i[r];const{labels:n}=t[this.model],o=[];for(u=0;u<n.length;u++)o.push(a[n[u]]);this.color=l(o)}if(n[this.model])for(c=t[this.model].channels,u=0;u<c;u++){const e=n[this.model][u];e&&(this.color[u]=e(this.color[u]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}o.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let r=this.model in e.to?this:this.rgb();r=r.round("number"==typeof t?t:1);const i=1===r.valpha?r.color:[...r.color,this.valpha];return e.to[r.model](i)},percentString(t){const r=this.rgb().round("number"==typeof t?t:1),i=1===r.valpha?r.color:[...r.color,this.valpha];return e.to.rgb.percent(i)},array(){return 1===this.valpha?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:r}=t[this.model],{labels:i}=t[this.model];for(let t=0;t<r;t++)e[i[t]]=this.color[t];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new o([...this.color.map(a(e)),this.valpha],this.model)},alpha(e){return void 0!==e?new o([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:s("rgb",0,u(255)),green:s("rgb",1,u(255)),blue:s("rgb",2,u(255)),hue:s(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:s("hsl",1,u(100)),lightness:s("hsl",2,u(100)),saturationv:s("hsv",1,u(100)),value:s("hsv",2,u(100)),chroma:s("hcg",1,u(100)),gray:s("hcg",2,u(100)),white:s("hwb",1,u(100)),wblack:s("hwb",2,u(100)),cyan:s("cmyk",0,u(100)),magenta:s("cmyk",1,u(100)),yellow:s("cmyk",2,u(100)),black:s("cmyk",3,u(100)),x:s("xyz",0,u(95.047)),y:s("xyz",1,u(100)),z:s("xyz",2,u(108.833)),l:s("lab",0,u(100)),a:s("lab",1),b:s("lab",2),keyword(e){return void 0!==e?new o(e):t[this.model].keyword(this.color)},hex(t){return void 0!==t?new o(t):e.to.hex(this.rgb().round().color)},hexa(t){if(void 0!==t)return new o(t);const r=this.rgb().round().color;let i=Math.round(255*this.valpha).toString(16).toUpperCase();return 1===i.length&&(i="0"+i),e.to.hex(r)+i},rgbNumber(){const e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity(){const e=this.rgb().color,t=[];for(const[r,i]of e.entries()){const e=i/255;t[r]=e<=.04045?e/12.92:((e+.055)/1.055)**2.4}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(2126*e[0]+7152*e[1]+722*e[2])/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return o.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const r=e.rgb(),i=this.rgb(),n=void 0===t?.5:t,a=2*n-1,s=r.alpha()-i.alpha(),u=((a*s===-1?a:(a+s)/(1+a*s))+1)/2,l=1-u;return o.rgb(u*r.red()+l*i.red(),u*r.green()+l*i.green(),u*r.blue()+l*i.blue(),r.alpha()*n+i.alpha()*(1-n))}};for(const c of Object.keys(t)){if(r.includes(c))continue;const{channels:e}=t[c];o.prototype[c]=function(...e){return this.model===c?new o(this):e.length>0?new o(e,c):new o([...(r=t[this.model][c].raw(this.color),Array.isArray(r)?r:[r]),this.valpha],c);var r},o[c]=function(...t){let r=t[0];return"number"==typeof r&&(r=l(t,e)),new o(r,c)}}function a(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}function s(e,t,r){e=Array.isArray(e)?e:[e];for(const i of e)(n[i]||(n[i]=[]))[t]=r;return e=e[0],function(i){let n;return void 0!==i?(r&&(i=r(i)),n=this[e](),n.color[t]=i,n):(n=this[e]().color[t],r&&(n=r(n)),n)}}function u(e){return function(t){return Math.max(0,Math.min(e,t))}}function l(e,t){for(let r=0;r<t;r++)"number"!=typeof e[r]&&(e[r]=0);return e}return color=o}var colorExports=requireColor();const Color=getDefaultExportFromCjs$2(colorExports);function getColorsList(e=3,t=50,r="black",i=0,n=20,o="#0346ff"){const a=[];let s;for(s=0;s<e;s+=1)a.push(Color(o).rotate((s+1)/e*-i).saturate((s+1)/e*(n/100)).mix(Color(r),t/100*(s+1)/e).hex());return a}function generateWhiteLabelTheme(e){const t=getColorsList(3,50,"black",0,20,e),r=getColorsList(6,85,"white",0,20,e);return[...t.reverse(),e,...r]}function applyWhiteLabelTheme(e,t){if(t.primary){const r=generateWhiteLabelTheme(t.primary);e.style.setProperty("--app-primary-900",r[0]),e.style.setProperty("--app-primary-800",r[1]),e.style.setProperty("--app-primary-700",r[2]),e.style.setProperty("--app-primary-600",r[3]),e.style.setProperty("--app-primary-500",r[4]),e.style.setProperty("--app-primary-400",r[5]),e.style.setProperty("--app-primary-300",r[6]),e.style.setProperty("--app-primary-200",r[7]),e.style.setProperty("--app-primary-100",r[8]),e.style.setProperty("--app-primary-50",r[9])}t.onPrimary&&e.style.setProperty("--app-on-primary",t.onPrimary)}class BaseController extends SafeEventEmitter$1{constructor({config:e={},state:t={}}){super(),_defineProperty(this,"defaultConfig",{}),_defineProperty(this,"defaultState",{}),_defineProperty(this,"disabled",!1),_defineProperty(this,"name","BaseController"),_defineProperty(this,"initialConfig",void 0),_defineProperty(this,"initialState",void 0),_defineProperty(this,"internalConfig",this.defaultConfig),_defineProperty(this,"internalState",this.defaultState),this.initialState=t,this.initialConfig=e}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const i in e)void 0!==this.internalConfig[i]&&(this.internalConfig[i]=e[i],this[i]=e[i])}update(e,t=!1){this.internalState=_objectSpread2(t?{}:_objectSpread2({},this.internalState),e),this.emit("store",this.internalState)}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}}const filterNoop=()=>!0,internalEvents=["newListener","removeListener"],externalEventFilter=e=>!internalEvents.includes(e);function getRawListeners(e,t){return void 0!==e.rawListeners?e.rawListeners(t):e.listeners(t)}function createEventEmitterProxy(e,t){let r={}.eventFilter||filterNoop;if("string"==typeof r&&"skipInternal"===r&&(r=externalEventFilter),"function"!=typeof r)throw new Error("createEventEmitterProxy - Invalid eventFilter");let i=e,n=e=>{if(i===e)return;const t=i;i=e;t.eventNames().filter(r).forEach(r=>{getRawListeners(t,r).forEach(t=>{e.on(r,t)})}),t.removeAllListeners()};return new Proxy({},{get:(e,t)=>"setTarget"===t?n:i[t],set:(e,t,r)=>"setTarget"===t?(n=r,!0):(i[t]=r,!0),has:(e,t)=>"_"!==t[0]&&t in i})}const RETRIABLE_ERRORS=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function checkForHttpErrors(e){switch(e.status){case 405:throw rpcErrors.methodNotFound();case 418:throw rpcErrors.internal({message:"Request is being rate limited.",data:{cause:e}});case 503:case 504:throw rpcErrors.internal({message:"Gateway timeout. The request took too long to process.This can happen when querying over too wide a block range.",data:{cause:e}})}}function timeout(e){return new Promise(t=>{setTimeout(t,e)})}function parseResponse(e,t){if(200!==e.status)throw rpcErrors.internal({message:`Non-200 status code: '${e.status}'`,data:t});var r;if(t.error)throw rpcErrors.internal({data:t.error,message:null===(r=t.error)||void 0===r?void 0:r.message});return t.result}function createFetchConfigFromReq({req:e,rpcTarget:t,originHttpHeaderKey:r}){const i=new URL(t),n={id:e.id,jsonrpc:e.jsonrpc,method:e.method,params:e.params},o=e.origin,a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)};return r&&o&&(a.headers[r]=o),{fetchUrl:i.href,fetchParams:a}}function createFetchMiddleware({rpcTarget:e,originHttpHeaderKey:t}){return createAsyncMiddleware(async(r,i,n)=>{const{fetchUrl:o,fetchParams:a}=createFetchConfigFromReq({req:r,rpcTarget:e,originHttpHeaderKey:t});for(let e=0;e<5;e++){try{const e=await fetch(o,a);checkForHttpErrors(e);const t=await e.json(),r=parseResponse(e,t);return void(i.result=r)}catch(err){const t=(err.message||err).toString();if(!RETRIABLE_ERRORS.some(e=>t.includes(e)))throw err}await timeout(1e3)}})}function cloneDeep(e){try{return structuredClone(e)}catch(t){return JSON.parse(JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t))}}class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";const MULTI_CHAIN_ADAPTERS$1={AUTH:"auth",WALLET_CONNECT_V2:"wallet-connect-v2",SFA:"sfa"},SOLANA_ADAPTERS$1=_objectSpread2({TORUS_SOLANA:"torus-solana"},MULTI_CHAIN_ADAPTERS$1),EVM_ADAPTERS$1=_objectSpread2({TORUS_EVM:"torus-evm",COINBASE:"coinbase"},MULTI_CHAIN_ADAPTERS$1),WALLET_ADAPTERS$1=_objectSpread2(_objectSpread2({},EVM_ADAPTERS$1),SOLANA_ADAPTERS$1),ADAPTER_NAMES={[MULTI_CHAIN_ADAPTERS$1.AUTH]:"Auth",[MULTI_CHAIN_ADAPTERS$1.WALLET_CONNECT_V2]:"Wallet Connect v2",[MULTI_CHAIN_ADAPTERS$1.SFA]:"SFA",[SOLANA_ADAPTERS$1.TORUS_SOLANA]:"Torus",[EVM_ADAPTERS$1.TORUS_EVM]:"Torus",[EVM_ADAPTERS$1.COINBASE]:"Coinbase Smart Wallet"},ADAPTER_CATEGORY$1={EXTERNAL:"external",IN_APP:"in_app"},ADAPTER_STATUS$1={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},ADAPTER_EVENTS$1=_objectSpread2(_objectSpread2({},ADAPTER_STATUS$1),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated",CACHE_CLEAR:"cache_clear"});let BaseAdapter$1=class extends SafeEventEmitter$1{constructor(e={}){super(),_defineProperty(this,"adapterData",{}),_defineProperty(this,"sessionTime",86400),_defineProperty(this,"clientId",void 0),_defineProperty(this,"web3AuthNetwork",WEB3AUTH_NETWORK.MAINNET),_defineProperty(this,"useCoreKitKey",void 0),_defineProperty(this,"rehydrated",!1),_defineProperty(this,"chainConfig",null),_defineProperty(this,"knownChainConfigs",{}),_defineProperty(this,"adapterNamespace",void 0),_defineProperty(this,"currentChainNamespace",void 0),_defineProperty(this,"type",void 0),_defineProperty(this,"name",void 0),_defineProperty(this,"status",void 0),this.setAdapterSettings(e)}get chainConfigProxy(){return this.chainConfig?_objectSpread2({},this.chainConfig):null}get connnected(){return this.status===ADAPTER_STATUS$1.CONNECTED}setAdapterSettings(e){if(this.status===ADAPTER_STATUS$1.READY)return;null!=e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!=e&&e.clientId&&(this.clientId=e.clientId),null!=e&&e.web3AuthNetwork&&(this.web3AuthNetwork=e.web3AuthNetwork),void 0!==(null==e?void 0:e.useCoreKitKey)&&(this.useCoreKitKey=e.useCoreKitKey);const t=e.chainConfig;if(t){if(!t.chainNamespace)throw WalletInitializationError$1.notReady("ChainNamespace is required while setting chainConfig");this.currentChainNamespace=t.chainNamespace;const e=_objectSpread2(_objectSpread2({},getChainConfig$1(t.chainNamespace,t.chainId,this.clientId)||{}),t);this.chainConfig=e,this.addChainConfig(e)}}checkConnectionRequirements(){if(this.name!==WALLET_ADAPTERS$1.WALLET_CONNECT_V2||this.status!==ADAPTER_STATUS$1.CONNECTING){if(this.status===ADAPTER_STATUS$1.CONNECTING)throw WalletInitializationError$1.notReady("Already connecting");if(this.status===ADAPTER_STATUS$1.CONNECTED)throw WalletLoginError$1.connectionError("Already connected");if(this.status!==ADAPTER_STATUS$1.READY)throw WalletLoginError$1.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function")}}checkInitializationRequirements(){if(!this.clientId)throw WalletInitializationError$1.invalidParams("Please initialize Web3Auth with a valid clientId in constructor");if(!this.chainConfig)throw WalletInitializationError$1.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.rpcTarget&&this.chainConfig.chainNamespace!==CHAIN_NAMESPACES$1.OTHER)throw WalletInitializationError$1.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.chainId&&this.chainConfig.chainNamespace!==CHAIN_NAMESPACES$1.OTHER)throw WalletInitializationError$1.invalidParams("chainID is required in chainConfig");if(this.status!==ADAPTER_STATUS$1.NOT_READY){if(this.status===ADAPTER_STATUS$1.CONNECTED)throw WalletInitializationError$1.notReady("Already connected");if(this.status===ADAPTER_STATUS$1.READY)throw WalletInitializationError$1.notReady("Adapter is already initialized")}}checkDisconnectionRequirements(){if(this.status!==ADAPTER_STATUS$1.CONNECTED)throw WalletLoginError$1.disconnectionError("Not connected with wallet")}checkAddChainRequirements(e,t=!1){if(!t&&!this.provider)throw WalletLoginError$1.notConnectedError("Not connected with wallet.");if(this.currentChainNamespace!==e.chainNamespace)throw WalletOperationsError$1.chainNamespaceNotAllowed("This adapter doesn't support this chainNamespace")}checkSwitchChainRequirements({chainId:e},t=!1){if(!t&&!this.provider)throw WalletLoginError$1.notConnectedError("Not connected with wallet.");if(!this.knownChainConfigs[e])throw WalletLoginError$1.chainConfigNotAdded("Invalid chainId")}updateAdapterData(e){this.adapterData=e,this.emit(ADAPTER_EVENTS$1.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}addChainConfig(e){const t=this.knownChainConfigs[e.chainId];this.knownChainConfigs[e.chainId]=_objectSpread2(_objectSpread2({},t||{}),e)}getChainConfig(e){return this.knownChainConfigs[e]||null}};function storageAvailable$1(e){let t,r=!1,i=0;try{t=window[e],r=!0,i=t.length;const n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(n){const e=n;return!(!e||22!==e.code&&1014!==e.code&&"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||!r||0===i)}}const signerHost=e=>SIGNER_MAP[null!=e?e:WEB3AUTH_NETWORK.SAPPHIRE_MAINNET],fetchProjectConfig=async(e,t,r)=>{const i=new URL(`${signerHost(t)}/api/configuration`);i.searchParams.append("project_id",e),i.searchParams.append("network",t),i.searchParams.append("whitelist","true"),r&&i.searchParams.append("aa_provider",r);return await get$2(i.href)},fetchWalletRegistry=async e=>await get$2(e),PLUGIN_NAMESPACES=_objectSpread2(_objectSpread2({},CHAIN_NAMESPACES$1),{},{MULTICHAIN:"multichain"}),PLUGIN_STATUS$1={READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"};_objectSpread2({},PLUGIN_STATUS$1);const EVM_PLUGINS$1={WALLET_SERVICES:"wallet-services",NFT_CHECKOUT:"nft-checkout"},SOLANA_PLUGINS$1={SOLANA:"solana"};_objectSpread2(_objectSpread2({},EVM_PLUGINS$1),SOLANA_PLUGINS$1);const index$2=Object.freeze(Object.defineProperty({__proto__:null,ADAPTER_CATEGORY:ADAPTER_CATEGORY$1,ADAPTER_EVENTS:ADAPTER_EVENTS$1,ADAPTER_NAMES:ADAPTER_NAMES,ADAPTER_NAMESPACES:ADAPTER_NAMESPACES$1,ADAPTER_STATUS:ADAPTER_STATUS$1,BaseAdapter:BaseAdapter$1,CHAIN_NAMESPACES:CHAIN_NAMESPACES$1,EVM_ADAPTERS:EVM_ADAPTERS$1,EVM_PLUGINS:EVM_PLUGINS$1,MULTI_CHAIN_ADAPTERS:MULTI_CHAIN_ADAPTERS$1,PLUGIN_NAMESPACES:PLUGIN_NAMESPACES,PLUGIN_STATUS:PLUGIN_STATUS$1,SOLANA_ADAPTERS:SOLANA_ADAPTERS$1,SOLANA_PLUGINS:SOLANA_PLUGINS$1,UX_MODE:UX_MODE$1,WALLET_ADAPTERS:WALLET_ADAPTERS$1,WEB3AUTH_NETWORK:WEB3AUTH_NETWORK,WalletInitializationError:WalletInitializationError$1,WalletLoginError:WalletLoginError$1,WalletOperationsError:WalletOperationsError$1,WalletProviderError:WalletProviderError$1,Web3AuthError:Web3AuthError$1,cloneDeep:cloneDeep,fetchProjectConfig:fetchProjectConfig,fetchWalletRegistry:fetchWalletRegistry,getChainConfig:getChainConfig$1,getEvmChainConfig:getEvmChainConfig$1,getSolanaChainConfig:getSolanaChainConfig$1,getXrplChainConfig:getXrplChainConfig$1,log:loglevel$3,serializeError:serializeError$2,signerHost:signerHost,storageAvailable:storageAvailable$1},Symbol.toStringTag,{value:"Module"}));CHAIN_NAMESPACES$1.SOLANA,SOLANA_ADAPTERS$1.TORUS_SOLANA,SOLANA_ADAPTERS$1.AUTH,CHAIN_NAMESPACES$1.EIP155,EVM_ADAPTERS$1.TORUS_EVM,EVM_ADAPTERS$1.AUTH,EVM_ADAPTERS$1.WALLET_CONNECT_V2,CHAIN_NAMESPACES$1.SOLANA,SOLANA_ADAPTERS$1.AUTH,CHAIN_NAMESPACES$1.EIP155,EVM_ADAPTERS$1.AUTH;const defaultOtherModalConfig={chainNamespace:CHAIN_NAMESPACES$1.OTHER,adapters:{[EVM_ADAPTERS$1.AUTH]:{label:"Auth",showOnModal:!0,showOnMobile:!0,showOnDesktop:!0}}},walletRegistryUrl="https://assets.web3auth.io/v1/wallet-registry.json",getAuthDefaultOptions=()=>({adapterSettings:{network:WEB3AUTH_NETWORK.SAPPHIRE_MAINNET,clientId:"",uxMode:UX_MODE$1.POPUP},loginSettings:{},privateKeyProvider:void 0});class AuthAdapter extends BaseAdapter$1{constructor(e={}){super(e),_defineProperty(this,"name",WALLET_ADAPTERS$1.AUTH),_defineProperty(this,"adapterNamespace",ADAPTER_NAMESPACES$1.MULTICHAIN),_defineProperty(this,"type",ADAPTER_CATEGORY$1.IN_APP),_defineProperty(this,"authInstance",null),_defineProperty(this,"status",ADAPTER_STATUS$1.NOT_READY),_defineProperty(this,"currentChainNamespace",CHAIN_NAMESPACES$1.EIP155),_defineProperty(this,"privateKeyProvider",null),_defineProperty(this,"authOptions",void 0),_defineProperty(this,"loginSettings",{loginProvider:""}),this.setAdapterSettings(_objectSpread2(_objectSpread2({},e.adapterSettings),{},{chainConfig:e.chainConfig,clientId:e.clientId||"",sessionTime:e.sessionTime,web3AuthNetwork:e.web3AuthNetwork,useCoreKitKey:e.useCoreKitKey,privateKeyProvider:e.privateKeyProvider})),this.loginSettings=e.loginSettings||{loginProvider:""},this.privateKeyProvider=e.privateKeyProvider||null}get chainConfigProxy(){return this.chainConfig?_objectSpread2({},this.chainConfig):null}get provider(){return this.status!==ADAPTER_STATUS$1.NOT_READY&&this.privateKeyProvider?this.privateKeyProvider:null}set provider(e){throw new Error("Not implemented")}async init(e){if(super.checkInitializationRequirements(),!this.clientId)throw WalletInitializationError$1.invalidParams("clientId is required before auth's initialization");if(!this.authOptions)throw WalletInitializationError$1.invalidParams("authOptions is required before auth's initialization");const t=this.authOptions.uxMode===UX_MODE$1.REDIRECT;if(this.authOptions=_objectSpread2(_objectSpread2({},this.authOptions),{},{replaceUrlOnRedirect:t,useCoreKitKey:this.useCoreKitKey}),this.authInstance=new Auth(_objectSpread2(_objectSpread2({},this.authOptions),{},{clientId:this.clientId,network:this.authOptions.network||this.web3AuthNetwork||WEB3AUTH_NETWORK.SAPPHIRE_MAINNET})),loglevel$3.debug("initializing auth adapter init"),await this.authInstance.init(),!this.chainConfig)throw WalletInitializationError$1.invalidParams("chainConfig is required before initialization");this.status=ADAPTER_STATUS$1.READY,this.emit(ADAPTER_EVENTS$1.READY,WALLET_ADAPTERS$1.AUTH);try{loglevel$3.debug("initializing auth adapter");this._getFinalPrivKey()&&(e.autoConnect||t)&&(this.rehydrated=!0,await this.connect())}catch(r){loglevel$3.error("Failed to connect with cached auth provider",r),this.emit(ADAPTER_EVENTS$1.ERRORED,r)}}async connect(e={loginProvider:""}){super.checkConnectionRequirements(),this.status=ADAPTER_STATUS$1.CONNECTING,this.emit(ADAPTER_EVENTS$1.CONNECTING,_objectSpread2(_objectSpread2({},e),{},{adapter:WALLET_ADAPTERS$1.AUTH}));try{return await this.connectWithProvider(e),this.provider}catch(t){if(loglevel$3.error("Failed to connect with auth provider",t),this.status=ADAPTER_STATUS$1.READY,this.emit(ADAPTER_EVENTS$1.ERRORED,t),null!=t&&t.message.includes("user closed popup"))throw WalletLoginError$1.popupClosed();if(t instanceof Web3AuthError$1)throw t;throw WalletLoginError$1.connectionError("Failed to login with auth",t)}}async enableMFA(e={loginProvider:""}){if(this.status!==ADAPTER_STATUS$1.CONNECTED)throw WalletLoginError$1.notConnectedError("Not connected with wallet");if(!this.authInstance)throw WalletInitializationError$1.notReady("authInstance is not ready");try{await this.authInstance.enableMFA(e)}catch(t){if(loglevel$3.error("Failed to enable MFA with auth provider",t),t instanceof Web3AuthError$1)throw t;throw WalletLoginError$1.connectionError("Failed to enable MFA with auth",t)}}async manageMFA(e={loginProvider:""}){if(this.status!==ADAPTER_STATUS$1.CONNECTED)throw WalletLoginError$1.notConnectedError("Not connected with wallet");if(!this.authInstance)throw WalletInitializationError$1.notReady("authInstance is not ready");try{await this.authInstance.manageMFA(e)}catch(t){if(loglevel$3.error("Failed to manage MFA with auth provider",t),t instanceof Web3AuthError$1)throw t;throw WalletLoginError$1.connectionError("Failed to manage MFA with auth",t)}}async disconnect(e={cleanup:!1}){if(this.status!==ADAPTER_STATUS$1.CONNECTED)throw WalletLoginError$1.notConnectedError("Not connected with wallet");if(!this.authInstance)throw WalletInitializationError$1.notReady("authInstance is not ready");await this.authInstance.logout(),e.cleanup?(this.status=ADAPTER_STATUS$1.NOT_READY,this.authInstance=null,this.privateKeyProvider=null):this.status=ADAPTER_STATUS$1.READY,this.rehydrated=!1,this.emit(ADAPTER_EVENTS$1.DISCONNECTED)}async authenticateUser(){if(this.status!==ADAPTER_STATUS$1.CONNECTED)throw WalletLoginError$1.notConnectedError("Not connected with wallet, Please login/connect first");return{idToken:(await this.getUserInfo()).idToken}}async getUserInfo(){if(this.status!==ADAPTER_STATUS$1.CONNECTED)throw WalletLoginError$1.notConnectedError("Not connected with wallet");if(!this.authInstance)throw WalletInitializationError$1.notReady("authInstance is not ready");return this.authInstance.getUserInfo()}setAdapterSettings(e){super.setAdapterSettings(e);const t=getAuthDefaultOptions();loglevel$3.info("setting adapter settings",e),this.authOptions=deepmerge.all([t.adapterSettings,this.authOptions||{},e||{}]),e.web3AuthNetwork&&(this.authOptions.network=e.web3AuthNetwork),e.privateKeyProvider&&(this.privateKeyProvider=e.privateKeyProvider)}async addChain(e,t=!1){var r;super.checkAddChainRequirements(e,t),null===(r=this.privateKeyProvider)||void 0===r||r.addChain(e),this.addChainConfig(e)}async switchChain(e,t=!1){var r;super.checkSwitchChainRequirements(e,t),await(null===(r=this.privateKeyProvider)||void 0===r?void 0:r.switchChain(e)),this.setAdapterSettings({chainConfig:this.getChainConfig(e.chainId)})}_getFinalPrivKey(){if(!this.authInstance)return"";let e=this.authInstance.privKey;if(this.useCoreKitKey){if(this.authInstance.privKey&&!this.authInstance.coreKitKey)throw WalletLoginError$1.coreKitKeyNotFound();e=this.authInstance.coreKitKey}return e}_getFinalEd25519PrivKey(){if(!this.authInstance)return"";let e=this.authInstance.ed25519PrivKey;if(this.useCoreKitKey){if(this.authInstance.ed25519PrivKey&&!this.authInstance.coreKitEd25519Key)throw WalletLoginError$1.coreKitKeyNotFound();e=this.authInstance.coreKitEd25519Key}return e}async connectWithProvider(e={loginProvider:""}){var t;if(!this.privateKeyProvider)throw WalletInitializationError$1.invalidParams("PrivateKey Provider is required before initialization");if(!this.authInstance)throw WalletInitializationError$1.notReady("authInstance is not ready");if(!this._getFinalPrivKey()||null!==(t=e.extraLoginOptions)&&void 0!==t&&t.id_token){var r;if(this.loginSettings.curve=SUPPORTED_KEY_CURVES$1.OTHER,!e.loginProvider&&!this.loginSettings.loginProvider)throw WalletInitializationError$1.invalidParams("loginProvider is required for login");await this.authInstance.login(deepmerge.all([this.loginSettings,e,{extraLoginOptions:_objectSpread2(_objectSpread2({},e.extraLoginOptions||{}),{},{login_hint:e.login_hint||(null===(r=e.extraLoginOptions)||void 0===r?void 0:r.login_hint)})}]))}let i=this._getFinalPrivKey();i&&(this.currentChainNamespace===CHAIN_NAMESPACES$1.SOLANA&&(i=this._getFinalEd25519PrivKey()),await this.privateKeyProvider.setupProvider(i),this.status=ADAPTER_STATUS$1.CONNECTED,this.emit(ADAPTER_EVENTS$1.CONNECTED,{adapter:WALLET_ADAPTERS$1.AUTH,reconnected:this.rehydrated,provider:this.provider}))}}class BaseProvider extends BaseController{constructor({config:e,state:t}){if(super({config:e,state:t}),_defineProperty(this,"_providerEngineProxy",null),_defineProperty(this,"keyExportFlagSetByCode",!1),!e.chainConfig)throw WalletInitializationError$1.invalidProviderConfigError("Please provide chainConfig");if(!e.chainConfig.chainId)throw WalletInitializationError$1.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!e.chainConfig.rpcTarget)throw WalletInitializationError$1.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");"boolean"==typeof e.keyExportEnabled&&(this.keyExportFlagSetByCode=!0),this.defaultState={chainId:"loading"},this.defaultConfig={chainConfig:e.chainConfig,networks:{[e.chainConfig.chainId]:e.chainConfig},keyExportEnabled:"boolean"!=typeof e.keyExportEnabled||e.keyExportEnabled},super.initialize()}get currentChainConfig(){return this.config.chainConfig}get provider(){return this._providerEngineProxy}get chainId(){return this.state.chainId}set provider(e){throw new Error("Method not implemented.")}async request(e){var t;if(!e||"object"!=typeof e||Array.isArray(e))throw rpcErrors.invalidRequest({message:WalletProviderError$1.invalidRequestArgs().message,data:_objectSpread2(_objectSpread2({},e||{}),{},{cause:WalletProviderError$1.invalidRequestArgs().message})});const{method:r,params:i}=e;if("string"!=typeof r||0===r.length)throw rpcErrors.invalidRequest({message:WalletProviderError$1.invalidRequestMethod().message,data:_objectSpread2(_objectSpread2({},e||{}),{},{cause:WalletProviderError$1.invalidRequestMethod().message})});if(void 0!==i&&!Array.isArray(i)&&("object"!=typeof i||null===i))throw rpcErrors.invalidRequest({message:WalletProviderError$1.invalidRequestParams().message,data:_objectSpread2(_objectSpread2({},e||{}),{},{cause:WalletProviderError$1.invalidRequestParams().message})});return null===(t=this.provider)||void 0===t?void 0:t.request(e)}sendAsync(e,t){return t?this.send(e,t):this.request(e)}send(e,t){this.request(e).then(e=>t(null,{result:e})).catch(e=>t(e,null))}addChain(e){if(!e.chainId)throw rpcErrors.invalidParams("chainId is required");if(!e.rpcTarget)throw rpcErrors.invalidParams("chainId is required");this.configure({networks:_objectSpread2(_objectSpread2({},this.config.networks),{},{[e.chainId]:e})})}getChainConfig(e){var t;const r=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!r)throw rpcErrors.invalidRequest(`Chain ${e} is not supported, please add chainConfig for it`);return r}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=createEventEmitterProxy(e)}setKeyExportFlag(e){this.keyExportFlagSetByCode||this.configure({keyExportEnabled:e})}getProviderEngineProxy(){return this._providerEngineProxy}}function createChainIdMiddleware$1(e){return(t,r,i,n)=>"chainId"===t.method?(r.result=e,n()):i()}function createProviderConfigMiddleware$1(e){return(t,r,i,n)=>"provider_config"===t.method?(r.result=e,n()):i()}function createJsonRpcClient$1(e){const{chainId:t,rpcTarget:r}=e,i=createFetchMiddleware({rpcTarget:r});return{networkMiddleware:mergeMiddleware([createChainIdMiddleware$1(t),createProviderConfigMiddleware$1(e),i]),fetchMiddleware:i}}var _CommonJRPCProvider;class CommonJRPCProvider extends BaseProvider{constructor({config:e,state:t}){super({config:e,state:t})}async setupProvider(){const{networkMiddleware:e}=createJsonRpcClient$1(this.config.chainConfig),t=new JRPCEngine;t.push(e);const r=providerFromEngine(t);this.updateProviderEngineProxy(r);const i=this.config.chainConfig.chainId;this.state.chainId!==i&&(this.emit("chainChanged",i),this.emit("connect",{chainId:i})),this.update({chainId:this.config.chainConfig.chainId})}async switchChain(e){if(!this._providerEngineProxy)throw providerErrors.custom({message:"Provider is not initialized",code:4902});const t=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:t}),await this.setupProvider()}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=createEventEmitterProxy(e)}getProviderEngineProxy(){return this._providerEngineProxy}lookupNetwork(){throw new Error("Method not implemented.")}}_CommonJRPCProvider=CommonJRPCProvider,_defineProperty(CommonJRPCProvider,"getProviderInstance",async e=>{const t=new _CommonJRPCProvider({config:{chainConfig:e.chainConfig}});return await t.setupProvider(),t});const ADAPTER_CACHE_KEY="Web3Auth-cachedAdapter";class Web3AuthNoModal extends SafeEventEmitter$1{constructor(e){var t,r,i,n;if(super(),_defineProperty(this,"coreOptions",void 0),_defineProperty(this,"connectedAdapterName",null),_defineProperty(this,"status",ADAPTER_STATUS$1.NOT_READY),_defineProperty(this,"cachedAdapter",null),_defineProperty(this,"walletAdapters",{}),_defineProperty(this,"commonJRPCProvider",null),_defineProperty(this,"plugins",{}),_defineProperty(this,"storage","localStorage"),!e.clientId)throw WalletInitializationError$1.invalidParams("Please provide a valid clientId in constructor");if(e.enableLogging?loglevel$3.enableAll():loglevel$3.setLevel("error"),!e.privateKeyProvider&&!e.chainConfig)throw WalletInitializationError$1.invalidParams("Please provide chainConfig or privateKeyProvider");if(e.chainConfig=e.chainConfig||e.privateKeyProvider.currentChainConfig,null===(t=e.chainConfig)||void 0===t||!t.chainNamespace||!Object.values(CHAIN_NAMESPACES$1).includes(null===(r=e.chainConfig)||void 0===r?void 0:r.chainNamespace))throw WalletInitializationError$1.invalidParams("Please provide a valid chainNamespace in chainConfig");"session"===e.storageKey&&(this.storage="sessionStorage"),this.cachedAdapter=storageAvailable$1(this.storage)?window[this.storage].getItem(ADAPTER_CACHE_KEY):null,this.coreOptions=_objectSpread2(_objectSpread2({},e),{},{chainConfig:_objectSpread2(_objectSpread2({},getChainConfig$1(null===(i=e.chainConfig)||void 0===i?void 0:i.chainNamespace,null===(n=e.chainConfig)||void 0===n?void 0:n.chainId,e.clientId)||{}),e.chainConfig)}),this.subscribeToAdapterEvents=this.subscribeToAdapterEvents.bind(this)}get connected(){return Boolean(this.connectedAdapterName)}get provider(){return this.status!==ADAPTER_STATUS$1.NOT_READY&&this.commonJRPCProvider?this.commonJRPCProvider:null}set provider(e){throw new Error("Not implemented")}async init(){let e;this.commonJRPCProvider=await CommonJRPCProvider.getProviderInstance({chainConfig:this.coreOptions.chainConfig});try{var t;e=await fetchProjectConfig(this.coreOptions.clientId,this.coreOptions.web3AuthNetwork,null===(t=this.coreOptions.accountAbstractionProvider)||void 0===t?void 0:t.config.smartAccountInit.name)}catch(i){throw loglevel$3.error("Failed to fetch project configurations",i),WalletInitializationError$1.notReady("failed to fetch project configurations",i)}const r=Object.keys(this.walletAdapters).map(async t=>{if(this.subscribeToAdapterEvents(this.walletAdapters[t]),this.walletAdapters[t].chainConfigProxy)this.walletAdapters[t].setAdapterSettings({sessionTime:this.coreOptions.sessionTime,clientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork,useCoreKitKey:this.coreOptions.useCoreKitKey});else{const e=this.coreOptions.chainConfig;if(!e.chainNamespace)throw WalletInitializationError$1.invalidParams("Please provide chainNamespace in chainConfig");this.walletAdapters[t].setAdapterSettings({chainConfig:e,sessionTime:this.coreOptions.sessionTime,clientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork,useCoreKitKey:this.coreOptions.useCoreKitKey})}if(t===WALLET_ADAPTERS$1.AUTH){const r=this.walletAdapters[t],{whitelabel:i}=e;this.coreOptions.uiConfig=deepmerge(cloneDeep(i||{}),this.coreOptions.uiConfig||{}),this.coreOptions.uiConfig.mode||(this.coreOptions.uiConfig.mode="light");const{sms_otp_enabled:n,whitelist:o,key_export_enabled:a}=e;if(void 0!==n&&r.setAdapterSettings({loginConfig:{[LOGIN_PROVIDER$1.SMS_PASSWORDLESS]:{showOnModal:n,showOnDesktop:n,showOnMobile:n,showOnSocialBackupFactor:n}}}),o&&r.setAdapterSettings({originData:o.signed_urls}),"boolean"==typeof a&&(this.coreOptions.privateKeyProvider.setKeyExportFlag(a),this.commonJRPCProvider.setKeyExportFlag(a)),this.coreOptions.privateKeyProvider){if(r.currentChainNamespace!==this.coreOptions.privateKeyProvider.currentChainConfig.chainNamespace)throw WalletInitializationError$1.incompatibleChainNameSpace("private key provider is not compatible with provided chainNamespace for auth adapter");r.setAdapterSettings({privateKeyProvider:this.coreOptions.privateKeyProvider})}if(r.setAdapterSettings({whiteLabel:this.coreOptions.uiConfig}),!r.privateKeyProvider)throw WalletInitializationError$1.invalidParams("privateKeyProvider is required for auth adapter")}else if(t===WALLET_ADAPTERS$1.WALLET_CONNECT_V2){const r=this.walletAdapters[t],{wallet_connect_enabled:i,wallet_connect_project_id:n}=e;if(!1===i)throw WalletInitializationError$1.invalidParams("Please enable wallet connect v2 addon on dashboard");if(!n)throw WalletInitializationError$1.invalidParams("Invalid wallet connect project id. Please configure it on the dashboard");r.setAdapterSettings({adapterSettings:{walletConnectInitOptions:{projectId:n}}})}return this.walletAdapters[t].init({autoConnect:this.cachedAdapter===t}).catch(e=>loglevel$3.error(e,t))});await Promise.all(r),this.status===ADAPTER_STATUS$1.NOT_READY&&(this.status=ADAPTER_STATUS$1.READY,this.emit(ADAPTER_EVENTS$1.READY))}getAdapter(e){return this.walletAdapters[e]||null}configureAdapter(e){this.checkInitRequirements();const t=this.coreOptions.chainConfig;if(!t.chainNamespace)throw WalletInitializationError$1.invalidParams("Please provide chainNamespace in chainConfig");if(this.walletAdapters[e.name])throw WalletInitializationError$1.duplicateAdapterError(`Wallet adapter for ${e.name} already exists`);if(e.adapterNamespace!==ADAPTER_NAMESPACES$1.MULTICHAIN&&e.adapterNamespace!==t.chainNamespace)throw WalletInitializationError$1.incompatibleChainNameSpace(`This wallet adapter belongs to ${e.adapterNamespace} which is incompatible with currently used namespace: ${t.chainNamespace}`);return e.adapterNamespace===ADAPTER_NAMESPACES$1.MULTICHAIN&&e.currentChainNamespace&&t.chainNamespace!==e.currentChainNamespace&&e.setAdapterSettings({chainConfig:t}),this.walletAdapters[e.name]=e,this}clearCache(){storageAvailable$1(this.storage)&&(window[this.storage].removeItem(ADAPTER_CACHE_KEY),this.cachedAdapter=null)}async addChain(e){if(this.status===ADAPTER_STATUS$1.CONNECTED&&this.connectedAdapterName)return this.walletAdapters[this.connectedAdapterName].addChain(e);if(this.commonJRPCProvider)return this.commonJRPCProvider.addChain(e);throw WalletInitializationError$1.notReady("No wallet is ready")}async switchChain(e){if(this.status===ADAPTER_STATUS$1.CONNECTED&&this.connectedAdapterName)return this.walletAdapters[this.connectedAdapterName].switchChain(e);if(this.commonJRPCProvider)return this.commonJRPCProvider.switchChain(e);throw WalletInitializationError$1.notReady("No wallet is ready")}async connectTo(e,t){if(!this.walletAdapters[e]||!this.commonJRPCProvider)throw WalletInitializationError$1.notFound(`Please add wallet adapter for ${e} wallet, before connecting`);return new Promise((r,i)=>{this.once(ADAPTER_EVENTS$1.CONNECTED,e=>{r(this.provider)}),this.once(ADAPTER_EVENTS$1.ERRORED,e=>{i(e)}),this.walletAdapters[e].connect(t)})}async logout(e={cleanup:!1}){if(this.status!==ADAPTER_STATUS$1.CONNECTED||!this.connectedAdapterName)throw WalletLoginError$1.notConnectedError("No wallet is connected");await this.walletAdapters[this.connectedAdapterName].disconnect(e)}async getUserInfo(){if(loglevel$3.debug("Getting user info",this.status,this.connectedAdapterName),this.status!==ADAPTER_STATUS$1.CONNECTED||!this.connectedAdapterName)throw WalletLoginError$1.notConnectedError("No wallet is connected");return this.walletAdapters[this.connectedAdapterName].getUserInfo()}async enableMFA(e){if(this.status!==ADAPTER_STATUS$1.CONNECTED||!this.connectedAdapterName)throw WalletLoginError$1.notConnectedError("No wallet is connected");if(this.connectedAdapterName!==WALLET_ADAPTERS$1.AUTH)throw WalletLoginError$1.unsupportedOperation("EnableMFA is not supported for this adapter.");return this.walletAdapters[this.connectedAdapterName].enableMFA(e)}async manageMFA(e){if(this.status!==ADAPTER_STATUS$1.CONNECTED||!this.connectedAdapterName)throw WalletLoginError$1.notConnectedError("No wallet is connected");if(this.connectedAdapterName!==WALLET_ADAPTERS$1.AUTH)throw WalletLoginError$1.unsupportedOperation("ManageMFA is not supported for this adapter.");return this.walletAdapters[this.connectedAdapterName].manageMFA(e)}async authenticateUser(){if(this.status!==ADAPTER_STATUS$1.CONNECTED||!this.connectedAdapterName)throw WalletLoginError$1.notConnectedError("No wallet is connected");return this.walletAdapters[this.connectedAdapterName].authenticateUser()}addPlugin(e){if(this.plugins[e.name])throw WalletInitializationError$1.duplicateAdapterError(`Plugin ${e.name} already exist`);if(e.pluginNamespace!==PLUGIN_NAMESPACES.MULTICHAIN&&e.pluginNamespace!==this.coreOptions.chainConfig.chainNamespace)throw WalletInitializationError$1.incompatibleChainNameSpace(`This plugin belongs to ${e.pluginNamespace} namespace which is incompatible with currently used namespace: ${this.coreOptions.chainConfig.chainNamespace}`);return this.plugins[e.name]=e,this.status===ADAPTER_STATUS$1.CONNECTED&&this.connectedAdapterName&&this.connectToPlugins({adapter:this.connectedAdapterName}),this}getPlugin(e){return this.plugins[e]||null}subscribeToAdapterEvents(e){e.on(ADAPTER_EVENTS$1.CONNECTED,async e=>{if(!this.commonJRPCProvider)throw WalletInitializationError$1.notFound("CommonJrpcProvider not found");const{provider:t}=e;let r=t.provider||t;this.coreOptions.accountAbstractionProvider&&(e.adapter===WALLET_ADAPTERS$1.AUTH||e.adapter!==WALLET_ADAPTERS$1.AUTH&&this.coreOptions.useAAWithExternalWallet)&&(await this.coreOptions.accountAbstractionProvider.setupProvider(t),r=this.coreOptions.accountAbstractionProvider),this.commonJRPCProvider.updateProviderEngineProxy(r),this.connectedAdapterName=e.adapter,this.status=ADAPTER_STATUS$1.CONNECTED,this.cacheWallet(e.adapter),loglevel$3.debug("connected",this.status,this.connectedAdapterName),this.connectToPlugins(e),this.emit(ADAPTER_EVENTS$1.CONNECTED,_objectSpread2({},e))}),e.on(ADAPTER_EVENTS$1.DISCONNECTED,async()=>{if(this.status=ADAPTER_STATUS$1.READY,storageAvailable$1(this.storage)){const e=window[this.storage].getItem(ADAPTER_CACHE_KEY);this.connectedAdapterName===e&&this.clearCache()}loglevel$3.debug("disconnected",this.status,this.connectedAdapterName),await Promise.all(Object.values(this.plugins).map(e=>e.disconnect().catch(e=>{5211!==e.code&&loglevel$3.error(e)}))),this.connectedAdapterName=null,this.emit(ADAPTER_EVENTS$1.DISCONNECTED)}),e.on(ADAPTER_EVENTS$1.CONNECTING,e=>{this.status=ADAPTER_STATUS$1.CONNECTING,this.emit(ADAPTER_EVENTS$1.CONNECTING,e),loglevel$3.debug("connecting",this.status,this.connectedAdapterName)}),e.on(ADAPTER_EVENTS$1.ERRORED,e=>{this.status=ADAPTER_STATUS$1.ERRORED,this.clearCache(),this.emit(ADAPTER_EVENTS$1.ERRORED,e),loglevel$3.debug("errored",this.status,this.connectedAdapterName)}),e.on(ADAPTER_EVENTS$1.ADAPTER_DATA_UPDATED,e=>{loglevel$3.debug("adapter data updated",e),this.emit(ADAPTER_EVENTS$1.ADAPTER_DATA_UPDATED,e)}),e.on(ADAPTER_EVENTS$1.CACHE_CLEAR,e=>{loglevel$3.debug("adapter cache clear",e),storageAvailable$1(this.storage)&&this.clearCache()})}checkInitRequirements(){if(this.status===ADAPTER_STATUS$1.CONNECTING)throw WalletInitializationError$1.notReady("Already pending connection");if(this.status===ADAPTER_STATUS$1.CONNECTED)throw WalletInitializationError$1.notReady("Already connected");if(this.status===ADAPTER_STATUS$1.READY)throw WalletInitializationError$1.notReady("Adapter is already initialized")}cacheWallet(e){storageAvailable$1(this.storage)&&(window[this.storage].setItem(ADAPTER_CACHE_KEY,e),this.cachedAdapter=e)}connectToPlugins(e){Object.values(this.plugins).map(async t=>{try{if(!t.SUPPORTED_ADAPTERS.includes("all")&&!t.SUPPORTED_ADAPTERS.includes(e.adapter))return;if(t.status===PLUGIN_STATUS$1.CONNECTED)return;const{authInstance:r}=this.walletAdapters[this.connectedAdapterName],{options:i,sessionId:n,sessionNamespace:o}=r||{};await t.initWithWeb3Auth(this,null==i?void 0:i.whiteLabel),await t.connect({sessionId:n,sessionNamespace:o})}catch(r){if(5211===r.code)return;loglevel$3.error(r)}})}}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}const restrictedLoginMethods=new Set([LOGIN_PROVIDER$1.AUTHENTICATOR,LOGIN_PROVIDER$1.PASSKEYS,LOGIN_PROVIDER$1.JWT,LOGIN_PROVIDER$1.WEBAUTHN]),AUTH_PROVIDERS=Object.values(LOGIN_PROVIDER$1).filter(e=>!restrictedLoginMethods.has(e)),AUTH_PROVIDERS_NAMES=AUTH_PROVIDERS.reduce((e,t)=>(e[t]="email_passwordless"===t?"Email":"sms_passwordless"===t?"Mobile":capitalizeFirstLetter(t),e),{}),LOGIN_MODAL_EVENTS={INIT_EXTERNAL_WALLETS:"INIT_EXTERNAL_WALLETS",LOGIN:"LOGIN",DISCONNECT:"DISCONNECT",MODAL_VISIBILITY:"MODAL_VISIBILITY"},MODAL_STATUS={INITIALIZED:"initialized",CONNECTED:"connected",CONNECTING:"connecting",ERRORED:"errored"},DEFAULT_LOGO_LIGHT="https://images.web3auth.io/web3auth-logo-w.svg",DEFAULT_LOGO_DARK="https://images.web3auth.io/web3auth-logo-w-light.svg",WALLET_CONNECT_LOGO="https://images.web3auth.io/login-wallet-connect.svg";function styleInject(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var css_248z$1='@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap");.w3a-parent-container *,.w3a-parent-container :after,.w3a-parent-container :before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.w3a-parent-container ::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }\n/*! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com*/.w3a-parent-container *,.w3a-parent-container :after,.w3a-parent-container :before{border:0 solid;box-sizing:border-box}.w3a-parent-container :after,.w3a-parent-container :before{--tw-content:""}.w3a-parent-container :host,.w3a-parent-container html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}.w3a-parent-container body{line-height:inherit;margin:0}.w3a-parent-container hr{border-top-width:1px;color:inherit;height:0}.w3a-parent-container abbr:where([title]){text-decoration:underline dotted}.w3a-parent-container h1,.w3a-parent-container h2,.w3a-parent-container h3,.w3a-parent-container h4,.w3a-parent-container h5,.w3a-parent-container h6{font-size:inherit;font-weight:inherit}.w3a-parent-container a{color:inherit;text-decoration:inherit}.w3a-parent-container b,.w3a-parent-container strong{font-weight:bolder}.w3a-parent-container code,.w3a-parent-container kbd,.w3a-parent-container pre,.w3a-parent-container samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}.w3a-parent-container small{font-size:80%}.w3a-parent-container sub,.w3a-parent-container sup{font-size:75%;line-height:0;position:relative;vertical-align:initial}.w3a-parent-container sub{bottom:-.25em}.w3a-parent-container sup{top:-.5em}.w3a-parent-container table{border-collapse:collapse;border-color:inherit;text-indent:0}.w3a-parent-container button,.w3a-parent-container input,.w3a-parent-container optgroup,.w3a-parent-container select,.w3a-parent-container textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}.w3a-parent-container button,.w3a-parent-container select{text-transform:none}.w3a-parent-container button,.w3a-parent-container input:where([type=button]),.w3a-parent-container input:where([type=reset]),.w3a-parent-container input:where([type=submit]){-webkit-appearance:button;background-color:initial;background-image:none}.w3a-parent-container :-moz-focusring{outline:auto}.w3a-parent-container :-moz-ui-invalid{box-shadow:none}.w3a-parent-container progress{vertical-align:initial}.w3a-parent-container ::-webkit-inner-spin-button,.w3a-parent-container ::-webkit-outer-spin-button{height:auto}.w3a-parent-container [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.w3a-parent-container ::-webkit-search-decoration{-webkit-appearance:none}.w3a-parent-container ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.w3a-parent-container summary{display:list-item}.w3a-parent-container blockquote,.w3a-parent-container dd,.w3a-parent-container dl,.w3a-parent-container figure,.w3a-parent-container h1,.w3a-parent-container h2,.w3a-parent-container h3,.w3a-parent-container h4,.w3a-parent-container h5,.w3a-parent-container h6,.w3a-parent-container hr,.w3a-parent-container p,.w3a-parent-container pre{margin:0}.w3a-parent-container fieldset{margin:0;padding:0}.w3a-parent-container legend{padding:0}.w3a-parent-container menu,.w3a-parent-container ol,.w3a-parent-container ul{list-style:none;margin:0;padding:0}.w3a-parent-container dialog{padding:0}.w3a-parent-container textarea{resize:vertical}.w3a-parent-container input::placeholder,.w3a-parent-container textarea::placeholder{color:#9ca3af;opacity:1}.w3a-parent-container [role=button],.w3a-parent-container button{cursor:pointer}.w3a-parent-container :disabled{cursor:default}.w3a-parent-container audio,.w3a-parent-container canvas,.w3a-parent-container embed,.w3a-parent-container iframe,.w3a-parent-container img,.w3a-parent-container object,.w3a-parent-container svg,.w3a-parent-container video{display:block;vertical-align:middle}.w3a-parent-container img,.w3a-parent-container video{height:auto;max-width:100%}.w3a-parent-container [hidden]:where(:not([hidden=until-found])){display:none}.w3a-parent-container{--app-on-primary:#fff;--app-primary-50:#ebf5ff;--app-primary-100:#e1effe;--app-primary-200:#c3ddfd;--app-primary-300:#a4cafe;--app-primary-400:#76a9fa;--app-primary-500:#3f83f8;--app-primary-600:#0346ff;--app-primary-700:#1a56db;--app-primary-800:#1e429f;--app-primary-900:#233876;--app-gray-50:#f9fafb;--app-gray-100:#f3f4f6;--app-gray-200:#e5e7eb;--app-gray-300:#d1d5db;--app-gray-400:#9ca3af;--app-gray-500:#6b7280;--app-gray-600:#4b5563;--app-gray-700:#374151;--app-gray-800:#1f2a37;--app-gray-900:#111928;--app-blue-50:#ebf5ff;--app-blue-100:#e1effe;--app-blue-200:#c3ddfd;--app-blue-300:#a4cafe;--app-blue-400:#76a9fa;--app-blue-500:#3f83f8;--app-blue-600:#0346ff;--app-blue-700:#1a56db;--app-blue-800:#1e429f;--app-blue-900:#233876;--app-red-50:#fdf2f2;--app-red-100:#fde8e8;--app-red-200:#fbd5d5;--app-red-300:#f8b4b4;--app-red-400:#f98080;--app-red-500:#f05252;--app-red-600:#e02424;--app-red-700:#c81e1e;--app-red-800:#9b1c1c;--app-red-900:#771d1d;--app-green-50:#f3faf7;--app-green-100:#def7ec;--app-green-200:#bcf0da;--app-green-300:#84e1bc;--app-green-400:#31c48d;--app-green-500:#0e9f6e;--app-green-600:#057a55;--app-green-700:#046c4e;--app-green-800:#03543f;--app-green-900:#014737;--app-yellow-50:#fdfdea;--app-yellow-100:#fdf6b2;--app-yellow-200:#fce96a;--app-yellow-300:#faca15;--app-yellow-400:#e3a008;--app-yellow-500:#c27803;--app-yellow-600:#9f580a;--app-yellow-700:#8e4b10;--app-yellow-800:#723b13;--app-yellow-900:#633112;--app-success:#30cca4;--app-warning:#fbc94a;--app-error:#fb4a61;--app-info:#d4d4d4;--app-white:#fff;--app-black:#000}.w3a-parent-container .w3a--absolute{position:absolute}.w3a-parent-container .w3a--relative{position:relative}.w3a-parent-container .w3a--left-20{left:5rem}.w3a-parent-container .w3a--left-8{left:2rem}.w3a-parent-container .w3a--left-\\[calc\\(50\\%_-_8px\\)\\]{left:calc(50% - 8px)}.w3a-parent-container .w3a--top-4{top:1rem}.w3a-parent-container .w3a--top-\\[100\\%\\]{top:100%}.w3a-parent-container .w3a--z-20{z-index:20}.w3a-parent-container .w3a--col-span-2{grid-column:span 2/span 2}.w3a-parent-container .w3a--col-span-3{grid-column:span 3/span 3}.w3a-parent-container .w3a--col-span-6{grid-column:span 6/span 6}.w3a-parent-container .w3a--mx-auto{margin-left:auto;margin-right:auto}.w3a-parent-container .w3a--my-4{margin-bottom:1rem;margin-top:1rem}.w3a-parent-container .w3a--my-6{margin-bottom:1.5rem;margin-top:1.5rem}.w3a-parent-container .-w3a--mb-2{margin-bottom:-.5rem}.w3a-parent-container .-w3a--ml-\\[100px\\]{margin-left:-100px}.w3a-parent-container .w3a--mb-1{margin-bottom:.25rem}.w3a-parent-container .w3a--mb-2{margin-bottom:.5rem}.w3a-parent-container .w3a--mb-4{margin-bottom:1rem}.w3a-parent-container .w3a--mb-5{margin-bottom:1.25rem}.w3a-parent-container .w3a--ml-2{margin-left:.5rem}.w3a-parent-container .w3a--ml-\\[3px\\]{margin-left:3px}.w3a-parent-container .w3a--ml-auto{margin-left:auto}.w3a-parent-container .w3a--mr-6{margin-right:1.5rem}.w3a-parent-container .w3a--mr-auto{margin-right:auto}.w3a-parent-container .w3a--mt-4{margin-top:1rem}.w3a-parent-container .w3a--block{display:block}.w3a-parent-container .w3a--flex{display:flex}.w3a-parent-container .w3a--inline-flex{display:inline-flex}.w3a-parent-container .w3a--hidden{display:none}.w3a-parent-container .w3a--h-10{height:2.5rem}.w3a-parent-container .w3a--h-3{height:.75rem}.w3a-parent-container .w3a--h-4{height:1rem}.w3a-parent-container .w3a--h-auto{height:auto}.w3a-parent-container .w3a--h-full{height:100%}.w3a-parent-container .w3a--w-10{width:2.5rem}.w3a-parent-container .w3a--w-3{width:.75rem}.w3a-parent-container .w3a--w-\\[270px\\]{width:270px}.w3a-parent-container .w3a--w-\\[300px\\]{width:300px}.w3a-parent-container .w3a--w-auto{width:auto}.w3a-parent-container .w3a--w-full{width:100%}.w3a-parent-container .w3a--flex-shrink{flex-shrink:1}.w3a-parent-container .w3a--flex-shrink-0{flex-shrink:0}.w3a-parent-container .w3a--flex-grow-0{flex-grow:0}.w3a-parent-container .w3a--translate-x-\\[-16px\\]{--tw-translate-x:-16px}.w3a-parent-container .w3a--rotate-45,.w3a-parent-container .w3a--translate-x-\\[-16px\\]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .w3a--rotate-45{--tw-rotate:45deg}.w3a-parent-container .w3a--cursor-pointer{cursor:pointer}.w3a-parent-container .w3a--flex-row{flex-direction:row}.w3a-parent-container .w3a--flex-col{flex-direction:column}.w3a-parent-container .w3a--items-center{align-items:center}.w3a-parent-container .\\!w3a--justify-start{justify-content:flex-start!important}.w3a-parent-container .w3a--justify-start{justify-content:flex-start}.w3a-parent-container .w3a--justify-end{justify-content:flex-end}.w3a-parent-container .w3a--justify-center{justify-content:center}.w3a-parent-container .\\!w3a--justify-between{justify-content:space-between!important}.w3a-parent-container .w3a--justify-between{justify-content:space-between}.w3a-parent-container .w3a--gap-1{gap:.25rem}.w3a-parent-container .w3a--gap-2{gap:.5rem}.w3a-parent-container .w3a--gap-3{gap:.75rem}.w3a-parent-container .w3a--gap-y-0\\.5{row-gap:.125rem}.w3a-parent-container .w3a--truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.w3a-parent-container .w3a--rounded{border-radius:.25rem}.w3a-parent-container .w3a--rounded-full{border-radius:9999px}.w3a-parent-container .w3a--rounded-lg{border-radius:.5rem}.w3a-parent-container .w3a--rounded-md{border-radius:.375rem}.w3a-parent-container .w3a--rounded-xl{border-radius:.75rem}.w3a-parent-container .w3a--border-8{border-width:8px}.w3a-parent-container .w3a--border-b-0{border-bottom-width:0}.w3a-parent-container .w3a--border-l-transparent{border-left-color:#0000}.w3a-parent-container .w3a--border-r-transparent{border-right-color:#0000}.w3a-parent-container .w3a--border-t-app-gray-900{border-top-color:var(--app-gray-900)}.w3a-parent-container .w3a--bg-app-gray-50{background-color:var(--app-gray-50)}.w3a-parent-container .w3a--bg-app-primary-100{background-color:var(--app-primary-100)}.w3a-parent-container .w3a--object-contain{object-fit:contain}.w3a-parent-container .w3a--p-4{padding:1rem}.w3a-parent-container .w3a--p-6{padding:1.5rem}.w3a-parent-container .w3a--px-2{padding-left:.5rem;padding-right:.5rem}.w3a-parent-container .w3a--px-3{padding-left:.75rem;padding-right:.75rem}.w3a-parent-container .w3a--py-1{padding-bottom:.25rem;padding-top:.25rem}.w3a-parent-container .w3a--py-2{padding-bottom:.5rem;padding-top:.5rem}.w3a-parent-container .w3a--py-4{padding-bottom:1rem;padding-top:1rem}.w3a-parent-container .w3a--py-6{padding-bottom:1.5rem;padding-top:1.5rem}.w3a-parent-container .w3a--pt-7{padding-top:1.75rem}.w3a-parent-container .w3a--text-left{text-align:left}.w3a-parent-container .w3a--text-center{text-align:center}.w3a-parent-container .w3a--text-right{text-align:right}.w3a-parent-container .w3a--text-sm{font-size:.875rem;line-height:1.25rem}.w3a-parent-container .w3a--text-xs{font-size:.75rem;line-height:1rem}.w3a-parent-container .w3a--font-medium{font-weight:500}.w3a-parent-container .w3a--leading-none{line-height:1}.w3a-parent-container .w3a--text-app-gray-300{color:var(--app-gray-300)}.w3a-parent-container .w3a--text-app-gray-400{color:var(--app-gray-400)}.w3a-parent-container .w3a--text-app-gray-500{color:var(--app-gray-500)}.w3a-parent-container .w3a--text-app-gray-900{color:var(--app-gray-900)}.w3a-parent-container .w3a--text-app-primary-800{color:var(--app-primary-800)}.w3a-parent-container .w3a--text-app-white{color:var(--app-white)}.w3a-parent-container .w3a--shadow-lg{--tw-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a;--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container input[type=number]::-webkit-inner-spin-button,.w3a-parent-container input[type=number]::-webkit-outer-spin-button{appearance:none}@keyframes shake{0%,to{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-5px)}20%,40%,60%,80%{transform:translateX(5px)}}@keyframes tilt{0%{opacity:0;transform:scale(.9) rotate(0deg)}30%{opacity:1;transform:scale(1.05) rotate(-5deg)}60%{transform:scale(1.05) rotate(5deg)}to{transform:scale(1) rotate(0deg)}}@keyframes open-modal{0%{opacity:0;transform:scale(.8) rotate(-5deg)}60%{opacity:1;transform:scale(1.05) rotate(2deg)}to{transform:scale(1) rotate(0deg)}}@keyframes bounce{0%{opacity:0;transform:scale(.9) translateY(-50%)}30%{opacity:1;transform:scale(1.05) translateY(0)}50%{transform:scale(.95) translateY(-10%)}70%{transform:scale(1.02) translateY(0)}85%{transform:scale(.98) translateY(-5%)}to{transform:scale(1) translateY(0)}}@keyframes subtleAppear{0%{opacity:0;transform:scale(.9)}60%{opacity:1;transform:scale(1.02)}to{transform:scale(1)}}.w3a-parent-container .transition-wrapper{height:100%;position:relative;width:100%}.w3a-parent-container .fade-in{opacity:1;transition:opacity .3s}.w3a-parent-container .fade-out{opacity:0;transition:opacity .3s}.w3a-parent-container .slide-enter{opacity:0;transform:translateX(100%)}.w3a-parent-container .slide-enter-active{opacity:1;transform:translateX(0);transition:transform .3s ease-in-out,opacity .3s ease-in-out}.w3a-parent-container .slide-exit{opacity:1;transform:translateX(0)}.w3a-parent-container .slide-exit-active{opacity:0;transform:translateX(-100%);transition:transform .3s ease-in-out,opacity .3s ease-in-out}.w3a-parent-container .tooltip{--tw-translate-x:-50%;--tw-translate-y:-50%;--tw-shadow:0 4px 6px -1px #0000001a,0 2px 4px -2px #0000001a;--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);background-color:var(--app-gray-900);border-radius:.5rem;bottom:58%;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);color:var(--app-white);font-size:.875rem;left:50%;line-height:1.25rem;padding:.25rem .5rem;position:absolute;text-align:center;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));width:max-content}.w3a-parent-container #w3a-modal{align-items:center;box-sizing:border-box;display:flex;font-family:Inter;inset:0;justify-content:center;padding:1rem;position:fixed}.w3a-parent-container #w3a-modal.w3a-modal--hidden{display:none}.w3a-parent-container #w3a-modal:before{background-color:var(--app-black);content:"";inset:0;opacity:0;position:fixed;transition:opacity .2s ease-in-out}.w3a-parent-container #w3a-modal .w3a-modal__inner{--tw-shadow:0px 4px 16px #00000014;--tw-shadow-colored:0px 4px 16px var(--tw-shadow-color);background-color:var(--app-white);border-color:var(--app-gray-100);border-radius:32px;border-width:1px;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);display:flex;flex-direction:column;max-height:95%;max-width:392px;opacity:0;overflow-x:hidden;overflow-y:hidden;position:relative;width:100%}.w3a-parent-container #w3a-modal .w3a-modal__inner:is(.w3a--dark *){background-color:var(--app-gray-800);border-color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .w3a-modal__inner{transform:scale(.8) rotate(-5deg);transform-origin:center center;transition:all .15s cubic-bezier(.92,0,1,.67)}.w3a-parent-container #w3a-modal .w3a-modal__inner.w3a-modal__inner--active{animation:subtleAppear .5s ease-out forwards;opacity:1;transform-origin:center center;transition:none}.w3a-parent-container #w3a-modal.w3a-modal--active:before{opacity:.5}.w3a-parent-container #w3a-modal .w3a-modal__header{padding:0 2rem .5rem;position:relative}.w3a-parent-container #w3a-modal .w3a-modal__content{overflow-y:auto;padding:1rem 2rem}.w3a-parent-container #w3a-modal .w3a-modal__content_external_wallet{overflow-y:auto;padding-left:2rem;padding-right:2rem;padding-top:1.5rem}.w3a-parent-container #w3a-modal .w3a-modal__footer{align-items:center;justify-content:center;margin-top:auto;padding:1rem 2rem;text-align:center}.w3a-parent-container #w3a-modal .w3a-header{align-items:center;display:flex;padding-top:2rem}.w3a-parent-container #w3a-modal .w3a-header__logo{margin-bottom:1rem}.w3a-parent-container #w3a-modal .w3a-header__logo img{height:auto;width:2.5rem}.w3a-parent-container #w3a-modal .w3a-header__title{color:var(--app-gray-900);font-size:1.25rem;font-weight:700;line-height:1.75rem}.w3a-parent-container #w3a-modal .w3a-header__title:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal div.w3a-header__subtitle{align-items:center;color:var(--app-gray-500);display:flex;font-size:.875rem;font-weight:400;line-height:1.25rem}.w3a-parent-container #w3a-modal div.w3a-header__subtitle:is(.w3a--dark *){color:var(--app-gray-400)}.w3a-parent-container #w3a-modal div.w3a-header__subtitle img{height:14px;margin-left:.25rem;width:14px}.w3a-parent-container #w3a-modal button.w3a-header__button{align-items:center;border-radius:9999px;border-width:0;cursor:pointer;display:flex;height:1.5rem;justify-content:center;padding:0;position:absolute;right:1.75rem;top:1.7rem;width:1.5rem}.w3a-parent-container #w3a-modal button.w3a-header__button:hover{background-color:var(--app-gray-100)}.w3a-parent-container #w3a-modal button.w3a-header__button:active,.w3a-parent-container #w3a-modal button.w3a-header__button:focus{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal button.w3a-header__button:hover:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container #w3a-modal button.w3a-header__button:focus:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-header__button:active:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet{align-items:center;border-radius:9999px;border-width:0;cursor:pointer;display:flex;height:1.5rem;justify-content:center;padding:0;position:absolute;right:1.75rem;top:1.6rem;width:1.5rem}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:hover{background-color:var(--app-gray-100)}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:active,.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:focus{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:hover:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:focus:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:active:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal div.w3a-social__policy{color:var(--app-gray-500);font-size:.75rem;font-weight:500;line-height:1rem;margin-top:1rem;text-align:left}.w3a-parent-container #w3a-modal div.w3a-social__policy:is(.w3a--dark *){color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-group{margin-bottom:1rem}.w3a-parent-container #w3a-modal .w3a-group-loader-height{align-items:center;display:flex;height:200px;justify-content:center}.w3a-parent-container #w3a-modal .w3a-group:last-child{margin-bottom:0}.w3a-parent-container #w3a-modal .w3ajs-passwordless div.w3a-group__title{align-items:center;display:flex}.w3a-parent-container #w3a-modal .w3ajs-passwordless div.w3a-group__title img{height:14px;margin-left:.25rem;width:14px}.w3a-parent-container #w3a-modal .w3a-group.w3a-group--email-hidden,.w3a-parent-container #w3a-modal .w3a-group.w3a-group--ext-wallet-hidden,.w3a-parent-container #w3a-modal .w3a-group.w3a-group--hidden,.w3a-parent-container #w3a-modal .w3a-group.w3a-group--social-hidden{display:none}.w3a-parent-container #w3a-modal div.w3a-group__title{color:var(--app-gray-900);font-size:.875rem;font-weight:500;line-height:1.25rem;margin-bottom:.5rem}.w3a-parent-container #w3a-modal div.w3a-group__title:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal div.w3a-adapter-list-container{height:362px;overflow-y:auto;scrollbar-width:none}.w3a-parent-container #w3a-modal ul.w3a-adapter-list{display:grid;gap:8px;grid-template-columns:repeat(6,minmax(0,1fr));max-height:500px;overflow-y:auto;padding:1px;scrollbar-width:none;transition:max-height .35s;transition-timing-function:cubic-bezier(.92,0,.74,1)}.w3a-parent-container #w3a-modal ul.w3a-adapter-list.w3a-adapter-list--shrink{max-height:100px;overflow-y:hidden;transition:max-height .3s;transition-timing-function:cubic-bezier(0,.73,.71,1)}.w3a-parent-container #w3a-modal ul.w3a-adapter-list.w3a-adapter-list--hidden{display:none}.w3a-parent-container #w3a-modal li.w3a-adapter-item{list-style-type:none}.w3a-parent-container #w3a-modal li.w3a-adapter-item--full{grid-column:span 6/span 6}.w3a-parent-container #w3a-modal .w3a-adapter-item--hide{display:none}.w3a-parent-container #w3a-modal .w3a-external-toggle{display:block;width:100%!important}.w3a-parent-container #w3a-modal .w3a-external-toggle.w3a-external-toggle--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-external-container{display:block;margin-bottom:0}.w3a-parent-container #w3a-modal .w3a-external-container.w3a-external-container--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-external-group{display:flex;flex-wrap:wrap;gap:.75rem;margin-bottom:1rem}.w3a-parent-container #w3a-modal .w3a-external-group__left{flex-grow:1}.w3a-parent-container #w3a-modal button.w3a-external-back{align-items:center;background-image:none;border-radius:9999px;border-width:0;color:var(--app-gray-500);cursor:pointer;display:flex;height:1.5rem;justify-content:center;padding:0;width:1.5rem}.w3a-parent-container #w3a-modal button.w3a-external-back:hover{background-color:var(--app-gray-100);color:var(--app-gray-900)}.w3a-parent-container #w3a-modal button.w3a-external-back:active,.w3a-parent-container #w3a-modal button.w3a-external-back:focus{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal button.w3a-external-back:is(.w3a--dark *){color:var(--app-gray-400)}.w3a-parent-container #w3a-modal button.w3a-external-back:hover:is(.w3a--dark *){background-color:var(--app-gray-700);color:var(--app-white)}.w3a-parent-container #w3a-modal button.w3a-external-back:focus:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-external-back:active:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-external-back .w3a-group__title{color:var(--app-gray-400);margin-bottom:0;margin-left:5px}.w3a-parent-container #w3a-modal .w3a-external-loader{display:flex;justify-content:center}.w3a-parent-container #w3a-modal .w3a-wallet-connect{display:block;margin-bottom:.625rem;text-align:center}.w3a-parent-container #w3a-modal .w3a-wallet-connect.w3a-wallet-connect--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container{background-color:var(--app-white);border-radius:10px;color:var(--app-gray-500);font-size:.625rem;margin-left:auto;margin-right:auto;min-width:250px;padding-bottom:.625rem;padding-top:.625rem;width:fit-content}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container:is(.w3a--dark *){background-color:var(--app-gray-800);color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-android,.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-desktop{margin:auto}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-btn-group{display:flex;gap:18px}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-ios{box-sizing:border-box;column-gap:1.25rem;display:flex;flex-wrap:wrap;padding:0 0 1.75rem;row-gap:30px}.w3a-parent-container #w3a-modal .w3a-wallet-connect-qr>canvas,.w3a-parent-container #w3a-modal .w3a-wallet-connect-qr>svg{margin:auto}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-android a{text-decoration-line:none}.w3a-parent-container #w3a-modal .w3a-wallet-connect__logo>img{margin:0 auto 1rem;width:115px}.w3a-parent-container #w3a-modal .w3a-footer{align-items:center;color:var(--app-gray-400);display:flex;font-size:.75rem;justify-content:center;line-height:1rem}.w3a-parent-container #w3a-modal .w3a-footer__links a:active,.w3a-parent-container #w3a-modal .w3a-footer__links a:focus{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal .w3a-footer__links a:focus:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-footer__links a:active:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-footer__links span{margin:0 4px}.w3a-parent-container #w3a-modal.w3a-modal--light .w3a-footer__links a:focus-visible{outline:1px solid #0f1222}.w3a-parent-container #w3a-modal.w3a-modal--light .w3a-external-back:focus-visible{outline:1px solid #0f1222}.w3a-parent-container #w3a-modal .hover-icon{display:none;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal .w3a-text-field{background-color:var(--app-gray-50);border-color:var(--app-gray-300);border-radius:9999px;border-width:1px;color:var(--app-gray-900);font-size:.875rem;line-height:1.25rem;margin-top:.5rem;padding:.75rem 1.5rem}.w3a-parent-container #w3a-modal .w3a-text-field::placeholder{color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-text-field{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000);outline-width:0}.w3a-parent-container #w3a-modal .w3a-text-field:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);border-color:#0000;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .w3a-text-field:disabled{cursor:not-allowed}.w3a-parent-container #w3a-modal .w3a-text-field:disabled::placeholder{color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-text-field:is(.w3a--dark *){background-color:var(--app-gray-600);border-color:var(--app-gray-500);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-text-field:is(.w3a--dark *)::placeholder{color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-text-field:focus:is(.w3a--dark *){--tw-ring-color:var(--app-primary-500);border-color:#0000}.w3a-parent-container #w3a-modal .w3a-text-field:disabled:is(.w3a--dark *)::placeholder{color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-text-field{line-height:1.25em}.w3a-parent-container #w3a-modal .w3a-text-field--country-code{display:flex;justify-content:space-between;padding-left:1rem;padding-right:1rem;width:100%}.w3a-parent-container #w3a-modal .w3a-text-field--number{appearance:none}.w3a-parent-container #w3a-modal .w3a-sms-field--error{color:var(--app-red-500);font-size:.875rem;line-height:1.25rem;margin-bottom:.5rem;margin-left:.375rem;margin-top:-.5rem}.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill,.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill:active,.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill:focus,.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill:hover{--tw-shadow:0 0 0 30px #f9fafb inset;--tw-shadow-colored:inset 0 0 0 30px var(--tw-shadow-color);-webkit-text-fill-color:#111928!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill,.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill:active,.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill:focus,.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill:hover{--tw-shadow:0 0 0 30px #374151 inset;--tw-shadow-colored:inset 0 0 0 30px var(--tw-shadow-color);-webkit-text-fill-color:#fff!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container #w3a-modal .w3a-button{background-color:var(--app-gray-100);border-radius:9999px;color:var(--app-gray-900);font-size:1rem;font-weight:500;line-height:1.5rem;padding:.75rem 1.5rem}.w3a-parent-container #w3a-modal .w3a-button:hover{background-color:var(--app-gray-300)}.w3a-parent-container #w3a-modal .w3a-button:focus{background-color:var(--app-gray-100);color:var(--app-gray-700);outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal .w3a-button:active{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal .w3a-button:disabled{background-color:var(--app-gray-50);color:var(--app-gray-300)}.w3a-parent-container #w3a-modal .w3a-button:is(.w3a--dark *){background-color:var(--app-gray-900);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-button:hover:is(.w3a--dark *){background-color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .w3a-button:focus:is(.w3a--dark *){background-color:var(--app-gray-900);color:var(--app-white);outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-button:active:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-button:disabled:is(.w3a--dark *){--tw-bg-opacity:1;background-color:rgb(59 69 85/var(--tw-bg-opacity,1));color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-button--primary{background-color:var(--app-primary-600);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-button--primary:hover{background-color:var(--app-primary-800)}.w3a-parent-container #w3a-modal .w3a-button--primary:focus{background-color:var(--app-primary-600);color:var(--app-white);outline-color:var(--app-primary-300)}.w3a-parent-container #w3a-modal .w3a-button--primary:active{outline-color:var(--app-primary-300)}.w3a-parent-container #w3a-modal .w3a-button--primary:disabled{--tw-text-opacity:1;background-color:var(--app-primary-200);color:rgb(235 245 255/var(--tw-text-opacity,1))}.w3a-parent-container #w3a-modal .w3a-button--primary:is(.w3a--dark *){background-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .w3a-button--primary:hover:is(.w3a--dark *){background-color:var(--app-primary-800)}.w3a-parent-container #w3a-modal .w3a-button--primary:focus:is(.w3a--dark *){background-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .w3a-button--primary:disabled:is(.w3a--dark *){--tw-bg-opacity:1;background-color:rgb(45 72 116/var(--tw-bg-opacity,1));color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-button--login{align-items:center;display:inline-flex;height:2.75rem;justify-content:center}.w3a-parent-container #w3a-modal button.w3a-button--login:hover>.hover-icon{display:block;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal button.w3a-button--login:hover>.image-icon{display:none;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal button.w3a-button-expand{color:var(--app-primary-600);font-size:.875rem;height:auto;line-height:1.25rem;margin-left:auto;margin-top:1rem;width:auto}.w3a-parent-container #w3a-modal button.w3a-button-expand:hover{color:var(--app-primary-800)}.w3a-parent-container #w3a-modal button.w3a-button-expand:focus-visible{outline-color:var(--app-gray-50);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-button-expand:is(.w3a--dark *){color:var(--app-primary-500)}.w3a-parent-container #w3a-modal button.w3a-button-expand:hover:is(.w3a--dark *){color:var(--app-primary-400)}.w3a-parent-container #w3a-modal button.w3a-button-expand:focus-visible:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-sms-field__container{display:grid;gap:.5rem;grid-template-columns:repeat(12,minmax(0,1fr))}.w3a-parent-container #w3a-modal .w3a-sms-field__code-selected{display:flex}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown{height:185px;position:absolute;width:120px;z-index:10}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-color:var(--app-gray-100);border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown{--tw-shadow:0px 4px 16px #00000014;--tw-shadow-colored:0px 4px 16px var(--tw-shadow-color);background-color:var(--app-white);border-radius:.5rem;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);overflow-y:scroll}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown{transform:translateY(-230px)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown ul{color:var(--app-gray-700);font-size:.875rem;line-height:1.25rem;padding-bottom:.5rem;padding-top:.5rem}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown ul:is(.w3a--dark *){color:var(--app-gray-200)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li{cursor:pointer;padding:0}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li:hover{background-color:var(--app-gray-100)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li:hover:is(.w3a--dark *){background-color:var(--app-gray-900);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li button{height:100%;padding:.5rem 1rem;text-align:left;width:100%}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li button div{align-items:center;display:flex}.w3a-parent-container #w3a-modal .w3a-sms-field__code{grid-column:span 5/span 5}.w3a-parent-container #w3a-modal .w3a-sms-field__number{grid-column:span 7/span 7}.w3a-parent-container #w3a-modal .w3a-modal__loader{background-color:var(--app-white);display:flex;inset:0;justify-content:center;position:absolute;z-index:10}.w3a-parent-container #w3a-modal .w3a-modal__loader:is(.w3a--dark *){background-color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .w3a-modal__loader.w3a-modal__loader--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-modal__loader-content{display:flex;flex-direction:column;position:relative;text-align:center}.w3a-parent-container #w3a-modal .w3a-modal__loader-info{align-items:center;display:flex;flex-direction:column;flex-grow:1;justify-content:center;padding:0 30px}.w3a-parent-container #w3a-modal .w3a-spinner-label{color:var(--app-primary-600);font-size:1rem;font-weight:500;line-height:1.5rem;margin-top:10px}.w3a-parent-container #w3a-modal .w3a-spinner-label:is(.w3a--dark *){color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .w3a-spinner-message{color:var(--app-gray-500);font-size:1rem;line-height:1.5rem;margin-top:10px}.w3a-parent-container #w3a-modal .w3a-spinner-message:first-letter{text-transform:capitalize}.w3a-parent-container #w3a-modal .w3a-spinner-message:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-spinner-message.w3a-spinner-message--error{color:var(--app-red-500)}.w3a-parent-container #w3a-modal .w3a-spinner-power{--tw-text-opacity:1;color:rgb(183 184 189/var(--tw-text-opacity,1));font-size:.75rem;line-height:1rem;margin-top:auto}.w3a-parent-container #w3a-modal .w3a-spinner-power>img{display:inline;height:2rem;width:auto}.w3a-parent-container #w3a-modal .w3a-spinner{display:inline-flex;height:60px;position:relative;width:60px}.w3a-parent-container #w3a-modal .w3a-spinner__spinner{position:absolute}@keyframes w3a--spin{to{transform:rotate(1turn)}}.w3a-parent-container #w3a-modal .w3a-spinner__spinner{animation:w3a--spin 1s linear infinite;background-image:conic-gradient(from 0deg at 50% 50%,var(--app-primary-600) 0,#e5e7ebcc 90deg,#e5e7ebcc 270deg,var(--app-primary-600) 1turn);background-position:0 0;background-size:100% 100%;border-radius:100vw;display:inline-block;height:100%;-webkit-mask:radial-gradient(farthest-side,#000 98%,#0000) center/85% 85% no-repeat,linear-gradient(#000 0 0);-webkit-mask-composite:destination-out;mask:radial-gradient(farthest-side,#000 98%,#0000) center/85% 85% no-repeat,linear-gradient(#000 0 0);mask-composite:exclude;width:100%}.w3a-parent-container .dark #w3a-modal .w3a-spinner__spinner{background-image:conic-gradient(from 0deg at 50% 50%,var(--app-primary-500) 0,#e5e7eb33 90deg,#e5e7eb33 270deg,var(--app-primary-500) 1turn)}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge{align-items:center;display:flex;justify-content:center;margin-bottom:14px}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge-message{color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge-message:first-letter{text-transform:capitalize}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge-message:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-modal__loader-app-logo{display:flex;padding:.5rem}.w3a-parent-container #w3a-modal .w3a-modal__loader-app-logo img{height:3rem;max-height:3rem;max-width:3rem;object-fit:contain;width:3rem}.w3a-parent-container #w3a-modal .w3a-modal__loader-social-logo{align-items:center;border-radius:9999px;display:flex;height:3.5rem;justify-content:center;padding:.25rem;width:3.5rem}.w3a-parent-container #w3a-modal .w3a-modal__loader-social-logo img{height:2.5rem;max-height:2.5rem;max-width:2.5rem;object-fit:contain;width:2.5rem}.w3a-parent-container #w3a-modal .w3a-modal__loader-adapter img{height:auto;width:84px}.w3a-parent-container #w3a-modal .w3a-modal__connector{align-items:center;display:flex}.w3a-parent-container .w3a-modal__connector-beat{display:inline-block;height:80px;position:relative;width:80px}.w3a-parent-container .w3a-modal__connector-beat div{animation-timing-function:cubic-bezier(0,1,1,0);background:grey;border-radius:50%;height:13px;position:absolute;top:33px;width:13px}@keyframes w3a--pulse{50%{opacity:.5}}.w3a-parent-container .w3a-modal__connector-beat div{animation:w3a--pulse 2s cubic-bezier(.4,0,.6,1) infinite;background-color:var(--app-gray-200)}.w3a-parent-container .w3a-modal__connector-beat div:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .w3a-modal__connector-beat div:first-child{animation:beat1 2.4s infinite;left:8px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(2){animation:beat2 2.4s infinite;left:8px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(3){animation:beat3 2.4s infinite;left:8px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(4){animation:beat4 2.4s infinite;left:32px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(5){animation:beat5 2.4s infinite;left:56px}.w3a-parent-container .wallet-btn{background-color:var(--app-gray-100)}.w3a-parent-container .wallet-btn:hover{background-color:var(--app-gray-200)}.w3a-parent-container .wallet-btn:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .wallet-btn:hover:is(.w3a--dark *){background-color:var(--app-gray-800)}.w3a-parent-container .wallet-link-btn{color:var(--app-gray-900)}.w3a-parent-container .wallet-link-btn:is(.w3a--dark *){background-color:var(--app-gray-700);color:var(--app-white)}.w3a-parent-container .wallet-link-btn:hover:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .wallet-link-btn img{height:1.75rem;width:1.75rem}.w3a-parent-container .wallet-adapter-container{height:551px}@keyframes beat1{0%{transform:scale(0)}25%{transform:scale(0)}50%{transform:scale(1)}75%{transform:scale(0)}to{transform:scale(0)}}@keyframes beat2{0%{transform:scale(0)}25%{transform:scale(1)}50%{transform:translate(24px)}75%{transform:translate(0)}to{transform:translate(0) scale(0)}}@keyframes beat3{0%{transform:translate(0)}25%{transform:translate(24px)}50%{transform:translate(48px)}75%{transform:translate(24px)}to{transform:translate(0)}}@keyframes beat4{0%{transform:translate(0)}25%{transform:translate(24px)}50%{transform:translate(24px) scale(0)}75%{transform:translate(24px) scale(1)}to{transform:translate(0)}}@keyframes beat5{0%{transform:scale(1)}25%{transform:scale(0)}50%{transform:scale(0)}75%{transform:scale(0)}to{transform:scale(1)}}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--flex{display:flex}.w3a-parent-container .dark\\:w3a--block:is(.w3a--dark *){display:block}.w3a-parent-container .dark\\:w3a--hidden:is(.w3a--dark *){display:none}.w3a-parent-container .dark\\:w3a--bg-app-gray-600:is(.w3a--dark *){background-color:var(--app-gray-600)}.w3a-parent-container .dark\\:w3a--bg-app-gray-700:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .dark\\:w3a--text-app-gray-400:is(.w3a--dark *){color:var(--app-gray-400)}.w3a-parent-container .dark\\:w3a--text-app-gray-500:is(.w3a--dark *){color:var(--app-gray-500)}.w3a-parent-container .dark\\:w3a--text-app-white:is(.w3a--dark *){color:var(--app-white)}';styleInject(css_248z$1);const warn=(e,t,r,i)=>{var n,o,a,s;const u=[r,{code:t,...i||{}}];if(null==(o=null==(n=null==e?void 0:e.services)?void 0:n.logger)?void 0:o.forward)return e.services.logger.forward(u,"warn","react-i18next::",!0);isString$1(u[0])&&(u[0]=`react-i18next:: ${u[0]}`),(null==(s=null==(a=null==e?void 0:e.services)?void 0:a.logger)?void 0:s.warn)?e.services.logger.warn(...u):null==console||console.warn},alreadyWarned={},warnOnce=(e,t,r,i)=>{isString$1(r)&&alreadyWarned[r]||(isString$1(r)&&(alreadyWarned[r]=new Date),warn(e,t,r,i))},loadedClb=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},loadNamespaces=(e,t,r)=>{e.loadNamespaces(t,loadedClb(e,r))},loadLanguages=(e,t,r,i)=>{if(isString$1(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return loadNamespaces(e,r,i);r.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,loadedClb(e,i))},hasLoadedNamespace=(e,t,r={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:r.lng,precheck:(t,i)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e))return!1}}):(warnOnce(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0),isString$1=e=>"string"==typeof e,isObject$1=e=>"object"==typeof e&&null!==e,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=e=>htmlEntities[e],unescape$1=e=>e.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:unescape$1};const setDefaults=(e={})=>{defaultOptions={...defaultOptions,...e}},getDefaults=()=>defaultOptions;let i18nInstance$1;const setI18n=e=>{i18nInstance$1=e},getI18n=()=>i18nInstance$1,initReactI18next={type:"3rdParty",init(e){setDefaults(e.options.react),setI18n(e)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious=(e,t)=>{const r=reactExports.useRef();return reactExports.useEffect(()=>{r.current=e},[e,t]),r.current},alwaysNewT=(e,t,r,i)=>e.getFixedT(t,r,i),useMemoizedT=(e,t,r,i)=>reactExports.useCallback(alwaysNewT(e,t,r,i),[e,t,r,i]),useTranslation=(e,t={})=>{var r,i,n,o;const{i18n:a}=t,{i18n:s,defaultNS:u}=reactExports.useContext(I18nContext)||{},l=a||s||getI18n();if(l&&!l.reportNamespaces&&(l.reportNamespaces=new ReportNamespaces),!l){warnOnce(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>isString$1(t)?t:isObject$1(t)&&isString$1(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}(null==(r=l.options.react)?void 0:r.wait)&&warnOnce(l,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...getDefaults(),...l.options.react,...t},{useSuspense:h,keyPrefix:d}=c;let f=u||(null==(i=l.options)?void 0:i.defaultNS);f=isString$1(f)?[f]:f||["translation"],null==(o=(n=l.reportNamespaces).addUsedNamespaces)||o.call(n,f);const p=(l.isInitialized||l.initializedStoreOnce)&&f.every(e=>hasLoadedNamespace(e,l,c)),m=useMemoizedT(l,t.lng||null,"fallback"===c.nsMode?f:f[0],d),g=()=>m,y=()=>alwaysNewT(l,t.lng||null,"fallback"===c.nsMode?f:f[0],d),[b,w]=reactExports.useState(g);let v=f.join();t.lng&&(v=`${t.lng}${v}`);const _=usePrevious(v),E=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:e,bindI18nStore:r}=c;E.current=!0,p||h||(t.lng?loadLanguages(l,t.lng,f,()=>{E.current&&w(y)}):loadNamespaces(l,f,()=>{E.current&&w(y)})),p&&_&&_!==v&&E.current&&w(y);const i=()=>{E.current&&w(y)};return e&&(null==l||l.on(e,i)),r&&(null==l||l.store.on(r,i)),()=>{E.current=!1,l&&e&&(null==e||e.split(" ").forEach(e=>l.off(e,i))),r&&l&&r.split(" ").forEach(e=>l.store.off(e,i))}},[l,v]),reactExports.useEffect(()=>{E.current&&p&&w(g)},[l,d,p]);const S=[b,l,p];if(S.t=b,S.i18n=l,S.ready=p,p)return S;if(!p&&!h)return S;throw new Promise(e=>{t.lng?loadLanguages(l,t.lng,f,()=>e()):loadNamespaces(l,f,()=>e())})},isString=e=>"string"==typeof e,defer=()=>{let e,t;const r=new Promise((r,i)=>{e=r,t=i});return r.resolve=e,r.reject=t,r},makeString=e=>null==e?"":""+e,copy=(e,t,r)=>{e.forEach(e=>{t[e]&&(r[e]=t[e])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=e=>e&&e.indexOf("###")>-1?e.replace(lastOfPathSeparatorRegExp,"."):e,canNotTraverseDeeper=e=>!e||isString(e),getLastOfPath=(e,t,r)=>{const i=isString(t)?t.split("."):t;let n=0;for(;n<i.length-1;){if(canNotTraverseDeeper(e))return{};const t=cleanKey(i[n]);!e[t]&&r&&(e[t]=new r),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++n}return canNotTraverseDeeper(e)?{}:{obj:e,k:cleanKey(i[n])}},setPath=(e,t,r)=>{const{obj:i,k:n}=getLastOfPath(e,t,Object);if(void 0!==i||1===t.length)return void(i[n]=r);let o=t[t.length-1],a=t.slice(0,t.length-1),s=getLastOfPath(e,a,Object);for(;void 0===s.obj&&a.length;)o=`${a[a.length-1]}.${o}`,a=a.slice(0,a.length-1),s=getLastOfPath(e,a,Object),s&&s.obj&&void 0!==s.obj[`${s.k}.${o}`]&&(s.obj=void 0);s.obj[`${s.k}.${o}`]=r},pushPath=(e,t,r,i)=>{const{obj:n,k:o}=getLastOfPath(e,t,Object);n[o]=n[o]||[],n[o].push(r)},getPath=(e,t)=>{const{obj:r,k:i}=getLastOfPath(e,t);if(r)return r[i]},getPathWithDefaults=(e,t,r)=>{const i=getPath(e,r);return void 0!==i?i:getPath(t,r)},deepExtend=(e,t,r)=>{for(const i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?isString(e[i])||e[i]instanceof String||isString(t[i])||t[i]instanceof String?r&&(e[i]=t[i]):deepExtend(e[i],t[i],r):e[i]=t[i]);return e},regexEscape=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=e=>isString(e)?e.replace(/[&<>"'\/]/g,e=>_entityMap[e]):e;class RegExpCache{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(e,t,r)=>{t=t||"",r=r||"";const i=chars.filter(e=>t.indexOf(e)<0&&r.indexOf(e)<0);if(0===i.length)return!0;const n=looksLikeObjectPathRegExpCache.getRegExp(`(${i.map(e=>"?"===e?"\\?":e).join("|")})`);let o=!n.test(e);if(!o){const t=e.indexOf(r);t>0&&!n.test(e.substring(0,t))&&(o=!0)}return o},deepFind=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const i=t.split(r);let n=e;for(let o=0;o<i.length;){if(!n||"object"!=typeof n)return;let e,t="";for(let a=o;a<i.length;++a)if(a!==o&&(t+=r),t+=i[a],e=n[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&a<i.length-1)continue;o+=a-o+1;break}n=e}return n},getCleanedCode=e=>e&&e.replace("_","-"),consoleLogger={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]}};class Logger{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||consoleLogger,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(isString(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Logger(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Logger(this.logger,e)}}var baseLogger=new Logger;let EventEmitter$1=class{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const r=this.observers[e].get(t)||0;this.observers[e].set(t,r+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(e=>{let[t,i]=e;for(let n=0;n<i;n++)t(...r)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(t=>{let[i,n]=t;for(let o=0;o<n;o++)i.apply(i,[e,...r])})}}};class ResourceStore extends EventEmitter$1{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],r&&(Array.isArray(r)?a.push(...r):isString(r)&&n?a.push(...r.split(n)):a.push(r)));const s=getPath(this.data,a);return!s&&!t&&!r&&e.indexOf(".")>-1&&(e=a[0],t=a[1],r=a.slice(2).join(".")),!s&&o&&isString(r)?deepFind(this.data&&this.data[e]&&this.data[e][t],r,n):s}addResource(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator;let a=[e,t];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=t,t=a[1]),this.addNamespaces(t),setPath(this.data,a,i),n.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const n in r)(isString(r[n])||Array.isArray(r[n]))&&this.addResource(e,t,n,r[n],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=t,t=a[1]),this.addNamespaces(t);let s=getPath(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?deepExtend(s,r,n):s={...s,...r},setPath(this.data,a,s),o.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,i,n){return e.forEach(e=>{this.processors[e]&&(t=this.processors[e].process(t,r,i,n))}),t}};const checkedLoadedFor={};class Translator extends EventEmitter$1{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const r=this.resolve(e,t);return r&&void 0!==r.res}extractFromKey(e,t){let r=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===r&&(r=":");const i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let n=t.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||looksLikeObjectPath(e,r,i));if(o&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:isString(n)?[n]:n};const o=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(o[0])>-1)&&(n=o.shift()),e=o.join(i)}return{key:e,namespaces:isString(n)?[n]:n}}translate(e,t,r){if("object"!=typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof t&&(t={...t}),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const i=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],t),s=a[a.length-1],u=t.lng||this.language,l=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(l){const e=t.nsSeparator||this.options.nsSeparator;return i?{res:`${s}${e}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:s,usedParams:this.getUsedParamsDetails(t)}:`${s}${e}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:s,usedParams:this.getUsedParamsDetails(t)}:o}const c=this.resolve(e,t);let h=c&&c.res;const d=c&&c.usedKey||o,f=c&&c.exactUsedKey||o,p=Object.prototype.toString.apply(h),m=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,y=!isString(h)&&"boolean"!=typeof h&&"number"!=typeof h;if(!(g&&h&&y&&["[object Number]","[object Function]","[object RegExp]"].indexOf(p)<0)||isString(m)&&Array.isArray(h))if(g&&isString(m)&&Array.isArray(h))h=h.join(m),h&&(h=this.extendTranslation(h,e,t,r));else{let i=!1,a=!1;const l=void 0!==t.count&&!isString(t.count),d=Translator.hasDefaultValue(t),f=l?this.pluralResolver.getSuffix(u,t.count,t):"",p=t.ordinal&&l?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",m=l&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),g=m&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${f}`]||t[`defaultValue${p}`]||t.defaultValue;!this.isValidLookup(h)&&d&&(i=!0,h=g),this.isValidLookup(h)||(a=!0,h=o);const y=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&a?void 0:h,b=d&&g!==h&&this.options.updateMissing;if(a||i||b){if(this.logger.log(b?"updateKey":"missingKey",u,s,o,b?g:h),n){const e=this.resolve(o,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const r=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&r&&r[0])for(let t=0;t<r.length;t++)e.push(r[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const i=(e,r,i)=>{const n=d&&i!==h?i:y;this.options.missingKeyHandler?this.options.missingKeyHandler(e,s,r,n,b,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,s,r,n,b,t),this.emit("missingKey",e,s,r,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&l?e.forEach(e=>{const r=this.pluralResolver.getSuffixes(e,t);m&&t[`defaultValue${this.options.pluralSeparator}zero`]&&r.indexOf(`${this.options.pluralSeparator}zero`)<0&&r.push(`${this.options.pluralSeparator}zero`),r.forEach(r=>{i([e],o+r,t[`defaultValue${r}`]||g)})}):i(e,o,g))}h=this.extendTranslation(h,e,t,c,r),a&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${s}:${o}`),(a||i)&&this.options.parseMissingKeyHandler&&(h="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${s}:${o}`:o,i?h:void 0):this.options.parseMissingKeyHandler(h))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,h,{...t,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(c.res=e,c.usedParams=this.getUsedParamsDetails(t),c):e}if(n){const e=Array.isArray(h),r=e?[]:{},i=e?f:d;for(const o in h)if(Object.prototype.hasOwnProperty.call(h,o)){const e=`${i}${n}${o}`;r[o]=this.translate(e,{...t,joinArrays:!1,ns:a}),r[o]===e&&(r[o]=h[o])}h=r}}return i?(c.res=h,c.usedParams=this.getUsedParamsDetails(t),c):h}extendTranslation(e,t,r,i,n){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const a=isString(e)&&(r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let s;if(a){const t=e.match(this.interpolator.nestingRegexp);s=t&&t.length}let u=r.replace&&!isString(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),e=this.interpolator.interpolate(e,u,r.lng||this.language||i.usedLng,r),a){const t=e.match(this.interpolator.nestingRegexp);s<(t&&t.length)&&(r.nest=!1)}!r.lng&&"v1"!==this.options.compatibilityAPI&&i&&i.res&&(r.lng=this.language||i.usedLng),!1!==r.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return n&&n[0]===i[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${i[0]} in key: ${t[0]}`),null):o.translate(...i,t)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,s=isString(a)?[a]:a;return null!=e&&s&&s.length&&!1!==r.applyPostProcessor&&(e=postProcessor.handle(s,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t,r,i,n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return isString(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(t))return;const s=this.extractFromKey(e,a),u=s.key;r=u;let l=s.namespaces;this.options.fallbackNS&&(l=l.concat(this.options.fallbackNS));const c=void 0!==a.count&&!isString(a.count),h=c&&!a.ordinal&&0===a.count&&this.pluralResolver.shouldUseIntlApi(),d=void 0!==a.context&&(isString(a.context)||"number"==typeof a.context)&&""!==a.context,f=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);l.forEach(e=>{this.isValidLookup(t)||(o=e,!checkedLoadedFor[`${f[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(checkedLoadedFor[`${f[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${f.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach(r=>{if(this.isValidLookup(t))return;n=r;const o=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(o,u,r,e,a);else{let e;c&&(e=this.pluralResolver.getSuffix(r,a.count,a));const t=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(c&&(o.push(u+e),a.ordinal&&0===e.indexOf(i)&&o.push(u+e.replace(i,this.options.pluralSeparator)),h&&o.push(u+t)),d){const r=`${u}${this.options.contextSeparator}${a.context}`;o.push(r),c&&(o.push(r+e),a.ordinal&&0===e.indexOf(i)&&o.push(r+e.replace(i,this.options.pluralSeparator)),h&&o.push(r+t))}}let s;for(;s=o.pop();)this.isValidLookup(t)||(i=s,t=this.getResource(r,e,s,a))}))})}),{res:t,usedKey:r,exactUsedKey:i,usedLng:n,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!isString(e.replace);let i=r?e.replace:e;if(r&&void 0!==e.count&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const e of t)delete i[e]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,12)&&void 0!==e[r])return!0;return!1}}const capitalize=e=>e.charAt(0).toUpperCase()+e.slice(1);class LanguageUtil{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(e){if(!(e=getCleanedCode(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=getCleanedCode(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(isString(e)&&e.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(t){}const r=["hans","hant","latn","cyrl","cans","mong","arab"];let i=e.split("-");return this.options.lowerCaseLng?i=i.map(e=>e.toLowerCase()):2===i.length?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=capitalize(i[1].toLowerCase()))):3===i.length&&(i[0]=i[0].toLowerCase(),2===i[1].length&&(i[1]=i[1].toUpperCase()),"sgn"!==i[0]&&2===i[2].length&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=capitalize(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=capitalize(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const r=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(r)||(t=r)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),isString(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],n=e=>{e&&(this.isSupportedCode(e)?i.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return isString(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&n(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&n(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&n(this.getLanguagePartFromCode(e))):isString(e)&&n(this.formatLanguageCode(e)),r.forEach(e=>{i.indexOf(e)<0&&n(this.formatLanguageCode(e))}),i}}let sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const nonIntlVersions=["v1","v2","v3"],intlVersions=["v4"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},createRules=()=>{const e={};return sets.forEach(t=>{t.lngs.forEach(r=>{e[r]={numbers:t.nr,plurals:_rulesPluralsTypes[t.fc]}})}),e};class PluralResolver{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=baseLogger.create("pluralResolver"),this.options.compatibilityJSON&&!intlVersions.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const r=getCleanedCode("dev"===e?"en":e),i=t.ordinal?"ordinal":"cardinal",n=JSON.stringify({cleanedCode:r,type:i});if(n in this.pluralRulesCache)return this.pluralRulesCache[n];let o;try{o=new Intl.PluralRules(r,{type:i})}catch(err){if(!e.match(/-|_/))return;const i=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(i,t)}return this.pluralRulesCache[n]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.getRule(e,t);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,r).map(e=>`${t}${e}`)}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.getRule(e,t);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((e,t)=>suffixesOrder[e]-suffixesOrder[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):r.numbers.map(r=>this.getSuffix(e,r,t)):[]}getSuffix(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:this.getSuffixRetroCompatible(i,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let i=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));const n=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?`_plural_${i.toString()}`:n():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?n():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!nonIntlVersions.includes(this.options.compatibilityJSON)}}const deepFindWithDefaults=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=getPathWithDefaults(e,t,r);return!o&&n&&isString(r)&&(o=deepFind(e,r,i),void 0===o&&(o=deepFind(t,r,i))),o},regexSafe=e=>e.replace(/\$/g,"$$$$");class Interpolator{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:n,prefixEscaped:o,suffix:a,suffixEscaped:s,formatSeparator:u,unescapeSuffix:l,unescapePrefix:c,nestingPrefix:h,nestingPrefixEscaped:d,nestingSuffix:f,nestingSuffixEscaped:p,nestingOptionsSeparator:m,maxReplaces:g,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:escape,this.escapeValue=void 0===r||r,this.useRawValueToEscape=void 0!==i&&i,this.prefix=n?regexEscape(n):o||"{{",this.suffix=a?regexEscape(a):s||"}}",this.formatSeparator=u||",",this.unescapePrefix=l?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=h?regexEscape(h):d||regexEscape("$t("),this.nestingSuffix=f?regexEscape(f):p||regexEscape(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){let n,o,a;const s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=e=>{if(e.indexOf(this.formatSeparator)<0){const n=deepFindWithDefaults(t,s,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(n,void 0,r,{...i,...t,interpolationkey:e}):n}const n=e.split(this.formatSeparator),o=n.shift().trim(),a=n.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(t,s,o,this.options.keySeparator,this.options.ignoreJSONStructure),a,r,{...i,...t,interpolationkey:o})};this.resetRegExp();const l=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,c=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>regexSafe(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?regexSafe(this.escape(e)):regexSafe(e)}].forEach(t=>{for(a=0;n=t.regex.exec(e);){const r=n[1].trim();if(o=u(r),void 0===o)if("function"==typeof l){const t=l(e,n,i);o=isString(t)?t:""}else if(i&&Object.prototype.hasOwnProperty.call(i,r))o="";else{if(c){o=n[0];continue}this.logger.warn(`missed to pass in variable ${r} for interpolating ${e}`),o=""}else isString(o)||this.useRawValueToEscape||(o=makeString(o));const s=t.safeValue(o);if(e=e.replace(n[0],s),c?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=n[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t){let r,i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=(e,t)=>{const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const i=e.split(new RegExp(`${r}[ ]*{`));let o=`{${i[1]}`;e=i[0],o=this.interpolate(o,n);const a=o.match(/'/g),s=o.match(/"/g);(a&&a.length%2==0&&!s||s.length%2!=0)&&(o=o.replace(/'/g,'"'));try{n=JSON.parse(o),t&&(n={...t,...n})}catch(u){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,u),`${e}${r}${o}`}return n.defaultValue&&n.defaultValue.indexOf(this.prefix)>-1&&delete n.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let s=[];n={...o},n=n.replace&&!isString(n.replace)?n.replace:n,n.applyPostProcessor=!1,delete n.defaultValue;let u=!1;if(-1!==r[0].indexOf(this.formatSeparator)&&!/{.*}/.test(r[1])){const e=r[1].split(this.formatSeparator).map(e=>e.trim());r[1]=e.shift(),s=e,u=!0}if(i=t(a.call(this,r[1].trim(),n),n),i&&r[0]===e&&!isString(i))return i;isString(i)||(i=makeString(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),u&&(i=s.reduce((e,t)=>this.format(e,t,o.lng,{...o,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const parseFormatStr=e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const i=e.split("(");t=i[0].toLowerCase().trim();const n=i[1].substring(0,i[1].length-1);if("currency"===t&&n.indexOf(":")<0)r.currency||(r.currency=n.trim());else if("relativetime"===t&&n.indexOf(":")<0)r.range||(r.range=n.trim());else{n.split(";").forEach(e=>{if(e){const[t,...i]=e.split(":"),n=i.join(":").trim().replace(/^'+|'+$/g,""),o=t.trim();r[o]||(r[o]=n),"false"===n&&(r[o]=!1),"true"===n&&(r[o]=!0),isNaN(n)||(r[o]=parseInt(n,10))}})}}return{formatName:t,formatOptions:r}},createCachedFormatter=e=>{const t={};return(r,i,n)=>{let o=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(o={...o,[n.interpolationkey]:void 0});const a=i+JSON.stringify(o);let s=t[a];return s||(s=e(getCleanedCode(i),n),t[a]=s),s(r)}};class Formatter{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=e,this.formats={number:createCachedFormatter((e,t)=>{const r=new Intl.NumberFormat(e,{...t});return e=>r.format(e)}),currency:createCachedFormatter((e,t)=>{const r=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>r.format(e)}),datetime:createCachedFormatter((e,t)=>{const r=new Intl.DateTimeFormat(e,{...t});return e=>r.format(e)}),relativetime:createCachedFormatter((e,t)=>{const r=new Intl.RelativeTimeFormat(e,{...t});return e=>r.format(e,t.range||"day")}),list:createCachedFormatter((e,t)=>{const r=new Intl.ListFormat(e,{...t});return e=>r.format(e)})},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=createCachedFormatter(t)}format(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=t.split(this.formatSeparator);if(n.length>1&&n[0].indexOf("(")>1&&n[0].indexOf(")")<0&&n.find(e=>e.indexOf(")")>-1)){const e=n.findIndex(e=>e.indexOf(")")>-1);n[0]=[n[0],...n.splice(1,e)].join(this.formatSeparator)}return n.reduce((e,t)=>{const{formatName:n,formatOptions:o}=parseFormatStr(t);if(this.formats[n]){let t=e;try{const a=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},s=a.locale||a.lng||i.locale||i.lng||r;t=this.formats[n](e,s,{...o,...i,...a})}catch(a){this.logger.warn(a)}return t}return this.logger.warn(`there was no format function for ${n}`),e},e)}}const removePending=(e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)};class Connector extends EventEmitter$1{constructor(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,t,r,i){const n={},o={},a={},s={};return e.forEach(e=>{let i=!0;t.forEach(t=>{const a=`${e}|${t}`;!r.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===o[a]&&(o[a]=!0):(this.state[a]=1,i=!1,void 0===o[a]&&(o[a]=!0),void 0===n[a]&&(n[a]=!0),void 0===s[t]&&(s[t]=!0)))}),i||(a[e]=!0)}),(Object.keys(n).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(n),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(s)}}loaded(e,t,r){const i=e.split("|"),n=i[0],o=i[1];t&&this.emit("failedLoading",n,o,t),!t&&r&&this.store.addResourceBundle(n,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const a={};this.queue.forEach(r=>{pushPath(r.loaded,[n],o),removePending(r,e),t&&r.errors.push(t),0!==r.pendingCount||r.done||(Object.keys(r.loaded).forEach(e=>{a[e]||(a[e]={});const t=r.loaded[e];t.length&&t.forEach(t=>{void 0===a[e][t]&&(a[e][t]=!0)})}),r.done=!0,r.errors.length?r.callback(r.errors):r.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(e=>!e.done)}read(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:n,callback:o});this.readingCalls++;const a=(a,s)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&s&&i<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,r,i+1,2*n,o)},n):o(a,s)},s=this.backend[r].bind(this.backend);if(2!==s.length)return s(e,t,a);try{const r=s(e,t);r&&"function"==typeof r.then?r.then(e=>a(null,e)).catch(a):a(null,r)}catch(err){a(err)}}prepareLoading(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();isString(e)&&(e=this.languageUtils.toResolveHierarchy(e)),isString(t)&&(t=[t]);const n=this.queueLoad(e,t,r,i);if(!n.toLoad.length)return n.pending.length||i(),null;n.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e.split("|"),i=r[0],n=r[1];this.read(i,n,"read",void 0,void 0,(r,o)=>{r&&this.logger.warn(`${t}loading namespace ${n} for language ${i} failed`,r),!r&&o&&this.logger.log(`${t}loaded namespace ${n} for language ${i}`,o),this.loaded(e,r,o)})}saveMissing(e,t,r,i,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=r&&""!==r){if(this.backend&&this.backend.create){const s={...o,isUpdate:n},u=this.backend.create.bind(this.backend);if(u.length<6)try{let n;n=5===u.length?u(e,t,r,i,s):u(e,t,r,i),n&&"function"==typeof n.then?n.then(e=>a(null,e)).catch(a):a(null,n)}catch(err){a(err)}else u(e,t,r,i,a,s)}e&&e[0]&&this.store.addResource(e[0],t,r,i)}}}const get$1=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),isString(e[1])&&(t.defaultValue=e[1]),isString(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const r=e[3]||e[2];Object.keys(r).forEach(e=>{t[e]=r[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),transformOptions=e=>(isString(e.ns)&&(e.ns=[e.ns]),isString(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),isString(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),noop=()=>{},bindMemberFunctions=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(t=>{"function"==typeof e[t]&&(e[t]=e[t].bind(e))})};class I18n extends EventEmitter$1{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(e),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof t&&(r=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(isString(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=get$1();this.options={...i,...this.options,...transformOptions(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const n=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?baseLogger.init(n(this.modules.logger),this.options):baseLogger.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=Formatter);const r=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const o=this.services;o.logger=baseLogger,o.resourceStore=this.store,o.languageUtils=r,o.pluralResolver=new PluralResolver(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(o.formatter=n(t),o.formatter.init(o,this.options),this.options.interpolation.format=o.formatter.format.bind(o.formatter)),o.interpolator=new Interpolator(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new Connector(n(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];e.emit(t,...i)}),this.modules.languageDetector&&(o.languageDetector=n(this.modules.languageDetector),o.languageDetector.init&&o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=n(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];e.emit(t,...i)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,r||(r=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return e.store[t](...arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return e.store[t](...arguments),e}});const o=defer(),a=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(t),r(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?a():setTimeout(a,0),o}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:noop;const r=isString(e)?e:this.language;if("function"==typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],i=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(r)i(r);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>i(e))}this.options.preload&&this.options.preload.forEach(e=>i(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)})}else t(null)}reloadResources(e,t,r){const i=defer();return"function"==typeof e&&(r=e,e=void 0),"function"==typeof t&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=noop),this.services.backendConnector.reload(e,t,e=>{i.resolve(),r(e)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&postProcessor.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=defer();this.emit("languageChanging",e);const n=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},o=(e,o)=>{o?(n(o),this.translator.changeLanguage(o),this.isLanguageChangingTo=void 0,this.emit("languageChanged",o),this.logger.log("languageChanged",o)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),t&&t(e,function(){return r.t(...arguments)})},a=t=>{e||t||!this.services.languageDetector||(t=[]);const r=isString(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);r&&(this.language||n(r),this.translator.language||this.translator.changeLanguage(r),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(r)),this.loadResources(r,e=>{o(e,r)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),i}getFixedT(e,t,r){var i=this;const n=function(e,t){let o;if("object"!=typeof t){for(var a=arguments.length,s=new Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];o=i.options.overloadTranslationOptionHandler([e,t].concat(s))}else o={...t};o.lng=o.lng||n.lng,o.lngs=o.lngs||n.lngs,o.ns=o.ns||n.ns,""!==o.keyPrefix&&(o.keyPrefix=o.keyPrefix||r||n.keyPrefix);const l=i.options.keySeparator||".";let c;return c=o.keyPrefix&&Array.isArray(e)?e.map(e=>`${o.keyPrefix}${l}${e}`):o.keyPrefix?`${o.keyPrefix}${l}${e}`:e,i.t(c,o)};return isString(e)?n.lng=e:n.lngs=e,n.ns=t,n.keyPrefix=r,n}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,n=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;const o=(e,t)=>{const r=this.services.backendConnector.state[`${e}|${t}`];return-1===r||0===r||2===r};if(t.precheck){const e=t.precheck(this,o);if(void 0!==e)return e}return!!this.hasResourceBundle(r,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!o(r,e)||i&&!o(n,e)))}loadNamespaces(e,t){const r=defer();return this.options.ns?(isString(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=defer();isString(e)&&(e=[e]);const i=this.options.preload||[],n=e.filter(e=>i.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return n.length?(this.options.preload=i.concat(n),this.loadResources(e=>{r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new LanguageUtil(get$1());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new I18n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:noop;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},n=new I18n(i);void 0===e.debug&&void 0===e.prefix||(n.logger=n.logger.clone(e));return["store","services","language"].forEach(e=>{n[e]=this[e]}),n.services={...this.services},n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},r&&(n.store=new ResourceStore(this.store.data,i),n.services.resourceStore=n.store),n.translator=new Translator(n.services,i),n.translator.on("*",function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.emit(e,...r)}),n.init(i,t),n.translator.options=i,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance$1=I18n.createInstance();instance$1.createInstance=I18n.createInstance,instance$1.createInstance,instance$1.dir,instance$1.init,instance$1.loadResources,instance$1.reloadResources,instance$1.use,instance$1.changeLanguage,instance$1.getFixedT,instance$1.t,instance$1.exists,instance$1.setDefaultNamespace,instance$1.hasLoadedNamespace,instance$1.loadNamespaces,instance$1.loadLanguages;var modal={"adapter-loader.message":"Verify your {{adapter}} account to continue","adapter-loader.message1":"Verify your {{adapter}}","adapter-loader.message2":"account to continue","errors-invalid-email":"Invalid Email","errors-invalid-number":"Invalid Phone Number","errors-invalid-number-email":"Invalid Email or Phone Number","errors-required":"Required","external.back":"Back","external.connect":"Continue with a wallet","external.search-text":"Don't see your wallet?","external.search-subtext":"Try search instead","external.connect-wallet":"Connect Wallet","external.continue":"Continue with external wallet","external.dont-have":"Don't have","external.get":"Get","external.get-wallet":"Get Wallet","external.install-browser-extension":"Install {{browser}} extension","external.install-mobile-app":"Install {{os}} app","external.installed":"Installed","external.no-wallets-found":"No wallets found","external.search-wallet":"Search through {{count}} wallets...","external.title":"External Wallet","external.walletconnect-connect":"Connect","external.walletconnect-copy":"Scan with a WalletConnect-supported wallet or click the QR code to copy to your clipboard.","external.walletconnect-subtitle":"Scan the QR code with a WalletConnect-compatible wallet","footer.message":"Self-custodial login by","footer.message-new":"Self-custody via","footer.policy":"Privacy Policy","footer.terms":"Terms of Use","footer.terms-service":"Terms of Service","footer.version":"Version","header-subtitle":"Select one of the following options to continue","header-subtitle-name":"Your {{appName}} wallet with one click","header-subtitle-new":"Your blockchain wallet with one click","header-title":"Sign in","header-tooltip-desc":"The wallet serves as an account to store and manage your digital assets on the blockchain.","header-tooltip-title":"Wallet","network.add-request":"This site is requesting to add a network","network.cancel":"Cancel","network.from":"From","network.proceed":"Proceed","network.switch-request":"This site is requesting to switch networks","network.to":"To","passkey.add":"Add Passkey","passkey.haveExisting":"Have an existing passkey?","passkey.learn-more":"Learn more","passkey.or":"or","passkey.register-desc":"With passkeys, you can verify your identity through your face, fingerprint, or security keys.","passkey.register-title":"Register Passkey","passkey.use":"I have a passkey","popup.phone-body":"Your country code will be detected automatically, but if you're using a phone number from a different country, you'll need to enter the correct country code manually.","popup.phone-header":"Phone number and country code","post-loading.connected":"You are connected with your account","post-loading.something-wrong":"Something went wrong!","social.continue":"Continue with","social.continueCustom":"Continue with {{adapter}}","social.email":"Email","social.email-continue":"Continue with Email","social.email-new":"name@example.com","social.passwordless-cta":"Continue","social.passwordless-login":"Login","social.passwordless-title":"Email or Phone","social.phone":"Phone","social.policy":"We do not store any data related to your social logins.","social.sms":"Mobile","social.sms-continue":"Continue with Mobile","social.sms-invalid-number":"Invalid phone number","social.sms-placeholder-text":"E.g.:","social.view-less":"View less","social.view-less-socials":"View less socials","social.view-more":"View more","social.view-more-socials":"View more socials"},en={modal:modal};const english_json=Object.freeze(Object.defineProperty({__proto__:null,default:en,modal:modal},Symbol.toStringTag,{value:"Module"})),i18nInstance=instance$1.createInstance();i18nInstance.use(initReactI18next).init({resources:{en:{translation:en}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1},debug:!1,react:{useSuspense:!0}});var ArrowDark="data:image/svg+xml,%3Csvg%20width%3D%2220%22%20height%3D%2220%22%20viewBox%3D%220%200%2020%2020%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8.33333%2015.8333L2.5%209.99992M2.5%209.99992L8.33333%204.16659M2.5%209.99992L17.5%209.99992%22%20stroke%3D%22%239CA3AF%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3C%2Fsvg%3E",ArrowLight="data:image/svg+xml,%3Csvg%20width%3D%2220%22%20height%3D%2220%22%20viewBox%3D%220%200%2020%2020%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8.33333%2015.8333L2.5%209.99995M2.5%209.99995L8.33333%204.16662M2.5%209.99995L17.5%209.99995%22%20stroke%3D%22%236B7280%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3C%2Fsvg%3E",XDark="data:image/svg+xml,%3Csvg%20width%3D%2213%22%20height%3D%2213%22%20viewBox%3D%220%200%2013%2013%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M0.292787%201.29299C0.480314%201.10552%200.734622%201.0002%200.999786%201.0002C1.26495%201.0002%201.51926%201.10552%201.70679%201.29299L5.99979%205.58599L10.2928%201.29299C10.385%201.19748%2010.4954%201.1213%2010.6174%201.06889C10.7394%201.01648%2010.8706%200.988893%2011.0034%200.987739C11.1362%200.986585%2011.2678%201.01189%2011.3907%201.06217C11.5136%201.11245%2011.6253%201.1867%2011.7192%201.28059C11.8131%201.37449%2011.8873%201.48614%2011.9376%201.60904C11.9879%201.73193%2012.0132%201.86361%2012.012%201.99639C12.0109%202.12917%2011.9833%202.26039%2011.9309%202.38239C11.8785%202.5044%2011.8023%202.61474%2011.7068%202.70699L7.41379%206.99999L11.7068%2011.293C11.8889%2011.4816%2011.9897%2011.7342%2011.9875%2011.9964C11.9852%2012.2586%2011.88%2012.5094%2011.6946%2012.6948C11.5092%2012.8802%2011.2584%2012.9854%2010.9962%2012.9877C10.734%2012.9899%2010.4814%2012.8891%2010.2928%2012.707L5.99979%208.41399L1.70679%2012.707C1.51818%2012.8891%201.26558%2012.9899%201.00339%2012.9877C0.741188%2012.9854%200.490376%2012.8802%200.304968%2012.6948C0.11956%2012.5094%200.0143906%2012.2586%200.0121121%2011.9964C0.00983372%2011.7342%200.110629%2011.4816%200.292787%2011.293L4.58579%206.99999L0.292787%202.70699C0.105316%202.51946%200%202.26515%200%201.99999C0%201.73483%200.105316%201.48052%200.292787%201.29299V1.29299Z%22%20fill%3D%22%239CA3AF%22%2F%3E%3C%2Fsvg%3E",XLight="data:image/svg+xml,%3Csvg%20width%3D%2213%22%20height%3D%2213%22%20viewBox%3D%220%200%2013%2013%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M0.292787%201.29299C0.480314%201.10552%200.734622%201.0002%200.999786%201.0002C1.26495%201.0002%201.51926%201.10552%201.70679%201.29299L5.99979%205.58599L10.2928%201.29299C10.385%201.19748%2010.4954%201.1213%2010.6174%201.06889C10.7394%201.01648%2010.8706%200.988893%2011.0034%200.987739C11.1362%200.986585%2011.2678%201.01189%2011.3907%201.06217C11.5136%201.11245%2011.6253%201.1867%2011.7192%201.28059C11.8131%201.37449%2011.8873%201.48614%2011.9376%201.60904C11.9879%201.73193%2012.0132%201.86361%2012.012%201.99639C12.0109%202.12917%2011.9833%202.26039%2011.9309%202.38239C11.8785%202.5044%2011.8023%202.61474%2011.7068%202.70699L7.41379%206.99999L11.7068%2011.293C11.8889%2011.4816%2011.9897%2011.7342%2011.9875%2011.9964C11.9852%2012.2586%2011.88%2012.5094%2011.6946%2012.6948C11.5092%2012.8802%2011.2584%2012.9854%2010.9962%2012.9877C10.734%2012.9899%2010.4814%2012.8891%2010.2928%2012.707L5.99979%208.41399L1.70679%2012.707C1.51818%2012.8891%201.26558%2012.9899%201.00339%2012.9877C0.741188%2012.9854%200.490376%2012.8802%200.304968%2012.6948C0.11956%2012.5094%200.0143906%2012.2586%200.0121121%2011.9964C0.00983372%2011.7342%200.110629%2011.4816%200.292787%2011.293L4.58579%206.99999L0.292787%202.70699C0.105316%202.51946%200%202.26515%200%201.99999C0%201.73483%200.105316%201.48052%200.292787%201.29299V1.29299Z%22%20fill%3D%22%236B7280%22%2F%3E%3C%2Fsvg%3E";const icons={"arrow-left":{image:"https://images.web3auth.io/circle-arrow-left.svg"},close:{image:"https://images.web3auth.io/close.svg"},"expand-light":{image:"https://images.web3auth.io/expand-light.svg"},expand:{image:"https://images.web3auth.io/expand.svg"},connected:{image:"https://images.web3auth.io/connected.svg"},"information-circle-light":{image:"https://images.web3auth.io/information-circle-light.svg"},"information-circle":{image:"https://images.web3auth.io/information-circle.svg"},"arrow-left-light":{image:ArrowLight},"x-light":{image:XLight},"arrow-left-dark":{image:ArrowDark},"x-dark":{image:XDark}};function Icon(e){const{iconName:t,iconTitle:r="",height:i="auto",width:n="auto",darkIconName:o=""}=e,a="auto"===i?"w3a--h-auto":`w3a--h-[${i}px]`,s="auto"===n?"w3a--w-auto":`w3a--w-[${n}px]`;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[icons[t]&&jsxRuntimeExports.jsx("img",{className:`${r?"w3a--cursor-pointer":""} dark:w3a--hidden w3a--block ${a} ${s}`,height:i,width:n,src:icons[t].image,alt:t,title:r}),icons[o]&&jsxRuntimeExports.jsx("img",{className:`${r?"w3a--cursor-pointer":""} w3a--hidden dark:w3a--block ${a} ${s}`,height:i,width:n,src:icons[o].image,alt:o,title:r})]})}const ThemedContext=reactExports.createContext({isDark:!0});function Image$1(e){const{hoverImageId:t,darkHoverImageId:r,imageId:i,darkImageId:n,isButton:o=!1,height:a="auto",width:s="auto",fallbackImageId:u,extension:l="svg"}=e,{isDark:c}=reactExports.useContext(ThemedContext),h=c&&n?n:i,d=c&&r?r:t;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{src:`https://images.web3auth.io/${h}.${l}`,height:a,width:s,alt:i,className:"image-icon w3a--object-contain w3a--rounded",onError:({currentTarget:e})=>{u&&(e.onerror=null,e.src=`https://images.web3auth.io/${u}.svg`)}}),o?jsxRuntimeExports.jsx("img",{src:`https://images.web3auth.io/${d}.${l}`,height:a,width:s,alt:t,className:"hover-icon w3a--object-contain w3a--rounded"}):null]})}const closeIcon$1=jsxRuntimeExports.jsx(Icon,{iconName:"x-light",darkIconName:"close"});function DetailedLoader(e){const{adapter:t,appLogo:r,message:i,modalStatus:n,adapterName:o,onClose:a}=e,s="twitter"===t?jsxRuntimeExports.jsx(Image$1,{imageId:"login-x-dark"}):jsxRuntimeExports.jsx(Image$1,{imageId:`login-${t}`,height:"30",width:"30"}),[u]=useTranslation(void 0,{i18n:i18nInstance});return reactExports.useEffect(()=>{loglevel$3.debug("adapter loader re-rendering"),n===MODAL_STATUS.CONNECTED&&setTimeout(()=>{a()},3e3)},[n,a]),n!==MODAL_STATUS.INITIALIZED?jsxRuntimeExports.jsxs("div",{className:"w3ajs-modal-loader w3a-modal__loader w3a--h-full",children:[jsxRuntimeExports.jsx("div",{className:"w3a-modal__loader-content",children:jsxRuntimeExports.jsxs("div",{className:"w3a-modal__loader-info",children:[n===MODAL_STATUS.CONNECTING&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"w3a-modal__loader-bridge",children:[jsxRuntimeExports.jsxs("div",{className:"w3a-modal__loader-app-logo",children:[jsxRuntimeExports.jsx("img",{src:r,className:"w3a--block dark:w3a--hidden w3a--h-10 w3a--w-10",alt:""}),jsxRuntimeExports.jsx("img",{src:r,className:"w3a--hidden dark:w3a--block w3a--h-10 w3a--w-10",alt:""})]}),jsxRuntimeExports.jsx("div",{className:"w3a-modal__connector",children:jsxRuntimeExports.jsxs("div",{className:"w3a-modal__connector-beat",children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{})]})}),jsxRuntimeExports.jsx("div",{className:"w3a-modal__loader-social-logo",children:s})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"w3a-modal__loader-bridge-message",children:u("modal.adapter-loader.message1",{adapter:o})}),jsxRuntimeExports.jsx("div",{className:"w3a-modal__loader-bridge-message",children:u("modal.adapter-loader.message2",{adapter:o})})]})]}),n===ADAPTER_STATUS$1.CONNECTED&&jsxRuntimeExports.jsxs("div",{className:"w3a--flex w3a--flex-col w3a--items-center",children:[jsxRuntimeExports.jsx(Icon,{iconName:"connected"}),jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message w3a--mt-4",children:i})]}),n===ADAPTER_STATUS$1.ERRORED&&jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message w3a-spinner-message--error",children:i})]})}),(n===ADAPTER_STATUS$1.CONNECTED||n===ADAPTER_STATUS$1.ERRORED)&&jsxRuntimeExports.jsx("button",{type:"button",className:"w3a-header__button w3ajs-loader-close-btn",onClick:a,children:closeIcon$1})]}):null}var css_248z=".w3a-parent-container #w3a-modal button.t-btn,.w3a-parent-container a.t-btn{align-items:center;display:flex;justify-content:center;transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:linear}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):disabled,.w3a-parent-container a.t-btn:not(.t-btn-text):disabled{background-color:var(--app-gray-300);border-width:0;color:var(--app-gray-400)}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):hover:disabled,.w3a-parent-container a.t-btn:not(.t-btn-text):hover:disabled{background-color:var(--app-gray-300);border-color:var(--app-gray-300);color:var(--app-gray-400)}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):active:disabled,.w3a-parent-container a.t-btn:not(.t-btn-text):active:disabled{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-offset-width:0px;background-color:var(--app-gray-300);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000);outline-width:0}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):disabled:is(.w3a--dark *),.w3a-parent-container a.t-btn:not(.t-btn-text):disabled:is(.w3a--dark *){background-color:var(--app-gray-700);color:var(--app-gray-600)}.w3a-parent-container #w3a-modal .size-xs{font-size:.75rem;height:32px;line-height:1rem;padding:.5rem .75rem}.w3a-parent-container #w3a-modal .size-sm{font-size:.875rem;height:36px;line-height:1.25rem;padding:.5rem .75rem}.w3a-parent-container #w3a-modal .size-md{font-size:.875rem;height:42px;line-height:1.25rem;padding:.625rem 1.25rem}.w3a-parent-container #w3a-modal .size-lg{font-size:1rem;height:48px;line-height:1.5rem;padding:.75rem 1.25rem}.w3a-parent-container #w3a-modal .size-xl{font-size:1rem;height:52px;line-height:1.5rem;padding:.875rem 1rem}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary{background-color:var(--app-primary-600);color:var(--app-on-primary);outline:2px solid #0000;outline-offset:2px}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:hover{background-color:var(--app-primary-700)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:focus-visible{outline-color:var(--app-primary-600);outline-offset:1px;outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:active{background-color:var(--app-primary-600);outline-color:var(--app-primary-600);outline-offset:1px;outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:is(.w3a--dark *){background-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:hover:is(.w3a--dark *){background-color:var(--app-primary-400)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:focus-visible:is(.w3a--dark *){outline-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:active:is(.w3a--dark *){background-color:var(--app-primary-500);outline-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary{background-color:initial;border-color:var(--app-gray-500);border-width:1px;color:var(--app-gray-600);outline:2px solid #0000;outline-offset:2px}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:hover{background-color:var(--app-gray-200)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);background-color:initial;border-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:active{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);background-color:initial;border-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:is(.w3a--dark *){border-color:var(--app-gray-300);color:var(--app-white)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:hover:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:focus-visible:is(.w3a--dark *){--tw-ring-color:var(--app-primary-500);background-color:initial;border-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:active:is(.w3a--dark *){--tw-ring-color:var(--app-primary-500);background-color:initial;border-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary{background-color:var(--app-gray-200);color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:hover{background-color:var(--app-gray-300)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:active{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);background-color:var(--app-gray-200);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:is(.w3a--dark *){background-color:var(--app-gray-500);color:var(--app-white)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:hover:is(.w3a--dark *){background-color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:focus-visible:is(.w3a--dark *){--tw-ring-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:active:is(.w3a--dark *){--tw-ring-color:var(--app-primary-500);background-color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text{color:var(--app-primary-600)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:hover{color:var(--app-primary-800);text-decoration-line:underline}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:active{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000);color:var(--app-primary-600)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:disabled{color:var(--app-gray-400);text-decoration-line:none}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:is(.w3a--dark *){color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:hover:is(.w3a--dark *){color:var(--app-primary-400)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:disabled:is(.w3a--dark *){color:var(--app-gray-600)}.w3a-parent-container #w3a-modal .btn-link{text-decoration-line:none}.w3a-parent-container #w3a-modal button.t-btn:hover>.hover-icon{display:block;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal button.t-btn:hover>.image-icon{display:none;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}";function Button(e){const{variant:t="primary",onClick:r,children:i,title:n,className:o,style:a,size:s="md",disabled:u,type:l="button"}=e,c=`size-${s}`;return jsxRuntimeExports.jsx("button",{disabled:u,type:l,className:`t-btn t-btn-${t} w3a--rounded-full ${c} ${o}`,onClick:r,title:n,style:a,children:i})}styleInject(css_248z);var Button$1=reactExports.memo(Button);function ExternalWalletButton(e){const{button:t,handleWalletClick:r}=e,[i]=useTranslation(void 0,{i18n:i18nInstance});return jsxRuntimeExports.jsxs(Button$1,{variant:"tertiary",type:"button",onClick:()=>r(t),className:"w3a--w-full w3a--rounded-xl w3a--size-xl !w3a--justify-between w3a--items-center wallet-btn",title:t.name,children:[jsxRuntimeExports.jsxs("div",{className:"w3a--flex w3a--items-center",children:[jsxRuntimeExports.jsx(Image$1,{imageId:`login-${t.name}`,hoverImageId:`login-${t.name}`,fallbackImageId:"wallet",height:"24",width:"24",isButton:!0,extension:t.imgExtension}),jsxRuntimeExports.jsx("p",{className:"w3a--ml-2 w3a--text-left w3a--text-sm",children:t.displayName})]}),t.hasInjectedWallet&&jsxRuntimeExports.jsx("span",{className:"w3a--inline-flex w3a--items-center w3a--rounded-lg w3a--px-2 w3a--py-1 w3a--text-xs w3a--font-medium w3a--bg-app-primary-100 w3a--text-app-primary-800",children:i("modal.external.installed")})]})}const closeIcon=jsxRuntimeExports.jsx(Icon,{iconName:"close"});function Loader(e){const{message:t,modalStatus:r,label:i,onClose:n,canEmit:o=!0}=e;return reactExports.useEffect(()=>{loglevel$3.debug("loader re-rendering"),r===MODAL_STATUS.CONNECTED&&o&&setTimeout(()=>{n()},3e3)},[o,r,n]),r!==MODAL_STATUS.INITIALIZED?jsxRuntimeExports.jsxs("div",{className:"w3ajs-modal-loader w3a-modal__loader",children:[jsxRuntimeExports.jsx("div",{className:"w3a-modal__loader-content",children:jsxRuntimeExports.jsxs("div",{className:"w3a-modal__loader-info",children:[r===MODAL_STATUS.CONNECTING&&jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__spinner w3a-spinner",children:jsxRuntimeExports.jsx("div",{className:"w3a-spinner__spinner"})}),jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__label w3a-spinner-label",children:i}),r===ADAPTER_STATUS$1.CONNECTED&&jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message",children:t}),r===ADAPTER_STATUS$1.ERRORED&&jsxRuntimeExports.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message w3a-spinner-message--error",children:t})]})}),(r===ADAPTER_STATUS$1.CONNECTED||r===ADAPTER_STATUS$1.ERRORED)&&jsxRuntimeExports.jsx("button",{type:"button",className:"w3a-header__button w3ajs-loader-close-btn",onClick:n,children:closeIcon})]}):null}var toggleSelection,hasRequiredToggleSelection,copyToClipboard$1,hasRequiredCopyToClipboard;function requireToggleSelection(){return hasRequiredToggleSelection?toggleSelection:(hasRequiredToggleSelection=1,toggleSelection=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],i=0;i<e.rangeCount;i++)r.push(e.getRangeAt(i));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||r.forEach(function(t){e.addRange(t)}),t&&t.focus()}})}function requireCopyToClipboard(){if(hasRequiredCopyToClipboard)return copyToClipboard$1;hasRequiredCopyToClipboard=1;var e=requireToggleSelection(),t={"text/plain":"Text","text/html":"Url",default:"Text"};return copyToClipboard$1=function(r,i){var n,o,a,s,u,l=!1;i||(i={}),i.debug;try{if(o=e(),a=document.createRange(),s=document.getSelection(),(u=document.createElement("span")).textContent=r,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(e){if(e.stopPropagation(),i.format)if(e.preventDefault(),void 0===e.clipboardData){window.clipboardData.clearData();var n=t[i.format]||t.default;window.clipboardData.setData(n,r)}else e.clipboardData.clearData(),e.clipboardData.setData(i.format,r);i.onCopy&&(e.preventDefault(),i.onCopy(e.clipboardData))}),document.body.appendChild(u),a.selectNodeContents(u),s.addRange(a),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(err){try{window.clipboardData.setData(i.format||"text",r),i.onCopy&&i.onCopy(window.clipboardData),l=!0}catch(c){n=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in i?i.message:"Copy to clipboard: #{key}, Enter"),window.prompt(n,r)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(a):s.removeAllRanges()),u&&document.body.removeChild(u),o()}return l}}var copyToClipboardExports=requireCopyToClipboard();const copyToClipboard=getDefaultExportFromCjs$2(copyToClipboardExports);var dist={},lodash_isequal={exports:{}},hasRequiredLodash_isequal;function requireLodash_isequal(){return hasRequiredLodash_isequal||(hasRequiredLodash_isequal=1,function(e,t){var r="__lodash_hash_undefined__",i=9007199254740991,n="[object Arguments]",o="[object Array]",a="[object Boolean]",s="[object Date]",u="[object Error]",l="[object Function]",c="[object Map]",h="[object Number]",d="[object Object]",f="[object Promise]",p="[object RegExp]",m="[object Set]",g="[object String]",y="[object Symbol]",b="[object WeakMap]",w="[object ArrayBuffer]",v="[object DataView]",_=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[n]=S[o]=S[w]=S[a]=S[v]=S[s]=S[u]=S[l]=S[c]=S[h]=S[d]=S[p]=S[m]=S[g]=S[b]=!1;var A="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,M="object"==typeof self&&self&&self.Object===Object&&self,R=A||M||Function("return this")(),x=t&&!t.nodeType&&t,k=x&&e&&!e.nodeType&&e,T=k&&k.exports===x,P=T&&A.process,C=function(){try{return P&&P.binding&&P.binding("util")}catch(e){}}(),I=C&&C.isTypedArray;function $(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}function B(e){var t=-1,r=Array(e.size);return e.forEach(function(e,i){r[++t]=[i,e]}),r}function O(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var N,L,q,j=Array.prototype,U=Function.prototype,D=Object.prototype,F=R["__core-js_shared__"],W=U.toString,K=D.hasOwnProperty,H=(N=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+N:"",z=D.toString,V=RegExp("^"+W.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=T?R.Buffer:void 0,Y=R.Symbol,J=R.Uint8Array,Z=D.propertyIsEnumerable,X=j.splice,Q=Y?Y.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=G?G.isBuffer:void 0,re=(L=Object.keys,q=Object,function(e){return L(q(e))}),ie=Ce(R,"DataView"),ne=Ce(R,"Map"),oe=Ce(R,"Promise"),ae=Ce(R,"Set"),se=Ce(R,"WeakMap"),ue=Ce(Object,"create"),le=Oe(ie),ce=Oe(ne),he=Oe(oe),de=Oe(ae),fe=Oe(se),pe=Y?Y.prototype:void 0,me=pe?pe.valueOf:void 0;function ge(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function ye(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function be(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function we(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new be;++t<r;)this.add(e[t])}function ve(e){var t=this.__data__=new ye(e);this.size=t.size}function _e(e,t){var r=qe(e),i=!r&&Le(e),n=!r&&!i&&je(e),o=!r&&!i&&!n&&Ke(e),a=r||i||n||o,s=a?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],u=s.length;for(var l in e)!K.call(e,l)||a&&("length"==l||n&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Be(l,u))||s.push(l);return s}function Ee(e,t){for(var r=e.length;r--;)if(Ne(e[r][0],t))return r;return-1}function Se(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Q&&Q in Object(e)?function(e){var t=K.call(e,Q),r=e[Q];try{e[Q]=void 0;var i=!0}catch(o){}var n=z.call(e);i&&(t?e[Q]=r:delete e[Q]);return n}(e):function(e){return z.call(e)}(e)}function Ae(e){return We(e)&&Se(e)==n}function Me(e,t,r,i,l){return e===t||(null==e||null==t||!We(e)&&!We(t)?e!=e&&t!=t:function(e,t,r,i,l,f){var b=qe(e),_=qe(t),E=b?o:$e(e),S=_?o:$e(t),A=(E=E==n?d:E)==d,M=(S=S==n?d:S)==d,R=E==S;if(R&&je(e)){if(!je(t))return!1;b=!0,A=!1}if(R&&!A)return f||(f=new ve),b||Ke(e)?ke(e,t,r,i,l,f):function(e,t,r,i,n,o,l){switch(r){case v:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!o(new J(e),new J(t)));case a:case s:case h:return Ne(+e,+t);case u:return e.name==t.name&&e.message==t.message;case p:case g:return e==t+"";case c:var d=B;case m:var f=1&i;if(d||(d=O),e.size!=t.size&&!f)return!1;var b=l.get(e);if(b)return b==t;i|=2,l.set(e,t);var _=ke(d(e),d(t),i,n,o,l);return l.delete(e),_;case y:if(me)return me.call(e)==me.call(t)}return!1}(e,t,E,r,i,l,f);if(!(1&r)){var x=A&&K.call(e,"__wrapped__"),k=M&&K.call(t,"__wrapped__");if(x||k){var T=x?e.value():e,P=k?t.value():t;return f||(f=new ve),l(T,P,r,i,f)}}if(!R)return!1;return f||(f=new ve),function(e,t,r,i,n,o){var a=1&r,s=Te(e),u=s.length,l=Te(t),c=l.length;if(u!=c&&!a)return!1;var h=u;for(;h--;){var d=s[h];if(!(a?d in t:K.call(t,d)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);var m=a;for(;++h<u;){var g=e[d=s[h]],y=t[d];if(i)var b=a?i(y,g,d,t,e,o):i(g,y,d,e,t,o);if(!(void 0===b?g===y||n(g,y,r,i,o):b)){p=!1;break}m||(m="constructor"==d)}if(p&&!m){var w=e.constructor,v=t.constructor;w==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof v&&v instanceof v||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,r,i,l,f)}(e,t,r,i,Me,l))}function Re(e){return!(!Fe(e)||function(e){return!!H&&H in e}(e))&&(Ue(e)?V:_).test(Oe(e))}function xe(e){if(r=(t=e)&&t.constructor,i="function"==typeof r&&r.prototype||D,t!==i)return re(e);var t,r,i,n=[];for(var o in Object(e))K.call(e,o)&&"constructor"!=o&&n.push(o);return n}function ke(e,t,r,i,n,o){var a=1&r,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var c=-1,h=!0,d=2&r?new we:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var f=e[c],p=t[c];if(i)var m=a?i(p,f,c,t,e,o):i(f,p,c,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(d){if(!$(t,function(e,t){if(a=t,!d.has(a)&&(f===e||n(f,e,r,i,o)))return d.push(t);var a})){h=!1;break}}else if(f!==p&&!n(f,p,r,i,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Te(e){return function(e,t,r){var i=t(e);return qe(e)?i:function(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}(i,r(e))}(e,He,Ie)}function Pe(e,t){var r,i,n=e.__data__;return("string"==(i=typeof(r=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map}function Ce(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Re(r)?r:void 0}ge.prototype.clear=function(){this.__data__=ue?ue(null):{},this.size=0},ge.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ge.prototype.get=function(e){var t=this.__data__;if(ue){var i=t[e];return i===r?void 0:i}return K.call(t,e)?t[e]:void 0},ge.prototype.has=function(e){var t=this.__data__;return ue?void 0!==t[e]:K.call(t,e)},ge.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=ue&&void 0===t?r:t,this},ye.prototype.clear=function(){this.__data__=[],this.size=0},ye.prototype.delete=function(e){var t=this.__data__,r=Ee(t,e);return!(r<0)&&(r==t.length-1?t.pop():X.call(t,r,1),--this.size,!0)},ye.prototype.get=function(e){var t=this.__data__,r=Ee(t,e);return r<0?void 0:t[r][1]},ye.prototype.has=function(e){return Ee(this.__data__,e)>-1},ye.prototype.set=function(e,t){var r=this.__data__,i=Ee(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this},be.prototype.clear=function(){this.size=0,this.__data__={hash:new ge,map:new(ne||ye),string:new ge}},be.prototype.delete=function(e){var t=Pe(this,e).delete(e);return this.size-=t?1:0,t},be.prototype.get=function(e){return Pe(this,e).get(e)},be.prototype.has=function(e){return Pe(this,e).has(e)},be.prototype.set=function(e,t){var r=Pe(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this},we.prototype.add=we.prototype.push=function(e){return this.__data__.set(e,r),this},we.prototype.has=function(e){return this.__data__.has(e)},ve.prototype.clear=function(){this.__data__=new ye,this.size=0},ve.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ve.prototype.get=function(e){return this.__data__.get(e)},ve.prototype.has=function(e){return this.__data__.has(e)},ve.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ye){var i=r.__data__;if(!ne||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new be(i)}return r.set(e,t),this.size=r.size,this};var Ie=ee?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,i=null==e?0:e.length,n=0,o=[];++r<i;){var a=e[r];t(a,r,e)&&(o[n++]=a)}return o}(ee(e),function(t){return Z.call(e,t)}))}:function(){return[]},$e=Se;function Be(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||E.test(e))&&e>-1&&e%1==0&&e<t}function Oe(e){if(null!=e){try{return W.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ne(e,t){return e===t||e!=e&&t!=t}(ie&&$e(new ie(new ArrayBuffer(1)))!=v||ne&&$e(new ne)!=c||oe&&$e(oe.resolve())!=f||ae&&$e(new ae)!=m||se&&$e(new se)!=b)&&($e=function(e){var t=Se(e),r=t==d?e.constructor:void 0,i=r?Oe(r):"";if(i)switch(i){case le:return v;case ce:return c;case he:return f;case de:return m;case fe:return b}return t});var Le=Ae(function(){return arguments}())?Ae:function(e){return We(e)&&K.call(e,"callee")&&!Z.call(e,"callee")},qe=Array.isArray;var je=te||function(){return!1};function Ue(e){if(!Fe(e))return!1;var t=Se(e);return t==l||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function De(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Fe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function We(e){return null!=e&&"object"==typeof e}var Ke=I?function(e){return function(t){return e(t)}}(I):function(e){return We(e)&&De(e.length)&&!!S[Se(e)]};function He(e){return null!=(t=e)&&De(t.length)&&!Ue(t)?_e(e):xe(e);var t}e.exports=function(e,t){return Me(e,t)}}(lodash_isequal,lodash_isequal.exports)),lodash_isequal.exports}lodash_isequal.exports;var qrcode={exports:{}},hasRequiredQrcode,hasRequiredDist;function requireQrcode(){return hasRequiredQrcode||(hasRequiredQrcode=1,e=qrcode,t=function(){var e=function(e,t){var r=e,i=c[t],n=null,o=0,a=null,s=[],u={},l=function(e,t){n=function(e){for(var t=new Array(e),r=0;r<e;r+=1){t[r]=new Array(e);for(var i=0;i<e;i+=1)t[r][i]=null}return t}(o=4*r+17),h(0,0),h(o-7,0),h(0,o-7),f(),d(),m(e,t),r>=7&&p(e),null==a&&(a=y(r,i,s)),g(a,t)},h=function(e,t){for(var r=-1;r<=7;r+=1)if(!(e+r<=-1||o<=e+r))for(var i=-1;i<=7;i+=1)t+i<=-1||o<=t+i||(n[e+r][t+i]=0<=r&&r<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=i&&i<=4)},d=function(){for(var e=8;e<o-8;e+=1)null==n[e][6]&&(n[e][6]=e%2==0);for(var t=8;t<o-8;t+=1)null==n[6][t]&&(n[6][t]=t%2==0)},f=function(){for(var e=w.getPatternPosition(r),t=0;t<e.length;t+=1)for(var i=0;i<e.length;i+=1){var o=e[t],a=e[i];if(null==n[o][a])for(var s=-2;s<=2;s+=1)for(var u=-2;u<=2;u+=1)n[o+s][a+u]=-2==s||2==s||-2==u||2==u||0==s&&0==u}},p=function(e){for(var t=w.getBCHTypeNumber(r),i=0;i<18;i+=1){var a=!e&&1==(t>>i&1);n[Math.floor(i/3)][i%3+o-8-3]=a}for(i=0;i<18;i+=1)a=!e&&1==(t>>i&1),n[i%3+o-8-3][Math.floor(i/3)]=a},m=function(e,t){for(var r=i<<3|t,a=w.getBCHTypeInfo(r),s=0;s<15;s+=1){var u=!e&&1==(a>>s&1);s<6?n[s][8]=u:s<8?n[s+1][8]=u:n[o-15+s][8]=u}for(s=0;s<15;s+=1)u=!e&&1==(a>>s&1),s<8?n[8][o-s-1]=u:s<9?n[8][15-s-1+1]=u:n[8][15-s-1]=u;n[o-8][8]=!e},g=function(e,t){for(var r=-1,i=o-1,a=7,s=0,u=w.getMaskFunction(t),l=o-1;l>0;l-=2)for(6==l&&(l-=1);;){for(var c=0;c<2;c+=1)if(null==n[i][l-c]){var h=!1;s<e.length&&(h=1==(e[s]>>>a&1)),u(i,l-c)&&(h=!h),n[i][l-c]=h,-1==(a-=1)&&(s+=1,a=7)}if((i+=r)<0||o<=i){i-=r,r=-r;break}}},y=function(e,t,r){for(var i=E.getRSBlocks(e,t),n=S(),o=0;o<r.length;o+=1){var a=r[o];n.put(a.getMode(),4),n.put(a.getLength(),w.getLengthInBits(a.getMode(),e)),a.write(n)}var s=0;for(o=0;o<i.length;o+=1)s+=i[o].dataCount;if(n.getLengthInBits()>8*s)throw"code length overflow. ("+n.getLengthInBits()+">"+8*s+")";for(n.getLengthInBits()+4<=8*s&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*s||(n.put(236,8),n.getLengthInBits()>=8*s));)n.put(17,8);return function(e,t){for(var r=0,i=0,n=0,o=new Array(t.length),a=new Array(t.length),s=0;s<t.length;s+=1){var u=t[s].dataCount,l=t[s].totalCount-u;i=Math.max(i,u),n=Math.max(n,l),o[s]=new Array(u);for(var c=0;c<o[s].length;c+=1)o[s][c]=255&e.getBuffer()[c+r];r+=u;var h=w.getErrorCorrectPolynomial(l),d=_(o[s],h.getLength()-1).mod(h);for(a[s]=new Array(h.getLength()-1),c=0;c<a[s].length;c+=1){var f=c+d.getLength()-a[s].length;a[s][c]=f>=0?d.getAt(f):0}}var p=0;for(c=0;c<t.length;c+=1)p+=t[c].totalCount;var m=new Array(p),g=0;for(c=0;c<i;c+=1)for(s=0;s<t.length;s+=1)c<o[s].length&&(m[g]=o[s][c],g+=1);for(c=0;c<n;c+=1)for(s=0;s<t.length;s+=1)c<a[s].length&&(m[g]=a[s][c],g+=1);return m}(n,i)};u.addData=function(e,t){var r=null;switch(t=t||"Byte"){case"Numeric":r=A(e);break;case"Alphanumeric":r=M(e);break;case"Byte":r=R(e);break;case"Kanji":r=x(e);break;default:throw"mode:"+t}s.push(r),a=null},u.isDark=function(e,t){if(e<0||o<=e||t<0||o<=t)throw e+","+t;return n[e][t]},u.getModuleCount=function(){return o},u.make=function(){if(r<1){for(var e=1;e<40;e++){for(var t=E.getRSBlocks(e,i),n=S(),o=0;o<s.length;o++){var a=s[o];n.put(a.getMode(),4),n.put(a.getLength(),w.getLengthInBits(a.getMode(),e)),a.write(n)}var c=0;for(o=0;o<t.length;o++)c+=t[o].dataCount;if(n.getLengthInBits()<=8*c)break}r=e}l(!1,function(){for(var e=0,t=0,r=0;r<8;r+=1){l(!0,r);var i=w.getLostPoint(u);(0==r||e>i)&&(e=i,t=r)}return t}())},u.createTableTag=function(e,t){e=e||2;var r="";r+='<table style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: "+(t=void 0===t?4*e:t)+"px;",r+='">',r+="<tbody>";for(var i=0;i<u.getModuleCount();i+=1){r+="<tr>";for(var n=0;n<u.getModuleCount();n+=1)r+='<td style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: 0px;",r+=" width: "+e+"px;",r+=" height: "+e+"px;",r+=" background-color: ",r+=u.isDark(i,n)?"#000000":"#ffffff",r+=";",r+='"/>';r+="</tr>"}return r+="</tbody>",r+="</table>"},u.createSvgTag=function(e,t,r,i){var n={};"object"==typeof arguments[0]&&(e=(n=arguments[0]).cellSize,t=n.margin,r=n.alt,i=n.title),e=e||2,t=void 0===t?4*e:t,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-title":null;var o,a,s,l,c=u.getModuleCount()*e+2*t,h="";for(l="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",h+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',h+=n.scalable?"":' width="'+c+'px" height="'+c+'px"',h+=' viewBox="0 0 '+c+" "+c+'" ',h+=' preserveAspectRatio="xMinYMin meet"',h+=i.text||r.text?' role="img" aria-labelledby="'+b([i.id,r.id].join(" ").trim())+'"':"",h+=">",h+=i.text?'<title id="'+b(i.id)+'">'+b(i.text)+"</title>":"",h+=r.text?'<description id="'+b(r.id)+'">'+b(r.text)+"</description>":"",h+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',h+='<path d="',a=0;a<u.getModuleCount();a+=1)for(s=a*e+t,o=0;o<u.getModuleCount();o+=1)u.isDark(a,o)&&(h+="M"+(o*e+t)+","+s+l);return h+='" stroke="transparent" fill="black"/>',h+="</svg>"},u.createDataURL=function(e,t){e=e||2,t=void 0===t?4*e:t;var r=u.getModuleCount()*e+2*t,i=t,n=r-t;return P(r,r,function(t,r){if(i<=t&&t<n&&i<=r&&r<n){var o=Math.floor((t-i)/e),a=Math.floor((r-i)/e);return u.isDark(a,o)?0:1}return 1})},u.createImgTag=function(e,t,r){e=e||2,t=void 0===t?4*e:t;var i=u.getModuleCount()*e+2*t,n="";return n+="<img",n+=' src="',n+=u.createDataURL(e,t),n+='"',n+=' width="',n+=i,n+='"',n+=' height="',n+=i,n+='"',r&&(n+=' alt="',n+=b(r),n+='"'),n+="/>"};var b=function(e){for(var t="",r=0;r<e.length;r+=1){var i=e.charAt(r);switch(i){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=i}}return t};return u.createASCII=function(e,t){if((e=e||1)<2)return function(e){e=void 0===e?2:e;var t,r,i,n,o,a=1*u.getModuleCount()+2*e,s=e,l=a-e,c={"":""," ":""," ":"","  ":" "},h={"":""," ":""," ":" ","  ":" "},d="";for(t=0;t<a;t+=2){for(i=Math.floor((t-s)/1),n=Math.floor((t+1-s)/1),r=0;r<a;r+=1)o="",s<=r&&r<l&&s<=t&&t<l&&u.isDark(i,Math.floor((r-s)/1))&&(o=" "),s<=r&&r<l&&s<=t+1&&t+1<l&&u.isDark(n,Math.floor((r-s)/1))?o+=" ":o+="",d+=e<1&&t+1>=l?h[o]:c[o];d+="\n"}return a%2&&e>0?d.substring(0,d.length-a-1)+Array(a+1).join(""):d.substring(0,d.length-1)}(t);e-=1,t=void 0===t?2*e:t;var r,i,n,o,a=u.getModuleCount()*e+2*t,s=t,l=a-t,c=Array(e+1).join(""),h=Array(e+1).join("  "),d="",f="";for(r=0;r<a;r+=1){for(n=Math.floor((r-s)/e),f="",i=0;i<a;i+=1)o=1,s<=i&&i<l&&s<=r&&r<l&&u.isDark(n,Math.floor((i-s)/e))&&(o=0),f+=o?c:h;for(n=0;n<e;n+=1)d+=f+"\n"}return d.substring(0,d.length-1)},u.renderTo2dContext=function(e,t){t=t||2;for(var r=u.getModuleCount(),i=0;i<r;i++)for(var n=0;n<r;n++)e.fillStyle=u.isDark(i,n)?"black":"white",e.fillRect(i*t,n*t,t,t)},u};e.stringToBytes=(e.stringToBytesFuncs={default:function(e){for(var t=[],r=0;r<e.length;r+=1){var i=e.charCodeAt(r);t.push(255&i)}return t}}).default,e.createStringToBytes=function(e,t){var r=function(){for(var r=T(e),i=function(){var e=r.read();if(-1==e)throw"eof";return e},n=0,o={};;){var a=r.read();if(-1==a)break;var s=i(),u=i()<<8|i();o[String.fromCharCode(a<<8|s)]=u,n+=1}if(n!=t)throw n+" != "+t;return o}(),i="?".charCodeAt(0);return function(e){for(var t=[],n=0;n<e.length;n+=1){var o=e.charCodeAt(n);if(o<128)t.push(o);else{var a=r[e.charAt(n)];"number"==typeof a?(255&a)==a?t.push(a):(t.push(a>>>8),t.push(255&a)):t.push(i)}}return t}};var t,r,i,n,o,a=1,s=2,u=4,l=8,c={L:1,M:0,Q:3,H:2},h=0,d=1,f=2,p=3,m=4,g=5,y=6,b=7,w=(t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],r=1335,i=7973,o=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t},(n={}).getBCHTypeInfo=function(e){for(var t=e<<10;o(t)-o(r)>=0;)t^=r<<o(t)-o(r);return 21522^(e<<10|t)},n.getBCHTypeNumber=function(e){for(var t=e<<12;o(t)-o(i)>=0;)t^=i<<o(t)-o(i);return e<<12|t},n.getPatternPosition=function(e){return t[e-1]},n.getMaskFunction=function(e){switch(e){case h:return function(e,t){return(e+t)%2==0};case d:return function(e,t){return e%2==0};case f:return function(e,t){return t%3==0};case p:return function(e,t){return(e+t)%3==0};case m:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case g:return function(e,t){return e*t%2+e*t%3==0};case y:return function(e,t){return(e*t%2+e*t%3)%2==0};case b:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},n.getErrorCorrectPolynomial=function(e){for(var t=_([1],0),r=0;r<e;r+=1)t=t.multiply(_([1,v.gexp(r)],0));return t},n.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case a:return 10;case s:return 9;case u:case l:return 8;default:throw"mode:"+e}else if(t<27)switch(e){case a:return 12;case s:return 11;case u:return 16;case l:return 10;default:throw"mode:"+e}else{if(!(t<41))throw"type:"+t;switch(e){case a:return 14;case s:return 13;case u:return 16;case l:return 12;default:throw"mode:"+e}}},n.getLostPoint=function(e){for(var t=e.getModuleCount(),r=0,i=0;i<t;i+=1)for(var n=0;n<t;n+=1){for(var o=0,a=e.isDark(i,n),s=-1;s<=1;s+=1)if(!(i+s<0||t<=i+s))for(var u=-1;u<=1;u+=1)n+u<0||t<=n+u||0==s&&0==u||a==e.isDark(i+s,n+u)&&(o+=1);o>5&&(r+=3+o-5)}for(i=0;i<t-1;i+=1)for(n=0;n<t-1;n+=1){var l=0;e.isDark(i,n)&&(l+=1),e.isDark(i+1,n)&&(l+=1),e.isDark(i,n+1)&&(l+=1),e.isDark(i+1,n+1)&&(l+=1),0!=l&&4!=l||(r+=3)}for(i=0;i<t;i+=1)for(n=0;n<t-6;n+=1)e.isDark(i,n)&&!e.isDark(i,n+1)&&e.isDark(i,n+2)&&e.isDark(i,n+3)&&e.isDark(i,n+4)&&!e.isDark(i,n+5)&&e.isDark(i,n+6)&&(r+=40);for(n=0;n<t;n+=1)for(i=0;i<t-6;i+=1)e.isDark(i,n)&&!e.isDark(i+1,n)&&e.isDark(i+2,n)&&e.isDark(i+3,n)&&e.isDark(i+4,n)&&!e.isDark(i+5,n)&&e.isDark(i+6,n)&&(r+=40);var c=0;for(n=0;n<t;n+=1)for(i=0;i<t;i+=1)e.isDark(i,n)&&(c+=1);return r+=Math.abs(100*c/t/t-50)/5*10},n),v=function(){for(var e=new Array(256),t=new Array(256),r=0;r<8;r+=1)e[r]=1<<r;for(r=8;r<256;r+=1)e[r]=e[r-4]^e[r-5]^e[r-6]^e[r-8];for(r=0;r<255;r+=1)t[e[r]]=r;var i={glog:function(e){if(e<1)throw"glog("+e+")";return t[e]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]}};return i}();function _(e,t){if(void 0===e.length)throw e.length+"/"+t;var r=function(){for(var r=0;r<e.length&&0==e[r];)r+=1;for(var i=new Array(e.length-r+t),n=0;n<e.length-r;n+=1)i[n]=e[n+r];return i}(),i={getAt:function(e){return r[e]},getLength:function(){return r.length},multiply:function(e){for(var t=new Array(i.getLength()+e.getLength()-1),r=0;r<i.getLength();r+=1)for(var n=0;n<e.getLength();n+=1)t[r+n]^=v.gexp(v.glog(i.getAt(r))+v.glog(e.getAt(n)));return _(t,0)},mod:function(e){if(i.getLength()-e.getLength()<0)return i;for(var t=v.glog(i.getAt(0))-v.glog(e.getAt(0)),r=new Array(i.getLength()),n=0;n<i.getLength();n+=1)r[n]=i.getAt(n);for(n=0;n<e.getLength();n+=1)r[n]^=v.gexp(v.glog(e.getAt(n))+t);return _(r,0).mod(e)}};return i}var E=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var r={};return r.totalCount=e,r.dataCount=t,r},r={getRSBlocks:function(r,i){var n=function(t,r){switch(r){case c.L:return e[4*(t-1)+0];case c.M:return e[4*(t-1)+1];case c.Q:return e[4*(t-1)+2];case c.H:return e[4*(t-1)+3];default:return}}(r,i);if(void 0===n)throw"bad rs block @ typeNumber:"+r+"/errorCorrectionLevel:"+i;for(var o=n.length/3,a=[],s=0;s<o;s+=1)for(var u=n[3*s+0],l=n[3*s+1],h=n[3*s+2],d=0;d<u;d+=1)a.push(t(l,h));return a}};return r}(),S=function(){var e=[],t=0,r={getBuffer:function(){return e},getAt:function(t){var r=Math.floor(t/8);return 1==(e[r]>>>7-t%8&1)},put:function(e,t){for(var i=0;i<t;i+=1)r.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return t},putBit:function(r){var i=Math.floor(t/8);e.length<=i&&e.push(0),r&&(e[i]|=128>>>t%8),t+=1}};return r},A=function(e){var t=a,r=e,i={getMode:function(){return t},getLength:function(e){return r.length},write:function(e){for(var t=r,i=0;i+2<t.length;)e.put(n(t.substring(i,i+3)),10),i+=3;i<t.length&&(t.length-i==1?e.put(n(t.substring(i,i+1)),4):t.length-i==2&&e.put(n(t.substring(i,i+2)),7))}},n=function(e){for(var t=0,r=0;r<e.length;r+=1)t=10*t+o(e.charAt(r));return t},o=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+e};return i},M=function(e){var t=s,r=e,i={getMode:function(){return t},getLength:function(e){return r.length},write:function(e){for(var t=r,i=0;i+1<t.length;)e.put(45*n(t.charAt(i))+n(t.charAt(i+1)),11),i+=2;i<t.length&&e.put(n(t.charAt(i)),6)}},n=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);if("A"<=e&&e<="Z")return e.charCodeAt(0)-"A".charCodeAt(0)+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return i},R=function(t){var r=u,i=e.stringToBytes(t),n={getMode:function(){return r},getLength:function(e){return i.length},write:function(e){for(var t=0;t<i.length;t+=1)e.put(i[t],8)}};return n},x=function(t){var r=l,i=e.stringToBytesFuncs.SJIS;if(!i)throw"sjis not supported.";!function(){var e=i("");if(2!=e.length||38726!=(e[0]<<8|e[1]))throw"sjis not supported."}();var n=i(t),o={getMode:function(){return r},getLength:function(e){return~~(n.length/2)},write:function(e){for(var t=n,r=0;r+1<t.length;){var i=(255&t[r])<<8|255&t[r+1];if(33088<=i&&i<=40956)i-=33088;else{if(!(57408<=i&&i<=60351))throw"illegal char at "+(r+1)+"/"+i;i-=49472}i=192*(i>>>8&255)+(255&i),e.put(i,13),r+=2}if(r<t.length)throw"illegal char at "+(r+1)}};return o},k=function(){var e=[],t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,r,i){r=r||0,i=i||e.length;for(var n=0;n<i;n+=1)t.writeByte(e[n+r])},writeString:function(e){for(var r=0;r<e.length;r+=1)t.writeByte(e.charCodeAt(r))},toByteArray:function(){return e},toString:function(){var t="";t+="[";for(var r=0;r<e.length;r+=1)r>0&&(t+=","),t+=e[r];return t+="]"}};return t},T=function(e){var t=e,r=0,i=0,n=0,o={read:function(){for(;n<8;){if(r>=t.length){if(0==n)return-1;throw"unexpected end of file./"+n}var e=t.charAt(r);if(r+=1,"="==e)return n=0,-1;e.match(/^\s$/)||(i=i<<6|a(e.charCodeAt(0)),n+=6)}var o=i>>>n-8&255;return n-=8,o}},a=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw"c:"+e};return o},P=function(e,t,r){for(var i=function(e,t){var r=e,i=t,n=new Array(e*t),o={setPixel:function(e,t,i){n[t*r+e]=i},write:function(e){e.writeString("GIF87a"),e.writeShort(r),e.writeShort(i),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(r),e.writeShort(i),e.writeByte(0);var t=a(2);e.writeByte(2);for(var n=0;t.length-n>255;)e.writeByte(255),e.writeBytes(t,n,255),n+=255;e.writeByte(t.length-n),e.writeBytes(t,n,t.length-n),e.writeByte(0),e.writeString(";")}},a=function(e){for(var t=1<<e,r=1+(1<<e),i=e+1,o=s(),a=0;a<t;a+=1)o.add(String.fromCharCode(a));o.add(String.fromCharCode(t)),o.add(String.fromCharCode(r));var u,l,c,h=k(),d=(u=h,l=0,c=0,{write:function(e,t){if(e>>>t!=0)throw"length over";for(;l+t>=8;)u.writeByte(255&(e<<l|c)),t-=8-l,e>>>=8-l,c=0,l=0;c|=e<<l,l+=t},flush:function(){l>0&&u.writeByte(c)}});d.write(t,i);var f=0,p=String.fromCharCode(n[f]);for(f+=1;f<n.length;){var m=String.fromCharCode(n[f]);f+=1,o.contains(p+m)?p+=m:(d.write(o.indexOf(p),i),o.size()<4095&&(o.size()==1<<i&&(i+=1),o.add(p+m)),p=m)}return d.write(o.indexOf(p),i),d.write(r,i),d.flush(),h.toByteArray()},s=function(){var e={},t=0,r={add:function(i){if(r.contains(i))throw"dup key:"+i;e[i]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return r};return o}(e,t),n=0;n<t;n+=1)for(var o=0;o<e;o+=1)i.setPixel(o,n,r(o,n));var a=k();i.write(a);for(var s=function(){var e=0,t=0,r=0,i="",n={},o=function(e){i+=String.fromCharCode(a(63&e))},a=function(e){if(e<0);else{if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(62==e)return 43;if(63==e)return 47}throw"n:"+e};return n.writeByte=function(i){for(e=e<<8|255&i,t+=8,r+=1;t>=6;)o(e>>>t-6),t-=6},n.flush=function(){if(t>0&&(o(e<<6-t),e=0,t=0),r%3!=0)for(var n=3-r%3,a=0;a<n;a+=1)i+="="},n.toString=function(){return i},n}(),u=a.toByteArray(),l=0;l<u.length;l+=1)s.writeByte(u[l]);return s.flush(),"data:image/gif;base64,"+s};return e}(),t.stringToBytesFuncs["UTF-8"]=function(e){return function(e){for(var t=[],r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t.push(i):i<2048?t.push(192|i>>6,128|63&i):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|63&i):(r++,i=65536+((1023&i)<<10|1023&e.charCodeAt(r)),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return t}(e)},e.exports=t),qrcode.exports;var e,t}function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1;var e=dist&&dist.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),t=dist&&dist.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},t.apply(this,arguments)};Object.defineProperty(dist,"__esModule",{value:!0}),dist.QRCode=void 0;var r=requireLodash_isequal(),i=requireQrcode(),n=requireReact(),o=function(o){function a(e){var t=o.call(this,e)||this;return t.canvasRef=n.createRef(),t}return e(a,o),a.prototype.download=function(e,t){if(this.canvasRef.current){var r=void 0;switch(e){case"jpg":r="image/jpeg";break;case"webp":r="image/webp";break;default:r="image/png"}var i=this.canvasRef.current.toDataURL(r,1),n=document.createElement("a");n.download=null!=t?t:"react-qrcode-logo",n.href=i,n.click()}},a.prototype.utf16to8=function(e){var t,r,i="",n=e.length;for(t=0;t<n;t++)(r=e.charCodeAt(t))>=1&&r<=127?i+=e.charAt(t):r>2047?(i+=String.fromCharCode(224|r>>12&15),i+=String.fromCharCode(128|r>>6&63),i+=String.fromCharCode(128|63&r)):(i+=String.fromCharCode(192|r>>6&31),i+=String.fromCharCode(128|63&r));return i},a.prototype.drawRoundedSquare=function(e,t,r,i,n,o,a,s){s.lineWidth=e,s.fillStyle=n,s.strokeStyle=n,r+=e/2,t+=e/2,i-=e,Array.isArray(o)||(o=[o,o,o,o]);var u=(o=o.map(function(e){return(e=Math.min(e,i/2))<0?0:e}))[0]||0,l=o[1]||0,c=o[2]||0,h=o[3]||0;s.beginPath(),s.moveTo(t+u,r),s.lineTo(t+i-l,r),l&&s.quadraticCurveTo(t+i,r,t+i,r+l),s.lineTo(t+i,r+i-c),c&&s.quadraticCurveTo(t+i,r+i,t+i-c,r+i),s.lineTo(t+h,r+i),h&&s.quadraticCurveTo(t,r+i,t,r+i-h),s.lineTo(t,r+u),u&&s.quadraticCurveTo(t,r,t+u,r),s.closePath(),s.stroke(),a&&s.fill()},a.prototype.drawPositioningPattern=function(e,t,r,i,n,o,a){void 0===a&&(a=[0,0,0,0]);var s,u,l,c,h=Math.ceil(t);"number"==typeof a||Array.isArray(a)?u=s=a:(s=a.outer||0,u=a.inner||0),"string"!=typeof o?(l=o.outer,c=o.inner):(l=o,c=o);var d=i*t+r,f=n*t+r,p=7*t;this.drawRoundedSquare(h,f,d,p,l,s,!1,e),p=3*t,d+=2*t,f+=2*t,this.drawRoundedSquare(h,f,d,p,c,u,!0,e)},a.prototype.isInPositioninZone=function(e,t,r){return r.some(function(r){return t>=r.row&&t<=r.row+7&&e>=r.col&&e<=r.col+7})},a.prototype.transformPixelLengthIntoNumberOfCells=function(e,t){return e/t},a.prototype.isCoordinateInImage=function(e,t,r,i,n,o,a,s){if(s){var u=this.transformPixelLengthIntoNumberOfCells(n,a),l=this.transformPixelLengthIntoNumberOfCells(o,a),c=this.transformPixelLengthIntoNumberOfCells(r,a)-1,h=this.transformPixelLengthIntoNumberOfCells(i,a)-1;return t>=u-2&&t<=u+c+2&&e>=l-2&&e<=l+h+2}return!1},a.prototype.shouldComponentUpdate=function(e){return!r(this.props,e)},a.prototype.componentDidMount=function(){this.update()},a.prototype.componentDidUpdate=function(){this.update()},a.prototype.update=function(){var e,t=this.props,r=t.value,n=t.ecLevel,o=t.enableCORS,a=t.bgColor,s=t.fgColor,u=t.logoImage,l=t.logoOpacity,c=t.logoOnLoad,h=t.removeQrCodeBehindLogo,d=t.qrStyle,f=t.eyeRadius,p=t.eyeColor,m=t.logoPaddingStyle,g=+this.props.size,y=+this.props.quietZone,b=this.props.logoWidth?+this.props.logoWidth:0,w=this.props.logoHeight?+this.props.logoHeight:0,v=this.props.logoPadding?+this.props.logoPadding:0,_=i(0,n);_.addData(this.utf16to8(r)),_.make();var E=null===(e=this.canvasRef)||void 0===e?void 0:e.current,S=E.getContext("2d"),A=g+2*y,M=_.getModuleCount(),R=g/M,x=window.devicePixelRatio||1;E.height=E.width=A*x,S.scale(x,x),S.fillStyle=a,S.fillRect(0,0,A,A);var k=y,T=[{row:0,col:0},{row:0,col:M-7},{row:M-7,col:0}];if(S.strokeStyle=s,"dots"===d){S.fillStyle=s;for(var P=R/2,C=0;C<M;C++)for(var I=0;I<M;I++)_.isDark(C,I)&&!this.isInPositioninZone(C,I,T)&&(S.beginPath(),S.arc(Math.round(I*R)+P+k,Math.round(C*R)+P+k,P/100*75,0,2*Math.PI,!1),S.closePath(),S.fill())}else if("fluid"===d){for(P=Math.ceil(R/2),C=0;C<M;C++)for(I=0;I<M;I++)if(_.isDark(C,I)&&!this.isInPositioninZone(C,I,T)){var $=[!1,!1,!1,!1];C>0&&!_.isDark(C-1,I)&&I>0&&!_.isDark(C,I-1)&&($[0]=!0),C>0&&!_.isDark(C-1,I)&&I<M-1&&!_.isDark(C,I+1)&&($[1]=!0),C<M-1&&!_.isDark(C+1,I)&&I<M-1&&!_.isDark(C,I+1)&&($[2]=!0),C<M-1&&!_.isDark(C+1,I)&&I>0&&!_.isDark(C,I-1)&&($[3]=!0);var B=Math.ceil((I+1)*R)-Math.floor(I*R),O=Math.ceil((C+1)*R)-Math.floor(C*R);S.fillStyle=s,S.beginPath(),S.arc(Math.round(I*R)+P+k,Math.round(C*R)+P+k,P,0,2*Math.PI,!1),S.closePath(),S.fill(),$[0]||S.fillRect(Math.round(I*R)+k,Math.round(C*R)+k,B/2,O/2),$[1]||S.fillRect(Math.round(I*R)+k+Math.floor(B/2),Math.round(C*R)+k,B/2,O/2),$[2]||S.fillRect(Math.round(I*R)+k+Math.floor(B/2),Math.round(C*R)+k+Math.floor(O/2),B/2,O/2),$[3]||S.fillRect(Math.round(I*R)+k,Math.round(C*R)+k+Math.floor(O/2),B/2,O/2)}}else for(C=0;C<M;C++)for(I=0;I<M;I++)if(_.isDark(C,I)&&!this.isInPositioninZone(C,I,T)){S.fillStyle=s;B=Math.ceil((I+1)*R)-Math.floor(I*R),O=Math.ceil((C+1)*R)-Math.floor(C*R);S.fillRect(Math.round(I*R)+k,Math.round(C*R)+k,B,O)}for(var N=0;N<3;N++){var L=T[N],q=(C=L.row,I=L.col,f),j=void 0;Array.isArray(q)&&(q=q[N]),"number"==typeof q&&(q=[q,q,q,q]),j=p?Array.isArray(p)?p[N]:p:s,this.drawPositioningPattern(S,R,k,C,I,j,q)}if(u){var U=new Image;o&&(U.crossOrigin="Anonymous"),U.onload=function(e){S.save();var t=b||.2*g,r=w||t,i=(g-t)/2,n=(g-r)/2;if(h||v){S.beginPath(),S.strokeStyle=a,S.fillStyle=a;var o=t+2*v,s=r+2*v,u=i+k-v,d=n+k-v;if("circle"===m){var f=u+o/2,p=d+s/2;S.ellipse(f,p,o/2,s/2,0,0,2*Math.PI),S.stroke(),S.fill()}else S.fillRect(u,d,o,s)}S.globalAlpha=l,S.drawImage(U,i+k,n+k,t,r),S.restore(),c&&c(e)},U.src=u}},a.prototype.render=function(){var e,r=+this.props.size+2*+this.props.quietZone;return n.createElement("canvas",{id:null!==(e=this.props.id)&&void 0!==e?e:"react-qrcode-logo",height:r,width:r,style:t({height:r+"px",width:r+"px"},this.props.style),ref:this.canvasRef})},a.defaultProps={value:"https://reactjs.org/",ecLevel:"M",enableCORS:!1,size:150,quietZone:10,bgColor:"#FFFFFF",fgColor:"#000000",logoOpacity:1,qrStyle:"squares",eyeRadius:[0,0,0],logoPaddingStyle:"square"},a}(n.Component);return dist.QRCode=o,dist}var distExports=requireDist();function WalletConnect(e){var t;const{walletConnectUri:r,logoImage:i,primaryColor:n}=e,{isDark:o}=reactExports.useContext(ThemedContext),a=reactExports.useMemo(()=>"desktop"===Bowser.getParser(window.navigator.userAgent).getPlatformType(),[]),[s]=useTranslation(void 0,{i18n:i18nInstance}),[u,l]=reactExports.useState(!1),c=document.documentElement,h="#FFFFFF",d=(null===(t=getComputedStyle(c))||void 0===t||null===(t=t.getPropertyValue("--app-gray-800"))||void 0===t?void 0:t.trim())||"#1f2a37",f="#ffffff"===n.toLowerCase()?"#000000":n;return jsxRuntimeExports.jsx("div",{className:"w3ajs-wallet-connect w3a-wallet-connect",children:jsxRuntimeExports.jsx("div",{className:"w3ajs-wallet-connect__container w3a-wallet-connect__container",children:jsxRuntimeExports.jsxs("div",{className:"w3a-wallet-connect__container-desktop",children:[jsxRuntimeExports.jsxs("div",{className:"w3ajs-wallet-connect-qr w3a-wallet-connect-qr w3a--rounded-md w3a--mb-2",tabIndex:0,role:"button",onClick:()=>{copyToClipboard(r),l(!0),setTimeout(()=>{l(!1)},3e3)},onKeyDown:()=>copyToClipboard(r),children:[u&&jsxRuntimeExports.jsxs("div",{className:"tooltip",children:["Copied",jsxRuntimeExports.jsx("div",{className:"w3a--absolute w3a--border-8 w3a--border-b-0 w3a--border-r-transparent w3a--border-t-app-gray-900 w3a--border-l-transparent w3a--top-[100%] w3a--left-[calc(50%_-_8px)]"})]}),jsxRuntimeExports.jsx(distExports.QRCode,{size:a?300:260,eyeRadius:5,qrStyle:"dots",removeQrCodeBehindLogo:!0,logoImage:i||WALLET_CONNECT_LOGO,value:r,logoHeight:32,logoWidth:32,logoPadding:10,eyeColor:o?h:f,bgColor:o?d:h,fgColor:o?h:"#000000"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs",children:s("modal.external.walletconnect-copy")})]})})})}var WalletConnect$1=reactExports.memo(WalletConnect);function ExternalWalletHeader(e){const{title:t,goBack:r,closeModal:i,disableBackButton:n}=e;return jsxRuntimeExports.jsxs("div",{className:"w3a--flex w3a--flex-row w3a--justify-center w3a--items-center w3a--gap-1",children:[jsxRuntimeExports.jsx("div",{className:"w3a--flex-grow-1 w3a--flex-shrink-0 w3a--items-center w3a--justify-start w3a--mr-auto",children:!n&&jsxRuntimeExports.jsx("button",{type:"button",className:"w3a-external-back w3ajs-external-back",onClick:r,children:jsxRuntimeExports.jsx(Icon,{iconName:"arrow-left-light",darkIconName:"arrow-left-dark",width:"16",height:"16"})})}),jsxRuntimeExports.jsx("div",{className:"w3a-header__title w3a--flex-grow-0 w3a--flex-shrink w3a--truncate w3a--mr-6",children:t}),jsxRuntimeExports.jsx("div",{className:"w3a--flex-grow-1 w3a--flex-shrink-0 w3a--items-center w3a--justify-end w3a--ml-auto",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:i,className:"w3a-header__button_wallet w3ajs-close-btn",children:jsxRuntimeExports.jsx(Icon,{iconName:"x-light",darkIconName:"x-dark"})})})]})}const getBrowserExtensionUrl=(e,t)=>{if(null!=t&&t.startsWith("https://"))return t;switch(e){case"chrome":return`https://chrome.google.com/webstore/detail/${t}`;case"firefox":return`https://addons.mozilla.org/firefox/addon/${t}`;case"edge":return`https://microsoftedge.microsoft.com/addons/detail/${t}`;default:return null}},getMobileInstallLink=(e,t)=>{if(null!=t&&t.includes("https://"))return t;switch(e){case"android":return`https://play.google.com/store/apps/details?id=${t}`;case"ios":return`https://apps.apple.com/app/safepal-wallet/${t}`;default:return""}},getOsName=e=>{switch(e){case"ios":return"iOS";case"android":return"Android";default:return""}},getBrowserName=e=>e.charAt(0).toUpperCase()+e.slice(1);function ExternalWalletInstall(e){const{connectButton:t,goBack:r,closeModal:i}=e,[n]=useTranslation(void 0,{i18n:i18nInstance}),o=reactExports.useMemo(()=>{const e=Bowser.getParser(window.navigator.userAgent);return{platform:e.getPlatformType(),browser:e.getBrowserName().toLowerCase(),os:e.getOSName()}},[]),a=()=>{const e=t.walletRegistryItem.app||{};return Object.keys(e).reduce((t,r)=>{if(!["android","ios"].includes(r))return t;const i=e[r];if(!i)return t;const o=getMobileInstallLink(r,i);if(!o)return t;const a=`${r}-light`,s=`${r}-dark`;return t.push(jsxRuntimeExports.jsx("li",{className:"w3a--w-full",children:jsxRuntimeExports.jsx("a",{href:o,rel:"noopener noreferrer",target:"_blank",children:jsxRuntimeExports.jsxs(Button$1,{type:"button",variant:"tertiary",className:"w3a--w-full !w3a--justify-start w3a--flex w3a--items-center w3a--gap-2 wallet-link-btn",children:[jsxRuntimeExports.jsx(Image$1,{imageId:a,darkImageId:s,hoverImageId:a,darkHoverImageId:s,height:"28",width:"28",isButton:!0}),jsxRuntimeExports.jsx("span",{className:"w3a--text-sm w3a--font-medium",children:n("modal.external.install-mobile-app",{os:getOsName(r)})})]})})},r)),t},[])};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ExternalWalletHeader,{title:`${n("modal.external.get")} ${t.displayName}`,goBack:r,closeModal:i}),jsxRuntimeExports.jsx("div",{className:"w3a--flex w3a--justify-center w3a--my-6",children:jsxRuntimeExports.jsx(Image$1,{imageId:`login-${t.name}`,hoverImageId:`login-${t.name}`,fallbackImageId:"wallet",height:"100",width:"100",isButton:!0,extension:t.imgExtension})}),jsxRuntimeExports.jsx("ul",{className:"w3a--flex w3a--flex-col w3a--gap-3",children:"desktop"===o.platform?(()=>{const e="brave"===o.browser?"chrome":o.browser,r=t.walletRegistryItem.app||{},i=r.browser&&r.browser.includes(e)?r.browser:void 0,s=r[e]||i,u=s?getBrowserExtensionUrl(e,s):null;return[u?jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:u,rel:"noopener noreferrer",target:"_blank",children:jsxRuntimeExports.jsxs(Button$1,{type:"button",variant:"tertiary",className:"w3a--w-full !w3a--justify-start w3a--flex w3a--items-center w3a--gap-2 wallet-link-btn",children:[jsxRuntimeExports.jsx(Image$1,{imageId:o.browser,darkImageId:o.browser,hoverImageId:o.browser,darkHoverImageId:o.browser,height:"30",width:"30",isButton:!0}),jsxRuntimeExports.jsx("span",{className:"w3a--text-sm w3a--font-medium",children:n("modal.external.install-browser-extension",{browser:getBrowserName(o.browser)})})]})})},o.browser):null,...a()]})():a()})]})}function ExternalWalletConnect(e){const{connectButton:t,walletConnectUri:r,goBack:i,closeModal:n}=e,[o,a]=reactExports.useState(!1),[s]=useTranslation(void 0,{i18n:i18nInstance});return jsxRuntimeExports.jsx("div",{children:o?jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ExternalWalletInstall,{connectButton:t,goBack:()=>a(!1),closeModal:n})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ExternalWalletHeader,{title:t.displayName,goBack:i,closeModal:n}),r?jsxRuntimeExports.jsx(WalletConnect$1,{walletConnectUri:r,logoImage:`https://images.web3auth.io/login-${t.name}.${t.imgExtension}`,primaryColor:t.walletRegistryItem.primaryColor}):jsxRuntimeExports.jsx(Loader,{modalStatus:MODAL_STATUS.CONNECTING,canEmit:!1}),t.hasInstallLinks&&jsxRuntimeExports.jsxs("div",{className:"w3a--flex w3a--flex-row w3a--items-center w3a--justify-between w3a--gap-2 w3a--bg-app-gray-50 dark:w3a--bg-app-gray-700 w3a--text-app-gray-900 dark:w3a--text-app-white w3a--px-3 w3a--py-2 w3a--rounded-xl",children:[jsxRuntimeExports.jsxs("span",{className:"w3a--text-sm w3a--truncate w3a--flex-grow-0",children:[s("modal.external.dont-have")," ",jsxRuntimeExports.jsx("span",{children:t.displayName}),"?"]}),jsxRuntimeExports.jsx(Button$1,{type:"button",variant:"secondary",size:"xs",className:"w3a--flex-grow-1 w3a--flex-shrink-0",onClick:()=>{a(!0)},children:s("modal.external.get-wallet")})]})]})})}function ExternalWalletDetail(e){const{connectButton:t,walletConnectUri:r,goBack:i,closeModal:n}=e;return jsxRuntimeExports.jsx("div",{children:t.hasWalletConnect?jsxRuntimeExports.jsx(ExternalWalletConnect,{connectButton:t,walletConnectUri:r,goBack:i,closeModal:n}):jsxRuntimeExports.jsx(ExternalWalletInstall,{connectButton:t,goBack:i,closeModal:n})})}function formatIOSMobile(e){const t=encodeURIComponent(e.uri);return e.link.startsWith("http")?`${e.link}/wc?uri=${t}`:e.link?`${e.link}wc?uri=${t}`:""}function ExternalWallet(e){const{hideExternalWallets:t,handleExternalWalletClick:r,closeModal:i,config:n={},walletConnectUri:o,showBackButton:a,modalStatus:s,chainNamespace:u,walletRegistry:l}=e,[c,h]=reactExports.useState([]),[d,f]=reactExports.useState(0),[p,m]=reactExports.useState(null),[g,y]=reactExports.useState(""),[b]=useTranslation(void 0,{i18n:i18nInstance}),w=reactExports.useMemo(()=>l&&Object.keys(l.default).length>0&&Object.keys(l.others).length>0,[l]),v=reactExports.useMemo(()=>{const e=Bowser.getParser(window.navigator.userAgent);return{platform:e.getPlatformType(),os:e.getOSName(),browser:e.getBrowserName().toLowerCase()}},[]),_=reactExports.useMemo(()=>{const e={};return Object.keys(n).forEach(t=>{const r=n[t];r.showOnModal?"desktop"===v.platform&&r.showOnDesktop?e[t]=!0:"mobile"!==v.platform&&"tablet"!==v.platform||!r.showOnMobile?e[t]=!1:e[t]=!0:e[t]=!1}),loglevel$3.debug("adapter visibility map",e),e},[n,v.platform]);reactExports.useEffect(()=>{var e;loglevel$3.debug("loaded external wallets",n,o);!1!==((null===(e=n[WALLET_ADAPTERS$1.WALLET_CONNECT_V2])||void 0===e?void 0:e.showOnModal)||!1)&&!o&&r({adapter:WALLET_ADAPTERS$1.WALLET_CONNECT_V2})},[n,r,o]),reactExports.useEffect(()=>{if(w){const e=Object.keys(n).some(e=>e===WALLET_ADAPTERS$1.WALLET_CONNECT_V2),t=new Set(Object.keys(l.default)),r=t=>Object.keys(t).reduce((r,i)=>{var o,a,s,l;if(!1===_[i])return r;const c=t[i];let h="";if(v.platform===Bowser.PLATFORMS_MAP.mobile){var d,f;const e=null==c||null===(d=c.mobile)||void 0===d?void 0:d.universal,t=null==c||null===(f=c.mobile)||void 0===f?void 0:f.native;h=e||t}const p={name:i,displayName:c.name,href:h,hasInjectedWallet:(null===(o=n[i])||void 0===o?void 0:o.isInjected)||!1,hasWalletConnect:e&&(null===(a=c.walletConnect)||void 0===a||null===(a=a.sdks)||void 0===a?void 0:a.includes("sign_v2")),hasInstallLinks:Object.keys(c.app||{}).length>0,walletRegistryItem:c,imgExtension:c.imgExtension||"svg"};if(!p.hasInjectedWallet&&!p.hasWalletConnect&&!p.hasInstallLinks)return r;const m=new Set(null===(s=c.chains)||void 0===s?void 0:s.map(e=>e.split(":")[0])),g=new Set(null===(l=c.injected)||void 0===l?void 0:l.map(e=>e.namespace));return m.has(u)||g.has(u)?(r.push(p),r):r},[]),i=r(l.default),o=r(l.others),a=Object.keys(n).reduce((e,t)=>([WALLET_ADAPTERS$1.WALLET_CONNECT_V2].includes(t)||n[t].isInjected||!_[t]||(loglevel$3.debug("custom adapter",t,n[t]),e.push({name:t,displayName:n[t].label||t,hasInjectedWallet:!1,hasWalletConnect:!1,hasInstallLinks:!1})),e),[]),s=[...i,...o];if(g){const e=s.concat(a).filter(e=>e.name.toLowerCase().includes(g.toLowerCase()));loglevel$3.debug("filteredLists",e),h(e)}else{const e=[...s.filter(e=>e.hasInjectedWallet&&t.has(e.name)),...a,...s.filter(e=>!e.hasInjectedWallet&&t.has(e.name))];h(e)}f(s.length+a.length),loglevel$3.debug("external buttons",s)}else{const e=Object.keys(n).reduce((e,t)=>(loglevel$3.debug("external buttons",t,_[t]),![WALLET_ADAPTERS$1.WALLET_CONNECT_V2].includes(t)&&_[t]&&e.push({name:t,displayName:n[t].label||t,hasInjectedWallet:n[t].isInjected,hasWalletConnect:!1,hasInstallLinks:!1}),e),[]);h(e),f(e.length)}},[n,v,_,l,g,u,w]);const E=e=>{e.hasInjectedWallet||!e.hasWalletConnect&&!e.hasInstallLinks?r({adapter:e.name}):m(e)};return jsxRuntimeExports.jsx("div",{className:"w3ajs-external-wallet w3a-group "+(0===d?"w3a-group-loader-height":""),children:jsxRuntimeExports.jsx("div",{className:"w3a-external-container w3ajs-external-container",children:0===d?jsxRuntimeExports.jsx(Loader,{modalStatus:MODAL_STATUS.CONNECTING,canEmit:!1}):s===MODAL_STATUS.INITIALIZED&&(p?jsxRuntimeExports.jsx(ExternalWalletDetail,{connectButton:p,goBack:()=>m(null),walletConnectUri:o,closeModal:i}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ExternalWalletHeader,{disableBackButton:!a,title:b("modal.external.connect-wallet"),goBack:t,closeModal:i}),d>15&&jsxRuntimeExports.jsx("div",{className:"w3a--py-4",children:jsxRuntimeExports.jsx("input",{className:"w3a--w-full w3a-text-field",name:"passwordless-input",required:!0,value:g,placeholder:b("modal.external.search-wallet",{count:d}),onFocus:e=>{e.target.placeholder=""},onBlur:e=>{e.target.placeholder=b("modal.external.search-wallet",{count:d})},onChange:e=>(e=>{y(e.target.value)})(e)})}),0===c.length?jsxRuntimeExports.jsx("div",{className:"w3a--w-full w3a--text-center w3a--text-app-gray-400 dark:w3a--text-app-gray-500 w3a--py-6 w3a--flex w3a--justify-center w3a--items-center",children:b("modal.external.no-wallets-found")}):jsxRuntimeExports.jsx("div",{className:"w3a-adapter-list-container "+(d<15?"w3a--py-4":""),children:jsxRuntimeExports.jsxs("ul",{className:"w3a-adapter-list w3ajs-wallet-adapters",children:[c.map(e=>jsxRuntimeExports.jsxs("li",{className:"w3a-adapter-item w3a-adapter-item--full",children:["desktop"===v.platform&&jsxRuntimeExports.jsx(ExternalWalletButton,{button:e,handleWalletClick:E}),"desktop"!==v.platform&&(e.href&&e.hasWalletConnect&&!e.hasInjectedWallet?jsxRuntimeExports.jsx("a",{href:e.href?formatIOSMobile({uri:o,link:e.href}):o,target:"_blank",className:"w3a--w-full",rel:"noreferrer noopener",children:jsxRuntimeExports.jsx(ExternalWalletButton,{button:e,handleWalletClick:E})}):jsxRuntimeExports.jsx(ExternalWalletButton,{button:e,handleWalletClick:E}))]},e.name+e.displayName)),d>10&&!g&&jsxRuntimeExports.jsxs("li",{className:"w3a--flex w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-0.5 w3a--my-4 w3a--w-full w3a--mx-auto w3a-adapter-item--full",children:[jsxRuntimeExports.jsx("p",{className:"w3a--text-xs w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:b("modal.external.search-text")}),jsxRuntimeExports.jsx("p",{className:"w3a--text-xs w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:b("modal.external.search-subtext")})]})]})})]}))})})}function SelfCustodyViaWeb3Auth(){const[e]=useTranslation(void 0,{i18n:i18nInstance});return jsxRuntimeExports.jsxs("div",{className:"w3a--flex w3a--items-center w3a--gap-2 w3a--justify-center",children:[jsxRuntimeExports.jsx("div",{className:"w3a--text-xs w3a--text-app-gray-300 dark:w3a--text-app-gray-500",children:e("modal.footer.message-new")}),jsxRuntimeExports.jsx("img",{height:"16",src:"https://images.web3auth.io/web3auth-footer-logo-light.svg",alt:"Web3Auth Logo Light",className:"w3a--h-4 w3a--block dark:w3a--hidden"}),jsxRuntimeExports.jsx("img",{height:"16",src:"https://images.web3auth.io/web3auth-footer-logo-dark.svg",alt:"Web3Auth Logo Dark",className:"w3a--h-4 w3a--hidden dark:w3a--block"})]})}function Footer(){return jsxRuntimeExports.jsx("div",{className:"w3a-modal__footer",children:jsxRuntimeExports.jsx("div",{className:"w3a-footer",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(SelfCustodyViaWeb3Auth,{})})})})})}function Header(e){const{onClose:t,appLogo:r,appName:i}=e,[n]=useTranslation(void 0,{i18n:i18nInstance}),o=[DEFAULT_LOGO_DARK,DEFAULT_LOGO_LIGHT].includes(r)?"":r,a=n("modal.header-subtitle-name",{appName:i});return jsxRuntimeExports.jsxs("div",{className:"w3a-modal__header",children:[jsxRuntimeExports.jsx("div",{className:"w3a-header",children:jsxRuntimeExports.jsxs("div",{children:[o&&jsxRuntimeExports.jsx("div",{className:"w3a-header__logo",children:jsxRuntimeExports.jsx("img",{src:o,alt:""})}),jsxRuntimeExports.jsx("div",{className:"w3a-header__title",children:n("modal.header-title")}),jsxRuntimeExports.jsxs("div",{className:"w3a-header__subtitle",children:[a,jsxRuntimeExports.jsxs("div",{className:"w3a--relative w3a--flex w3a--flex-col w3a--items-center w3a--group w3a--cursor-pointer",children:[jsxRuntimeExports.jsx(Icon,{iconName:"information-circle-light",darkIconName:"information-circle"}),jsxRuntimeExports.jsxs("div",{className:"w3a--absolute w3a--top-4 w3a--z-20 w3a--flex-col w3a--items-center w3a--hidden w3a--mb-5 group-hover:w3a--flex",children:[jsxRuntimeExports.jsx("div",{className:"w3a--w-3 w3a--h-3 w3a--ml-[3px] -w3a--mb-2 w3a--rotate-45 w3a--bg-app-gray-50 dark:w3a--bg-app-gray-600"}),jsxRuntimeExports.jsxs("div",{className:"w3a--relative w3a--p-4 w3a--w-[270px] w3a--translate-x-[-16px] w3a--text-xs w3a--leading-none w3a--text-app-white w3a--rounded-md w3a--bg-app-gray-50 dark:w3a--bg-app-gray-600 w3a--shadow-lg "+(a.length>34?"-w3a--ml-[100px]":""),children:[jsxRuntimeExports.jsx("div",{className:"w3a--text-xs w3a--font-medium w3a--mb-1 w3a--text-app-gray-900 dark:w3a--text-app-white",children:n("modal.header-tooltip-title")}),jsxRuntimeExports.jsx("div",{className:"w3a--text-xs w3a--text-app-gray-400",children:n("modal.header-tooltip-desc")})]})]})]})]})]})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:t,className:"w3a-header__button w3ajs-close-btn ",children:jsxRuntimeExports.jsx(Icon,{iconName:"x-light",darkIconName:"x-dark"})})]})}const memoizedHeader=reactExports.memo(Header,(e,t)=>e.appLogo!==t.appLogo);memoizedHeader.displayName="Header";const getAdapterSocialLogins=(e,t={})=>{const r={};if(e!==WALLET_ADAPTERS$1.AUTH)throw WalletInitializationError$1.invalidParams(`${e} is not a valid adapter`);return AUTH_PROVIDERS.forEach(e=>{const i=t[e]||{name:AUTH_PROVIDERS_NAMES[e],showOnMobile:!0,showOnModal:!0,showOnDesktop:!0};r[e]=_objectSpread2({},i)}),loglevel$3.debug("auth login method ui config",r),r},passwordlessBackendUrl="https://api-passwordless.web3auth.io",getUserCountry=async()=>{try{const e=await get$2(`${passwordlessBackendUrl}/api/v3/user/location`);return e&&e.data.country?{country:e.data.country,dialCode:e.data.dial_code}:null}catch(e){return loglevel$3.error("error getting user country",e),null}},validatePhoneNumber=async e=>{try{const t=await post$2(`${passwordlessBackendUrl}/api/v3/phone_number/validate`,{phone_number:e});return!(!t||!t.success)&&t.parsed_number}catch(t){return loglevel$3.error("error validating phone number",t),400!==t.status}},getUserLanguage=e=>{let t=e;if(!t){t=("undefined"!=typeof window&&(window.navigator.userLanguage||window.navigator.language)||"en-US").split("-")[0]}return Object.prototype.hasOwnProperty.call(LANGUAGE_MAP,t)?t:LANGUAGES.en};function SocialLoginPasswordless(e){const{handleSocialLoginClick:t,adapter:r,isPrimaryBtn:i,isEmailVisible:n,isSmsVisible:o}=e,[a,s]=reactExports.useState(""),[u,l]=reactExports.useState(""),[c,h]=reactExports.useState(null),[d]=useTranslation(void 0,{i18n:i18nInstance});reactExports.useEffect(()=>{o&&(async()=>{const e=await getUserCountry();e&&e.dialCode&&l(e.dialCode)})()},[o]);const f=reactExports.useMemo(()=>n&&o?"modal.social.passwordless-title":n?"modal.social.email":"modal.social.phone",[n,o]),p=reactExports.useMemo(()=>n&&o?"+(00)123456/name@example.com":n?"name@example.com":"+(00)123456",[n,o]),m=reactExports.useMemo(()=>n&&o?"modal.errors-invalid-number-email":n?"modal.errors-invalid-email":"modal.errors-invalid-number",[n,o]);return jsxRuntimeExports.jsxs("div",{className:"w3ajs-passwordless w3a-group w3a-group--passwordless",children:[jsxRuntimeExports.jsxs("div",{className:"w3a-group__title",children:[d(f),o&&jsxRuntimeExports.jsxs("div",{className:"w3a--relative w3a--flex w3a--flex-col w3a--items-center w3a--cursor-pointer w3a--group",children:[jsxRuntimeExports.jsx(Icon,{iconName:"information-circle-light",darkIconName:"information-circle"}),jsxRuntimeExports.jsxs("div",{className:"w3a--absolute w3a--z-20 w3a--flex-col w3a--items-center w3a--hidden w3a--mb-5 w3a--top-4 group-hover:w3a--flex",children:[jsxRuntimeExports.jsx("div",{className:"w3a--w-3 w3a--h-3 w3a--ml-[3px] -w3a--mb-2 w3a--rotate-45 w3a--bg-app-gray-50 dark:w3a--bg-app-gray-600"}),jsxRuntimeExports.jsxs("div",{className:"w3a--relative w3a--p-4 w3a--w-[300px] w3a--text-xs w3a--leading-none w3a--text-app-white w3a--rounded-md w3a--bg-app-gray-50 dark:w3a--bg-app-gray-600 w3a--shadow-lg "+(o&&!n?"w3a--left-20":"w3a--left-8"),children:[jsxRuntimeExports.jsx("div",{className:"w3a--mb-1 w3a--text-xs w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:d("modal.popup.phone-header")}),jsxRuntimeExports.jsx("div",{className:"w3a--text-xs w3a--text-app-gray-400",children:d("modal.popup.phone-body")})]})]})]})]}),jsxRuntimeExports.jsxs("form",{className:"w3ajs-passwordless-form",onSubmit:e=>(async e=>{e.preventDefault();const i=a;if(n&&i.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i))return t({adapter:r,loginParams:{loginProvider:LOGIN_PROVIDER$1.EMAIL_PASSWORDLESS,login_hint:i,name:"Email"}});if(o){const e=i.startsWith("+")?i:`${u}${i}`,n=await validatePhoneNumber(e);if(n)return t({adapter:r,loginParams:{loginProvider:LOGIN_PROVIDER$1.SMS_PASSWORDLESS,login_hint:"string"==typeof n?n:e,name:"Mobile"}})}h(!1)})(e),children:[jsxRuntimeExports.jsx("input",{className:"w3a--w-full w3a--mb-4 w3a-text-field",name:"passwordless-input",required:!0,placeholder:`${d("modal.social.sms-placeholder-text")} ${p}`,onFocus:e=>{e.target.placeholder=""},onBlur:e=>{e.target.placeholder=`${d("modal.social.sms-placeholder-text")} ${p}`},onChange:e=>(e=>{s(e.target.value),!1===c&&h(null)})(e)}),!1===c&&jsxRuntimeExports.jsx("div",{className:"w3a-sms-field--error",children:d(m)}),jsxRuntimeExports.jsx(Button$1,{variant:i?"primary":"tertiary",disabled:""===a,className:"w3a--w-full",type:"submit",children:d("modal.social.passwordless-cta")})]})]})}var classnames={exports:{}},hasRequiredClassnames;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/function requireClassnames(){return hasRequiredClassnames||(hasRequiredClassnames=1,e=classnames,function(){var t={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=n(e,i(r)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var i="";for(var o in e)t.call(e,o)&&e[o]&&(i=n(i,o));return i}function n(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):window.classNames=r}()),classnames.exports;var e}var classnamesExports=requireClassnames();const classNames=getDefaultExportFromCjs$2(classnamesExports);function getProviderIcon(e,t,r){const i=e===LOGIN_PROVIDER$1.TWITTER?"login-twitter-x"+(t?"-light":"-dark"):`login-${e}${t?"-light":"-dark"}`,n=e===LOGIN_PROVIDER$1.APPLE||e===LOGIN_PROVIDER$1.GITHUB||e===LOGIN_PROVIDER$1.TWITTER?i:`login-${e}-active`;return r?jsxRuntimeExports.jsx(Image$1,{width:"20",imageId:n,hoverImageId:n,isButton:!0}):jsxRuntimeExports.jsx(Image$1,{width:"20",imageId:i,hoverImageId:n,isButton:!0})}function SocialLogins(e){const[t,r]=reactExports.useState(!1),[i,n]=reactExports.useState(!1),{socialLoginsConfig:o={loginMethods:{},loginMethodsOrder:[],adapter:"",uiConfig:{}},handleSocialLoginClick:a}=e,{isDark:s}=reactExports.useContext(ThemedContext),[u]=useTranslation(void 0,{i18n:i18nInstance});reactExports.useEffect(()=>{const e=Object.keys(o.loginMethods).filter(e=>o.loginMethods[e].showOnModal);r(e.length>4)},[o.loginMethods]);const l=classNames("w3a-adapter-list","w3ajs-socials-adapters",i?"":" w3a-adapter-list--shrink"),c=classNames("w3a-button-expand","w3ajs-button-expand",i?"w3a-button--rotate":""),h=u(i?"modal.social.view-less":"modal.social.view-more"),d=Object.keys(o.loginMethods).length+1,f=[LOGIN_PROVIDER$1.WEBAUTHN,LOGIN_PROVIDER$1.JWT,LOGIN_PROVIDER$1.SMS_PASSWORDLESS,LOGIN_PROVIDER$1.EMAIL_PASSWORDLESS,LOGIN_PROVIDER$1.AUTHENTICATOR,LOGIN_PROVIDER$1.PASSKEYS];return jsxRuntimeExports.jsxs("div",{className:"w3ajs-social-logins w3a-group",children:[jsxRuntimeExports.jsx("ul",{className:l,children:Object.keys(o.loginMethods).map(e=>{var t,r;const i=capitalizeFirstLetter(o.loginMethods[e].name||e),n=o.loginMethodsOrder.indexOf(e)+1||Object.keys(o.loginMethods).length+1,l=o.loginMethods[e].mainOption,c="socialLogin"===(null==o||null===(t=o.uiConfig)||void 0===t?void 0:t.primaryButton)&&1===n,h=getProviderIcon(e,s,c);if(!1===o.loginMethods[e].showOnModal||f.includes(e))return null;const p=classNames("w3a-adapter-item",2===(null==o||null===(r=o.uiConfig)||void 0===r?void 0:r.loginGridCol)?"w3a--col-span-3":"w3a--col-span-2");return l||1===n?jsxRuntimeExports.jsx("li",{className:"w3a--col-span-6 w3a-adapter-item",style:{order:n},children:jsxRuntimeExports.jsxs(Button$1,{variant:"secondary",onClick:()=>a({adapter:o.adapter,loginParams:{loginProvider:e,name:i,login_hint:""}}),className:"w3a--w-full",title:i,children:[h,jsxRuntimeExports.jsx("p",{className:"w3a--ml-2",children:u("modal.social.continueCustom",{adapter:i})})]})},e):jsxRuntimeExports.jsx("li",{className:p,style:{order:n+d},children:jsxRuntimeExports.jsx(Button$1,{variant:"secondary",onClick:()=>a({adapter:o.adapter,loginParams:{loginProvider:e,name:i,login_hint:""}}),className:"w3a--w-full",title:i,children:h})},e)})}),jsxRuntimeExports.jsx("div",{className:"w3a-social__policy",children:u("modal.social.policy")}),t&&jsxRuntimeExports.jsx("div",{className:"w3a--text-right",children:jsxRuntimeExports.jsx("button",{type:"button",className:c,onClick:()=>{n(!i)},children:jsxRuntimeExports.jsx("span",{className:"w3ajs-button-expand-text",children:h})})})]})}function Modal(e){var t,r,i,n,o,a;const[s,u]=reactExports.useState(["w3a-modal__inner"]),[l,c]=reactExports.useState({externalWalletsVisibility:!1,status:MODAL_STATUS.INITIALIZED,hasExternalWallets:!1,externalWalletsInitialized:!1,modalVisibility:!1,modalVisibilityDelayed:!1,postLoadingMessage:"",walletConnectUri:"",socialLoginsConfig:{loginMethods:{},loginMethodsOrder:[],adapter:"",uiConfig:{}},externalWalletsConfig:{},detailedLoaderAdapter:"",detailedLoaderAdapterName:"",showExternalWalletsOnly:!1}),[h]=useTranslation(void 0,{i18n:i18nInstance}),{stateListener:d,appLogo:f,appName:p,chainNamespace:m,walletRegistry:g,handleSocialLoginClick:y,handleExternalWalletClick:b,handleShowExternalWallets:w,closeModal:v}=e,[_,E]=reactExports.useState("");reactExports.useEffect(()=>{d.emit("MOUNTED"),d.on("STATE_UPDATED",e=>{loglevel$3.debug("state updated",e),c(t=>cloneDeep(deepmerge(t,e)))})},[d]),reactExports.useEffect(()=>{let e;return l.modalVisibility?(c(e=>_objectSpread2(_objectSpread2({},e),{},{modalVisibilityDelayed:l.modalVisibility})),e=window.setTimeout(()=>{u(["w3a-modal__inner",l.modalVisibility?"w3a-modal__inner--active":""])},100)):(u(["w3a-modal__inner",l.modalVisibility?"w3a-modal__inner--active":""]),e=window.setTimeout(()=>{c(e=>_objectSpread2(_objectSpread2({},e),{},{modalVisibilityDelayed:l.modalVisibility}))},250)),()=>{clearTimeout(e)}},[l.modalVisibility]);const S=reactExports.useCallback(()=>{l.status===MODAL_STATUS.CONNECTED&&v(),l.status===MODAL_STATUS.ERRORED&&c(e=>_objectSpread2(_objectSpread2({},e),{},{modalVisibility:!0,status:MODAL_STATUS.INITIALIZED}))},[v,l.status]),A=reactExports.useCallback(e=>{const{adapter:t}=e;c(e=>_objectSpread2(_objectSpread2({},e),{},{detailedLoaderAdapter:t,detailedLoaderAdapterName:ADAPTER_NAMES[t]})),b(e)},[b]),M=e=>{const{loginParams:t}=e;c(e=>_objectSpread2(_objectSpread2({},e),{},{detailedLoaderAdapter:t.loginProvider,detailedLoaderAdapterName:t.name})),y(e)},R="emailLogin"===(null===(t=l.socialLoginsConfig)||void 0===t||null===(t=t.uiConfig)||void 0===t?void 0:t.primaryButton),x="externalLogin"===(null===(r=l.socialLoginsConfig)||void 0===r||null===(r=r.uiConfig)||void 0===r?void 0:r.primaryButton),k=jsxRuntimeExports.jsx("div",{className:"w3ajs-external-wallet w3a-group w3a--w-full",children:jsxRuntimeExports.jsx("div",{className:"w3a-external-toggle w3ajs-external-toggle",children:jsxRuntimeExports.jsx(Button$1,{variant:x?"primary":"tertiary",type:"button",className:"w3a--w-full w3ajs-external-toggle__button",style:{width:"100%"},onClick:()=>{c(e=>_objectSpread2(_objectSpread2({},e),{},{externalWalletsVisibility:!0})),E("slide-enter"),w(l.externalWalletsInitialized),setTimeout(()=>{E("slide-exit")},300)},children:h("modal.external.connect")})})}),T=reactExports.useMemo(()=>{var e,t;if(l.showExternalWalletsOnly)return!1;if(0===Object.keys((null===(e=l.socialLoginsConfig)||void 0===e?void 0:e.loginMethods)||{}).length)return!1;return!!Object.entries((null===(t=l.socialLoginsConfig)||void 0===t?void 0:t.loginMethods)||{}).some(([e,t])=>e!==LOGIN_PROVIDER$1.EMAIL_PASSWORDLESS&&!1!==t.showOnModal)},[l.showExternalWalletsOnly,null===(i=l.socialLoginsConfig)||void 0===i?void 0:i.loginMethods]);loglevel$3.info("modal state",l,T);const P=reactExports.useMemo(()=>{var e;return null===(e=l.socialLoginsConfig)||void 0===e||null===(e=e.loginMethods[LOGIN_PROVIDER$1.EMAIL_PASSWORDLESS])||void 0===e?void 0:e.showOnModal},[null===(n=l.socialLoginsConfig)||void 0===n?void 0:n.loginMethods]),C=reactExports.useMemo(()=>{var e;return null===(e=l.socialLoginsConfig)||void 0===e||null===(e=e.loginMethods[LOGIN_PROVIDER$1.SMS_PASSWORDLESS])||void 0===e?void 0:e.showOnModal},[null===(o=l.socialLoginsConfig)||void 0===o?void 0:o.loginMethods]);return l.modalVisibilityDelayed&&jsxRuntimeExports.jsx("div",{id:"w3a-modal",className:"w3a-modal",children:jsxRuntimeExports.jsxs("div",{className:`${s.join(" ")} ${l.status!==MODAL_STATUS.INITIALIZED?"w3a--p-6 w3a--pt-7":""} ${(T||P||C)&&!l.externalWalletsVisibility?"":"wallet-adapter-container"}`,children:[l.status!==MODAL_STATUS.INITIALIZED?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(memoizedHeader,{onClose:v,appLogo:f,appName:p}),jsxRuntimeExports.jsx("div",{className:"w3a-modal__content w3ajs-content",children:jsxRuntimeExports.jsx(DetailedLoader,{onClose:S,appLogo:f,modalStatus:l.status,message:h(l.postLoadingMessage),adapter:l.detailedLoaderAdapter,adapterName:l.detailedLoaderAdapterName})})]}):jsxRuntimeExports.jsx("div",{className:`transition-wrapper ${_}`,children:(T||P||C)&&!l.externalWalletsVisibility?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(memoizedHeader,{onClose:v,appLogo:f,appName:p}),jsxRuntimeExports.jsxs("div",{className:"w3a-modal__content w3ajs-content",children:[T?jsxRuntimeExports.jsx(SocialLogins,{handleSocialLoginClick:e=>M(e),socialLoginsConfig:l.socialLoginsConfig}):null,(P||C)&&jsxRuntimeExports.jsx(SocialLoginPasswordless,{isEmailVisible:P,isSmsVisible:C,adapter:null===(a=l.socialLoginsConfig)||void 0===a?void 0:a.adapter,handleSocialLoginClick:e=>M(e),isPrimaryBtn:R}),l.hasExternalWallets&&k]})]}):jsxRuntimeExports.jsx("div",{className:"w3a-modal__content_external_wallet w3ajs-content",children:jsxRuntimeExports.jsx(ExternalWallet,{modalStatus:l.status,showBackButton:T||P||C,handleExternalWalletClick:A,chainNamespace:m,walletConnectUri:l.walletConnectUri,config:l.externalWalletsConfig,hideExternalWallets:()=>c(e=>_objectSpread2(_objectSpread2({},e),{},{externalWalletsVisibility:!1})),walletRegistry:g,closeModal:v})})}),jsxRuntimeExports.jsx(Footer,{})]})})}function createWrapper(e){const t=document.getElementById("w3a-parent-container");t&&t.remove();const r=document.createElement("section");r.classList.add("w3a-parent-container"),r.setAttribute("id","w3a-parent-container"),r.style.zIndex=e,r.style.position="relative";const i=document.createElement("section");return i.setAttribute("id","w3a-container"),r.appendChild(i),document.body.appendChild(r),i}loglevel$3.enableAll();class LoginModal extends SafeEventEmitter$1{constructor(e){super(),_defineProperty(this,"uiConfig",void 0),_defineProperty(this,"stateEmitter",void 0),_defineProperty(this,"chainNamespace",void 0),_defineProperty(this,"walletRegistry",void 0),_defineProperty(this,"initModal",async()=>{const e={isDark:this.isDark},t=this.uiConfig.defaultLanguage||LANGUAGES.en;return t===LANGUAGES.de?__vitePreload(()=>import("./german.json-CM4aQ55u.js"),[]).then(e=>(i18nInstance.addResourceBundle(t,"translation",e.default),i18nInstance.changeLanguage(t))).catch(e=>{loglevel$3.error(e)}):t===LANGUAGES.ja?__vitePreload(()=>import("./japanese.json-DxVPQu-j.js"),[]).then(e=>(i18nInstance.addResourceBundle(t,"translation",e.default),i18nInstance.changeLanguage(t))).catch(e=>{loglevel$3.error(e)}):t===LANGUAGES.ko?__vitePreload(()=>import("./korean.json-TWuJUjNI.js"),[]).then(e=>(i18nInstance.addResourceBundle(t,"translation",e.default),i18nInstance.changeLanguage(t))).catch(e=>{loglevel$3.error(e)}):t===LANGUAGES.zh?__vitePreload(()=>import("./mandarin.json-xSgnmXj2.js"),[]).then(e=>(i18nInstance.addResourceBundle(t,"translation",e.default),i18nInstance.changeLanguage(t))).catch(e=>{loglevel$3.error(e)}):t===LANGUAGES.es?__vitePreload(()=>import("./spanish.json-BEvgdvWb.js"),[]).then(e=>(i18nInstance.addResourceBundle(t,"translation",e.default),i18nInstance.changeLanguage(t))).catch(e=>{loglevel$3.error(e)}):t===LANGUAGES.fr?__vitePreload(()=>import("./french.json-BNQ3B02_.js"),[]).then(e=>(i18nInstance.addResourceBundle(t,"translation",e.default),i18nInstance.changeLanguage(t))).catch(e=>{loglevel$3.error(e)}):t===LANGUAGES.pt?__vitePreload(()=>import("./portuguese.json-Ca0Mqd6m.js"),[]).then(e=>(i18nInstance.addResourceBundle(t,"translation",e.default),i18nInstance.changeLanguage(t))).catch(e=>{loglevel$3.error(e)}):t===LANGUAGES.nl?__vitePreload(()=>import("./dutch.json-Dhde1pa6.js"),[]).then(e=>(i18nInstance.addResourceBundle(t,"translation",e.default),i18nInstance.changeLanguage(t))).catch(e=>{loglevel$3.error(e)}):t===LANGUAGES.tr?__vitePreload(()=>import("./turkish.json-DHELY_sM.js"),[]).then(e=>(i18nInstance.addResourceBundle(t,"translation",e.default),i18nInstance.changeLanguage(t))).catch(e=>{loglevel$3.error(e)}):t===LANGUAGES.en&&__vitePreload(()=>Promise.resolve().then(()=>english_json),void 0).then(e=>(i18nInstance.addResourceBundle(t,"translation",e.default),i18nInstance.changeLanguage(t))).catch(e=>{loglevel$3.error(e)}),new Promise(t=>{var r;this.stateEmitter.once("MOUNTED",()=>(loglevel$3.info("rendered"),this.setState({status:MODAL_STATUS.INITIALIZED}),t()));const i=createWrapper(this.uiConfig.modalZIndex);e.isDark?i.classList.add("w3a--dark"):i.classList.remove("w3a--dark");if(clientExports.createRoot(i).render(jsxRuntimeExports.jsx(ThemedContext.Provider,{value:e,children:jsxRuntimeExports.jsx(Modal,{closeModal:this.closeModal,stateListener:this.stateEmitter,handleShowExternalWallets:this.handleShowExternalWallets,handleExternalWalletClick:this.handleExternalWalletClick,handleSocialLoginClick:this.handleSocialLoginClick,appLogo:e.isDark?this.uiConfig.logoDark:this.uiConfig.logoLight,appName:this.uiConfig.appName,chainNamespace:this.chainNamespace,walletRegistry:this.walletRegistry})})),null!==(r=this.uiConfig)&&void 0!==r&&r.theme){applyWhiteLabelTheme(document.getElementById("w3a-parent-container"),this.uiConfig.theme)}})}),_defineProperty(this,"addSocialLogins",(e,t,r,i)=>{this.setState({socialLoginsConfig:{adapter:e,loginMethods:t,loginMethodsOrder:r,uiConfig:i}}),loglevel$3.info("addSocialLogins",e,t,r,i)}),_defineProperty(this,"addWalletLogins",(e,t)=>{this.setState({externalWalletsConfig:e,externalWalletsInitialized:!0,showExternalWalletsOnly:!(null==t||!t.showExternalWalletsOnly),externalWalletsVisibility:!0})}),_defineProperty(this,"open",()=>{this.setState({modalVisibility:!0}),this.emit(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY,!0)}),_defineProperty(this,"closeModal",()=>{this.setState({modalVisibility:!1,externalWalletsVisibility:!1}),this.emit(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY,!1)}),_defineProperty(this,"initExternalWalletContainer",()=>{this.setState({hasExternalWallets:!0})}),_defineProperty(this,"handleShowExternalWallets",e=>{this.emit(LOGIN_MODAL_EVENTS.INIT_EXTERNAL_WALLETS,{externalWalletsInitialized:e})}),_defineProperty(this,"handleExternalWalletClick",e=>{loglevel$3.info("external wallet clicked",e);const{adapter:t}=e;this.emit(LOGIN_MODAL_EVENTS.LOGIN,{adapter:t})}),_defineProperty(this,"handleSocialLoginClick",e=>{loglevel$3.info("social login clicked",e);const{adapter:t,loginParams:r}=e;this.emit(LOGIN_MODAL_EVENTS.LOGIN,{adapter:t,loginParams:{loginProvider:r.loginProvider,login_hint:r.login_hint,name:r.name}})}),_defineProperty(this,"setState",e=>{this.stateEmitter.emit("STATE_UPDATED",e)}),_defineProperty(this,"updateWalletConnect",e=>{e&&this.setState({walletConnectUri:e})}),_defineProperty(this,"handleAdapterData",e=>{if(e.adapterName===WALLET_ADAPTERS$1.WALLET_CONNECT_V2){const t=e.data;this.updateWalletConnect(t.uri)}}),_defineProperty(this,"subscribeCoreEvents",e=>{e.on(ADAPTER_EVENTS$1.CONNECTING,e=>{loglevel$3.info("connecting with adapter",e),(null==e?void 0:e.adapter)!==WALLET_ADAPTERS$1.WALLET_CONNECT_V2&&this.setState({status:MODAL_STATUS.CONNECTING})}),e.on(ADAPTER_EVENTS$1.CONNECTED,e=>{loglevel$3.debug("connected with adapter",e),e.reconnected?this.setState({status:MODAL_STATUS.CONNECTED}):this.setState({status:MODAL_STATUS.CONNECTED,modalVisibility:!0,postLoadingMessage:"modal.post-loading.connected"})}),e.on(ADAPTER_EVENTS$1.ERRORED,e=>{loglevel$3.error("error",e,e.message),5e3===e.code?this.uiConfig.displayErrorsOnModal?this.setState({modalVisibility:!0,postLoadingMessage:e.message||"modal.post-loading.something-wrong",status:MODAL_STATUS.ERRORED}):this.setState({modalVisibility:!1}):this.setState({modalVisibility:!0,status:MODAL_STATUS.INITIALIZED})}),e.on(ADAPTER_EVENTS$1.DISCONNECTED,()=>{this.setState({status:MODAL_STATUS.INITIALIZED,externalWalletsVisibility:!1})}),e.on(ADAPTER_EVENTS$1.ADAPTER_DATA_UPDATED,e=>{this.handleAdapterData(e)})}),this.uiConfig=e,e.logoDark||(this.uiConfig.logoDark=DEFAULT_LOGO_DARK),e.logoLight||(this.uiConfig.logoLight=DEFAULT_LOGO_LIGHT),e.mode||(this.uiConfig.mode="light"),e.modalZIndex||(this.uiConfig.modalZIndex="99998"),void 0===e.displayErrorsOnModal&&(this.uiConfig.displayErrorsOnModal=!0),e.appName||(this.uiConfig.appName="Web3Auth"),e.loginGridCol||(this.uiConfig.loginGridCol=3),e.primaryButton||(this.uiConfig.primaryButton="socialLogin"),e.defaultLanguage||(this.uiConfig.defaultLanguage=getUserLanguage(e.defaultLanguage)),this.stateEmitter=new SafeEventEmitter$1,this.chainNamespace=e.chainNamespace,this.walletRegistry=e.walletRegistry,this.subscribeCoreEvents(this.uiConfig.adapterListener)}get isDark(){return"dark"===this.uiConfig.mode||"auto"===this.uiConfig.mode&&window.matchMedia("(prefers-color-scheme: dark)").matches}}class Web3Auth extends Web3AuthNoModal{constructor(e){if(super(e),_defineProperty(this,"loginModal",void 0),_defineProperty(this,"options",void 0),_defineProperty(this,"modalConfig",cloneDeep(defaultOtherModalConfig)),this.options=_objectSpread2({},e),this.options.uiConfig||(this.options.uiConfig={}),!this.coreOptions.privateKeyProvider)throw WalletInitializationError$1.invalidParams("privateKeyProvider is required")}setModalConfig(e){super.checkInitRequirements(),this.modalConfig=e}async initModal(e){var t;let r;super.checkInitRequirements();try{var i;r=await fetchProjectConfig(this.options.clientId,this.options.web3AuthNetwork,null===(i=this.options.accountAbstractionProvider)||void 0===i?void 0:i.config.smartAccountInit.name)}catch(b){throw loglevel$3.error("Failed to fetch project configurations",b),WalletInitializationError$1.notReady("failed to fetch project configurations",b)}const{whitelabel:n}=r;this.options.uiConfig=deepmerge(cloneDeep(n||{}),this.options.uiConfig||{}),this.options.uiConfig.defaultLanguage||(this.options.uiConfig.defaultLanguage=getUserLanguage(this.options.uiConfig.defaultLanguage)),this.options.uiConfig.mode||(this.options.uiConfig.mode="light");let o={others:{},default:{}};if(null===(t=e)||void 0===t||!t.hideWalletDiscovery)try{o=await fetchWalletRegistry(walletRegistryUrl)}catch(b){loglevel$3.error("Failed to fetch wallet registry",b)}this.loginModal=new LoginModal(_objectSpread2(_objectSpread2({},this.options.uiConfig),{},{adapterListener:this,chainNamespace:this.options.chainConfig.chainNamespace,walletRegistry:o})),this.subscribeToLoginModalEvents();const{sms_otp_enabled:a,whitelist:s,key_export_enabled:u}=r;if(void 0!==a){var l,c;const t={[WALLET_ADAPTERS$1.AUTH]:{label:WALLET_ADAPTERS$1.AUTH,loginMethods:{[LOGIN_PROVIDER$1.SMS_PASSWORDLESS]:{name:LOGIN_PROVIDER$1.SMS_PASSWORDLESS,showOnModal:a,showOnDesktop:a,showOnMobile:a}}}};null!==(l=e)&&void 0!==l&&l.modalConfig||(e={modalConfig:{}});if(!0===(null===(c=e.modalConfig[WALLET_ADAPTERS$1.AUTH])||void 0===c||null===(c=c.loginMethods)||void 0===c||null===(c=c[LOGIN_PROVIDER$1.SMS_PASSWORDLESS])||void 0===c?void 0:c.showOnModal)&&!1===a)throw WalletInitializationError$1.invalidParams("must enable sms otp on dashboard in order to utilise it");e.modalConfig=deepmerge(t,cloneDeep(e.modalConfig))}await this.loginModal.initModal();const h=this.options.chainConfig,d=[...new Set([...Object.keys(this.modalConfig.adapters||{}),...Object.keys(this.walletAdapters)])],f=d.map(async t=>{var i,n,o,u;let l=(null===(i=this.modalConfig.adapters)||void 0===i?void 0:i[t])||{label:ADAPTER_NAMES[t]||t.split("-").map(capitalizeFirstLetter).join(" "),showOnModal:!0,showOnMobile:!0,showOnDesktop:!0};null!==(n=e)&&void 0!==n&&null!==(n=n.modalConfig)&&void 0!==n&&n[t]&&(l=_objectSpread2(_objectSpread2({},l),e.modalConfig[t])),this.modalConfig.adapters[t]=l;const c=this.walletAdapters[t];if(loglevel$3.debug("adapter config",t,null===(o=this.modalConfig.adapters)||void 0===o?void 0:o[t].showOnModal,c),!c&&null!==(u=this.modalConfig.adapters)&&void 0!==u&&u[t].showOnModal){if(t===WALLET_ADAPTERS$1.AUTH){var d;const e=getAuthDefaultOptions(),{clientId:r,useCoreKitKey:i,chainConfig:n,web3AuthNetwork:o,sessionTime:u,privateKeyProvider:l}=this.coreOptions,c=_objectSpread2(_objectSpread2({},getChainConfig$1(h.chainNamespace,null===(d=this.coreOptions.chainConfig)||void 0===d?void 0:d.chainId,r)),n);if(!l)throw WalletInitializationError$1.invalidParams("privateKeyProvider is required");const f=_objectSpread2(_objectSpread2({},e.adapterSettings),{},{clientId:r,network:o,whiteLabel:this.options.uiConfig});void 0!==a&&(f.loginConfig={[LOGIN_PROVIDER$1.SMS_PASSWORDLESS]:{showOnModal:a,showOnDesktop:a,showOnMobile:a,showOnSocialBackupFactor:a}}),s&&(f.originData=s.signed_urls),this.options.uiConfig.uxMode&&(f.uxMode=this.options.uiConfig.uxMode);const p=new AuthAdapter(_objectSpread2(_objectSpread2({},e),{},{clientId:r,useCoreKitKey:i,chainConfig:_objectSpread2({},c),adapterSettings:f,sessionTime:u,web3AuthNetwork:o,privateKeyProvider:l}));return this.walletAdapters[t]=p,t}throw WalletInitializationError$1.invalidParams(`Adapter ${t} is not configured`)}if((null==c?void 0:c.type)===ADAPTER_CATEGORY$1.IN_APP||(null==c?void 0:c.type)===ADAPTER_CATEGORY$1.EXTERNAL||t===this.cachedAdapter){var f;if(null===(f=this.modalConfig.adapters)||void 0===f||!f[t].showOnModal)return;if(this.walletAdapters[t].setAdapterSettings({clientId:this.options.clientId,sessionTime:this.options.sessionTime,web3AuthNetwork:this.options.web3AuthNetwork,useCoreKitKey:this.coreOptions.useCoreKitKey}),!c.chainConfigProxy){var p;const e=_objectSpread2(_objectSpread2({},getChainConfig$1(h.chainNamespace,null===(p=this.coreOptions.chainConfig)||void 0===p?void 0:p.chainId,this.coreOptions.clientId)),this.coreOptions.chainConfig);this.walletAdapters[t].setAdapterSettings({chainConfig:e})}if(t===WALLET_ADAPTERS$1.AUTH){var m;const e=this.walletAdapters[t];if(this.coreOptions.privateKeyProvider){if(e.currentChainNamespace!==this.coreOptions.privateKeyProvider.currentChainConfig.chainNamespace)throw WalletInitializationError$1.incompatibleChainNameSpace("private key provider is not compatible with provided chainNamespace for auth adapter");e.setAdapterSettings({privateKeyProvider:this.coreOptions.privateKeyProvider})}if(void 0!==a&&e.setAdapterSettings({loginConfig:{[LOGIN_PROVIDER$1.SMS_PASSWORDLESS]:{showOnModal:a,showOnDesktop:a,showOnMobile:a,showOnSocialBackupFactor:a}}}),s&&e.setAdapterSettings({originData:s.signed_urls}),null!==(m=this.options.uiConfig)&&void 0!==m&&m.uxMode&&e.setAdapterSettings({uxMode:this.options.uiConfig.uxMode}),e.setAdapterSettings({whiteLabel:this.options.uiConfig}),!e.privateKeyProvider)throw WalletInitializationError$1.invalidParams("privateKeyProvider is required for auth adapter")}else if(t===WALLET_ADAPTERS$1.WALLET_CONNECT_V2){const e=this.walletAdapters[t],{wallet_connect_enabled:i,wallet_connect_project_id:n}=r;if(!1===i){var g,y,b;this.modalConfig.adapters=_objectSpread2(_objectSpread2({},null!==(g=this.modalConfig.adapters)&&void 0!==g?g:{}),{},{[WALLET_ADAPTERS$1.WALLET_CONNECT_V2]:_objectSpread2(_objectSpread2({},null!==(y=null===(b=this.modalConfig.adapters)||void 0===b?void 0:b[WALLET_ADAPTERS$1.WALLET_CONNECT_V2])&&void 0!==y?y:{}),{},{showOnModal:!1})}),this.modalConfig.adapters[WALLET_ADAPTERS$1.WALLET_CONNECT_V2].showOnModal=!1}else{var w;if(!(null!=e&&null!==(w=e.adapterOptions)&&void 0!==w&&null!==(w=w.adapterSettings)&&void 0!==w&&null!==(w=w.walletConnectInitOptions)&&void 0!==w&&w.projectId||n))throw WalletInitializationError$1.invalidParams("Invalid wallet connect project id. Please configure it on the dashboard");n&&e.setAdapterSettings({adapterSettings:{walletConnectInitOptions:{projectId:n}}})}}return t}}),p=await Promise.all(f),m=Object.values(this.walletAdapters).some(e=>{var t,r,i;if(e.type!==ADAPTER_CATEGORY$1.IN_APP)return!1;if(!0!==(null===(t=this.modalConfig.adapters)||void 0===t||null===(t=t[e.name])||void 0===t?void 0:t.showOnModal))return!1;if(null===(r=this.modalConfig.adapters)||void 0===r||null===(r=r[e.name])||void 0===r||!r.loginMethods)return!0;const n=getAdapterSocialLogins(e.name,null===(i=this.modalConfig.adapters[e.name])||void 0===i?void 0:i.loginMethods);return!!Object.values(n).some(e=>e.showOnModal)});loglevel$3.debug(m,this.walletAdapters,p,"hasInAppWallets");const g=p.map(async e=>{if(e)try{const t=this.walletAdapters[e];if(this.cachedAdapter!==e&&t.type===ADAPTER_CATEGORY$1.EXTERNAL)return;this.subscribeToAdapterEvents(t),t.status===ADAPTER_STATUS$1.NOT_READY&&await t.init({autoConnect:this.cachedAdapter===e}),t.type===ADAPTER_CATEGORY$1.IN_APP&&this.initializeInAppWallet(e)}catch(t){loglevel$3.error(t,"error while initializing adapter ",e)}});this.commonJRPCProvider=await CommonJRPCProvider.getProviderInstance({chainConfig:this.coreOptions.chainConfig}),"boolean"==typeof u&&(this.coreOptions.privateKeyProvider.setKeyExportFlag(u),this.commonJRPCProvider.setKeyExportFlag(u)),await Promise.all(g),this.status===ADAPTER_STATUS$1.NOT_READY&&(this.status=ADAPTER_STATUS$1.READY,this.emit(ADAPTER_EVENTS$1.READY));const y=d.some(t=>{var r,i,n;return(t!==WALLET_ADAPTERS$1.WALLET_CONNECT_V2||null===(r=e)||void 0===r||!r.hideWalletDiscovery)&&((null===(i=this.walletAdapters[t])||void 0===i?void 0:i.type)===ADAPTER_CATEGORY$1.EXTERNAL&&(null===(n=this.modalConfig.adapters)||void 0===n?void 0:n[t].showOnModal))});y&&this.loginModal.initExternalWalletContainer(),!m&&y&&await this.initExternalWalletAdapters(!1,{showExternalWalletsOnly:!0})}async connect(){if(!this.loginModal)throw WalletInitializationError$1.notReady("Login modal is not initialized");return this.connectedAdapterName&&this.status===ADAPTER_STATUS$1.CONNECTED&&this.provider?this.provider:(this.loginModal.open(),new Promise((e,t)=>{this.once(ADAPTER_EVENTS$1.CONNECTED,()=>e(this.provider)),this.once(ADAPTER_EVENTS$1.ERRORED,e=>t(e)),this.once(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY,e=>{if(!e&&this.status!==ADAPTER_STATUS$1.CONNECTED)return t(new Error("User closed the modal"))})}))}async initExternalWalletAdapters(e,t){if(e)return;const r={};Object.keys(this.walletAdapters).forEach(async e=>{const i=this.walletAdapters[e];if((null==i?void 0:i.type)===ADAPTER_CATEGORY$1.EXTERNAL){if(loglevel$3.debug("init external wallet",this.cachedAdapter,e,i.status),this.subscribeToAdapterEvents(i),this.cachedAdapter===e)return;if(i.status===ADAPTER_STATUS$1.NOT_READY)await i.init({autoConnect:this.cachedAdapter===e}).then(()=>{const n=this.modalConfig.adapters[e];r[e]=_objectSpread2(_objectSpread2({},n),{},{isInjected:i.isInjected}),this.loginModal.addWalletLogins(r,{showExternalWalletsOnly:!(null==t||!t.showExternalWalletsOnly)})}).catch(t=>loglevel$3.error(t,"error while initializing adapter",e));else if(i.status===ADAPTER_STATUS$1.READY||i.status===ADAPTER_STATUS$1.CONNECTING){const n=this.modalConfig.adapters[e];r[e]=_objectSpread2(_objectSpread2({},n),{},{isInjected:i.isInjected}),this.loginModal.addWalletLogins(r,{showExternalWalletsOnly:!(null==t||!t.showExternalWalletsOnly)})}}})}initializeInAppWallet(e){var t,r,i,n;(loglevel$3.info("adapterInitResults",e),this.walletAdapters[e].type===ADAPTER_CATEGORY$1.IN_APP)&&this.loginModal.addSocialLogins(e,getAdapterSocialLogins(e,null===(t=this.modalConfig.adapters[e])||void 0===t?void 0:t.loginMethods),(null===(r=this.options.uiConfig)||void 0===r?void 0:r.loginMethodsOrder)||AUTH_PROVIDERS,_objectSpread2(_objectSpread2({},this.options.uiConfig),{},{loginGridCol:(null===(i=this.options.uiConfig)||void 0===i?void 0:i.loginGridCol)||3,primaryButton:(null===(n=this.options.uiConfig)||void 0===n?void 0:n.primaryButton)||"socialLogin"}))}subscribeToLoginModalEvents(){this.loginModal.on(LOGIN_MODAL_EVENTS.LOGIN,async e=>{try{await this.connectTo(e.adapter,e.loginParams)}catch(t){loglevel$3.error(`Error while connecting to adapter: ${e.adapter}`,t)}}),this.loginModal.on(LOGIN_MODAL_EVENTS.INIT_EXTERNAL_WALLETS,async e=>{await this.initExternalWalletAdapters(e.externalWalletsInitialized)}),this.loginModal.on(LOGIN_MODAL_EVENTS.DISCONNECT,async()=>{try{await this.logout()}catch(e){loglevel$3.error("Error while disconnecting",e)}}),this.loginModal.on(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY,async e=>{loglevel$3.debug("is login modal visible",e),this.emit(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY,e);const t=this.walletAdapters[WALLET_ADAPTERS$1.WALLET_CONNECT_V2];if(t){const i=null==t?void 0:t.status;if(loglevel$3.debug("trying refreshing wc session",e,i),e&&(i===ADAPTER_STATUS$1.READY||i===ADAPTER_STATUS$1.CONNECTING)){loglevel$3.debug("refreshing wc session");try{t.connect()}catch(r){loglevel$3.error("Error while disconnecting to wallet connect in core",r)}}e||this.status!==ADAPTER_STATUS$1.CONNECTED||i!==ADAPTER_STATUS$1.READY&&i!==ADAPTER_STATUS$1.CONNECTING||(loglevel$3.debug("this stops wc adapter from trying to reconnect once proposal expires"),t.status=ADAPTER_STATUS$1.READY)}})}}const index$1=Object.freeze(Object.defineProperty({__proto__:null,Web3Auth:Web3Auth,defaultOtherModalConfig:defaultOtherModalConfig,walletRegistryUrl:walletRegistryUrl},Symbol.toStringTag,{value:"Module"}));function createGetAccountsMiddleware({getAccounts:e}){return createAsyncMiddleware(async(t,r,i)=>{const{method:n}=t;if("getAccounts"!==n)return i();if(!e)throw new Error("WalletMiddleware - opts.getAccounts not provided");const o=await e(t);r.result=o})}function createRequestAccountsMiddleware({requestAccounts:e}){return createAsyncMiddleware(async(t,r,i)=>{const{method:n}=t;if("requestAccounts"!==n)return i();if(!e)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const o=await e(t);r.result=o})}function createGenericJRPCMiddleware(e,t){return createAsyncMiddleware(async(r,i,n)=>{const{method:o}=r;if(o!==e)return n();if(!t)throw new Error(`WalletMiddleware - ${e} not provided`);const a=await t(r);i.result=a})}function createSolanaMiddleware(e){const{getAccounts:t,requestAccounts:r,signTransaction:i,signAndSendTransaction:n,signAllTransactions:o,signMessage:a,getPrivateKey:s,getSecretKey:u,getPublicKey:l}=e;return mergeMiddleware([createRequestAccountsMiddleware({requestAccounts:r}),createGetAccountsMiddleware({getAccounts:t}),createGenericJRPCMiddleware("signTransaction",i),createGenericJRPCMiddleware("signAndSendTransaction",n),createGenericJRPCMiddleware("signAllTransactions",o),createGenericJRPCMiddleware("signMessage",a),createGenericJRPCMiddleware("solanaPrivateKey",s),createGenericJRPCMiddleware("private_key",s),createGenericJRPCMiddleware("public_key",l),createGenericJRPCMiddleware("solanaPublicKey",l),createGenericJRPCMiddleware("solanaSecretKey",u)])}function createChainSwitchMiddleware({addNewChainConfig:e,switchSolanaChain:t}){return mergeMiddleware([createGenericJRPCMiddleware("addSolanaChain",e),createGenericJRPCMiddleware("switchSolanaChain",t)])}function createAccountMiddleware({updatePrivatekey:e}){return mergeMiddleware([createGenericJRPCMiddleware("updateAccount",e)])}function createChainIdMiddleware(e){return(t,r,i,n)=>"solana_chainId"===t.method?(r.result=e,n()):i()}function createProviderConfigMiddleware(e){return(t,r,i,n)=>"solana_provider_config"===t.method?(r.result=e,n()):i()}function createConfigMiddleware(e){const{chainId:t}=e;return mergeMiddleware([createChainIdMiddleware(t),createProviderConfigMiddleware(e)])}function createJsonRpcClient(e){const{rpcTarget:t}=e,r=createFetchMiddleware({rpcTarget:t});return{networkMiddleware:mergeMiddleware([createConfigMiddleware(e),r]),fetchMiddleware:r}}var src$2,hasRequiredSrc$2,bs58$4,hasRequiredBs58$2;function requireSrc$2(){if(hasRequiredSrc$2)return src$2;return hasRequiredSrc$2=1,src$2=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var n=e.charAt(i),o=n.charCodeAt(0);if(255!==t[o])throw new TypeError(n+" is ambiguous");t[o]=i}var a=e.length,s=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function c(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,i=0,n=0;e[r]===s;)i++,r++;for(var o=(e.length-r)*u+1>>>0,l=new Uint8Array(o);e[r];){var c=e.charCodeAt(r);if(c>255)return;var h=t[c];if(255===h)return;for(var d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=a*l[f]>>>0,l[f]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,r++}for(var p=o-n;p!==o&&0===l[p];)p++;for(var m=new Uint8Array(i+(o-p)),g=i;p!==o;)m[g++]=l[p++];return m}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,o=t.length;n!==o&&0===t[n];)n++,r++;for(var u=(o-n)*l+1>>>0,c=new Uint8Array(u);n!==o;){for(var h=t[n],d=0,f=u-1;(0!==h||d<i)&&-1!==f;f--,d++)h+=256*c[f]>>>0,c[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");i=d,n++}for(var p=u-i;p!==u&&0===c[p];)p++;for(var m=s.repeat(r);p<u;++p)m+=e.charAt(c[p]);return m},decodeUnsafe:c,decode:function(e){var t=c(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}}function requireBs58$2(){if(hasRequiredBs58$2)return bs58$4;hasRequiredBs58$2=1;const e=requireSrc$2();return bs58$4=e("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}var bs58Exports$1=requireBs58$2();const bs58$3=getDefaultExportFromCjs$2(bs58Exports$1),U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(e,t=!1){return t?{h:Number(e&U32_MASK64),l:Number(e>>_32n&U32_MASK64)}:{h:0|Number(e>>_32n&U32_MASK64),l:0|Number(e&U32_MASK64)}}function split(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){const{h:o,l:a}=fromBig(e[n],t);[r[n],i[n]]=[o,a]}return[r,i]}const toBig=(e,t)=>BigInt(e>>>0)<<_32n|BigInt(t>>>0),shrSH=(e,t,r)=>e>>>r,shrSL=(e,t,r)=>e<<32-r|t>>>r,rotrSH=(e,t,r)=>e>>>r|t<<32-r,rotrSL=(e,t,r)=>e<<32-r|t>>>r,rotrBH=(e,t,r)=>e<<64-r|t>>>r-32,rotrBL=(e,t,r)=>e>>>r-32|t<<64-r,rotr32H=(e,t)=>t,rotr32L=(e,t)=>e,rotlSH=(e,t,r)=>e<<r|t>>>32-r,rotlSL=(e,t,r)=>t<<r|e>>>32-r,rotlBH=(e,t,r)=>t<<r-32|e>>>64-r,rotlBL=(e,t,r)=>e<<r-32|t>>>64-r;function add(e,t,r,i){const n=(t>>>0)+(i>>>0);return{h:e+r+(n/2**32|0)|0,l:0|n}}const add3L=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H=(e,t,r,i)=>t+r+i+(e/2**32|0)|0,add4L=(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),add4H=(e,t,r,i,n)=>t+r+i+n+(e/2**32|0)|0,add5L=(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0),add5H=(e,t,r,i,n,o)=>t+r+i+n+o+(e/2**32|0)|0,u64$1={fromBig:fromBig,split:split,toBig:toBig,shrSH:shrSH,shrSL:shrSL,rotrSH:rotrSH,rotrSL:rotrSL,rotrBH:rotrBH,rotrBL:rotrBL,rotr32H:rotr32H,rotr32L:rotr32L,rotlSH:rotlSH,rotlSL:rotlSL,rotlBH:rotlBH,rotlBL:rotlBL,add:add,add3L:add3L,add3H:add3H,add4L:add4L,add4H:add4H,add5H:add5H,add5L:add5L},[SHA512_Kh,SHA512_Kl]=(()=>u64$1.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends HashMD$1{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:o,Dh:a,Dl:s,Eh:u,El:l,Fh:c,Fl:h,Gh:d,Gl:f,Hh:p,Hl:m}=this;return[e,t,r,i,n,o,a,s,u,l,c,h,d,f,p,m]}set(e,t,r,i,n,o,a,s,u,l,c,h,d,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|o,this.Dh=0|a,this.Dl=0|s,this.Eh=0|u,this.El=0|l,this.Fh=0|c,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let b=0;b<16;b++,t+=4)SHA512_W_H[b]=e.getUint32(t),SHA512_W_L[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const e=0|SHA512_W_H[b-15],t=0|SHA512_W_L[b-15],r=u64$1.rotrSH(e,t,1)^u64$1.rotrSH(e,t,8)^u64$1.shrSH(e,t,7),i=u64$1.rotrSL(e,t,1)^u64$1.rotrSL(e,t,8)^u64$1.shrSL(e,t,7),n=0|SHA512_W_H[b-2],o=0|SHA512_W_L[b-2],a=u64$1.rotrSH(n,o,19)^u64$1.rotrBH(n,o,61)^u64$1.shrSH(n,o,6),s=u64$1.rotrSL(n,o,19)^u64$1.rotrBL(n,o,61)^u64$1.shrSL(n,o,6),u=u64$1.add4L(i,s,SHA512_W_L[b-7],SHA512_W_L[b-16]),l=u64$1.add4H(u,r,a,SHA512_W_H[b-7],SHA512_W_H[b-16]);SHA512_W_H[b]=0|l,SHA512_W_L[b]=0|u}let{Ah:r,Al:i,Bh:n,Bl:o,Ch:a,Cl:s,Dh:u,Dl:l,Eh:c,El:h,Fh:d,Fl:f,Gh:p,Gl:m,Hh:g,Hl:y}=this;for(let b=0;b<80;b++){const e=u64$1.rotrSH(c,h,14)^u64$1.rotrSH(c,h,18)^u64$1.rotrBH(c,h,41),t=u64$1.rotrSL(c,h,14)^u64$1.rotrSL(c,h,18)^u64$1.rotrBL(c,h,41),w=c&d^~c&p,v=h&f^~h&m,_=u64$1.add5L(y,t,v,SHA512_Kl[b],SHA512_W_L[b]),E=u64$1.add5H(_,g,e,w,SHA512_Kh[b],SHA512_W_H[b]),S=0|_,A=u64$1.rotrSH(r,i,28)^u64$1.rotrBH(r,i,34)^u64$1.rotrBH(r,i,39),M=u64$1.rotrSL(r,i,28)^u64$1.rotrBL(r,i,34)^u64$1.rotrBL(r,i,39),R=r&n^r&a^n&a,x=i&o^i&s^o&s;g=0|p,y=0|m,p=0|d,m=0|f,d=0|c,f=0|h,({h:c,l:h}=u64$1.add(0|u,0|l,0|E,0|S)),u=0|a,l=0|s,a=0|n,s=0|o,n=0|r,o=0|i;const k=u64$1.add3L(S,M,x);r=u64$1.add3H(k,E,A,R),i=0|k}({h:r,l:i}=u64$1.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:o}=u64$1.add(0|this.Bh,0|this.Bl,0|n,0|o)),({h:a,l:s}=u64$1.add(0|this.Ch,0|this.Cl,0|a,0|s)),({h:u,l:l}=u64$1.add(0|this.Dh,0|this.Dl,0|u,0|l)),({h:c,l:h}=u64$1.add(0|this.Eh,0|this.El,0|c,0|h)),({h:d,l:f}=u64$1.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:m}=u64$1.add(0|this.Gh,0|this.Gl,0|p,0|m)),({h:g,l:y}=u64$1.add(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(r,i,n,o,a,s,u,l,c,h,d,f,p,m,g,y)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sha512$2=wrapConstructor$1(()=>new SHA512),_0n=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_8n$1=BigInt(8),VERIFY_DEFAULT={zip215:!0};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validateOpts(e){const t=validateBasic(e);return validateObject(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function twistedEdwards(e){const t=validateOpts(e),{Fp:r,n:i,prehash:n,hash:o,randomBytes:a,nByteLength:s,h:u}=t,l=_2n$1<<BigInt(8*s)-_1n$1,c=r.create,h=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(i){return{isValid:!1,value:_0n}}}),d=t.adjustScalarBytes||(e=>e),f=t.domain||((e,t,r)=>{if(t.length||r)throw new Error("Contexts/pre-hash are not supported");return e}),p=e=>"bigint"==typeof e&&_0n<e,m=(e,t)=>p(e)&&p(t)&&e<t,g=e=>e===_0n||m(e,l);function y(e,t){if(m(e,t))return e;throw new Error(`Expected valid scalar < ${t}, got ${typeof e} ${e}`)}function b(e){return e===_0n?e:y(e,i)}const w=new Map;function v(e){if(!(e instanceof _))throw new Error("ExtendedPoint expected")}class _{constructor(e,t,r,i){if(this.ex=e,this.ey=t,this.ez=r,this.et=i,!g(e))throw new Error("x required");if(!g(t))throw new Error("y required");if(!g(r))throw new Error("z required");if(!g(i))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof _)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};if(!g(t)||!g(r))throw new Error("invalid affine point");return new _(t,r,_1n$1,c(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map(e=>e.ez));return e.map((e,r)=>e.toAffine(t[r])).map(_.fromAffine)}_setWindowSize(e){this._WINDOW_SIZE=e,w.delete(this)}assertValidity(){const{a:e,d:r}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:i,ey:n,ez:o,et:a}=this,s=c(i*i),u=c(n*n),l=c(o*o),h=c(l*l),d=c(s*e);if(c(l*c(d+u))!==c(h+c(r*c(s*u))))throw new Error("bad point: equation left != right (1)");if(c(i*n)!==c(o*a))throw new Error("bad point: equation left != right (2)")}equals(e){v(e);const{ex:t,ey:r,ez:i}=this,{ex:n,ey:o,ez:a}=e,s=c(t*a),u=c(n*i),l=c(r*a),h=c(o*i);return s===u&&l===h}is0(){return this.equals(_.ZERO)}negate(){return new _(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:e}=t,{ex:r,ey:i,ez:n}=this,o=c(r*r),a=c(i*i),s=c(_2n$1*c(n*n)),u=c(e*o),l=r+i,h=c(c(l*l)-o-a),d=u+a,f=d-s,p=u-a,m=c(h*f),g=c(d*p),y=c(h*p),b=c(f*d);return new _(m,g,b,y)}add(e){v(e);const{a:r,d:i}=t,{ex:n,ey:o,ez:a,et:s}=this,{ex:u,ey:l,ez:h,et:d}=e;if(r===BigInt(-1)){const e=c((o-n)*(l+u)),t=c((o+n)*(l-u)),r=c(t-e);if(r===_0n)return this.double();const i=c(a*_2n$1*d),f=c(s*_2n$1*h),p=f+i,m=t+e,g=f-i,y=c(p*r),b=c(m*g),w=c(p*g),v=c(r*m);return new _(y,b,v,w)}const f=c(n*u),p=c(o*l),m=c(s*i*d),g=c(a*h),y=c((n+o)*(u+l)-f-p),b=g-m,w=g+m,E=c(p-r*f),S=c(y*b),A=c(w*E),M=c(y*E),R=c(b*w);return new _(S,A,R,M)}subtract(e){return this.add(e.negate())}wNAF(e){return A.wNAFCached(this,w,e,_.normalizeZ)}multiply(e){const{p:t,f:r}=this.wNAF(y(e,i));return _.normalizeZ([t,r])[0]}multiplyUnsafe(e){let t=b(e);return t===_0n?S:this.equals(S)||t===_1n$1?this:this.equals(E)?this.wNAF(t).p:A.unsafeLadder(this,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return A.unsafeLadder(this,i).is0()}toAffine(e){const{ex:t,ey:i,ez:n}=this,o=this.is0();null==e&&(e=o?_8n$1:r.inv(n));const a=c(t*e),s=c(i*e),u=c(n*e);if(o)return{x:_0n,y:_1n$1};if(u!==_1n$1)throw new Error("invZ was invalid");return{x:a,y:s}}clearCofactor(){const{h:e}=t;return e===_1n$1?this:this.multiplyUnsafe(e)}static fromHex(e,i=!1){const{d:n,a:o}=t,a=r.BYTES,s=(e=ensureBytes("pointHex",e,a)).slice(),u=e[a-1];s[a-1]=-129&u;const d=bytesToNumberLE(s);d===_0n||y(d,i?l:r.ORDER);const f=c(d*d),p=c(f-_1n$1),m=c(n*f-o);let{isValid:g,value:b}=h(p,m);if(!g)throw new Error("Point.fromHex: invalid y coordinate");const w=(b&_1n$1)===_1n$1,v=!!(128&u);if(!i&&b===_0n&&v)throw new Error("Point.fromHex: x=0 and x_0=1");return v!==w&&(b=c(-b)),_.fromAffine({x:b,y:d})}static fromPrivateKey(e){return x(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),i=numberToBytesLE(t,r.BYTES);return i[i.length-1]|=e&_1n$1?128:0,i}toHex(){return bytesToHex(this.toRawBytes())}}_.BASE=new _(t.Gx,t.Gy,_1n$1,c(t.Gx*t.Gy)),_.ZERO=new _(_0n,_1n$1,_1n$1,_0n);const{BASE:E,ZERO:S}=_,A=wNAF(_,8*s);function M(e){return mod(e,i)}function R(e){return M(bytesToNumberLE(e))}function x(e){const t=s;e=ensureBytes("private key",e,t);const r=ensureBytes("hashed private key",o(e),2*t),i=d(r.slice(0,t)),n=r.slice(t,2*t),a=R(i),u=E.multiply(a),l=u.toRawBytes();return{head:i,prefix:n,scalar:a,point:u,pointBytes:l}}function k(e=new Uint8Array,...t){const r=concatBytes(...t);return R(o(f(r,ensureBytes("context",e),!!n)))}const T=VERIFY_DEFAULT;E._setWindowSize(8);return{CURVE:t,getPublicKey:function(e){return x(e).pointBytes},sign:function(e,t,i={}){e=ensureBytes("message",e),n&&(e=n(e));const{prefix:o,scalar:a,pointBytes:u}=x(t),l=k(i.context,o,e),c=E.multiply(l).toRawBytes(),h=M(l+k(i.context,c,u,e)*a);return b(h),ensureBytes("result",concatBytes(c,numberToBytesLE(h,r.BYTES)),2*s)},verify:function(e,t,i,o=T){const{context:a,zip215:s}=o,u=r.BYTES;e=ensureBytes("signature",e,2*u),t=ensureBytes("message",t),n&&(t=n(t));const l=bytesToNumberLE(e.slice(u,2*u));let c,h,d;try{c=_.fromHex(i,s),h=_.fromHex(e.slice(0,u),s),d=E.multiplyUnsafe(l)}catch(p){return!1}if(!s&&c.isSmallOrder())return!1;const f=k(a,h.toRawBytes(),c.toRawBytes(),t);return h.add(c.multiplyUnsafe(f)).subtract(d).clearCofactor().equals(_.ZERO)},ExtendedPoint:_,utils:{getExtendedPublicKey:x,randomPrivateKey:()=>a(r.BYTES),precompute:(e=8,t=_.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _1n=BigInt(1),_2n=BigInt(2);BigInt(3);const _5n=BigInt(5),_8n=BigInt(8);function ed25519_pow_2_252_3(e){const t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),o=ED25519_P,a=e*e%o*e%o,s=pow2(a,_2n,o)*a%o,u=pow2(s,_1n,o)*e%o,l=pow2(u,_5n,o)*u%o,c=pow2(l,t,o)*l%o,h=pow2(c,r,o)*c%o,d=pow2(h,i,o)*h%o,f=pow2(d,n,o)*d%o,p=pow2(f,n,o)*d%o,m=pow2(p,t,o)*l%o;return{pow_p_5_8:pow2(m,_2n,o)*e%o,b2:a}}function adjustScalarBytes(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function uvRatio(e,t){const r=ED25519_P,i=mod(t*t*t,r),n=mod(i*i*t,r);let o=mod(e*i*ed25519_pow_2_252_3(e*n).pow_p_5_8,r);const a=mod(t*o*o,r),s=o,u=mod(o*ED25519_SQRT_M1,r),l=a===e,c=a===mod(-e,r),h=a===mod(-e*ED25519_SQRT_M1,r);return l&&(o=s),(c||h)&&(o=u),isNegativeLE(o,r)&&(o=mod(-o,r)),{isValid:l||c,value:o}}const Fp=(()=>Field(ED25519_P,void 0,!0))(),ed25519Defaults=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Fp,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:_8n,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512$2,randomBytes:randomBytes$3,adjustScalarBytes:adjustScalarBytes,uvRatio:uvRatio}))(),ed25519=(()=>twistedEdwards(ed25519Defaults))();var src$1,hasRequiredSrc$1,bs58$2,hasRequiredBs58$1;function requireSrc$1(){if(hasRequiredSrc$1)return src$1;hasRequiredSrc$1=1;var e=requireSafeBuffer$2().Buffer;return src$1=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var o=t.charAt(n),a=o.charCodeAt(0);if(255!==r[a])throw new TypeError(o+" is ambiguous");r[a]=n}var s=t.length,u=t.charAt(0),l=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return e.alloc(0);for(var i=0,n=0,o=0;t[i]===u;)n++,i++;for(var a=(t.length-i)*l+1>>>0,c=new Uint8Array(a);i<t.length;){var h=t.charCodeAt(i);if(h>255)return;var d=r[h];if(255===d)return;for(var f=0,p=a-1;(0!==d||f<o)&&-1!==p;p--,f++)d+=s*c[p]>>>0,c[p]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");o=f,i++}for(var m=a-o;m!==a&&0===c[m];)m++;var g=e.allocUnsafe(n+(a-m));g.fill(0,0,n);for(var y=n;m!==a;)g[y++]=c[m++];return g}return{encode:function(r){if((Array.isArray(r)||r instanceof Uint8Array)&&(r=e.from(r)),!e.isBuffer(r))throw new TypeError("Expected Buffer");if(0===r.length)return"";for(var i=0,n=0,o=0,a=r.length;o!==a&&0===r[o];)o++,i++;for(var l=(a-o)*c+1>>>0,h=new Uint8Array(l);o!==a;){for(var d=r[o],f=0,p=l-1;(0!==d||f<n)&&-1!==p;p--,f++)d+=256*h[p]>>>0,h[p]=d%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");n=f,o++}for(var m=l-n;m!==l&&0===h[m];)m++;for(var g=u.repeat(i);m<l;++m)g+=t.charAt(h[m]);return g},decodeUnsafe:h,decode:function(e){var t=h(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}}function requireBs58$1(){if(hasRequiredBs58$1)return bs58$2;hasRequiredBs58$1=1;var e=requireSrc$1();return bs58$2=e("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}var bs58Exports=requireBs58$1();const bs58$1=getDefaultExportFromCjs$2(bs58Exports);
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function abytes(e,...t){if(!isBytes(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function aexists(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function aoutput(e,t){abytes(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function clean(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function createView(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function rotr(e,t){return e<<32-t|e>>>t}function utf8ToBytes(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function toBytes(e){return"string"==typeof e&&(e=utf8ToBytes(e)),abytes(e),e}class Hash{}function createHasher(e){const t=t=>e().update(toBytes(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function setBigUint64(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);const n=BigInt(32),o=BigInt(4294967295),a=Number(r>>n&o),s=Number(r&o),u=i?4:0,l=i?0:4;e.setUint32(t+u,a,i),e.setUint32(t+l,s,i)}function Chi(e,t,r){return e&t^~e&r}function Maj(e,t,r){return e&t^e&r^t&r}class HashMD extends Hash{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){aexists(this),abytes(e=toBytes(e));const{view:t,buffer:r,blockLen:i}=this,n=e.length;for(let o=0;o<n;){const a=Math.min(i-this.pos,n-o);if(a===i){const t=createView(e);for(;i<=n-o;o+=i)this.process(t,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists(this),aoutput(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:n}=this;let{pos:o}=this;t[o++]=128,clean(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let c=o;c<i;c++)t[c]=0;setBigUint64(r,i-8,BigInt(8*this.length),n),this.process(r,0);const a=createView(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=s/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)a.setUint32(4*c,l[c],n)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:n,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=n,e.length=i,e.pos=a,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_K=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_W=new Uint32Array(64);class SHA256 extends HashMD{constructor(e=32){super(64,e,8,!1),this.A=0|SHA256_IV[0],this.B=0|SHA256_IV[1],this.C=0|SHA256_IV[2],this.D=0|SHA256_IV[3],this.E=0|SHA256_IV[4],this.F=0|SHA256_IV[5],this.G=0|SHA256_IV[6],this.H=0|SHA256_IV[7]}get(){const{A:e,B:t,C:r,D:i,E:n,F:o,G:a,H:s}=this;return[e,t,r,i,n,o,a,s]}set(e,t,r,i,n,o,a,s){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|o,this.G=0|a,this.H=0|s}process(e,t){for(let c=0;c<16;c++,t+=4)SHA256_W[c]=e.getUint32(t,!1);for(let c=16;c<64;c++){const e=SHA256_W[c-15],t=SHA256_W[c-2],r=rotr(e,7)^rotr(e,18)^e>>>3,i=rotr(t,17)^rotr(t,19)^t>>>10;SHA256_W[c]=i+SHA256_W[c-7]+r+SHA256_W[c-16]|0}let{A:r,B:i,C:n,D:o,E:a,F:s,G:u,H:l}=this;for(let c=0;c<64;c++){const e=l+(rotr(a,6)^rotr(a,11)^rotr(a,25))+Chi(a,s,u)+SHA256_K[c]+SHA256_W[c]|0,t=(rotr(r,2)^rotr(r,13)^rotr(r,22))+Maj(r,i,n)|0;l=u,u=s,s=a,a=o+e|0,o=n,n=i,i=r,r=e+t|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,o=o+this.D|0,a=a+this.E|0,s=s+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,i,n,o,a,s,u,l)}roundClean(){clean(SHA256_W)}destroy(){this.set(0,0,0,0,0,0,0,0),clean(this.buffer)}}const sha256$1=createHasher(()=>new SHA256),sha256=sha256$1;var lib={},src,hasRequiredSrc,bs58,hasRequiredBs58;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var e=requireSafeBuffer$2().Buffer;return src=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var o=t.charAt(n),a=o.charCodeAt(0);if(255!==r[a])throw new TypeError(o+" is ambiguous");r[a]=n}var s=t.length,u=t.charAt(0),l=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return e.alloc(0);for(var i=0,n=0,o=0;t[i]===u;)n++,i++;for(var a=(t.length-i)*l+1>>>0,c=new Uint8Array(a);i<t.length;){var h=t.charCodeAt(i);if(h>255)return;var d=r[h];if(255===d)return;for(var f=0,p=a-1;(0!==d||f<o)&&-1!==p;p--,f++)d+=s*c[p]>>>0,c[p]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");o=f,i++}for(var m=a-o;m!==a&&0===c[m];)m++;var g=e.allocUnsafe(n+(a-m));g.fill(0,0,n);for(var y=n;m!==a;)g[y++]=c[m++];return g}return{encode:function(r){if((Array.isArray(r)||r instanceof Uint8Array)&&(r=e.from(r)),!e.isBuffer(r))throw new TypeError("Expected Buffer");if(0===r.length)return"";for(var i=0,n=0,o=0,a=r.length;o!==a&&0===r[o];)o++,i++;for(var l=(a-o)*c+1>>>0,h=new Uint8Array(l);o!==a;){for(var d=r[o],f=0,p=l-1;(0!==d||f<n)&&-1!==p;p--,f++)d+=256*h[p]>>>0,h[p]=d%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");n=f,o++}for(var m=l-n;m!==l&&0===h[m];)m++;for(var g=u.repeat(i);m<l;++m)g+=t.charAt(h[m]);return g},decodeUnsafe:h,decode:function(e){var t=h(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}}function requireBs58(){if(hasRequiredBs58)return bs58;hasRequiredBs58=1;var e=requireSrc();return bs58=e("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}function inRange(e,t,r){return t<=e&&e<=r}function ToDictionary(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function stringToCodePoints(e){for(var t=String(e),r=t.length,i=0,n=[];i<r;){var o=t.charCodeAt(i);if(o<55296||o>57343)n.push(o);else if(56320<=o&&o<=57343)n.push(65533);else if(55296<=o&&o<=56319)if(i===r-1)n.push(65533);else{var a=e.charCodeAt(i+1);if(56320<=a&&a<=57343){var s=1023&o,u=1023&a;n.push(65536+(s<<10)+u),i+=1}else n.push(65533)}i+=1}return n}function codePointsToString(e){for(var t="",r=0;r<e.length;++r){var i=e[r];i<=65535?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return t}var end_of_stream=-1;function Stream(e){this.tokens=[].slice.call(e)}Stream.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():end_of_stream},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var finished=-1;function decoderError(e,t){if(e)throw TypeError("Decoder error");return t||65533}var DEFAULT_ENCODING="utf-8";function TextDecoder$1(e,t){if(!(this instanceof TextDecoder$1))return new TextDecoder$1(e,t);if((e=void 0!==e?String(e).toLowerCase():DEFAULT_ENCODING)!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");t=ToDictionary(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function TextEncoder$1(e,t){if(!(this instanceof TextEncoder$1))return new TextEncoder$1(e,t);if((e=void 0!==e?String(e).toLowerCase():DEFAULT_ENCODING)!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");t=ToDictionary(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function UTF8Decoder(e){var t=e.fatal,r=0,i=0,n=0,o=128,a=191;this.handler=function(e,s){if(s===end_of_stream&&0!==n)return n=0,decoderError(t);if(s===end_of_stream)return finished;if(0===n){if(inRange(s,0,127))return s;if(inRange(s,194,223))n=1,r=s-192;else if(inRange(s,224,239))224===s&&(o=160),237===s&&(a=159),n=2,r=s-224;else{if(!inRange(s,240,244))return decoderError(t);240===s&&(o=144),244===s&&(a=143),n=3,r=s-240}return r<<=6*n,null}if(!inRange(s,o,a))return r=n=i=0,o=128,a=191,e.prepend(s),decoderError(t);if(o=128,a=191,r+=s-128<<6*(n-(i+=1)),i!==n)return null;var u=r;return r=n=i=0,u}}function UTF8Encoder(e){e.fatal,this.handler=function(e,t){if(t===end_of_stream)return finished;if(inRange(t,0,127))return t;var r,i;inRange(t,128,2047)?(r=1,i=192):inRange(t,2048,65535)?(r=2,i=224):inRange(t,65536,1114111)&&(r=3,i=240);for(var n=[(t>>6*r)+i];r>0;){var o=t>>6*(r-1);n.push(128|63&o),r-=1}return n}}TextDecoder$1.prototype={decode:function(e,t){var r;r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=ToDictionary(t),this._streaming||(this._decoder=new UTF8Decoder({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var i,n=new Stream(r),o=[];!n.endOfStream()&&(i=this._decoder.handler(n,n.read()))!==finished;)null!==i&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));if(!this._streaming){do{if((i=this._decoder.handler(n,n.read()))===finished)break;null!==i&&(Array.isArray(i)?o.push.apply(o,i):o.push(i))}while(!n.endOfStream());this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),codePointsToString(o)}},TextEncoder$1.prototype={encode:function(e,t){e=e?String(e):"",t=ToDictionary(t),this._streaming||(this._encoder=new UTF8Encoder(this._options)),this._streaming=Boolean(t.stream);for(var r,i=[],n=new Stream(stringToCodePoints(e));!n.endOfStream()&&(r=this._encoder.handler(n,n.read()))!==finished;)Array.isArray(r)?i.push.apply(i,r):i.push(r);if(!this._streaming){for(;(r=this._encoder.handler(n,n.read()))!==finished;)Array.isArray(r)?i.push.apply(i,r):i.push(r);this._encoder=null}return new Uint8Array(i)}};const encoding=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:TextDecoder$1,TextEncoder:TextEncoder$1},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(encoding);var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var e=lib&&lib.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=lib&&lib.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=lib&&lib.__decorate||function(e,t,r,i){var n,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=lib&&lib.__importStar||function(r){if(r&&r.__esModule)return r;var i={};if(null!=r)for(var n in r)"default"!==n&&Object.hasOwnProperty.call(r,n)&&e(i,r,n);return t(i,r),i},n=lib&&lib.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lib,"__esModule",{value:!0}),lib.deserializeUnchecked=lib.deserialize=lib.serialize=lib.BinaryReader=lib.BinaryWriter=lib.BorshError=lib.baseDecode=lib.baseEncode=void 0;const o=n(requireBn$6()),a=n(requireBs58()),s=i(require$$2),u=new("function"!=typeof TextDecoder?s.TextDecoder:TextDecoder)("utf-8",{fatal:!0});lib.baseEncode=function(e){return"string"==typeof e&&(e=Buffer.from(e,"utf8")),a.default.encode(Buffer.from(e))},lib.baseDecode=function(e){return Buffer.from(a.default.decode(e))};const l=1024;class c extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}lib.BorshError=c;class h{constructor(){this.buf=Buffer.alloc(l),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(l)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new o.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(l)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function d(e,t,r){const i=r.value;r.value=function(...e){try{return i.apply(this,e)}catch(t){if(t instanceof RangeError){const e=t.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e)>=0)throw new c("Reached the end of buffer when deserializing")}throw t}}}lib.BinaryWriter=h;class f{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new o.default(e,"le")}readU128(){const e=this.readBuffer(16);return new o.default(e,"le")}readU256(){const e=this.readBuffer(32);return new o.default(e,"le")}readU512(){const e=this.readBuffer(64);return new o.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new c(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return u.decode(t)}catch(r){throw new c(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let i=0;i<t;++i)r.push(e());return r}}function p(e){return e.charAt(0).toUpperCase()+e.slice(1)}function m(e,t,r,i,n){try{if("string"==typeof i)n[`write${p(i)}`](r);else if(i instanceof Array)if("number"==typeof i[0]){if(r.length!==i[0])throw new c(`Expecting byte array of length ${i[0]}, but got ${r.length} bytes`);n.writeFixedArray(r)}else if(2===i.length&&"number"==typeof i[1]){if(r.length!==i[1])throw new c(`Expecting byte array of length ${i[1]}, but got ${r.length} bytes`);for(let t=0;t<i[1];t++)m(e,null,r[t],i[0],n)}else n.writeArray(r,r=>{m(e,t,r,i[0],n)});else if(void 0!==i.kind)switch(i.kind){case"option":null==r?n.writeU8(0):(n.writeU8(1),m(e,t,r,i.type,n));break;case"map":n.writeU32(r.size),r.forEach((r,o)=>{m(e,t,o,i.key,n),m(e,t,r,i.value,n)});break;default:throw new c(`FieldType ${i} unrecognized`)}else g(e,r,n)}catch(o){throw o instanceof c&&o.addToFieldPath(t),o}}function g(e,t,r){if("function"==typeof t.borshSerialize)return void t.borshSerialize(r);const i=e.get(t.constructor);if(!i)throw new c(`Class ${t.constructor.name} is missing in schema`);if("struct"===i.kind)i.fields.map(([i,n])=>{m(e,i,t[i],n,r)});else{if("enum"!==i.kind)throw new c(`Unexpected schema kind: ${i.kind} for ${t.constructor.name}`);{const n=t[i.field];for(let o=0;o<i.values.length;++o){const[a,s]=i.values[o];if(a===n){r.writeU8(o),m(e,a,t[a],s,r);break}}}}}function y(e,t,r,i){try{if("string"==typeof r)return i[`read${p(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return i.readFixedArray(r[0]);if("number"==typeof r[1]){const t=[];for(let n=0;n<r[1];n++)t.push(y(e,null,r[0],i));return t}return i.readArray(()=>y(e,t,r[0],i))}if("option"===r.kind){return i.readU8()?y(e,t,r.type,i):void 0}if("map"===r.kind){let n=new Map;const o=i.readU32();for(let a=0;a<o;a++){const o=y(e,t,r.key,i),a=y(e,t,r.value,i);n.set(o,a)}return n}return b(e,r,i)}catch(n){throw n instanceof c&&n.addToFieldPath(t),n}}function b(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);const i=e.get(t);if(!i)throw new c(`Class ${t.name} is missing in schema`);if("struct"===i.kind){const i={};for(const[n,o]of e.get(t).fields)i[n]=y(e,n,o,r);return new t(i)}if("enum"===i.kind){const n=r.readU8();if(n>=i.values.length)throw new c(`Enum index: ${n} is out of range`);const[o,a]=i.values[n],s=y(e,o,a,r);return new t({[o]:s})}throw new c(`Unexpected schema kind: ${i.kind} for ${t.constructor.name}`)}return r([d],f.prototype,"readU8",null),r([d],f.prototype,"readU16",null),r([d],f.prototype,"readU32",null),r([d],f.prototype,"readU64",null),r([d],f.prototype,"readU128",null),r([d],f.prototype,"readU256",null),r([d],f.prototype,"readU512",null),r([d],f.prototype,"readString",null),r([d],f.prototype,"readFixedArray",null),r([d],f.prototype,"readArray",null),lib.BinaryReader=f,lib.serialize=function(e,t,r=h){const i=new r;return g(e,t,i),i.toArray()},lib.deserialize=function(e,t,r,i=f){const n=new i(r),o=b(e,t,n);if(n.offset<r.length)throw new c(`Unexpected ${r.length-n.offset} bytes after deserialized data`);return o},lib.deserializeUnchecked=function(e,t,r,i=f){return b(e,t,new i(r))},lib}var libExports=requireLib(),Layout={},hasRequiredLayout;function requireLayout(){if(hasRequiredLayout)return Layout;hasRequiredLayout=1,Object.defineProperty(Layout,"__esModule",{value:!0}),Layout.s16=Layout.s8=Layout.nu64be=Layout.u48be=Layout.u40be=Layout.u32be=Layout.u24be=Layout.u16be=Layout.nu64=Layout.u48=Layout.u40=Layout.u32=Layout.u24=Layout.u16=Layout.u8=Layout.offset=Layout.greedy=Layout.Constant=Layout.UTF8=Layout.CString=Layout.Blob=Layout.Boolean=Layout.BitField=Layout.BitStructure=Layout.VariantLayout=Layout.Union=Layout.UnionLayoutDiscriminator=Layout.UnionDiscriminator=Layout.Structure=Layout.Sequence=Layout.DoubleBE=Layout.Double=Layout.FloatBE=Layout.Float=Layout.NearInt64BE=Layout.NearInt64=Layout.NearUInt64BE=Layout.NearUInt64=Layout.IntBE=Layout.Int=Layout.UIntBE=Layout.UInt=Layout.OffsetLayout=Layout.GreedyCount=Layout.ExternalLayout=Layout.bindConstructorLayout=Layout.nameWithProperty=Layout.Layout=Layout.uint8ArrayToBuffer=Layout.checkUint8Array=void 0,Layout.constant=Layout.utf8=Layout.cstr=Layout.blob=Layout.unionLayoutDiscriminator=Layout.union=Layout.seq=Layout.bits=Layout.struct=Layout.f64be=Layout.f64=Layout.f32be=Layout.f32=Layout.ns64be=Layout.s48be=Layout.s40be=Layout.s32be=Layout.s24be=Layout.s16be=Layout.ns64=Layout.s48=Layout.s40=Layout.s32=Layout.s24=void 0;const e=requireDist$2();function t(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function r(r){return t(r),e.Buffer.from(r.buffer,r.byteOffset,r.length)}Layout.checkUint8Array=t,Layout.uint8ArrayToBuffer=r;let i=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};function n(e,t){return t.property?e+"["+t.property+"]":e}Layout.Layout=i,Layout.nameWithProperty=n,Layout.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof i))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,r)=>t.decode(e,r),writable:!0})};class o extends i{isCount(){throw new Error("ExternalLayout is abstract")}}Layout.ExternalLayout=o;class a extends o{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,r=0){t(e);const i=e.length-r;return Math.floor(i/this.elementSpan)}encode(e,t,r){return 0}}Layout.GreedyCount=a;class s extends o{constructor(e,t=0,r){if(!(e instanceof i))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof u||this.layout instanceof l}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}Layout.OffsetLayout=s;class u extends i{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return r(e).readUIntLE(t,this.span)}encode(e,t,i=0){return r(t).writeUIntLE(e,i,this.span),this.span}}Layout.UInt=u;class l extends i{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return r(e).readUIntBE(t,this.span)}encode(e,t,i=0){return r(t).writeUIntBE(e,i,this.span),this.span}}Layout.UIntBE=l;class c extends i{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return r(e).readIntLE(t,this.span)}encode(e,t,i=0){return r(t).writeIntLE(e,i,this.span),this.span}}Layout.Int=c;class h extends i{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return r(e).readIntBE(t,this.span)}encode(e,t,i=0){return r(t).writeIntBE(e,i,this.span),this.span}}Layout.IntBE=h;const d=Math.pow(2,32);function f(e){const t=Math.floor(e/d);return{hi32:t,lo32:e-t*d}}function p(e,t){return e*d+t}class m extends i{constructor(e){super(8,e)}decode(e,t=0){const i=r(e),n=i.readUInt32LE(t);return p(i.readUInt32LE(t+4),n)}encode(e,t,i=0){const n=f(e),o=r(t);return o.writeUInt32LE(n.lo32,i),o.writeUInt32LE(n.hi32,i+4),8}}Layout.NearUInt64=m;class g extends i{constructor(e){super(8,e)}decode(e,t=0){const i=r(e);return p(i.readUInt32BE(t),i.readUInt32BE(t+4))}encode(e,t,i=0){const n=f(e),o=r(t);return o.writeUInt32BE(n.hi32,i),o.writeUInt32BE(n.lo32,i+4),8}}Layout.NearUInt64BE=g;class y extends i{constructor(e){super(8,e)}decode(e,t=0){const i=r(e),n=i.readUInt32LE(t);return p(i.readInt32LE(t+4),n)}encode(e,t,i=0){const n=f(e),o=r(t);return o.writeUInt32LE(n.lo32,i),o.writeInt32LE(n.hi32,i+4),8}}Layout.NearInt64=y;class b extends i{constructor(e){super(8,e)}decode(e,t=0){const i=r(e);return p(i.readInt32BE(t),i.readUInt32BE(t+4))}encode(e,t,i=0){const n=f(e),o=r(t);return o.writeInt32BE(n.hi32,i),o.writeUInt32BE(n.lo32,i+4),8}}Layout.NearInt64BE=b;class w extends i{constructor(e){super(4,e)}decode(e,t=0){return r(e).readFloatLE(t)}encode(e,t,i=0){return r(t).writeFloatLE(e,i),4}}Layout.Float=w;class v extends i{constructor(e){super(4,e)}decode(e,t=0){return r(e).readFloatBE(t)}encode(e,t,i=0){return r(t).writeFloatBE(e,i),4}}Layout.FloatBE=v;class _ extends i{constructor(e){super(8,e)}decode(e,t=0){return r(e).readDoubleLE(t)}encode(e,t,i=0){return r(t).writeDoubleLE(e,i),8}}Layout.Double=_;class E extends i{constructor(e){super(8,e)}decode(e,t=0){return r(e).readDoubleBE(t)}encode(e,t,i=0){return r(t).writeDoubleBE(e,i),8}}Layout.DoubleBE=E;class S extends i{constructor(e,t,r){if(!(e instanceof i))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof o&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof o)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof o&&(i=i.decode(e,t)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let n=0;for(;n<i;)r+=this.elementLayout.getSpan(e,t+r),++n}return r}decode(e,t=0){const r=[];let i=0,n=this.count;for(n instanceof o&&(n=n.decode(e,t));i<n;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return r}encode(e,t,r=0){const i=this.elementLayout,n=e.reduce((e,n)=>e+i.encode(n,t,r+e),0);return this.count instanceof o&&this.count.encode(e.length,t,r),n}}Layout.Sequence=S;class A extends i{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce((e,t)=>e&&t instanceof i,!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===r&&(r=t,t=void 0);for(const i of e)if(0>i.span&&void 0===i.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce((e,t)=>e+t.getSpan(),0)}catch(o){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,i)=>{const n=i.getSpan(e,t);return t+=n,r+n},0)}catch(i){throw new RangeError("indeterminate span")}return r}decode(e,r=0){t(e);const i=this.makeDestinationObject();for(const t of this.fields)if(void 0!==t.property&&(i[t.property]=t.decode(e,r)),r+=t.getSpan(e,r),this.decodePrefixes&&e.length===r)break;return i}encode(e,t,r=0){const i=r;let n=0,o=0;for(const a of this.fields){let i=a.span;if(o=0<i?i:0,void 0!==a.property){const n=e[a.property];void 0!==n&&(o=a.encode(n,t,r),0>i&&(i=a.getSpan(t,r)))}n=r,r+=i}return n+o-i}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}Layout.Structure=A;class M{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}Layout.UnionDiscriminator=M;class R extends M{constructor(e,t){if(!(e instanceof o&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}Layout.UnionLayoutDiscriminator=R;class x extends i{constructor(e,t,r){let n;if(e instanceof u||e instanceof l)n=new R(new s(e));else if(e instanceof o&&e.isCount())n=new R(e);else{if(!(e instanceof M))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=e}if(void 0===t&&(t=null),!(null===t||t instanceof i))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let a=-1;t&&(a=t.span,0<=a&&(e instanceof u||e instanceof l)&&(a+=n.layout.span)),super(a,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof u||e instanceof l,this.defaultLayout=t,this.registry={};let c=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return c(e)},this.configGetSourceVariant=function(e){c=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const i=this.discriminator,n=i.decode(e,t),o=this.registry[n];if(void 0===o){const o=this.defaultLayout;let a=0;this.usesPrefixDiscriminator&&(a=i.layout.span),r=this.makeDestinationObject(),r[i.property]=n,r[o.property]=o.decode(e,t+a)}else r=o.decode(e,t);return r}encode(e,t,r=0){const i=this.getSourceVariant(e);if(void 0===i){const i=this.discriminator,n=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=i.layout.span),i.encode(e[i.property],t,r),o+n.encode(e[n.property],t,r+o)}return i.encode(e,t,r)}addVariant(e,t,r){const i=new k(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t=0){let r;return r=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[r]}}Layout.Union=x;class k extends i{constructor(e,t,r,n){if(!(e instanceof x))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof i))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=r?r.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+r)),r+i}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let n=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),n+=this.layout.getSpan(t,r+i),0<=this.union.span&&n>this.union.span))throw new Error("encoded variant overruns containing union");return n}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function T(e){return 0>e&&(e+=4294967296),e}Layout.VariantLayout=k;class P extends i{constructor(e,t,r){if(!(e instanceof u||e instanceof l))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(e){return i=T(e),this},this._packedGetValue=function(){return i}}decode(e,t=0){const r=this.makeDestinationObject(),i=this.word.decode(e,t);this._packedSetValue(i);for(const n of this.fields)void 0!==n.property&&(r[n.property]=n.decode(e));return r}encode(e,t,r=0){const i=this.word.decode(t,r);this._packedSetValue(i);for(const n of this.fields)if(void 0!==n.property){const t=e[n.property];void 0!==t&&n.encode(t)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new C(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new I(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}Layout.BitStructure=P;class C{constructor(e,t,r){if(!(e instanceof P))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const i=8*e.span,n=e.fields.reduce((e,t)=>e+t.bits,0);if(t+n>i)throw new Error("bits too long for span remainder ("+(i-n)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=n,this.container.msb&&(this.start=i-n-t),this.wordMask=T(this.valueMask<<this.start),this.property=r}decode(e,t){return T(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==T(e&this.valueMask))throw new TypeError(n("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=T(e<<this.start);this.container._packedSetValue(T(t&~this.wordMask)|r)}}Layout.BitField=C;class I extends C{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}}Layout.Boolean=I;class $ extends i{constructor(e,t){if(!(e instanceof o&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof o||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let i=this.span;return 0>i&&(i=this.length.decode(e,t)),r(e).slice(t,t+i)}encode(e,t,i){let a=this.length;if(this.length instanceof o&&(a=e.length),!(e instanceof Uint8Array&&a===e.length))throw new TypeError(n("Blob.encode",this)+" requires (length "+a+") Uint8Array as src");if(i+a>t.length)throw new RangeError("encoding overruns Uint8Array");const s=r(e);return r(t).write(s.toString("hex"),i,a,"hex"),this.length instanceof o&&this.length.encode(a,t,i),a}}Layout.Blob=$;class B extends i{constructor(e){super(-1,e)}getSpan(e,r=0){t(e);let i=r;for(;i<e.length&&0!==e[i];)i+=1;return 1+i-r}decode(e,t=0){const i=this.getSpan(e,t);return r(e).slice(t,t+i-1).toString("utf-8")}encode(t,i,n=0){"string"!=typeof t&&(t=String(t));const o=e.Buffer.from(t,"utf8"),a=o.length;if(n+a>i.length)throw new RangeError("encoding overruns Buffer");const s=r(i);return o.copy(s,n),s[n+a]=0,a+1}}Layout.CString=B;class O extends i{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,r=0){return t(e),e.length-r}decode(e,t=0){const i=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");return r(e).slice(t,t+i).toString("utf-8")}encode(t,i,n=0){"string"!=typeof t&&(t=String(t));const o=e.Buffer.from(t,"utf8"),a=o.length;if(0<=this.maxSpan&&this.maxSpan<a)throw new RangeError("text length exceeds maxSpan");if(n+a>i.length)throw new RangeError("encoding overruns Buffer");return o.copy(r(i),n),a}}Layout.UTF8=O;class N extends i{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}return Layout.Constant=N,Layout.greedy=(e,t)=>new a(e,t),Layout.offset=(e,t,r)=>new s(e,t,r),Layout.u8=e=>new u(1,e),Layout.u16=e=>new u(2,e),Layout.u24=e=>new u(3,e),Layout.u32=e=>new u(4,e),Layout.u40=e=>new u(5,e),Layout.u48=e=>new u(6,e),Layout.nu64=e=>new m(e),Layout.u16be=e=>new l(2,e),Layout.u24be=e=>new l(3,e),Layout.u32be=e=>new l(4,e),Layout.u40be=e=>new l(5,e),Layout.u48be=e=>new l(6,e),Layout.nu64be=e=>new g(e),Layout.s8=e=>new c(1,e),Layout.s16=e=>new c(2,e),Layout.s24=e=>new c(3,e),Layout.s32=e=>new c(4,e),Layout.s40=e=>new c(5,e),Layout.s48=e=>new c(6,e),Layout.ns64=e=>new y(e),Layout.s16be=e=>new h(2,e),Layout.s24be=e=>new h(3,e),Layout.s32be=e=>new h(4,e),Layout.s40be=e=>new h(5,e),Layout.s48be=e=>new h(6,e),Layout.ns64be=e=>new b(e),Layout.f32=e=>new w(e),Layout.f32be=e=>new v(e),Layout.f64=e=>new _(e),Layout.f64be=e=>new E(e),Layout.struct=(e,t,r)=>new A(e,t,r),Layout.bits=(e,t,r)=>new P(e,t,r),Layout.seq=(e,t,r)=>new S(e,t,r),Layout.union=(e,t,r)=>new x(e,t,r),Layout.unionLayoutDiscriminator=(e,t)=>new R(e,t),Layout.blob=(e,t)=>new $(e,t),Layout.cstr=e=>new B(e),Layout.utf8=(e,t)=>new O(e,t),Layout.constant=(e,t)=>new N(e,t),Layout}var LayoutExports=requireLayout(),SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY=8078e3,SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH=8078001,SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH=8078004,SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH=8078005,SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH=8078006,SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE=8078011;function encodeValue(e){if(Array.isArray(e)){return"%5B"+e.map(encodeValue).join("%2C%20")+"%5D"}return"bigint"==typeof e?`${e}n`:encodeURIComponent(String(null!=e&&null===Object.getPrototypeOf(e)?{...e}:e))}function encodeObjectContextEntry([e,t]){return`${e}=${encodeValue(t)}`}function encodeContextObject(e){const t=Object.entries(e).map(encodeObjectContextEntry).join("&");return btoa(t)}function getErrorMessage(e,t={}){{let r=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(t).length&&(r+=` '${encodeContextObject(t)}'`),`${r}\``}}var SolanaError=class extends Error{constructor(...[e,t]){let r,i;if(t){const{cause:e,...n}=t;e&&(i={cause:e}),Object.keys(n).length>0&&(r=n)}super(getErrorMessage(e,r),i),__publicField(this,"cause",this.cause),__publicField(this,"context"),this.context={__code:e,...r},this.name="SolanaError"}};function getEncodedSize(e,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(e)}function createEncoder(e){return Object.freeze({...e,encode:t=>{const r=new Uint8Array(getEncodedSize(t,e));return e.write(t,r,0),r}})}function createDecoder(e){return Object.freeze({...e,decode:(t,r=0)=>e.read(t,r)[0]})}function isFixedSize(e){return"fixedSize"in e&&"number"==typeof e.fixedSize}function combineCodec(e,t){if(isFixedSize(e)!==isFixedSize(t))throw new SolanaError(SOLANA_ERROR__CODECS__ENCODER_DECODER_SIZE_COMPATIBILITY_MISMATCH);if(isFixedSize(e)&&isFixedSize(t)&&e.fixedSize!==t.fixedSize)throw new SolanaError(SOLANA_ERROR__CODECS__ENCODER_DECODER_FIXED_SIZE_MISMATCH,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!isFixedSize(e)&&!isFixedSize(t)&&e.maxSize!==t.maxSize)throw new SolanaError(SOLANA_ERROR__CODECS__ENCODER_DECODER_MAX_SIZE_MISMATCH,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}}function assertByteArrayIsNotEmptyForCodec(e,t,r=0){if(t.length-r<=0)throw new SolanaError(SOLANA_ERROR__CODECS__CANNOT_DECODE_EMPTY_BYTE_ARRAY,{codecDescription:e})}function assertByteArrayHasEnoughBytesForCodec(e,t,r,i=0){const n=r.length-i;if(n<t)throw new SolanaError(SOLANA_ERROR__CODECS__INVALID_BYTE_LENGTH,{bytesLength:n,codecDescription:e,expected:t})}function assertNumberIsBetweenForCodec(e,t,r,i){if(i<t||i>r)throw new SolanaError(SOLANA_ERROR__CODECS__NUMBER_OUT_OF_RANGE,{codecDescription:e,max:r,min:t,value:i})}function isLittleEndian(e){return 1!==(null==e?void 0:e.endian)}function numberEncoderFactory(e){return createEncoder({fixedSize:e.size,write(t,r,i){e.range&&assertNumberIsBetweenForCodec(e.name,e.range[0],e.range[1],t);const n=new ArrayBuffer(e.size);return e.set(new DataView(n),t,isLittleEndian(e.config)),r.set(new Uint8Array(n),i),i+e.size}})}function numberDecoderFactory(e){return createDecoder({fixedSize:e.size,read(t,r=0){assertByteArrayIsNotEmptyForCodec(e.name,t,r),assertByteArrayHasEnoughBytesForCodec(e.name,e.size,t,r);const i=new DataView(toArrayBuffer(t,r,e.size));return[e.get(i,isLittleEndian(e.config)),r+e.size]}})}function toArrayBuffer(e,t,r){const i=e.byteOffset+(t??0),n=r??e.byteLength;return e.buffer.slice(i,i+n)}var getU64Encoder=(e={})=>numberEncoderFactory({config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}),getU64Decoder=(e={})=>numberDecoderFactory({config:e,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),getU64Codec=(e={})=>combineCodec(getU64Encoder(e),getU64Decoder(e));class StructError extends TypeError{constructor(e,t){let r;const{message:i,explanation:n,...o}=e,{path:a}=e,s=0===a.length?i:`At path: ${a.join(".")} -- ${i}`;super(n??s),null!=n&&(this.cause=s),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function isIterable(e){return isObject(e)&&"function"==typeof e[Symbol.iterator]}function isObject(e){return"object"==typeof e&&null!=e}function isNonArrayObject(e){return isObject(e)&&!Array.isArray(e)}function print(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function shiftIterator(e){const{done:t,value:r}=e.next();return t?void 0:r}function toFailure(e,t,r,i){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:n,branch:o}=t,{type:a}=r,{refinement:s,message:u=`Expected a value of type \`${a}\`${s?` with refinement \`${s}\``:""}, but received: \`${print(i)}\``}=e;return{value:i,type:a,refinement:s,key:n[n.length-1],path:n,branch:o,...e,message:u}}function*toFailures(e,t,r,i){isIterable(e)||(e=[e]);for(const n of e){const e=toFailure(n,t,r,i);e&&(yield e)}}function*run(e,t,r={}){const{path:i=[],branch:n=[e],coerce:o=!1,mask:a=!1}=r,s={path:i,branch:n,mask:a};o&&(e=t.coercer(e,s));let u="valid";for(const l of t.validator(e,s))l.explanation=r.message,u="not_valid",yield[l,void 0];for(let[l,c,h]of t.entries(e,s)){const t=run(c,h,{path:void 0===l?i:[...i,l],branch:void 0===l?n:[...n,c],coerce:o,mask:a,message:r.message});for(const r of t)r[0]?(u=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):o&&(c=r[1],void 0===l?e=c:e instanceof Map?e.set(l,c):e instanceof Set?e.add(c):isObject(e)&&(void 0!==c||l in e)&&(e[l]=c))}if("not_valid"!==u)for(const l of t.refiner(e,s))l.explanation=r.message,u="not_refined",yield[l,void 0];"valid"===u&&(yield[void 0,e])}let Struct$1=class{constructor(e){const{type:t,schema:r,validator:i,refiner:n,coercer:o=e=>e,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,this.validator=i?(e,t)=>toFailures(i(e,t),t,this,e):()=>[],this.refiner=n?(e,t)=>toFailures(n(e,t),t,this,e):()=>[]}assert(e,t){return assert$3(e,this,t)}create(e,t){return create(e,this,t)}is(e){return is(e,this)}mask(e,t){return mask(e,this,t)}validate(e,t={}){return validate$1(e,this,t)}};function assert$3(e,t,r){const i=validate$1(e,t,{message:r});if(i[0])throw i[0]}function create(e,t,r){const i=validate$1(e,t,{coerce:!0,message:r});if(i[0])throw i[0];return i[1]}function mask(e,t,r){const i=validate$1(e,t,{coerce:!0,mask:!0,message:r});if(i[0])throw i[0];return i[1]}function is(e,t){return!validate$1(e,t)[0]}function validate$1(e,t,r={}){const i=run(e,t,r),n=shiftIterator(i);if(n[0]){return[new StructError(n[0],function*(){for(const e of i)e[0]&&(yield e[0])}),void 0]}return[void 0,n[1]]}function define(e,t){return new Struct$1({type:e,schema:null,validator:t})}function any(){return define("any",()=>!0)}function array(e){return new Struct$1({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,i]of t.entries())yield[r,i,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${print(e)}`})}function boolean(){return define("boolean",e=>"boolean"==typeof e)}function instance(e){return define("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${print(t)}`)}function literal(e){const t=print(e),r=typeof e;return new Struct$1({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${print(r)}`})}function never(){return define("never",()=>!1)}function nullable(e){return new Struct$1({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function number(){return define("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${print(e)}`)}function optional(e){return new Struct$1({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function record(e,t){return new Struct$1({type:"record",schema:null,*entries(r){if(isObject(r))for(const i in r){const n=r[i];yield[i,i,e],yield[i,n,t]}},validator:e=>isNonArrayObject(e)||`Expected an object, but received: ${print(e)}`,coercer:e=>isNonArrayObject(e)?{...e}:e})}function string(){return define("string",e=>"string"==typeof e||`Expected a string, but received: ${print(e)}`)}function tuple(e){const t=never();return new Struct$1({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const i=Math.max(e.length,r.length);for(let n=0;n<i;n++)yield[n,r[n],e[n]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${print(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function type(e){const t=Object.keys(e);return new Struct$1({type:"type",schema:e,*entries(r){if(isObject(r))for(const i of t)yield[i,r[i],e[i]]},validator:e=>isNonArrayObject(e)||`Expected an object, but received: ${print(e)}`,coercer:e=>isNonArrayObject(e)?{...e}:e})}function union(e){const t=e.map(e=>e.type).join(" | ");return new Struct$1({type:"union",schema:null,coercer(t,r){for(const i of e){const[e,n]=i.validate(t,{coerce:!0,mask:r.mask});if(!e)return n}return t},validator(r,i){const n=[];for(const t of e){const[...e]=run(r,t,i),[o]=e;if(!o[0])return[];for(const[t]of e)t&&n.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${print(r)}`,...n]}})}function unknown(){return define("unknown",()=>!0)}function coerce(e,t,r){return new Struct$1({...e,coercer:(i,n)=>is(i,t)?e.coercer(r(i,n),n):e.coercer(i,n)})}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(e){return"string"==typeof e&&REGEX.test(e)}for(var byteToHex=[],i=0,_nodeId,_clockseq;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]).toLowerCase();if(!validate(r))throw TypeError("Stringified UUID is invalid");return r}var _lastMSecs=0,_lastNSecs=0;function v1(e,t,r){var i=t&&r||0,n=t||new Array(16),o=(e=e||{}).node||_nodeId,a=void 0!==e.clockseq?e.clockseq:_clockseq;if(null==o||null==a){var s=e.random||(e.rng||rng)();null==o&&(o=_nodeId=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=_clockseq=16383&(s[6]<<8|s[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:_lastNSecs+1,c=u-_lastMSecs+(l-_lastNSecs)/1e4;if(c<0&&void 0===e.clockseq&&(a=a+1&16383),(c<0||u>_lastMSecs)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=u,_lastNSecs=l,_clockseq=a;var h=(1e4*(268435455&(u+=122192928e5))+l)%4294967296;n[i++]=h>>>24&255,n[i++]=h>>>16&255,n[i++]=h>>>8&255,n[i++]=255&h;var d=u/4294967296*1e4&268435455;n[i++]=d>>>8&255,n[i++]=255&d,n[i++]=d>>>24&15|16,n[i++]=d>>>16&255,n[i++]=a>>>8|128,n[i++]=255&a;for(var f=0;f<6;++f)n[i+f]=o[f];return t||stringify(n)}function parse(e){if(!validate(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function stringToBytes(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(e,t,r){function i(e,i,n,o){if("string"==typeof e&&(e=stringToBytes(e)),"string"==typeof i&&(i=parse(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(i),a.set(e,i.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,n){o=o||0;for(var s=0;s<16;++s)n[o+s]=a[s];return n}return stringify(a)}try{i.name=e}catch(err){}return i.DNS=DNS,i.URL=URL$1,i}function md5(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(e),8*e.length))}function md5ToHexEncodedArray(e){for(var t=[],r=32*e.length,i="0123456789abcdef",n=0;n<r;n+=8){var o=e[n>>5]>>>n%32&255,a=parseInt(i.charAt(o>>>4&15)+i.charAt(15&o),16);t.push(a)}return t}function getOutputLength(e){return 14+(e+64>>>9<<4)+1}function wordsToMd5(e,t){e[t>>5]|=128<<t%32,e[getOutputLength(t)-1]=t;for(var r=1732584193,i=-271733879,n=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=r,u=i,l=n,c=o;r=md5ff(r,i,n,o,e[a],7,-680876936),o=md5ff(o,r,i,n,e[a+1],12,-389564586),n=md5ff(n,o,r,i,e[a+2],17,606105819),i=md5ff(i,n,o,r,e[a+3],22,-1044525330),r=md5ff(r,i,n,o,e[a+4],7,-176418897),o=md5ff(o,r,i,n,e[a+5],12,1200080426),n=md5ff(n,o,r,i,e[a+6],17,-1473231341),i=md5ff(i,n,o,r,e[a+7],22,-45705983),r=md5ff(r,i,n,o,e[a+8],7,1770035416),o=md5ff(o,r,i,n,e[a+9],12,-1958414417),n=md5ff(n,o,r,i,e[a+10],17,-42063),i=md5ff(i,n,o,r,e[a+11],22,-1990404162),r=md5ff(r,i,n,o,e[a+12],7,1804603682),o=md5ff(o,r,i,n,e[a+13],12,-40341101),n=md5ff(n,o,r,i,e[a+14],17,-1502002290),r=md5gg(r,i=md5ff(i,n,o,r,e[a+15],22,1236535329),n,o,e[a+1],5,-165796510),o=md5gg(o,r,i,n,e[a+6],9,-1069501632),n=md5gg(n,o,r,i,e[a+11],14,643717713),i=md5gg(i,n,o,r,e[a],20,-373897302),r=md5gg(r,i,n,o,e[a+5],5,-701558691),o=md5gg(o,r,i,n,e[a+10],9,38016083),n=md5gg(n,o,r,i,e[a+15],14,-660478335),i=md5gg(i,n,o,r,e[a+4],20,-405537848),r=md5gg(r,i,n,o,e[a+9],5,568446438),o=md5gg(o,r,i,n,e[a+14],9,-1019803690),n=md5gg(n,o,r,i,e[a+3],14,-187363961),i=md5gg(i,n,o,r,e[a+8],20,1163531501),r=md5gg(r,i,n,o,e[a+13],5,-1444681467),o=md5gg(o,r,i,n,e[a+2],9,-51403784),n=md5gg(n,o,r,i,e[a+7],14,1735328473),r=md5hh(r,i=md5gg(i,n,o,r,e[a+12],20,-1926607734),n,o,e[a+5],4,-378558),o=md5hh(o,r,i,n,e[a+8],11,-2022574463),n=md5hh(n,o,r,i,e[a+11],16,1839030562),i=md5hh(i,n,o,r,e[a+14],23,-35309556),r=md5hh(r,i,n,o,e[a+1],4,-1530992060),o=md5hh(o,r,i,n,e[a+4],11,1272893353),n=md5hh(n,o,r,i,e[a+7],16,-155497632),i=md5hh(i,n,o,r,e[a+10],23,-1094730640),r=md5hh(r,i,n,o,e[a+13],4,681279174),o=md5hh(o,r,i,n,e[a],11,-358537222),n=md5hh(n,o,r,i,e[a+3],16,-722521979),i=md5hh(i,n,o,r,e[a+6],23,76029189),r=md5hh(r,i,n,o,e[a+9],4,-640364487),o=md5hh(o,r,i,n,e[a+12],11,-421815835),n=md5hh(n,o,r,i,e[a+15],16,530742520),r=md5ii(r,i=md5hh(i,n,o,r,e[a+2],23,-995338651),n,o,e[a],6,-198630844),o=md5ii(o,r,i,n,e[a+7],10,1126891415),n=md5ii(n,o,r,i,e[a+14],15,-1416354905),i=md5ii(i,n,o,r,e[a+5],21,-57434055),r=md5ii(r,i,n,o,e[a+12],6,1700485571),o=md5ii(o,r,i,n,e[a+3],10,-1894986606),n=md5ii(n,o,r,i,e[a+10],15,-1051523),i=md5ii(i,n,o,r,e[a+1],21,-2054922799),r=md5ii(r,i,n,o,e[a+8],6,1873313359),o=md5ii(o,r,i,n,e[a+15],10,-30611744),n=md5ii(n,o,r,i,e[a+6],15,-1560198380),i=md5ii(i,n,o,r,e[a+13],21,1309151649),r=md5ii(r,i,n,o,e[a+4],6,-145523070),o=md5ii(o,r,i,n,e[a+11],10,-1120210379),n=md5ii(n,o,r,i,e[a+2],15,718787259),i=md5ii(i,n,o,r,e[a+9],21,-343485551),r=safeAdd(r,s),i=safeAdd(i,u),n=safeAdd(n,l),o=safeAdd(o,c)}return[r,i,n,o]}function bytesToWords(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(getOutputLength(t)),i=0;i<t;i+=8)r[i>>5]|=(255&e[i/8])<<i%32;return r}function safeAdd(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function bitRotateLeft(e,t){return e<<t|e>>>32-t}function md5cmn(e,t,r,i,n,o){return safeAdd(bitRotateLeft(safeAdd(safeAdd(t,e),safeAdd(i,o)),n),r)}function md5ff(e,t,r,i,n,o,a){return md5cmn(t&r|~t&i,e,t,n,o,a)}function md5gg(e,t,r,i,n,o,a){return md5cmn(t&i|r&~i,e,t,n,o,a)}function md5hh(e,t,r,i,n,o,a){return md5cmn(t^r^i,e,t,n,o,a)}function md5ii(e,t,r,i,n,o,a){return md5cmn(r^(t|~i),e,t,n,o,a)}var v3=v35("v3",48,md5);function v4(e,t,r){var i=(e=e||{}).random||(e.rng||rng)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=i[n];return t}return stringify(i)}function f(e,t,r,i){switch(e){case 0:return t&r^~t&i;case 1:case 3:return t^r^i;case 2:return t&r^t&i^r&i}}function ROTL(e,t){return e<<t|e>>>32-t}function sha1(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var i=unescape(encodeURIComponent(e));e=[];for(var n=0;n<i.length;++n)e.push(i.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),u=0;u<a;++u){for(var l=new Uint32Array(16),c=0;c<16;++c)l[c]=e[64*u+4*c]<<24|e[64*u+4*c+1]<<16|e[64*u+4*c+2]<<8|e[64*u+4*c+3];s[u]=l}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<a;++h){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=s[h][p];for(var m=16;m<80;++m)d[m]=ROTL(d[m-3]^d[m-8]^d[m-14]^d[m-16],1);for(var g=r[0],y=r[1],b=r[2],w=r[3],v=r[4],_=0;_<80;++_){var E=Math.floor(_/20),S=ROTL(g,5)+f(E,y,b,w)+v+t[E]+d[_]>>>0;v=w,w=b,b=ROTL(y,30)>>>0,y=g,g=S}r[0]=r[0]+g>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+b>>>0,r[3]=r[3]+w>>>0,r[4]=r[4]+v>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}var v5=v35("v5",80,sha1);const nil="00000000-0000-0000-0000-000000000000";function version$1(e){if(!validate(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}const esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,NIL:nil,parse:parse,stringify:stringify,v1:v1,v3:v3,v4:v4,v5:v5,validate:validate,version:version$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(esmBrowser);var generateRequest_1,hasRequiredGenerateRequest,browser,hasRequiredBrowser;function requireGenerateRequest(){if(hasRequiredGenerateRequest)return generateRequest_1;hasRequiredGenerateRequest=1;const e=require$$0.v4;return generateRequest_1=function(t,r,i,n){if("string"!=typeof t)throw new TypeError(t+" must be a string");const o="number"==typeof(n=n||{}).version?n.version:2;if(1!==o&&2!==o)throw new TypeError(o+" must be 1 or 2");const a={method:t};if(2===o&&(a.jsonrpc="2.0"),r){if("object"!=typeof r&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(void 0===i){const t="function"==typeof n.generator?n.generator:function(){return e()};a.id=t(a,n)}else 2===o&&null===i?n.notificationIdNull&&(a.id=null):a.id=i;return a}}function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;const e=require$$0.v4,t=requireGenerateRequest(),r=function(t,i){if(!(this instanceof r))return new r(t,i);i||(i={}),this.options={reviver:void 0!==i.reviver?i.reviver:null,replacer:void 0!==i.replacer?i.replacer:null,generator:void 0!==i.generator?i.generator:function(){return e()},version:void 0!==i.version?i.version:2,notificationIdNull:"boolean"==typeof i.notificationIdNull&&i.notificationIdNull},this.callServer=t};return browser=r,r.prototype.request=function(e,r,i,n){const o=this;let a=null;const s=Array.isArray(e)&&"function"==typeof r;if(1===this.options.version&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&e&&"object"==typeof e&&"function"==typeof r)n=r,a=e;else{"function"==typeof i&&(n=i,i=void 0);const o="function"==typeof n;try{a=t(e,r,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(err){if(o)return n(err);throw err}if(!o)return a}let u;try{u=JSON.stringify(a,this.options.replacer)}catch(err){return n(err)}return this.callServer(u,function(e,t){o._parseResponse(e,t,n)}),a},r.prototype._parseResponse=function(e,t,r){if(e)return void r(e);if(!t)return r();let i;try{i=JSON.parse(t,this.options.reviver)}catch(n){return r(n)}if(3===r.length){if(Array.isArray(i)){const e=function(e){return void 0!==e.error},t=function(t){return!e(t)};return r(null,i.filter(e),i.filter(t))}return r(null,i.error,i.result)}r(null,i)},browser}var browserExports=requireBrowser();const RpcClient=getDefaultExportFromCjs$2(browserExports);var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,i,o,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new n(i,o||e,a),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,o=i.length,a=new Array(o);n<o;n++)a[n]=i[n].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},s.prototype.emit=function(e,t,i,n,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,n),!0;case 5:return c.fn.call(c.context,t,i,n,o),!0;case 6:return c.fn.call(c.context,t,i,n,o,a),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,i);break;case 4:c[l].fn.call(c[l].context,t,i,n);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,i,n){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||n&&!s.once||i&&s.context!==i||a(this,o);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==t||n&&!s[u].once||i&&s[u].context!==i)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s}(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs$2(eventemitter3Exports);var WebSocketBrowserImpl=class extends EventEmitter{constructor(e,t){super(),__publicField(this,"socket"),this.socket=new window.WebSocket(e,t.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){const i=r||t;try{this.socket.send(e),i()}catch(n){i(n)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function WebSocket(e,t){return new WebSocketBrowserImpl(e,t)}var DefaultDataPack=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},CommonClient=class extends EventEmitter{constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:n=1e3,max_reconnects:o=5,...a}={},s,u){super(),__publicField(this,"address"),__publicField(this,"rpc_id"),__publicField(this,"queue"),__publicField(this,"options"),__publicField(this,"autoconnect"),__publicField(this,"ready"),__publicField(this,"reconnect"),__publicField(this,"reconnect_timer_id"),__publicField(this,"reconnect_interval"),__publicField(this,"max_reconnects"),__publicField(this,"rest_options"),__publicField(this,"current_reconnects"),__publicField(this,"generate_request_id"),__publicField(this,"socket"),__publicField(this,"webSocketFactory"),__publicField(this,"dataPack"),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=n,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=s||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),this.dataPack=u||new DefaultDataPack,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,i){return i||"object"!=typeof r||(i=r,r=null),new Promise((n,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,t),s={jsonrpc:"2.0",method:e,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(s),i,e=>{if(e)return o(e);this.queue[a]={promise:[n,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const n={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(n),e=>{if(e)return i(e);r()})})}async subscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket&&this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return void 0!==this.reconnect_timer_id}willReconnect(){return this.reconnect&&(0===this.max_reconnects||this.current_reconnects<this.max_reconnects)}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=Buffer$1.from(e).toString());try{e=this.dataPack.decode(e)}catch(t){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then(()=>{this.emit.apply(this,t)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,null==e?void 0:e.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,i),1))})}};const generateKeypair=()=>{const e=ed25519.utils.randomPrivateKey(),t=getPublicKey(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},getPublicKey=ed25519.getPublicKey;function isOnCurve(e){try{return ed25519.ExtendedPoint.fromHex(e),!0}catch{return!1}}const sign$2=(e,t)=>ed25519.sign(e,t.slice(0,32)),verify=ed25519.verify,toBuffer=e=>Buffer$1.isBuffer(e)?e:e instanceof Uint8Array?Buffer$1.from(e.buffer,e.byteOffset,e.byteLength):Buffer$1.from(e);class Struct{constructor(e){Object.assign(this,e)}encode(){return Buffer$1.from(libExports.serialize(SOLANA_SCHEMA,this))}static decode(e){return libExports.deserialize(SOLANA_SCHEMA,this,e)}static decodeUnchecked(e){return libExports.deserializeUnchecked(SOLANA_SCHEMA,this,e)}}const SOLANA_SCHEMA=new Map;var _PublicKey;const MAX_SEED_LENGTH=32,PUBLIC_KEY_LENGTH=32;function isPublicKeyData(e){return void 0!==e._bn}let uniquePublicKeyCounter=1;class PublicKey extends Struct{constructor(e){if(super({}),this._bn=void 0,isPublicKeyData(e))this._bn=e._bn;else{if("string"==typeof e){const t=bs58$1.decode(e);if(t.length!=PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input");this._bn=new BN(t)}else this._bn=new BN(e);if(this._bn.byteLength()>PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input")}}static unique(){const e=new PublicKey(uniquePublicKeyCounter);return uniquePublicKeyCounter+=1,new PublicKey(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return bs58$1.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(Buffer$1);if(e.length===PUBLIC_KEY_LENGTH)return e;const t=Buffer$1.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const i=Buffer$1.concat([e.toBuffer(),Buffer$1.from(t),r.toBuffer()]),n=sha256(i);return new PublicKey(n)}static createProgramAddressSync(e,t){let r=Buffer$1.alloc(0);e.forEach(function(e){if(e.length>MAX_SEED_LENGTH)throw new TypeError("Max seed length exceeded");r=Buffer$1.concat([r,toBuffer(e)])}),r=Buffer$1.concat([r,t.toBuffer(),Buffer$1.from("ProgramDerivedAddress")]);const i=sha256(r);if(isOnCurve(i))throw new Error("Invalid seeds, address must fall off the curve");return new PublicKey(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,i=255;for(;0!=i;){try{const n=e.concat(Buffer$1.from([i]));r=this.createProgramAddressSync(n,t)}catch(err){if(err instanceof TypeError)throw err;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return isOnCurve(new PublicKey(e).toBytes())}}_PublicKey=PublicKey,PublicKey.default=new _PublicKey("11111111111111111111111111111111"),SOLANA_SCHEMA.set(PublicKey,{kind:"struct",fields:[["_bn","u256"]]}),new PublicKey("BPFLoader1111111111111111111111111111111111");const PACKET_DATA_SIZE=1232,VERSION_PREFIX_MASK=127,SIGNATURE_LENGTH_IN_BYTES=64;class TransactionExpiredBlockheightExceededError extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredBlockheightExceededError.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class TransactionExpiredTimeoutError extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredTimeoutError.prototype,"name",{value:"TransactionExpiredTimeoutError"});class TransactionExpiredNonceInvalidError extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredNonceInvalidError.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class MessageAccountKeys{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const t=new Map;this.keySegments().flat().forEach((e,r)=>{t.set(e.toBase58(),r)});const r=e=>{const r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map(e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map(e=>r(e.pubkey)),data:e.data}))}}const publicKey=(e="publicKey")=>LayoutExports.blob(32,e),signature=(e="signature")=>LayoutExports.blob(64,e),rustString=(e="string")=>{const t=LayoutExports.struct([LayoutExports.u32("length"),LayoutExports.u32("lengthPadding"),LayoutExports.blob(LayoutExports.offset(LayoutExports.u32(),-8),"chars")],e),r=t.decode.bind(t),i=t.encode.bind(t),n=t;return n.decode=(e,t)=>r(e,t).chars.toString(),n.encode=(e,t,r)=>{const n={chars:Buffer$1.from(e,"utf8")};return i(n,t,r)},n.alloc=e=>LayoutExports.u32().span+LayoutExports.u32().span+Buffer$1.from(e,"utf8").length,n},authorized=(e="authorized")=>LayoutExports.struct([publicKey("staker"),publicKey("withdrawer")],e),lockup=(e="lockup")=>LayoutExports.struct([LayoutExports.ns64("unixTimestamp"),LayoutExports.ns64("epoch"),publicKey("custodian")],e),voteInit=(e="voteInit")=>LayoutExports.struct([publicKey("nodePubkey"),publicKey("authorizedVoter"),publicKey("authorizedWithdrawer"),LayoutExports.u8("commission")],e),voteAuthorizeWithSeedArgs=(e="voteAuthorizeWithSeedArgs")=>LayoutExports.struct([LayoutExports.u32("voteAuthorizationType"),publicKey("currentAuthorityDerivedKeyOwnerPubkey"),rustString("currentAuthorityDerivedKeySeed"),publicKey("newAuthorized")],e);function getAlloc(e,t){const r=e=>{if(e.span>=0)return e.span;if("function"==typeof e.alloc)return e.alloc(t[e.property]);if("count"in e&&"elementLayout"in e){const i=t[e.property];if(Array.isArray(i))return i.length*r(e.elementLayout)}else if("fields"in e)return getAlloc({layout:e},t[e.property]);return 0};let i=0;return e.layout.fields.forEach(e=>{i+=r(e)}),i}function decodeLength(e){let t=0,r=0;for(;;){let i=e.shift();if(t|=(127&i)<<7*r,r+=1,!(128&i))break}return t}function encodeLength(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}function assert$2(e,t){if(!e)throw new Error(t||"Assertion failed")}class CompiledKeys{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,i=e=>{const t=e.toBase58();let i=r.get(t);return void 0===i&&(i={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,i)),i},n=i(t);n.isSigner=!0,n.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const e of o.keys){const t=i(e.pubkey);t.isSigner||(t.isSigner=e.isSigner),t.isWritable||(t.isWritable=e.isWritable)}}return new CompiledKeys(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];assert$2(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,e])=>e.isSigner&&e.isWritable),r=e.filter(([,e])=>e.isSigner&&!e.isWritable),i=e.filter(([,e])=>!e.isSigner&&e.isWritable),n=e.filter(([,e])=>!e.isSigner&&!e.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:n.length};{assert$2(t.length>0,"Expected at least one writable signer key");const[e]=t[0];assert$2(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...t.map(([e])=>new PublicKey(e)),...r.map(([e])=>new PublicKey(e)),...i.map(([e])=>new PublicKey(e)),...n.map(([e])=>new PublicKey(e))]]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&e.isWritable),[i,n]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&!e.isWritable);if(0!==t.length||0!==i.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:r,readonly:n}]}drainKeysFoundInLookupTable(e,t){const r=new Array,i=new Array;for(const[n,o]of this.keyMetaMap.entries())if(t(o)){const t=new PublicKey(n),o=e.findIndex(e=>e.equals(t));o>=0&&(assert$2(o<256,"Max lookup table index exceeded"),r.push(o),i.push(t),this.keyMetaMap.delete(n))}return[r,i]}}const END_OF_BUFFER_ERROR_MESSAGE="Reached end of buffer unexpectedly";function guardedShift(e){if(0===e.length)throw new Error(END_OF_BUFFER_ERROR_MESSAGE);return e.shift()}function guardedSplice(e,...t){const[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw new Error(END_OF_BUFFER_ERROR_MESSAGE);return e.splice(...t)}class Message{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(e=>new PublicKey(e)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:bs58$1.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new MessageAccountKeys(this.staticAccountKeys)}static compile(e){const t=CompiledKeys.compile(e.instructions,e.payerKey),[r,i]=t.getMessageComponents(),n=new MessageAccountKeys(i).compileInstructions(e.instructions).map(e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:bs58$1.encode(e.data)}));return new Message({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:n})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){return e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];encodeLength(t,e);const r=this.instructions.map(e=>{const{accounts:t,programIdIndex:r}=e,i=Array.from(bs58$1.decode(e.data));let n=[];encodeLength(n,t.length);let o=[];return encodeLength(o,i.length),{programIdIndex:r,keyIndicesCount:Buffer$1.from(n),keyIndices:t,dataLength:Buffer$1.from(o),data:i}});let i=[];encodeLength(i,r.length);let n=Buffer$1.alloc(PACKET_DATA_SIZE);Buffer$1.from(i).copy(n);let o=i.length;r.forEach(e=>{const t=LayoutExports.struct([LayoutExports.u8("programIdIndex"),LayoutExports.blob(e.keyIndicesCount.length,"keyIndicesCount"),LayoutExports.seq(LayoutExports.u8("keyIndex"),e.keyIndices.length,"keyIndices"),LayoutExports.blob(e.dataLength.length,"dataLength"),LayoutExports.seq(LayoutExports.u8("userdatum"),e.data.length,"data")]).encode(e,n,o);o+=t}),n=n.slice(0,o);const a=LayoutExports.struct([LayoutExports.blob(1,"numRequiredSignatures"),LayoutExports.blob(1,"numReadonlySignedAccounts"),LayoutExports.blob(1,"numReadonlyUnsignedAccounts"),LayoutExports.blob(t.length,"keyCount"),LayoutExports.seq(publicKey("key"),e,"keys"),publicKey("recentBlockhash")]),s={numRequiredSignatures:Buffer$1.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Buffer$1.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Buffer$1.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Buffer$1.from(t),keys:this.accountKeys.map(e=>toBuffer(e.toBytes())),recentBlockhash:bs58$1.decode(this.recentBlockhash)};let u=Buffer$1.alloc(2048);const l=a.encode(s,u);return n.copy(u,l),u.slice(0,l+n.length)}static from(e){let t=[...e];const r=guardedShift(t);if(r!==(r&VERSION_PREFIX_MASK))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=guardedShift(t),n=guardedShift(t),o=decodeLength(t);let a=[];for(let h=0;h<o;h++){const e=guardedSplice(t,0,PUBLIC_KEY_LENGTH);a.push(new PublicKey(Buffer$1.from(e)))}const s=guardedSplice(t,0,PUBLIC_KEY_LENGTH),u=decodeLength(t);let l=[];for(let h=0;h<u;h++){const e=guardedShift(t),r=guardedSplice(t,0,decodeLength(t)),i=guardedSplice(t,0,decodeLength(t)),n=bs58$1.encode(Buffer$1.from(i));l.push({programIdIndex:e,accounts:r,data:n})}const c={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:n},recentBlockhash:bs58$1.encode(Buffer$1.from(s)),accountKeys:a,instructions:l};return new Message(c)}}class MessageV0{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new MessageAccountKeys(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){return e-r<this.addressTableLookups.reduce((e,t)=>e+t.writableIndexes.length,0)}if(e>=this.header.numRequiredSignatures){return e-t<r-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(e=>e.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const e of r.writableIndexes){if(!(e<i.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.writable.push(i.state.addresses[e])}for(const e of r.readonlyIndexes){if(!(e<i.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.readonly.push(i.state.addresses[e])}}return t}static compile(e){const t=CompiledKeys.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},n=e.addressLookupTableAccounts||[];for(const u of n){const e=t.extractTableLookup(u);if(void 0!==e){const[t,{writable:n,readonly:o}]=e;r.push(t),i.writable.push(...n),i.readonly.push(...o)}}const[o,a]=t.getMessageComponents(),s=new MessageAccountKeys(a,i).compileInstructions(e.instructions);return new MessageV0({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:s,addressTableLookups:r})}serialize(){const e=Array();encodeLength(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();encodeLength(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),n=Array();encodeLength(n,this.addressTableLookups.length);const o=LayoutExports.struct([LayoutExports.u8("prefix"),LayoutExports.struct([LayoutExports.u8("numRequiredSignatures"),LayoutExports.u8("numReadonlySignedAccounts"),LayoutExports.u8("numReadonlyUnsignedAccounts")],"header"),LayoutExports.blob(e.length,"staticAccountKeysLength"),LayoutExports.seq(publicKey(),this.staticAccountKeys.length,"staticAccountKeys"),publicKey("recentBlockhash"),LayoutExports.blob(r.length,"instructionsLength"),LayoutExports.blob(t.length,"serializedInstructions"),LayoutExports.blob(n.length,"addressTableLookupsLength"),LayoutExports.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(PACKET_DATA_SIZE),s=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(e=>e.toBytes()),recentBlockhash:bs58$1.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(n),serializedAddressTableLookups:i},a);return a.slice(0,s)}serializeInstructions(){let e=0;const t=new Uint8Array(PACKET_DATA_SIZE);for(const r of this.compiledInstructions){const i=Array();encodeLength(i,r.accountKeyIndexes.length);const n=Array();encodeLength(n,r.data.length);e+=LayoutExports.struct([LayoutExports.u8("programIdIndex"),LayoutExports.blob(i.length,"encodedAccountKeyIndexesLength"),LayoutExports.seq(LayoutExports.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),LayoutExports.blob(n.length,"encodedDataLength"),LayoutExports.blob(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(n),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(PACKET_DATA_SIZE);for(const r of this.addressTableLookups){const i=Array();encodeLength(i,r.writableIndexes.length);const n=Array();encodeLength(n,r.readonlyIndexes.length);e+=LayoutExports.struct([publicKey("accountKey"),LayoutExports.blob(i.length,"encodedWritableIndexesLength"),LayoutExports.seq(LayoutExports.u8(),r.writableIndexes.length,"writableIndexes"),LayoutExports.blob(n.length,"encodedReadonlyIndexesLength"),LayoutExports.seq(LayoutExports.u8(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(n),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=guardedShift(t),i=r&VERSION_PREFIX_MASK;assert$2(r!==i,"Expected versioned message but received legacy message");assert$2(0===i,`Expected versioned message with version 0 but found version ${i}`);const n={numRequiredSignatures:guardedShift(t),numReadonlySignedAccounts:guardedShift(t),numReadonlyUnsignedAccounts:guardedShift(t)},o=[],a=decodeLength(t);for(let d=0;d<a;d++)o.push(new PublicKey(guardedSplice(t,0,PUBLIC_KEY_LENGTH)));const s=bs58$1.encode(guardedSplice(t,0,PUBLIC_KEY_LENGTH)),u=decodeLength(t),l=[];for(let d=0;d<u;d++){const e=guardedShift(t),r=guardedSplice(t,0,decodeLength(t)),i=decodeLength(t),n=new Uint8Array(guardedSplice(t,0,i));l.push({programIdIndex:e,accountKeyIndexes:r,data:n})}const c=decodeLength(t),h=[];for(let d=0;d<c;d++){const e=new PublicKey(guardedSplice(t,0,PUBLIC_KEY_LENGTH)),r=guardedSplice(t,0,decodeLength(t)),i=guardedSplice(t,0,decodeLength(t));h.push({accountKey:e,writableIndexes:r,readonlyIndexes:i})}return new MessageV0({header:n,staticAccountKeys:o,recentBlockhash:s,compiledInstructions:l,addressTableLookups:h})}}const VersionedMessage={deserializeMessageVersion(e){const t=e[0],r=t&VERSION_PREFIX_MASK;return r===t?"legacy":r},deserialize:e=>{const t=VersionedMessage.deserializeMessageVersion(e);if("legacy"===t)return Message.from(e);if(0===t)return MessageV0.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let TransactionStatus=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({});const DEFAULT_SIGNATURE=Buffer$1.alloc(SIGNATURE_LENGTH_IN_BYTES).fill(0);class TransactionInstruction{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Buffer$1.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Transaction{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new TransactionInstruction(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length,this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let p=0;p<t.length;p++)if(void 0===t[p].programId)throw new Error(`Transaction instruction index ${p} has undefined program id`);const i=[],n=[];t.forEach(e=>{e.keys.forEach(e=>{n.push({...e})});const t=e.programId.toString();i.includes(t)||i.push(t)}),i.forEach(e=>{n.push({pubkey:new PublicKey(e),isSigner:!1,isWritable:!1})});const o=[];n.forEach(e=>{const t=e.pubkey.toString(),r=o.findIndex(e=>e.pubkey.toString()===t);r>-1?(o[r].isWritable=o[r].isWritable||e.isWritable,o[r].isSigner=o[r].isSigner||e.isSigner):o.push(e)}),o.sort(function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});const a=o.findIndex(e=>e.pubkey.equals(r));if(a>-1){const[e]=o.splice(a,1);e.isSigner=!0,e.isWritable=!0,o.unshift(e)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const p of this.signatures){const e=o.findIndex(e=>e.pubkey.equals(p.publicKey));if(!(e>-1))throw new Error(`unknown signer: ${p.publicKey.toString()}`);o[e].isSigner||(o[e].isSigner=!0)}let s=0,u=0,l=0;const c=[],h=[];o.forEach(({pubkey:e,isSigner:t,isWritable:r})=>{t?(c.push(e.toString()),s+=1,r||(u+=1)):(h.push(e.toString()),r||(l+=1))});const d=c.concat(h),f=t.map(e=>{const{data:t,programId:r}=e;return{programIdIndex:d.indexOf(r.toString()),accounts:e.keys.map(e=>d.indexOf(e.pubkey.toString())),data:bs58$1.encode(t)}});return f.forEach(e=>{assert$2(e.programIdIndex>=0),e.accounts.forEach(e=>assert$2(e>=0))}),new Message({header:{numRequiredSignatures:s,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l},accountKeys:d,recentBlockhash:e,instructions:f})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){if(this.signatures.every((e,r)=>t[r].equals(e.publicKey)))return e}return this.signatures=t.map(e=>({signature:null,publicKey:e})),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter(e=>{const r=e.toString();return!t.has(r)&&(t.add(r),!0)}).map(e=>({signature:null,publicKey:e}))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map(e=>({signature:null,publicKey:e.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(e=>{const t=sign$2(r,e.secretKey);this._addSignature(e.publicKey,toBuffer(t))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){assert$2(64===t.length);const r=this.signatures.findIndex(t=>e.equals(t.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=Buffer$1.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:i,publicKey:n}of this.signatures)null===i?t&&(r.missing||(r.missing=[])).push(n):verify(i,e,n.toBytes())||(r.invalid||(r.invalid=[])).push(n);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const e=this._getMessageSignednessErrors(i,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map(e=>e.toBase58()).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map(e=>e.toBase58()).join("`, `")}\`].`),new Error(t)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,r=[];encodeLength(r,t.length);const i=r.length+64*t.length+e.length,n=Buffer$1.alloc(i);return assert$2(t.length<256),Buffer$1.from(r).copy(n,0),t.forEach(({signature:e},t)=>{null!==e&&(assert$2(64===e.length,"signature has invalid length"),Buffer$1.from(e).copy(n,r.length+64*t))}),e.copy(n,r.length+64*t.length),assert$2(n.length<=PACKET_DATA_SIZE,`Transaction too large: ${n.length} > ${PACKET_DATA_SIZE}`),n}get keys(){return assert$2(1===this.instructions.length),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return assert$2(1===this.instructions.length),this.instructions[0].programId}get data(){return assert$2(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=decodeLength(t);let i=[];for(let n=0;n<r;n++){const e=guardedSplice(t,0,SIGNATURE_LENGTH_IN_BYTES);i.push(bs58$1.encode(Buffer$1.from(e)))}return Transaction.populate(Message.from(t),i)}static populate(e,t=[]){const r=new Transaction;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((t,i)=>{const n={signature:t==bs58$1.encode(DEFAULT_SIGNATURE)?null:bs58$1.decode(t),publicKey:e.accountKeys[i]};r.signatures.push(n)}),e.instructions.forEach(t=>{const i=t.accounts.map(t=>{const i=e.accountKeys[t];return{pubkey:i,isSigner:r.signatures.some(e=>e.publicKey.toString()===i.toString())||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}});r.instructions.push(new TransactionInstruction({keys:i,programId:e.accountKeys[t.programIdIndex],data:bs58$1.decode(t.data)}))}),r._message=e,r._json=r.toJSON(),r}}class VersionedTransaction{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)assert$2(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(SIGNATURE_LENGTH_IN_BYTES));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),t=Array();encodeLength(t,this.signatures.length);const r=LayoutExports.struct([LayoutExports.blob(t.length,"encodedSignaturesLength"),LayoutExports.seq(signature(),this.signatures.length,"signatures"),LayoutExports.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),n=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,n)}static deserialize(e){let t=[...e];const r=[],i=decodeLength(t);for(let o=0;o<i;o++)r.push(new Uint8Array(guardedSplice(t,0,SIGNATURE_LENGTH_IN_BYTES)));const n=VersionedMessage.deserialize(new Uint8Array(t));return new VersionedTransaction(n,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const e=r.findIndex(e=>e.equals(i.publicKey));assert$2(e>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[e]=sign$2(t,i.secretKey)}}addSignature(e,t){assert$2(64===t.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(t=>t.equals(e));assert$2(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}const NUM_TICKS_PER_SECOND=160,DEFAULT_TICKS_PER_SLOT=64,NUM_SLOTS_PER_SECOND=NUM_TICKS_PER_SECOND/DEFAULT_TICKS_PER_SLOT,MS_PER_SLOT=1e3/NUM_SLOTS_PER_SECOND;new PublicKey("SysvarC1ock11111111111111111111111111111111"),new PublicKey("SysvarEpochSchedu1e111111111111111111111111"),new PublicKey("Sysvar1nstructions1111111111111111111111111");const SYSVAR_RECENT_BLOCKHASHES_PUBKEY=new PublicKey("SysvarRecentB1ockHashes11111111111111111111"),SYSVAR_RENT_PUBKEY=new PublicKey("SysvarRent111111111111111111111111111111111");new PublicKey("SysvarRewards111111111111111111111111111111"),new PublicKey("SysvarS1otHashes111111111111111111111111111"),new PublicKey("SysvarS1otHistory11111111111111111111111111"),new PublicKey("SysvarStakeHistory1111111111111111111111111");class SendTransactionError extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:i}){const n=i?`Logs: \n${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. \n${r}. `+n+o;break;case"simulate":a=`Simulation failed. \nMessage: ${r}. \n`+n+o;break;default:a=`Unknown action '${(e=>e)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(e=>{if(e&&e.meta&&e.meta.logMessages){const r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class SolanaJSONRPCError extends Error{constructor({code:e,message:t,data:r},i){super(null!=i?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function sleep(e){return new Promise(t=>setTimeout(t,e))}function encodeData(e,t){const r=e.layout.span>=0?e.layout.span:getAlloc(e,t),i=Buffer$1.alloc(r),n=Object.assign({instruction:e.index},t);return e.layout.encode(n,i),i}const FeeCalculatorLayout=LayoutExports.nu64("lamportsPerSignature"),NonceAccountLayout=LayoutExports.struct([LayoutExports.u32("version"),LayoutExports.u32("state"),publicKey("authorizedPubkey"),publicKey("nonce"),LayoutExports.struct([FeeCalculatorLayout],"feeCalculator")]),NONCE_ACCOUNT_LENGTH=NonceAccountLayout.span;class NonceAccount{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=NonceAccountLayout.decode(toBuffer(e),0);return new NonceAccount({authorizedPubkey:new PublicKey(t.authorizedPubkey),nonce:new PublicKey(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function u64(e){const t=LayoutExports.blob(8,e),r=t.decode.bind(t),i=t.encode.bind(t),n=t,o=getU64Codec();return n.decode=(e,t)=>{const i=r(e,t);return o.decode(i)},n.encode=(e,t,r)=>{const n=o.encode(e);return i(n,t,r)},n}const SYSTEM_INSTRUCTION_LAYOUTS=Object.freeze({Create:{index:0,layout:LayoutExports.struct([LayoutExports.u32("instruction"),LayoutExports.ns64("lamports"),LayoutExports.ns64("space"),publicKey("programId")])},Assign:{index:1,layout:LayoutExports.struct([LayoutExports.u32("instruction"),publicKey("programId")])},Transfer:{index:2,layout:LayoutExports.struct([LayoutExports.u32("instruction"),u64("lamports")])},CreateWithSeed:{index:3,layout:LayoutExports.struct([LayoutExports.u32("instruction"),publicKey("base"),rustString("seed"),LayoutExports.ns64("lamports"),LayoutExports.ns64("space"),publicKey("programId")])},AdvanceNonceAccount:{index:4,layout:LayoutExports.struct([LayoutExports.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:LayoutExports.struct([LayoutExports.u32("instruction"),LayoutExports.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:LayoutExports.struct([LayoutExports.u32("instruction"),publicKey("authorized")])},AuthorizeNonceAccount:{index:7,layout:LayoutExports.struct([LayoutExports.u32("instruction"),publicKey("authorized")])},Allocate:{index:8,layout:LayoutExports.struct([LayoutExports.u32("instruction"),LayoutExports.ns64("space")])},AllocateWithSeed:{index:9,layout:LayoutExports.struct([LayoutExports.u32("instruction"),publicKey("base"),rustString("seed"),LayoutExports.ns64("space"),publicKey("programId")])},AssignWithSeed:{index:10,layout:LayoutExports.struct([LayoutExports.u32("instruction"),publicKey("base"),rustString("seed"),publicKey("programId")])},TransferWithSeed:{index:11,layout:LayoutExports.struct([LayoutExports.u32("instruction"),u64("lamports"),rustString("seed"),publicKey("programId")])},UpgradeNonceAccount:{index:12,layout:LayoutExports.struct([LayoutExports.u32("instruction")])}});class SystemProgram{constructor(){}static createAccount(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Create,{lamports:e.lamports,space:e.space,programId:toBuffer(e.programId.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;if("basePubkey"in e){t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Assign,{programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:toBuffer(e.programId.toBuffer())});let r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new TransactionInstruction({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){const t=new Transaction;"basePubkey"in e&&"seed"in e?t.add(SystemProgram.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId})):t.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,{authorized:toBuffer(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new TransactionInstruction(r)}static nonceAdvance(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new TransactionInstruction(r)}static nonceWithdraw(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,{lamports:e.lamports});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,{authorized:toBuffer(e.newAuthorizedPubkey.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;if("basePubkey"in e){t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:t})}}function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fastStableStringify$1,hasRequiredFastStableStringify;function requireFastStableStringify(){if(hasRequiredFastStableStringify)return fastStableStringify$1;hasRequiredFastStableStringify=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function r(i,n){var o,a,s,u,l,c,h;if(!0===i)return"true";if(!1===i)return"false";switch(typeof i){case"object":if(null===i)return null;if(i.toJSON&&"function"==typeof i.toJSON)return r(i.toJSON(),n);if("[object Array]"===(h=e.call(i))){for(s="[",a=i.length-1,o=0;o<a;o++)s+=r(i[o],!0)+",";return a>-1&&(s+=r(i[o],!0)),s+"]"}if("[object Object]"===h){for(a=(u=t(i).sort()).length,s="",o=0;o<a;)void 0!==(c=r(i[l=u[o]],!1))&&(s&&(s+=","),s+=JSON.stringify(l)+":"+c),o++;return"{"+s+"}"}return JSON.stringify(i);case"function":case"undefined":return n?null:void 0;case"string":return JSON.stringify(i);default:return isFinite(i)?i:null}}return fastStableStringify$1=function(e){var t=r(e,!1);if(void 0!==t)return""+t}}SystemProgram.programId=new PublicKey("11111111111111111111111111111111"),new PublicKey("BPFLoader2111111111111111111111111111111111");var fastStableStringifyExports=requireFastStableStringify(),fastStableStringify=getDefaultExportFromCjs(fastStableStringifyExports);const MINIMUM_SLOT_PER_EPOCH=32;function trailingZeros(e){let t=0;for(;e>1;)e/=2,t++;return t}function nextPowerOfTwo(e){return 0===e?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,(e|=e>>32)+1)}class EpochSchedule{constructor(e,t,r,i,n){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=n}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=trailingZeros(nextPowerOfTwo(e+MINIMUM_SLOT_PER_EPOCH+1))-trailingZeros(MINIMUM_SLOT_PER_EPOCH)-1;return[t,e-(this.getSlotsInEpoch(t)-MINIMUM_SLOT_PER_EPOCH)]}{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*MINIMUM_SLOT_PER_EPOCH:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+trailingZeros(MINIMUM_SLOT_PER_EPOCH)):this.slotsPerEpoch}}var fetchImpl=globalThis.fetch;class RpcWebSocketClient extends CommonClient{constructor(e,t,r){super(e=>{const r=WebSocket(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return this.underlyingSocket="socket"in r?r.socket:r,r},e,t,r),this.underlyingSocket=void 0}call(...e){var t;const r=null==(t=this.underlyingSocket)?void 0:t.readyState;return 1===r?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...e){var t;const r=null==(t=this.underlyingSocket)?void 0:t.readyState;return 1===r?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function decodeData(e,t){let r;try{r=e.layout.decode(t)}catch(err){throw new Error("invalid instruction; "+err)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}const LOOKUP_TABLE_META_SIZE=56;class AddressLookupTableAccount{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=decodeData(LookupTableMetaLayout,e),r=e.length-LOOKUP_TABLE_META_SIZE;assert$2(r>=0,"lookup table is invalid"),assert$2(r%32==0,"lookup table is invalid");const i=r/32,{addresses:n}=LayoutExports.struct([LayoutExports.seq(publicKey(),i,"addresses")]).decode(e.slice(LOOKUP_TABLE_META_SIZE));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new PublicKey(t.authority[0]):void 0,addresses:n.map(e=>new PublicKey(e))}}}const LookupTableMetaLayout={index:1,layout:LayoutExports.struct([LayoutExports.u32("typeIndex"),u64("deactivationSlot"),LayoutExports.nu64("lastExtendedSlot"),LayoutExports.u8("lastExtendedStartIndex"),LayoutExports.u8(),LayoutExports.seq(publicKey(),LayoutExports.offset(LayoutExports.u8(),-1),"authority")])},URL_RE=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function makeWebsocketUrl(e){const t=e.match(URL_RE);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);const[r,i,n,o]=t,a=e.startsWith("https:")?"wss:":"ws:",s=null==n?null:parseInt(n.slice(1),10);return`${a}//${i}${null==s?"":`:${s+1}`}${o}`}const PublicKeyFromString=coerce(instance(PublicKey),string(),e=>new PublicKey(e)),RawAccountDataResult=tuple([string(),literal("base64")]),BufferFromRawAccountData=coerce(instance(Buffer$1),RawAccountDataResult,e=>Buffer$1.from(e[0],"base64")),BLOCKHASH_CACHE_TIMEOUT_MS=3e4;function assertEndpointUrl(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}function extractCommitmentFromConfig(e){let t,r;if("string"==typeof e)t=e;else if(e){const{commitment:i,...n}=e;t=i,r=n}return{commitment:t,config:r}}function applyDefaultMemcmpEncodingToFilters(e){return e.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function createRpcResult(e){return union([type({jsonrpc:literal("2.0"),id:string(),result:e}),type({jsonrpc:literal("2.0"),id:string(),error:type({code:unknown(),message:string(),data:optional(any())})})])}const UnknownRpcResult=createRpcResult(unknown());function jsonRpcResult(e){return coerce(createRpcResult(e),UnknownRpcResult,t=>"error"in t?t:{...t,result:create(t.result,e)})}function jsonRpcResultAndContext(e){return jsonRpcResult(type({context:type({slot:number()}),value:e}))}function notificationResultAndContext(e){return type({context:type({slot:number()}),value:e})}function versionedMessageFromResponse(e,t){return 0===e?new MessageV0({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new PublicKey(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:bs58$1.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Message(t)}const GetInflationGovernorResult=type({foundation:number(),foundationTerm:number(),initial:number(),taper:number(),terminal:number()}),GetInflationRewardResult=jsonRpcResult(array(nullable(type({epoch:number(),effectiveSlot:number(),amount:number(),postBalance:number(),commission:optional(nullable(number()))})))),GetRecentPrioritizationFeesResult=array(type({slot:number(),prioritizationFee:number()})),GetInflationRateResult=type({total:number(),validator:number(),foundation:number(),epoch:number()}),GetEpochInfoResult=type({epoch:number(),slotIndex:number(),slotsInEpoch:number(),absoluteSlot:number(),blockHeight:optional(number()),transactionCount:optional(number())}),GetEpochScheduleResult=type({slotsPerEpoch:number(),leaderScheduleSlotOffset:number(),warmup:boolean(),firstNormalEpoch:number(),firstNormalSlot:number()}),GetLeaderScheduleResult=record(string(),array(number())),TransactionErrorResult=nullable(union([type({}),string()])),SignatureStatusResult=type({err:TransactionErrorResult}),SignatureReceivedResult=literal("receivedSignature"),VersionResult=type({"solana-core":string(),"feature-set":optional(number())}),ParsedInstructionStruct=type({program:string(),programId:PublicKeyFromString,parsed:unknown()}),PartiallyDecodedInstructionStruct=type({programId:PublicKeyFromString,accounts:array(PublicKeyFromString),data:string()}),SimulatedTransactionResponseStruct=jsonRpcResultAndContext(type({err:nullable(union([type({}),string()])),logs:nullable(array(string())),accounts:optional(nullable(array(nullable(type({executable:boolean(),owner:string(),lamports:number(),data:array(string()),rentEpoch:optional(number())}))))),unitsConsumed:optional(number()),returnData:optional(nullable(type({programId:string(),data:tuple([string(),literal("base64")])}))),innerInstructions:optional(nullable(array(type({index:number(),instructions:array(union([ParsedInstructionStruct,PartiallyDecodedInstructionStruct]))}))))})),BlockProductionResponseStruct=jsonRpcResultAndContext(type({byIdentity:record(string(),array(number())),range:type({firstSlot:number(),lastSlot:number()})}));function createRpcClient(e,t,r,i,n,o){const a=r||fetchImpl;let s;i&&(s=async(e,t)=>{const r=await new Promise((r,n)=>{try{i(e,t,(e,t)=>r([e,t]))}catch(o){n(o)}});return await a(...r)});return new RpcClient(async(r,i)=>{const o={method:"POST",body:r,agent:undefined,headers:Object.assign({"Content-Type":"application/json"},t||{},COMMON_HTTP_HEADERS)};try{let t,r=5,u=500;for(;(t=s?await s(e,o):await a(e,o),429===t.status)&&!0!==n&&(r-=1,0!==r);)await sleep(u),u*=2;const l=await t.text();t.ok?i(null,l):i(new Error(`${t.status} ${t.statusText}: ${l}`))}catch(err){err instanceof Error&&i(err)}},{})}function createRpcRequest(e){return(t,r)=>new Promise((i,n)=>{e.request(t,r,(e,t)=>{e?n(e):i(t)})})}function createRpcBatchRequest(e){return t=>new Promise((r,i)=>{0===t.length&&r([]);const n=t.map(t=>e.request(t.methodName,t.args));e.request(n,(e,t)=>{e?i(e):r(t)})})}const GetInflationGovernorRpcResult=jsonRpcResult(GetInflationGovernorResult),GetInflationRateRpcResult=jsonRpcResult(GetInflationRateResult),GetRecentPrioritizationFeesRpcResult=jsonRpcResult(GetRecentPrioritizationFeesResult),GetEpochInfoRpcResult=jsonRpcResult(GetEpochInfoResult),GetEpochScheduleRpcResult=jsonRpcResult(GetEpochScheduleResult),GetLeaderScheduleRpcResult=jsonRpcResult(GetLeaderScheduleResult),SlotRpcResult=jsonRpcResult(number()),GetSupplyRpcResult=jsonRpcResultAndContext(type({total:number(),circulating:number(),nonCirculating:number(),nonCirculatingAccounts:array(PublicKeyFromString)})),TokenAmountResult=type({amount:string(),uiAmount:nullable(number()),decimals:number(),uiAmountString:optional(string())}),GetTokenLargestAccountsResult=jsonRpcResultAndContext(array(type({address:PublicKeyFromString,amount:string(),uiAmount:nullable(number()),decimals:number(),uiAmountString:optional(string())}))),GetTokenAccountsByOwner=jsonRpcResultAndContext(array(type({pubkey:PublicKeyFromString,account:type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:BufferFromRawAccountData,rentEpoch:number()})}))),ParsedAccountDataResult=type({program:string(),parsed:unknown(),space:number()}),GetParsedTokenAccountsByOwner=jsonRpcResultAndContext(array(type({pubkey:PublicKeyFromString,account:type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:ParsedAccountDataResult,rentEpoch:number()})}))),GetLargestAccountsRpcResult=jsonRpcResultAndContext(array(type({lamports:number(),address:PublicKeyFromString}))),AccountInfoResult=type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:BufferFromRawAccountData,rentEpoch:number()}),KeyedAccountInfoResult=type({pubkey:PublicKeyFromString,account:AccountInfoResult}),ParsedOrRawAccountData=coerce(union([instance(Buffer$1),ParsedAccountDataResult]),union([RawAccountDataResult,ParsedAccountDataResult]),e=>Array.isArray(e)?create(e,BufferFromRawAccountData):e),ParsedAccountInfoResult=type({executable:boolean(),owner:PublicKeyFromString,lamports:number(),data:ParsedOrRawAccountData,rentEpoch:number()}),KeyedParsedAccountInfoResult=type({pubkey:PublicKeyFromString,account:ParsedAccountInfoResult}),StakeActivationResult=type({state:union([literal("active"),literal("inactive"),literal("activating"),literal("deactivating")]),active:number(),inactive:number()}),GetConfirmedSignaturesForAddress2RpcResult=jsonRpcResult(array(type({signature:string(),slot:number(),err:TransactionErrorResult,memo:nullable(string()),blockTime:optional(nullable(number()))}))),GetSignaturesForAddressRpcResult=jsonRpcResult(array(type({signature:string(),slot:number(),err:TransactionErrorResult,memo:nullable(string()),blockTime:optional(nullable(number()))}))),AccountNotificationResult=type({subscription:number(),result:notificationResultAndContext(AccountInfoResult)}),ProgramAccountInfoResult=type({pubkey:PublicKeyFromString,account:AccountInfoResult}),ProgramAccountNotificationResult=type({subscription:number(),result:notificationResultAndContext(ProgramAccountInfoResult)}),SlotInfoResult=type({parent:number(),slot:number(),root:number()}),SlotNotificationResult=type({subscription:number(),result:SlotInfoResult}),SlotUpdateResult=union([type({type:union([literal("firstShredReceived"),literal("completed"),literal("optimisticConfirmation"),literal("root")]),slot:number(),timestamp:number()}),type({type:literal("createdBank"),parent:number(),slot:number(),timestamp:number()}),type({type:literal("frozen"),slot:number(),timestamp:number(),stats:type({numTransactionEntries:number(),numSuccessfulTransactions:number(),numFailedTransactions:number(),maxTransactionsPerEntry:number()})}),type({type:literal("dead"),slot:number(),timestamp:number(),err:string()})]),SlotUpdateNotificationResult=type({subscription:number(),result:SlotUpdateResult}),SignatureNotificationResult=type({subscription:number(),result:notificationResultAndContext(union([SignatureStatusResult,SignatureReceivedResult]))}),RootNotificationResult=type({subscription:number(),result:number()}),ContactInfoResult=type({pubkey:string(),gossip:nullable(string()),tpu:nullable(string()),rpc:nullable(string()),version:nullable(string())}),VoteAccountInfoResult=type({votePubkey:string(),nodePubkey:string(),activatedStake:number(),epochVoteAccount:boolean(),epochCredits:array(tuple([number(),number(),number()])),commission:number(),lastVote:number(),rootSlot:nullable(number())}),GetVoteAccounts=jsonRpcResult(type({current:array(VoteAccountInfoResult),delinquent:array(VoteAccountInfoResult)})),ConfirmationStatus=union([literal("processed"),literal("confirmed"),literal("finalized")]),SignatureStatusResponse=type({slot:number(),confirmations:nullable(number()),err:TransactionErrorResult,confirmationStatus:optional(ConfirmationStatus)}),GetSignatureStatusesRpcResult=jsonRpcResultAndContext(array(nullable(SignatureStatusResponse))),GetMinimumBalanceForRentExemptionRpcResult=jsonRpcResult(number()),AddressTableLookupStruct=type({accountKey:PublicKeyFromString,writableIndexes:array(number()),readonlyIndexes:array(number())}),ConfirmedTransactionResult=type({signatures:array(string()),message:type({accountKeys:array(string()),header:type({numRequiredSignatures:number(),numReadonlySignedAccounts:number(),numReadonlyUnsignedAccounts:number()}),instructions:array(type({accounts:array(number()),data:string(),programIdIndex:number()})),recentBlockhash:string(),addressTableLookups:optional(array(AddressTableLookupStruct))})}),AnnotatedAccountKey=type({pubkey:PublicKeyFromString,signer:boolean(),writable:boolean(),source:optional(union([literal("transaction"),literal("lookupTable")]))}),ConfirmedTransactionAccountsModeResult=type({accountKeys:array(AnnotatedAccountKey),signatures:array(string())}),ParsedInstructionResult=type({parsed:unknown(),program:string(),programId:PublicKeyFromString}),RawInstructionResult=type({accounts:array(PublicKeyFromString),data:string(),programId:PublicKeyFromString}),InstructionResult=union([RawInstructionResult,ParsedInstructionResult]),UnknownInstructionResult=union([type({parsed:unknown(),program:string(),programId:string()}),type({accounts:array(string()),data:string(),programId:string()})]),ParsedOrRawInstruction=coerce(InstructionResult,UnknownInstructionResult,e=>create(e,"accounts"in e?RawInstructionResult:ParsedInstructionResult)),ParsedConfirmedTransactionResult=type({signatures:array(string()),message:type({accountKeys:array(AnnotatedAccountKey),instructions:array(ParsedOrRawInstruction),recentBlockhash:string(),addressTableLookups:optional(nullable(array(AddressTableLookupStruct)))})}),TokenBalanceResult=type({accountIndex:number(),mint:string(),owner:optional(string()),programId:optional(string()),uiTokenAmount:TokenAmountResult}),LoadedAddressesResult=type({writable:array(PublicKeyFromString),readonly:array(PublicKeyFromString)}),ConfirmedTransactionMetaResult=type({err:TransactionErrorResult,fee:number(),innerInstructions:optional(nullable(array(type({index:number(),instructions:array(type({accounts:array(number()),data:string(),programIdIndex:number()}))})))),preBalances:array(number()),postBalances:array(number()),logMessages:optional(nullable(array(string()))),preTokenBalances:optional(nullable(array(TokenBalanceResult))),postTokenBalances:optional(nullable(array(TokenBalanceResult))),loadedAddresses:optional(LoadedAddressesResult),computeUnitsConsumed:optional(number()),costUnits:optional(number())}),ParsedConfirmedTransactionMetaResult=type({err:TransactionErrorResult,fee:number(),innerInstructions:optional(nullable(array(type({index:number(),instructions:array(ParsedOrRawInstruction)})))),preBalances:array(number()),postBalances:array(number()),logMessages:optional(nullable(array(string()))),preTokenBalances:optional(nullable(array(TokenBalanceResult))),postTokenBalances:optional(nullable(array(TokenBalanceResult))),loadedAddresses:optional(LoadedAddressesResult),computeUnitsConsumed:optional(number()),costUnits:optional(number())}),TransactionVersionStruct=union([literal(0),literal("legacy")]),RewardsResult=type({pubkey:string(),lamports:number(),postBalance:nullable(number()),rewardType:nullable(string()),commission:optional(nullable(number()))}),GetBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionResult,meta:nullable(ConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetNoneModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetAccountsModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionAccountsModeResult,meta:nullable(ConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetParsedBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ParsedConfirmedTransactionResult,meta:nullable(ParsedConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetParsedAccountsModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionAccountsModeResult,meta:nullable(ParsedConfirmedTransactionMetaResult),version:optional(TransactionVersionStruct)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetParsedNoneModeBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),rewards:optional(array(RewardsResult)),blockTime:nullable(number()),blockHeight:nullable(number())}))),GetConfirmedBlockRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),transactions:array(type({transaction:ConfirmedTransactionResult,meta:nullable(ConfirmedTransactionMetaResult)})),rewards:optional(array(RewardsResult)),blockTime:nullable(number())}))),GetBlockSignaturesRpcResult=jsonRpcResult(nullable(type({blockhash:string(),previousBlockhash:string(),parentSlot:number(),signatures:array(string()),blockTime:nullable(number())}))),GetTransactionRpcResult=jsonRpcResult(nullable(type({slot:number(),meta:nullable(ConfirmedTransactionMetaResult),blockTime:optional(nullable(number())),transaction:ConfirmedTransactionResult,version:optional(TransactionVersionStruct)}))),GetParsedTransactionRpcResult=jsonRpcResult(nullable(type({slot:number(),transaction:ParsedConfirmedTransactionResult,meta:nullable(ParsedConfirmedTransactionMetaResult),blockTime:optional(nullable(number())),version:optional(TransactionVersionStruct)}))),GetLatestBlockhashRpcResult=jsonRpcResultAndContext(type({blockhash:string(),lastValidBlockHeight:number()})),IsBlockhashValidRpcResult=jsonRpcResultAndContext(boolean()),PerfSampleResult=type({slot:number(),numTransactions:number(),numSlots:number(),samplePeriodSecs:number()}),GetRecentPerformanceSamplesRpcResult=jsonRpcResult(array(PerfSampleResult)),GetFeeCalculatorRpcResult=jsonRpcResultAndContext(nullable(type({feeCalculator:type({lamportsPerSignature:number()})}))),RequestAirdropRpcResult=jsonRpcResult(string()),SendTransactionRpcResult=jsonRpcResult(string()),LogsResult=type({err:TransactionErrorResult,logs:array(string()),signature:string()}),LogsNotificationResult=type({result:notificationResultAndContext(LogsResult),subscription:number()}),COMMON_HTTP_HEADERS={"solana-client":"js/1.0.0-maintenance"};class Connection{constructor(e,t){let r,i,n,o,a,s;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const e={};return async t=>{const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=this._buildArgs([],r,void 0,i),o=fastStableStringify(n);return e[o]=e[o]??(async()=>{try{const e=create(await this._rpcRequest("getBlockHeight",n),jsonRpcResult(number()));if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get block height information");return e.result}finally{delete e[o]}})(),await e[o]}})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,i=t.httpHeaders,n=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,s=t.httpAgent),this._rpcEndpoint=assertEndpointUrl(e),this._rpcWsEndpoint=r||makeWebsocketUrl(e),this._rpcClient=createRpcClient(e,i,n,o,a,s),this._rpcRequest=createRpcRequest(this._rpcClient),this._rpcBatchRequest=createRpcBatchRequest(this._rpcClient),this._rpcWebSocket=new RpcWebSocketClient(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=this._buildArgs([e.toBase58()],r,void 0,i),o=create(await this._rpcRequest("getBalance",n),jsonRpcResultAndContext(number()));if("error"in o)throw new SolanaJSONRPCError(o.error,`failed to get balance for ${e.toBase58()}`);return o.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(e=>e.value).catch(t=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+t)})}async getBlockTime(e){const t=create(await this._rpcRequest("getBlockTime",[e]),jsonRpcResult(nullable(number())));if("error"in t)throw new SolanaJSONRPCError(t.error,`failed to get block time for slot ${e}`);return t.result}async getMinimumLedgerSlot(){const e=create(await this._rpcRequest("minimumLedgerSlot",[]),jsonRpcResult(number()));if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const e=create(await this._rpcRequest("getFirstAvailableBlock",[]),SlotRpcResult);if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get first available block");return e.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};const r=create(await this._rpcRequest("getSupply",[t]),GetSupplyRpcResult);if("error"in r)throw new SolanaJSONRPCError(r.error,"failed to get supply");return r.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),i=create(await this._rpcRequest("getTokenSupply",r),jsonRpcResultAndContext(TokenAmountResult));if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),i=create(await this._rpcRequest("getTokenAccountBalance",r),jsonRpcResultAndContext(TokenAmountResult));if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,r){const{commitment:i,config:n}=extractCommitmentFromConfig(r);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,i,"base64",n),s=create(await this._rpcRequest("getTokenAccountsByOwner",a),GetTokenAccountsByOwner);if("error"in s)throw new SolanaJSONRPCError(s.error,`failed to get token accounts owned by account ${e.toBase58()}`);return s.result}async getParsedTokenAccountsByOwner(e,t,r){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const n=this._buildArgs(i,r,"jsonParsed"),o=create(await this._rpcRequest("getTokenAccountsByOwner",n),GetParsedTokenAccountsByOwner);if("error"in o)throw new SolanaJSONRPCError(o.error,`failed to get token accounts owned by account ${e.toBase58()}`);return o.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],i=create(await this._rpcRequest("getLargestAccounts",r),GetLargestAccountsRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),i=create(await this._rpcRequest("getTokenLargestAccounts",r),GetTokenLargestAccountsResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=this._buildArgs([e.toBase58()],r,"base64",i),o=create(await this._rpcRequest("getAccountInfo",n),jsonRpcResultAndContext(nullable(AccountInfoResult)));if("error"in o)throw new SolanaJSONRPCError(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getParsedAccountInfo(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=create(await this._rpcRequest("getAccountInfo",n),jsonRpcResultAndContext(nullable(ParsedAccountInfoResult)));if("error"in o)throw new SolanaJSONRPCError(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=e.map(e=>e.toBase58()),o=this._buildArgs([n],r,"jsonParsed",i),a=create(await this._rpcRequest("getMultipleAccounts",o),jsonRpcResultAndContext(array(nullable(ParsedAccountInfoResult))));if("error"in a)throw new SolanaJSONRPCError(a.error,`failed to get info for accounts ${n}`);return a.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=e.map(e=>e.toBase58()),o=this._buildArgs([n],r,"base64",i),a=create(await this._rpcRequest("getMultipleAccounts",o),jsonRpcResultAndContext(array(nullable(AccountInfoResult))));if("error"in a)throw new SolanaJSONRPCError(a.error,`failed to get info for accounts ${n}`);return a.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:i,config:n}=extractCommitmentFromConfig(t),o=this._buildArgs([e.toBase58()],i,void 0,{...n,epoch:null!=r?r:null==n?void 0:n.epoch}),a=create(await this._rpcRequest("getStakeActivation",o),jsonRpcResult(StakeActivationResult));if("error"in a)throw new SolanaJSONRPCError(a.error,`failed to get Stake Activation ${e.toBase58()}`);return a.result}async getProgramAccounts(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),{encoding:n,...o}=i||{},a=this._buildArgs([e.toBase58()],r,n||"base64",{...o,...o.filters?{filters:applyDefaultMemcmpEncodingToFilters(o.filters)}:null}),s=await this._rpcRequest("getProgramAccounts",a),u=array(KeyedAccountInfoResult),l=!0===o.withContext?create(s,jsonRpcResultAndContext(u)):create(s,jsonRpcResult(u));if("error"in l)throw new SolanaJSONRPCError(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=create(await this._rpcRequest("getProgramAccounts",n),jsonRpcResult(array(KeyedParsedAccountInfoResult)));if("error"in o)throw new SolanaJSONRPCError(o.error,`failed to get accounts owned by program ${e.toBase58()}`);return o.result}async confirmTransaction(e,t){var r;let i,n;if("string"==typeof e)i=e;else{const t=e;if(null==(r=t.abortSignal)?void 0:r.aborted)return Promise.reject(t.abortSignal.reason);i=t.signature}try{n=bs58$1.decode(i)}catch(err){throw new Error("signature must be base58 encoded: "+i)}return assert$2(64===n.length,"signature has invalid length"),"string"==typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:i}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,i,n=!1;return{abortConfirmation:()=>{i&&(i(),i=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise((o,a)=>{try{r=this.onSignature(t,(e,t)=>{r=void 0;const i={context:t,value:e};o({__type:TransactionStatus.PROCESSED,response:i})},e);const s=new Promise(e=>{null==r?e():i=this._onSubscriptionStateChange(r,t=>{"subscribed"===t&&e()})});(async()=>{if(await s,n)return;const r=await this.getSignatureStatus(t);if(n)return;if(null==r)return;const{context:i,value:u}=r;if(null!=u)if(null==u?void 0:u.err)a(u.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===u.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===u.confirmationStatus||"confirmed"===u.confirmationStatus)return}n=!0,o({__type:TransactionStatus.PROCESSED,response:{context:i,value:u}})}})()}catch(err){a(err)}})}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:i}}){let n=!1;const o=new Promise(t=>{const i=async()=>{try{return await this.getBlockHeight(e)}catch(t){return-1}};(async()=>{let e=await i();if(!n){for(;e<=r;){if(await sleep(1e3),n)return;if(e=await i(),n)return}t({__type:TransactionStatus.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),u=this.getCancellationPromise(t);let l;try{const e=await Promise.race([u,s,o]);if(e.__type!==TransactionStatus.PROCESSED)throw new TransactionExpiredBlockheightExceededError(i);l=e.response}finally{n=!0,a()}return l}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:i,nonceValue:n,signature:o}}){let a=!1;const s=new Promise(t=>{let o=n,s=null;const u=async()=>{try{const{context:t,value:n}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return s=t.slot,null==n?void 0:n.nonce}catch(t){return o}};(async()=>{if(o=await u(),!a)for(;;){if(n!==o)return void t({__type:TransactionStatus.NONCE_INVALID,slotInWhichNonceDidAdvance:s});if(await sleep(2e3),a)return;if(o=await u(),a)return}})()}),{abortConfirmation:u,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),c=this.getCancellationPromise(t);let h;try{const t=await Promise.race([c,l,s]);if(t.__type===TransactionStatus.PROCESSED)h=t.response;else{let i;for(;;){const e=await this.getSignatureStatus(o);if(null==e)break;if(!(e.context.slot<(t.slotInWhichNonceDidAdvance??r))){i=e;break}await sleep(400)}if(!(null==i?void 0:i.value))throw new TransactionExpiredNonceInvalidError(o);{const t=e||"finalized",{confirmationStatus:r}=i.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new TransactionExpiredNonceInvalidError(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new TransactionExpiredNonceInvalidError(o);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new TransactionExpiredNonceInvalidError(o)}h={context:i.context,value:{err:i.value.err}}}}}finally{a=!0,u()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const i=new Promise(t=>{let i=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":i=this._confirmTransactionInitialTimeout||3e4}r=setTimeout(()=>t({__type:TransactionStatus.TIMED_OUT,timeoutMs:i}),i)}),{abortConfirmation:n,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const e=await Promise.race([o,i]);if(e.__type!==TransactionStatus.PROCESSED)throw new TransactionExpiredTimeoutError(t,e.timeoutMs/1e3);a=e.response}finally{clearTimeout(r),n()}return a}async getClusterNodes(){const e=create(await this._rpcRequest("getClusterNodes",[]),jsonRpcResult(array(ContactInfoResult)));if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=create(await this._rpcRequest("getVoteAccounts",t),GetVoteAccounts);if("error"in r)throw new SolanaJSONRPCError(r.error,"failed to get vote accounts");return r.result}async getSlot(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),i=this._buildArgs([],t,void 0,r),n=create(await this._rpcRequest("getSlot",i),jsonRpcResult(number()));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get slot");return n.result}async getSlotLeader(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),i=this._buildArgs([],t,void 0,r),n=create(await this._rpcRequest("getSlotLeader",i),jsonRpcResult(string()));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get slot leader");return n.result}async getSlotLeaders(e,t){const r=[e,t],i=create(await this._rpcRequest("getSlotLeaders",r),jsonRpcResult(array(PublicKeyFromString)));if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:r,value:i}=await this.getSignatureStatuses([e],t);assert$2(1===i.length);return{context:r,value:i[0]}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const i=create(await this._rpcRequest("getSignatureStatuses",r),GetSignatureStatusesRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),i=this._buildArgs([],t,void 0,r),n=create(await this._rpcRequest("getTransactionCount",i),jsonRpcResult(number()));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get transaction count");return n.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=create(await this._rpcRequest("getInflationGovernor",t),GetInflationGovernorRpcResult);if("error"in r)throw new SolanaJSONRPCError(r.error,"failed to get inflation");return r.result}async getInflationReward(e,t,r){const{commitment:i,config:n}=extractCommitmentFromConfig(r),o=this._buildArgs([e.map(e=>e.toBase58())],i,void 0,{...n,epoch:null!=t?t:null==n?void 0:n.epoch}),a=create(await this._rpcRequest("getInflationReward",o),GetInflationRewardResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const e=create(await this._rpcRequest("getInflationRate",[]),GetInflationRateRpcResult);if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),i=this._buildArgs([],t,void 0,r),n=create(await this._rpcRequest("getEpochInfo",i),GetEpochInfoRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get epoch info");return n.result}async getEpochSchedule(){const e=create(await this._rpcRequest("getEpochSchedule",[]),GetEpochScheduleRpcResult);if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get epoch schedule");const t=e.result;return new EpochSchedule(t.slotsPerEpoch,t.leaderScheduleSlotOffset,t.warmup,t.firstNormalEpoch,t.firstNormalSlot)}async getLeaderSchedule(){const e=create(await this._rpcRequest("getLeaderSchedule",[]),GetLeaderScheduleRpcResult);if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),i=create(await this._rpcRequest("getMinimumBalanceForRentExemption",r),GetMinimumBalanceForRentExemptionRpcResult);return"error"in i?0:i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(e){const t=create(await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),GetRecentPerformanceSamplesRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get recent performance samples");return t.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),i=create(await this._rpcRequest("getFeeCalculatorForBlockhash",r),GetFeeCalculatorRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get fee calculator");const{context:n,value:o}=i.result;return{context:n,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(e,t){const r=toBuffer(e.serialize()).toString("base64"),i=this._buildArgs([r],t),n=create(await this._rpcRequest("getFeeForMessage",i),jsonRpcResultAndContext(nullable(number())));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get fee for message");if(null===n.result)throw new Error("invalid blockhash");return n.result}async getRecentPrioritizationFees(e){var t;const r=null==(t=null==e?void 0:e.lockedWritableAccounts)?void 0:t.map(e=>e.toBase58()),i=(null==r?void 0:r.length)?[r]:[],n=create(await this._rpcRequest("getRecentPrioritizationFees",i),GetRecentPrioritizationFeesRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),i=this._buildArgs([],t,void 0,r),n=create(await this._rpcRequest("getLatestBlockhash",i),GetLatestBlockhashRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get latest blockhash");return n.result}async isBlockhashValid(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=this._buildArgs([e],r,void 0,i),o=create(await this._rpcRequest("isBlockhashValid",n),IsBlockhashValidRpcResult);if("error"in o)throw new SolanaJSONRPCError(o.error,"failed to determine if the blockhash `"+e+"`is valid");return o.result}async getVersion(){const e=create(await this._rpcRequest("getVersion",[]),jsonRpcResult(VersionResult));if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get version");return e.result}async getGenesisHash(){const e=create(await this._rpcRequest("getGenesisHash",[]),jsonRpcResult(string()));if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get genesis hash");return e.result}async getBlock(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",n);try{switch(null==i?void 0:i.transactionDetails){case"accounts":{const e=create(o,GetAccountsModeBlockRpcResult);if("error"in e)throw e.error;return e.result}case"none":{const e=create(o,GetNoneModeBlockRpcResult);if("error"in e)throw e.error;return e.result}default:{const e=create(o,GetBlockRpcResult);if("error"in e)throw e.error;const{result:t}=e;return t?{...t,transactions:t.transactions.map(({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:versionedMessageFromResponse(r,e.message)},version:r}))}:null}}}catch(a){throw new SolanaJSONRPCError(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",n);try{switch(null==i?void 0:i.transactionDetails){case"accounts":{const e=create(o,GetParsedAccountsModeBlockRpcResult);if("error"in e)throw e.error;return e.result}case"none":{const e=create(o,GetParsedNoneModeBlockRpcResult);if("error"in e)throw e.error;return e.result}default:{const e=create(o,GetParsedBlockRpcResult);if("error"in e)throw e.error;return e.result}}}catch(a){throw new SolanaJSONRPCError(a,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){const{commitment:i,...n}=e;r=i,t=n}const i=this._buildArgs([],r,"base64",t),n=create(await this._rpcRequest("getBlockProduction",i),BlockProductionResponseStruct);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get block production information");return n.result}async getTransaction(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=create(await this._rpcRequest("getTransaction",n),GetTransactionRpcResult);if("error"in o)throw new SolanaJSONRPCError(o.error,"failed to get transaction");const a=o.result;return a?{...a,transaction:{...a.transaction,message:versionedMessageFromResponse(a.version,a.transaction.message)}}:a}async getParsedTransaction(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=create(await this._rpcRequest("getTransaction",n),GetParsedTransactionRpcResult);if("error"in o)throw new SolanaJSONRPCError(o.error,"failed to get transaction");return o.result}async getParsedTransactions(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(n)).map(e=>{const t=create(e,GetParsedTransactionRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get transactions");return t.result})}async getTransactions(e,t){const{commitment:r,config:i}=extractCommitmentFromConfig(t),n=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,void 0,i)}));return(await this._rpcBatchRequest(n)).map(e=>{const t=create(e,GetTransactionRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get transactions");const r=t.result;return r?{...r,transaction:{...r.transaction,message:versionedMessageFromResponse(r.version,r.transaction.message)}}:r})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=create(await this._rpcRequest("getBlock",r),GetConfirmedBlockRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get confirmed block");const n=i.result;if(!n)throw new Error("Confirmed block "+e+" not found");const o={...n,transactions:n.transactions.map(({transaction:e,meta:t})=>{const r=new Message(e.message);return{meta:t,transaction:{...e,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:e,meta:t})=>({meta:t,transaction:Transaction.populate(e.message,e.signatures)}))}}async getBlocks(e,t,r){const i=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),n=create(await this._rpcRequest("getBlocks",i),jsonRpcResult(array(number())));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get blocks");return n.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=create(await this._rpcRequest("getBlock",r),GetBlockSignaturesRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get block");const n=i.result;if(!n)throw new Error("Block "+e+" not found");return n}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=create(await this._rpcRequest("getBlock",r),GetBlockSignaturesRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get confirmed block");const n=i.result;if(!n)throw new Error("Confirmed block "+e+" not found");return n}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=create(await this._rpcRequest("getTransaction",r),GetTransactionRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get transaction");const n=i.result;if(!n)return n;const o=new Message(n.transaction.message),a=n.transaction.signatures;return{...n,transaction:Transaction.populate(o,a)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=create(await this._rpcRequest("getTransaction",r),GetParsedTransactionRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const r=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(e=>{const t=create(e,GetParsedTransactionRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get confirmed transactions");return t.result})}async getConfirmedSignaturesForAddress(e,t,r){let i={},n=await this.getFirstAvailableBlock();for(;!("until"in i)&&!(--t<=0||t<n);)try{const e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(i.until=e.signatures[e.signatures.length-1].toString())}catch(err){if(err instanceof Error&&err.message.includes("skipped"))continue;throw err}let o=await this.getSlot("finalized");for(;!("before"in i||++r>o);)try{const e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(i.before=e.signatures[e.signatures.length-1].toString())}catch(err){if(err instanceof Error&&err.message.includes("skipped"))continue;throw err}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(e=>e.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),n=create(await this._rpcRequest("getConfirmedSignaturesForAddress2",i),GetConfirmedSignaturesForAddress2RpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get confirmed signatures for address");return n.result}async getSignaturesForAddress(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),n=create(await this._rpcRequest("getSignaturesForAddress",i),GetSignaturesForAddressRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get signatures for address");return n.result}async getAddressLookupTable(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let n=null;return null!==i&&(n=new AddressLookupTableAccount({key:e,state:AddressLookupTableAccount.deserialize(i.data)})),{context:r,value:n}}async getNonceAndContext(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let n=null;return null!==i&&(n=NonceAccount.fromAccountData(i.data)),{context:r,value:n}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(e=>e.value).catch(t=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+t)})}async requestAirdrop(e,t){const r=create(await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),RequestAirdropRpcResult);if("error"in r)throw new SolanaJSONRPCError(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await sleep(100);const e=Date.now()-this._blockhashInfo.lastFetch>=BLOCKHASH_CACHE_TIMEOUT_MS;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let i=0;i<50;i++){const e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await sleep(MS_PER_SLOT/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),i=this._buildArgs([],t,"base64",r),n=create(await this._rpcRequest("getStakeMinimumDelegation",i),jsonRpcResultAndContext(number()));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get stake minimum delegation");return n.result}async simulateTransaction(e,t,r){if("message"in e){const i=e.serialize(),n=Buffer$1.from(i).toString("base64");if(Array.isArray(t)||void 0!==r)throw new Error("Invalid arguments");const o=t||{};o.encoding="base64","commitment"in o||(o.commitment=this.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(o.innerInstructions=t.innerInstructions);const a=[n,o],s=create(await this._rpcRequest("simulateTransaction",a),SimulatedTransactionResponseStruct);if("error"in s)throw new Error("failed to simulate transaction: "+s.error.message);return s.result}let i;if(e instanceof Transaction){let t=e;i=new Transaction,i.feePayer=t.feePayer,i.instructions=e.instructions,i.nonceInfo=t.nonceInfo,i.signatures=t.signatures}else i=Transaction.populate(e),i._message=i._json=void 0;if(void 0!==t&&!Array.isArray(t))throw new Error("Invalid arguments");const n=t;if(i.nonceInfo&&n)i.sign(...n);else{let e=this._disableBlockhashCaching;for(;;){const t=await this._blockhashWithExpiryBlockHeight(e);if(i.lastValidBlockHeight=t.lastValidBlockHeight,i.recentBlockhash=t.blockhash,!n)break;if(i.sign(...n),!i.signature)throw new Error("!signature");const r=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}e=!0}}const o=i._compile(),a=o.serialize(),s=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const e=(Array.isArray(r)?r:o.nonProgramIds()).map(e=>e.toBase58());u.accounts={encoding:"base64",addresses:e}}n&&(u.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(u.innerInstructions=t.innerInstructions);const l=[s,u],c=create(await this._rpcRequest("simulateTransaction",l),SimulatedTransactionResponseStruct);if("error"in c){let e;if("data"in c.error&&(e=c.error.data.logs,e&&Array.isArray(e))){const t="\n    ";e.join(t)}throw new SendTransactionError({action:"simulate",signature:"",transactionMessage:c.error.message,logs:e})}return c.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let t=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(t);if(e.lastValidBlockHeight=r.lastValidBlockHeight,e.recentBlockhash=r.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const n=e.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(n)){this._blockhashInfo.transactionSignatures.push(n);break}t=!0}}const n=e.serialize();return await this.sendRawTransaction(n,r)}async sendRawTransaction(e,t){const r=toBuffer(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},i=t&&t.skipPreflight,n=!0===i?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),i&&(r.skipPreflight=i),n&&(r.preflightCommitment=n);const o=[e,r],a=create(await this._rpcRequest("sendTransaction",o),SendTransactionRpcResult);if("error"in a){let e;throw"data"in a.error&&(e=a.error.data.logs),new SendTransactionError({action:i?"send":"simulate",signature:"",transactionMessage:a.error.message,logs:e})}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1}_wsOnClose(e){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,t])=>{this._setSubscription(e,{...t,state:"pending"})})):this._updateSubscriptions()}_setSubscription(e,t){var r;const i=null==(r=this._subscriptionsByHash[e])?void 0:r.state;if(this._subscriptionsByHash[e]=t,i!==t.state){const r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach(e=>{try{e(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var r;const i=this._subscriptionHashByClientSubscriptionId[e];if(null==i)return()=>{};const n=(r=this._subscriptionStateChangeCallbacksByHash)[i]||(r[i]=new Set);return n.add(t),()=>{n.delete(t),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[i]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(err){Error}},500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async e=>{const r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void(await this._updateSubscriptions());await(async()=>{const{args:i,method:n}=r;try{this._setSubscription(e,{...r,state:"subscribing"});const t=await this._rpcWebSocket.call(n,i);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(o){if(!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:n}=r;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(n,[i])}catch(o){if(Error,!t())return;return this._setSubscription(e,{...r,state:"subscribed"}),void(await this._updateSubscriptions())}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach(e=>{try{e(...t)}catch(r){}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=create(e,AccountNotificationResult);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,i=fastStableStringify([e.method,t]),n=this._subscriptionsByHash[i];return void 0===n?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:n.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const t=this._subscriptionsByHash[i];assert$2(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:i,config:n}=extractCommitmentFromConfig(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",n);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=create(e,ProgramAccountNotificationResult);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,i){const{commitment:n,config:o}=extractCommitmentFromConfig(r),a=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",o||(i?{filters:applyDefaultMemcmpEncodingToFilters(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const i=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=create(e,LogsNotificationResult);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=create(e,SlotNotificationResult);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=create(e,SlotUpdateNotificationResult);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r&&await r()}_buildArgs(e,t,r,i){const n=t||this._commitment;if(n||r||i){let t={};r&&(t.encoding=r),n&&(t.commitment=n),i&&(t=Object.assign(t,i)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,i){const n=t||this._commitment;if(n&&!["confirmed","finalized"].includes(n))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,i)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=create(e,SignatureNotificationResult);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),n=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(n)}catch(i){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return n}onSignatureWithOptions(e,t,r){const{commitment:i,...n}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,n),a=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(a)}catch(i){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=create(e,RootNotificationResult);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Keypair{constructor(e){this._keypair=void 0,this._keypair=e??generateKeypair()}static generate(){return new Keypair(generateKeypair())}static fromSecretKey(e,t){if(64!==e.byteLength)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const t=e.slice(0,32),i=getPublicKey(t);for(let e=0;e<32;e++)if(r[e]!==i[e])throw new Error("provided secretKey is invalid")}return new Keypair({publicKey:r,secretKey:e})}static fromSeed(e){const t=getPublicKey(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new Keypair({publicKey:t,secretKey:r})}get publicKey(){return new PublicKey(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}var _Lockup;Object.freeze({CreateLookupTable:{index:0,layout:LayoutExports.struct([LayoutExports.u32("instruction"),u64("recentSlot"),LayoutExports.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:LayoutExports.struct([LayoutExports.u32("instruction")])},ExtendLookupTable:{index:2,layout:LayoutExports.struct([LayoutExports.u32("instruction"),u64(),LayoutExports.seq(publicKey(),LayoutExports.offset(LayoutExports.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:LayoutExports.struct([LayoutExports.u32("instruction")])},CloseLookupTable:{index:4,layout:LayoutExports.struct([LayoutExports.u32("instruction")])}}),new PublicKey("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:LayoutExports.struct([LayoutExports.u8("instruction"),LayoutExports.u32("units"),LayoutExports.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:LayoutExports.struct([LayoutExports.u8("instruction"),LayoutExports.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:LayoutExports.struct([LayoutExports.u8("instruction"),LayoutExports.u32("units")])},SetComputeUnitPrice:{index:3,layout:LayoutExports.struct([LayoutExports.u8("instruction"),u64("microLamports")])}}),new PublicKey("ComputeBudget111111111111111111111111111111"),LayoutExports.struct([LayoutExports.u8("numSignatures"),LayoutExports.u8("padding"),LayoutExports.u16("signatureOffset"),LayoutExports.u16("signatureInstructionIndex"),LayoutExports.u16("publicKeyOffset"),LayoutExports.u16("publicKeyInstructionIndex"),LayoutExports.u16("messageDataOffset"),LayoutExports.u16("messageDataSize"),LayoutExports.u16("messageInstructionIndex")]),new PublicKey("Ed25519SigVerify111111111111111111111111111"),secp256k1$1.utils.isValidPrivateKey,secp256k1$1.getPublicKey,LayoutExports.struct([LayoutExports.u8("numSignatures"),LayoutExports.u16("signatureOffset"),LayoutExports.u8("signatureInstructionIndex"),LayoutExports.u16("ethAddressOffset"),LayoutExports.u8("ethAddressInstructionIndex"),LayoutExports.u16("messageDataOffset"),LayoutExports.u16("messageDataSize"),LayoutExports.u8("messageInstructionIndex"),LayoutExports.blob(20,"ethAddress"),LayoutExports.blob(64,"signature"),LayoutExports.u8("recoveryId")]),new PublicKey("KeccakSecp256k11111111111111111111111111111"),new PublicKey("StakeConfig11111111111111111111111111111111");class Lockup{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}_Lockup=Lockup,Lockup.default=new _Lockup(0,0,PublicKey.default),Object.freeze({Initialize:{index:0,layout:LayoutExports.struct([LayoutExports.u32("instruction"),authorized(),lockup()])},Authorize:{index:1,layout:LayoutExports.struct([LayoutExports.u32("instruction"),publicKey("newAuthorized"),LayoutExports.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:LayoutExports.struct([LayoutExports.u32("instruction")])},Split:{index:3,layout:LayoutExports.struct([LayoutExports.u32("instruction"),LayoutExports.ns64("lamports")])},Withdraw:{index:4,layout:LayoutExports.struct([LayoutExports.u32("instruction"),LayoutExports.ns64("lamports")])},Deactivate:{index:5,layout:LayoutExports.struct([LayoutExports.u32("instruction")])},Merge:{index:7,layout:LayoutExports.struct([LayoutExports.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:LayoutExports.struct([LayoutExports.u32("instruction"),publicKey("newAuthorized"),LayoutExports.u32("stakeAuthorizationType"),rustString("authoritySeed"),publicKey("authorityOwner")])}}),new PublicKey("Stake11111111111111111111111111111111111111"),Object.freeze({InitializeAccount:{index:0,layout:LayoutExports.struct([LayoutExports.u32("instruction"),voteInit()])},Authorize:{index:1,layout:LayoutExports.struct([LayoutExports.u32("instruction"),publicKey("newAuthorized"),LayoutExports.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:LayoutExports.struct([LayoutExports.u32("instruction"),LayoutExports.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:LayoutExports.struct([LayoutExports.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:LayoutExports.struct([LayoutExports.u32("instruction"),voteAuthorizeWithSeedArgs()])}}),new PublicKey("Vote111111111111111111111111111111111111111"),new PublicKey("Va1idator1nfo111111111111111111111111111111"),type({name:string(),website:optional(string()),details:optional(string()),iconUrl:optional(string()),keybaseUsername:optional(string())}),new PublicKey("Vote111111111111111111111111111111111111111"),LayoutExports.struct([publicKey("nodePubkey"),publicKey("authorizedWithdrawer"),LayoutExports.u8("commission"),LayoutExports.nu64(),LayoutExports.seq(LayoutExports.struct([LayoutExports.nu64("slot"),LayoutExports.u32("confirmationCount")]),LayoutExports.offset(LayoutExports.u32(),-8),"votes"),LayoutExports.u8("rootSlotValid"),LayoutExports.nu64("rootSlot"),LayoutExports.nu64(),LayoutExports.seq(LayoutExports.struct([LayoutExports.nu64("epoch"),publicKey("authorizedVoter")]),LayoutExports.offset(LayoutExports.u32(),-8),"authorizedVoters"),LayoutExports.struct([LayoutExports.seq(LayoutExports.struct([publicKey("authorizedPubkey"),LayoutExports.nu64("epochOfLastAuthorizedSwitch"),LayoutExports.nu64("targetEpoch")]),32,"buf"),LayoutExports.nu64("idx"),LayoutExports.u8("isEmpty")],"priorVoters"),LayoutExports.nu64(),LayoutExports.seq(LayoutExports.struct([LayoutExports.nu64("epoch"),LayoutExports.nu64("credits"),LayoutExports.nu64("prevCredits")]),LayoutExports.offset(LayoutExports.u32(),-8),"epochCredits"),LayoutExports.struct([LayoutExports.nu64("slot"),LayoutExports.nu64("timestamp")],"lastTimestamp")]);const LAMPORTS_PER_SOL=1e9;async function getProviderHandlers({privKey:e,keyExportEnabled:t,getProviderEngineProxy:r}){if("string"!=typeof e)throw WalletInitializationError$1.invalidParams("privKey must be a string");const i=Keypair.fromSecretKey(Buffer.from(e,"hex"));return{requestAccounts:async()=>[i.publicKey.toBase58()],getAccounts:async()=>[i.publicKey.toBase58()],getPublicKey:async()=>i.publicKey.toBase58(),getPrivateKey:async()=>{if(!t)throw providerErrors.custom({message:"Private key export is disabled",code:4902});return e},getSecretKey:async()=>bs58$3.encode(i.secretKey),signTransaction:async e=>{var t;if(null===(t=e.params)||void 0===t||!t.message)throw rpcErrors.invalidParams("message");const r=e.params.message;return void 0!==r.version||r instanceof VersionedTransaction?r.sign([i]):r.partialSign(i),r},signMessage:async e=>{var t;if(null===(t=e.params)||void 0===t||!t.message)throw rpcErrors.invalidParams("message");return nacl.sign.detached(e.params.message,i.secretKey)},signAndSendTransaction:async e=>{var t;if(null===(t=e.params)||void 0===t||!t.message)throw rpcErrors.invalidParams("message");const n=r();if(!n)throw providerErrors.custom({message:"Provider is not initialized",code:4902});const o=e.params.message;void 0!==o.version||o instanceof VersionedTransaction?o.sign([i]):o.partialSign(i);return{signature:await n.request({method:"sendTransaction",params:[Buffer.from(o.serialize()).toString("base64"),{encoding:"base64",preflightCommitment:"confirmed"}]})}},signAllTransactions:async e=>{var t,r,n;if(null===(t=e.params)||void 0===t||!t.message||null===(r=e.params)||void 0===r||!r.message.length)throw rpcErrors.invalidParams("message");const o=null===(n=e.params)||void 0===n?void 0:n.message;for(const a of o||[]){const e=a;void 0!==e.version||e instanceof VersionedTransaction?e.sign([i]):e.partialSign(i)}return o}}}var _SolanaPrivateKeyProvider;class SolanaPrivateKeyProvider extends BaseProvider{constructor({config:e,state:t}){super({config:e,state:t}),_defineProperty(this,"PROVIDER_CHAIN_NAMESPACE",CHAIN_NAMESPACES$1.SOLANA)}async enable(){if(!this.state.privateKey)throw providerErrors.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}getEd25519Key(e){return getED25519Key(e).sk.toString("hex").padStart(128,"0")}async setupProvider(e){const{chainNamespace:t}=this.config.chainConfig;if(t!==this.PROVIDER_CHAIN_NAMESPACE)throw WalletInitializationError$1.incompatibleChainNameSpace("Invalid chain namespace");const r=createSolanaMiddleware(await getProviderHandlers({privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this),keyExportEnabled:this.config.keyExportEnabled})),i=new JRPCEngine,{networkMiddleware:n}=createJsonRpcClient(this.config.chainConfig);i.push(this.getChainSwitchMiddleware()),i.push(this.getAccountMiddleware()),i.push(r),i.push(n);const o=providerFromEngine(i);this.updateProviderEngineProxy(o),await this.lookupNetwork()}async updateAccount(e){if(!this._providerEngineProxy)throw providerErrors.custom({message:"Provider is not initialized",code:4902});if(await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==e.privateKey){await this.setupProvider(e.privateKey);const t=await this._providerEngineProxy.request({method:"requestAccounts"});this.emit("accountsChanged",t)}}async switchChain(e){if(!this._providerEngineProxy)throw providerErrors.custom({message:"Provider is not initialized",code:4902});const t=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:t});const r=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw providerErrors.custom({message:"Provider is not initialized",code:4902});const e=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:t}=this.config;if("ok"!==e)throw WalletInitializationError$1.rpcConnectionError(`Failed to lookup network for following rpc target: ${t.rpcTarget}`);return this.update({chainId:t.chainId}),this.state.chainId!==t.chainId&&(this.emit("chainChanged",this.state.chainId),this.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return createChainSwitchMiddleware({addNewChainConfig:async e=>{if(!e.params)throw rpcErrors.invalidParams("Missing request params");const{chainId:t,chainName:r,rpcUrls:i,blockExplorerUrls:n,nativeCurrency:o,iconUrls:a}=e.params;if(!t)throw rpcErrors.invalidParams("Missing chainId in chainParams");if(!i||0===i.length)throw rpcErrors.invalidParams("Missing rpcUrls in chainParams");if(!o)throw rpcErrors.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:CHAIN_NAMESPACES$1.SOLANA,chainId:t,ticker:(null==o?void 0:o.symbol)||"SOL",tickerName:(null==o?void 0:o.name)||"Solana",displayName:r,rpcTarget:i[0],blockExplorerUrl:(null==n?void 0:n[0])||"",decimals:(null==o?void 0:o.decimals)||9,logo:(null==a?void 0:a[0])||"https://images.toruswallet.io/sol.svg"})},switchSolanaChain:async e=>{if(!e.params)throw rpcErrors.invalidParams("Missing request params");if(!e.params.chainId)throw rpcErrors.invalidParams("Missing chainId");await this.switchChain(e.params)}})}getAccountMiddleware(){return createAccountMiddleware({updatePrivatekey:async e=>{if(!e.params)throw rpcErrors.invalidParams("Missing request params");if(!e.params.privateKey)throw rpcErrors.invalidParams("Missing privateKey");const{privateKey:t}=e.params;await this.updateAccount({privateKey:t})}})}}_SolanaPrivateKeyProvider=SolanaPrivateKeyProvider,_defineProperty(SolanaPrivateKeyProvider,"getProviderInstance",async e=>{const t=new _SolanaPrivateKeyProvider({config:{chainConfig:e.chainConfig}});return await t.setupProvider(e.privKey),t});const index=Object.freeze(Object.defineProperty({__proto__:null,SolanaPrivateKeyProvider:SolanaPrivateKeyProvider,createAccountMiddleware:createAccountMiddleware,createChainIdMiddleware:createChainIdMiddleware,createChainSwitchMiddleware:createChainSwitchMiddleware,createConfigMiddleware:createConfigMiddleware,createGenericJRPCMiddleware:createGenericJRPCMiddleware,createGetAccountsMiddleware:createGetAccountsMiddleware,createJsonRpcClient:createJsonRpcClient,createProviderConfigMiddleware:createProviderConfigMiddleware,createRequestAccountsMiddleware:createRequestAccountsMiddleware,createSolanaMiddleware:createSolanaMiddleware},Symbol.toStringTag,{value:"Module"})),TORUS_LEGACY_NETWORK={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},TORUS_SAPPHIRE_NETWORK={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};TORUS_LEGACY_NETWORK.MAINNET,TORUS_LEGACY_NETWORK.TESTNET,TORUS_LEGACY_NETWORK.CYAN,TORUS_LEGACY_NETWORK.AQUA,TORUS_LEGACY_NETWORK.CELESTE,TORUS_LEGACY_NETWORK.AQUA,TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK.CELESTE,TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK.CYAN,TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK.MAINNET,TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET,TORUS_LEGACY_NETWORK.TESTNET,TORUS_SAPPHIRE_NETWORK.SAPPHIRE_DEVNET,TORUS_LEGACY_NETWORK.MAINNET,TORUS_LEGACY_NETWORK.TESTNET,TORUS_LEGACY_NETWORK.CYAN,TORUS_LEGACY_NETWORK.AQUA,TORUS_LEGACY_NETWORK.CELESTE,TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET,TORUS_SAPPHIRE_NETWORK.SAPPHIRE_DEVNET,TORUS_LEGACY_NETWORK.MAINNET,TORUS_LEGACY_NETWORK.TESTNET,TORUS_LEGACY_NETWORK.CYAN,TORUS_LEGACY_NETWORK.AQUA,TORUS_LEGACY_NETWORK.CELESTE,TORUS_LEGACY_NETWORK.MAINNET,TORUS_LEGACY_NETWORK.TESTNET,TORUS_LEGACY_NETWORK.CYAN,TORUS_LEGACY_NETWORK.AQUA,TORUS_LEGACY_NETWORK.CELESTE;const base64url=base64urlLib;function safeatob(e){return base64url.decode(e)}function jsonToBase64(e){return base64url.encode(JSON.stringify(e))}function storageAvailable(e){let t,r=!1,i=0;try{t=window[e],r=!0,i=t.length;const n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(err){const t=err;return t&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&r&&0!==i}}class MemoryStore{constructor(){_defineProperty(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}}class BrowserStorage{constructor(e,t){_defineProperty(this,"storage",void 0),_defineProperty(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch(r){}}static getInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local";if(!this.instanceMap.has(e)){let r;r="local"===t&&storageAvailable("localStorage")?window.localStorage:"session"===t&&storageAvailable("sessionStorage")?window.sessionStorage:new MemoryStore,this.instanceMap.set(e,new this(e,r))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(r))}}_defineProperty(BrowserStorage,"instanceMap",new Map);const UX_MODE={POPUP:"popup",REDIRECT:"redirect"},OPENLOGIN_NETWORK=_objectSpread2(_objectSpread2({},TORUS_SAPPHIRE_NETWORK),TORUS_LEGACY_NETWORK),SUPPORTED_KEY_CURVES={SECP256K1:"secp256k1",ED25519:"ed25519"},LOGIN_PROVIDER={FACEBOOK:"facebook",LINE:"line"},OPENLOGIN_ACTIONS={LOGIN:"login",ENABLE_MFA:"enable_mfa",MANAGE_MFA:"manage_mfa",MODIFY_SOCIAL_FACTOR:"modify_social_factor"},BUILD_ENV={PRODUCTION:"production",DEVELOPMENT:"development",STAGING:"staging",TESTING:"testing"},SESSION_SERVER="https://session.web3auth.io";var lodash_merge={exports:{}},hasRequiredLodash_merge;function requireLodash_merge(){return hasRequiredLodash_merge||(hasRequiredLodash_merge=1,function(e,t){var r="__lodash_hash_undefined__",i=9007199254740991,n="[object Arguments]",o="[object Function]",a="[object Object]",s=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[n]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l[o]=l["[object Map]"]=l["[object Number]"]=l[a]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1;var c="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,h="object"==typeof self&&self&&self.Object===Object&&self,d=c||h||Function("return this")(),f=t&&!t.nodeType&&t,p=f&&e&&!e.nodeType&&e,m=p&&p.exports===f,g=m&&c.process,y=function(){try{var e=p&&p.require&&p.require("util").types;return e||g&&g.binding&&g.binding("util")}catch(t){}}(),b=y&&y.isTypedArray;var w,v=Array.prototype,_=Function.prototype,E=Object.prototype,S=d["__core-js_shared__"],A=_.toString,M=E.hasOwnProperty,R=(w=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",x=E.toString,k=A.call(Object),T=RegExp("^"+A.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=m?d.Buffer:void 0,C=d.Symbol,I=d.Uint8Array;P&&P.allocUnsafe;var $,B,O=($=Object.getPrototypeOf,B=Object,function(e){return $(B(e))}),N=Object.create,L=E.propertyIsEnumerable,q=v.splice,j=C?C.toStringTag:void 0,U=function(){try{var e=he(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),D=P?P.isBuffer:void 0,F=Math.max,W=Date.now,K=he(d,"Map"),H=he(Object,"create"),z=function(){function e(){}return function(t){if(!Se(t))return{};if(N)return N(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function V(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function G(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Y(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function J(e){var t=this.__data__=new G(e);this.size=t.size}function Z(e,t){var r=be(e),i=!r&&ye(e),n=!r&&!i&&ve(e),o=!r&&!i&&!n&&Me(e),a=r||i||n||o,s=a?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],u=s.length;for(var l in e)a&&("length"==l||n&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||de(l,u))||s.push(l);return s}function X(e,t,r){(void 0!==r&&!ge(e[t],r)||void 0===r&&!(t in e))&&te(e,t,r)}function Q(e,t,r){var i=e[t];M.call(e,t)&&ge(i,r)&&(void 0!==r||t in e)||te(e,t,r)}function ee(e,t){for(var r=e.length;r--;)if(ge(e[r][0],t))return r;return-1}function te(e,t,r){"__proto__"==t&&U?U(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}V.prototype.clear=function(){this.__data__=H?H(null):{},this.size=0},V.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},V.prototype.get=function(e){var t=this.__data__;if(H){var i=t[e];return i===r?void 0:i}return M.call(t,e)?t[e]:void 0},V.prototype.has=function(e){var t=this.__data__;return H?void 0!==t[e]:M.call(t,e)},V.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=H&&void 0===t?r:t,this},G.prototype.clear=function(){this.__data__=[],this.size=0},G.prototype.delete=function(e){var t=this.__data__,r=ee(t,e);return!(r<0)&&(r==t.length-1?t.pop():q.call(t,r,1),--this.size,!0)},G.prototype.get=function(e){var t=this.__data__,r=ee(t,e);return r<0?void 0:t[r][1]},G.prototype.has=function(e){return ee(this.__data__,e)>-1},G.prototype.set=function(e,t){var r=this.__data__,i=ee(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this},Y.prototype.clear=function(){this.size=0,this.__data__={hash:new V,map:new(K||G),string:new V}},Y.prototype.delete=function(e){var t=ce(this,e).delete(e);return this.size-=t?1:0,t},Y.prototype.get=function(e){return ce(this,e).get(e)},Y.prototype.has=function(e){return ce(this,e).has(e)},Y.prototype.set=function(e,t){var r=ce(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this},J.prototype.clear=function(){this.__data__=new G,this.size=0},J.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},J.prototype.get=function(e){return this.__data__.get(e)},J.prototype.has=function(e){return this.__data__.has(e)},J.prototype.set=function(e,t){var r=this.__data__;if(r instanceof G){var i=r.__data__;if(!K||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Y(i)}return r.set(e,t),this.size=r.size,this};var re=function(e,t,r){for(var i=-1,n=Object(e),o=r(e),a=o.length;a--;){var s=o[++i];if(!1===t(n[s],s,n))break}return e};function ie(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":j&&j in Object(e)?function(e){var t=M.call(e,j),r=e[j];try{e[j]=void 0;var i=!0}catch(o){}var n=x.call(e);i&&(t?e[j]=r:delete e[j]);return n}(e):function(e){return x.call(e)}(e)}function ne(e){return Ae(e)&&ie(e)==n}function oe(e){return!(!Se(e)||function(e){return!!R&&R in e}(e))&&(_e(e)?T:s).test(function(e){if(null!=e){try{return A.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function ae(e){if(!Se(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=fe(e),r=[];for(var i in e)("constructor"!=i||!t&&M.call(e,i))&&r.push(i);return r}function se(e,t,r,i,n){e!==t&&re(t,function(o,s){if(n||(n=new J),Se(o))!function(e,t,r,i,n,o,s){var u=pe(e,r),l=pe(t,r),c=s.get(l);if(c)return void X(e,r,c);var h=o?o(u,l,r+"",e,t,s):void 0,d=void 0===h;if(d){var f=be(l),p=!f&&ve(l),m=!f&&!p&&Me(l);h=l,f||p||m?be(u)?h=u:Ae(g=u)&&we(g)?h=function(e,t){var r=-1,i=e.length;t||(t=Array(i));for(;++r<i;)t[r]=e[r];return t}(u):p?(d=!1,h=l.slice()):m?(d=!1,h=function(e){var t=(r=e.buffer,i=new r.constructor(r.byteLength),new I(i).set(new I(r)),i);var r,i;return new e.constructor(t,e.byteOffset,e.length)}(l)):h=[]:function(e){if(!Ae(e)||ie(e)!=a)return!1;var t=O(e);if(null===t)return!0;var r=M.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&A.call(r)==k}(l)||ye(l)?(h=u,ye(u)?h=function(e){return function(e,t,r){var i=!r;r||(r={});var n=-1,o=t.length;for(;++n<o;){var a=t[n],s=void 0;void 0===s&&(s=e[a]),i?te(r,a,s):Q(r,a,s)}return r}(e,Re(e))}(u):Se(u)&&!_e(u)||(h=function(e){return"function"!=typeof e.constructor||fe(e)?{}:z(O(e))}(l))):d=!1}var g;d&&(s.set(l,h),n(h,l,i,o,s),s.delete(l));X(e,r,h)}(e,t,s,r,se,i,n);else{var u=i?i(pe(e,s),o,s+"",e,t,n):void 0;void 0===u&&(u=o),X(e,s,u)}},Re)}function ue(e,t){return me(function(e,t,r){return t=F(void 0===t?e.length-1:t,0),function(){for(var i=arguments,n=-1,o=F(i.length-t,0),a=Array(o);++n<o;)a[n]=i[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=i[n];return s[t]=r(a),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,t,Te),e+"")}var le=U?function(e,t){return U(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Te;function ce(e,t){var r,i,n=e.__data__;return("string"==(i=typeof(r=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map}function he(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return oe(r)?r:void 0}function de(e,t){var r=typeof e;return!!(t=null==t?i:t)&&("number"==r||"symbol"!=r&&u.test(e))&&e>-1&&e%1==0&&e<t}function fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||E)}function pe(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var me=function(e){var t=0,r=0;return function(){var i=W(),n=16-(i-r);if(r=i,n>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(le);function ge(e,t){return e===t||e!=e&&t!=t}var ye=ne(function(){return arguments}())?ne:function(e){return Ae(e)&&M.call(e,"callee")&&!L.call(e,"callee")},be=Array.isArray;function we(e){return null!=e&&Ee(e.length)&&!_e(e)}var ve=D||function(){return!1};function _e(e){if(!Se(e))return!1;var t=ie(e);return t==o||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Se(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ae(e){return null!=e&&"object"==typeof e}var Me=b?function(e){return function(t){return e(t)}}(b):function(e){return Ae(e)&&Ee(e.length)&&!!l[ie(e)]};function Re(e){return we(e)?Z(e):ae(e)}var xe,ke=(xe=function(e,t,r){se(e,t,r)},ue(function(e,t){var r=-1,i=t.length,n=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(n=xe.length>3&&"function"==typeof n?(i--,n):void 0,o&&function(e,t,r){if(!Se(r))return!1;var i=typeof t;return!!("number"==i?we(r)&&de(t,r.length):"string"==i&&t in r)&&ge(r[t],e)}(t[0],t[1],o)&&(n=i<3?void 0:n,i=1),e=Object(e);++r<i;){var a=t[r];a&&xe(e,a,r,n)}return e}));function Te(e){return e}e.exports=ke}(lodash_merge,lodash_merge.exports)),lodash_merge.exports}lodash_merge.exports;var lodash_mergeExports=requireLodash_merge();const merge=getDefaultExportFromCjs$2(lodash_mergeExports),log$4=loglevel$1$1.getLogger("http-helpers");log$4.setLevel(loglevelExports.levels.INFO);let apiKey$1="torus-default";const gatewayAuthHeader$1="x-api-key";async function fetchAndTrace$1(e,t){let r=null;try{r=new URL(e)}catch(i){}return fetch(e,t)}function getApiKeyHeaders$1(){const e={};return e[gatewayAuthHeader$1]=apiKey$1,e}function debugLogResponse$1(e){log$4.info(`Response: ${e.status} ${e.statusText}`),log$4.info(`Url: ${e.url}`)}function logTracingHeader$1(e){const t=e.headers.get("x-web3-correlation-id");t&&log$4.info(`Request tracing with traceID = ${t}`)}const promiseTimeout$1=async(e,t)=>{let r=null;try{const i=new Promise((t,i)=>{r=setTimeout(()=>{i(new Error(`Timed out in ${e}ms`))},e)}),n=await Promise.race([t,i]);return null!=r&&clearTimeout(r),n}catch(err){throw null!=r&&clearTimeout(r),err}},get=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={mode:"cors",headers:{}};(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).useAPIKey&&(r.headers=_objectSpread2(_objectSpread2({},r.headers),getApiKeyHeaders$1()));const i=merge(r,t,{method:"GET"}),n=await fetchAndTrace$1(e,i);if(n.ok){const e=n.headers.get("content-type");return null!=e&&e.includes("application/json")?n.json():n.text()}throw debugLogResponse$1(n),n},post$1=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};i.useAPIKey&&(n.headers=_objectSpread2(_objectSpread2({},n.headers),getApiKeyHeaders$1()));const o=merge(n,r,{method:"POST"});return i.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t),promiseTimeout$1(i.timeout||6e4,fetchAndTrace$1(e,o).then(e=>{if(i.logTracingHeader&&logTracingHeader$1(e),e.ok){const t=e.headers.get("content-type");return null!=t&&t.includes("application/json")?e.json():e.text()}throw debugLogResponse$1(e),e}))},patch=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};i.useAPIKey&&(n.headers=_objectSpread2(_objectSpread2({},n.headers),getApiKeyHeaders$1()));const o=merge(n,r,{method:"PATCH"});i.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t);const a=await fetchAndTrace$1(e,o);if(a.ok){const e=a.headers.get("content-type");return null!=e&&e.includes("application/json")?a.json():a.text()}throw debugLogResponse$1(a),a},put=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};i.useAPIKey&&(n.headers=_objectSpread2(_objectSpread2({},n.headers),getApiKeyHeaders$1()));const o=merge(n,r,{method:"PUT"});i.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t);const a=await fetchAndTrace$1(e,o);if(a.ok){const e=a.headers.get("content-type");return null!=e&&e.includes("application/json")?a.json():a.text()}throw debugLogResponse$1(a),a};class BaseSessionManager{constructor(){_defineProperty(this,"sessionId",void 0)}checkSessionParams(){if(!this.sessionId)throw new Error("Session id is required");this.sessionId=this.sessionId.padStart(64,"0")}request(e){let{method:t="GET",url:r,data:i={},headers:n={}}=e;const o={headers:n};switch(t){case"GET":return get(r,o);case"POST":return post$1(r,i,o);case"PUT":return put(r,i,o);case"PATCH":return patch(r,i,o)}throw new Error("Invalid method type")}}const global=globalThis||self;var cryptoBrowserifyExports=requireCryptoBrowserify();const nodeCrypto=getDefaultExportFromCjs$2(cryptoBrowserifyExports),ec$3=new ellipticExports.ec("secp256k1"),browserCrypto$1=global.crypto||global.msCrypto||{},subtle$1=browserCrypto$1.subtle||browserCrypto$1.webkitSubtle,EC_GROUP_ORDER$1=Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),ZERO32$1=Buffer.alloc(32,0);function assert$1(e,t){if(!e)throw new Error(t||"Assertion failed")}function isScalar$1(e){return Buffer.isBuffer(e)&&32===e.length}function isValidPrivateKey$1(e){return!!isScalar$1(e)&&(e.compare(ZERO32$1)>0&&e.compare(EC_GROUP_ORDER$1)<0)}function equalConstTime$1(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}function randomBytes$1(e){const t=new Uint8Array(e);return void 0===browserCrypto$1.getRandomValues?Buffer.from(nodeCrypto.randomBytes(e)):(browserCrypto$1.getRandomValues(t),Buffer.from(t))}async function sha512$1(e){if(subtle$1){const t=await subtle$1.digest("SHA-512",e);return new Uint8Array(t)}const t=nodeCrypto.createHash("sha512").update(e).digest();return new Uint8Array(t)}function getAes$1(e){return async function(t,r,i){if(subtle$1){const n={name:"AES-CBC"},o=await subtle$1.importKey("raw",r,n,!1,[e]),a={name:"AES-CBC",iv:t},s=await subtle$1[e](a,o,i);return Buffer.from(new Uint8Array(s))}if("encrypt"===e){const e=nodeCrypto.createCipheriv("aes-256-cbc",r,t),n=e.update(i),o=e.final();return Buffer.concat([n,o])}if("decrypt"===e){const e=nodeCrypto.createDecipheriv("aes-256-cbc",r,t),n=e.update(i),o=e.final();return Buffer.concat([n,o])}throw new Error(`Unsupported operation: ${e}`)}}const aesCbcEncrypt$1=getAes$1("encrypt"),aesCbcDecrypt$1=getAes$1("decrypt");async function hmacSha256Sign$1(e,t){if(subtle$1){const r={name:"HMAC",hash:{name:"SHA-256"}},i=await subtle$1.importKey("raw",new Uint8Array(e),r,!1,["sign","verify"]),n=await subtle$1.sign("HMAC",i,t);return Buffer.from(new Uint8Array(n))}const r=nodeCrypto.createHmac("sha256",Buffer.from(e));r.update(t);return r.digest()}async function hmacSha256Verify$1(e,t,r){return equalConstTime$1(await hmacSha256Sign$1(e,t),r)}const generatePrivate=function(){let e=randomBytes$1(32);for(;!isValidPrivateKey$1(e);)e=randomBytes$1(32);return e},getPublic$1=function(e){return assert$1(32===e.length,"Bad private key"),assert$1(isValidPrivateKey$1(e),"Bad private key"),Buffer.from(ec$3.keyFromPrivate(e).getPublic("array"))},sign$1=async function(e,t){return assert$1(32===e.length,"Bad private key"),assert$1(isValidPrivateKey$1(e),"Bad private key"),assert$1(t.length>0,"Message should not be empty"),assert$1(t.length<=32,"Message is too long"),Buffer.from(ec$3.sign(t,e,{canonical:!0}).toDER())},derive$1=async function(e,t){assert$1(Buffer.isBuffer(e),"Bad private key"),assert$1(Buffer.isBuffer(t),"Bad public key"),assert$1(32===e.length,"Bad private key"),assert$1(isValidPrivateKey$1(e),"Bad private key"),assert$1(65===t.length||33===t.length,"Bad public key"),65===t.length&&assert$1(4===t[0],"Bad public key"),33===t.length&&assert$1(2===t[0]||3===t[0],"Bad public key");const r=ec$3.keyFromPrivate(e),i=ec$3.keyFromPublic(t),n=r.derive(i.getPublic());return Buffer.from(n.toArray())},deriveUnpadded$1=derive$1,derivePadded$1=async function(e,t){assert$1(Buffer.isBuffer(e),"Bad private key"),assert$1(Buffer.isBuffer(t),"Bad public key"),assert$1(32===e.length,"Bad private key"),assert$1(isValidPrivateKey$1(e),"Bad private key"),assert$1(65===t.length||33===t.length,"Bad public key"),65===t.length&&assert$1(4===t[0],"Bad public key"),33===t.length&&assert$1(2===t[0]||3===t[0],"Bad public key");const r=ec$3.keyFromPrivate(e),i=ec$3.keyFromPublic(t),n=r.derive(i.getPublic());return Buffer.from(n.toString(16,64),"hex")},encrypt$1=async function(e,t,r){let i=(r=r||{}).ephemPrivateKey||randomBytes$1(32);for(;!isValidPrivateKey$1(i);)i=r.ephemPrivateKey||randomBytes$1(32);const n=getPublic$1(i),o=await deriveUnpadded$1(i,e),a=await sha512$1(o),s=r.iv||randomBytes$1(16),u=a.slice(0,32),l=a.slice(32),c=await aesCbcEncrypt$1(s,Buffer.from(u),t),h=Buffer.concat([s,n,c]);return{iv:s,ephemPublicKey:n,ciphertext:c,mac:await hmacSha256Sign$1(Buffer.from(l),h)}},decrypt$1=async function(e,t,r){const i=null!=r&&r,n=i?derivePadded$1:deriveUnpadded$1,o=await n(e,t.ephemPublicKey),a=await sha512$1(o),s=a.slice(0,32),u=a.slice(32),l=Buffer.concat([t.iv,t.ephemPublicKey,t.ciphertext]),c=await hmacSha256Verify$1(Buffer.from(u),l,t.mac);if(!c&&!1===i)return decrypt$1(e,t,!0);if(!c&&!0===i)throw new Error("bad MAC after trying padded");const h=await aesCbcDecrypt$1(t.iv,Buffer.from(s),t.ciphertext);return Buffer.from(new Uint8Array(h))},log$3=loglevel$1$1.getLogger("http-helpers");function keccak256$1(e){return Buffer.from(keccak256$3(e))}log$3.setLevel(loglevelExports.levels.INFO);const ec$2=new ellipticExports.ec("secp256k1");function encParamsHexToBuf$1(e){return{iv:Buffer.from(e.iv,"hex"),ephemPublicKey:Buffer.from(e.ephemPublicKey,"hex"),ciphertext:Buffer.from(e.ciphertext,"hex"),mac:Buffer.from(e.mac,"hex")}}function encParamsBufToHex$1(e){return{iv:Buffer.from(e.iv).toString("hex"),ephemPublicKey:Buffer.from(e.ephemPublicKey).toString("hex"),ciphertext:Buffer.from(e.ciphertext).toString("hex"),mac:Buffer.from(e.mac).toString("hex")}}async function encryptData$1(e,t){const r=JSON.stringify(t),i=Buffer.from(r,"utf-8"),n=encParamsBufToHex$1(await encrypt$1(getPublic$1(Buffer.from(e,"hex")),i));return JSON.stringify(n)}async function decryptData$1(e,t){const r=encParamsHexToBuf$1(JSON.parse(t)),i=ec$2.keyFromPrivate(e),n=(await decrypt$1(Buffer.from(i.getPrivate().toString("hex",64),"hex"),r)).toString("utf-8");return JSON.parse(n)}const DEFAULT_SESSION_TIMEOUT=86400;class OpenloginSessionManager extends BaseSessionManager{constructor(){let{sessionServerBaseUrl:e,sessionNamespace:t,sessionTime:r,sessionId:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),_defineProperty(this,"sessionServerBaseUrl","https://session.web3auth.io"),_defineProperty(this,"sessionNamespace",void 0),_defineProperty(this,"sessionTime",DEFAULT_SESSION_TIMEOUT),_defineProperty(this,"sessionId",""),e&&(this.sessionServerBaseUrl=e),t&&(this.sessionNamespace=t),r&&(this.sessionTime=r),i&&(this.sessionId=i.padStart(64,"0"))}static generateRandomSessionKey(){return generatePrivate().toString("hex").padStart(64,"0")}async createSession(e){super.checkSessionParams();const t=Buffer.from(this.sessionId,"hex"),r=getPublic$1(t).toString("hex"),i=await encryptData$1(this.sessionId,e),n={key:r,data:i,signature:(await sign$1(t,keccak256$1(Buffer.from(i,"utf8")))).toString("hex"),namespace:this.sessionNamespace,timeout:this.sessionTime};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/store/set`,data:n}),this.sessionId}async authorizeSession(){super.checkSessionParams();const e=getPublic$1(Buffer.from(this.sessionId,"hex")).toString("hex"),t=new URL(`${this.sessionServerBaseUrl}/store/get`);t.searchParams.append("key",e),this.sessionNamespace&&t.searchParams.append("namespace",this.sessionNamespace);const r=await super.request({url:t.toString()});if(!r.message)throw new Error("Session Expired or Invalid public key");const i=await decryptData$1(this.sessionId,r.message);if(i.error)throw new Error("There was an error decrypting data.");return i}async updateSession(e){super.checkSessionParams();const t=Buffer.from(this.sessionId,"hex"),r=getPublic$1(t).toString("hex"),i=await encryptData$1(this.sessionId,e),n={key:r,data:i,signature:(await sign$1(t,keccak256$1(Buffer.from(i,"utf8")))).toString("hex"),namespace:this.sessionNamespace};await super.request({method:"PUT",url:`${this.sessionServerBaseUrl}/store/update`,data:n})}async invalidateSession(){super.checkSessionParams();const e=Buffer.from(this.sessionId,"hex"),t=getPublic$1(e).toString("hex"),r=await encryptData$1(this.sessionId,{}),i={key:t,data:r,signature:(await sign$1(e,keccak256$1(Buffer.from(r,"utf8")))).toString("hex"),namespace:this.sessionNamespace,timeout:1};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/store/set`,data:i}),this.sessionId="",!0}}const ec$1=new ellipticExports.ec("secp256k1"),browserCrypto=global.crypto||global.msCrypto||{},subtle=browserCrypto.subtle||browserCrypto.webkitSubtle,EC_GROUP_ORDER=Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),ZERO32=Buffer.alloc(32,0);function assert(e,t){if(!e)throw new Error(t||"Assertion failed")}function isScalar(e){return Buffer.isBuffer(e)&&32===e.length}function isValidPrivateKey(e){return!!isScalar(e)&&(e.compare(ZERO32)>0&&e.compare(EC_GROUP_ORDER)<0)}function equalConstTime(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}function randomBytes(e){const t=new Uint8Array(e);return void 0===browserCrypto.getRandomValues?Buffer.from(nodeCrypto.randomBytes(e)):(browserCrypto.getRandomValues(t),Buffer.from(t))}async function sha512(e){if(subtle){const t=await subtle.digest("SHA-512",e);return new Uint8Array(t)}const t=nodeCrypto.createHash("sha512").update(e).digest();return new Uint8Array(t)}function getAes(e){return async function(t,r,i){if(subtle){const n={name:"AES-CBC"},o=await subtle.importKey("raw",r,n,!1,[e]),a={name:"AES-CBC",iv:t},s=await subtle[e](a,o,i);return Buffer.from(new Uint8Array(s))}if("encrypt"===e){const e=nodeCrypto.createCipheriv("aes-256-cbc",r,t),n=e.update(i),o=e.final();return Buffer.concat([n,o])}if("decrypt"===e){const e=nodeCrypto.createDecipheriv("aes-256-cbc",r,t),n=e.update(i),o=e.final();return Buffer.concat([n,o])}throw new Error(`Unsupported operation: ${e}`)}}const aesCbcEncrypt=getAes("encrypt"),aesCbcDecrypt=getAes("decrypt");async function hmacSha256Sign(e,t){if(subtle){const r={name:"HMAC",hash:{name:"SHA-256"}},i=await subtle.importKey("raw",new Uint8Array(e),r,!1,["sign","verify"]),n=await subtle.sign("HMAC",i,t);return Buffer.from(new Uint8Array(n))}const r=nodeCrypto.createHmac("sha256",Buffer.from(e));r.update(t);return r.digest()}async function hmacSha256Verify(e,t,r){return equalConstTime(await hmacSha256Sign(e,t),r)}const getPublic=function(e){return assert(32===e.length,"Bad private key"),assert(isValidPrivateKey(e),"Bad private key"),Buffer.from(ec$1.keyFromPrivate(e).getPublic("array"))},sign=async function(e,t){return assert(32===e.length,"Bad private key"),assert(isValidPrivateKey(e),"Bad private key"),assert(t.length>0,"Message should not be empty"),assert(t.length<=32,"Message is too long"),Buffer.from(ec$1.sign(t,e,{canonical:!0}).toDER())},derive=async function(e,t){assert(Buffer.isBuffer(e),"Bad private key"),assert(Buffer.isBuffer(t),"Bad public key"),assert(32===e.length,"Bad private key"),assert(isValidPrivateKey(e),"Bad private key"),assert(65===t.length||33===t.length,"Bad public key"),65===t.length&&assert(4===t[0],"Bad public key"),33===t.length&&assert(2===t[0]||3===t[0],"Bad public key");const r=ec$1.keyFromPrivate(e),i=ec$1.keyFromPublic(t),n=r.derive(i.getPublic());return Buffer.from(n.toArray())},deriveUnpadded=derive,derivePadded=async function(e,t){assert(Buffer.isBuffer(e),"Bad private key"),assert(Buffer.isBuffer(t),"Bad public key"),assert(32===e.length,"Bad private key"),assert(isValidPrivateKey(e),"Bad private key"),assert(65===t.length||33===t.length,"Bad public key"),65===t.length&&assert(4===t[0],"Bad public key"),33===t.length&&assert(2===t[0]||3===t[0],"Bad public key");const r=ec$1.keyFromPrivate(e),i=ec$1.keyFromPublic(t),n=r.derive(i.getPublic());return Buffer.from(n.toString(16,64),"hex")},encrypt=async function(e,t,r){let i=(r=r||{}).ephemPrivateKey||randomBytes(32);for(;!isValidPrivateKey(i);)i=r.ephemPrivateKey||randomBytes(32);const n=getPublic(i),o=await deriveUnpadded(i,e),a=await sha512(o),s=r.iv||randomBytes(16),u=a.slice(0,32),l=a.slice(32),c=await aesCbcEncrypt(s,Buffer.from(u),t),h=Buffer.concat([s,n,c]);return{iv:s,ephemPublicKey:n,ciphertext:c,mac:await hmacSha256Sign(Buffer.from(l),h)}},decrypt=async function(e,t,r){const i=null!=r&&r,n=i?derivePadded:deriveUnpadded,o=await n(e,t.ephemPublicKey),a=await sha512(o),s=a.slice(0,32),u=a.slice(32),l=Buffer.concat([t.iv,t.ephemPublicKey,t.ciphertext]),c=await hmacSha256Verify(Buffer.from(u),l,t.mac);if(!c&&!1===i)return decrypt(e,t,!0);if(!c&&!0===i)throw new Error("bad MAC after trying padded");const h=await aesCbcDecrypt(t.iv,Buffer.from(s),t.ciphertext);return Buffer.from(new Uint8Array(h))},log$2=loglevel$1$1.getLogger("http-helpers");log$2.setLevel(loglevelExports.levels.INFO);let apiKey="torus-default";const gatewayAuthHeader="x-api-key";function setLogLevel(e){log$2.setLevel(e)}async function fetchAndTrace(e,t){let r=null;try{r=new URL(e)}catch(i){}return fetch(e,t)}function getApiKeyHeaders(){const e={};return e[gatewayAuthHeader]=apiKey,e}function debugLogResponse(e){log$2.info(`Response: ${e.status} ${e.statusText}`),log$2.info(`Url: ${e.url}`)}function logTracingHeader(e){const t=e.headers.get("x-web3-correlation-id");t&&log$2.info(`Request tracing with traceID = ${t}`)}const promiseTimeout=async(e,t)=>{let r=null;try{const i=new Promise((t,i)=>{r=setTimeout(()=>{i(new Error(`Timed out in ${e}ms`))},e)}),n=await Promise.race([t,i]);return null!=r&&clearTimeout(r),n}catch(err){throw null!=r&&clearTimeout(r),err}},post=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};i.useAPIKey&&(n.headers=_objectSpread2(_objectSpread2({},n.headers),getApiKeyHeaders()));const o=merge(n,r,{method:"POST"});return i.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t),promiseTimeout(i.timeout||6e4,fetchAndTrace(e,o).then(e=>{if(i.logTracingHeader&&logTracingHeader(e),e.ok){const t=e.headers.get("content-type");return null!=t&&t.includes("application/json")?e.json():e.text()}throw debugLogResponse(e),e}))};function keccak256(e){return Buffer.from(keccak256$3(e))}const ec=new ellipticExports.ec("secp256k1");function encParamsHexToBuf(e){return{iv:Buffer.from(e.iv,"hex"),ephemPublicKey:Buffer.from(e.ephemPublicKey,"hex"),ciphertext:Buffer.from(e.ciphertext,"hex"),mac:Buffer.from(e.mac,"hex")}}function encParamsBufToHex(e){return{iv:Buffer.from(e.iv).toString("hex"),ephemPublicKey:Buffer.from(e.ephemPublicKey).toString("hex"),ciphertext:Buffer.from(e.ciphertext).toString("hex"),mac:Buffer.from(e.mac).toString("hex")}}async function encryptData(e,t){const r=JSON.stringify(t),i=Buffer.from(r,"utf-8"),n=encParamsBufToHex(await encrypt(getPublic(Buffer.from(e,"hex")),i));return JSON.stringify(n)}async function decryptData(e,t){const r=encParamsHexToBuf(JSON.parse(t)),i=ec.keyFromPrivate(e),n=(await decrypt(Buffer.from(i.getPrivate().toString("hex",64),"hex"),r)).toString("utf-8");return JSON.parse(n)}var log$1=loglevel$1$1.getLogger("SecurePubSub");class SecurePubSub{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_defineProperty(this,"options",void 0),_defineProperty(this,"SOCKET_CONN",null),this.options=e,this.options.timeout=e.timeout||600,this.options.serverUrl=e.serverUrl||"https://session.web3auth.io",this.options.enableLogging=e.enableLogging||!1,this.options.namespace=e.namespace||"",this.options.sameIpCheck=e.sameIpCheck||!1,this.options.sameOriginCheck=e.sameOriginCheck||!1,this.options.enableLogging?log$1.enableAll():log$1.disableAll()}static setLogLevel(e){log$1.setLevel(e),setLogLevel(e)}async publish(e,t){const r=keccak256(Buffer.from(e,"utf8")),i=await encryptData(r.toString("hex"),t),n=await sign(r,keccak256(Buffer.from(i,"utf8"))),o={key:getPublic(r).toString("hex"),data:i,signature:n.toString("hex"),timeout:this.options.timeout,namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck};return post(`${this.options.serverUrl}/channel/set`,o)}async subscribe(e){let t=!0;const r=keccak256(Buffer.from(e,"utf8")),i=getPublic(r).toString("hex"),n=this.getSocketConnection();n.connected?(log$1.debug("already connected with socket"),n.emit("check_auth_status",i,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})):n.once("connect",()=>{log$1.debug("connected with socket"),n.emit("check_auth_status",i,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})});const o=()=>{n.once("connect",async()=>{log$1.debug("connected with socket using reconnect"),t&&n.emit("check_auth_status",i,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})})},a=()=>{t||document.removeEventListener("visibilitychange",a),n.connected||"visible"!==document.visibilityState||o()},s=()=>{log$1.debug("socket disconnected",t),t?(log$1.error("socket disconnected unexpectedly, reconnecting socket"),o()):n.removeListener("disconnect",s)};n.on("disconnect",s);const u=new Promise((e,o)=>{log$1.info("listening to",`${i}_success`),n.once(`${i}_success`,async i=>{try{const t=await decryptData(r.toString("hex"),i);log$1.info("got data",t),e(t)}catch(n){log$1.error(n),o(n)}finally{t=!1,document.removeEventListener("visibilitychange",a)}})});return"undefined"!=typeof document&&document.addEventListener("visibilitychange",a),u}cleanup(){this.SOCKET_CONN&&(this.SOCKET_CONN.disconnect(),this.SOCKET_CONN=null)}getSocketConnection(){if(this.SOCKET_CONN)return this.SOCKET_CONN;const e=lookup(this.options.serverUrl,{transports:["websocket","polling"],withCredentials:!0,reconnectionDelayMax:1e4,reconnectionAttempts:10});return e.on("connect_error",t=>{e.io.opts.transports=["polling","websocket"],log$1.error("connect error",t)}),e.on("connect",async()=>{const{engine:t}=e.io;log$1.debug("initially connected to",t.transport.name),t.once("upgrade",()=>{log$1.debug("upgraded",t.transport.name)}),t.once("close",e=>{log$1.debug("connection closed",e)})}),e.on("error",t=>{log$1.error("socket errored",t),e.disconnect()}),this.SOCKET_CONN=e,this.SOCKET_CONN}}class OpenloginError extends CustomError{constructor(e,t){super(t),_defineProperty(this,"code",void 0),_defineProperty(this,"message",void 0),this.code=e,this.message=t||"",Object.defineProperty(this,"name",{value:"OpenloginError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class InitializationError extends OpenloginError{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"InitializationError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new InitializationError(e,`${InitializationError.messages[e]}, ${t}`)}static invalidParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return InitializationError.fromCode(5001,e)}static notInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return InitializationError.fromCode(5002,e)}}_defineProperty(InitializationError,"messages",{5e3:"Custom",5001:"Invalid constructor params",5002:"SDK not initialized. please call init first"});class LoginError extends OpenloginError{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"LoginError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new LoginError(e,`${LoginError.messages[e]}, ${t}`)}static invalidLoginParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return LoginError.fromCode(5111,e)}static userNotLoggedIn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return LoginError.fromCode(5112,e)}static popupClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return LoginError.fromCode(5113,e)}static loginFailed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return LoginError.fromCode(5114,e)}static popupBlocked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return LoginError.fromCode(5115,e)}static mfaAlreadyEnabled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return LoginError.fromCode(5116,e)}static mfaNotEnabled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return LoginError.fromCode(5117,e)}}_defineProperty(LoginError,"messages",{5e3:"Custom",5111:"Invalid login params",5112:"User not logged in.",5113:"login popup has been closed by the user",5114:"Login failed",5115:"Popup was blocked. Please call this function as soon as user clicks button or use redirect mode",5116:"MFA already enabled",5117:"MFA not yet enabled. Please call `enableMFA` first"});const loglevel$1=loglevelExports.getLogger("openlogin");loglevel$1.setLevel("error");const version="8.2.1";function getHashQueryParams(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t={},r=new URLSearchParams(window.location.search.slice(1));r.forEach((e,r)=>{"b64Params"!==r&&(t[r]=e)});const i=r.get("b64Params");if(i)try{const e=JSON.parse(safeatob(i));Object.keys(e).forEach(r=>{t[r]=e[r]})}catch(a){loglevel$1.error(a)}const n=new URLSearchParams(window.location.hash.substring(1));n.forEach((e,r)=>{"b64Params"!==r&&(t[r]=e)});const o=n.get("b64Params");if(o)try{const e=JSON.parse(safeatob(o));Object.keys(e).forEach(r=>{t[r]=e[r]})}catch(a){loglevel$1.error(a)}if(e){const e=new URL(window.location.origin+window.location.pathname);r.size>0&&(r.delete("error"),r.delete("state"),r.delete("b64Params"),r.delete("sessionNamespace"),e.search=r.toString()),n.size>0&&(n.delete("error"),n.delete("state"),n.delete("b64Params"),n.delete("sessionNamespace"),e.hash=n.toString()),window.history.replaceState(_objectSpread2(_objectSpread2({},window.history.state),{},{as:e.href,url:e.href}),"",e.href)}return t}function constructURL(e){const{baseURL:t,query:r,hash:i}=e,n=new URL(t);if(r&&Object.keys(r).forEach(e=>{n.searchParams.append(e,r[e])}),i){const e=new URL(constructURL({baseURL:t,query:i})).searchParams.toString();n.hash=e}return n.toString()}function getPopupFeatures(){if("undefined"==typeof window)return"";const e=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,i=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,n=Math.abs((r-1200)/2/1+e);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=1200,top=${Math.abs((i-700)/2/1+t)},left=${n}`}function isMobileOrTablet(){if("undefined"==typeof window)return!1;const e=Bowser.getParser(window.navigator.userAgent).getPlatform();return e.type===Bowser.PLATFORMS_MAP.tablet||e.type===Bowser.PLATFORMS_MAP.mobile}function getTimeout(e){return e!==LOGIN_PROVIDER.FACEBOOK&&e!==LOGIN_PROVIDER.LINE||!isMobileOrTablet()?1e4:3e5}class PopupHandler extends eventsExports.EventEmitter{constructor(e){let{url:t,target:r,features:i,timeout:n=3e4}=e;super(),_defineProperty(this,"url",void 0),_defineProperty(this,"target",void 0),_defineProperty(this,"features",void 0),_defineProperty(this,"window",void 0),_defineProperty(this,"windowTimer",void 0),_defineProperty(this,"iClosedWindow",void 0),_defineProperty(this,"timeout",void 0),this.url=t,this.target=r||"_blank",this.features=i||getPopupFeatures(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=n,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),void 0===this.window&&clearInterval(this.windowTimer)},500))}open(){var e;if(this.window=window.open(this.url,this.target,this.features),!this.window)throw LoginError.popupBlocked();null!==(e=this.window)&&void 0!==e&&e.focus&&this.window.focus()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url):window.location.href=this.url}async listenOnChannel(e){const t=new SecurePubSub,r=await t.subscribe(e);this.close(),t.cleanup();const i=JSON.parse(r);return i.error?{error:i.error,state:i.state}:i.data}}class OpenLogin{constructor(e){if(_defineProperty(this,"state",{}),_defineProperty(this,"options",void 0),_defineProperty(this,"sessionManager",void 0),_defineProperty(this,"currentStorage",void 0),_defineProperty(this,"_storageBaseKey","openlogin_store"),_defineProperty(this,"dappState",void 0),_defineProperty(this,"addVersionInUrls",!0),!e.clientId)throw InitializationError.invalidParams("clientId is required");if(e.network||(e.network=OPENLOGIN_NETWORK.SAPPHIRE_MAINNET),e.buildEnv||(e.buildEnv=BUILD_ENV.PRODUCTION),(e.buildEnv===BUILD_ENV.DEVELOPMENT||e.buildEnv===BUILD_ENV.TESTING||e.sdkUrl)&&(this.addVersionInUrls=!1),e.sdkUrl||e.useMpc||(e.buildEnv===BUILD_ENV.DEVELOPMENT?(e.sdkUrl="http://localhost:3000",e.dashboardUrl="http://localhost:5173/wallet/account"):e.buildEnv===BUILD_ENV.STAGING?(e.sdkUrl="https://staging-auth.web3auth.io",e.dashboardUrl="https://staging-account.web3auth.io/wallet/account"):e.buildEnv===BUILD_ENV.TESTING?(e.sdkUrl="https://develop-auth.web3auth.io",e.dashboardUrl="https://develop-account.web3auth.io/wallet/account"):(e.sdkUrl="https://auth.web3auth.io",e.dashboardUrl="https://account.web3auth.io/wallet/account")),e.useMpc&&!e.sdkUrl){if(Object.values(TORUS_LEGACY_NETWORK).includes(e.network))throw InitializationError.invalidParams("MPC is not supported on legacy networks, please use sapphire_devnet or sapphire_mainnet.");e.buildEnv===BUILD_ENV.DEVELOPMENT?e.sdkUrl="http://localhost:3000":e.buildEnv===BUILD_ENV.STAGING?e.sdkUrl="https://staging-mpc-auth.web3auth.io":e.buildEnv===BUILD_ENV.TESTING?e.sdkUrl="https://develop-mpc-auth.web3auth.io":e.sdkUrl="https://mpc-auth.web3auth.io"}e.redirectUrl||"undefined"==typeof window||(e.redirectUrl=`${window.location.protocol}//${window.location.host}${window.location.pathname}`),e.uxMode||(e.uxMode=UX_MODE.REDIRECT),"boolean"!=typeof e.replaceUrlOnRedirect&&(e.replaceUrlOnRedirect=!0),e.originData||(e.originData={}),e.whiteLabel||(e.whiteLabel={}),e.loginConfig||(e.loginConfig={}),e.mfaSettings||(e.mfaSettings={}),e.storageServerUrl||(e.storageServerUrl=SESSION_SERVER),e.storageKey||(e.storageKey="local"),e.webauthnTransports||(e.webauthnTransports=["internal"]),e.sessionTime||(e.sessionTime=86400),this.options=e}get privKey(){return this.options.useMpc?this.state.factorKey||"":this.state.privKey?this.state.privKey.padStart(64,"0"):""}get coreKitKey(){return this.state.coreKitKey?this.state.coreKitKey.padStart(64,"0"):""}get ed25519PrivKey(){return this.state.ed25519PrivKey?this.state.ed25519PrivKey.padStart(128,"0"):""}get coreKitEd25519Key(){return this.state.coreKitEd25519PrivKey?this.state.coreKitEd25519PrivKey.padStart(128,"0"):""}get sessionId(){return this.state.sessionId||""}get sessionNamespace(){return this.options.sessionNamespace||""}get appState(){return this.state.userInfo.appState||this.dappState||""}get baseUrl(){return this.addVersionInUrls?`${this.options.sdkUrl}/v${version.split(".")[0]}`:`${this.options.sdkUrl}`}async init(){const e=getHashQueryParams(this.options.replaceUrlOnRedirect);e.sessionNamespace&&(this.options.sessionNamespace=e.sessionNamespace);const t=this.options.sessionNamespace?`${this._storageBaseKey}_${this.options.sessionNamespace}`:this._storageBaseKey;this.currentStorage=BrowserStorage.getInstance(t,this.options.storageKey);const r=this.currentStorage.get("sessionId");if(this.sessionManager=new OpenloginSessionManager({sessionServerBaseUrl:this.options.storageServerUrl,sessionNamespace:this.options.sessionNamespace,sessionTime:this.options.sessionTime,sessionId:r}),this.options.network===OPENLOGIN_NETWORK.TESTNET||(this.options.network,OPENLOGIN_NETWORK.SAPPHIRE_DEVNET),this.options.buildEnv,BUILD_ENV.PRODUCTION,e.error)throw this.dappState=e.state,LoginError.loginFailed(e.error);if(e.sessionId&&(this.currentStorage.set("sessionId",e.sessionId),this.sessionManager.sessionId=e.sessionId),this.sessionManager.sessionId){const e=await this._authorizeSession();this.updateState(e),0===Object.keys(e).length&&this.currentStorage.set("sessionId","")}}async login(e){if(!e.loginProvider)throw LoginError.invalidLoginParams("loginProvider is required");const t={redirectUrl:this.options.redirectUrl},r=_objectSpread2(_objectSpread2({loginProvider:e.loginProvider},t),e),i={actionType:OPENLOGIN_ACTIONS.LOGIN,options:this.options,params:r},n=await this.openloginHandler(`${this.baseUrl}/start`,i,getTimeout(e.loginProvider));if(this.options.uxMode===UX_MODE.REDIRECT)return null;if(n.error)throw this.dappState=n.state,LoginError.loginFailed(n.error);return this.sessionManager.sessionId=n.sessionId,this.options.sessionNamespace=n.sessionNamespace,this.currentStorage.set("sessionId",n.sessionId),await this.rehydrateSession(),{privKey:this.privKey}}async logout(){if(!this.sessionManager.sessionId)throw LoginError.userNotLoggedIn();await this.sessionManager.invalidateSession(),this.updateState({privKey:"",coreKitKey:"",coreKitEd25519PrivKey:"",ed25519PrivKey:"",walletKey:"",oAuthPrivateKey:"",tKey:"",metadataNonce:"",keyMode:void 0,userInfo:{name:"",profileImage:"",dappShare:"",idToken:"",oAuthIdToken:"",oAuthAccessToken:"",appState:"",email:"",verifier:"",verifierId:"",aggregateVerifier:"",typeOfLogin:"",isMfaEnabled:!1},authToken:"",sessionId:"",factorKey:"",signatures:[],tssShareIndex:-1,tssPubKey:"",tssShare:"",tssNonce:-1}),this.currentStorage.set("sessionId","")}async enableMFA(e){var t;if(!this.sessionId)throw LoginError.userNotLoggedIn();if(this.state.userInfo.isMfaEnabled)throw LoginError.mfaAlreadyEnabled();const r={redirectUrl:this.options.redirectUrl},i={actionType:OPENLOGIN_ACTIONS.ENABLE_MFA,options:this.options,params:_objectSpread2(_objectSpread2(_objectSpread2({},r),e),{},{loginProvider:this.state.userInfo.typeOfLogin,extraLoginOptions:{login_hint:this.state.userInfo.verifierId},mfaLevel:"mandatory"}),sessionId:this.sessionId},n=await this.openloginHandler(`${this.baseUrl}/start`,i,getTimeout(i.params.loginProvider));if(this.options.uxMode===UX_MODE.REDIRECT)return null;if(n.error)throw this.dappState=n.state,LoginError.loginFailed(n.error);return this.sessionManager.sessionId=n.sessionId,this.options.sessionNamespace=n.sessionNamespace,this.currentStorage.set("sessionId",n.sessionId),await this.rehydrateSession(),Boolean(null===(t=this.state.userInfo)||void 0===t?void 0:t.isMfaEnabled)}async manageMFA(e){if(!this.sessionId)throw LoginError.userNotLoggedIn();if(!this.state.userInfo.isMfaEnabled)throw LoginError.mfaNotEnabled();const t={redirectUrl:this.options.dashboardUrl,dappUrl:`${window.location.origin}${window.location.pathname}`},r=OpenloginSessionManager.generateRandomSessionKey(),i={actionType:OPENLOGIN_ACTIONS.MANAGE_MFA,options:this.options,params:_objectSpread2(_objectSpread2(_objectSpread2({},t),e),{},{loginProvider:this.state.userInfo.typeOfLogin,extraLoginOptions:{login_hint:this.state.userInfo.verifierId},appState:jsonToBase64({loginId:r})}),sessionId:this.sessionId};this.createLoginSession(r,i,i.options.sessionTime,!0);const n={loginId:r,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl},o=constructURL({baseURL:`${this.baseUrl}/start`,hash:{b64Params:jsonToBase64(n)}});window.open(o,"_blank")}async changeSocialFactor(e){if(!this.sessionId)throw LoginError.userNotLoggedIn();const t={redirectUrl:this.options.redirectUrl},r={actionType:OPENLOGIN_ACTIONS.MODIFY_SOCIAL_FACTOR,options:this.options,params:_objectSpread2(_objectSpread2({},t),e),sessionId:this.sessionId},i=await this.openloginHandler(`${this.baseUrl}/start`,r);if(this.options.uxMode!==UX_MODE.REDIRECT)return!i.error}getUserInfo(){if(!this.sessionManager.sessionId)throw LoginError.userNotLoggedIn();return this.state.userInfo}async createLoginSession(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.sessionManager)throw InitializationError.notInitialized();const n=new OpenloginSessionManager({sessionServerBaseUrl:t.options.storageServerUrl,sessionNamespace:t.options.sessionNamespace,sessionTime:r,sessionId:e}).createSession(JSON.parse(JSON.stringify(t)));t.options.uxMode!==UX_MODE.REDIRECT||i||await n}async _authorizeSession(){try{if(!this.sessionManager.sessionId)return{};return await this.sessionManager.authorizeSession()}catch(err){return loglevel$1.error("authorization failed",err),{}}}updateState(e){this.state=_objectSpread2(_objectSpread2({},this.state),e)}async rehydrateSession(){const e=await this._authorizeSession();this.updateState(e)}async openloginHandler(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;const i=OpenloginSessionManager.generateRandomSessionKey();await this.createLoginSession(i,t);const n={loginId:i,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl};if(this.options.uxMode===UX_MODE.REDIRECT){const t=constructURL({baseURL:e,hash:{b64Params:jsonToBase64(n)}});return void(window.location.href=t)}const o=constructURL({baseURL:e,hash:{b64Params:jsonToBase64(n)}}),a=new PopupHandler({url:o,timeout:r});return new Promise((e,t)=>{a.on("close",()=>{t(LoginError.popupClosed())}),a.listenOnChannel(i).then(e).catch(t);try{a.open()}catch(r){t(r)}})}}var fastSafeStringify,hasRequiredFastSafeStringify;function requireFastSafeStringify(){if(hasRequiredFastSafeStringify)return fastSafeStringify;hasRequiredFastSafeStringify=1,fastSafeStringify=o,o.default=o,o.stable=l,o.stableStringify=l;var e="[...]",t="[Circular]",r=[],i=[];function n(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function o(e,t,o,a){var u;void 0===a&&(a=n()),s(e,"",0,[],void 0,0,a);try{u=0===i.length?JSON.stringify(e,t,o):JSON.stringify(e,h(t),o)}catch(c){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var l=r.pop();4===l.length?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return u}function a(e,t,n,o){var a=Object.getOwnPropertyDescriptor(o,n);void 0!==a.get?a.configurable?(Object.defineProperty(o,n,{value:e}),r.push([o,n,t,a])):i.push([t,n,e]):(o[n]=e,r.push([o,n,t]))}function s(r,i,n,o,u,l,c){var h;if(l+=1,"object"==typeof r&&null!==r){for(h=0;h<o.length;h++)if(o[h]===r)return void a(t,r,i,u);if(void 0!==c.depthLimit&&l>c.depthLimit)return void a(e,r,i,u);if(void 0!==c.edgesLimit&&n+1>c.edgesLimit)return void a(e,r,i,u);if(o.push(r),Array.isArray(r))for(h=0;h<r.length;h++)s(r[h],h,h,o,r,l,c);else{var d=Object.keys(r);for(h=0;h<d.length;h++){var f=d[h];s(r[f],f,h,o,r,l,c)}}o.pop()}}function u(e,t){return e<t?-1:e>t?1:0}function l(e,t,o,a){void 0===a&&(a=n());var s,u=c(e,"",0,[],void 0,0,a)||e;try{s=0===i.length?JSON.stringify(u,t,o):JSON.stringify(u,h(t),o)}catch(d){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var l=r.pop();4===l.length?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return s}function c(i,n,o,s,l,h,d){var f;if(h+=1,"object"==typeof i&&null!==i){for(f=0;f<s.length;f++)if(s[f]===i)return void a(t,i,n,l);try{if("function"==typeof i.toJSON)return}catch(y){return}if(void 0!==d.depthLimit&&h>d.depthLimit)return void a(e,i,n,l);if(void 0!==d.edgesLimit&&o+1>d.edgesLimit)return void a(e,i,n,l);if(s.push(i),Array.isArray(i))for(f=0;f<i.length;f++)c(i[f],f,f,s,i,h,d);else{var p={},m=Object.keys(i).sort(u);for(f=0;f<m.length;f++){var g=m[f];c(i[g],g,f,s,i,h,d),p[g]=i[g]}if(void 0===l)return p;r.push([l,n,i]),l[n]=p}s.pop()}}function h(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(i.length>0)for(var n=0;n<i.length;n++){var o=i[n];if(o[1]===t&&o[0]===r){r=o[2],i.splice(n,1);break}}return e.call(this,t,r)}}return fastSafeStringify}requireFastSafeStringify();const errorCodes={rpc:{internal:-32603}},errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},FALLBACK_ERROR_CODE=errorCodes.rpc.internal,FALLBACK_MESSAGE="Unspecified error message. This is a bug, please report it.";function isValidCode(e){return Number.isInteger(e)}function getMessageFromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:FALLBACK_MESSAGE;if(isValidCode(e)){const t=e.toString();if(Object.hasOwn(errorValues,t))return errorValues[t].message}return t}function safeApply(e,t,r){try{Reflect.apply(e,t,r)}catch(err){setTimeout(()=>{throw err})}}function arrayClone(e){const t=e.length,r=new Array(t);for(let i=0;i<t;i+=1)r[i]=e[i];return r}getMessageFromCode(FALLBACK_ERROR_CODE);class SafeEventEmitter extends eventsExports.EventEmitter{emit(e){let t="error"===e;const r=this._events;if(void 0!==r)t=t&&void 0===r.error;else if(!t)return!1;for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];if(t){let e;if(n.length>0&&([e]=n),e instanceof Error)throw e;const t=new Error("Unhandled error."+(e?` (${e.message})`:""));throw t.context=e,t}const a=r[e];if(void 0===a)return!1;if("function"==typeof a)safeApply(a,this,n);else{const e=a.length,t=arrayClone(a);for(let r=0;r<e;r+=1)safeApply(t[r],this,n)}return!0}}const log=loglevel$1$1.getLogger("http-helpers");function serializeError(e){const t=e.findIndex(e=>e instanceof Error),r=e.findIndex(e=>"string"==typeof e),i=e.findIndex(e=>e&&"object"==typeof e&&"status"in e&&"type"in e);let n;if(-1!==i){const t=e[i];n=new Error(`${t.status} ${t.type.toString()} ${t.statusText}`)}else n=-1!==t?e.splice(t,1)[0]:-1!==r?new Error(e.splice(r,1)[0]):new Error("Unknown error");return[n,e]}log.setLevel(loglevelExports.levels.INFO);class Web3AuthError extends CustomError{constructor(e,t,r){super(t),_defineProperty(this,"code",void 0),_defineProperty(this,"message",void 0),_defineProperty(this,"cause",void 0),this.code=e,this.message=t||"",this.cause=r,Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:serializeError([this.cause])}}toString(){return JSON.stringify(this.toJSON())}}class WalletInitializationError extends Web3AuthError{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e,t="",r){return new WalletInitializationError(e,`${WalletInitializationError.messages[e]}, ${t}`,r)}static notFound(e="",t){return WalletInitializationError.fromCode(5001,e,t)}static notInstalled(e="",t){return WalletInitializationError.fromCode(5002,e,t)}static notReady(e="",t){return WalletInitializationError.fromCode(5003,e,t)}static windowBlocked(e="",t){return WalletInitializationError.fromCode(5004,e,t)}static windowClosed(e="",t){return WalletInitializationError.fromCode(5005,e,t)}static incompatibleChainNameSpace(e="",t){return WalletInitializationError.fromCode(5006,e,t)}static duplicateAdapterError(e="",t){return WalletInitializationError.fromCode(5007,e,t)}static invalidProviderConfigError(e="",t){return WalletInitializationError.fromCode(5008,e,t)}static providerNotReadyError(e="",t){return WalletInitializationError.fromCode(5009,e,t)}static rpcConnectionError(e="",t){return WalletInitializationError.fromCode(5010,e,t)}static invalidParams(e="",t){return WalletInitializationError.fromCode(5011,e,t)}static invalidNetwork(e="",t){return WalletInitializationError.fromCode(5013,e,t)}}_defineProperty(WalletInitializationError,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class WalletLoginError extends Web3AuthError{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e,t="",r){return new WalletLoginError(e,`${WalletLoginError.messages[e]}. ${t}`,r)}static connectionError(e="",t){return WalletLoginError.fromCode(5111,e,t)}static disconnectionError(e="",t){return WalletLoginError.fromCode(5112,e,t)}static notConnectedError(e="",t){return WalletLoginError.fromCode(5113,e,t)}static popupClosed(e="",t){return WalletLoginError.fromCode(5114,e,t)}static mfaEnabled(e="",t){return WalletLoginError.fromCode(5115,e,t)}static chainConfigNotAdded(e="",t){return WalletLoginError.fromCode(5116,e,t)}static unsupportedOperation(e="",t){return WalletLoginError.fromCode(5117,e,t)}static coreKitKeyNotFound(e="",t){return WalletLoginError.fromCode(5118,e,t)}static userNotLoggedIn(e="",t){return WalletLoginError.fromCode(5119,e,t)}}_defineProperty(WalletLoginError,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa",5116:"Chain config has not been added. Please add the chain config before calling switchChain",5117:"Unsupported operation",5118:"useCoreKitKey flag is enabled but coreKitKey is not available",5119:"User not logged in."});class WalletOperationsError extends Web3AuthError{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletOperationsError"})}static fromCode(e,t="",r){return new WalletOperationsError(e,`${WalletOperationsError.messages[e]}, ${t}`,r)}static chainIDNotAllowed(e="",t){return WalletOperationsError.fromCode(5201,e,t)}static operationNotAllowed(e="",t){return WalletOperationsError.fromCode(5202,e,t)}static chainNamespaceNotAllowed(e="",t){return WalletOperationsError.fromCode(5203,e,t)}}_defineProperty(WalletOperationsError,"messages",{5e3:"Custom",5201:"Provided chainId is not allowed",5202:"This operation is not allowed"});class WalletProviderError extends Web3AuthError{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletProviderError"})}static fromCode(e,t="",r){return new WalletOperationsError(e,`${WalletProviderError.messages[e]}, ${t}`,r)}static invalidRequestArgs(e="",t){return WalletOperationsError.fromCode(5301,e,t)}static invalidRequestMethod(e="",t){return WalletOperationsError.fromCode(5302,e,t)}static invalidRequestParams(e="",t){return WalletOperationsError.fromCode(5303,e,t)}}_defineProperty(WalletProviderError,"messages",{5e3:"Custom",5301:"Expected a single, non-array, object argument.",5302:"'args.method' must be a non-empty string.",5303:"'args.params' must be an object or array if provided."});const CHAIN_NAMESPACES={EIP155:"eip155",SOLANA:"solana",CASPER:"casper",XRPL:"xrpl",OTHER:"other"},ADAPTER_NAMESPACES={MULTICHAIN:"multichain"},getDefaultNetworkId=e=>{if(e===CHAIN_NAMESPACES.EIP155)return 1;if(e===CHAIN_NAMESPACES.SOLANA)return 1;if(e===CHAIN_NAMESPACES.XRPL)return 1;throw WalletInitializationError.invalidParams(`Chain namespace ${e} is not supported`)},getEvmChainConfig=e=>{const t=CHAIN_NAMESPACES.EIP155;return 1===e?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorerUrl:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:5===e?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:t,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorerUrl:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:11155111===e?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:t,chainId:"0xaa36a7",rpcTarget:"https://rpc.ankr.com/eth_sepolia",displayName:"Sepolia Testnet",blockExplorerUrl:"https://sepolia.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:137===e?{logo:"https://images.toruswallet.io/polygon.svg",chainNamespace:t,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorerUrl:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80002===e?{logo:"https://images.toruswallet.io/polygon.svg",chainNamespace:t,chainId:"0x13882",rpcTarget:"https://rpc.ankr.com/polygon_amoy",displayName:"Polygon Amoy Testnet",blockExplorerUrl:"https://www.oklink.com/amoy",ticker:"MATIC",tickerName:"Polygon",decimals:18}:56===e?{logo:"https://images.toruswallet.io/bnb.png",chainNamespace:t,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorerUrl:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:97===e?{logo:"https://images.toruswallet.io/bnb.png",chainNamespace:t,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorerUrl:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:25===e?{logo:"https://images.toruswallet.io/cro.svg",chainNamespace:t,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorerUrl:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{logo:"https://images.toruswallet.io/cro.svg",chainNamespace:t,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorerUrl:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos",decimals:18}:8217===e?{logo:"https://images.toruswallet.io/klay.svg",chainNamespace:t,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorerUrl:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn",decimals:18}:null},getSolanaChainConfig=e=>{const t=CHAIN_NAMESPACES.SOLANA;return 1===e?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorerUrl:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana",decimals:9}:2===e?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:t,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorerUrl:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana",decimals:9}:3===e?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:t,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorerUrl:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana",decimals:9}:null},getXrplChainConfig=e=>{const t=CHAIN_NAMESPACES.XRPL;return 1===e?{chainNamespace:t,decimals:15,chainId:"0x1",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://ripple-node.tor.us",wsTarget:"wss://s2.ripple.com",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl mainnet",blockExplorerUrl:"https://livenet.xrpl.org"}:2===e?{chainNamespace:t,decimals:15,chainId:"0x2",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://testnet-ripple-node.tor.us",wsTarget:"wss://s.altnet.rippletest.net",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl testnet",blockExplorerUrl:"https://testnet.xrpl.org",isTestnet:!0}:3===e?{chainNamespace:t,decimals:15,chainId:"0x3",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://devnet-ripple-node.tor.us",wsTarget:"wss://s.devnet.rippletest.net/",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl devnet",blockExplorerUrl:"https://devnet.xrpl.org",isTestnet:!0}:null},getChainConfig=(e,t)=>{if(e===CHAIN_NAMESPACES.OTHER)return null;const r=t?"number"==typeof t?t:parseInt(t,16):getDefaultNetworkId(e);return e===CHAIN_NAMESPACES.EIP155?getEvmChainConfig(r):e===CHAIN_NAMESPACES.SOLANA?getSolanaChainConfig(r):e===CHAIN_NAMESPACES.XRPL?getXrplChainConfig(r):null},MULTI_CHAIN_ADAPTERS={OPENLOGIN:"openlogin",WALLET_CONNECT_V2:"wallet-connect-v2",SFA:"sfa"},SOLANA_ADAPTERS=_objectSpread2({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLFLARE:"solflare"},MULTI_CHAIN_ADAPTERS),EVM_ADAPTERS=_objectSpread2({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},MULTI_CHAIN_ADAPTERS),WALLET_ADAPTERS=_objectSpread2(_objectSpread2({},EVM_ADAPTERS),SOLANA_ADAPTERS);MULTI_CHAIN_ADAPTERS.OPENLOGIN,MULTI_CHAIN_ADAPTERS.WALLET_CONNECT_V2,MULTI_CHAIN_ADAPTERS.SFA,SOLANA_ADAPTERS.TORUS_SOLANA,SOLANA_ADAPTERS.PHANTOM,SOLANA_ADAPTERS.SOLFLARE,EVM_ADAPTERS.TORUS_EVM,EVM_ADAPTERS.METAMASK,EVM_ADAPTERS.COINBASE;const ADAPTER_CATEGORY={IN_APP:"in_app"},ADAPTER_STATUS={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},ADAPTER_EVENTS=_objectSpread2(_objectSpread2({},ADAPTER_STATUS),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated",CACHE_CLEAR:"cache_clear"});class BaseAdapter extends SafeEventEmitter{constructor(e={}){super(),_defineProperty(this,"adapterData",{}),_defineProperty(this,"sessionTime",86400),_defineProperty(this,"clientId",void 0),_defineProperty(this,"web3AuthNetwork",OPENLOGIN_NETWORK.MAINNET),_defineProperty(this,"useCoreKitKey",void 0),_defineProperty(this,"rehydrated",!1),_defineProperty(this,"chainConfig",null),_defineProperty(this,"knownChainConfigs",{}),_defineProperty(this,"adapterNamespace",void 0),_defineProperty(this,"currentChainNamespace",void 0),_defineProperty(this,"type",void 0),_defineProperty(this,"name",void 0),_defineProperty(this,"status",void 0),this.setAdapterSettings(e)}get chainConfigProxy(){return this.chainConfig?_objectSpread2({},this.chainConfig):null}get connnected(){return this.status===ADAPTER_STATUS.CONNECTED}setAdapterSettings(e){if(this.status===ADAPTER_STATUS.READY)return;null!=e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!=e&&e.clientId&&(this.clientId=e.clientId),null!=e&&e.web3AuthNetwork&&(this.web3AuthNetwork=e.web3AuthNetwork),void 0!==(null==e?void 0:e.useCoreKitKey)&&(this.useCoreKitKey=e.useCoreKitKey);const t=e.chainConfig;if(t){if(!t.chainNamespace)throw WalletInitializationError.notReady("ChainNamespace is required while setting chainConfig");this.currentChainNamespace=t.chainNamespace;const e=_objectSpread2(_objectSpread2({},getChainConfig(t.chainNamespace,t.chainId)||{}),t);this.chainConfig=e,this.addChainConfig(e)}}checkConnectionRequirements(){if(this.name!==WALLET_ADAPTERS.WALLET_CONNECT_V2||this.status!==ADAPTER_STATUS.CONNECTING){if(this.status===ADAPTER_STATUS.CONNECTING)throw WalletInitializationError.notReady("Already connecting");if(this.status===ADAPTER_STATUS.CONNECTED)throw WalletLoginError.connectionError("Already connected");if(this.status!==ADAPTER_STATUS.READY)throw WalletLoginError.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function")}}checkInitializationRequirements(){if(!this.clientId)throw WalletInitializationError.invalidParams("Please initialize Web3Auth with a valid clientId in constructor");if(!this.chainConfig)throw WalletInitializationError.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.rpcTarget&&this.chainConfig.chainNamespace!==CHAIN_NAMESPACES.OTHER)throw WalletInitializationError.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.chainId&&this.chainConfig.chainNamespace!==CHAIN_NAMESPACES.OTHER)throw WalletInitializationError.invalidParams("chainID is required in chainConfig");if(this.status!==ADAPTER_STATUS.NOT_READY){if(this.status===ADAPTER_STATUS.CONNECTED)throw WalletInitializationError.notReady("Already connected");if(this.status===ADAPTER_STATUS.READY)throw WalletInitializationError.notReady("Adapter is already initialized")}}checkDisconnectionRequirements(){if(this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.disconnectionError("Not connected with wallet")}checkAddChainRequirements(e,t=!1){if(!t&&!this.provider)throw WalletLoginError.notConnectedError("Not connected with wallet.");if(this.currentChainNamespace!==e.chainNamespace)throw WalletOperationsError.chainNamespaceNotAllowed("This adapter doesn't support this chainNamespace")}checkSwitchChainRequirements({chainId:e},t=!1){if(!t&&!this.provider)throw WalletLoginError.notConnectedError("Not connected with wallet.");if(!this.knownChainConfigs[e])throw WalletLoginError.chainConfigNotAdded("Invalid chainId")}updateAdapterData(e){this.adapterData=e,this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}addChainConfig(e){const t=this.knownChainConfigs[e.chainId];this.knownChainConfigs[e.chainId]=_objectSpread2(_objectSpread2({},t||{}),e)}getChainConfig(e){return this.knownChainConfigs[e]||null}}var loglevel=loglevel$1$1.getLogger("web3auth-logger");class WalletServicesPluginError extends Web3AuthError{constructor(e,t,r){super(e,t,r),Object.defineProperty(this,"name",{value:"WalletServicesPluginError"})}static fromCode(e,t="",r){return new WalletServicesPluginError(e,`${WalletServicesPluginError.messages[e]}${t}`,r)}static notInitialized(e="",t){return WalletServicesPluginError.fromCode(5210,e,t)}static unsupportedAdapter(e="",t){return WalletServicesPluginError.fromCode(5211,e,t)}static providerRequired(e="",t){return WalletServicesPluginError.fromCode(5212,e,t)}static web3authRequired(e="",t){return WalletServicesPluginError.fromCode(5213,e,t)}static web3AuthNotConnected(e="",t){return WalletServicesPluginError.fromCode(5214,e,t)}static alreadyInitialized(e="",t){return WalletServicesPluginError.fromCode(5216,e,t)}static unsupportedChainNamespace(e="",t){return WalletServicesPluginError.fromCode(5218,e,t)}static differentWeb3AuthNetwork(e="",t){return WalletServicesPluginError.fromCode(5219,e,t)}static invalidParams(e="",t){return WalletServicesPluginError.fromCode(5220,e,t)}static web3authNotInitialized(e="",t){return WalletServicesPluginError.fromCode(5221,e,t)}static invalidSession(e="",t){return WalletServicesPluginError.fromCode(5222,e,t)}static walletPluginNotConnected(e="",t){return WalletServicesPluginError.fromCode(5223,e,t)}}_defineProperty(WalletServicesPluginError,"messages",{5210:"Wallet Services Plugin is not initialized",5211:"Web3Auth is connected to unsupported adapter. Wallet services connector plugin requires web3auth connected to openlogin adapter.",5212:"Provider is required..",5213:"Web3Auth instance is required while initialization.",5214:"Web3Auth is not connected.",5216:"Plugin is already initialized",5218:"Unsupported chain namespace.",5219:"Plugin network different than web3auth instance network.",5221:"Web3Auth is not initialized",5222:"Invalid session inside wallet services. Please report this issue.",5223:"Wallet plugin is not connected Yet. Please wait for plugin to connect and listen via `connected` event on the plugin"}),_objectSpread2(_objectSpread2({},CHAIN_NAMESPACES),{},{MULTICHAIN:"multichain"});const PLUGIN_STATUS={READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"};_objectSpread2({},PLUGIN_STATUS);const EVM_PLUGINS={WALLET_SERVICES:"wallet-services"},SOLANA_PLUGINS={SOLANA:"solana"};_objectSpread2(_objectSpread2({},EVM_PLUGINS),SOLANA_PLUGINS);const getOpenloginDefaultOptions=()=>({adapterSettings:{network:OPENLOGIN_NETWORK.SAPPHIRE_MAINNET,clientId:"",uxMode:UX_MODE.POPUP},loginSettings:{},privateKeyProvider:void 0});class OpenloginAdapter extends BaseAdapter{constructor(e={}){super(e),_defineProperty(this,"name",WALLET_ADAPTERS.OPENLOGIN),_defineProperty(this,"adapterNamespace",ADAPTER_NAMESPACES.MULTICHAIN),_defineProperty(this,"type",ADAPTER_CATEGORY.IN_APP),_defineProperty(this,"openloginInstance",null),_defineProperty(this,"status",ADAPTER_STATUS.NOT_READY),_defineProperty(this,"currentChainNamespace",CHAIN_NAMESPACES.EIP155),_defineProperty(this,"privateKeyProvider",null),_defineProperty(this,"openloginOptions",void 0),_defineProperty(this,"loginSettings",{loginProvider:""}),this.setAdapterSettings(_objectSpread2(_objectSpread2({},e.adapterSettings),{},{chainConfig:e.chainConfig,clientId:e.clientId||"",sessionTime:e.sessionTime,web3AuthNetwork:e.web3AuthNetwork,useCoreKitKey:e.useCoreKitKey,privateKeyProvider:e.privateKeyProvider})),this.loginSettings=e.loginSettings||{loginProvider:""},this.privateKeyProvider=e.privateKeyProvider||null}get chainConfigProxy(){return this.chainConfig?_objectSpread2({},this.chainConfig):null}get provider(){return this.status!==ADAPTER_STATUS.NOT_READY&&this.privateKeyProvider?this.privateKeyProvider:null}set provider(e){throw new Error("Not implemented")}async init(e){if(super.checkInitializationRequirements(),!this.clientId)throw WalletInitializationError.invalidParams("clientId is required before openlogin's initialization");if(!this.openloginOptions)throw WalletInitializationError.invalidParams("openloginOptions is required before openlogin's initialization");const t=this.openloginOptions.uxMode===UX_MODE.REDIRECT;if(this.openloginOptions=_objectSpread2(_objectSpread2({},this.openloginOptions),{},{replaceUrlOnRedirect:t,useCoreKitKey:this.useCoreKitKey}),this.openloginInstance=new OpenLogin(_objectSpread2(_objectSpread2({},this.openloginOptions),{},{clientId:this.clientId,network:this.openloginOptions.network||this.web3AuthNetwork||OPENLOGIN_NETWORK.SAPPHIRE_MAINNET})),loglevel.debug("initializing openlogin adapter init"),await this.openloginInstance.init(),!this.chainConfig)throw WalletInitializationError.invalidParams("chainConfig is required before initialization");this.status=ADAPTER_STATUS.READY,this.emit(ADAPTER_EVENTS.READY,WALLET_ADAPTERS.OPENLOGIN);try{loglevel.debug("initializing openlogin adapter");this._getFinalPrivKey()&&(e.autoConnect||t)&&(this.rehydrated=!0,await this.connect())}catch(r){loglevel.error("Failed to connect with cached openlogin provider",r),this.emit("ERRORED",r)}}async connect(e={loginProvider:""}){super.checkConnectionRequirements(),this.status=ADAPTER_STATUS.CONNECTING,this.emit(ADAPTER_EVENTS.CONNECTING,_objectSpread2(_objectSpread2({},e),{},{adapter:WALLET_ADAPTERS.OPENLOGIN}));try{return await this.connectWithProvider(e),this.provider}catch(t){if(loglevel.error("Failed to connect with openlogin provider",t),this.status=ADAPTER_STATUS.READY,this.emit(ADAPTER_EVENTS.ERRORED,t),null!=t&&t.message.includes("user closed popup"))throw WalletLoginError.popupClosed();if(t instanceof Web3AuthError)throw t;throw WalletLoginError.connectionError("Failed to login with openlogin",t)}}async enableMFA(e={loginProvider:""}){if(this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.notConnectedError("Not connected with wallet");if(!this.openloginInstance)throw WalletInitializationError.notReady("openloginInstance is not ready");try{await this.openloginInstance.enableMFA(e)}catch(t){if(loglevel.error("Failed to enable MFA with openlogin provider",t),t instanceof Web3AuthError)throw t;throw WalletLoginError.connectionError("Failed to enable MFA with openlogin",t)}}async disconnect(e={cleanup:!1}){if(this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.notConnectedError("Not connected with wallet");if(!this.openloginInstance)throw WalletInitializationError.notReady("openloginInstance is not ready");await this.openloginInstance.logout(),e.cleanup?(this.status=ADAPTER_STATUS.NOT_READY,this.openloginInstance=null,this.privateKeyProvider=null):this.status=ADAPTER_STATUS.READY,this.rehydrated=!1,this.emit(ADAPTER_EVENTS.DISCONNECTED)}async authenticateUser(){if(this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first");return{idToken:(await this.getUserInfo()).idToken}}async getUserInfo(){if(this.status!==ADAPTER_STATUS.CONNECTED)throw WalletLoginError.notConnectedError("Not connected with wallet");if(!this.openloginInstance)throw WalletInitializationError.notReady("openloginInstance is not ready");return this.openloginInstance.getUserInfo()}setAdapterSettings(e){super.setAdapterSettings(e);const t=getOpenloginDefaultOptions();loglevel.info("setting adapter settings",e),this.openloginOptions=merge(t.adapterSettings,this.openloginOptions,e),e.web3AuthNetwork&&(this.openloginOptions.network=e.web3AuthNetwork),e.privateKeyProvider&&(this.privateKeyProvider=e.privateKeyProvider)}async addChain(e,t=!1){var r;super.checkAddChainRequirements(e,t),null===(r=this.privateKeyProvider)||void 0===r||r.addChain(e),this.addChainConfig(e)}async switchChain(e,t=!1){var r;super.checkSwitchChainRequirements(e,t),await(null===(r=this.privateKeyProvider)||void 0===r?void 0:r.switchChain(e)),this.setAdapterSettings({chainConfig:this.getChainConfig(e.chainId)})}_getFinalPrivKey(){if(!this.openloginInstance)return"";let e=this.openloginInstance.privKey;if(this.useCoreKitKey){if(this.openloginInstance.privKey&&!this.openloginInstance.coreKitKey)throw WalletLoginError.coreKitKeyNotFound();e=this.openloginInstance.coreKitKey}return e}_getFinalEd25519PrivKey(){if(!this.openloginInstance)return"";let e=this.openloginInstance.ed25519PrivKey;if(this.useCoreKitKey){if(this.openloginInstance.ed25519PrivKey&&!this.openloginInstance.coreKitEd25519Key)throw WalletLoginError.coreKitKeyNotFound();e=this.openloginInstance.coreKitEd25519Key}return e}async connectWithProvider(e={loginProvider:""}){var t;if(!this.privateKeyProvider)throw WalletInitializationError.invalidParams("PrivateKey Provider is required before initialization");if(!this.openloginInstance)throw WalletInitializationError.notReady("openloginInstance is not ready");if(!this._getFinalPrivKey()||null!==(t=e.extraLoginOptions)&&void 0!==t&&t.id_token){var r;if(this.loginSettings.curve||(this.loginSettings.curve=this.currentChainNamespace===CHAIN_NAMESPACES.SOLANA?SUPPORTED_KEY_CURVES.ED25519:SUPPORTED_KEY_CURVES.SECP256K1),!e.loginProvider&&!this.loginSettings.loginProvider)throw WalletInitializationError.invalidParams("loginProvider is required for login");await this.openloginInstance.login(merge(this.loginSettings,e,{extraLoginOptions:_objectSpread2(_objectSpread2({},e.extraLoginOptions||{}),{},{login_hint:e.login_hint||(null===(r=e.extraLoginOptions)||void 0===r?void 0:r.login_hint)})}))}let i=this._getFinalPrivKey();i&&(this.currentChainNamespace===CHAIN_NAMESPACES.SOLANA&&(i=this._getFinalEd25519PrivKey()),await this.privateKeyProvider.setupProvider(i),this.status=ADAPTER_STATUS.CONNECTED,this.emit(ADAPTER_EVENTS.CONNECTED,{adapter:WALLET_ADAPTERS.OPENLOGIN,reconnected:this.rehydrated,provider:this.provider}))}}export{Buffer$1 as B,CHAIN_NAMESPACES$1 as C,LayoutExports as L,OpenloginAdapter as O,PublicKey as P,ReactDOM as R,SolanaPrivateKeyProvider as S,TransactionInstruction as T,Web3Auth as W,__vitePreload as _,Buffer as a,SystemProgram as b,LAMPORTS_PER_SOL as c,Connection as d,eventsExports as e,Transaction as f,WEB3AUTH_NETWORK as g,index$1 as h,index$2 as i,jsxRuntimeExports as j,index as k,process$1 as p};
//# sourceMappingURL=web3auth-C90gi1IA.js.map
