import{j as e}from"./web3auth-BGmWjNJV.js";import{u as a,d as t,r as l}from"./router-CzH47hF_.js";import{V as r}from"./VideoCard-BywUfliD.js";import{A as s}from"./index-BCf7wtEB.js";import"./vendor-Cfs_Iq82.js";import"./eye-B6vcuiB7.js";import"./star-BpG9LpBT.js";import"./thumbs-up-iaqEjqR5.js";const n=[{label:"All",value:"all"},{label:"Books",value:"book"},{label:"Art",value:"art"},{label:"Film",value:"film"},{label:"Music",value:"music"}],i=[{label:"All Genres",value:"all"},{label:"Fantasy",value:"fantasy"},{label:"Sci-Fi",value:"scifi"},{label:"Non-Fiction",value:"nonfiction"},{label:"Drama",value:"drama"},{label:"Comedy",value:"comedy"},{label:"Other",value:"other"}];function o(){a();const[o,c]=t(),u=o.get("q")||"",[d,m]=l.useState(o.get("type")||"all"),[h,g]=l.useState(o.get("genre")||"all"),[v,f]=l.useState([]),[p,b]=l.useState(!1),y=(e,a)=>{const t=new URLSearchParams(o);"all"!==e?t.set("type",e):t.delete("type"),"all"!==a?t.set("genre",a):t.delete("genre"),c(t)},j=l.useCallback(()=>{b(!0);const e=new URLSearchParams;u&&e.set("q",u),"all"!==d&&e.set("type",d),"all"!==h&&e.set("genre",h),fetch(`${s}/api/search/?${e.toString()}`,{credentials:"include"}).then(e=>e.json()).then(e=>{Array.isArray(e)?f(e):f([])}).catch(()=>f([])).finally(()=>b(!1))},[u,d,h]);l.useEffect(()=>{j()},[j]),l.useEffect(()=>{m(o.get("type")||"all"),g(o.get("genre")||"all")},[o]);const x=e=>{if(!e)return"Recently";const a=new Date(e),t=new Date,l=Math.floor((t.getTime()-a.getTime())/1e3);return l<60?"Just now":l<3600?`${Math.floor(l/60)} minutes ago`:l<86400?`${Math.floor(l/3600)} hours ago`:l<604800?`${Math.floor(l/86400)} days ago`:`${Math.floor(l/604800)} weeks ago`};return e.jsxs("div",{className:"page",style:{background:"transparent",border:"none",boxShadow:"none"},children:[u&&e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("h2",{style:{margin:0,fontSize:20,color:"#f1f5f9"},children:['Results for "',u,'"']}),e.jsxs("p",{style:{margin:"4px 0 0",fontSize:14,color:"#94a3b8"},children:[v.length," result",1!==v.length?"s":""," found"]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{className:"chips",style:{marginBottom:8},children:n.map(a=>e.jsx("button",{className:"chip "+(d===a.value?"active":""),onClick:()=>{return e=a.value,m(e),void y(e,h);var e},children:a.label},a.value))}),e.jsx("div",{className:"chips",children:i.map(a=>e.jsx("button",{className:"chip "+(h===a.value?"active":""),onClick:()=>{return e=a.value,g(e),void y(d,e);var e},children:a.label},a.value))})]}),p?e.jsx("div",{style:{textAlign:"center",padding:40,color:"#94a3b8"},children:"Searching..."}):0===v.length?e.jsx("div",{style:{textAlign:"center",padding:40,color:"#94a3b8"},children:u?`No results found for "${u}"`:"Browse content using the filters above"}):e.jsx("div",{className:"yt-grid",children:v.map(a=>e.jsx(r,{id:a.id,title:a.title,author:a.creator_username||`Creator #${a.creator??0}`,likeCount:a.like_count,averageRating:a.average_rating,ratingCount:a.rating_count,timeText:x(a.created_at),thumbnailUrl:a.teaser_link||"",teaser_link:a.teaser_link,price:a.price_usd,editions:a.editions,owned:a.owned},a.id))})]})}export{o as default};
//# sourceMappingURL=SearchPage-SVthzp8u.js.map
