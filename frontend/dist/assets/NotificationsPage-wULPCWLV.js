import{j as e}from"./web3auth-BkZxjmxM.js";import{a as t,r as n}from"./router-cVcvJ1e3.js";import{c as i,e as o,x as a,s as l,S as r,X as s,N as d,g as c}from"./index-CqGBtQ6P.js";import{A as p}from"./arrow-left-Cv4wkVNt.js";import{C as f}from"./calendar-DMk67Ne5.js";import{S as u,a as x}from"./square-D0auBB3x.js";import{T as g}from"./trash-2-BFOxKgcE.js";import"./vendor-Cfs_Iq82.js";
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=i("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),h=i("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),y=[{value:"all",label:"All Types"},{value:"invitation",label:"Invitations"},{value:"invitation_response",label:"Invite Responses"},{value:"counter_proposal",label:"Counter Proposals"},{value:"comment",label:"Comments"},{value:"approval",label:"Approvals"},{value:"section_update",label:"Updates"},{value:"revenue_proposal",label:"Revenue Proposals"},{value:"mint_ready",label:"Mint Ready"},{value:"content_like",label:"Likes"},{value:"content_comment",label:"Content Comments"},{value:"content_rating",label:"Ratings"},{value:"creator_review",label:"Reviews"}],m=[{value:"all",label:"All Time"},{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"}];function j(){const i=t(),{isMobile:j,isPhone:v}=o(),[k,z]=n.useState("unread"),[w,S]=n.useState("all"),[C,R]=n.useState("all"),[I,W]=n.useState(""),[A,_]=n.useState(!1),[H,T]=n.useState(new Set),[B,D]=n.useState(!1),[M,L]=n.useState(null),[N,P]=n.useState(!1),{notifications:q,unreadCount:E,isLoading:V,markAsRead:O,markAllAsRead:U,deleteNotification:X,refresh:$}=a();n.useEffect(()=>{$()},[$]),n.useEffect(()=>{A||T(new Set)},[A]);const F=n.useMemo(()=>q.filter(e=>{var t,n;if("unread"===k&&e.read)return!1;if("read"===k&&!e.read)return!1;if("all"!==w&&e.type!==w)return!1;if(!(e=>{if("all"===C)return!0;const t=new Date(e),n=new Date,i=Math.floor((n.getTime()-t.getTime())/864e5);switch(C){case"today":return 0===i;case"week":return i<=7;case"month":return i<=30;default:return!0}})(e.created_at))return!1;if(I){const i=I.toLowerCase(),o=null==(t=e.title)?void 0:t.toLowerCase().includes(i),a=null==(n=e.message)?void 0:n.toLowerCase().includes(i);if(!o&&!a)return!1}return!0}),[q,k,w,C,I]),G=e=>{const t=new Set(H);t.has(e)?t.delete(e):t.add(e),T(t)},J=()=>{T(new Set)},K=async e=>{e.read||await O(e.id),L(e),D(!0)};return e.jsxs("div",{style:{maxWidth:900,margin:"0 auto",padding:v?"16px 12px":"24px 16px"},children:[e.jsxs("div",{style:{marginBottom:v?16:24},children:[e.jsxs("button",{onClick:()=>i(-1),style:{display:"flex",alignItems:"center",gap:8,background:"transparent",border:"none",color:"#94a3b8",fontSize:14,cursor:"pointer",padding:"8px 0",marginBottom:v?12:16,minHeight:44},children:[e.jsx(p,{size:18}),"Back"]}),e.jsxs("div",{style:{display:"flex",flexDirection:v?"column":"row",alignItems:v?"flex-start":"center",justifyContent:"space-between",gap:v?12:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx(l,{size:v?24:28,color:"#f59e0b"}),e.jsx("h1",{style:{fontSize:v?20:24,fontWeight:700,color:"#e5e7eb",margin:0},children:"Notifications"}),E>0&&e.jsx("span",{style:{background:"#ef4444",color:"#fff",fontSize:11,fontWeight:700,padding:"3px 8px",borderRadius:12},children:E})]}),e.jsxs("button",{onClick:async()=>{await U()},disabled:0===E,style:{display:"flex",alignItems:"center",gap:8,background:E>0?"#f59e0b":"transparent",border:E>0?"none":"1px solid #374151",color:E>0?"#000":"#64748b",fontSize:13,fontWeight:600,padding:"10px 16px",borderRadius:8,cursor:E>0?"pointer":"not-allowed",opacity:E>0?1:.6,minHeight:44,width:v?"100%":"auto",justifyContent:"center"},children:[e.jsx(b,{size:16}),"Mark All Read"]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",background:"#0f172a",border:"1px solid #1f2937",borderRadius:8,padding:"0 12px"},children:[e.jsx(r,{size:18,color:"#64748b"}),e.jsx("input",{type:"text",placeholder:"Search notifications...",value:I,onChange:e=>W(e.target.value),style:{flex:1,background:"transparent",border:"none",color:"#e5e7eb",fontSize:14,padding:"12px",outline:"none",minHeight:44}}),I&&e.jsx("button",{onClick:()=>W(""),style:{background:"transparent",border:"none",color:"#64748b",cursor:"pointer",padding:4,display:"flex",alignItems:"center"},children:e.jsx(s,{size:16})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:v?"column":"row",gap:8},children:[e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:8},children:[e.jsx(h,{size:16,color:"#64748b"}),e.jsx("select",{value:w,onChange:e=>S(e.target.value),style:{flex:1,background:"#0f172a",border:"1px solid #1f2937",borderRadius:6,color:"#e5e7eb",fontSize:13,padding:"10px 12px",cursor:"pointer",outline:"none",minHeight:44},children:y.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:8},children:[e.jsx(f,{size:16,color:"#64748b"}),e.jsx("select",{value:C,onChange:e=>R(e.target.value),style:{flex:1,background:"#0f172a",border:"1px solid #1f2937",borderRadius:6,color:"#e5e7eb",fontSize:13,padding:"10px 12px",cursor:"pointer",outline:"none",minHeight:44},children:m.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,borderBottom:"1px solid #1f2937",paddingBottom:12,gap:8,flexWrap:"wrap"},children:[e.jsx("div",{style:{display:"flex",gap:4,overflowX:"auto",WebkitOverflowScrolling:"touch"},children:["unread","read","all"].map(t=>e.jsxs("button",{onClick:()=>z(t),style:{background:k===t?"#1f2937":"transparent",border:"none",color:k===t?"#f59e0b":"#94a3b8",fontSize:13,fontWeight:600,padding:"8px 14px",borderRadius:6,cursor:"pointer",textTransform:"capitalize",whiteSpace:"nowrap",minHeight:40},children:[t,"unread"===t&&E>0&&e.jsxs("span",{style:{marginLeft:4,opacity:.8},children:["(",E,")"]})]},t))}),e.jsxs("button",{onClick:()=>_(!A),style:{display:"flex",alignItems:"center",gap:6,background:A?"#1e3a5f":"transparent",border:"1px solid "+(A?"#3b82f6":"#374151"),color:A?"#3b82f6":"#94a3b8",fontSize:12,fontWeight:600,padding:"6px 12px",borderRadius:6,cursor:"pointer",minHeight:36},children:[e.jsx(u,{size:14}),A?"Cancel":"Select"]})]}),A&&e.jsxs("div",{style:{display:"flex",flexDirection:v?"column":"row",alignItems:v?"stretch":"center",justifyContent:"space-between",gap:12,padding:"12px 16px",background:"#1e293b",borderRadius:8,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>{T(new Set(F.map(e=>e.id)))},style:{background:"transparent",border:"1px solid #374151",color:"#94a3b8",fontSize:12,fontWeight:600,padding:"6px 12px",borderRadius:4,cursor:"pointer",minHeight:36},children:"Select All"}),e.jsx("button",{onClick:J,disabled:0===H.size,style:{background:"transparent",border:"1px solid #374151",color:H.size>0?"#94a3b8":"#475569",fontSize:12,fontWeight:600,padding:"6px 12px",borderRadius:4,cursor:H.size>0?"pointer":"not-allowed",minHeight:36},children:"Clear"}),e.jsxs("span",{style:{fontSize:13,color:"#64748b"},children:[H.size," selected"]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("button",{onClick:async()=>{for(const e of H)await O(e);J(),_(!1)},disabled:0===H.size,style:{display:"flex",alignItems:"center",gap:6,background:H.size>0?"#3b82f6":"#1f2937",border:"none",color:H.size>0?"#fff":"#475569",fontSize:12,fontWeight:600,padding:"8px 14px",borderRadius:6,cursor:H.size>0?"pointer":"not-allowed",flex:v?1:"none",justifyContent:"center",minHeight:40},children:[e.jsx(b,{size:14}),"Mark Read"]}),e.jsxs("button",{onClick:()=>P(!0),disabled:0===H.size,style:{display:"flex",alignItems:"center",gap:6,background:H.size>0?"#dc2626":"#1f2937",border:"none",color:H.size>0?"#fff":"#475569",fontSize:12,fontWeight:600,padding:"8px 14px",borderRadius:6,cursor:H.size>0?"pointer":"not-allowed",flex:v?1:"none",justifyContent:"center",minHeight:40},children:[e.jsx(g,{size:14}),"Delete"]})]})]}),e.jsx("div",{style:{background:"#0f172a",borderRadius:12,border:"1px solid #1f2937",overflow:"hidden"},children:V&&0===q.length?e.jsx("div",{style:{padding:60,textAlign:"center",color:"#94a3b8"},children:"Loading notifications..."}):0===F.length?e.jsxs("div",{style:{padding:60,textAlign:"center",color:"#94a3b8"},children:[e.jsx(l,{size:40,style:{marginBottom:16,opacity:.5}}),e.jsx("div",{style:{fontSize:16,fontWeight:600,marginBottom:8},children:I?"No notifications match your search":"all"===k?"No notifications yet":"unread"===k?"No unread notifications":"No read notifications"}),e.jsx("div",{style:{fontSize:13,color:"#64748b"},children:I?"Try adjusting your search or filters":"all"===k?"We'll notify you when there's activity":"Check back later for updates"})]}):e.jsx("div",{children:F.map(t=>e.jsxs("div",{style:{display:"flex",alignItems:"stretch"},children:[A&&e.jsx("button",{onClick:()=>G(t.id),style:{display:"flex",alignItems:"center",justifyContent:"center",width:48,background:H.has(t.id)?"rgba(59, 130, 246, 0.1)":"transparent",border:"none",borderRight:"1px solid #1f2937",cursor:"pointer",flexShrink:0},children:H.has(t.id)?e.jsx(u,{size:20,color:"#3b82f6"}):e.jsx(x,{size:20,color:"#475569"})}),e.jsx("div",{style:{flex:1},children:e.jsx(d,{notification:t,onClick:()=>(async e=>{A?G(e.id):(e.read||await O(e.id),e.action_url?i(e.action_url):e.project_id&&i(`/collaborations/${e.project_id}`))})(t),onDelete:e=>{A||(async(e,t)=>{e.stopPropagation(),await X(t)})(e,t.id)},onViewInvite:A?void 0:K})})]},t.id))})}),q.length>0&&e.jsxs("div",{style:{marginTop:16,padding:12,textAlign:"center",fontSize:12,color:"#64748b"},children:["Showing ",F.length," of ",q.length," notifications"]}),N&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:20},onClick:()=>P(!1),children:e.jsxs("div",{style:{background:"#1a1f2e",borderRadius:12,padding:24,maxWidth:400,width:"100%"},onClick:e=>e.stopPropagation(),children:[e.jsx("h3",{style:{fontSize:18,fontWeight:700,color:"#e5e7eb",margin:"0 0 12px 0"},children:"Delete Notifications?"}),e.jsxs("p",{style:{fontSize:14,color:"#94a3b8",margin:"0 0 20px 0"},children:["Are you sure you want to delete ",H.size," notification",1!==H.size?"s":"","? This cannot be undone."]}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsx("button",{onClick:()=>P(!1),style:{flex:1,background:"transparent",border:"1px solid #374151",color:"#94a3b8",fontSize:14,fontWeight:600,padding:"12px 20px",borderRadius:8,cursor:"pointer",minHeight:48},children:"Cancel"}),e.jsx("button",{onClick:async()=>{for(const e of H)await X(e);J(),_(!1),P(!1)},style:{flex:1,background:"#dc2626",border:"none",color:"#fff",fontSize:14,fontWeight:600,padding:"12px 20px",borderRadius:8,cursor:"pointer",minHeight:48},children:"Delete"})]})]})}),M&&M.project_id&&e.jsx(c,{open:B,onClose:()=>{D(!1),L(null),$()},projectId:M.project_id,notificationMessage:M.message})]})}export{j as default};
