{"version":3,"mappings":"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","names":["ChartColumn","createLucideIcon","d","key","Link","TrendingUp","Wallet","WalletManagementPanel","walletAddress","walletProvider","onWalletUpdate","showManageMenu","setShowManageMenu","useState","activeAction","setActiveAction","loading","setLoading","error","setError","success","setSuccess","getCsrfToken","async","res","fetch","API_URL","credentials","data","json","csrfToken","createWeb3AuthWallet","Web3Auth","__vitePreload","import","then","n","b","__VITE_PRELOAD__","CHAIN_NAMESPACES","i","SolanaPrivateKeyProvider","c","clientId","chainConfig","chainNamespace","SOLANA","chainId","rpcTarget","web3auth","privateKeyProvider","config","web3AuthNetwork","uiConfig","appName","mode","loginMethodsOrder","defaultLanguage","initModal","status","logout","e","connect","userInfo","getUserInfo","idToken","id_token","Error","csrf","method","headers","body","JSON","stringify","web3auth_token","ok","catch","errorMsg","message","String","connectExternalWallet","provider","window","solana","publicKey","toString","Math","random","substring","Date","now","encodedMessage","TextEncoder","encode","signedMessage","signMessage","signature","Buffer","from","wallet_address","code","_a","includes","jsxs","style","background","border","borderRadius","padding","marginBottom","children","fontWeight","color","fontSize","display","alignItems","gap","jsx","size","flexWrap","onClick","disabled","cursor","transition","onMouseOver","currentTarget","transform","onMouseOut","Loader","Globe","borderColor","Info","providerLabel","providerIcon","position","justifyContent","flex","CheckCircle","fontFamily","addr","length","slice","navigator","clipboard","writeText","setTimeout","Copy","marginRight","href","getExplorerLink","target","rel","textDecoration","ExternalLink","Settings","ChevronUp","ChevronDown","top","right","marginTop","minWidth","zIndex","boxShadow","width","textAlign","Fragment","height","margin","AlertTriangle","DollarSign","inset","backdropFilter","placeItems","maxWidth","lineHeight","AlertCircle","paddingLeft","text","ProfilePageRedesigned","navigate","useNavigate","user","setUser","content","setContent","setStatus","dash","setDash","content_count","sales","profile","setProfile","setCsrf","avatarInputRef","useRef","bannerInputRef","showWalletModal","setShowWalletModal","editingAbout","setEditingAbout","editBio","setEditBio","editDisplayName","setEditDisplayName","editLocation","setEditLocation","editStatus","setEditStatus","savingAbout","setSavingAbout","externalPortfolio","setExternalPortfolio","portfolioModalOpen","setPortfolioModalOpen","editingPortfolioItem","setEditingPortfolioItem","activeTab","setActiveTab","contentFilter","setContentFilter","statusFilter","setStatusFilter","inventory","setInventory","bookProjects","setBookProjects","expandedBooks","setExpandedBooks","Set","showPreview","setShowPreview","previewItem","setPreviewItem","pendingInvites","setPendingInvites","selectedInviteProjectId","setSelectedInviteProjectId","collaborations","setCollaborations","collaborationsLoading","setCollaborationsLoading","processingInvites","setProcessingInvites","salesAnalytics","setSalesAnalytics","analyticsLoading","setAnalyticsLoading","expandedAnalyticsCards","setExpandedAnalyticsCards","followingList","setFollowingList","followingLoading","setFollowingLoading","unfollowingUsers","setUnfollowingUsers","toggleAnalyticsCard","cardId","prev","newSet","has","delete","add","refreshCsrf","r","j","token","loadPendingInvites","invites","collaborationApi","getPendingInvites","err","loadCollaborations","projects","getCollaborativeProjects","loadExternalPortfolio","handleAcceptInvite","projectId","stopPropagation","acceptInvitation","Promise","all","handleDeclineInvite","declineInvitation","getContentTypeIcon","contentType","BookOpen","Music","Film","Palette","useEffect","abortController","AbortController","signal","userResp","contentResp","csrfResp","profileResp","dashResp","Array","isArray","results","loadSalesAnalytics","username","usernameOverride","response","getFollowing","loadFollowingList","abort","items","filter","item","content_type","is_collaborative","openReader","contentId","ref","onChange","file","files","fd","FormData","append","refreshStatus","value","type","accept","current","click","banner","banner_url","title","to","Eye","overflow","flexShrink","onMouseEnter","onMouseLeave","avatar","avatar_url","src","alt","display_name","objectFit","toUpperCase","location","MapPin","opacity","bio","updatedProfile","Edit2","placeholder","label","description","map","opt","rows","resize","minHeight","whiteSpace","fontStyle","project","invite","isProcessing","id","created_by_username","role","revenue_percentage","total_collaborators","paddingTop","borderTop","Check","XCircle","borderBottom","Tab","icon","count","active","Users","Briefcase","BarChart3","UserCheck","FilterChip","inventory_status","published_chapters","Plus","EmptyState","FileText","actionLabel","onAction","filteredInventory","filteredBooks","hasContent","filterLabel","gridTemplateColumns","book","BookProjectCard","expanded","onToggleExpand","onViewChapter","onEditBook","ContentCard","onView","onEdit","marginLeft","textTransform","image_url","project_type","charAt","left","textOverflow","WebkitLineClamp","WebkitBoxOrient","external_url","deletePortfolioItem","Trash2","letterSpacing","summary","total_earnings_usdc","toFixed","solo_earnings","collaboration_earnings","collaboration_count","total_sales","content_sales","collaboration_sales","isExpanded","sales_count","price","total_earnings","percentage","transactions","tx","idx","buyer","Clock","date","toLocaleDateString","toLocaleTimeString","hour","minute","tx_signature","amount","borderLeft","recent_transactions","flexDirection","Loader2","animation","index","userId","unfollowUser","u","handleUnfollow","wallet_provider","PreviewModal","open","onClose","teaserUrl","teaser_link","price_usd","editions","InviteResponseModal","PortfolioItemModal","onSave","isEdit","url","bottom","hasPublishedChapters","firstPublishedChapter","chapters","find","ch","is_published","content_id","cover_image_url","backgroundSize","backgroundPosition","total_chapters","total_views","total_price","maxHeight","overflowY","chapter","order","view_count","isPublished","genre","setTitle","setDescription","externalUrl","setExternalUrl","projectType","setProjectType","setRole","createdDate","setCreatedDate","created_date","X","onSubmit","preventDefault","required"],"ignoreList":[0,1,2,3],"sources":["../../node_modules/lucide-react/dist/esm/icons/chart-column.js","../../node_modules/lucide-react/dist/esm/icons/link.js","../../node_modules/lucide-react/dist/esm/icons/trending-up.js","../../node_modules/lucide-react/dist/esm/icons/wallet.js","../../src/components/WalletManagementPanel.tsx","../../src/pages/ProfilePageRedesigned.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 3v16a2 2 0 0 0 2 2h16\", key: \"c24i48\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n];\nconst ChartColumn = createLucideIcon(\"chart-column\", __iconNode);\n\nexport { __iconNode, ChartColumn as default };\n//# sourceMappingURL=chart-column.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\", key: \"1cjeqo\" }],\n  [\"path\", { d: \"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\", key: \"19qd67\" }]\n];\nconst Link = createLucideIcon(\"link\", __iconNode);\n\nexport { __iconNode, Link as default };\n//# sourceMappingURL=link.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 7h6v6\", key: \"box55l\" }],\n  [\"path\", { d: \"m22 7-8.5 8.5-5-5L2 17\", key: \"1t1m79\" }]\n];\nconst TrendingUp = createLucideIcon(\"trending-up\", __iconNode);\n\nexport { __iconNode, TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n","/**\n * @license lucide-react v0.553.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1\",\n      key: \"18etb6\"\n    }\n  ],\n  [\"path\", { d: \"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4\", key: \"xoc0q4\" }]\n];\nconst Wallet = createLucideIcon(\"wallet\", __iconNode);\n\nexport { __iconNode, Wallet as default };\n//# sourceMappingURL=wallet.js.map\n","import React, { useState } from 'react';\nimport { API_URL } from '../config';\nimport {\n  Wallet, Globe, Link, Loader, Info, CheckCircle, Copy, ExternalLink,\n  Settings, AlertTriangle, AlertCircle, DollarSign, ChevronDown, ChevronUp\n} from 'lucide-react';\n\ninterface WalletManagementPanelProps {\n  walletAddress: string | null;\n  walletProvider: 'web3auth' | 'external' | null;\n  onWalletUpdate: () => void;\n}\n\ntype WalletAction = 'create_web3auth' | 'connect_external' | 'switch' | 'disconnect' | null;\n\nexport function WalletManagementPanel({\n  walletAddress,\n  walletProvider,\n  onWalletUpdate\n}: WalletManagementPanelProps) {\n  const [showManageMenu, setShowManageMenu] = useState(false);\n  const [activeAction, setActiveAction] = useState<WalletAction>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Helper: Shorten wallet address for display\n  const shortenAddress = (addr: string) => {\n    if (!addr || addr.length < 12) return addr;\n    return `${addr.slice(0, 4)}...${addr.slice(-4)}`;\n  };\n\n  // Helper: Get Solscan explorer link\n  const getExplorerLink = (addr: string) => {\n    // Use devnet for development, mainnet for production\n    const network = import.meta.env.VITE_SOLANA_NETWORK === 'mainnet-beta' ? '' : '?cluster=devnet';\n    return `https://solscan.io/account/${addr}${network}`;\n  };\n\n  // Helper: Copy to clipboard\n  const copyAddress = async () => {\n    if (!walletAddress) return;\n    try {\n      await navigator.clipboard.writeText(walletAddress);\n      setSuccess('Address copied!');\n      setTimeout(() => setSuccess(''), 2000);\n    } catch (e) {\n      setError('Failed to copy');\n    }\n  };\n\n  // Helper: Get CSRF token\n  const getCsrfToken = async () => {\n    const res = await fetch(`${API_URL}/api/auth/csrf/`, { credentials: 'include' });\n    const data = await res.json();\n    return data?.csrfToken || '';\n  };\n\n  // Action: Create Web3Auth wallet\n  const createWeb3AuthWallet = async () => {\n    setError('');\n    setLoading(true);\n\n    try {\n      const { Web3Auth } = await import('@web3auth/modal');\n      const { CHAIN_NAMESPACES } = await import('@web3auth/base');\n      const { SolanaPrivateKeyProvider } = await import('@web3auth/solana-provider');\n\n      const clientId = import.meta.env.VITE_WEB3AUTH_CLIENT_ID || '';\n      if (!clientId) {\n        throw new Error('Web3Auth client ID not configured');\n      }\n\n      const chainConfig = {\n        chainNamespace: CHAIN_NAMESPACES.SOLANA,\n        chainId: \"0x3\", // Solana devnet\n        rpcTarget: \"https://api.devnet.solana.com\",\n      };\n\n      const privateKeyProvider = new SolanaPrivateKeyProvider({\n        config: { chainConfig },\n      });\n\n      const web3auth = new Web3Auth({\n        clientId,\n        chainConfig,\n        privateKeyProvider,\n        web3AuthNetwork: 'sapphire_devnet',\n        uiConfig: {\n          appName: \"RenaissBlock\",\n          mode: \"dark\",\n          loginMethodsOrder: [\"google\", \"discord\"],\n          defaultLanguage: \"en\",\n        },\n      });\n\n      // Initialize the modal\n      await web3auth.initModal();\n\n      // CRITICAL: Clear any cached session to force fresh login\n      // This ensures each user gets a NEW wallet, not reusing a previous one\n      try {\n        if (web3auth.status === 'connected') {\n          console.log('Clearing previous Web3Auth session...');\n          await web3auth.logout();\n        }\n      } catch (e) {\n        console.log('No previous session to clear');\n      }\n\n      // Connect will open the modal for user to select login method\n      const provider = await web3auth.connect();\n\n      const userInfo: any = await web3auth.getUserInfo();\n      const idToken = userInfo?.idToken || userInfo?.id_token;\n\n      if (!idToken) {\n        throw new Error('Could not obtain Web3Auth token');\n      }\n\n      // Link wallet to account\n      const csrf = await getCsrfToken();\n      const res = await fetch(`${API_URL}/api/wallet/link/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrf,\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ web3auth_token: idToken }),\n      });\n\n      if (!res.ok) {\n        const data = await res.json().catch(() => ({}));\n        const errorMsg = data.error || data.message || 'Failed to link wallet';\n\n        // Show more helpful error messages\n        console.error('Wallet link error:', data);\n        throw new Error(errorMsg);\n      }\n\n      setSuccess('Wallet created and linked!');\n      setActiveAction(null);\n      onWalletUpdate();\n    } catch (e: any) {\n      setError(e?.message || String(e));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Action: Connect external wallet with signature verification\n  const connectExternalWallet = async () => {\n    setError('');\n    setLoading(true);\n\n    try {\n      // Check for Solana wallet provider (Phantom, Backpack, Solflare, etc.)\n      const provider = (window as any).solana;\n\n      if (!provider) {\n        throw new Error('No Solana wallet found. Please install Phantom, Backpack, or Solflare.');\n      }\n\n      // Connect to wallet\n      const resp = await provider.connect();\n      const publicKey = resp.publicKey.toString();\n\n      // Generate nonce for signature\n      const nonce = Math.random().toString(36).substring(2, 15);\n      const message = `Connect wallet to RenaissBlock\\n\\nNonce: ${nonce}\\nTimestamp: ${Date.now()}`;\n\n      // Request signature\n      const encodedMessage = new TextEncoder().encode(message);\n      const signedMessage = await provider.signMessage(encodedMessage, 'utf8');\n      const signature = Buffer.from(signedMessage.signature).toString('base64');\n\n      // Link wallet with signature verification\n      const csrf = await getCsrfToken();\n      const res = await fetch(`${API_URL}/api/wallet/link/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrf,\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          wallet_address: publicKey,\n          signature: signature,\n          message: message,\n        }),\n      });\n\n      if (!res.ok) {\n        const data = await res.json().catch(() => ({}));\n        const errorMsg = data.error || data.message || 'Failed to link wallet';\n\n        // Show more helpful error messages\n        console.error('Wallet link error:', data);\n        throw new Error(errorMsg);\n      }\n\n      setSuccess('External wallet connected!');\n      setActiveAction(null);\n      onWalletUpdate();\n    } catch (e: any) {\n      // Handle user rejection gracefully\n      if (e?.code === 4001 || e?.message?.includes('User rejected')) {\n        setError('Connection cancelled');\n      } else {\n        setError(e?.message || String(e));\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Action: Disconnect wallet\n  const disconnectWallet = async () => {\n    setError('');\n    setLoading(true);\n\n    try {\n      const csrf = await getCsrfToken();\n      const res = await fetch(`${API_URL}/api/wallet/link/`, {\n        method: 'DELETE',\n        headers: {\n          'X-CSRFToken': csrf,\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        credentials: 'include',\n      });\n\n      if (!res.ok) {\n        const text = await res.text();\n        throw new Error(text || 'Failed to disconnect wallet');\n      }\n\n      setSuccess('Wallet disconnected');\n      setActiveAction(null);\n      setShowManageMenu(false);\n      onWalletUpdate();\n    } catch (e: any) {\n      setError(e?.message || String(e));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Render: No wallet connected\n  if (!walletAddress) {\n    return (\n      <div style={{\n        background: 'var(--panel)',\n        border: '1px solid var(--panel-border)',\n        borderRadius: 12,\n        padding: 16,\n        marginBottom: 16,\n      }}>\n        <div style={{ fontWeight: 600, color: '#f1f5f9', fontSize: 16, marginBottom: 12, display: 'flex', alignItems: 'center', gap: 8 }}>\n          <Wallet size={20} /> Wallet Setup\n        </div>\n        <div style={{ fontSize: 13, color: '#94a3b8', marginBottom: 16 }}>\n          Connect a wallet to receive USDC payments and own NFTs.\n        </div>\n\n        {error && (\n          <div style={{\n            background: '#ef444420',\n            border: '1px solid #ef4444',\n            borderRadius: 8,\n            padding: 12,\n            color: '#fca5a5',\n            fontSize: 13,\n            marginBottom: 12,\n          }}>\n            {error}\n          </div>\n        )}\n\n        {success && (\n          <div style={{\n            background: '#10b98120',\n            border: '1px solid #10b981',\n            borderRadius: 8,\n            padding: 12,\n            color: '#6ee7b7',\n            fontSize: 13,\n            marginBottom: 12,\n          }}>\n            {success}\n          </div>\n        )}\n\n        <div style={{ display: 'flex', gap: 12, flexWrap: 'wrap', marginBottom: 16 }}>\n          <button\n            onClick={createWeb3AuthWallet}\n            disabled={loading}\n            style={{\n              background: loading ? '#6b7280' : 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n              border: 'none',\n              color: '#fff',\n              padding: '10px 20px',\n              borderRadius: 8,\n              fontWeight: 600,\n              cursor: loading ? 'not-allowed' : 'pointer',\n              fontSize: 14,\n              transition: 'all 0.2s',\n            }}\n            onMouseOver={(e) => {\n              if (!loading) e.currentTarget.style.transform = 'translateY(-2px)';\n            }}\n            onMouseOut={(e) => {\n              e.currentTarget.style.transform = 'translateY(0)';\n            }}\n          >\n            {loading ? (\n              <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                <Loader size={16} /> Creating...\n              </span>\n            ) : (\n              <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                <Globe size={16} /> Create Wallet with Web3Auth\n              </span>\n            )}\n          </button>\n\n          <button\n            onClick={connectExternalWallet}\n            disabled={loading}\n            style={{\n              background: 'transparent',\n              border: '1px solid #334155',\n              color: '#cbd5e1',\n              padding: '10px 20px',\n              borderRadius: 8,\n              fontWeight: 600,\n              cursor: loading ? 'not-allowed' : 'pointer',\n              fontSize: 14,\n              transition: 'all 0.2s',\n            }}\n            onMouseOver={(e) => {\n              if (!loading) {\n                e.currentTarget.style.borderColor = '#cbd5e1';\n                e.currentTarget.style.background = 'rgba(203, 213, 225, 0.05)';\n              }\n            }}\n            onMouseOut={(e) => {\n              e.currentTarget.style.borderColor = '#334155';\n              e.currentTarget.style.background = 'transparent';\n            }}\n          >\n            {loading ? (\n              <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                <Loader size={16} /> Connecting...\n              </span>\n            ) : (\n              <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                <Link size={16} /> Connect External Wallet\n              </span>\n            )}\n          </button>\n        </div>\n\n        <div style={{\n          fontSize: 12,\n          color: '#94a3b8',\n          padding: 12,\n          background: '#0b1220',\n          borderRadius: 8,\n          border: '1px solid #1f2937',\n        }}>\n          <div style={{ marginBottom: 6, fontWeight: 600, color: '#cbd5e1', display: 'flex', alignItems: 'center', gap: 6 }}>\n            <Info size={14} /> Web3Auth (Recommended)\n          </div>\n          <div>\n            Easiest option - create a wallet with Google/Discord. No browser extension needed.\n            Your wallet is non-custodial and secured by social login.\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Render: Wallet connected\n  const providerLabel = walletProvider === 'web3auth' ? 'Web3Auth' : 'External Wallet';\n  const providerIcon = walletProvider === 'web3auth' ? <Globe size={12} /> : <Link size={12} />;\n\n  return (\n    <div style={{\n      background: 'var(--panel)',\n      border: '1px solid #10b981',\n      borderRadius: 12,\n      padding: 16,\n      marginBottom: 16,\n      position: 'relative',\n    }}>\n      <div style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'flex-start',\n        marginBottom: 12,\n      }}>\n        <div style={{ flex: 1 }}>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 8,\n            marginBottom: 8,\n          }}>\n            <CheckCircle size={20} style={{ color: '#10b981' }} />\n            <span style={{ fontWeight: 600, color: '#f1f5f9', fontSize: 16 }}>\n              Wallet Connected\n            </span>\n            <span style={{\n              fontSize: 11,\n              color: '#6ee7b7',\n              background: '#10b98120',\n              padding: '2px 8px',\n              borderRadius: 12,\n              fontWeight: 600,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 4,\n            }}>\n              {providerIcon} {providerLabel}\n            </span>\n          </div>\n\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 8,\n            flexWrap: 'wrap',\n          }}>\n            <div style={{\n              fontSize: 14,\n              color: '#e5e7eb',\n              fontFamily: 'monospace',\n              background: '#0b1220',\n              padding: '6px 12px',\n              borderRadius: 6,\n              border: '1px solid #1f2937',\n            }}>\n              {shortenAddress(walletAddress)}\n            </div>\n\n            <button\n              onClick={copyAddress}\n              style={{\n                background: '#1f2937',\n                border: '1px solid #374151',\n                color: '#cbd5e1',\n                padding: '6px 12px',\n                borderRadius: 6,\n                fontSize: 12,\n                fontWeight: 600,\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.background = '#374151';\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.background = '#1f2937';\n              }}\n            >\n              <Copy size={14} style={{ marginRight: 4 }} /> Copy\n            </button>\n\n            <a\n              href={getExplorerLink(walletAddress)}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              style={{\n                background: '#1f2937',\n                border: '1px solid #374151',\n                color: '#cbd5e1',\n                padding: '6px 12px',\n                borderRadius: 6,\n                fontSize: 12,\n                fontWeight: 600,\n                textDecoration: 'none',\n                display: 'inline-block',\n                transition: 'all 0.2s',\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.background = '#374151';\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.background = '#1f2937';\n              }}\n            >\n              <ExternalLink size={14} style={{ marginRight: 4 }} /> Explorer\n            </a>\n\n            <div style={{ position: 'relative' }}>\n              <button\n                onClick={() => setShowManageMenu(!showManageMenu)}\n                style={{\n                  background: '#1f2937',\n                  border: '1px solid #374151',\n                  color: '#cbd5e1',\n                  padding: '6px 12px',\n                  borderRadius: 6,\n                  fontSize: 12,\n                  fontWeight: 600,\n                  cursor: 'pointer',\n                  transition: 'all 0.2s',\n                }}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.background = '#374151';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.background = '#1f2937';\n                }}\n              >\n                <span style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\n                  <Settings size={14} /> Manage {showManageMenu ? <ChevronUp size={14} /> : <ChevronDown size={14} />}\n                </span>\n              </button>\n\n              {showManageMenu && (\n                <div style={{\n                  position: 'absolute',\n                  top: '100%',\n                  right: 0,\n                  marginTop: 8,\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  padding: 8,\n                  minWidth: 220,\n                  zIndex: 100,\n                  boxShadow: '0 10px 25px rgba(0,0,0,0.5)',\n                }}>\n                  <button\n                    onClick={() => setActiveAction('switch')}\n                    style={{\n                      width: '100%',\n                      background: 'transparent',\n                      border: 'none',\n                      color: '#cbd5e1',\n                      padding: '8px 12px',\n                      borderRadius: 6,\n                      fontSize: 13,\n                      fontWeight: 500,\n                      cursor: 'pointer',\n                      textAlign: 'left',\n                      transition: 'all 0.2s',\n                    }}\n                    onMouseOver={(e) => {\n                      e.currentTarget.style.background = '#334155';\n                    }}\n                    onMouseOut={(e) => {\n                      e.currentTarget.style.background = 'transparent';\n                    }}\n                  >\n                    <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                      {walletProvider === 'web3auth' ? (\n                        <>\n                          <Link size={14} /> Switch to External Wallet\n                        </>\n                      ) : (\n                        <>\n                          <Globe size={14} /> Switch to Web3Auth\n                        </>\n                      )}\n                    </span>\n                  </button>\n\n                  <div style={{\n                    height: 1,\n                    background: '#334155',\n                    margin: '8px 0',\n                  }} />\n\n                  <button\n                    onClick={() => setActiveAction('disconnect')}\n                    style={{\n                      width: '100%',\n                      background: 'transparent',\n                      border: 'none',\n                      color: '#fca5a5',\n                      padding: '8px 12px',\n                      borderRadius: 6,\n                      fontSize: 13,\n                      fontWeight: 500,\n                      cursor: 'pointer',\n                      textAlign: 'left',\n                      transition: 'all 0.2s',\n                    }}\n                    onMouseOver={(e) => {\n                      e.currentTarget.style.background = '#ef444420';\n                    }}\n                    onMouseOut={(e) => {\n                      e.currentTarget.style.background = 'transparent';\n                    }}\n                  >\n                    <span style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                      <AlertTriangle size={14} /> Disconnect Wallet\n                    </span>\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {success && (\n        <div style={{\n          background: '#10b98120',\n          border: '1px solid #10b981',\n          borderRadius: 8,\n          padding: 12,\n          color: '#6ee7b7',\n          fontSize: 13,\n          marginTop: 12,\n        }}>\n          {success}\n        </div>\n      )}\n\n      {error && (\n        <div style={{\n          background: '#ef444420',\n          border: '1px solid #ef4444',\n          borderRadius: 8,\n          padding: 12,\n          color: '#fca5a5',\n          fontSize: 13,\n          marginTop: 12,\n        }}>\n          {error}\n        </div>\n      )}\n\n      <div style={{\n        fontSize: 12,\n        color: '#10b981',\n        marginTop: 8,\n        fontWeight: 600,\n        display: 'flex',\n        alignItems: 'center',\n        gap: 6,\n      }}>\n        <DollarSign size={14} /> Ready to receive USDC payments and own NFTs\n      </div>\n\n      {/* Switch Wallet Warning Modal */}\n      {activeAction === 'switch' && (\n        <div style={{\n          position: 'fixed',\n          inset: 0,\n          background: 'rgba(0,0,0,0.75)',\n          backdropFilter: 'blur(4px)',\n          display: 'grid',\n          placeItems: 'center',\n          zIndex: 2000,\n        }}>\n          <div style={{\n            background: '#1e293b',\n            border: '1px solid #334155',\n            borderRadius: 12,\n            padding: 24,\n            maxWidth: 500,\n            width: '90%',\n          }}>\n            <div style={{\n              fontSize: 18,\n              fontWeight: 700,\n              color: '#f59e0b',\n              marginBottom: 16,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8,\n            }}>\n              <AlertTriangle size={20} /> Switch Wallet?\n            </div>\n\n            <div style={{\n              fontSize: 14,\n              color: '#cbd5e1',\n              marginBottom: 16,\n              lineHeight: 1.6,\n            }}>\n              <p style={{ marginBottom: 12 }}>\n                Your existing NFTs will remain in your old wallet. You'll need to manually\n                transfer them if you want them in the new wallet.\n              </p>\n              <p style={{ marginBottom: 12 }}>\n                New purchases and payments will go to the new wallet address.\n              </p>\n              <div style={{\n                background: '#0b1220',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: 12,\n                fontSize: 12,\n                fontFamily: 'monospace',\n                marginTop: 12,\n              }}>\n                <div style={{ color: '#94a3b8', marginBottom: 4 }}>Current wallet:</div>\n                <div style={{ color: '#e5e7eb' }}>{walletAddress}</div>\n              </div>\n            </div>\n\n            {error && (\n              <div style={{\n                background: '#ef444420',\n                border: '1px solid #ef4444',\n                borderRadius: 8,\n                padding: 12,\n                color: '#fca5a5',\n                fontSize: 13,\n                marginBottom: 16,\n              }}>\n                {error}\n              </div>\n            )}\n\n            <div style={{ display: 'flex', gap: 12 }}>\n              <button\n                onClick={() => {\n                  setActiveAction(null);\n                  setError('');\n                }}\n                disabled={loading}\n                style={{\n                  flex: 1,\n                  background: 'transparent',\n                  border: '1px solid #475569',\n                  color: '#cbd5e1',\n                  padding: '10px 20px',\n                  borderRadius: 8,\n                  fontWeight: 600,\n                  cursor: loading ? 'not-allowed' : 'pointer',\n                  fontSize: 14,\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={() => {\n                  setActiveAction(null);\n                  setShowManageMenu(false);\n                  // Trigger the appropriate wallet connection flow\n                  if (walletProvider === 'web3auth') {\n                    connectExternalWallet();\n                  } else {\n                    createWeb3AuthWallet();\n                  }\n                }}\n                disabled={loading}\n                style={{\n                  flex: 1,\n                  background: loading ? '#6b7280' : 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                  border: 'none',\n                  color: '#fff',\n                  padding: '10px 20px',\n                  borderRadius: 8,\n                  fontWeight: 600,\n                  cursor: loading ? 'not-allowed' : 'pointer',\n                  fontSize: 14,\n                }}\n              >\n                {loading ? 'Processing...' : 'Continue'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Disconnect Wallet Warning Modal */}\n      {activeAction === 'disconnect' && (\n        <div style={{\n          position: 'fixed',\n          inset: 0,\n          background: 'rgba(0,0,0,0.75)',\n          backdropFilter: 'blur(4px)',\n          display: 'grid',\n          placeItems: 'center',\n          zIndex: 2000,\n        }}>\n          <div style={{\n            background: '#1e293b',\n            border: '2px solid #ef4444',\n            borderRadius: 12,\n            padding: 24,\n            maxWidth: 500,\n            width: '90%',\n          }}>\n            <div style={{\n              fontSize: 18,\n              fontWeight: 700,\n              color: '#ef4444',\n              marginBottom: 16,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8,\n            }}>\n              <AlertCircle size={20} /> Disconnect Wallet?\n            </div>\n\n            <div style={{\n              fontSize: 14,\n              color: '#cbd5e1',\n              marginBottom: 16,\n              lineHeight: 1.6,\n            }}>\n              <p style={{ marginBottom: 12, fontWeight: 600, color: '#fca5a5' }}>\n                Warning: Without a wallet you CANNOT:\n              </p>\n              <ul style={{ paddingLeft: 20, marginBottom: 12 }}>\n                <li>Receive USDC payments from new sales</li>\n                <li>Receive purchased NFTs</li>\n                <li>Purchase content on RenaissBlock</li>\n                <li>Mint new content</li>\n              </ul>\n              <p style={{ marginBottom: 12 }}>\n                Your library of owned NFTs will disappear until you reconnect a wallet.\n              </p>\n              <div style={{\n                background: '#0b1220',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: 12,\n                fontSize: 12,\n                fontFamily: 'monospace',\n                marginTop: 12,\n              }}>\n                <div style={{ color: '#94a3b8', marginBottom: 4 }}>Your NFTs will remain in:</div>\n                <div style={{ color: '#e5e7eb' }}>{walletAddress}</div>\n              </div>\n            </div>\n\n            {error && (\n              <div style={{\n                background: '#ef444420',\n                border: '1px solid #ef4444',\n                borderRadius: 8,\n                padding: 12,\n                color: '#fca5a5',\n                fontSize: 13,\n                marginBottom: 16,\n              }}>\n                {error}\n              </div>\n            )}\n\n            <div style={{ display: 'flex', gap: 12 }}>\n              <button\n                onClick={() => {\n                  setActiveAction(null);\n                  setError('');\n                }}\n                disabled={loading}\n                style={{\n                  flex: 1,\n                  background: 'transparent',\n                  border: '1px solid #475569',\n                  color: '#cbd5e1',\n                  padding: '10px 20px',\n                  borderRadius: 8,\n                  fontWeight: 600,\n                  cursor: loading ? 'not-allowed' : 'pointer',\n                  fontSize: 14,\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={disconnectWallet}\n                disabled={loading}\n                style={{\n                  flex: 1,\n                  background: loading ? '#6b7280' : '#ef4444',\n                  border: 'none',\n                  color: '#fff',\n                  padding: '10px 20px',\n                  borderRadius: 8,\n                  fontWeight: 600,\n                  cursor: loading ? 'not-allowed' : 'pointer',\n                  fontSize: 14,\n                }}\n              >\n                {loading ? 'Disconnecting...' : 'Yes, Disconnect'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport PreviewModal from '../components/PreviewModal';\nimport { WalletManagementPanel } from '../components/WalletManagementPanel';\nimport { InviteResponseModal } from '../components/collaboration/InviteResponseModal';\nimport { collaborationApi, CollaborativeProject, CollaboratorRole } from '../services/collaborationApi';\nimport { API_URL } from '../config';\nimport {\n  MapPin, Wallet, CheckCircle, BookOpen, Users,\n  BarChart3, FileText, Eye, DollarSign, Palette, Film, Music, X,\n  Check, XCircle, Plus, Trash2, ExternalLink, Edit2, Briefcase,\n  ChevronDown, ChevronUp, TrendingUp, Clock, UserCheck, Loader2\n} from 'lucide-react';\nimport { getFollowing, unfollowUser, FollowUser } from '../services/socialApi';\n\ninterface ExternalPortfolioItem {\n  id: number;\n  title: string;\n  description: string;\n  image: string | null;\n  image_url: string | null;\n  external_url: string;\n  project_type: string;\n  role: string;\n  created_date: string | null;\n  order: number;\n}\n\ntype UserStatus = { user_id: number; username: string; wallet_address?: string } | null;\ntype UserProfile = {\n  id: number;\n  username: string;\n  display_name: string;\n  wallet_address?: string;\n  wallet_provider?: 'web3auth' | 'external' | null;\n  avatar?: string;\n  avatar_url?: string;\n  banner?: string;\n  banner_url?: string;\n  location?: string;\n  roles?: string[];\n  genres?: string[];\n  status?: string;\n  bio?: string;\n};\ntype Dashboard = { content_count: number; sales: number; tier?: string; fee?: number };\n\n// Sales analytics types\ntype SalesSummary = {\n  total_earnings_usdc: number;\n  solo_earnings: number;\n  collaboration_earnings: number;\n  content_count: number;\n  collaboration_count: number;\n  total_sales: number;\n};\n// Transaction within a content sale\ntype SaleTransaction = {\n  id: number;\n  buyer: string;\n  amount: number;\n  percentage: number;\n  date: string;\n  tx_signature: string | null;\n};\n\ntype ContentSale = {\n  id: string;\n  title: string;\n  content_type: string;\n  price: number;\n  editions_remaining: number;\n  role: string;\n  percentage: number;\n  total_earnings: number;\n  sales_count: number;\n  is_collaborative: boolean;\n  transactions: SaleTransaction[];\n};\n\n// CollabSale now has same structure as ContentSale\ntype CollabSale = ContentSale;\n\ntype RecentTransaction = {\n  id: string | number;\n  type: 'collaboration' | 'solo';\n  title: string;\n  buyer: string;\n  amount: number;\n  role: string;\n  percentage: number;\n  date: string;\n  tx_signature: string | null;\n};\ntype SalesAnalytics = {\n  summary: SalesSummary;\n  content_sales: ContentSale[];\n  collaboration_sales: CollabSale[];\n  recent_transactions: RecentTransaction[];\n};\n\ntype TabType = 'content' | 'collaborations' | 'portfolio' | 'analytics' | 'following';\ntype ContentFilterType = 'all' | 'book' | 'art' | 'music' | 'film';\ntype StatusFilterType = 'all' | 'published' | 'draft';\n\n// Book project with chapters (from /api/book-projects/my-published/)\ninterface BookChapter {\n  id: number;\n  title: string;\n  order: number;\n  is_published: boolean;\n  content_id: number | null;\n  price_usd: number;\n  view_count: number;\n}\n\ninterface BookProject {\n  id: number;\n  title: string;\n  cover_image_url: string | null;\n  total_chapters: number;\n  published_chapters: number;\n  is_published: boolean;\n  chapters: BookChapter[];\n  total_views: number;\n  total_price: number;\n  updated_at: string;\n}\n\nexport default function ProfilePageRedesigned() {\n  const navigate = useNavigate();\n  const [user, setUser] = useState<UserStatus>(null);\n  const [content, setContent] = useState<any[]>([]);\n  const [status, setStatus] = useState('');\n  const [dash, setDash] = useState<Dashboard>({ content_count: 0, sales: 0 });\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [csrf, setCsrf] = useState('');\n  const avatarInputRef = useRef<HTMLInputElement | null>(null);\n  const bannerInputRef = useRef<HTMLInputElement | null>(null);\n  const [showWalletModal, setShowWalletModal] = useState(false);\n\n  // About section editing state\n  const [editingAbout, setEditingAbout] = useState(false);\n  const [editBio, setEditBio] = useState('');\n  const [editDisplayName, setEditDisplayName] = useState('');\n  const [editLocation, setEditLocation] = useState('');\n  const [editStatus, setEditStatus] = useState('');\n  const [savingAbout, setSavingAbout] = useState(false);\n\n  // External portfolio state\n  const [externalPortfolio, setExternalPortfolio] = useState<ExternalPortfolioItem[]>([]);\n  const [portfolioModalOpen, setPortfolioModalOpen] = useState(false);\n  const [editingPortfolioItem, setEditingPortfolioItem] = useState<ExternalPortfolioItem | null>(null);\n  const [activeTab, setActiveTab] = useState<TabType>('content');\n  const [contentFilter, setContentFilter] = useState<ContentFilterType>('all');\n  const [statusFilter, setStatusFilter] = useState<StatusFilterType>('all');\n  const [inventory, setInventory] = useState<any[]>([]);\n  const [bookProjects, setBookProjects] = useState<BookProject[]>([]);\n  const [expandedBooks, setExpandedBooks] = useState<Set<number>>(new Set());\n  const [showPreview, setShowPreview] = useState(false);\n  const [previewItem, setPreviewItem] = useState<any>(null);\n\n  // Collaboration invite state\n  const [pendingInvites, setPendingInvites] = useState<{ project: CollaborativeProject; invite: CollaboratorRole }[]>([]);\n  const [selectedInviteProjectId, setSelectedInviteProjectId] = useState<number | null>(null);\n  // Active collaborations state\n  const [collaborations, setCollaborations] = useState<any[]>([]);\n  const [collaborationsLoading, setCollaborationsLoading] = useState(false);\n  // Processing state for accept/decline buttons\n  const [processingInvites, setProcessingInvites] = useState<Set<number>>(new Set());\n\n  // Sales analytics state\n  const [salesAnalytics, setSalesAnalytics] = useState<SalesAnalytics | null>(null);\n  const [analyticsLoading, setAnalyticsLoading] = useState(false);\n  const [expandedAnalyticsCards, setExpandedAnalyticsCards] = useState<Set<string>>(new Set());\n\n  // Following state\n  const [followingList, setFollowingList] = useState<FollowUser[]>([]);\n  const [followingLoading, setFollowingLoading] = useState(false);\n  const [unfollowingUsers, setUnfollowingUsers] = useState<Set<number>>(new Set());\n\n  // Toggle expanded state for an analytics card\n  const toggleAnalyticsCard = (cardId: string) => {\n    setExpandedAnalyticsCards(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(cardId)) {\n        newSet.delete(cardId);\n      } else {\n        newSet.add(cardId);\n      }\n      return newSet;\n    });\n  };\n\n  async function refreshStatus() {\n    const d = await fetch(`${API_URL}/api/auth/status/`, { credentials: 'include' }).then(r => r.json());\n    setUser(d);\n  }\n\n  async function refreshCsrf() {\n    const r = await fetch(`${API_URL}/api/auth/csrf/`, { credentials: 'include' });\n    const j = await r.json();\n    const token = j?.csrfToken || '';\n    setCsrf(token);\n    return token;\n  }\n\n  async function loadPendingInvites() {\n    try {\n      const invites = await collaborationApi.getPendingInvites();\n      setPendingInvites(invites);\n    } catch (err) {\n      console.error('Failed to load pending invites:', err);\n      setPendingInvites([]);\n    }\n  }\n\n  async function loadCollaborations() {\n    setCollaborationsLoading(true);\n    try {\n      const projects = await collaborationApi.getCollaborativeProjects();\n      setCollaborations(projects);\n    } catch (err) {\n      console.error('Failed to load collaborations:', err);\n      setCollaborations([]);\n    } finally {\n      setCollaborationsLoading(false);\n    }\n  }\n\n  async function loadExternalPortfolio() {\n    try {\n      const res = await fetch(`${API_URL}/api/portfolio/`, { credentials: 'include' });\n      if (res.ok) {\n        const data = await res.json();\n        setExternalPortfolio(data);\n      }\n    } catch (err) {\n      console.error('Failed to load external portfolio:', err);\n    }\n  }\n\n  async function loadSalesAnalytics() {\n    setAnalyticsLoading(true);\n    try {\n      const res = await fetch(`${API_URL}/api/sales-analytics/`, { credentials: 'include' });\n      if (res.ok) {\n        const data = await res.json();\n        setSalesAnalytics(data);\n      }\n    } catch (err) {\n      console.error('Failed to load sales analytics:', err);\n    } finally {\n      setAnalyticsLoading(false);\n    }\n  }\n\n  async function loadFollowingList(usernameOverride?: string) {\n    const username = usernameOverride || profile?.username;\n    if (!username) return;\n    setFollowingLoading(true);\n    try {\n      const response = await getFollowing(username);\n      setFollowingList(response.results);\n    } catch (err) {\n      console.error('Failed to load following list:', err);\n      setFollowingList([]);\n    } finally {\n      setFollowingLoading(false);\n    }\n  }\n\n  async function handleUnfollow(username: string, userId: number) {\n    setUnfollowingUsers(prev => new Set(prev).add(userId));\n    try {\n      await unfollowUser(username);\n      // Remove from the list\n      setFollowingList(prev => prev.filter(u => u.id !== userId));\n      setStatus(`Unfollowed @${username}`);\n    } catch (err) {\n      console.error('Failed to unfollow:', err);\n      setStatus('Failed to unfollow');\n    } finally {\n      setUnfollowingUsers(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(userId);\n        return newSet;\n      });\n    }\n  }\n\n  async function deletePortfolioItem(id: number) {\n    const token = csrf || await refreshCsrf();\n    try {\n      const res = await fetch(`${API_URL}/api/portfolio/${id}/`, {\n        method: 'DELETE',\n        headers: { 'X-CSRFToken': token, 'X-Requested-With': 'XMLHttpRequest' },\n        credentials: 'include'\n      });\n      if (res.ok) {\n        setExternalPortfolio(prev => prev.filter(item => item.id !== id));\n        setStatus('Portfolio item deleted');\n      }\n    } catch (err) {\n      console.error('Failed to delete portfolio item:', err);\n      setStatus('Failed to delete item');\n    }\n  }\n\n  async function savePortfolioItem(item: Partial<ExternalPortfolioItem>) {\n    const token = csrf || await refreshCsrf();\n    const isEdit = !!editingPortfolioItem;\n    const url = isEdit\n      ? `${API_URL}/api/portfolio/${editingPortfolioItem!.id}/`\n      : `${API_URL}/api/portfolio/`;\n\n    try {\n      const res = await fetch(url, {\n        method: isEdit ? 'PATCH' : 'POST',\n        headers: {\n          'X-CSRFToken': token,\n          'X-Requested-With': 'XMLHttpRequest',\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify(item)\n      });\n      if (res.ok) {\n        await loadExternalPortfolio();\n        setPortfolioModalOpen(false);\n        setEditingPortfolioItem(null);\n        setStatus(isEdit ? 'Portfolio item updated' : 'Portfolio item added');\n      }\n    } catch (err) {\n      console.error('Failed to save portfolio item:', err);\n      setStatus('Failed to save item');\n    }\n  }\n\n  // Accept invitation handler\n  async function handleAcceptInvite(projectId: number, e: React.MouseEvent) {\n    e.stopPropagation();\n    setProcessingInvites(prev => new Set(prev).add(projectId));\n    try {\n      await collaborationApi.acceptInvitation(projectId);\n      setStatus('Invitation accepted!');\n      // Refresh both lists\n      await Promise.all([loadPendingInvites(), loadCollaborations()]);\n    } catch (err: any) {\n      console.error('Failed to accept invitation:', err);\n      setStatus(`Failed to accept: ${err.message || 'Unknown error'}`);\n    } finally {\n      setProcessingInvites(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(projectId);\n        return newSet;\n      });\n    }\n  }\n\n  // Decline invitation handler\n  async function handleDeclineInvite(projectId: number, e: React.MouseEvent) {\n    e.stopPropagation();\n    setProcessingInvites(prev => new Set(prev).add(projectId));\n    try {\n      await collaborationApi.declineInvitation(projectId);\n      setStatus('Invitation declined');\n      // Refresh both lists\n      await Promise.all([loadPendingInvites(), loadCollaborations()]);\n    } catch (err: any) {\n      console.error('Failed to decline invitation:', err);\n      setStatus(`Failed to decline: ${err.message || 'Unknown error'}`);\n    } finally {\n      setProcessingInvites(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(projectId);\n        return newSet;\n      });\n    }\n  }\n\n  // Helper function to get content type icon\n  function getContentTypeIcon(contentType: string, size: number = 24) {\n    switch (contentType) {\n      case 'book':\n        return <BookOpen size={size} />;\n      case 'music':\n        return <Music size={size} />;\n      case 'video':\n        return <Film size={size} />;\n      case 'art':\n      default:\n        return <Palette size={size} />;\n    }\n  }\n\n  useEffect(() => {\n    const abortController = new AbortController();\n    const signal = abortController.signal;\n\n    Promise.all([\n      fetch(`${API_URL}/api/auth/status/`, { credentials: 'include', signal }).then(r => r.json()),\n      fetch(`${API_URL}/api/content/`, { credentials: 'include', signal }).then(r => r.json()),\n      fetch(`${API_URL}/api/auth/csrf/`, { credentials: 'include', signal }).then(r => r.json()),\n      fetch(`${API_URL}/api/users/profile/`, { credentials: 'include', signal }).then(r => r.ok ? r.json() : null),\n      fetch(`${API_URL}/api/dashboard/`, { credentials: 'include', signal }).then(r => r.ok ? r.json() : { content_count: 0, sales: 0 }),\n    ])\n      .then(([userResp, contentResp, csrfResp, profileResp, dashResp]) => {\n        setUser(userResp);\n        if (Array.isArray(contentResp.results)) setContent(contentResp.results);\n        else if (Array.isArray(contentResp)) setContent(contentResp);\n        setCsrf(csrfResp?.csrfToken || '');\n        setProfile(profileResp);\n        setDash(dashResp);\n\n        // Load pending collaboration invites, active collaborations, external portfolio, analytics, and following\n        loadPendingInvites();\n        loadCollaborations();\n        loadExternalPortfolio();\n        loadSalesAnalytics();\n        // Pass username directly since profile state won't be updated yet\n        if (profileResp?.username) {\n          loadFollowingList(profileResp.username);\n        }\n      })\n      .catch(() => { });\n\n    return () => abortController.abort();\n  }, []);\n\n  useEffect(() => {\n    // Fetch all user content (both draft and minted) - books are handled separately\n    fetch(`${API_URL}/api/content/?mine=1`, { credentials: 'include' })\n      .then(r => r.ok ? r.json() : [])\n      .then(data => {\n        let items: any[] = [];\n        if (data && Array.isArray(data.results)) {\n          items = data.results;\n        } else if (Array.isArray(data)) {\n          items = data;\n        }\n        // Filter out solo book content - these are fetched separately as book projects\n        // BUT keep collaborative book content (is_collaborative=true) since those aren't in bookProjects\n        setInventory(items.filter(item => item.content_type !== 'book' || item.is_collaborative));\n      })\n      .catch(() => setInventory([]));\n\n    // Fetch published book projects (grouped by book, not individual chapters)\n    fetch(`${API_URL}/api/book-projects/my-published/`, { credentials: 'include' })\n      .then(r => r.ok ? r.json() : [])\n      .then(data => {\n        if (Array.isArray(data)) {\n          setBookProjects(data);\n        } else {\n          setBookProjects([]);\n        }\n      })\n      .catch(() => setBookProjects([]));\n  }, [status]);\n\n  const onAvatarClick = () => {\n    avatarInputRef.current?.click();\n  };\n\n  const onAvatarSelected: React.ChangeEventHandler<HTMLInputElement> = async (e) => {\n    const file = e.target.files && e.target.files[0];\n    if (!file) return;\n    const token = csrf || await refreshCsrf();\n    const fd = new FormData();\n    fd.append('avatar', file);\n    const res = await fetch(`${API_URL}/api/users/profile/`, {\n      method: 'PATCH',\n      headers: { 'X-CSRFToken': token, 'X-Requested-With': 'XMLHttpRequest' },\n      credentials: 'include',\n      body: fd,\n    });\n    if (res.ok) {\n      setStatus('Avatar updated');\n      await refreshStatus();\n      const profileResp = await fetch(`${API_URL}/api/users/profile/`, { credentials: 'include' });\n      if (profileResp.ok) setProfile(await profileResp.json());\n    } else {\n      setStatus(`Failed: ${await res.text()}`);\n    }\n    e.target.value = '';\n  };\n\n  const onBannerClick = () => {\n    bannerInputRef.current?.click();\n  };\n\n  const onBannerSelected: React.ChangeEventHandler<HTMLInputElement> = async (e) => {\n    const file = e.target.files && e.target.files[0];\n    if (!file) return;\n    const token = csrf || await refreshCsrf();\n    const fd = new FormData();\n    fd.append('banner', file);\n    const res = await fetch(`${API_URL}/api/users/profile/`, {\n      method: 'PATCH',\n      headers: { 'X-CSRFToken': token, 'X-Requested-With': 'XMLHttpRequest' },\n      credentials: 'include',\n      body: fd,\n    });\n    if (res.ok) {\n      setStatus('Banner updated');\n      const profileResp = await fetch(`${API_URL}/api/users/profile/`, { credentials: 'include' });\n      if (profileResp.ok) setProfile(await profileResp.json());\n    } else {\n      setStatus(`Failed: ${await res.text()}`);\n    }\n    e.target.value = '';\n  };\n\n  const openReader = (contentId: number) => {\n    // Owner viewing their own content - go directly to reader (full access)\n    navigate(`/reader/${contentId}`);\n  };\n\n  const shortenAddress = (addr: string) => {\n    if (!addr || addr.length < 12) return addr;\n    return `${addr.slice(0, 4)}...${addr.slice(-4)}`;\n  };\n\n  // About section editing handlers\n  const startEditingAbout = () => {\n    setEditBio(profile?.bio || '');\n    setEditDisplayName(profile?.display_name || '');\n    setEditLocation(profile?.location || '');\n    setEditStatus(profile?.status || 'Available');\n    setEditingAbout(true);\n  };\n\n  const cancelEditingAbout = () => {\n    setEditingAbout(false);\n  };\n\n  const saveAbout = async () => {\n    setSavingAbout(true);\n    try {\n      const res = await fetch(`${API_URL}/api/users/profile/`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrf,\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          bio: editBio,\n          display_name: editDisplayName,\n          location: editLocation,\n          status: editStatus,\n        }),\n      });\n\n      if (res.ok) {\n        const updatedProfile = await res.json();\n        setProfile(updatedProfile);\n        setEditingAbout(false);\n        setStatus('Profile updated');\n      } else {\n        setStatus('Failed to save profile');\n      }\n    } catch (e) {\n      console.error('Save failed:', e);\n      setStatus('Failed to save profile');\n    } finally {\n      setSavingAbout(false);\n    }\n  };\n\n  // Availability status options\n  const statusOptions = [\n    { value: 'Available', label: 'Available', description: 'Ready to start new collaborations' },\n    { value: 'Open to Offers', label: 'Open to Offers', description: 'Will consider interesting projects' },\n    { value: 'Selective', label: 'Selective', description: 'Only taking specific types of work' },\n    { value: 'Booked', label: 'Booked', description: 'Currently busy, booking future work' },\n    { value: 'Unavailable', label: 'Unavailable', description: 'Not accepting collaborations' },\n    { value: 'On Hiatus', label: 'On Hiatus', description: 'Taking a break' },\n  ];\n\n  return (\n    <div style={{\n      maxWidth: 1200,\n      margin: '0 auto',\n      padding: '40px 24px',\n    }}>\n      {/* Hidden file inputs for avatar and banner */}\n      <input ref={avatarInputRef} onChange={onAvatarSelected} type=\"file\" accept=\"image/jpeg,image/png,image/webp\" style={{ display: 'none' }} />\n      <input ref={bannerInputRef} onChange={onBannerSelected} type=\"file\" accept=\"image/jpeg,image/png,image/webp\" style={{ display: 'none' }} />\n\n      {/* HERO SECTION */}\n      <div\n        onClick={onBannerClick}\n        style={{\n          background: (profile?.banner || profile?.banner_url)\n            ? `linear-gradient(rgba(15,23,42,0.7), rgba(15,23,42,0.9)), url(${profile?.banner || profile?.banner_url}) center/cover`\n            : '#0f172a',\n          border: '1px solid #1e293b',\n          borderRadius: 16,\n          padding: 32,\n          marginBottom: 24,\n          position: 'relative',\n          cursor: 'pointer',\n        }}\n        title=\"Click to update banner\"\n      >\n        {/* Top Right Buttons */}\n        <div style={{\n          position: 'absolute',\n          top: 24,\n          right: 24,\n          display: 'flex',\n          gap: 8,\n        }}>\n          {/* View Public Profile Button */}\n          <Link\n            to={`/profile/${profile?.username || user?.username}`}\n            onClick={(e) => e.stopPropagation()}\n            style={{\n              background: 'rgba(245,158,11,0.15)',\n              border: '1px solid rgba(245,158,11,0.3)',\n              color: '#f59e0b',\n              height: 40,\n              padding: '0 14px',\n              borderRadius: 8,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 6,\n              cursor: 'pointer',\n              textDecoration: 'none',\n              fontSize: 13,\n              fontWeight: 600,\n              transition: 'all 0.2s',\n            }}\n          >\n            <Eye size={18} />\n            View Public Profile\n          </Link>\n        </div>\n\n        {/* Avatar + User Info */}\n        <div style={{ display: 'flex', gap: 24, alignItems: 'flex-start', marginBottom: 16 }}>\n          <div\n            onClick={(e) => { e.stopPropagation(); onAvatarClick(); }}\n            style={{\n              width: 100,\n              height: 100,\n              borderRadius: '50%',\n              overflow: 'hidden',\n              cursor: 'pointer',\n              border: '3px solid #1e293b',\n              flexShrink: 0,\n              transition: 'all 0.2s',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              background: '#1e293b',\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.borderColor = '#f59e0b';\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.borderColor = '#1e293b';\n            }}\n            title=\"Click to upload avatar\"\n          >\n            {(profile?.avatar || profile?.avatar_url) ? (\n              <img\n                src={profile?.avatar || profile?.avatar_url}\n                alt={profile?.display_name || user?.username || 'Avatar'}\n                style={{\n                  width: '100%',\n                  height: '100%',\n                  objectFit: 'cover',\n                }}\n              />\n            ) : (\n              <span style={{ color: '#f59e0b', fontWeight: 700, fontSize: 40 }}>\n                {(user?.username || '?').slice(0, 1).toUpperCase()}\n              </span>\n            )}\n          </div>\n\n          <div style={{ flex: 1 }}>\n            <div style={{\n              fontSize: 32,\n              fontWeight: 700,\n              color: '#f8fafc',\n              marginBottom: 8,\n            }}>\n              {profile?.display_name || user?.username || 'User'}\n            </div>\n\n            {profile?.location && (\n              <div style={{\n                fontSize: 15,\n                color: '#94a3b8',\n                marginBottom: 8,\n                display: 'flex',\n                alignItems: 'center',\n                gap: 6,\n              }}>\n                <MapPin size={16} /> {profile.location}\n              </div>\n            )}\n\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: 12,\n              fontSize: 14,\n              color: '#cbd5e1',\n            }}>\n              {profile?.status && (\n                <>\n                  <span style={{\n                    display: 'inline-flex',\n                    alignItems: 'center',\n                    gap: 6,\n                  }}>\n                    <span style={{ color: '#10b981', fontSize: 12 }}></span>\n                    {profile.status}\n                  </span>\n                  <span style={{ color: '#475569' }}></span>\n                </>\n              )}\n              <span style={{ color: '#94a3b8' }}>@{profile?.username || user?.username || ''}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* WALLET STATUS CARD - Compact */}\n      <div style={{\n        background: profile?.wallet_address ? '#0f172a' : '#1e293b',\n        border: profile?.wallet_address ? '1px solid #10b981' : '1px solid #334155',\n        borderRadius: 12,\n        padding: '16px 20px',\n        marginBottom: 24,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n      }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n          <div style={{ color: profile?.wallet_address ? '#10b981' : '#94a3b8' }}>\n            {profile?.wallet_address ? <CheckCircle size={24} /> : <Wallet size={24} />}\n          </div>\n          <div>\n            <div style={{\n              fontSize: 14,\n              fontWeight: 600,\n              color: '#f8fafc',\n              marginBottom: profile?.wallet_address ? 4 : 0,\n            }}>\n              {profile?.wallet_address ? 'Wallet Connected' : 'Wallet Setup Required'}\n            </div>\n            {profile?.wallet_address && (\n              <div style={{\n                fontSize: 13,\n                color: '#94a3b8',\n                fontFamily: 'monospace',\n              }}>\n                {shortenAddress(profile.wallet_address)}\n              </div>\n            )}\n          </div>\n        </div>\n\n        <button\n          onClick={() => setShowWalletModal(true)}\n          style={{\n            background: profile?.wallet_address ? 'transparent' : 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n            border: profile?.wallet_address ? '1px solid #334155' : 'none',\n            color: '#fff',\n            padding: '8px 16px',\n            borderRadius: 8,\n            fontSize: 13,\n            fontWeight: 600,\n            cursor: 'pointer',\n            transition: 'all 0.2s',\n          }}\n          onMouseEnter={(e) => {\n            if (profile?.wallet_address) {\n              e.currentTarget.style.background = '#1e293b';\n              e.currentTarget.style.borderColor = '#475569';\n            } else {\n              e.currentTarget.style.transform = 'translateY(-2px)';\n            }\n          }}\n          onMouseLeave={(e) => {\n            if (profile?.wallet_address) {\n              e.currentTarget.style.background = 'transparent';\n              e.currentTarget.style.borderColor = '#334155';\n            } else {\n              e.currentTarget.style.transform = 'translateY(0)';\n            }\n          }}\n        >\n          {profile?.wallet_address ? 'Manage' : 'Connect Wallet'}\n        </button>\n      </div>\n\n      {/* ABOUT SECTION */}\n      <div style={{\n        background: '#0f172a',\n        border: '1px solid #1e293b',\n        borderRadius: 16,\n        padding: 24,\n        marginBottom: 24,\n      }}>\n        <div style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: 20,\n        }}>\n          <h3 style={{ fontSize: 18, fontWeight: 700, color: '#f8fafc', margin: 0 }}>\n            About\n          </h3>\n          {!editingAbout ? (\n            <button\n              onClick={startEditingAbout}\n              style={{\n                background: 'transparent',\n                border: '1px solid #334155',\n                color: '#94a3b8',\n                padding: '6px 12px',\n                borderRadius: 6,\n                fontSize: 13,\n                fontWeight: 500,\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                gap: 6,\n                transition: 'all 0.2s',\n              }}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.borderColor = '#f59e0b';\n                e.currentTarget.style.color = '#f59e0b';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.borderColor = '#334155';\n                e.currentTarget.style.color = '#94a3b8';\n              }}\n            >\n              <Edit2 size={14} />\n              Edit\n            </button>\n          ) : (\n            <div style={{ display: 'flex', gap: 8 }}>\n              <button\n                onClick={cancelEditingAbout}\n                disabled={savingAbout}\n                style={{\n                  background: 'transparent',\n                  border: '1px solid #334155',\n                  color: '#94a3b8',\n                  padding: '6px 12px',\n                  borderRadius: 6,\n                  fontSize: 13,\n                  fontWeight: 500,\n                  cursor: savingAbout ? 'not-allowed' : 'pointer',\n                  opacity: savingAbout ? 0.5 : 1,\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={saveAbout}\n                disabled={savingAbout}\n                style={{\n                  background: savingAbout ? '#6b7280' : 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                  border: 'none',\n                  color: '#fff',\n                  padding: '6px 16px',\n                  borderRadius: 6,\n                  fontSize: 13,\n                  fontWeight: 600,\n                  cursor: savingAbout ? 'not-allowed' : 'pointer',\n                }}\n              >\n                {savingAbout ? 'Saving...' : 'Save'}\n              </button>\n            </div>\n          )}\n        </div>\n\n        {editingAbout ? (\n          /* Edit Mode */\n          <div style={{ display: 'grid', gap: 20 }}>\n            {/* Display Name */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: 13,\n                fontWeight: 600,\n                color: '#cbd5e1',\n                marginBottom: 8,\n              }}>\n                Display Name\n              </label>\n              <input\n                type=\"text\"\n                value={editDisplayName}\n                onChange={(e) => setEditDisplayName(e.target.value)}\n                placeholder=\"Your display name\"\n                style={{\n                  width: '100%',\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  padding: '10px 14px',\n                  color: '#f8fafc',\n                  fontSize: 14,\n                }}\n              />\n            </div>\n\n            {/* Location */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: 13,\n                fontWeight: 600,\n                color: '#cbd5e1',\n                marginBottom: 8,\n              }}>\n                Location\n              </label>\n              <input\n                type=\"text\"\n                value={editLocation}\n                onChange={(e) => setEditLocation(e.target.value)}\n                placeholder=\"e.g., New York, NY\"\n                style={{\n                  width: '100%',\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  padding: '10px 14px',\n                  color: '#f8fafc',\n                  fontSize: 14,\n                }}\n              />\n            </div>\n\n            {/* Availability Status */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: 13,\n                fontWeight: 600,\n                color: '#cbd5e1',\n                marginBottom: 8,\n              }}>\n                Availability Status\n              </label>\n              <select\n                value={editStatus}\n                onChange={(e) => setEditStatus(e.target.value)}\n                style={{\n                  width: '100%',\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  padding: '10px 14px',\n                  color: '#f8fafc',\n                  fontSize: 14,\n                }}\n              >\n                {statusOptions.map((opt) => (\n                  <option key={opt.value} value={opt.value}>{opt.label}</option>\n                ))}\n              </select>\n            </div>\n\n            {/* Bio */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: 13,\n                fontWeight: 600,\n                color: '#cbd5e1',\n                marginBottom: 8,\n              }}>\n                Bio\n              </label>\n              <textarea\n                value={editBio}\n                onChange={(e) => setEditBio(e.target.value)}\n                placeholder=\"Tell the world about yourself, your work, and what you're looking for...\"\n                rows={4}\n                style={{\n                  width: '100%',\n                  background: '#1e293b',\n                  border: '1px solid #334155',\n                  borderRadius: 8,\n                  padding: '10px 14px',\n                  color: '#f8fafc',\n                  fontSize: 14,\n                  resize: 'vertical',\n                  minHeight: 100,\n                  lineHeight: 1.6,\n                }}\n              />\n              <div style={{ fontSize: 12, color: '#64748b', marginTop: 6 }}>\n                Describe your experience, interests, and what kind of collaborations you're seeking.\n              </div>\n            </div>\n          </div>\n        ) : (\n          /* View Mode */\n          <div>\n            {/* Bio */}\n            {profile?.bio ? (\n              <p style={{\n                color: '#cbd5e1',\n                fontSize: 15,\n                lineHeight: 1.7,\n                margin: 0,\n                whiteSpace: 'pre-wrap',\n              }}>\n                {profile.bio}\n              </p>\n            ) : (\n              <p style={{\n                color: '#64748b',\n                fontSize: 14,\n                fontStyle: 'italic',\n                margin: 0,\n              }}>\n                No bio yet. Click Edit to add a bio and tell others about yourself.\n              </p>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* PENDING COLLABORATION INVITES */}\n      {pendingInvites.length > 0 && (\n        <div style={{\n          background: '#0f172a',\n          border: '1px solid #f59e0b40',\n          borderRadius: 16,\n          padding: 24,\n          marginBottom: 24,\n        }}>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 12,\n            marginBottom: 20,\n          }}>\n            <span style={{\n              background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n              padding: '6px 14px',\n              borderRadius: 8,\n              fontSize: 14,\n              fontWeight: 700,\n              color: '#000',\n            }}>\n              {pendingInvites.length}\n            </span>\n            <span style={{ fontSize: 18, fontWeight: 700, color: '#f8fafc' }}>\n              Collaboration Invites\n            </span>\n          </div>\n\n          <div style={{ display: 'grid', gap: 16 }}>\n            {pendingInvites.map(({ project, invite }) => {\n              const isProcessing = processingInvites.has(project.id);\n              return (\n              <div key={project.id} style={{\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 12,\n                padding: 20,\n                opacity: isProcessing ? 0.7 : 1,\n                transition: 'all 0.2s',\n              }}>\n                <div style={{ display: 'flex', alignItems: 'flex-start', gap: 16 }}>\n                  {/* Project Type Icon */}\n                  <div style={{\n                    width: 56,\n                    height: 56,\n                    borderRadius: 12,\n                    background: '#f59e0b20',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    color: '#f59e0b',\n                    flexShrink: 0,\n                  }}>\n                    {getContentTypeIcon(project.content_type, 28)}\n                  </div>\n\n                  {/* Invite Details */}\n                  <div style={{ flex: 1, minWidth: 0 }}>\n                    <div style={{ fontSize: 17, fontWeight: 700, color: '#f8fafc', marginBottom: 6 }}>\n                      {project.title}\n                    </div>\n                    <div style={{ fontSize: 14, color: '#94a3b8', marginBottom: 10 }}>\n                      <span style={{ color: '#cbd5e1' }}>@{project.created_by_username}</span> invited you as{' '}\n                      <span style={{ color: '#f59e0b', fontWeight: 600 }}>{invite.role}</span>\n                    </div>\n                    <div style={{ display: 'flex', gap: 20, fontSize: 13 }}>\n                      <div>\n                        <span style={{ color: '#64748b' }}>Revenue Split:</span>{' '}\n                        <span style={{ color: '#10b981', fontWeight: 700 }}>{invite.revenue_percentage}%</span>\n                      </div>\n                      <div>\n                        <span style={{ color: '#64748b' }}>Team:</span>{' '}\n                        <span style={{ color: '#e2e8f0' }}>{project.total_collaborators} people</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Actions */}\n                <div style={{\n                  display: 'flex',\n                  gap: 12,\n                  marginTop: 16,\n                  paddingTop: 16,\n                  borderTop: '1px solid #334155',\n                }}>\n                  <button\n                    onClick={(e) => handleAcceptInvite(project.id, e)}\n                    disabled={isProcessing}\n                    style={{\n                      flex: 1,\n                      background: '#10b981',\n                      color: '#fff',\n                      border: 'none',\n                      padding: '12px 20px',\n                      borderRadius: 10,\n                      fontSize: 14,\n                      fontWeight: 700,\n                      cursor: isProcessing ? 'not-allowed' : 'pointer',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      gap: 8,\n                    }}\n                  >\n                    <Check size={18} />\n                    {isProcessing ? 'Processing...' : 'Accept Invite'}\n                  </button>\n                  <button\n                    onClick={(e) => handleDeclineInvite(project.id, e)}\n                    disabled={isProcessing}\n                    style={{\n                      background: 'transparent',\n                      color: '#ef4444',\n                      border: '1px solid #ef4444',\n                      padding: '12px 20px',\n                      borderRadius: 10,\n                      fontSize: 14,\n                      fontWeight: 600,\n                      cursor: isProcessing ? 'not-allowed' : 'pointer',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      gap: 8,\n                    }}\n                  >\n                    <XCircle size={18} />\n                    Decline\n                  </button>\n                  <button\n                    onClick={() => setSelectedInviteProjectId(project.id)}\n                    disabled={isProcessing}\n                    style={{\n                      background: 'transparent',\n                      color: '#94a3b8',\n                      border: '1px solid #334155',\n                      padding: '12px 20px',\n                      borderRadius: 10,\n                      fontSize: 14,\n                      fontWeight: 600,\n                      cursor: isProcessing ? 'not-allowed' : 'pointer',\n                    }}\n                  >\n                    View Details\n                  </button>\n                </div>\n              </div>\n            );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* TABS NAVIGATION */}\n      <div style={{\n        display: 'flex',\n        gap: 4,\n        borderBottom: '1px solid #1e293b',\n        marginBottom: 16,\n      }}>\n        <Tab\n          icon={<BookOpen size={18} />}\n          label=\"My Content\"\n          count={inventory.length + bookProjects.length}\n          active={activeTab === 'content'}\n          onClick={() => setActiveTab('content')}\n        />\n        <Tab\n          icon={<Users size={18} />}\n          label=\"Collaborations\"\n          count={pendingInvites.length + collaborations.length}\n          active={activeTab === 'collaborations'}\n          onClick={() => setActiveTab('collaborations')}\n        />\n        <Tab\n          icon={<Briefcase size={18} />}\n          label=\"External Portfolio\"\n          active={activeTab === 'portfolio'}\n          onClick={() => setActiveTab('portfolio')}\n        />\n        <Tab\n          icon={<BarChart3 size={18} />}\n          label=\"Analytics\"\n          active={activeTab === 'analytics'}\n          onClick={() => setActiveTab('analytics')}\n        />\n        <Tab\n          icon={<UserCheck size={18} />}\n          label=\"Following\"\n          count={followingList.length}\n          active={activeTab === 'following'}\n          onClick={() => setActiveTab('following')}\n        />\n      </div>\n\n      {/* Content Type Sub-filters + Create Button */}\n      {activeTab === 'content' && (inventory.length > 0 || bookProjects.length > 0) && (\n        <div style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: 24,\n          gap: 16,\n        }}>\n          <div style={{\n            display: 'flex',\n            gap: 8,\n            flexWrap: 'wrap',\n          }}>\n            <FilterChip\n              label=\"All\"\n              count={inventory.length + bookProjects.length}\n              active={contentFilter === 'all'}\n              onClick={() => setContentFilter('all')}\n            />\n            <FilterChip\n              label=\"Books\"\n              count={bookProjects.length}\n              active={contentFilter === 'book'}\n              onClick={() => setContentFilter('book')}\n            />\n            <FilterChip\n              label=\"Art\"\n              count={inventory.filter(i => i.content_type === 'art').length}\n              active={contentFilter === 'art'}\n              onClick={() => setContentFilter('art')}\n            />\n            <FilterChip\n              label=\"Music\"\n              count={inventory.filter(i => i.content_type === 'music').length}\n              active={contentFilter === 'music'}\n              onClick={() => setContentFilter('music')}\n            />\n            <FilterChip\n              label=\"Film\"\n              count={inventory.filter(i => i.content_type === 'film' || i.content_type === 'video').length}\n              active={contentFilter === 'film'}\n              onClick={() => setContentFilter('film')}\n            />\n            <div style={{ width: 1, height: 24, background: '#334155', margin: '0 8px' }} />\n            <FilterChip\n              label=\"Published\"\n              count={\n                inventory.filter(i => i.inventory_status === 'minted').length +\n                bookProjects.filter(b => b.published_chapters > 0).length\n              }\n              active={statusFilter === 'published'}\n              onClick={() => setStatusFilter(statusFilter === 'published' ? 'all' : 'published')}\n            />\n            <FilterChip\n              label=\"Drafts\"\n              count={\n                inventory.filter(i => i.inventory_status === 'draft').length +\n                bookProjects.filter(b => b.published_chapters === 0).length\n              }\n              active={statusFilter === 'draft'}\n              onClick={() => setStatusFilter(statusFilter === 'draft' ? 'all' : 'draft')}\n            />\n          </div>\n          <button\n            onClick={() => navigate('/studio')}\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8,\n              background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n              color: '#000',\n              border: 'none',\n              padding: '10px 18px',\n              borderRadius: 10,\n              fontSize: 14,\n              fontWeight: 700,\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n              flexShrink: 0,\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.transform = 'translateY(-2px)';\n              e.currentTarget.style.boxShadow = '0 4px 12px rgba(245,158,11,0.3)';\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = 'none';\n            }}\n          >\n            <Plus size={18} />\n            Create\n          </button>\n        </div>\n      )}\n\n      {/* TAB CONTENT */}\n      {activeTab === 'content' && (\n        <div>\n          {inventory.length === 0 && bookProjects.length === 0 ? (\n            <EmptyState\n              icon={<FileText size={64} />}\n              title=\"No content yet\"\n              description=\"Create your first piece of content to get started\"\n              actionLabel=\"+ Create Content\"\n              onAction={() => navigate('/studio')}\n            />\n          ) : (\n            (() => {\n              // Filter non-book inventory based on content type filter\n              let filteredInventory = contentFilter === 'all'\n                ? inventory\n                : contentFilter === 'book'\n                  ? [] // Books are shown via bookProjects\n                  : contentFilter === 'film'\n                    ? inventory.filter(i => i.content_type === 'film' || i.content_type === 'video')\n                    : inventory.filter(i => i.content_type === contentFilter);\n\n              // Apply status filter to inventory\n              if (statusFilter === 'published') {\n                filteredInventory = filteredInventory.filter(i => i.inventory_status === 'minted');\n              } else if (statusFilter === 'draft') {\n                filteredInventory = filteredInventory.filter(i => i.inventory_status === 'draft');\n              }\n\n              // Filter book projects by content type\n              let filteredBooks = contentFilter === 'all' || contentFilter === 'book'\n                ? bookProjects\n                : [];\n\n              // Apply status filter to books\n              if (statusFilter === 'published') {\n                filteredBooks = filteredBooks.filter(b => b.published_chapters > 0);\n              } else if (statusFilter === 'draft') {\n                filteredBooks = filteredBooks.filter(b => b.published_chapters === 0);\n              }\n\n              const hasContent = filteredInventory.length > 0 || filteredBooks.length > 0;\n\n              const filterLabel = statusFilter !== 'all'\n                ? `${statusFilter} ${contentFilter}`\n                : contentFilter;\n\n              return !hasContent ? (\n                <div style={{ textAlign: 'center', padding: '60px 24px', color: '#64748b' }}>\n                  <FileText size={48} style={{ marginBottom: 16, opacity: 0.5 }} />\n                  <div style={{ fontSize: 16, fontWeight: 600, color: '#94a3b8' }}>\n                    No {filterLabel} content yet\n                  </div>\n                </div>\n              ) : (\n                <div style={{\n                  display: 'grid',\n                  gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\n                  gap: 24,\n                }}>\n                  {/* Render book projects as grouped cards */}\n                  {filteredBooks.map((book) => (\n                    <BookProjectCard\n                      key={`book-${book.id}`}\n                      book={book}\n                      expanded={expandedBooks.has(book.id)}\n                      onToggleExpand={() => {\n                        setExpandedBooks(prev => {\n                          const newSet = new Set(prev);\n                          if (newSet.has(book.id)) {\n                            newSet.delete(book.id);\n                          } else {\n                            newSet.add(book.id);\n                          }\n                          return newSet;\n                        });\n                      }}\n                      onViewChapter={(contentId) => openReader(contentId)}\n                      onEditBook={() => navigate(`/studio?editBookProject=${book.id}`)}\n                    />\n                  ))}\n                  {/* Render non-book content */}\n                  {filteredInventory.map((item) => (\n                    <ContentCard\n                      key={item.id}\n                      item={item}\n                      onView={() => openReader(item.id)}\n                      onEdit={() => navigate(`/studio?editContent=${item.id}`)}\n                    />\n                  ))}\n                </div>\n              );\n            })()\n          )}\n        </div>\n      )}\n\n      {activeTab === 'collaborations' && (\n        <div>\n          {/* Loading state */}\n          {collaborationsLoading && (\n            <div style={{ textAlign: 'center', padding: 40, color: '#94a3b8' }}>\n              Loading collaborations...\n            </div>\n          )}\n\n          {/* Active Collaborations Section - includes both pending invites and active projects */}\n          {!collaborationsLoading && (pendingInvites.length > 0 || collaborations.length > 0) && (\n            <div style={{ marginBottom: 24 }}>\n              <h3 style={{ fontSize: 16, fontWeight: 700, color: '#e2e8f0', marginBottom: 16 }}>\n                Active Collaborations ({pendingInvites.length + collaborations.length})\n              </h3>\n              <div style={{ display: 'grid', gap: 12 }}>\n                {/* Pending Invites - shown first with invite status */}\n                {pendingInvites.map(({ project, invite }) => {\n                  const isProcessing = processingInvites.has(project.id);\n                  return (\n                    <div\n                      key={`invite-${project.id}`}\n                      style={{\n                        background: '#1e293b',\n                        border: '1px solid #f59e0b40',\n                        borderRadius: 12,\n                        padding: 16,\n                        cursor: 'pointer',\n                        opacity: isProcessing ? 0.7 : 1,\n                        transition: 'all 0.2s',\n                      }}\n                      onClick={() => !isProcessing && setSelectedInviteProjectId(project.id)}\n                    >\n                      <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                        <div style={{\n                          width: 40,\n                          height: 40,\n                          borderRadius: 8,\n                          background: '#f59e0b20',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                          color: '#f59e0b',\n                          flexShrink: 0,\n                        }}>\n                          {getContentTypeIcon(project.content_type, 20)}\n                        </div>\n                        <div style={{ flex: 1, minWidth: 0 }}>\n                          <div style={{ fontWeight: 600, color: '#f8fafc', marginBottom: 2 }}>{project.title}</div>\n                          <div style={{ fontSize: 13, color: '#94a3b8' }}>\n                            {project.total_collaborators} collaborator{project.total_collaborators !== 1 ? 's' : ''}  {invite.revenue_percentage}% revenue\n                          </div>\n                        </div>\n                        {/* Action buttons */}\n                        <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n                          <button\n                            onClick={(e) => handleAcceptInvite(project.id, e)}\n                            disabled={isProcessing}\n                            style={{\n                              background: '#10b981',\n                              color: '#fff',\n                              border: 'none',\n                              padding: '8px 12px',\n                              borderRadius: 6,\n                              fontWeight: 600,\n                              cursor: isProcessing ? 'not-allowed' : 'pointer',\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 4,\n                              fontSize: 13,\n                              transition: 'all 0.2s',\n                            }}\n                            title=\"Accept invitation\"\n                          >\n                            <Check size={16} />\n                            {isProcessing ? '...' : 'Accept'}\n                          </button>\n                          <button\n                            onClick={(e) => handleDeclineInvite(project.id, e)}\n                            disabled={isProcessing}\n                            style={{\n                              background: 'transparent',\n                              color: '#ef4444',\n                              border: '1px solid #ef4444',\n                              padding: '8px 12px',\n                              borderRadius: 6,\n                              fontWeight: 600,\n                              cursor: isProcessing ? 'not-allowed' : 'pointer',\n                              display: 'flex',\n                              alignItems: 'center',\n                              gap: 4,\n                              fontSize: 13,\n                              transition: 'all 0.2s',\n                            }}\n                            title=\"Decline invitation\"\n                          >\n                            <XCircle size={16} />\n                            Deny\n                          </button>\n                          <div style={{\n                            background: '#f59e0b20',\n                            color: '#f59e0b',\n                            padding: '4px 12px',\n                            borderRadius: 12,\n                            fontSize: 12,\n                            fontWeight: 600,\n                            marginLeft: 4,\n                          }}>\n                            Invite\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n\n                {/* Active Collaborations */}\n                {collaborations.map((project: any) => (\n                  <div\n                    key={`collab-${project.id}`}\n                    style={{\n                      background: '#1e293b',\n                      border: '1px solid #334155',\n                      borderRadius: 12,\n                      padding: 16,\n                      cursor: 'pointer',\n                      transition: 'all 0.2s',\n                    }}\n                    onClick={() => navigate(`/collaborations/${project.id}`)}\n                  >\n                    <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                      <div style={{\n                        width: 40,\n                        height: 40,\n                        borderRadius: 8,\n                        background: project.status === 'active' ? '#10b98120' : '#64748b20',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        color: project.status === 'active' ? '#10b981' : '#94a3b8',\n                        flexShrink: 0,\n                      }}>\n                        {getContentTypeIcon(project.content_type, 20)}\n                      </div>\n                      <div style={{ flex: 1, minWidth: 0 }}>\n                        <div style={{ fontWeight: 600, color: '#f8fafc', marginBottom: 2 }}>{project.title}</div>\n                        <div style={{ fontSize: 13, color: '#94a3b8' }}>\n                          {project.total_collaborators} collaborator{project.total_collaborators !== 1 ? 's' : ''}  {project.status}\n                        </div>\n                      </div>\n                      <div style={{\n                        background: project.status === 'active' ? '#10b98120' : '#64748b20',\n                        color: project.status === 'active' ? '#10b981' : '#94a3b8',\n                        padding: '4px 12px',\n                        borderRadius: 12,\n                        fontSize: 12,\n                        fontWeight: 600,\n                        textTransform: 'capitalize',\n                      }}>\n                        {project.status === 'active' ? 'Active' : project.status}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Empty State - only show if no invites and no collaborations */}\n          {!collaborationsLoading && pendingInvites.length === 0 && collaborations.length === 0 && (\n            <EmptyState\n              icon={<Users size={64} />}\n              title=\"No collaborations yet\"\n              description=\"Find collaborators to work on projects together\"\n              actionLabel=\"Find Collaborators\"\n              onAction={() => navigate('/collaborators')}\n            />\n          )}\n\n          {/* Find Collaborators button - always show if there are collaborations */}\n          {!collaborationsLoading && (pendingInvites.length > 0 || collaborations.length > 0) && (\n            <div style={{ textAlign: 'center', marginTop: 24 }}>\n              <button\n                onClick={() => navigate('/collaborators')}\n                style={{\n                  background: 'transparent',\n                  border: '1px solid #334155',\n                  color: '#94a3b8',\n                  padding: '10px 24px',\n                  borderRadius: 8,\n                  cursor: 'pointer',\n                  fontWeight: 600,\n                }}\n              >\n                Find More Collaborators\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* External Portfolio Tab */}\n      {activeTab === 'portfolio' && (\n        <div>\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 24 }}>\n            <div>\n              <h3 style={{ color: '#f8fafc', fontSize: 18, fontWeight: 700, margin: 0 }}>External Portfolio</h3>\n              <p style={{ color: '#94a3b8', fontSize: 14, margin: '4px 0 0' }}>\n                Showcase your past work and external projects on your public profile\n              </p>\n            </div>\n            <button\n              onClick={() => { setEditingPortfolioItem(null); setPortfolioModalOpen(true); }}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 6,\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                color: '#000',\n                border: 'none',\n                padding: '10px 18px',\n                borderRadius: 8,\n                fontWeight: 600,\n                fontSize: 14,\n                cursor: 'pointer',\n              }}\n            >\n              <Plus size={18} />\n              Add Project\n            </button>\n          </div>\n\n          {externalPortfolio.length === 0 ? (\n            <EmptyState\n              icon={<Briefcase size={64} />}\n              title=\"No portfolio items yet\"\n              description=\"Add your past work, side projects, or external collaborations to showcase on your public profile\"\n              actionLabel=\"+ Add Your First Project\"\n              onAction={() => { setEditingPortfolioItem(null); setPortfolioModalOpen(true); }}\n            />\n          ) : (\n            <div style={{\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\n              gap: 20,\n            }}>\n              {externalPortfolio.map(item => (\n                <div key={item.id} style={{\n                  background: '#0f172a',\n                  border: '1px solid #1e293b',\n                  borderRadius: 16,\n                  overflow: 'hidden',\n                  transition: 'all 0.2s',\n                }}\n                onMouseEnter={(e) => {\n                  e.currentTarget.style.transform = 'translateY(-4px)';\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.25)';\n                  e.currentTarget.style.borderColor = '#334155';\n                }}\n                onMouseLeave={(e) => {\n                  e.currentTarget.style.transform = 'translateY(0)';\n                  e.currentTarget.style.boxShadow = 'none';\n                  e.currentTarget.style.borderColor = '#1e293b';\n                }}\n                >\n                  {/* Cover Image */}\n                  <div style={{\n                    width: '100%',\n                    paddingTop: '56.25%',\n                    background: item.image_url\n                      ? `url(${item.image_url}) center/cover`\n                      : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                    position: 'relative',\n                  }}>\n                    {!item.image_url && (\n                      <div style={{\n                        position: 'absolute',\n                        inset: 0,\n                        display: 'grid',\n                        placeItems: 'center',\n                        color: 'rgba(255,255,255,0.3)',\n                        fontSize: 48,\n                        fontWeight: 700,\n                      }}>\n                        {item.project_type?.charAt(0).toUpperCase() || 'P'}\n                      </div>\n                    )}\n                    {/* Project Type Badge */}\n                    <div style={{\n                      position: 'absolute',\n                      top: 12,\n                      left: 12,\n                      background: '#f59e0b',\n                      color: '#000',\n                      padding: '4px 10px',\n                      borderRadius: 6,\n                      fontSize: 11,\n                      fontWeight: 700,\n                      textTransform: 'uppercase',\n                    }}>\n                      {item.project_type || 'Project'}\n                    </div>\n                  </div>\n\n                  {/* Card Content */}\n                  <div style={{ padding: 16 }}>\n                    <div style={{\n                      fontSize: 16,\n                      fontWeight: 600,\n                      color: '#f8fafc',\n                      marginBottom: 4,\n                    }}>\n                      {item.title}\n                    </div>\n                    {item.role && (\n                      <div style={{\n                        fontSize: 13,\n                        color: '#f59e0b',\n                        marginBottom: 8,\n                      }}>\n                        {item.role}\n                      </div>\n                    )}\n                    {item.description && (\n                      <div style={{\n                        fontSize: 13,\n                        color: '#94a3b8',\n                        marginBottom: 12,\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                        display: '-webkit-box',\n                        WebkitLineClamp: 2,\n                        WebkitBoxOrient: 'vertical',\n                      }}>\n                        {item.description}\n                      </div>\n                    )}\n\n                    {/* Action Buttons */}\n                    <div style={{ display: 'flex', gap: 8 }}>\n                      {item.external_url && (\n                        <a\n                          href={item.external_url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          style={{\n                            flex: 1,\n                            background: 'rgba(59,130,246,0.15)',\n                            border: '1px solid rgba(59,130,246,0.3)',\n                            color: '#60a5fa',\n                            padding: '8px 16px',\n                            borderRadius: 8,\n                            fontSize: 13,\n                            fontWeight: 600,\n                            cursor: 'pointer',\n                            textDecoration: 'none',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            gap: 6,\n                          }}\n                        >\n                          <ExternalLink size={14} />\n                          View\n                        </a>\n                      )}\n                      <button\n                        onClick={() => { setEditingPortfolioItem(item); setPortfolioModalOpen(true); }}\n                        style={{\n                          background: 'transparent',\n                          border: '1px solid #334155',\n                          color: '#cbd5e1',\n                          padding: '8px 12px',\n                          borderRadius: 8,\n                          cursor: 'pointer',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                        }}\n                      >\n                        <Edit2 size={14} />\n                      </button>\n                      <button\n                        onClick={() => deletePortfolioItem(item.id)}\n                        style={{\n                          background: 'transparent',\n                          border: '1px solid rgba(239,68,68,0.3)',\n                          color: '#ef4444',\n                          padding: '8px 12px',\n                          borderRadius: 8,\n                          cursor: 'pointer',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center',\n                        }}\n                      >\n                        <Trash2 size={14} />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {activeTab === 'analytics' && (\n        <div>\n          {/* Sales Overview Card */}\n          <div style={{\n            background: '#0f172a',\n            border: '1px solid #1e293b',\n            borderRadius: 16,\n            padding: 24,\n            marginBottom: 24,\n          }}>\n            <h3 style={{\n              fontSize: 18,\n              fontWeight: 700,\n              color: '#f8fafc',\n              marginBottom: 20,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 10,\n            }}>\n              <DollarSign size={20} style={{ color: '#10b981' }} />\n              Sales Overview\n            </h3>\n\n            <div style={{\n              display: 'grid',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(180px, 1fr))',\n              gap: 16,\n            }}>\n              <div style={{ background: '#1e293b', borderRadius: 12, padding: 20 }}>\n                <div style={{ fontSize: 12, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                  Total Earnings\n                </div>\n                <div style={{ fontSize: 28, fontWeight: 700, color: '#10b981' }}>\n                  ${salesAnalytics?.summary.total_earnings_usdc.toFixed(2) || dash.sales.toFixed(2)}\n                </div>\n                <div style={{ fontSize: 11, color: '#64748b', marginTop: 4 }}>USDC</div>\n              </div>\n\n              <div style={{ background: '#1e293b', borderRadius: 12, padding: 20 }}>\n                <div style={{ fontSize: 12, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                  Solo Content\n                </div>\n                <div style={{ fontSize: 28, fontWeight: 700, color: '#60a5fa' }}>\n                  ${salesAnalytics?.summary.solo_earnings.toFixed(2) || '0.00'}\n                </div>\n                <div style={{ fontSize: 11, color: '#64748b', marginTop: 4 }}>{salesAnalytics?.summary.content_count || 0} items</div>\n              </div>\n\n              <div style={{ background: '#1e293b', borderRadius: 12, padding: 20 }}>\n                <div style={{ fontSize: 12, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                  Collaborations\n                </div>\n                <div style={{ fontSize: 28, fontWeight: 700, color: '#f59e0b' }}>\n                  ${salesAnalytics?.summary.collaboration_earnings.toFixed(2) || '0.00'}\n                </div>\n                <div style={{ fontSize: 11, color: '#64748b', marginTop: 4 }}>{salesAnalytics?.summary.collaboration_count || 0} projects</div>\n              </div>\n\n              <div style={{ background: '#1e293b', borderRadius: 12, padding: 20 }}>\n                <div style={{ fontSize: 12, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                  Total Sales\n                </div>\n                <div style={{ fontSize: 28, fontWeight: 700, color: '#f8fafc' }}>\n                  {salesAnalytics?.summary.total_sales || 0}\n                </div>\n                <div style={{ fontSize: 11, color: '#64748b', marginTop: 4 }}>transactions</div>\n              </div>\n            </div>\n          </div>\n\n          {/* Content Performance - Expandable Cards */}\n          {salesAnalytics && (salesAnalytics.content_sales.length > 0 || salesAnalytics.collaboration_sales.length > 0) && (\n            <div style={{\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n              padding: 24,\n              marginBottom: 24,\n            }}>\n              <h3 style={{ fontSize: 16, fontWeight: 700, color: '#f8fafc', marginBottom: 16, display: 'flex', alignItems: 'center', gap: 8 }}>\n                <TrendingUp size={18} style={{ color: '#60a5fa' }} />\n                Earnings Breakdown\n              </h3>\n              <p style={{ fontSize: 12, color: '#64748b', marginBottom: 16 }}>\n                Click any item to see individual transactions\n              </p>\n\n              {/* Solo Content Sales */}\n              {salesAnalytics.content_sales.length > 0 && (\n                <div style={{ marginBottom: 20 }}>\n                  <div style={{ fontSize: 13, color: '#60a5fa', marginBottom: 12, fontWeight: 600, display: 'flex', alignItems: 'center', gap: 6 }}>\n                    <BookOpen size={14} />\n                    Solo Content ({salesAnalytics.content_sales.length})\n                  </div>\n                  {salesAnalytics.content_sales.map((item) => {\n                    const isExpanded = expandedAnalyticsCards.has(item.id);\n                    return (\n                      <div key={item.id} style={{ marginBottom: 8 }}>\n                        <div\n                          onClick={() => toggleAnalyticsCard(item.id)}\n                          style={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            alignItems: 'center',\n                            padding: '12px 16px',\n                            background: '#1e293b',\n                            borderRadius: isExpanded ? '8px 8px 0 0' : 8,\n                            cursor: 'pointer',\n                            transition: 'background 0.2s',\n                          }}\n                          onMouseEnter={e => (e.currentTarget.style.background = '#334155')}\n                          onMouseLeave={e => (e.currentTarget.style.background = '#1e293b')}\n                        >\n                          <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                            {getContentTypeIcon(item.content_type, 18)}\n                            <div>\n                              <div style={{ fontSize: 14, fontWeight: 600, color: '#f8fafc' }}>{item.title}</div>\n                              <div style={{ fontSize: 12, color: '#64748b' }}>\n                                {item.sales_count} sale{item.sales_count !== 1 ? 's' : ''}  {item.role}  ${item.price.toFixed(2)} price\n                              </div>\n                            </div>\n                          </div>\n                          <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                            <div style={{ textAlign: 'right' }}>\n                              <div style={{ fontSize: 16, fontWeight: 700, color: '#10b981' }}>${item.total_earnings.toFixed(2)}</div>\n                              <div style={{ fontSize: 11, color: '#64748b' }}>{item.percentage}% split</div>\n                            </div>\n                            {isExpanded ? <ChevronUp size={18} color=\"#64748b\" /> : <ChevronDown size={18} color=\"#64748b\" />}\n                          </div>\n                        </div>\n                        {/* Expanded transaction list */}\n                        {isExpanded && item.transactions && item.transactions.length > 0 && (\n                          <div style={{\n                            background: '#0f172a',\n                            border: '1px solid #334155',\n                            borderTop: 'none',\n                            borderRadius: '0 0 8px 8px',\n                            padding: '12px 16px',\n                          }}>\n                            <div style={{ fontSize: 11, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                              Transaction History\n                            </div>\n                            {item.transactions.map((tx, idx) => (\n                              <div key={tx.id || idx} style={{\n                                display: 'flex',\n                                justifyContent: 'space-between',\n                                alignItems: 'center',\n                                padding: '8px 0',\n                                borderBottom: idx < item.transactions.length - 1 ? '1px solid #1e293b' : 'none',\n                              }}>\n                                <div>\n                                  <div style={{ fontSize: 13, color: '#f8fafc' }}>\n                                    Purchased by <span style={{ color: '#60a5fa' }}>@{tx.buyer}</span>\n                                  </div>\n                                  <div style={{ fontSize: 11, color: '#64748b', display: 'flex', alignItems: 'center', gap: 4 }}>\n                                    <Clock size={10} />\n                                    {new Date(tx.date).toLocaleDateString()} {new Date(tx.date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                  </div>\n                                  {tx.tx_signature && (\n                                    <div style={{ fontSize: 10, color: '#475569', fontFamily: 'monospace' }}>TX: {tx.tx_signature}</div>\n                                  )}\n                                </div>\n                                <div style={{ fontSize: 14, fontWeight: 600, color: '#10b981' }}>+${tx.amount.toFixed(2)}</div>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n\n              {/* Collaboration Sales */}\n              {salesAnalytics.collaboration_sales.length > 0 && (\n                <div>\n                  <div style={{ fontSize: 13, color: '#f59e0b', marginBottom: 12, fontWeight: 600, display: 'flex', alignItems: 'center', gap: 6 }}>\n                    <Users size={14} />\n                    Collaborations ({salesAnalytics.collaboration_sales.length})\n                  </div>\n                  {salesAnalytics.collaboration_sales.map((item) => {\n                    const isExpanded = expandedAnalyticsCards.has(item.id);\n                    return (\n                      <div key={item.id} style={{ marginBottom: 8 }}>\n                        <div\n                          onClick={() => toggleAnalyticsCard(item.id)}\n                          style={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            alignItems: 'center',\n                            padding: '12px 16px',\n                            background: '#1e293b',\n                            borderRadius: isExpanded ? '8px 8px 0 0' : 8,\n                            borderLeft: '3px solid #f59e0b',\n                            cursor: 'pointer',\n                            transition: 'background 0.2s',\n                          }}\n                          onMouseEnter={e => (e.currentTarget.style.background = '#334155')}\n                          onMouseLeave={e => (e.currentTarget.style.background = '#1e293b')}\n                        >\n                          <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                            {getContentTypeIcon(item.content_type, 18)}\n                            <div>\n                              <div style={{ fontSize: 14, fontWeight: 600, color: '#f8fafc' }}>{item.title}</div>\n                              <div style={{ fontSize: 12, color: '#64748b' }}>\n                                {item.role}  {item.percentage}% split  {item.sales_count} sale{item.sales_count !== 1 ? 's' : ''}\n                              </div>\n                            </div>\n                          </div>\n                          <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>\n                            <div style={{ textAlign: 'right' }}>\n                              <div style={{ fontSize: 16, fontWeight: 700, color: '#f59e0b' }}>${item.total_earnings.toFixed(2)}</div>\n                              <div style={{ fontSize: 11, color: '#64748b' }}>your share</div>\n                            </div>\n                            {isExpanded ? <ChevronUp size={18} color=\"#64748b\" /> : <ChevronDown size={18} color=\"#64748b\" />}\n                          </div>\n                        </div>\n                        {/* Expanded transaction list */}\n                        {isExpanded && item.transactions && item.transactions.length > 0 && (\n                          <div style={{\n                            background: '#0f172a',\n                            border: '1px solid #334155',\n                            borderTop: 'none',\n                            borderRadius: '0 0 8px 8px',\n                            padding: '12px 16px',\n                          }}>\n                            <div style={{ fontSize: 11, color: '#94a3b8', marginBottom: 8, textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n                              Transaction History\n                            </div>\n                            {item.transactions.map((tx, idx) => (\n                              <div key={tx.id || idx} style={{\n                                display: 'flex',\n                                justifyContent: 'space-between',\n                                alignItems: 'center',\n                                padding: '8px 0',\n                                borderBottom: idx < item.transactions.length - 1 ? '1px solid #1e293b' : 'none',\n                              }}>\n                                <div>\n                                  <div style={{ fontSize: 13, color: '#f8fafc' }}>\n                                    Purchased by <span style={{ color: '#60a5fa' }}>@{tx.buyer}</span>\n                                  </div>\n                                  <div style={{ fontSize: 11, color: '#64748b', display: 'flex', alignItems: 'center', gap: 4 }}>\n                                    <Clock size={10} />\n                                    {new Date(tx.date).toLocaleDateString()} {new Date(tx.date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                  </div>\n                                  {tx.tx_signature && (\n                                    <div style={{ fontSize: 10, color: '#475569', fontFamily: 'monospace' }}>TX: {tx.tx_signature}</div>\n                                  )}\n                                </div>\n                                <div style={{ fontSize: 14, fontWeight: 600, color: '#f59e0b' }}>+${tx.amount.toFixed(2)}</div>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Recent Transactions */}\n          {salesAnalytics && salesAnalytics.recent_transactions.length > 0 && (\n            <div style={{\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n              padding: 24,\n            }}>\n              <h3 style={{ fontSize: 16, fontWeight: 700, color: '#f8fafc', marginBottom: 16, display: 'flex', alignItems: 'center', gap: 8 }}>\n                <FileText size={18} style={{ color: '#a78bfa' }} />\n                Recent Transactions\n              </h3>\n              <div style={{ display: 'flex', flexDirection: 'column', gap: 8 }}>\n                {salesAnalytics.recent_transactions.map((tx) => (\n                  <div key={tx.id} style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    padding: '12px 16px',\n                    background: '#1e293b',\n                    borderRadius: 8,\n                  }}>\n                    <div>\n                      <div style={{ fontSize: 14, fontWeight: 600, color: '#f8fafc' }}>{tx.title}</div>\n                      <div style={{ fontSize: 12, color: '#64748b' }}>\n                        Bought by @{tx.buyer}  {tx.role} ({tx.percentage}%)  {new Date(tx.date).toLocaleDateString()}\n                      </div>\n                      {tx.tx_signature && (\n                        <div style={{ fontSize: 11, color: '#475569', fontFamily: 'monospace' }}>TX: {tx.tx_signature}</div>\n                      )}\n                    </div>\n                    <div style={{\n                      fontSize: 16,\n                      fontWeight: 700,\n                      color: tx.type === 'collaboration' ? '#f59e0b' : '#10b981',\n                    }}>\n                      +${tx.amount.toFixed(2)}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* No Sales Yet Notice */}\n          {(!salesAnalytics || salesAnalytics.summary.total_sales === 0) && !analyticsLoading && (\n            <div style={{\n              textAlign: 'center',\n              padding: '40px 24px',\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n            }}>\n              <BarChart3 size={48} style={{ color: '#475569', marginBottom: 16 }} />\n              <div style={{ fontSize: 16, fontWeight: 600, color: '#94a3b8', marginBottom: 8 }}>\n                No sales yet\n              </div>\n              <div style={{ fontSize: 14, color: '#64748b' }}>\n                Once you start making sales, you'll see detailed breakdowns here\n              </div>\n            </div>\n          )}\n\n          {/* Loading State */}\n          {analyticsLoading && (\n            <div style={{\n              textAlign: 'center',\n              padding: '40px 24px',\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n            }}>\n              <div style={{ fontSize: 14, color: '#94a3b8' }}>Loading analytics...</div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Following Tab */}\n      {activeTab === 'following' && (\n        <div>\n          {followingLoading ? (\n            <div style={{\n              textAlign: 'center',\n              padding: '40px 24px',\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n            }}>\n              <Loader2 size={32} style={{ color: '#f59e0b', animation: 'spin 1s linear infinite' }} />\n              <div style={{ fontSize: 14, color: '#94a3b8', marginTop: 12 }}>Loading following...</div>\n            </div>\n          ) : followingList.length === 0 ? (\n            <div style={{\n              textAlign: 'center',\n              padding: '40px 24px',\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n            }}>\n              <UserCheck size={48} style={{ color: '#475569', marginBottom: 16 }} />\n              <div style={{ fontSize: 16, fontWeight: 600, color: '#94a3b8', marginBottom: 8 }}>\n                Not following anyone yet\n              </div>\n              <div style={{ fontSize: 14, color: '#64748b' }}>\n                Explore creators and follow them to see their latest work in your feed\n              </div>\n              <Link\n                to=\"/collaborators\"\n                style={{\n                  display: 'inline-block',\n                  marginTop: 16,\n                  padding: '10px 20px',\n                  background: '#f59e0b',\n                  color: '#111',\n                  borderRadius: 8,\n                  fontWeight: 600,\n                  textDecoration: 'none',\n                }}\n              >\n                Discover Creators\n              </Link>\n            </div>\n          ) : (\n            <div style={{\n              background: '#0f172a',\n              border: '1px solid #1e293b',\n              borderRadius: 16,\n              overflow: 'hidden',\n            }}>\n              <div style={{\n                padding: '16px 20px',\n                borderBottom: '1px solid #1e293b',\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n              }}>\n                <h3 style={{ fontSize: 16, fontWeight: 700, color: '#f8fafc', margin: 0 }}>\n                  Following ({followingList.length})\n                </h3>\n              </div>\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\n                {followingList.map((user, index) => (\n                  <div\n                    key={user.id}\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between',\n                      padding: '16px 20px',\n                      borderBottom: index < followingList.length - 1 ? '1px solid #1e293b' : 'none',\n                      transition: 'background 0.2s',\n                    }}\n                    onMouseEnter={(e) => (e.currentTarget.style.background = '#1e293b')}\n                    onMouseLeave={(e) => (e.currentTarget.style.background = 'transparent')}\n                  >\n                    <Link\n                      to={`/profile/${user.username}`}\n                      style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: 12,\n                        textDecoration: 'none',\n                        flex: 1,\n                      }}\n                    >\n                      <div style={{\n                        width: 48,\n                        height: 48,\n                        borderRadius: '50%',\n                        background: user.avatar ? `url(${user.avatar}) center/cover` : '#374151',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        fontSize: 18,\n                        fontWeight: 700,\n                        color: '#f59e0b',\n                        flexShrink: 0,\n                      }}>\n                        {!user.avatar && (user.username || '?').slice(0, 1).toUpperCase()}\n                      </div>\n                      <div>\n                        <div style={{ fontSize: 15, fontWeight: 600, color: '#f8fafc' }}>\n                          {user.display_name || user.username}\n                        </div>\n                        <div style={{ fontSize: 13, color: '#64748b' }}>\n                          @{user.username}\n                        </div>\n                        {user.bio && (\n                          <div style={{ fontSize: 12, color: '#94a3b8', marginTop: 4, maxWidth: 400 }}>\n                            {user.bio.length > 80 ? user.bio.slice(0, 80) + '...' : user.bio}\n                          </div>\n                        )}\n                      </div>\n                    </Link>\n                    <button\n                      onClick={() => handleUnfollow(user.username, user.id)}\n                      disabled={unfollowingUsers.has(user.id)}\n                      style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: 6,\n                        padding: '8px 16px',\n                        background: 'transparent',\n                        border: '1px solid #334155',\n                        borderRadius: 8,\n                        color: '#94a3b8',\n                        fontSize: 13,\n                        fontWeight: 600,\n                        cursor: unfollowingUsers.has(user.id) ? 'not-allowed' : 'pointer',\n                        opacity: unfollowingUsers.has(user.id) ? 0.5 : 1,\n                        transition: 'all 0.2s',\n                      }}\n                      onMouseEnter={(e) => {\n                        if (!unfollowingUsers.has(user.id)) {\n                          e.currentTarget.style.borderColor = '#ef4444';\n                          e.currentTarget.style.color = '#ef4444';\n                        }\n                      }}\n                      onMouseLeave={(e) => {\n                        e.currentTarget.style.borderColor = '#334155';\n                        e.currentTarget.style.color = '#94a3b8';\n                      }}\n                    >\n                      {unfollowingUsers.has(user.id) ? (\n                        <Loader2 size={14} style={{ animation: 'spin 1s linear infinite' }} />\n                      ) : (\n                        <UserCheck size={14} />\n                      )}\n                      {unfollowingUsers.has(user.id) ? 'Unfollowing...' : 'Following'}\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Wallet Modal */}\n      {showWalletModal && (\n        <div style={{\n          position: 'fixed',\n          inset: 0,\n          background: 'rgba(0,0,0,0.75)',\n          backdropFilter: 'blur(4px)',\n          display: 'grid',\n          placeItems: 'center',\n          zIndex: 2000,\n        }} onClick={() => setShowWalletModal(false)}>\n          <div onClick={(e) => e.stopPropagation()} style={{ width: '90%', maxWidth: 600 }}>\n            <WalletManagementPanel\n              walletAddress={profile?.wallet_address || null}\n              walletProvider={profile?.wallet_provider || null}\n              onWalletUpdate={async () => {\n                setShowWalletModal(false);\n                const profileResp = await fetch(`${API_URL}/api/users/profile/`, { credentials: 'include' });\n                if (profileResp.ok) setProfile(await profileResp.json());\n              }}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Preview Modal */}\n      {showPreview && previewItem && (\n        <PreviewModal\n          open={showPreview}\n          onClose={() => setShowPreview(false)}\n          teaserUrl={previewItem.teaser_link}\n          contentType={previewItem.content_type}\n          contentId={previewItem.id}\n          price={previewItem.price_usd}\n          editions={previewItem.editions}\n        />\n      )}\n\n      {/* Invite Response Modal */}\n      {selectedInviteProjectId && (\n        <InviteResponseModal\n          open={true}\n          onClose={() => {\n            setSelectedInviteProjectId(null);\n            loadPendingInvites(); // Refresh after closing\n          }}\n          projectId={selectedInviteProjectId}\n        />\n      )}\n\n      {/* Portfolio Item Modal */}\n      {portfolioModalOpen && (\n        <PortfolioItemModal\n          item={editingPortfolioItem}\n          onClose={() => { setPortfolioModalOpen(false); setEditingPortfolioItem(null); }}\n          onSave={savePortfolioItem}\n        />\n      )}\n\n      {/* Status Message */}\n      {status && (\n        <div style={{\n          position: 'fixed',\n          bottom: 24,\n          right: 24,\n          background: '#10b981',\n          color: '#fff',\n          padding: '12px 20px',\n          borderRadius: 8,\n          fontSize: 14,\n          fontWeight: 600,\n          boxShadow: '0 4px 16px rgba(0,0,0,0.3)',\n          zIndex: 1000,\n        }}>\n          {status}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Tab Component\nfunction Tab({ icon, label, count, active, onClick }: { icon: React.ReactNode; label: string; count?: number; active: boolean; onClick: () => void }) {\n  return (\n    <button\n      onClick={onClick}\n      style={{\n        background: 'transparent',\n        border: 'none',\n        borderBottom: active ? '2px solid #f59e0b' : '2px solid transparent',\n        color: active ? '#f59e0b' : '#94a3b8',\n        padding: '12px 20px',\n        fontSize: 15,\n        fontWeight: 600,\n        cursor: 'pointer',\n        transition: 'all 0.2s',\n        display: 'flex',\n        alignItems: 'center',\n        gap: 8,\n      }}\n      onMouseEnter={(e) => {\n        if (!active) {\n          e.currentTarget.style.color = '#cbd5e1';\n        }\n      }}\n      onMouseLeave={(e) => {\n        if (!active) {\n          e.currentTarget.style.color = '#94a3b8';\n        }\n      }}\n    >\n      {icon}\n      <span>{label}</span>\n      {count !== undefined && count > 0 && (\n        <span style={{\n          background: active ? '#f59e0b' : '#334155',\n          color: active ? '#000' : '#94a3b8',\n          padding: '2px 8px',\n          borderRadius: 10,\n          fontSize: 12,\n          fontWeight: 700,\n          marginLeft: 4,\n        }}>\n          {count}\n        </span>\n      )}\n    </button>\n  );\n}\n\n// Filter Chip Component\nfunction FilterChip({ label, count, active, onClick }: { label: string; count: number; active: boolean; onClick: () => void }) {\n  if (count === 0 && !active && label !== 'All') return null;\n\n  return (\n    <button\n      onClick={onClick}\n      style={{\n        background: active ? '#f59e0b' : '#1e293b',\n        border: active ? 'none' : '1px solid #334155',\n        color: active ? '#000' : '#94a3b8',\n        padding: '6px 14px',\n        borderRadius: 20,\n        fontSize: 13,\n        fontWeight: 600,\n        cursor: 'pointer',\n        transition: 'all 0.2s',\n        display: 'flex',\n        alignItems: 'center',\n        gap: 6,\n      }}\n      onMouseEnter={(e) => {\n        if (!active) {\n          e.currentTarget.style.borderColor = '#475569';\n          e.currentTarget.style.color = '#e2e8f0';\n        }\n      }}\n      onMouseLeave={(e) => {\n        if (!active) {\n          e.currentTarget.style.borderColor = '#334155';\n          e.currentTarget.style.color = '#94a3b8';\n        }\n      }}\n    >\n      {label}\n      <span style={{\n        background: active ? 'rgba(0,0,0,0.2)' : '#334155',\n        padding: '1px 6px',\n        borderRadius: 8,\n        fontSize: 11,\n      }}>\n        {count}\n      </span>\n    </button>\n  );\n}\n\n// Book Project Card Component - displays a book with its chapters grouped\nfunction BookProjectCard({\n  book,\n  expanded,\n  onToggleExpand,\n  onViewChapter,\n  onEditBook,\n}: {\n  book: BookProject;\n  expanded: boolean;\n  onToggleExpand: () => void;\n  onViewChapter: (contentId: number) => void;\n  onEditBook: () => void;\n}) {\n  const hasPublishedChapters = book.published_chapters > 0;\n  const firstPublishedChapter = book.chapters.find(ch => ch.is_published && ch.content_id);\n\n  return (\n    <div style={{\n      background: '#0f172a',\n      border: '1px solid #1e293b',\n      borderRadius: 16,\n      overflow: 'hidden',\n      transition: 'all 0.2s',\n      position: 'relative',\n    }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.transform = 'translateY(-4px)';\n        e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.25)';\n        e.currentTarget.style.borderColor = '#334155';\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.transform = 'translateY(0)';\n        e.currentTarget.style.boxShadow = 'none';\n        e.currentTarget.style.borderColor = '#1e293b';\n      }}\n    >\n      {/* Cover Image */}\n      <div\n        onClick={onToggleExpand}\n        style={{\n          width: '100%',\n          paddingTop: '56.25%', // 16:9 ratio\n          background: book.cover_image_url ? `url(${book.cover_image_url})` : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          position: 'relative',\n          cursor: 'pointer',\n          opacity: hasPublishedChapters ? 1 : 0.7,\n        }}\n      >\n        {!book.cover_image_url && (\n          <div style={{\n            position: 'absolute',\n            inset: 0,\n            display: 'grid',\n            placeItems: 'center',\n            color: 'rgba(255,255,255,0.3)',\n          }}>\n            <BookOpen size={48} />\n          </div>\n        )}\n        {/* Status badge */}\n        <div style={{\n          position: 'absolute',\n          top: 12,\n          right: 12,\n          background: hasPublishedChapters ? 'rgba(0,0,0,0.75)' : 'rgba(100, 116, 139, 0.9)',\n          color: '#f8fafc',\n          padding: '4px 10px',\n          borderRadius: hasPublishedChapters ? 12 : 6,\n          fontSize: hasPublishedChapters ? 12 : 11,\n          fontWeight: 600,\n          backdropFilter: 'blur(4px)',\n          textTransform: hasPublishedChapters ? 'none' : 'uppercase',\n          letterSpacing: hasPublishedChapters ? 'normal' : '0.5px',\n        }}>\n          {hasPublishedChapters\n            ? `${book.published_chapters} chapter${book.published_chapters !== 1 ? 's' : ''}`\n            : 'Draft'\n          }\n        </div>\n      </div>\n\n      {/* Card Content */}\n      <div style={{ padding: 16 }}>\n        <div style={{\n          fontSize: 16,\n          fontWeight: 600,\n          color: '#f8fafc',\n          marginBottom: 8,\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n          display: '-webkit-box',\n          WebkitLineClamp: 2,\n          WebkitBoxOrient: 'vertical',\n          lineHeight: 1.4,\n        }}>\n          {book.title}\n        </div>\n\n        <div style={{\n          fontSize: 13,\n          color: '#94a3b8',\n          marginBottom: 12,\n        }}>\n          {hasPublishedChapters\n            ? `book  ${book.published_chapters} of ${book.total_chapters} chapter${book.total_chapters !== 1 ? 's' : ''} published`\n            : `book  ${book.total_chapters} chapter${book.total_chapters !== 1 ? 's' : ''} (unpublished)`\n          }\n        </div>\n\n        {hasPublishedChapters && (\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: 16,\n            fontSize: 13,\n            color: '#cbd5e1',\n            marginBottom: 12,\n          }}>\n            <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n              <Eye size={14} /> {book.total_views}\n            </span>\n            <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n              <DollarSign size={14} /> ${book.total_price.toFixed(2)}\n            </span>\n          </div>\n        )}\n\n        {/* Expandable chapter list */}\n        {book.total_chapters > 0 && (\n          <>\n            <button\n              onClick={onToggleExpand}\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: 'none',\n                borderRadius: 8,\n                padding: '8px 12px',\n                color: '#94a3b8',\n                fontSize: 13,\n                fontWeight: 500,\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n                marginBottom: expanded ? 8 : 12,\n              }}\n            >\n              <span>Chapters</span>\n              {expanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\n            </button>\n\n            {expanded && (\n              <div style={{\n                background: '#0d1117',\n                borderRadius: 8,\n                padding: 8,\n                marginBottom: 12,\n                maxHeight: 200,\n                overflowY: 'auto',\n              }}>\n                {book.chapters.map((chapter, index) => (\n                  <div\n                    key={chapter.id}\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between',\n                      padding: '8px 10px',\n                      borderRadius: 6,\n                      background: index % 2 === 0 ? 'transparent' : 'rgba(255,255,255,0.02)',\n                      opacity: chapter.is_published ? 1 : 0.6,\n                    }}\n                  >\n                    <div style={{ flex: 1, minWidth: 0 }}>\n                      <div style={{\n                        fontSize: 13,\n                        color: '#e2e8f0',\n                        fontWeight: 500,\n                        whiteSpace: 'nowrap',\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: 6,\n                      }}>\n                        Ch {chapter.order + 1}: {chapter.title}\n                        {!chapter.is_published && (\n                          <span style={{\n                            fontSize: 9,\n                            background: 'rgba(100, 116, 139, 0.5)',\n                            color: '#cbd5e1',\n                            padding: '2px 5px',\n                            borderRadius: 3,\n                            textTransform: 'uppercase',\n                            letterSpacing: '0.3px',\n                          }}>\n                            Draft\n                          </span>\n                        )}\n                      </div>\n                      {chapter.is_published && (\n                        <div style={{ fontSize: 11, color: '#64748b' }}>\n                          ${chapter.price_usd.toFixed(2)}  {chapter.view_count} views\n                        </div>\n                      )}\n                    </div>\n                    {chapter.is_published && chapter.content_id && (\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          onViewChapter(chapter.content_id!);\n                        }}\n                        style={{\n                          background: 'transparent',\n                          border: '1px solid #334155',\n                          borderRadius: 6,\n                          padding: '4px 10px',\n                          color: '#94a3b8',\n                          fontSize: 11,\n                          fontWeight: 500,\n                          cursor: 'pointer',\n                          marginLeft: 8,\n                          flexShrink: 0,\n                        }}\n                      >\n                        View\n                      </button>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </>\n        )}\n\n        {/* Action buttons */}\n        <div style={{ display: 'flex', gap: 8 }}>\n          <button\n            onClick={onEditBook}\n            style={{\n              flex: 1,\n              background: 'transparent',\n              border: '1px solid #334155',\n              borderRadius: 10,\n              padding: '10px 16px',\n              color: '#94a3b8',\n              fontSize: 14,\n              fontWeight: 600,\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n            }}\n          >\n            Edit\n          </button>\n          {hasPublishedChapters && firstPublishedChapter && (\n            <button\n              onClick={() => onViewChapter(firstPublishedChapter.content_id!)}\n              style={{\n                flex: 1,\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                border: 'none',\n                borderRadius: 10,\n                padding: '10px 16px',\n                color: '#000',\n                fontSize: 14,\n                fontWeight: 600,\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n              }}\n            >\n              View\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Content Card Component\nfunction ContentCard({ item, onView, onEdit }: { item: any; onView: () => void; onEdit: () => void }) {\n  const isPublished = item.inventory_status === 'minted';\n\n  return (\n    <div style={{\n      background: '#0f172a',\n      border: '1px solid #1e293b',\n      borderRadius: 16,\n      overflow: 'hidden',\n      cursor: 'pointer',\n      transition: 'all 0.2s',\n      position: 'relative',\n    }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.transform = 'translateY(-4px)';\n        e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.25)';\n        e.currentTarget.style.borderColor = '#334155';\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.transform = 'translateY(0)';\n        e.currentTarget.style.boxShadow = 'none';\n        e.currentTarget.style.borderColor = '#1e293b';\n      }}\n    >\n      {/* Draft Badge */}\n      {!isPublished && (\n        <div style={{\n          position: 'absolute',\n          top: 12,\n          right: 12,\n          background: 'rgba(100, 116, 139, 0.9)',\n          color: '#f8fafc',\n          padding: '4px 10px',\n          borderRadius: 6,\n          fontSize: 11,\n          fontWeight: 600,\n          zIndex: 1,\n          textTransform: 'uppercase',\n          letterSpacing: '0.5px',\n        }}>\n          Draft\n        </div>\n      )}\n\n      {/* Cover Image */}\n      <div\n        onClick={isPublished ? onView : onEdit}\n        style={{\n          width: '100%',\n          paddingTop: '56.25%', // 16:9 ratio\n          background: item.teaser_link ? `url(${item.teaser_link})` : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          position: 'relative',\n          opacity: isPublished ? 1 : 0.7,\n        }}\n      >\n        {!item.teaser_link && (\n          <div style={{\n            position: 'absolute',\n            inset: 0,\n            display: 'grid',\n            placeItems: 'center',\n            color: 'rgba(255,255,255,0.3)',\n          }}>\n            {item.content_type === 'book' ? <BookOpen size={48} /> : item.content_type === 'art' ? <Palette size={48} /> : item.content_type === 'film' ? <Film size={48} /> : <Music size={48} />}\n          </div>\n        )}\n      </div>\n\n      {/* Card Content */}\n      <div style={{ padding: 16 }}>\n        <div style={{\n          fontSize: 16,\n          fontWeight: 600,\n          color: '#f8fafc',\n          marginBottom: 8,\n          overflow: 'hidden',\n          textOverflow: 'ellipsis',\n          display: '-webkit-box',\n          WebkitLineClamp: 2,\n          WebkitBoxOrient: 'vertical',\n          lineHeight: 1.4,\n        }}>\n          {item.title}\n        </div>\n\n        <div style={{\n          fontSize: 13,\n          color: '#94a3b8',\n          marginBottom: 12,\n        }}>\n          {item.content_type} {item.genre && ` ${item.genre}`}\n        </div>\n\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: 16,\n          fontSize: 13,\n          color: '#cbd5e1',\n          marginBottom: 16,\n        }}>\n          <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n            <Eye size={14} /> {item.view_count || 0}\n          </span>\n          <span style={{ display: 'flex', alignItems: 'center', gap: 4 }}>\n            <DollarSign size={14} /> ${item.price_usd || 0}\n          </span>\n        </div>\n\n        {/* Action Buttons */}\n        <div style={{ display: 'flex', gap: 8 }}>\n          <button\n            onClick={onEdit}\n            style={{\n              flex: 1,\n              background: 'transparent',\n              border: '1px solid #334155',\n              color: '#cbd5e1',\n              padding: '8px 16px',\n              borderRadius: 8,\n              fontSize: 13,\n              fontWeight: 600,\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.background = '#1e293b';\n              e.currentTarget.style.borderColor = '#475569';\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.background = 'transparent';\n              e.currentTarget.style.borderColor = '#334155';\n            }}\n          >\n            Edit\n          </button>\n          {isPublished && (\n            <button\n              onClick={onView}\n              style={{\n                flex: 1,\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                border: 'none',\n                color: '#fff',\n                padding: '8px 16px',\n                borderRadius: 8,\n                fontSize: 13,\n                fontWeight: 600,\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n              }}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.transform = 'translateY(-2px)';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.transform = 'translateY(0)';\n              }}\n            >\n              View\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Empty State Component\nfunction EmptyState({ icon, title, description, actionLabel, onAction }: {\n  icon: React.ReactNode;\n  title: string;\n  description: string;\n  actionLabel: string | null;\n  onAction: () => void;\n}) {\n  return (\n    <div style={{\n      textAlign: 'center',\n      padding: '80px 24px',\n    }}>\n      <div style={{ color: '#475569', marginBottom: 24 }}>{icon}</div>\n      <div style={{\n        fontSize: 24,\n        fontWeight: 600,\n        color: '#f8fafc',\n        marginBottom: 12,\n      }}>\n        {title}\n      </div>\n      <div style={{\n        fontSize: 15,\n        color: '#94a3b8',\n        marginBottom: 32,\n        maxWidth: 400,\n        margin: '0 auto 32px',\n      }}>\n        {description}\n      </div>\n      {actionLabel && (\n        <button\n          onClick={onAction}\n          style={{\n            background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n            border: 'none',\n            color: '#fff',\n            padding: '12px 24px',\n            borderRadius: 8,\n            fontSize: 15,\n            fontWeight: 600,\n            cursor: 'pointer',\n            transition: 'all 0.2s',\n          }}\n          onMouseEnter={(e) => {\n            e.currentTarget.style.transform = 'translateY(-2px)';\n            e.currentTarget.style.boxShadow = '0 4px 16px rgba(245, 158, 11, 0.3)';\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.transform = 'translateY(0)';\n            e.currentTarget.style.boxShadow = 'none';\n          }}\n        >\n          {actionLabel}\n        </button>\n      )}\n    </div>\n  );\n}\n\n// Portfolio Item Modal Component\nfunction PortfolioItemModal({\n  item,\n  onClose,\n  onSave\n}: {\n  item: ExternalPortfolioItem | null;\n  onClose: () => void;\n  onSave: (item: Partial<ExternalPortfolioItem>) => void;\n}) {\n  const [title, setTitle] = useState(item?.title || '');\n  const [description, setDescription] = useState(item?.description || '');\n  const [externalUrl, setExternalUrl] = useState(item?.external_url || '');\n  const [projectType, setProjectType] = useState(item?.project_type || 'book');\n  const [role, setRole] = useState(item?.role || '');\n  const [createdDate, setCreatedDate] = useState(item?.created_date || '');\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSave({\n      title,\n      description,\n      external_url: externalUrl,\n      project_type: projectType,\n      role,\n      created_date: createdDate || null\n    });\n  };\n\n  return (\n    <div style={{\n      position: 'fixed',\n      inset: 0,\n      background: 'rgba(0,0,0,0.75)',\n      backdropFilter: 'blur(4px)',\n      display: 'grid',\n      placeItems: 'center',\n      zIndex: 2000,\n    }} onClick={onClose}>\n      <div onClick={(e) => e.stopPropagation()} style={{\n        background: '#0f172a',\n        border: '1px solid #1e293b',\n        borderRadius: 16,\n        padding: 32,\n        width: '90%',\n        maxWidth: 500,\n        maxHeight: '90vh',\n        overflow: 'auto',\n      }}>\n        <div style={{\n          fontSize: 24,\n          fontWeight: 700,\n          color: '#f8fafc',\n          marginBottom: 24,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}>\n          <span>{item ? 'Edit Portfolio Item' : 'Add Portfolio Item'}</span>\n          <button\n            onClick={onClose}\n            style={{\n              background: 'transparent',\n              border: 'none',\n              color: '#94a3b8',\n              cursor: 'pointer',\n              padding: 4,\n              display: 'grid',\n              placeItems: 'center',\n            }}\n          >\n            <X size={24} />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit}>\n          <div style={{ marginBottom: 20 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              Title *\n            </label>\n            <input\n              type=\"text\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              required\n              placeholder=\"Project title\"\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: 20 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              Project Type\n            </label>\n            <select\n              value={projectType}\n              onChange={(e) => setProjectType(e.target.value)}\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n              }}\n            >\n              <option value=\"book\">Book</option>\n              <option value=\"art\">Art</option>\n              <option value=\"music\">Music</option>\n              <option value=\"video\">Video</option>\n              <option value=\"film\">Film</option>\n              <option value=\"other\">Other</option>\n            </select>\n          </div>\n\n          <div style={{ marginBottom: 20 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              Your Role\n            </label>\n            <input\n              type=\"text\"\n              value={role}\n              onChange={(e) => setRole(e.target.value)}\n              placeholder=\"e.g., Author, Illustrator, Producer\"\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: 20 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              Description\n            </label>\n            <textarea\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              rows={3}\n              placeholder=\"Brief description of the project\"\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n                resize: 'vertical',\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: 20 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              External URL\n            </label>\n            <input\n              type=\"url\"\n              value={externalUrl}\n              onChange={(e) => setExternalUrl(e.target.value)}\n              placeholder=\"https://...\"\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: 24 }}>\n            <label style={{\n              display: 'block',\n              fontSize: 13,\n              fontWeight: 600,\n              color: '#cbd5e1',\n              marginBottom: 8,\n            }}>\n              Date (optional)\n            </label>\n            <input\n              type=\"date\"\n              value={createdDate}\n              onChange={(e) => setCreatedDate(e.target.value)}\n              style={{\n                width: '100%',\n                background: '#1e293b',\n                border: '1px solid #334155',\n                borderRadius: 8,\n                padding: '10px 14px',\n                color: '#f8fafc',\n                fontSize: 14,\n              }}\n            />\n          </div>\n\n          <div style={{ display: 'flex', gap: 12 }}>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              style={{\n                flex: 1,\n                background: 'transparent',\n                border: '1px solid #334155',\n                color: '#cbd5e1',\n                padding: '12px',\n                borderRadius: 8,\n                fontSize: 14,\n                fontWeight: 600,\n                cursor: 'pointer',\n              }}\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              style={{\n                flex: 1,\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\n                border: 'none',\n                color: '#fff',\n                padding: '12px',\n                borderRadius: 8,\n                fontSize: 14,\n                fontWeight: 600,\n                cursor: 'pointer',\n              }}\n            >\n              {item ? 'Save Changes' : 'Add Project'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"file":"assets/ProfilePageRedesigned-CrFQodF0.js"}