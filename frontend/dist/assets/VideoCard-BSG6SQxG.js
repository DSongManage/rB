import{j as e}from"./web3auth-BkZxjmxM.js";import{r as t,L as i}from"./router-cVcvJ1e3.js";import{S as o,U as n}from"./index-Dc1vRtyQ.js";import{E as s}from"./eye-ChD1jNMt.js";import{T as r}from"./thumbs-up-BZL5BH9K.js";function l({owned:t,compact:i=!1}){return t?i?e.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24,background:"rgba(16, 185, 129, 0.2)",border:"1px solid #10b981",borderRadius:"50%",fontSize:12},title:"You own this",children:"✓"}):e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:4,background:"rgba(16, 185, 129, 0.15)",border:"1px solid #10b981",borderRadius:6,padding:"4px 8px",fontSize:11,fontWeight:700,color:"#10b981",textTransform:"uppercase",letterSpacing:"0.5px"},children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"2,6 5,9 10,3"})}),"Owned"]}):null}const a=t.memo(function({rating:t,count:i=0,size:n=12,showCount:s=!0}){if(null==t||0===i)return e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:2,color:"#64748b",fontSize:n},children:[e.jsx(o,{size:n}),e.jsx("span",{children:"--"})]});const r=Number(t),l=Math.floor(r),a=r%1>=.25,d=5-l-(a?1:0);return e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx("span",{style:{fontWeight:600,color:"#fbbf24",fontSize:n},children:r.toFixed(1)}),e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:1},children:[Array.from({length:l}).map((t,i)=>e.jsx(o,{size:n,fill:"#fbbf24",color:"#fbbf24",strokeWidth:0},`full-${i}`)),a&&e.jsxs("span",{style:{position:"relative",display:"inline-flex"},children:[e.jsx(o,{size:n,color:"#475569",strokeWidth:1.5}),e.jsx("span",{style:{position:"absolute",left:0,top:0,width:"50%",overflow:"hidden"},children:e.jsx(o,{size:n,fill:"#fbbf24",color:"#fbbf24",strokeWidth:0})})]}),Array.from({length:d}).map((t,i)=>e.jsx(o,{size:n,color:"#475569",strokeWidth:1.5},`empty-${i}`))]}),s&&i>0&&e.jsxs("span",{style:{color:"#64748b",fontSize:n-1},children:["(",(c=i,c>=1e6?`${(c/1e6).toFixed(1)}M`:c>=1e3?`${(c/1e3).toFixed(1)}K`:`${c}`),")"]})]});var c});function d(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:`${e}`}const c=t.memo(function({id:t,title:o,author:c="Creator",likeCount:p=0,viewCount:x=0,averageRating:f,ratingCount:g=0,timeText:h="2 days ago",thumbnailUrl:b,teaser_link:u,price:m,editions:j,owned:y=!1,collaborators:v,isCollaborative:k=!1,chapterCount:w,linkTo:z}){const C="string"==typeof m?parseFloat(m):m,$="string"==typeof j?parseInt(j):j,S=$&&$>0?`${$} edition${$>1?"s":""} available`:"Sold out",F=C&&C>0?`$${C.toFixed(2)}`:"Free",W=d(x),N=x>=100,I=x>=1e3,R=z||`/content/${t}`;!(null!=f&&g>0)||(Number(f).toFixed(1),d(g));const E=d(p),D=(null==c?void 0:c.startsWith("Creator #"))?null:c;return e.jsxs("div",{className:"yt-card",children:[e.jsxs(i,{to:R,className:"yt-thumb","aria-label":o,children:[e.jsx("img",{src:b,alt:o,onError:e=>{e.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="960" height="540"%3E%3Crect fill="%23111827" width="960" height="540"/%3E%3Ctext fill="%2394a3b8" font-family="sans-serif" font-size="24" x="50%25" y="50%25" text-anchor="middle" dominant-baseline="middle"%3EPreview%3C/text%3E%3C/svg%3E'}}),y&&e.jsx("div",{style:{position:"absolute",top:8,left:8},children:e.jsx(l,{owned:y})}),k&&!y&&e.jsxs("div",{style:{position:"absolute",top:8,left:8,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#000",padding:"4px 8px",borderRadius:6,fontSize:10,fontWeight:700,display:"flex",alignItems:"center",gap:4,zIndex:2},children:[e.jsx(n,{size:12}),"COLLAB"]}),w&&w>1&&e.jsxs("div",{style:{position:"absolute",bottom:8,left:8,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(4px)",padding:"3px 8px",borderRadius:4,fontSize:11,fontWeight:600,color:"#60a5fa"},children:[w," chapters"]}),void 0!==C&&!isNaN(C)&&e.jsx("div",{style:{position:"absolute",top:8,right:8,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(4px)",padding:"4px 8px",borderRadius:4,fontSize:12,fontWeight:700,color:C>0?"#10b981":"#94a3b8"},children:F})]}),e.jsxs("div",{className:"yt-info",children:[e.jsxs("div",{className:"yt-title",title:o,style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:o}),x>0&&e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:3,fontSize:11,fontWeight:I?700:N?600:500,color:I?"#f59e0b":N?"#10b981":"#94a3b8",background:I?"rgba(245, 158, 11, 0.15)":N?"rgba(16, 185, 129, 0.1)":"transparent",padding:N?"2px 6px":"0",borderRadius:4,flexShrink:0},children:[e.jsx(s,{size:12}),W]})]}),e.jsxs("div",{className:"yt-meta",children:[k&&v&&v.length>0?1===v.length?e.jsx(i,{to:`/profile/${v[0]}`,style:{color:"#60a5fa",textDecoration:"none"},onClick:e=>e.stopPropagation(),children:v[0]}):2===v.length?e.jsxs(e.Fragment,{children:[e.jsx(i,{to:`/profile/${v[0]}`,style:{color:"#60a5fa",textDecoration:"none"},onClick:e=>e.stopPropagation(),children:v[0]})," & ",e.jsx(i,{to:`/profile/${v[1]}`,style:{color:"#60a5fa",textDecoration:"none"},onClick:e=>e.stopPropagation(),children:v[1]})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{to:`/profile/${v[0]}`,style:{color:"#60a5fa",textDecoration:"none"},onClick:e=>e.stopPropagation(),children:v[0]}),` & ${v.length-1} others`]}):D?e.jsx(i,{to:`/profile/${D}`,style:{color:"#60a5fa",textDecoration:"none"},onClick:e=>e.stopPropagation(),children:c}):c," • ",e.jsx(a,{rating:f,count:g,size:11})," • ",e.jsx(r,{size:12,style:{display:"inline",verticalAlign:"middle",marginRight:2}}),E," • ",h]}),void 0!==$&&!isNaN($)&&e.jsx("div",{style:{fontSize:11,color:$>0?"#10b981":"#ef4444",fontWeight:600,marginTop:4},children:S})]})]})});export{a as S,c as V};
