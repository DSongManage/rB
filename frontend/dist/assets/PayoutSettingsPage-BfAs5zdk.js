import{j as e,P as t,a as n,T as i,b as r,L as s,c as o}from"./web3auth-ChsgSaJj.js";import{r as a,L as l}from"./router-zDWjfnwa.js";import{c as d,o as c,a as p,s as x,d as u,l as g,B as f,g as y,b as h,e as b,f as m}from"./bridgeApi-DxQSoQ_2.js";import{C as j}from"./circle-alert-BtSN2k02.js";import{C as S,T as k}from"./triangle-alert-B6EGeMpn.js";import{c as v,b as z,e as w,A as C}from"./index-k6dQoM7E.js";import{E as I}from"./external-link-00o2EaBU.js";import{R as A,T,A as R,u as W,i as $,g as M,U as B,a as D,b as _,c as E,d as U,e as F,f as P,h as L,j as N,C as Y}from"./web3authService-C4tanxeh.js";import{S as H}from"./star-1RpenP39.js";import{T as V}from"./trash-2-dDm9huAn.js";import{W as q}from"./wallet-75O3uuVP.js";import{L as G}from"./loader-D98hFaJs.js";import{S as O}from"./send-CaQIHHiD.js";import{A as X}from"./arrow-left-CwJBL0PZ.js";import{S as K}from"./shield-Bp55fCv8.js";import{C as J}from"./circle-check-D2XvKVWk.js";import{P as Q}from"./plus-DJKdWGb4.js";import{I as Z}from"./info-FBfPS8Of.js";import"./vendor-Cfs_Iq82.js";
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=v("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),te=v("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),ne=v("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),ie=v("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),re=v("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),se=v("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),oe="#334155",ae="#334155",le="#cbd5e1",de="#94a3b8",ce="#f59e0b",pe="#10b981",xe="rgba(16,185,129,0.15)",ue="#ef4444",ge="rgba(239,68,68,0.15)",fe="#f59e0b",ye="rgba(245,158,11,0.15)",he="#3b82f6",be=({status:t,hasCustomer:n,onStatusChange:i})=>{const[r,s]=a.useState(!1),[o,l]=a.useState(null),x=t||"not_started",u={not_started:{icon:j,label:"Not Started",description:"Complete identity verification to enable bank payouts.",color:de,bgColor:oe},pending:{icon:w,label:"Pending Review",description:"Your verification is being reviewed. This usually takes a few minutes.",color:fe,bgColor:ye},approved:{icon:z,label:"Verified",description:"Your identity has been verified. You can now link bank accounts.",color:pe,bgColor:xe},rejected:{icon:S,label:"Verification Failed",description:"Your verification was not approved. Please try again with valid documents.",color:ue,bgColor:ge},incomplete:{icon:j,label:"Incomplete",description:"Your verification is incomplete. Please complete all required steps.",color:fe,bgColor:ye}}[x],g=u.icon;return e.jsxs("div",{children:[e.jsxs("div",{style:{background:u.bgColor,borderRadius:12,padding:16,display:"flex",alignItems:"flex-start",gap:12},children:[e.jsx(g,{size:24,style:{color:u.color,flexShrink:0,marginTop:2}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:u.color,fontWeight:600,fontSize:15},children:u.label}),e.jsx("p",{style:{color:le,fontSize:13,margin:"4px 0 0",lineHeight:1.5},children:u.description})]})]}),o&&e.jsx("div",{style:{marginTop:16,padding:12,background:ge,border:`1px solid ${ue}40`,borderRadius:8,color:ue,fontSize:13},children:o}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:12},children:[("not_started"===x||"rejected"===x||"incomplete"===x)&&e.jsxs("button",{onClick:async()=>{s(!0),l(null);try{n||await d(),await c(),null==i||i()}catch(e){l(e instanceof Error?e.message:"Failed to start KYC")}finally{s(!1)}},disabled:r,style:{display:"inline-flex",alignItems:"center",gap:8,padding:"10px 20px",background:ce,color:"#000",border:"none",borderRadius:8,fontSize:14,fontWeight:600,cursor:r?"not-allowed":"pointer",opacity:r?.6:1},children:[e.jsx(I,{size:16}),n?"Continue Verification":"Start Verification"]}),"pending"===x&&e.jsxs("button",{onClick:async()=>{s(!0);try{await p(),null==i||i()}catch(e){}finally{s(!1)}},disabled:r,style:{display:"inline-flex",alignItems:"center",gap:8,padding:"10px 20px",background:oe,color:le,border:`1px solid ${ae}`,borderRadius:8,fontSize:14,fontWeight:500,cursor:r?"not-allowed":"pointer",opacity:r?.6:1},children:[e.jsx(A,{size:16,style:r?{animation:"spin 1s linear infinite"}:{}}),"Refresh Status"]})]}),e.jsxs("p",{style:{marginTop:16,fontSize:12,color:de,lineHeight:1.5},children:["Verification is powered by Bridge.xyz. Your data is securely handled according to their"," ",e.jsx("a",{href:"https://www.bridge.xyz/privacy",target:"_blank",rel:"noopener noreferrer",style:{color:he,textDecoration:"none"},onMouseEnter:e=>e.currentTarget.style.textDecoration="underline",onMouseLeave:e=>e.currentTarget.style.textDecoration="none",children:"privacy policy"}),"."]}),e.jsx("style",{children:"\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n      "})]})},me="#0f172a",je="#1e293b",Se="#334155",ke="#334155",ve="#f8fafc",ze="#cbd5e1",we="#94a3b8",Ce="#ef4444",Ie="rgba(239,68,68,0.15)",Ae="#3b82f6",Te="rgba(59,130,246,0.15)",Re=({account:t,onUpdate:n})=>{const[i,r]=a.useState(!1),[s,o]=a.useState(!1),[l,d]=a.useState(null);return e.jsxs("div",{style:{background:me,border:`1px solid ${ke}`,borderRadius:12,padding:16,position:"relative"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[e.jsx("div",{style:{padding:10,background:Se,borderRadius:10},children:e.jsx(ne,{size:20,style:{color:we}})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontWeight:600,color:ve,fontSize:15},children:t.account_name}),t.is_default&&e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"2px 8px",background:Te,color:Ae,fontSize:11,fontWeight:600,borderRadius:20},children:[e.jsx(H,{size:10}),"Default"]})]}),e.jsxs("p",{style:{fontSize:13,color:we,marginTop:4},children:[t.bank_name||"Bank Account"," • ",t.account_type]}),t.last_four&&e.jsxs("p",{style:{fontSize:12,color:we,marginTop:4},children:["****",t.last_four]})]})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{onClick:()=>o(!s),disabled:i,style:{padding:6,background:"transparent",border:"none",borderRadius:6,cursor:i?"not-allowed":"pointer",color:we},onMouseEnter:e=>e.currentTarget.style.background=Se,onMouseLeave:e=>e.currentTarget.style.background="transparent",children:e.jsx(ie,{size:18})}),s&&e.jsxs("div",{style:{position:"absolute",right:0,top:"100%",marginTop:4,width:180,background:je,border:`1px solid ${ke}`,borderRadius:10,boxShadow:"0 10px 25px rgba(0,0,0,0.3)",zIndex:10,overflow:"hidden"},children:[!t.is_default&&e.jsxs("button",{onClick:async()=>{r(!0),d(null);try{await x(t.id),null==n||n()}catch(e){d(e instanceof Error?e.message:"Failed to set default")}finally{r(!1),o(!1)}},disabled:i,style:{width:"100%",textAlign:"left",padding:"10px 14px",background:"transparent",border:"none",color:ze,fontSize:13,cursor:i?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:10},onMouseEnter:e=>e.currentTarget.style.background=Se,onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[e.jsx(H,{size:14}),"Set as Default"]}),e.jsxs("button",{onClick:async()=>{if(confirm("Are you sure you want to remove this bank account?")){r(!0),d(null);try{await u(t.id),null==n||n()}catch(e){d(e instanceof Error?e.message:"Failed to delete account")}finally{r(!1),o(!1)}}},disabled:i,style:{width:"100%",textAlign:"left",padding:"10px 14px",background:"transparent",border:"none",color:Ce,fontSize:13,cursor:i?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:10},onMouseEnter:e=>e.currentTarget.style.background=Ie,onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[e.jsx(V,{size:14}),"Remove Account"]})]})]})]}),l&&e.jsx("div",{style:{marginTop:12,padding:10,background:Ie,border:`1px solid ${Ce}40`,borderRadius:8,color:Ce,fontSize:13},children:l}),s&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:5},onClick:()=>o(!1)})]})},We="#0f172a",$e="#1e293b",Me="#334155",Be="#334155",De="#f8fafc",_e="#cbd5e1",Ee="#94a3b8",Ue="#10b981",Fe="rgba(16,185,129,0.15)",Pe="#ef4444",Le="rgba(239,68,68,0.15)",Ne="#f59e0b",Ye="rgba(245,158,11,0.15)",He="#3b82f6",Ve="rgba(59,130,246,0.15)",qe=({className:t=""})=>{const[n,i]=a.useState([]),[r,s]=a.useState(!0),[o,l]=a.useState(null),d=async()=>{s(!0),l(null);try{const e=await g();i(e.payouts)}catch(e){l(e instanceof Error?e.message:"Failed to load payouts")}finally{s(!1)}};a.useEffect(()=>{d()},[]);const c={pending:{icon:w,color:Ne,bgColor:Ye,label:"Pending"},processing:{icon:w,color:He,bgColor:Ve,label:"Processing"},completed:{icon:z,color:Ue,bgColor:Fe,label:"Completed"},failed:{icon:S,color:Pe,bgColor:Le,label:"Failed"}};return r?e.jsxs("div",{style:{background:We,border:`1px solid ${Be}`,borderRadius:12,padding:24},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"32px 0"},children:e.jsx(A,{size:24,style:{color:Ee,animation:"spin 1s linear infinite"}})}),e.jsx("style",{children:"\n          @keyframes spin {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n          }\n        "})]}):e.jsxs("div",{style:{background:We,border:`1px solid ${Be}`,borderRadius:12,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:16,borderBottom:`1px solid ${Be}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("h3",{style:{fontSize:16,fontWeight:600,color:De,margin:0},children:"Payout History"}),e.jsx("button",{onClick:d,title:"Refresh",style:{padding:8,background:"transparent",border:"none",borderRadius:6,cursor:"pointer",color:Ee},onMouseEnter:e=>e.currentTarget.style.background=Me,onMouseLeave:e=>e.currentTarget.style.background="transparent",children:e.jsx(A,{size:16})})]}),o&&e.jsx("div",{style:{padding:16,background:Le,color:Pe,fontSize:13},children:o}),0===n.length?e.jsxs("div",{style:{padding:32,textAlign:"center",color:Ee},children:[e.jsx("p",{style:{margin:0,fontSize:14},children:"No payouts yet"}),e.jsx("p",{style:{margin:"8px 0 0",fontSize:13},children:"Payouts appear here when USDC is converted to USD"})]}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:$e},children:[e.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ee,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"Date"}),e.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ee,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"USDC Amount"}),e.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ee,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"USD Deposited"}),e.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ee,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"Fee"}),e.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ee,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"Status"}),e.jsx("th",{style:{textAlign:"left",fontSize:11,fontWeight:600,color:Ee,textTransform:"uppercase",padding:"12px 16px",letterSpacing:"0.5px"},children:"Transaction"})]})}),e.jsx("tbody",{children:n.map((t,n)=>{const i=c[t.status],r=i.icon;return e.jsxs("tr",{style:{borderTop:n>0?`1px solid ${Be}`:void 0},onMouseEnter:e=>e.currentTarget.style.background=$e,onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[e.jsx("td",{style:{padding:"12px 16px",fontSize:13,color:_e},children:(s=t.initiated_at,new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}))}),e.jsxs("td",{style:{padding:"12px 16px",fontSize:13,fontWeight:500,color:De},children:["$",Number(t.usdc_amount).toFixed(2)]}),e.jsxs("td",{style:{padding:"12px 16px",fontSize:13,fontWeight:600,color:Ue},children:["$",Number(t.usd_amount).toFixed(2)]}),e.jsxs("td",{style:{padding:"12px 16px",fontSize:13,color:Ee},children:["$",Number(t.fee_amount).toFixed(2)]}),e.jsx("td",{style:{padding:"12px 16px"},children:e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6,padding:"4px 10px",background:i.bgColor,borderRadius:20},children:[e.jsx(r,{size:14,style:{color:i.color}}),e.jsx("span",{style:{fontSize:12,fontWeight:500,color:i.color},children:i.label})]})}),e.jsx("td",{style:{padding:"12px 16px"},children:t.source_tx_signature&&e.jsxs("a",{href:`https://solscan.io/tx/${t.source_tx_signature}`,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:4,fontSize:13,color:He,textDecoration:"none"},onMouseEnter:e=>e.currentTarget.style.textDecoration="underline",onMouseLeave:e=>e.currentTarget.style.textDecoration="none",children:["View",e.jsx(I,{size:12})]})})]},t.id);var s})})]})})]})};var Ge,Oe;function Xe(e,t,s,o,a=T,l=R){return function(e,t,n,s,o,a=T,l=R){const d=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:r.programId,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}];return new i({keys:d,programId:l,data:o})}(e,t,s,o,n.alloc(0),a,l)}(Oe=Ge||(Ge={}))[Oe.InitializeMint=0]="InitializeMint",Oe[Oe.InitializeAccount=1]="InitializeAccount",Oe[Oe.InitializeMultisig=2]="InitializeMultisig",Oe[Oe.Transfer=3]="Transfer",Oe[Oe.Approve=4]="Approve",Oe[Oe.Revoke=5]="Revoke",Oe[Oe.SetAuthority=6]="SetAuthority",Oe[Oe.MintTo=7]="MintTo",Oe[Oe.Burn=8]="Burn",Oe[Oe.CloseAccount=9]="CloseAccount",Oe[Oe.FreezeAccount=10]="FreezeAccount",Oe[Oe.ThawAccount=11]="ThawAccount",Oe[Oe.TransferChecked=12]="TransferChecked",Oe[Oe.ApproveChecked=13]="ApproveChecked",Oe[Oe.MintToChecked=14]="MintToChecked",Oe[Oe.BurnChecked=15]="BurnChecked",Oe[Oe.InitializeAccount2=16]="InitializeAccount2",Oe[Oe.SyncNative=17]="SyncNative",Oe[Oe.InitializeAccount3=18]="InitializeAccount3",Oe[Oe.InitializeMultisig2=19]="InitializeMultisig2",Oe[Oe.InitializeMint2=20]="InitializeMint2",Oe[Oe.GetAccountDataSize=21]="GetAccountDataSize",Oe[Oe.InitializeImmutableOwner=22]="InitializeImmutableOwner",Oe[Oe.AmountToUiAmount=23]="AmountToUiAmount",Oe[Oe.UiAmountToAmount=24]="UiAmountToAmount",Oe[Oe.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",Oe[Oe.TransferFeeExtension=26]="TransferFeeExtension",Oe[Oe.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",Oe[Oe.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",Oe[Oe.Reallocate=29]="Reallocate",Oe[Oe.MemoTransferExtension=30]="MemoTransferExtension",Oe[Oe.CreateNativeMint=31]="CreateNativeMint",Oe[Oe.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",Oe[Oe.InterestBearingMintExtension=33]="InterestBearingMintExtension",Oe[Oe.CpiGuardExtension=34]="CpiGuardExtension",Oe[Oe.InitializePermanentDelegate=35]="InitializePermanentDelegate",Oe[Oe.TransferHookExtension=36]="TransferHookExtension",Oe[Oe.MetadataPointerExtension=39]="MetadataPointerExtension",Oe[Oe.GroupPointerExtension=40]="GroupPointerExtension",Oe[Oe.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",Oe[Oe.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",Oe[Oe.PausableExtension=44]="PausableExtension";const Ke=s.struct([s.u8("instruction"),W("amount")]);function Je(e,r,s,o,a=[],l=T){const d=function(e,n,i){if(i.length){e.push({pubkey:n,isSigner:!1,isWritable:!1});for(const n of i)e.push({pubkey:n instanceof t?n:n.publicKey,isSigner:!0,isWritable:!1})}else e.push({pubkey:n,isSigner:!0,isWritable:!1});return e}([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0}],s,a),c=n.alloc(Ke.span);return Ke.encode({instruction:Ge.Transfer,amount:BigInt(o)},c),new i({keys:d,programId:l,data:c})}async function Qe(){try{const e=await fetch(`${C}/api/bridge/liquidation-addresses/`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch liquidation addresses");const t=await e.json(),n=t.results||t||[];return n.find(e=>e.is_primary)||n[0]||null}catch(e){return null}}async function Ze(e,n,i){const r=M(),s=new t(B),a=new t(n),l=await D(s,e,!1,T),d=await D(s,a,!0,T),c=new o;await r.getAccountInfo(d)||c.add(Xe(e,d,a,s,T,R));const p=BigInt(Math.floor(i*Math.pow(10,P)));return c.add(Je(l,d,e,p,[],T)),c}const et="#0f172a",tt="#1e293b",nt="#334155",it="#0f172a",rt="#334155",st="#f8fafc",ot="#cbd5e1",at="#94a3b8",lt="#f59e0b",dt="#10b981",ct="rgba(16,185,129,0.15)",pt="#ef4444",xt="rgba(239,68,68,0.15)",ut="rgba(245,158,11,0.15)",gt=({walletAddress:t,onWithdrawComplete:n,className:i=""})=>{const[r,s]=a.useState(""),[o,l]=a.useState(null),[d,c]=a.useState(null),[p,x]=a.useState(!1),[u,g]=a.useState(!1),[f,y]=a.useState(null),[h,b]=a.useState(null);a.useEffect(()=>{m(),S()},[t]);const m=async()=>{if(t){g(!0);try{const e=await E(t);l(e)}catch(e){}finally{g(!1)}}},S=async()=>{const e=await Qe();c(e)};return e.jsxs("div",{className:i,style:{backgroundColor:tt,borderRadius:"12px",padding:"24px",border:`1px solid ${rt}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:ut,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ee,{size:20,color:lt})}),e.jsxs("div",{children:[e.jsx("h3",{style:{color:st,fontSize:"18px",fontWeight:600,margin:0},children:"Withdraw to Bank"}),e.jsx("p",{style:{color:at,fontSize:"14px",margin:0},children:"Convert USDC to USD and deposit to your bank"})]})]}),e.jsxs("div",{style:{backgroundColor:et,borderRadius:"8px",padding:"16px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(q,{size:18,color:at}),e.jsx("span",{style:{color:ot,fontSize:"14px"},children:"Available Balance"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u?e.jsx(G,{size:16,color:at,className:"animate-spin"}):e.jsx("span",{style:{color:st,fontSize:"18px",fontWeight:600},children:null!==o?`${o.toFixed(2)} USDC`:"-- USDC"}),e.jsx("button",{onClick:m,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex"},title:"Refresh balance",children:e.jsx(A,{size:14,color:at})})]})]}),(null==d?void 0:d.external_account)&&e.jsxs("div",{style:{backgroundColor:et,borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(te,{size:18,color:at}),e.jsxs("div",{children:[e.jsx("span",{style:{color:ot,fontSize:"14px"},children:d.external_account.bank_name}),e.jsxs("span",{style:{color:at,fontSize:"14px",marginLeft:"8px"},children:["****",d.external_account.account_last_four]})]})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",color:ot,fontSize:"14px",marginBottom:"8px"},children:"Amount (USDC)"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"text",value:r,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&(s(t),y(null),b(null))},placeholder:"0.00",disabled:p,style:{width:"100%",padding:"12px 70px 12px 16px",backgroundColor:it,border:`1px solid ${f?pt:rt}`,borderRadius:"8px",color:st,fontSize:"18px",outline:"none",boxSizing:"border-box"}}),e.jsx("button",{onClick:()=>{null!==o&&s(o.toString())},disabled:p||null===o,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",backgroundColor:nt,color:lt,border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"MAX"})]}),e.jsx("p",{style:{color:at,fontSize:"12px",marginTop:"4px"},children:"Minimum withdrawal: $10 USDC"})]}),f&&e.jsxs("div",{style:{backgroundColor:xt,border:`1px solid ${pt}`,borderRadius:"8px",padding:"12px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(j,{size:18,color:pt}),e.jsx("span",{style:{color:pt,fontSize:"14px"},children:f})]}),h&&e.jsxs("div",{style:{backgroundColor:ct,border:`1px solid ${dt}`,borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(z,{size:18,color:dt}),e.jsx("span",{style:{color:dt,fontSize:"14px",fontWeight:600},children:"Withdrawal submitted!"})]}),e.jsx("p",{style:{color:ot,fontSize:"13px",margin:"0 0 8px 0"},children:"Your USDC has been sent to Bridge. It will be converted to USD and deposited to your bank within 1-2 business days."}),e.jsxs("a",{href:h.explorerLink,target:"_blank",rel:"noopener noreferrer",style:{color:lt,fontSize:"13px",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"4px"},children:["View transaction ",e.jsx(I,{size:12})]})]}),e.jsx("button",{onClick:async()=>{const e=parseFloat(r);if(!r||isNaN(e)||e<=0)y("Please enter a valid amount");else if(e<10)y("Minimum withdrawal is $10 USDC");else if(null!==o&&e>o)y("Insufficient balance");else if(d){x(!0),y(null),b(null);try{const t=await async function(e){try{if(e<=0)return{success:!1,error:"Amount must be greater than 0"};const t=await Qe();if(!t)return{success:!1,error:"No liquidation address found. Please complete Bridge setup first."};const n=await _(),i=await E(n.toString());if(i<e)return{success:!1,error:`Insufficient USDC balance. Available: ${i.toFixed(2)} USDC`};const r=await Ze(n,t.address,e),s=await U(r);return{success:!0,signature:s,explorerLink:F(s)}}catch(f){return{success:!1,error:f.message||"Failed to send transaction"}}}(e);t.success&&t.signature?(b({signature:t.signature,explorerLink:t.explorerLink||F(t.signature)}),s(""),m(),null==n||n()):y(t.error||"Withdrawal failed")}catch(t){y(t.message||"Failed to process withdrawal")}finally{x(!1)}}else y("No bank account linked. Please complete Bridge setup first.")},disabled:p||!r||!d,style:{width:"100%",padding:"14px",backgroundColor:p||!r?nt:lt,color:p||!r?at:et,border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:600,cursor:p||!r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:p?e.jsxs(e.Fragment,{children:[e.jsx(G,{size:18,className:"animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{size:18}),"Withdraw to Bank"]})}),e.jsx("p",{style:{color:at,fontSize:"12px",marginTop:"12px",textAlign:"center"},children:"Powered by Bridge.xyz. You'll be asked to authenticate with Web3Auth to sign the transaction."})]})},ft="#0f172a",yt="#1e293b",ht="#334155",bt="#0f172a",mt="#334155",jt="#f8fafc",St="#cbd5e1",kt="#94a3b8",vt="#f59e0b",zt="#10b981",wt="rgba(16,185,129,0.15)",Ct="#ef4444",It="rgba(239,68,68,0.15)",At="#f59e0b",Tt="rgba(245,158,11,0.15)",Rt="#3b82f6",Wt="rgba(59,130,246,0.15)",$t=({walletAddress:n,onSendComplete:i,className:r=""})=>{const[s,o]=a.useState(""),[l,d]=a.useState(""),[c,p]=a.useState(null),[x,u]=a.useState(null),[g,f]=a.useState(!1),[y,h]=a.useState(!1),[b,m]=a.useState(null),[S,v]=a.useState(null),[w,C]=a.useState(null),[R,W]=a.useState(!1),[P,Y]=a.useState(null);a.useEffect(()=>{H()},[n]),a.useEffect(()=>{s.length>=32?V(s):(C(null),W(!1),Y(null))},[s]);const H=async()=>{if(n){h(!0);try{const[e,t]=await Promise.all([E(n),L(n)]);p(e),u(t)}catch(e){}finally{h(!1)}}},V=async e=>{const i=$(e);if(C(i),i&&e!==n)try{const n=await async function(e){if(!$(e))return!1;const n=M(),i=new t(B),r=new t(e),s=await D(i,r,!0,T);return null===await n.getAccountInfo(s)}(e);W(n);const i=await async function(e,t=!1){const n=M();let i=0;t&&(i=await n.getMinimumBalanceForRentExemption(165));return(5e3+i)/1e9}(0,n);Y(i)}catch(r){}};return e.jsxs("div",{className:r,style:{backgroundColor:yt,borderRadius:"12px",padding:"24px",border:`1px solid ${mt}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:Wt,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(O,{size:20,color:Rt})}),e.jsxs("div",{children:[e.jsx("h3",{style:{color:jt,fontSize:"18px",fontWeight:600,margin:0},children:"Send USDC"}),e.jsx("p",{style:{color:kt,fontSize:"14px",margin:0},children:"Transfer USDC to any Solana wallet"})]})]}),e.jsxs("div",{style:{backgroundColor:ft,borderRadius:"8px",padding:"16px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(q,{size:16,color:kt}),e.jsx("span",{style:{color:St,fontSize:"14px"},children:"USDC Balance"})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:y?e.jsx(G,{size:14,color:kt,className:"animate-spin"}):e.jsx("span",{style:{color:jt,fontSize:"16px",fontWeight:600},children:null!==c?`${c.toFixed(2)} USDC`:"-- USDC"})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:kt,fontSize:"12px"},children:"SOL (for fees)"}),e.jsx("span",{style:{color:kt,fontSize:"12px"},children:null!==x?`${x.toFixed(4)} SOL`:"-- SOL"})]}),e.jsxs("button",{onClick:H,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",marginTop:"8px",display:"flex",alignItems:"center",gap:"4px",color:kt,fontSize:"12px"},children:[e.jsx(A,{size:12})," Refresh"]})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",color:St,fontSize:"14px",marginBottom:"8px"},children:"Recipient Address"}),e.jsx("input",{type:"text",value:s,onChange:e=>{o(e.target.value.trim()),m(null),v(null)},placeholder:"Enter Solana wallet address",disabled:g,style:{width:"100%",padding:"12px 16px",backgroundColor:bt,border:`1px solid ${!1===w?Ct:!0===w?zt:mt}`,borderRadius:"8px",color:jt,fontSize:"14px",outline:"none",boxSizing:"border-box",fontFamily:"monospace"}}),!1===w&&e.jsx("p",{style:{color:Ct,fontSize:"12px",marginTop:"4px"},children:"Invalid Solana address"}),!0===w&&s&&e.jsxs("a",{href:N(s),target:"_blank",rel:"noopener noreferrer",style:{color:kt,fontSize:"12px",marginTop:"4px",display:"inline-flex",alignItems:"center",gap:"4px",textDecoration:"none"},children:["View on Solscan ",e.jsx(I,{size:10})]})]}),R&&e.jsxs("div",{style:{backgroundColor:Tt,border:`1px solid ${At}`,borderRadius:"8px",padding:"12px",marginBottom:"16px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[e.jsx(k,{size:16,color:At,style:{marginTop:"2px"}}),e.jsxs("div",{children:[e.jsx("span",{style:{color:At,fontSize:"13px"},children:"Recipient doesn't have a USDC account. One will be created automatically."}),null!==P&&e.jsxs("p",{style:{color:kt,fontSize:"12px",margin:"4px 0 0 0"},children:["Estimated fee: ~",P.toFixed(5)," SOL"]})]})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",color:St,fontSize:"14px",marginBottom:"8px"},children:"Amount (USDC)"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"text",value:l,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&(d(t),m(null),v(null))},placeholder:"0.00",disabled:g,style:{width:"100%",padding:"12px 70px 12px 16px",backgroundColor:bt,border:`1px solid ${b?Ct:mt}`,borderRadius:"8px",color:jt,fontSize:"18px",outline:"none",boxSizing:"border-box"}}),e.jsx("button",{onClick:()=>{null!==c&&d(c.toString())},disabled:g||null===c,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",backgroundColor:ht,color:vt,border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"MAX"})]})]}),b&&e.jsxs("div",{style:{backgroundColor:It,border:`1px solid ${Ct}`,borderRadius:"8px",padding:"12px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(j,{size:18,color:Ct}),e.jsx("span",{style:{color:Ct,fontSize:"14px"},children:b})]}),S&&e.jsxs("div",{style:{backgroundColor:wt,border:`1px solid ${zt}`,borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(z,{size:18,color:zt}),e.jsx("span",{style:{color:zt,fontSize:"14px",fontWeight:600},children:"Transfer successful!"})]}),e.jsxs("a",{href:S.explorerLink,target:"_blank",rel:"noopener noreferrer",style:{color:vt,fontSize:"13px",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"4px"},children:["View transaction ",e.jsx(I,{size:12})]})]}),e.jsx("button",{onClick:async()=>{const e=parseFloat(l);if(s)if($(s))if(s!==n)if(!l||isNaN(e)||e<=0)m("Please enter a valid amount");else if(null!==c&&e>c)m("Insufficient USDC balance");else if(null!==x&&x<.01)m("Insufficient SOL for transaction fees. Need at least 0.01 SOL.");else{f(!0),m(null),v(null);try{const t=await async function(e,t){try{if(!$(e))return{success:!1,error:"Invalid Solana address"};if(t<=0)return{success:!1,error:"Amount must be greater than 0"};const n=await _();if(n.toString()===e)return{success:!1,error:"Cannot send to your own wallet"};const i=await E(n.toString());if(i<t)return{success:!1,error:`Insufficient USDC balance. Available: ${i.toFixed(2)} USDC`};const r=await Ze(n,e,t),s=await U(r);return{success:!0,signature:s,explorerLink:F(s)}}catch(b){return{success:!1,error:b.message||"Failed to send transaction"}}}(s,e);t.success&&t.signature?(v({signature:t.signature,explorerLink:t.explorerLink||F(t.signature)}),d(""),o(""),H(),null==i||i()):m(t.error||"Transfer failed")}catch(t){m(t.message||"Failed to send transaction")}finally{f(!1)}}else m("Cannot send to your own wallet");else m("Invalid Solana address");else m("Please enter a recipient address")},disabled:g||!l||!s||!1===w,style:{width:"100%",padding:"14px",backgroundColor:!g&&l&&s?Rt:ht,color:!g&&l&&s?jt:kt,border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:600,cursor:!g&&l&&s?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:g?e.jsxs(e.Fragment,{children:[e.jsx(G,{size:18,className:"animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{size:18}),"Send USDC"]})}),e.jsx("p",{style:{color:kt,fontSize:"12px",marginTop:"12px",textAlign:"center"},children:"You'll be asked to authenticate with Web3Auth to sign the transaction."})]})},Mt="#0f172a",Bt="#1e293b",Dt="#334155",_t="#334155",Et="#475569",Ut="#f8fafc",Ft="#cbd5e1",Pt="#94a3b8",Lt="#f59e0b",Nt="#fbbf24",Yt="#10b981",Ht="rgba(16,185,129,0.1)",Vt="#ef4444",qt="rgba(239,68,68,0.1)",Gt="rgba(245,158,11,0.1)",Ot="#3b82f6",Xt="rgba(59,130,246,0.1)",Kt=()=>{const[t,n]=a.useState(null),[i,r]=a.useState([]),[s,o]=a.useState(null),[d,c]=a.useState(!0),[p,x]=a.useState(null),[u,g]=a.useState(!1),[S,k]=a.useState(!1),[v,z]=a.useState("withdraw"),I=async()=>{c(!0),x(null);try{const[e,t,i]=await Promise.all([y(),h().catch(()=>({accounts:[]})),fetch(`${C}/api/users/profile/`,{credentials:"include"}).then(e=>e.ok?e.json():null).catch(()=>null)]);n(e),r(t.accounts||[]),(null==i?void 0:i.wallet_address)&&o(i.wallet_address)}catch(e){x(e instanceof Error?e.message:"Failed to load payout settings")}finally{c(!1)}};a.useEffect(()=>{I()},[]);const T=async()=>{g(!0);try{await b(),await I()}catch(e){x(e instanceof Error?e.message:"Failed to link bank account")}finally{g(!1)}},R=(()=>{let e=0;return"approved"===(null==t?void 0:t.kyc_status)&&e++,i.length>0&&e++,(null==t?void 0:t.has_liquidation_address)&&e++,{completed:e,total:3,percentage:Math.round(e/3*100)}})();return d?e.jsxs("div",{style:{minHeight:"100vh",background:Mt,display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(A,{size:40,style:{color:Lt,animation:"spin 1s linear infinite",marginBottom:16}}),e.jsx("div",{style:{color:Pt,fontSize:14},children:"Loading payout settings..."})]}),e.jsx("style",{children:"\n          @keyframes spin {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n          }\n        "})]}):e.jsx("div",{style:{minHeight:"100vh",background:Mt,padding:"24px 16px 48px"},children:e.jsxs("div",{style:{maxWidth:900,margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:32},children:[e.jsxs(l,{to:"/profile",style:{display:"inline-flex",alignItems:"center",gap:8,color:Pt,textDecoration:"none",fontSize:14,marginBottom:16,transition:"color 0.2s"},onMouseEnter:e=>e.currentTarget.style.color=Ut,onMouseLeave:e=>e.currentTarget.style.color=Pt,children:[e.jsx(X,{size:16}),"Back to Profile"]}),e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",gap:16},children:[e.jsxs("div",{children:[e.jsxs("h1",{style:{color:Ut,fontSize:28,fontWeight:700,margin:0,display:"flex",alignItems:"center",gap:12},children:[e.jsx(te,{size:32,style:{color:Lt}}),"Payout Settings"]}),e.jsx("p",{style:{color:Pt,marginTop:8,fontSize:15},children:"Configure how you receive your earnings from sales"})]}),e.jsxs("div",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:12,padding:"16px 20px",minWidth:200},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsx("span",{style:{color:Ft,fontSize:13},children:"Setup Progress"}),e.jsxs("span",{style:{color:100===R.percentage?Yt:Lt,fontSize:14,fontWeight:600},children:[R.completed,"/",R.total]})]}),e.jsx("div",{style:{height:6,background:Dt,borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${R.percentage}%`,background:100===R.percentage?`linear-gradient(90deg, ${Yt}, #34d399)`:`linear-gradient(90deg, ${Lt}, ${Nt})`,borderRadius:3,transition:"width 0.3s ease"}})})]})]})]}),p&&e.jsxs("div",{style:{background:qt,border:`1px solid ${Vt}`,borderRadius:12,padding:16,marginBottom:24,display:"flex",alignItems:"center",gap:12},children:[e.jsx(j,{size:20,style:{color:Vt,flexShrink:0}}),e.jsx("span",{style:{color:Vt,flex:1,fontSize:14},children:p}),e.jsx("button",{onClick:()=>x(null),style:{background:"transparent",border:"none",color:Vt,cursor:"pointer",padding:4,fontSize:18,lineHeight:1},children:"×"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[e.jsxs("section",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:16,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${_t}`,display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:10,background:"approved"===(null==t?void 0:t.kyc_status)?Ht:`${Lt}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(K,{size:20,style:{color:"approved"===(null==t?void 0:t.kyc_status)?Yt:Lt}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h2",{style:{color:Ut,fontSize:16,fontWeight:600,margin:0},children:"Step 1: Identity Verification"}),e.jsx("p",{style:{color:Pt,fontSize:13,margin:"4px 0 0"},children:"Verify your identity to enable payouts"})]}),"approved"===(null==t?void 0:t.kyc_status)&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:Yt,fontSize:13,fontWeight:600},children:[e.jsx(J,{size:16}),"Verified"]})]}),e.jsx("div",{style:{padding:24},children:e.jsx(be,{status:(null==t?void 0:t.kyc_status)||null,hasCustomer:(null==t?void 0:t.has_bridge_customer)||!1,onStatusChange:I})})]}),e.jsxs("section",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:16,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${_t}`,display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:10,background:i.length>0?Ht:`${Lt}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(f,{size:20,style:{color:i.length>0?Yt:Lt}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h2",{style:{color:Ut,fontSize:16,fontWeight:600,margin:0},children:"Step 2: Bank Accounts"}),e.jsx("p",{style:{color:Pt,fontSize:13,margin:"4px 0 0"},children:"Link your bank account for direct deposits"})]}),"approved"===(null==t?void 0:t.kyc_status)&&e.jsxs("button",{onClick:T,disabled:u,style:{display:"flex",alignItems:"center",gap:6,padding:"8px 16px",background:Lt,color:"#000",border:"none",borderRadius:8,fontSize:13,fontWeight:600,cursor:u?"not-allowed":"pointer",opacity:u?.6:1,transition:"all 0.2s"},children:[e.jsx(Q,{size:16}),u?"Linking...":"Link Account"]})]}),e.jsx("div",{style:{padding:24},children:"approved"!==(null==t?void 0:t.kyc_status)?e.jsxs("div",{style:{background:Dt,borderRadius:12,padding:32,textAlign:"center"},children:[e.jsx(w,{size:32,style:{color:Pt,marginBottom:12}}),e.jsx("p",{style:{color:Pt,margin:0,fontSize:14},children:"Complete identity verification first to link bank accounts"})]}):0===i.length?e.jsxs("div",{style:{background:`linear-gradient(135deg, ${Mt} 0%, ${Dt} 100%)`,border:`1px dashed ${Et}`,borderRadius:12,padding:32,textAlign:"center"},children:[e.jsx(Y,{size:40,style:{color:Pt,marginBottom:16}}),e.jsx("p",{style:{color:Ft,margin:"0 0 16px",fontSize:15},children:"No bank accounts linked yet"}),e.jsx("p",{style:{color:Pt,margin:"0 0 20px",fontSize:13},children:"Link a bank account to receive direct deposits from your sales"}),e.jsxs("button",{onClick:T,disabled:u,style:{display:"inline-flex",alignItems:"center",gap:8,padding:"12px 24px",background:Lt,color:"#000",border:"none",borderRadius:10,fontSize:14,fontWeight:600,cursor:u?"not-allowed":"pointer",opacity:u?.6:1},children:[e.jsx(Q,{size:18}),u?"Linking...":"Link Your First Bank Account"]})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:i.map(t=>e.jsx(Re,{account:t,onUpdate:I},t.id))})})]}),"approved"===(null==t?void 0:t.kyc_status)&&i.length>0&&e.jsxs("section",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:16,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${_t}`,display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:10,background:(null==t?void 0:t.has_liquidation_address)?Ht:`${Lt}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(q,{size:20,style:{color:(null==t?void 0:t.has_liquidation_address)?Yt:Lt}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h2",{style:{color:Ut,fontSize:16,fontWeight:600,margin:0},children:"Step 3: Payout Address"}),e.jsx("p",{style:{color:Pt,fontSize:13,margin:"4px 0 0"},children:"Enable automatic USDC to USD conversion"})]}),(null==t?void 0:t.has_liquidation_address)&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:Yt,fontSize:13,fontWeight:600},children:[e.jsx(J,{size:16}),"Active"]})]}),e.jsx("div",{style:{padding:24},children:(null==t?void 0:t.has_liquidation_address)?e.jsxs("div",{style:{background:Ht,border:`1px solid ${Yt}40`,borderRadius:12,padding:20,display:"flex",alignItems:"flex-start",gap:16},children:[e.jsx(J,{size:24,style:{color:Yt,flexShrink:0,marginTop:2}}),e.jsxs("div",{children:[e.jsx("div",{style:{color:Yt,fontWeight:600,fontSize:15,marginBottom:4},children:"Payout Address Active"}),e.jsx("p",{style:{color:Ft,margin:0,fontSize:13,lineHeight:1.5},children:"Your payout address is set up and ready to receive USDC. Funds will automatically convert to USD and deposit to your bank account."})]})]}):e.jsxs("div",{style:{background:`linear-gradient(135deg, ${Mt} 0%, ${Dt} 100%)`,border:`1px dashed ${Et}`,borderRadius:12,padding:32,textAlign:"center"},children:[e.jsx(se,{size:40,style:{color:Lt,marginBottom:16}}),e.jsx("p",{style:{color:Ft,margin:"0 0 12px",fontSize:15},children:"Create a payout address for automatic conversions"}),e.jsx("p",{style:{color:Pt,margin:"0 0 20px",fontSize:13,maxWidth:400,marginLeft:"auto",marginRight:"auto"},children:"Once created, earnings sent to this address will automatically convert to USD and deposit to your bank account"}),e.jsx("button",{onClick:async()=>{const e=i.find(e=>e.is_default)||i[0];if(e){k(!0);try{await m(e.id),await I()}catch(t){x(t instanceof Error?t.message:"Failed to create payout address")}finally{k(!1)}}else x("Please link a bank account first")},disabled:S,style:{display:"inline-flex",alignItems:"center",gap:8,padding:"12px 24px",background:Yt,color:"#fff",border:"none",borderRadius:10,fontSize:14,fontWeight:600,cursor:S?"not-allowed":"pointer",opacity:S?.6:1},children:S?e.jsxs(e.Fragment,{children:[e.jsx(A,{size:16,style:{animation:"spin 1s linear infinite"}}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{size:18}),"Create Payout Address"]})})]})})]}),s&&e.jsxs("section",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:16,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${_t}`,display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:10,background:`${Lt}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(O,{size:20,style:{color:Lt}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h2",{style:{color:Ut,fontSize:16,fontWeight:600,margin:0},children:"Transfer USDC"}),e.jsx("p",{style:{color:Pt,fontSize:13,margin:"4px 0 0"},children:"Withdraw to bank or send to external wallet"})]})]}),e.jsxs("div",{style:{display:"flex",borderBottom:`1px solid ${_t}`,padding:"0 24px"},children:[e.jsxs("button",{onClick:()=>z("withdraw"),style:{padding:"12px 20px",background:"none",border:"none",color:"withdraw"===v?Lt:Pt,fontSize:14,fontWeight:600,cursor:"pointer",borderBottom:"withdraw"===v?`2px solid ${Lt}`:"2px solid transparent",marginBottom:-1,display:"flex",alignItems:"center",gap:8},children:[e.jsx(ee,{size:16}),"Withdraw to Bank"]}),e.jsxs("button",{onClick:()=>z("send"),style:{padding:"12px 20px",background:"none",border:"none",color:"send"===v?Ot:Pt,fontSize:14,fontWeight:600,cursor:"pointer",borderBottom:"send"===v?`2px solid ${Ot}`:"2px solid transparent",marginBottom:-1,display:"flex",alignItems:"center",gap:8},children:[e.jsx(O,{size:16}),"Send to Wallet"]})]}),e.jsx("div",{style:{padding:24},children:"withdraw"===v?(null==t?void 0:t.is_fully_setup)?e.jsx(gt,{walletAddress:s,onWithdrawComplete:I}):e.jsxs("div",{style:{background:Dt,borderRadius:12,padding:32,textAlign:"center"},children:[e.jsx(te,{size:40,style:{color:Pt,marginBottom:16}}),e.jsx("p",{style:{color:Ft,margin:"0 0 8px",fontSize:15},children:"Complete Bridge Setup First"}),e.jsx("p",{style:{color:Pt,margin:0,fontSize:13},children:"Finish identity verification, link a bank account, and create a payout address to enable withdrawals."})]}):e.jsx($t,{walletAddress:s,onSendComplete:I})})]}),!s&&e.jsxs("section",{style:{background:Gt,border:`1px solid ${Lt}40`,borderRadius:16,padding:24,display:"flex",alignItems:"flex-start",gap:16},children:[e.jsx(q,{size:24,style:{color:Lt,flexShrink:0}}),e.jsxs("div",{children:[e.jsx("h3",{style:{color:Ut,fontSize:16,fontWeight:600,margin:"0 0 8px"},children:"Wallet Not Connected"}),e.jsxs("p",{style:{color:Ft,margin:0,fontSize:14},children:["You need to connect a Web3Auth wallet to transfer USDC. Go to your"," ",e.jsx(l,{to:"/profile",style:{color:Lt},children:"Profile"})," to set up your wallet."]})]})]}),(null==t?void 0:t.is_fully_setup)&&e.jsxs("section",{style:{background:Bt,border:`1px solid ${_t}`,borderRadius:16,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${_t}`,display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:10,background:`${Lt}15`,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(re,{size:20,style:{color:Lt}})}),e.jsxs("div",{children:[e.jsx("h2",{style:{color:Ut,fontSize:16,fontWeight:600,margin:0},children:"Payout History"}),e.jsx("p",{style:{color:Pt,fontSize:13,margin:"4px 0 0"},children:"View your past payouts and transactions"})]})]}),e.jsx("div",{style:{padding:24},children:e.jsx(qe,{})})]}),e.jsx("section",{style:{background:`linear-gradient(135deg, ${Xt} 0%, rgba(59,130,246,0.05) 100%)`,border:`1px solid ${Ot}30`,borderRadius:16,padding:24},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:16},children:[e.jsx("div",{style:{width:44,height:44,borderRadius:12,background:Xt,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsx(Z,{size:22,style:{color:Ot}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h3",{style:{color:Ut,fontSize:16,fontWeight:600,margin:"0 0 12px"},children:"How Direct Bank Deposits Work"}),e.jsx("div",{style:{display:"grid",gap:10},children:[{num:1,text:"Complete identity verification (KYC) - usually takes a few minutes"},{num:2,text:"Link your bank account securely via Plaid or manual entry"},{num:3,text:"Create a payout address to enable USDC to USD conversion"},{num:4,text:"Transfer USDC from your wallet to withdraw to bank or send externally"},{num:5,text:"Withdrawals convert to USD and deposit within 1-2 business days"}].map(({num:t,text:n})=>e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[e.jsx("div",{style:{width:24,height:24,borderRadius:6,background:Ot,color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,flexShrink:0},children:t}),e.jsx("span",{style:{color:Ft,fontSize:14,lineHeight:1.5},children:n})]},t))}),e.jsx("p",{style:{color:Pt,fontSize:12,margin:"16px 0 0",paddingTop:12,borderTop:`1px solid ${Ot}20`},children:"Powered by Bridge.xyz. Funds typically arrive within 1-2 business days."})]})]})})]})]})})};export{Kt as PayoutSettingsPage,Kt as default};
