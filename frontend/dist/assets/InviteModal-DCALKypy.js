import{c as e,d as t,C as i,U as r}from"./index-CceaTp3C.js";import{j as s}from"./web3auth-BGmWjNJV.js";import{r as o}from"./router-CzH47hF_.js";import{C as a,P as n}from"./plus-CWIFeIQz.js";import{B as l}from"./book-open-S28DUXtz.js";import{P as d,M as c}from"./palette-CH5Fr53H.js";import{F as p}from"./film-C0tMLN81.js";import{B as u}from"./map-pin-CXz3kyWb.js";import{V as b,I as g}from"./video-68O5Y_rD.js";import{F as h}from"./file-text-BUkKvXvg.js";import{E as f}from"./eye-BeY39ilT.js";import{P as x}from"./pen-Cl9HubNc.js";
/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=e("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),m=e("brush",[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]]),j=e("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),v=e("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),k=e("mic-vocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]),S=e("paint-bucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]),z=e("scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),w=e("sliders-vertical",[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]]),C=e("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),R=({icon:e,size:o=20})=>{const a={size:o,strokeWidth:1.5};switch(e){case"pen":return s.jsx(x,{...a});case"users":return s.jsx(r,{...a});case"palette":return s.jsx(d,{...a});case"image":return s.jsx(g,{...a});case"check-circle":return s.jsx(i,{...a});case"spell-check":case"file-text":return s.jsx(h,{...a});case"microphone":return s.jsx(k,{...a});case"brush":return s.jsx(m,{...a});case"paint-brush":return s.jsx(S,{...a});case"eye":return s.jsx(f,{...a});case"music":return s.jsx(c,{...a});case"sliders":return s.jsx(w,{...a});case"mic":return s.jsx(v,{...a});case"volume-2":return s.jsx(C,{...a});case"film":return s.jsx(p,{...a});case"video":return s.jsx(b,{...a});case"scissors":return s.jsx(z,{...a});case"play-circle":return s.jsx(j,{...a});case"briefcase":return s.jsx(u,{...a});default:return s.jsx(t,{...a})}},T=[{value:"book",label:"Book",icon:s.jsx(l,{size:28}),description:"Written content with chapters"},{value:"art",label:"Art",icon:s.jsx(d,{size:28}),description:"Visual artwork and illustrations"},{value:"music",label:"Music",icon:s.jsx(c,{size:28}),description:"Audio tracks and albums"},{value:"video",label:"Film",icon:s.jsx(p,{size:28}),description:"Video content and films"}],W="Hi! I'd love to collaborate with you on an upcoming project.\n\n**Project Vision:**\n[Describe your project idea here]\n\n**Your Role:**\n[What you'd like them to contribute]\n\nLooking forward to creating something amazing together!",I=(e=14)=>{const t=new Date;return t.setDate(t.getDate()+e),t.toISOString().slice(0,16)};function _({open:e,onClose:t,recipient:i,projectId:r,projectTitle:l,projectType:d}){var c,p;const[u,b]=o.useState(W),[g,h]=o.useState(50),[f,x]=o.useState(""),[y,m]=o.useState(!1),[j,v]=o.useState(!1),[k,S]=o.useState(""),[z,w]=o.useState(""),[C,_]=o.useState(d||"book"),[M,B]=o.useState([]),[D,A]=o.useState(null),[q,P]=o.useState(!1),[F,L]=o.useState(!1),[H,$]=o.useState([]),[V,O]=o.useState(!1),[X,E]=o.useState(!0),[U,N]=o.useState(!0),[Y,J]=o.useState(!1),[Z,G]=o.useState(!1);o.useEffect(()=>{if(!e)return;(async()=>{P(!0);try{const e=await fetch(`/api/role-definitions/?project_type=${C}`,{credentials:"include"});if(e.ok){const t=await e.json();B(t)}}catch(e){}finally{P(!1)}})()},[C,e]);if(!e)return null;const K={green:{bg:"#10b981",text:"#fff"},yellow:{bg:"#f59e0b",text:"#000"},red:{bg:"#ef4444",text:"#fff"}}[i.status_category||"green"];const Q=(e,t,i)=>{$(H.map(r=>r.id===e?{...r,[t]:i}:r))},ee=()=>{b(W),h(50),x(""),A(null),L(!1),_(d||"book"),$([]),S(""),w(""),E(!0),N(!0),J(!1),G(!1)};return s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"grid",placeItems:"center",zIndex:1e3,padding:20},children:s.jsxs("div",{style:{background:"#0f172a",border:"1px solid #334155",borderRadius:16,width:"100%",maxWidth:1e3,maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0,0,0,0.5)"},children:[s.jsxs("div",{style:{padding:24,borderBottom:"1px solid #334155",display:"flex",alignItems:"center",gap:16,background:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)"},children:[s.jsx("div",{style:{width:64,height:64,borderRadius:12,background:i.avatar_url?`url(${i.avatar_url})`:"#1e293b",backgroundSize:"cover",display:"grid",placeItems:"center",color:"#f59e0b",fontWeight:700,fontSize:24,border:"2px solid #334155"},children:!i.avatar_url&&i.username.slice(0,1).toUpperCase()}),s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:4},children:[s.jsxs("span",{style:{color:"#f8fafc",fontWeight:600,fontSize:20},children:["@",i.username]}),i.status&&s.jsx("div",{style:{background:K.bg,color:K.text,fontSize:10,fontWeight:600,padding:"4px 10px",borderRadius:4,letterSpacing:.3},children:i.status})]}),i.display_name&&s.jsx("div",{style:{color:"#cbd5e1",fontSize:14,marginBottom:8},children:i.display_name}),l&&s.jsxs("div",{style:{color:"#f59e0b",fontSize:12,fontWeight:600},children:["Inviting to: ",l]}),s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:8},children:[null==(c=i.roles)?void 0:c.map((e,t)=>s.jsx("span",{style:{background:"rgba(245,158,11,0.15)",color:"#f59e0b",fontSize:10,fontWeight:600,padding:"2px 6px",borderRadius:3,border:"1px solid rgba(245,158,11,0.4)"},children:e},`r-${t}`)),null==(p=i.genres)?void 0:p.map((e,t)=>s.jsx("span",{style:{background:"rgba(59,130,246,0.15)",color:"#3b82f6",fontSize:10,fontWeight:600,padding:"2px 6px",borderRadius:3,border:"1px solid rgba(59,130,246,0.4)"},children:e},`g-${t}`))]})]}),s.jsx("button",{onClick:t,style:{background:"transparent",border:"none",color:"#94a3b8",fontSize:24,cursor:"pointer",padding:8},children:"×"})]}),s.jsxs("div",{style:{padding:24,display:"grid",gap:20},children:[!r&&s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",color:"#cbd5e1",fontSize:13,fontWeight:600,marginBottom:12},children:["Project Type ",s.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12},children:T.map(e=>s.jsxs("button",{type:"button",onClick:()=>(e=>{switch(_(e),A(null),L(!1),x(""),e){case"book":E(!0),N(!0),J(!1),G(!1);break;case"art":E(!1),N(!0),J(!1),G(!1);break;case"music":E(!1),N(!0),J(!0),G(!1);break;case"video":E(!1),N(!0),J(!0),G(!0)}})(e.value),style:{background:C===e.value?"rgba(245,158,11,0.15)":"#1e293b",border:"2px solid "+(C===e.value?"#f59e0b":"#334155"),borderRadius:12,padding:16,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:8,transition:"all 0.2s ease"},children:[s.jsx("span",{style:{color:C===e.value?"#f59e0b":"#94a3b8"},children:e.icon}),s.jsx("span",{style:{color:C===e.value?"#f59e0b":"#f8fafc",fontSize:14,fontWeight:600},children:e.label}),s.jsx("span",{style:{color:"#64748b",fontSize:11,textAlign:"center",lineHeight:1.3},children:e.description})]},e.value))})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",color:"#cbd5e1",fontSize:13,fontWeight:600,marginBottom:12},children:["Their Role ",s.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),q?s.jsx("div",{style:{color:"#64748b",fontSize:13,padding:12},children:"Loading roles..."}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:10,marginBottom:12},children:[M.map(e=>s.jsxs("button",{type:"button",onClick:()=>(e=>{var t,i,r,s,o;if(A(e),L(!1),e){const a=M.find(t=>t.id===e);if(a){x(a.name);const e=a.default_permissions,n=(null==(t=e.edit)?void 0:t.types)||[];E(n.includes("text")||(null==(i=e.create)?void 0:i.includes("text"))),N(n.includes("image")||(null==(r=e.create)?void 0:r.includes("image"))),J(n.includes("audio")||(null==(s=e.create)?void 0:s.includes("audio"))),G(n.includes("video")||(null==(o=e.create)?void 0:o.includes("video")))}}else x("")})(e.id),style:{background:D===e.id?"rgba(245,158,11,0.15)":"#1e293b",border:"2px solid "+(D===e.id?"#f59e0b":"#334155"),borderRadius:10,padding:"12px 10px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:6,transition:"all 0.2s ease",position:"relative"},children:[D===e.id&&s.jsx("div",{style:{position:"absolute",top:6,right:6,background:"#f59e0b",borderRadius:"50%",width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(a,{size:10,color:"#000",strokeWidth:3})}),s.jsx("div",{style:{width:36,height:36,borderRadius:8,background:`${e.color}20`,display:"flex",alignItems:"center",justifyContent:"center",color:e.color},children:s.jsx(R,{icon:e.icon,size:20})}),s.jsx("span",{style:{color:D===e.id?"#f59e0b":"#f8fafc",fontSize:12,fontWeight:600,textAlign:"center"},children:e.name}),s.jsxs("span",{style:{color:"#64748b",fontSize:9,textAlign:"center",lineHeight:1.2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:[e.description.slice(0,50),e.description.length>50?"...":""]})]},e.id)),s.jsxs("button",{type:"button",onClick:()=>{A(null),L(!0),x("")},style:{background:F?"rgba(245,158,11,0.15)":"#1e293b",border:"2px solid "+(F?"#f59e0b":"#334155"),borderRadius:10,padding:"12px 10px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:6,transition:"all 0.2s ease"},children:[s.jsx("div",{style:{width:36,height:36,borderRadius:8,background:"rgba(148, 163, 184, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8"},children:s.jsx(n,{size:20,strokeWidth:1.5})}),s.jsx("span",{style:{color:F?"#f59e0b":"#94a3b8",fontSize:12,fontWeight:600},children:"Custom Role"}),s.jsx("span",{style:{color:"#64748b",fontSize:9,textAlign:"center"},children:"Define your own"})]})]}),F&&s.jsx("input",{type:"text",value:f,onChange:e=>x(e.target.value),placeholder:"Enter custom role name...",style:{width:"100%",background:"#1e293b",border:"1px solid #f59e0b",borderRadius:8,padding:12,color:"#f8fafc",fontSize:14}}),D&&!F&&s.jsx("div",{style:{background:"rgba(245,158,11,0.1)",border:"1px solid rgba(245,158,11,0.3)",borderRadius:8,padding:12},children:(()=>{var e,t,i,r;const o=M.find(e=>e.id===D);return o?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{color:"#f59e0b",fontSize:13,fontWeight:600,marginBottom:4},children:o.name}),s.jsx("div",{style:{color:"#94a3b8",fontSize:12,marginBottom:8},children:o.description}),s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:[(null==(e=o.default_permissions.create)?void 0:e.length)>0&&s.jsxs("span",{style:{background:"rgba(16,185,129,0.15)",color:"#10b981",fontSize:10,padding:"2px 8px",borderRadius:4},children:["Can create: ",o.default_permissions.create.join(", ")]}),(null==(i=null==(t=o.default_permissions.edit)?void 0:t.types)?void 0:i.length)>0&&s.jsxs("span",{style:{background:"rgba(59,130,246,0.15)",color:"#3b82f6",fontSize:10,padding:"2px 8px",borderRadius:4},children:["Can edit: ",o.default_permissions.edit.types.join(", ")," (",o.default_permissions.edit.scope,")"]}),(null==(r=o.default_permissions.review)?void 0:r.length)>0&&s.jsxs("span",{style:{background:"rgba(168,85,247,0.15)",color:"#a855f7",fontSize:10,padding:"2px 8px",borderRadius:4},children:["Can review: ",o.default_permissions.review.join(", ")]})]})]}):null})()})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",color:"#cbd5e1",fontSize:13,fontWeight:600,marginBottom:8},children:"Project Pitch"}),s.jsx("textarea",{value:u,onChange:e=>b(e.target.value),placeholder:"Describe your project and what you're looking for...",style:{width:"100%",minHeight:150,background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:12,color:"#f8fafc",fontSize:14,fontFamily:"inherit",resize:"vertical"}}),s.jsxs("div",{style:{fontSize:11,color:"#64748b",marginTop:4},children:[u.length,"/1000 characters"]})]}),s.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:12,padding:20},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[s.jsxs("div",{children:[s.jsx("div",{style:{color:"#f8fafc",fontSize:15,fontWeight:600},children:"Contract Tasks"}),s.jsx("div",{style:{color:"#94a3b8",fontSize:12,marginTop:2},children:"Define specific deliverables with deadlines. These become binding after acceptance."})]}),s.jsx("button",{onClick:()=>{$([...H,{id:Math.random().toString(36).substr(2,9),title:"",description:"",deadline:I()}]),O(!0)},style:{background:"rgba(245,158,11,0.15)",border:"1px solid #f59e0b",color:"#f59e0b",padding:"8px 16px",borderRadius:8,fontWeight:600,cursor:"pointer",fontSize:13},children:"+ Add Task"})]}),0===H.length?s.jsx("div",{style:{padding:24,textAlign:"center",color:"#64748b",fontSize:13,border:"1px dashed #334155",borderRadius:8},children:"No tasks defined yet. Add tasks to create a concrete contract."}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:H.map((e,t)=>s.jsx("div",{style:{background:"#0f172a",border:"1px solid #334155",borderRadius:8,padding:16},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12},children:[s.jsxs("div",{style:{flex:1,display:"grid",gap:12},children:[s.jsxs("div",{style:{display:"flex",gap:12},children:[s.jsxs("div",{style:{flex:2},children:[s.jsxs("label",{style:{display:"block",color:"#94a3b8",fontSize:11,marginBottom:4},children:["Task ",t+1,": Title *"]}),s.jsx("input",{type:"text",value:e.title,onChange:t=>Q(e.id,"title",t.target.value),placeholder:"e.g., Character designs for Chapter 1",style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:6,padding:10,color:"#f8fafc",fontSize:13}})]}),s.jsxs("div",{style:{flex:1},children:[s.jsx("label",{style:{display:"block",color:"#94a3b8",fontSize:11,marginBottom:4},children:"Deadline *"}),s.jsx("input",{type:"datetime-local",value:e.deadline,onChange:t=>Q(e.id,"deadline",t.target.value),style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:6,padding:10,color:"#f8fafc",fontSize:13}})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",color:"#94a3b8",fontSize:11,marginBottom:4},children:"Description (optional)"}),s.jsx("textarea",{value:e.description,onChange:t=>Q(e.id,"description",t.target.value),placeholder:"Detailed requirements, expectations, or notes...",rows:2,style:{width:"100%",background:"#1e293b",border:"1px solid #334155",borderRadius:6,padding:10,color:"#f8fafc",fontSize:13,fontFamily:"inherit",resize:"vertical"}})]})]}),s.jsx("button",{onClick:()=>{return t=e.id,void $(H.filter(e=>e.id!==t));var t},style:{background:"transparent",border:"none",color:"#ef4444",fontSize:18,cursor:"pointer",padding:4},children:"×"})]})},e.id))}),H.length>0&&s.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(245,158,11,0.1)",borderRadius:8,display:"flex",alignItems:"center",gap:8},children:[s.jsx("span",{style:{fontSize:16},children:"⚠️"}),s.jsx("span",{style:{color:"#f59e0b",fontSize:12},children:"Tasks become immutable after the collaborator accepts. Changes require mutual agreement."})]})]}),r&&s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",color:"#cbd5e1",fontSize:13,fontWeight:600,marginBottom:12},children:"Editing Permissions"}),s.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12},children:[{key:"text",label:"Text",value:X,setter:E},{key:"images",label:"Images",value:U,setter:N},{key:"audio",label:"Audio",value:Y,setter:J},{key:"video",label:"Video",value:Z,setter:G}].map(e=>s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 16px",background:e.value?"rgba(16,185,129,0.15)":"#1e293b",border:"1px solid "+(e.value?"#10b981":"#334155"),borderRadius:8,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:e.value,onChange:t=>e.setter(t.target.checked),style:{accentColor:"#10b981"}}),s.jsx("span",{style:{color:e.value?"#10b981":"#94a3b8",fontSize:13},children:e.label})]},e.key))})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",color:"#cbd5e1",fontSize:13,fontWeight:600,marginBottom:8},children:["Revenue Split for @",i.username,": ",g,"%"]}),s.jsx("input",{type:"range",min:0,max:100,step:5,value:g,onChange:e=>h(parseInt(e.target.value)),style:{width:"100%"}}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"#64748b",marginTop:4},children:[s.jsxs("span",{children:["You keep: ",100-g,"%"]}),s.jsxs("span",{children:["They get: ",g,"%"]})]})]}),s.jsxs("div",{style:{background:"#1e293b",border:"1px solid #334155",borderRadius:8,padding:16},children:[s.jsx("div",{style:{color:"#94a3b8",fontSize:12,fontWeight:600,marginBottom:12,textTransform:"uppercase",letterSpacing:.5},children:"Preview"}),s.jsx("div",{style:{color:"#cbd5e1",fontSize:13,whiteSpace:"pre-wrap",lineHeight:1.6},children:u||"(Your pitch will appear here)"}),H.length>0&&s.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid #334155"},children:[s.jsxs("div",{style:{fontSize:12,color:"#f59e0b",fontWeight:600,marginBottom:8},children:["Contract Tasks (",H.length,")"]}),H.map((e,t)=>s.jsxs("div",{style:{padding:10,background:"#0f172a",borderRadius:6,marginBottom:8,borderLeft:"3px solid #f59e0b"},children:[s.jsx("div",{style:{color:"#f8fafc",fontSize:13,fontWeight:600},children:e.title||"(Untitled)"}),e.description&&s.jsx("div",{style:{color:"#94a3b8",fontSize:12,marginTop:4},children:e.description}),s.jsxs("div",{style:{color:"#f59e0b",fontSize:11,marginTop:6},children:["Due: ",e.deadline?new Date(e.deadline).toLocaleDateString():"(No deadline)"]})]},e.id))]}),s.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid #334155"},children:[s.jsx("div",{style:{fontSize:12,color:"#94a3b8"},children:"Revenue Split"}),s.jsxs("div",{style:{display:"flex",gap:12,marginTop:8},children:[s.jsxs("div",{style:{flex:100-g,background:"#334155",height:32,borderRadius:6,display:"grid",placeItems:"center",color:"#cbd5e1",fontSize:12,fontWeight:600},children:["You: ",100-g,"%"]}),s.jsxs("div",{style:{flex:g,background:"#f59e0b",height:32,borderRadius:6,display:"grid",placeItems:"center",color:"#000",fontSize:12,fontWeight:600},children:["@",i.username,": ",g,"%"]})]})]})]}),k&&s.jsx("div",{style:{background:"rgba(16,185,129,0.1)",border:"1px solid #10b981",color:"#10b981",padding:12,borderRadius:8,fontSize:13},children:k}),z&&s.jsx("div",{style:{background:"rgba(239,68,68,0.1)",border:"1px solid #ef4444",color:"#ef4444",padding:12,borderRadius:8,fontSize:13},children:z}),s.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[s.jsx("button",{onClick:t,style:{background:"transparent",border:"1px solid #334155",color:"#cbd5e1",padding:"10px 20px",borderRadius:8,fontWeight:600,cursor:"pointer"},children:"Cancel"}),s.jsx("button",{onClick:async()=>{S(""),w("");for(const t of H){if(!t.title.trim())return void w("All tasks must have a title");if(!t.deadline)return void w("All tasks must have a deadline")}v(!0);try{const e=await async function(){try{const e=await fetch("/api/auth/csrf/",{credentials:"include"}),t=await e.json();return(null==t?void 0:t.csrfToken)||""}catch{return""}}();if(r){const s=await fetch(`/api/collaborative-projects/${r}/invite_collaborator/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({user_id:i.id,role:f||"Collaborator",role_definition_id:D||void 0,revenue_percentage:g,can_edit_text:X,can_edit_images:U,can_edit_audio:Y,can_edit_video:Z,tasks:H.map(e=>({title:e.title,description:e.description,deadline:new Date(e.deadline).toISOString()}))})});if(s.ok)S(`Invite sent to @${i.username}!`),setTimeout(()=>{t(),ee()},2e3);else{const e=await s.json();w(e.error||"Failed to send invite")}}else{const r=await fetch("/api/invite/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({message:u,equity_percent:g,collaborators:[i.id],attachments:"",role:f||"Collaborator",project_type:C,tasks:H.map(e=>({title:e.title,description:e.description,deadline:new Date(e.deadline).toISOString()}))})});if(r.ok)S(`Invite sent to @${i.username}!`),setTimeout(()=>{t(),ee()},2e3);else{const e=await r.text();w(`Failed to send invite: ${e}`)}}}catch(e){w(`Error: ${e.message||"Unknown error"}`)}finally{v(!1)}},disabled:j||!u.trim()||u.length>1e3,style:{background:j?"#64748b":"#f59e0b",color:"#000",border:"none",padding:"10px 24px",borderRadius:8,fontWeight:700,cursor:j?"not-allowed":"pointer",opacity:!u.trim()||u.length>1e3?.5:1},children:j?"Sending...":"Send Invite"})]})]})]})})}export{y as A,_ as I};
//# sourceMappingURL=InviteModal-DCALKypy.js.map
